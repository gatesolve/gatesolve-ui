{"version":3,"sources":["../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createClass.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/asyncToGenerator.js","../node_modules/inversify/lib/inversify.js","../../src/types.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createForOfIteratorHelper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/slicedToArray.js","../../../src/events/EventBus.ts","../../../src/events/EventType.ts","../node_modules/inversify/lib/constants/metadata_keys.js","../node_modules/asynciterator/asynciterator.js","../../../src/pathfinding/PathfinderProvider.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass.js","../../../src/enums/RoutingPhase.ts","../../../src/loader/ldloader.ts","../node_modules/process/browser.js","../node_modules/inversify/lib/constants/error_msgs.js","../node_modules/jsonld/lib/util.js","../../../../src/fetcher/tiles/RoutableTileProviderDefault.ts","../../../src/util/Geo.ts","../../../src/enums/ReachableStopsSearchPhase.ts","../../../src/enums/TravelMode.ts","../node_modules/inversify/lib/planning/metadata.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/getPrototypeOf.js","../node_modules/jsonld/lib/types.js","../../../src/uri/uri.ts","../../../../src/fetcher/profiles/ProfileProviderDefault.ts","../node_modules/jsonld/lib/JsonLdError.js","../../../src/uri/constants.ts","../../../src/fetcher/LDFetch.ts","../node_modules/inversify/lib/constants/literal_types.js","../../../../src/entities/tiles/RoutableTileRegistry.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toConsumableArray.js","../../../../src/entities/tiles/TileCoordinate.ts","../../src/Context.ts","../node_modules/buffer/index.js","../node_modules/jsonld/lib/graphTypes.js","../../../../src/fetcher/connections/ConnectionsFetcherRaw.ts","../../../../src/fetcher/connections/ConnectionsProviderDefault.ts","../../../../src/fetcher/hydra/HydraTemplateFetcherDefault.ts","../../../../src/fetcher/profiles/ProfileFetcherDefault.ts","../../../../src/fetcher/stops/StopsProviderDefault.ts","../../../../src/fetcher/tiles/RoutableTileFetcherRaw.ts","../../../../src/pathfinding/dijkstra-tree/DijkstraTree.ts","../../../../src/planner/public-transport/JourneyExtractorProfile.ts","../../../src/query-runner/LocationResolverConvenience.ts","../node_modules/inversify/lib/annotation/decorator_utils.js","../../../../src/fetcher/catalog/CatalogFetcherDefault.ts","../node_modules/ldfetch/lib/ldfetch.js","../node_modules/inherits/inherits_browser.js","../../../../src/fetcher/catalog/CatalogProviderDefault.ts","../../src/index.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/get.js","../../../../src/planner/road/RoadPlannerPathfinding.ts","../../../../src/planner/stops/ReachableStopsFinderDelaunay.ts","../../../src/util/Units.ts","../../../../src/planner/configurations/Planner.ts","../../../../src/fetcher/stops/StopsFetcherRaw.ts","../node_modules/inversify/lib/utils/id.js","../../../src/util/Tiles.ts","../node_modules/timers-browserify/main.js","../node_modules/events/events.js","../node_modules/readable-stream/lib/_stream_duplex.js","../node_modules/rdf-canonize/lib/util.js","../node_modules/jsonld/lib/context.js","../../../../src/planner/public-transport/CSAEarliestArrival.ts","../../../src/planner/Path.ts","../node_modules/inversify/lib/utils/serialization.js","../../../src/pathfinding/graph.ts","../node_modules/readable-stream/readable-browser.js","../node_modules/core-util-is/lib/util.js","../node_modules/n3/src/IRIs.js","../node_modules/node-forge/lib/forge.js","../node_modules/jsonld/lib/constants.js","../node_modules/jsonld/lib/url.js","../../../../src/loader/views/single.ts","../../../../src/util/iterators/MergeIterator.ts","../../../../src/fetcher/connections/ConnectionSelectors.ts","../../../src/enums/DropOffType.ts","../../../src/planner/Leg.ts","../../../../src/query-runner/exponential/QueryRunnerExponential.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/isNativeReflectConstruct.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/setPrototypeOf.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js","../node_modules/reflect-metadata/Reflect.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/process-nextick-args/index.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/wrapNativeSuper.js","../node_modules/jsonld/lib/nodeMap.js","../node_modules/tiles-in-bbox/index.js","../../../../src/fetcher/footpaths/FootpathsProviderDefault.ts","../node_modules/tinyqueue/index.js","../../../src/enums/PickupType.ts","../../../src/enums/ReachableStopsFinderMode.ts","../../../../src/pathfinding/mixed-dijkstra/MixedDijkstra.ts","../../../src/query-runner/QueryRunnerDefault.ts","../../../../src/planner/stops/ReachableStopsFinderOnlySelf.ts","../node_modules/inversify/lib/syntax/binding_on_syntax.js","../node_modules/inversify/lib/syntax/binding_when_syntax.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/setPrototypeOf.js","../node_modules/readable-stream/node_modules/safe-buffer/index.js","../node_modules/readable-stream/lib/_stream_writable.js","../node_modules/url/url.js","../node_modules/n3/src/N3Lexer.js","../node_modules/stream-browserify/index.js","../node_modules/jsonld/lib/jsonld.js","../node_modules/rdf-canonize/lib/index.js","../node_modules/rdf-canonize/lib/IdentifierIssuer.js","../node_modules/node-forge/lib/md.js","../node_modules/rdf-canonize/lib/NQuads.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/defineProperty.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/toArray.js","../node_modules/jsonld/lib/RequestQueue.js","../node_modules/@rdfjs/data-model/index.js","../node_modules/cross-fetch/dist/browser-ponyfill.js","../node_modules/isomorphic-fetch/fetch-npm-browserify.js","../../../src/configs/default.ts","../../../../../src/planner/public-transport/CSA/FootpathQueue.ts","../../../src/planner/Step.ts","../../../../src/planner/stops/ReachableStopsFinderFootpaths.ts","../../../../src/planner/configurations/FlexibleRoadPlanner.ts","../../../src/data/Datatypes.ts","../../../../src/fetcher/footpaths/FootpathsProviderRaw.ts","../../../../src/fetcher/tiles/RoutableTileProviderTransit.ts","../../../../src/fetcher/tree/HypermediaTreeFetcherDefault.ts","../../../../src/fetcher/tree/HypermediaTreeProviderDefault.ts","../../../../src/pathfinding/bidirdijkstra/BidirDijkstra.ts","../../../../src/planner/stops/ReachableStopsFinderBirdsEyeCached.ts","../node_modules/n3/src/N3DataFactory.js","../node_modules/n3/src/N3Parser.js","../node_modules/n3/src/N3Writer.js","../node_modules/n3/src/N3Store.js","../node_modules/n3/src/N3StreamParser.js","../node_modules/n3/src/N3StreamWriter.js","../node_modules/n3/src/N3Util.js","../node_modules/inversify/lib/planning/metadata_reader.js","../node_modules/inversify/lib/utils/exceptions.js","../node_modules/inversify/lib/annotation/inject.js","../node_modules/inversify/lib/planning/target.js","../node_modules/inversify/lib/syntax/binding_when_on_syntax.js","../node_modules/inversify/lib/syntax/constraint_helpers.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/iterableToArray.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/isNativeReflectConstruct.js","../../../../src/entities/tiles/RoutableTile.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/nonIterableRest.js","../../../src/configs/road_planner.ts","../node_modules/node-libs-browser/node_modules/util/util.js","../node_modules/q/q.js","../node_modules/stream-http/index.js","../node_modules/isarray/index.js","../node_modules/stream-http/lib/capability.js","../node_modules/stream-http/lib/response.js","../node_modules/readable-stream/lib/_stream_readable.js","../node_modules/readable-stream/lib/internal/streams/stream-browser.js","../node_modules/readable-stream/lib/internal/streams/destroy.js","../node_modules/string_decoder/lib/string_decoder.js","../node_modules/readable-stream/lib/_stream_transform.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","../node_modules/rdfxmlprocessor/src/uri-join.js","../node_modules/xmldom/dom.js","../node_modules/rdf-canonize/lib/URDNA2015.js","../node_modules/rdf-canonize/lib/MessageDigest-browser.js","../node_modules/node-forge/lib/util.js","../node_modules/rdf-canonize/lib/Permutator.js","../node_modules/rdf-canonize/lib/URDNA2015Sync.js","../node_modules/@rdfjs/data-model/lib/default-graph.js","../node_modules/@rdfjs/data-model/lib/named-node.js","../node_modules/wellknown/index.js","../../../../src/analytics/isochrones/main.ts","../../../../src/entities/footpaths/footpath.ts","../../../../src/pathfinding/dijkstra/Dijkstra.ts","../../../../src/pathfinding/dijkstra/DijkstraInstance.ts","../../../../src/planner/public-transport/JourneyExtractorEarliestArrival.ts","../../../../../../src/planner/public-transport/CSA/util/ProfileUtil.ts","../../../src/util/Iterators.ts","../node_modules/asynciterator-promiseproxy/index.js","../../src/Defaults.ts","../../../src/errors/InvalidQueryError.ts","../../../src/errors/LocationResolverError.ts","../node_modules/robust-orientation/orientation.js","../node_modules/two-product/two-product.js","../../../../src/analytics/traffic/main.ts","../../src/create.ts","../../../src/data/classify.ts","../../src/QueryMode.ts","../../../../src/planner/configurations/DissectPlanner.ts","../../../../src/pathfinding/bidirdijkstra/BidirDijkstraInstance.ts","../../../../src/planner/configurations/FlexibleProfileTransitPlanner.ts","../../../../src/entities/tree/geometry.ts","../../../../src/planner/configurations/FlexibleTransitPlanner.ts","../../../../src/planner/configurations/GeospatialFragmentedPlanner.ts","../../../../src/planner/configurations/ReducedCarPlanner.ts","../../../../src/planner/configurations/TriangleTransitPlanner.ts","../../../../src/planner/configurations/ZoiDemoPlanner.ts","../../../src/uri/JSONLDContext.ts","../node_modules/delaunator/index.js","../node_modules/d3-delaunay/src/path.js","../node_modules/d3-delaunay/src/polygon.js","../node_modules/d3-delaunay/src/voronoi.js","../node_modules/d3-delaunay/src/delaunay.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn.js","../node_modules/inversify/lib/container/container.js","../node_modules/inversify/lib/bindings/binding.js","../node_modules/inversify/lib/planning/planner.js","../node_modules/inversify/lib/bindings/binding_count.js","../node_modules/inversify/lib/planning/context.js","../node_modules/inversify/lib/planning/plan.js","../node_modules/inversify/lib/planning/reflection_utils.js","../node_modules/inversify/lib/planning/queryable_string.js","../node_modules/inversify/lib/planning/request.js","../node_modules/inversify/lib/resolution/resolver.js","../node_modules/inversify/lib/resolution/instantiation.js","../node_modules/inversify/lib/syntax/binding_to_syntax.js","../node_modules/inversify/lib/syntax/binding_in_when_on_syntax.js","../node_modules/inversify/lib/syntax/binding_in_syntax.js","../node_modules/inversify/lib/container/container_snapshot.js","../node_modules/inversify/lib/container/lookup.js","../node_modules/inversify/lib/container/container_module.js","../node_modules/inversify/lib/annotation/injectable.js","../node_modules/inversify/lib/annotation/tagged.js","../node_modules/inversify/lib/annotation/named.js","../node_modules/inversify/lib/annotation/optional.js","../node_modules/inversify/lib/annotation/unmanaged.js","../node_modules/inversify/lib/annotation/multi_inject.js","../node_modules/inversify/lib/annotation/target_name.js","../node_modules/inversify/lib/annotation/post_construct.js","../node_modules/inversify/lib/utils/binding_utils.js","../../../../src/entities/tiles/RoutableTileSet.ts","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/nonIterableSpread.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/possibleConstructorReturn.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/typeof.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/assertThisInitialized.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/haversine/haversine.js","../node_modules/node-libs-browser/node_modules/util/support/isBufferBrowser.js","../node_modules/node-libs-browser/node_modules/inherits/inherits_browser.js","../node_modules/setimmediate/setImmediate.js","../node_modules/ldfetch/lib/BrowserHttpFetcher.js","../node_modules/stream-http/lib/request.js","../node_modules/base64-js/index.js","../node_modules/ieee754/index.js","../node_modules/readable-stream/lib/internal/streams/BufferList.js","../node_modules/util-deprecate/browser.js","../node_modules/safe-buffer/index.js","../node_modules/readable-stream/lib/_stream_passthrough.js","../node_modules/to-arraybuffer/index.js","../node_modules/xtend/immutable.js","../node_modules/builtin-status-codes/browser.js","../node_modules/node-libs-browser/node_modules/punycode/punycode.js","../node_modules/webpack/buildin/module.js","../node_modules/url/util.js","../node_modules/querystring-es3/index.js","../node_modules/querystring-es3/decode.js","../node_modules/querystring-es3/encode.js","../node_modules/https-browserify/index.js","../node_modules/readable-stream/writable-browser.js","../node_modules/readable-stream/duplex-browser.js","../node_modules/readable-stream/transform.js","../node_modules/readable-stream/passthrough.js","../node_modules/rdfxmlprocessor/src/rdfxmlprocessor.js","../node_modules/rdfxmlprocessor/src/Frame.js","../node_modules/xmldom/dom-parser.js","../node_modules/xmldom/sax.js","../node_modules/ldfetch/lib/JsonldToRDF.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectWithoutProperties.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js","../node_modules/rdf-canonize/lib/AsyncAlgorithm.js","../node_modules/node-forge/lib/sha1.js","../node_modules/node-forge/lib/baseN.js","../node_modules/node-forge/lib/sha256.js","../node_modules/rdf-canonize/lib/URGNA2012.js","../node_modules/rdf-canonize/lib/URGNA2012Sync.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/isNativeFunction.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/construct.js","../node_modules/jsonld/lib/NQuads.js","../node_modules/jsonld/lib/Rdfa.js","../node_modules/jsonld/lib/expand.js","../node_modules/jsonld/lib/ActiveContextCache.js","../node_modules/jsonld/lib/flatten.js","../node_modules/jsonld/lib/fromRdf.js","../node_modules/jsonld/lib/toRdf.js","../node_modules/canonicalize/lib/canonicalize.js","../node_modules/jsonld/lib/frame.js","../node_modules/jsonld/lib/compact.js","../node_modules/jsonld/lib/documentLoaders/node.js","../node_modules/jsonld/lib/documentLoaders/xhr.js","../node_modules/jsonld/lib/JsonLdProcessor.js","../node_modules/@rdfjs/data-model/lib/data-factory.js","../node_modules/@rdfjs/data-model/lib/blank-node.js","../node_modules/@rdfjs/data-model/lib/literal.js","../node_modules/@rdfjs/data-model/lib/quad.js","../node_modules/@rdfjs/data-model/lib/variable.js","../node_modules/ldfetch/lib/RDFaToRDF.js","../node_modules/rdfa-processor/src/index.js","../node_modules/rdfa-processor/src/RDFaProcessor.js","../node_modules/rdfa-processor/src/URI.js","../node_modules/ldfetch/lib/BrowserHTMLParser.js","../../../../src/entities/catalog/catalog.ts","../../../../src/entities/catalog/dataset.ts","../../../../src/entities/catalog/dataset_distribution.ts","../../../../src/loader/results/single.ts","../node_modules/whatwg-fetch/fetch.js","../node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/superPropBase.js","../../../../src/fetcher/connections/ConnectionsProviderSingle.ts","../../../../src/fetcher/connections/BackwardConnectionIterator.ts","../../../../src/fetcher/connections/ForwardConnectionIterator.ts","../../../../src/loader/views/index.ts","../../../../src/loader/results/index.ts","../../../../src/entities/hydra/mapping.ts","../../../../src/entities/hydra/search.ts","../node_modules/uri-templates/uri-templates.js","../../../../src/entities/profile/CharacteresticProfile.ts","../../../../src/entities/profile/DynamicProfile.ts","../../../../src/entities/profile/Profile.ts","../../../../src/entities/profile/ProfileConclusion.ts","../../../../src/entities/profile/ProfileCondition.ts","../../../../src/entities/profile/ProfileRule.ts","../../../../../src/fetcher/stops/ld-fetch/StopsFetcherLDFetch.ts","../../../src/util/Rdf.ts","../../../../src/entities/tiles/RoutableTileNode.ts","../../../../src/entities/tiles/RoutableTileWay.ts","../../../../src/fetcher/tiles/RoutableTileProviderIntermediate.ts","../../../../src/pathfinding/dijkstra-tree/DijkstraTreeInstance.ts","../node_modules/asynciterator-promiseproxy/lib/PromiseProxyIterator.js","../../../../src/util/iterators/FilterUniqueIterator.ts","../../../../src/util/iterators/FlatMapIterator.ts","../../../../src/query-runner/exponential/ExponentialQueryIterator.ts","../../../src/query-runner/LocationResolverDefault.ts","../../../../src/analytics/isochrones/visualize.ts","../node_modules/concaveman/index.js","../node_modules/rbush/index.js","../node_modules/rbush/node_modules/quickselect/quickselect.js","../node_modules/monotone-convex-hull-2d/index.js","../node_modules/robust-sum/robust-sum.js","../node_modules/robust-scale/robust-scale.js","../node_modules/two-sum/two-sum.js","../node_modules/robust-subtract/robust-diff.js","../node_modules/concaveman/node_modules/tinyqueue/index.js","../node_modules/point-in-polygon/index.js","../../../src/util/UnionFind.ts","../../../src/configs/dissect.ts","../../../../src/pathfinding/mixed-dijkstra/MixedDijkstraInstance.ts","../../../src/configs/flexible_profile_transit.ts","../../../../src/entities/tree/relation.ts","../../../../src/entities/tree/tree.ts","../../../../src/planner/public-transport/CSAProfile.ts","../../../src/util/Vectors.ts","../../../../../../src/planner/public-transport/CSA/data-structure/stops/Profile.ts","../../../../../../src/planner/public-transport/CSA/data-structure/trips/EarliestArrivalByTransfers.ts","../../../../src/planner/stops/ReachableStopsFinderBirdsEye.ts","../../../src/configs/flexible_transit.ts","../../../src/configs/geospatial_fragment.ts","../../../../src/planner/public-transport/CSAEarliestArrivalDynamic.ts","../../../src/configs/reduced_car.ts","../../../../src/planner/road/RoadPlannerPathfindingExperimental.ts","../../../src/configs/triangle_transit.ts","../../../../src/planner/stops/ReachableStopsFinderFootpathsVerbose.ts","../../../src/configs/zoi_demo_planner.ts","../../../../src/fetcher/tiles/CompositeTileProvider.ts","../node_modules/plannerjs/node_modules/rbush/rbush.min.js","../../../../src/fetcher/tiles/ZoiTileFetcherRaw.ts","../../../../src/entities/tiles/ZoiSubject.ts","../../../../src/entities/tiles/ZoiTile.ts","../../../../src/entities/tiles/ZoiZone.ts","../../../../src/entities/connections/page.ts","../node_modules/proj4/lib/global.js","../node_modules/proj4/lib/constants/values.js","../node_modules/proj4/lib/constants/PrimeMeridian.js","../node_modules/proj4/lib/constants/units.js","../node_modules/proj4/lib/match.js","../node_modules/proj4/lib/projString.js","../node_modules/wkt-parser/parser.js","../node_modules/wkt-parser/process.js","../node_modules/wkt-parser/index.js","../node_modules/proj4/lib/defs.js","../node_modules/proj4/lib/parseCode.js","../node_modules/proj4/lib/extend.js","../node_modules/proj4/lib/common/msfnz.js","../node_modules/proj4/lib/common/sign.js","../node_modules/proj4/lib/common/adjust_lon.js","../node_modules/proj4/lib/common/tsfnz.js","../node_modules/proj4/lib/common/phi2z.js","../node_modules/proj4/lib/projections/longlat.js","../node_modules/proj4/lib/projections.js","../node_modules/proj4/lib/projections/merc.js","../node_modules/proj4/lib/constants/Ellipsoid.js","../node_modules/proj4/lib/constants/Datum.js","../node_modules/proj4/lib/datum.js","../node_modules/proj4/lib/Proj.js","../node_modules/proj4/lib/deriveConstants.js","../node_modules/proj4/lib/datumUtils.js","../node_modules/proj4/lib/datum_transform.js","../node_modules/proj4/lib/adjust_axis.js","../node_modules/proj4/lib/common/toPoint.js","../node_modules/proj4/lib/checkSanity.js","../node_modules/proj4/lib/transform.js","../node_modules/proj4/lib/core.js","../node_modules/mgrs/mgrs.js","../node_modules/proj4/lib/Point.js","../node_modules/proj4/lib/common/pj_enfn.js","../node_modules/proj4/lib/common/pj_mlfn.js","../node_modules/proj4/lib/common/pj_inv_mlfn.js","../node_modules/proj4/lib/projections/tmerc.js","../node_modules/proj4/lib/common/sinh.js","../node_modules/proj4/lib/common/hypot.js","../node_modules/proj4/lib/common/asinhy.js","../node_modules/proj4/lib/common/log1py.js","../node_modules/proj4/lib/common/gatg.js","../node_modules/proj4/lib/common/clens_cmplx.js","../node_modules/proj4/lib/common/cosh.js","../node_modules/proj4/lib/projections/etmerc.js","../node_modules/proj4/lib/common/clens.js","../node_modules/proj4/lib/projections/utm.js","../node_modules/proj4/lib/common/adjust_zone.js","../node_modules/proj4/lib/common/srat.js","../node_modules/proj4/lib/projections/gauss.js","../node_modules/proj4/lib/projections/sterea.js","../node_modules/proj4/lib/projections/stere.js","../node_modules/proj4/lib/projections/somerc.js","../node_modules/proj4/lib/projections/omerc.js","../node_modules/proj4/lib/projections/lcc.js","../node_modules/proj4/lib/projections/krovak.js","../node_modules/proj4/lib/common/mlfn.js","../node_modules/proj4/lib/common/e0fn.js","../node_modules/proj4/lib/common/e1fn.js","../node_modules/proj4/lib/common/e2fn.js","../node_modules/proj4/lib/common/e3fn.js","../node_modules/proj4/lib/common/gN.js","../node_modules/proj4/lib/common/adjust_lat.js","../node_modules/proj4/lib/common/imlfn.js","../node_modules/proj4/lib/projections/cass.js","../node_modules/proj4/lib/common/qsfnz.js","../node_modules/proj4/lib/projections/laea.js","../node_modules/proj4/lib/common/asinz.js","../node_modules/proj4/lib/projections/aea.js","../node_modules/proj4/lib/projections/gnom.js","../node_modules/proj4/lib/projections/cea.js","../node_modules/proj4/lib/common/iqsfnz.js","../node_modules/proj4/lib/projections/eqc.js","../node_modules/proj4/lib/projections/poly.js","../node_modules/proj4/lib/projections/nzmg.js","../node_modules/proj4/lib/projections/mill.js","../node_modules/proj4/lib/projections/sinu.js","../node_modules/proj4/lib/projections/moll.js","../node_modules/proj4/lib/projections/eqdc.js","../node_modules/proj4/lib/projections/vandg.js","../node_modules/proj4/lib/projections/aeqd.js","../node_modules/proj4/lib/projections/ortho.js","../node_modules/proj4/lib/projections/qsc.js","../node_modules/proj4/lib/projections/robin.js","../node_modules/proj4/lib/projections/geocent.js","../node_modules/proj4/projs.js","../node_modules/proj4/lib/index.js"],"names":["module","exports","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","protoProps","staticProps","prototype","asyncGeneratorStep","gen","resolve","reject","_next","_throw","arg","info","value","error","done","Promise","then","fn","self","this","args","arguments","apply","err","undefined","keys","require","METADATA_KEY","container_1","Container","literal_types_1","BindingScopeEnum","BindingTypeEnum","TargetTypeEnum","container_module_1","AsyncContainerModule","ContainerModule","injectable_1","injectable","tagged_1","tagged","named_1","named","inject_1","inject","LazyServiceIdentifer","optional_1","optional","unmanaged_1","unmanaged","multi_inject_1","multiInject","target_name_1","targetName","post_construct_1","postConstruct","metadata_reader_1","MetadataReader","id_1","id","decorator_utils_1","decorate","constraint_helpers_1","traverseAncerstors","taggedConstraint","namedConstraint","typeConstraint","serialization_1","getServiceIdentifierAsString","binding_utils_1","multiBindToService","Symbol","unsupportedIterableToArray","o","iterator","Array","isArray","F","s","n","e","_e","f","it","normalCompletion","didErr","step","next","_e2","getPrototypeOf","isNativeReflectConstruct","possibleConstructorReturn","Derived","result","Super","NewTarget","constructor","Reflect","construct","setPrototypeOf","subClass","superClass","create","arrayWithHoles","iterableToArrayLimit","nonIterableRest","arr","EventType","NAMED_TAG","NAME_TAG","UNMANAGED_TAG","OPTIONAL_TAG","INJECT_TAG","MULTI_INJECT_TAG","TAGGED","TAGGED_PROP","PARAM_TYPES","DESIGN_PARAM_TYPES","POST_CONSTRUCT","EventEmitter","STATES","AsyncIterator","call","on","waitForDataListener","_state","_readable","emit","eventName","end","destroy","_end","endAsync","setImmediate","removeListener","_addSingleListener","emitData","readable","item","_hasListeners","read","func","copyProperty","source","destination","propertyName","getProperty","setProperty","EmptyIterator","_changeState","SingletonIterator","_item","close","ArrayIterator","items","_buffer","slice","IntegerIterator","options","limit","last","start","_step","isFinite","Infinity","_last","BufferedIterator","maxBufferSize","autoStart","_pushedCount","_reading","init","_init","fillBufferAsync","fillBufferAsyncCallback","_fillBuffer","TransformIterator","isFunction","_optional","_destroySource","destroySource","getSource","_source","destinationEmitError","_destination","destinationCloseWhenDone","_closeWhenDone","destinationFillBuffer","readAndTransform","ended","optionalTransform","_transform","pushedCount","_push","SimpleTransformIterator","offset","filter","map","transform","prepend","append","_limit","_offset","Math","max","_filter","_map","_prepender","_appender","readAndTransformSimple","count","closed","mappedItem","MultiTransformIterator","_transformerQueue","ClonedIterator","_readPosition","getSourceProperty","clone","callback","_properties","HistoryReader","clones","history","readAt","pos","endsAt","register","push","unregister","cloneIndex","indexOf","splice","clonesMakeReadable","clonesEmitError","clonesEnd","object","forEach","state","subclass","newState","eventAsync","valid","each","bind","_events","listener","listeners","cause","_destroy","removeAllListeners","get","set","propertyCallbacks","properties","_propertyCallbacks","callbacks","getProperties","copy","name","setProperties","copyProperties","propertyNames","toString","details","_toStringDetails","buffer","shift","current","range","_maxBufferSize","_begin","Error","_read","neededItems","_completeClose","min","_flush","_validateSource","allowDestination","wrap","_insert","inserter","mapper","surround","skip","take","head","transformer","transformerQueue","_createTransformer","hasProperty","base","empty","single","fromArray","_classCallCheck","_createClass","RoutingPhase","triple","rawValue","triples","entity","predicate","cachedSetTimeout","cachedClearTimeout","process","defaultSetTimout","defaultClearTimeout","runTimeout","fun","setTimeout","clearTimeout","currentQueue","queue","draining","queueIndex","cleanUpNextTick","concat","drainQueue","timeout","len","run","marker","runClearTimeout","Item","array","noop","nextTick","title","browser","env","argv","version","versions","addListener","once","off","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","DUPLICATED_INJECTABLE_DECORATOR","DUPLICATED_METADATA","NULL_ARGUMENT","KEY_NOT_FOUND","AMBIGUOUS_MATCH","CANNOT_UNBIND","NOT_REGISTERED","MISSING_INJECTABLE_ANNOTATION","MISSING_INJECT_ANNOTATION","UNDEFINED_INJECT_ANNOTATION","CIRCULAR_DEPENDENCY","NOT_IMPLEMENTED","INVALID_BINDING_TYPE","NO_MORE_SNAPSHOTS_AVAILABLE","INVALID_MIDDLEWARE_RETURN","INVALID_FUNCTION_BINDING","INVALID_TO_SELF_VALUE","INVALID_DECORATOR_OPERATION","ARGUMENTS_LENGTH_MISMATCH","values","_i","CONTAINER_OPTIONS_MUST_BE_AN_OBJECT","CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE","CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE","CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK","MULTIPLE_POST_CONSTRUCT_METHODS","POST_CONSTRUCT_ERROR","CIRCULAR_DEPENDENCY_IN_FACTORY","STACK_OVERFLOW","graphTypes","types","IdentifierIssuer","JsonLdError","REGEX_LINK_HEADERS","REGEX_LINK_HEADER","REGEX_LINK_HEADER_PARAMS","DEFAULTS","accept","api","_setImmediate","_delay","_invokeCallback","rval","Map","k","v","Set","add","isObject","asArray","buildHeaders","headers","hasAccept","some","h","toLowerCase","RangeError","assign","Accept","parseLinkHeader","header","entries","match","params","exec","rel","hasOwnProperty","validateTypeValue","isString","isEmptyObject","isValid","code","subject","property","hasValue","val","isList","compareValues","addValue","propertyIsArray","valueIsArray","allowDuplicate","getValues","removeProperty","removeValue","relabelBlankNodes","input","_labelBlankNodes","issuer","element","isBlankNode","getId","sort","ki","v1","v2","isValue","compareShortestLeast","a","b","normalizeDocumentLoader","callbackify","url","remoteDoc","pop","location","TravelMode","Metadata","_getPrototypeOf","__proto__","isBoolean","isDouble","isNumber","String","isNumeric","isNaN","parseFloat","isUndefined","ns","message","Request","Singleton","Transient","ConstantValue","DynamicValue","Factory","Function","Instance","Invalid","Provider","ClassProperty","ConstructorArgument","Variable","ways","way","nodes","arrayWithoutHoles","iterableToArray","nonIterableSpread","base64","ieee754","kMaxLength","Buffer","TYPED_ARRAY_SUPPORT","createBuffer","that","Uint8Array","encodingOrOffset","allocUnsafe","from","ArrayBuffer","byteOffset","byteLength","fromArrayLike","fromArrayBuffer","string","encoding","isEncoding","actual","write","fromString","obj","isBuffer","checked","type","data","fromObject","assertSize","size","isView","loweredCase","utf8ToBytes","base64ToBytes","slowToString","hexSlice","utf8Slice","asciiSlice","latin1Slice","base64Slice","utf16leSlice","swap","m","bidirectionalIndexOf","arrayIndexOf","lastIndexOf","indexSize","arrLength","valLength","buf","readUInt16BE","foundIndex","found","j","hexWrite","Number","remaining","strLen","parsed","parseInt","substr","utf8Write","blitBuffer","asciiWrite","str","byteArray","charCodeAt","asciiToBytes","latin1Write","base64Write","ucs2Write","units","c","hi","lo","utf16leToBytes","fromByteArray","res","secondByte","thirdByte","fourthByte","tempCodePoint","firstByte","codePoint","bytesPerSequence","codePoints","fromCharCode","decodeCodePointsArray","SlowBuffer","alloc","INSPECT_MAX_BYTES","global","foo","subarray","typedArraySupport","poolSize","_augment","species","fill","allocUnsafeSlow","_isBuffer","compare","x","y","list","swap16","swap32","swap64","equals","inspect","join","thisStart","thisEnd","thisCopy","targetCopy","includes","toJSON","_arr","ret","out","toHex","bytes","checkOffset","ext","checkInt","objectWriteUInt16","littleEndian","objectWriteUInt32","checkIEEE754","writeFloat","noAssert","writeDouble","newBuf","sliceLen","readUIntLE","mul","readUIntBE","readUInt8","readUInt16LE","readUInt32LE","readUInt32BE","readIntLE","pow","readIntBE","readInt8","readInt16LE","readInt16BE","readInt32LE","readInt32BE","readFloatLE","readFloatBE","readDoubleLE","readDoubleBE","writeUIntLE","writeUIntBE","writeUInt8","floor","writeUInt16LE","writeUInt16BE","writeUInt32LE","writeUInt32BE","writeIntLE","sub","writeIntBE","writeInt8","writeInt16LE","writeInt16BE","writeInt32LE","writeInt32BE","writeFloatLE","writeFloatBE","writeDoubleLE","writeDoubleBE","targetStart","INVALID_BASE64_RE","leadSurrogate","toByteArray","trim","replace","stringtrim","base64clean","src","dst","isSubject","isSubjectReference","isGraph","isSimpleGraph","connections","context","JSONLDContext_1","default","profile","view","addMapping","uri_1","single_1","ThingView","addFilter","ERROR_MSGS","_tagParameterOrProperty","metadataKey","annotationTarget","metadata","parameterIndex","paramsOrPropertiesMetadata","isParameterDecorator","hasOwnMetadata","getMetadata","paramOrPropertyMetadata","paramOrPropertyMetadata_1","defineMetadata","_decorate","decorators","_param","paramIndex","decorator","tagParameter","tagProperty","q","Fetcher","N3","RDFXMLParser","DOMParser","JsonldToRDF","RDFaToRDF","NodeHTMLParser","jsonld","DataFactory","prefixes","fetcher","frame","response","objects","graphs","termType","graph","language","datatype","prefix","uri","getCacheStats","promise","defer","documentIRI","factory","parse","body","newPrefixes","statusCode","promises","promiseIndex","document","jsonldscriptelements","querySelectorAll","index","tag","textContent","console","promises2","all","Parser","parseFromString","ctor","superCtor","super_","TempCtor","catalogs","catalogId","classify_2","TravelMode_2","superPropBase","_get","receiver","desc","getOwnPropertyDescriptor","idCounter","scope","window","Timeout","clearFn","_id","_clearFn","setInterval","clearInterval","unref","ref","enroll","msecs","_idleTimeoutId","_idleTimeout","unenroll","_unrefActive","active","_onTimeout","clearImmediate","ReflectOwnKeys","R","ReflectApply","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","NumberIsNaN","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","_getMaxListeners","_addListener","events","existing","warning","newListener","unshift","warned","w","emitter","warn","onceWrapper","fired","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","setMaxListeners","getMaxListeners","doError","er","handler","position","originalListener","spliceOne","rawListeners","eventNames","pna","objectKeys","Duplex","util","inherits","Readable","Writable","method","allowHalfOpen","onend","_writableState","onEndNT","highWaterMark","_readableState","destroyed","cb","unhandledError","ActiveContextCache","_isArray","_isObject","_isString","_isUndefined","_isAbsoluteIri","isAbsolute","_isRelativeIri","isRelative","prependBase","parseUrl","_asArray","_compareShortestLeast","INITIAL_CONTEXT_CACHE","_expandIri","activeCtx","relativeTo","localCtx","defined","isKeyword","createTermDefinition","isPropertyTermScoped","previousContext","vocab","mapping","mappings","colon","suffix","has","_retrieveContextUrls","retrieve","doc","cycles","documentLoader","urls","_findContextUrls","u","_cycles","ctx","JSON","contextUrl","_ctx","prepended","resolved","_deepCompare","x1","x2","x1Array","k1s","k2s","k1","cache","isPropertyTermScopedContext","isTypeScopedContext","ctxs","cached","processingMode","href","protected","protectedMode","oldActiveCtx","getInitialContext","term","previousMapping","delete","simpleTerm","reverse","validKeys","kw","_termHasColon","_prefix","container","validContainers","hasSet","every","nest","expandIri","stringify","initialContext","inverse","getInverse","fastCurieMap","irisToTerms","defaultLanguage","terms","ids","iri","entry","fastCurieEntry","_addPreferredTerm","_buildIriMap","child","revertTypeScopedContext","clear","iriMap","idx","letter","typeOrLanguageValue","getContextValue","getAllContexts","Date","serviceIdentifier","getFunctionName","name_1","listRegisteredBindingsForServiceIdentifier","getBindings","registeredBindingsList","registeredBindings","implementationType","constraint","metaData","circularDependencyToException","request","childRequests","childRequest","alreadyDependencyChain","parentRequest","services","_createStringArr","req","dependencyChainToString","listMetadataForTarget","serviceIdentifierString","isTagged","isNamed","m_1","namedTag","getNamedTag","otherTags","getCustomTags","Stream","Transform","PassThrough","objectToString","isNull","isNullOrUndefined","isSymbol","isRegExp","re","isDate","d","isError","isPrimitive","RDF","XSD","SWAP","xsd","decimal","boolean","double","integer","rdf","nil","first","rest","langString","owl","sameAs","r","forSome","forAll","log","implies","usePureJavaScript","LINK_HEADER_REL","RDF_LIST","RDF_FIRST","RDF_REST","RDF_NIL","RDF_TYPE","RDF_PLAIN_LITERAL","RDF_XML_LITERAL","RDF_JSON_LITERAL","RDF_OBJECT","RDF_LANGSTRING","XSD_BOOLEAN","XSD_DOUBLE","XSD_INTEGER","XSD_STRING","parsers","simple","regex","full","parser","scheme","port","authority","normalizedPath","removeDotSegments","path","protocol","query","fragment","removeBase","root","baseSegments","split","iriSegments","output","isAbsoluteRegex","test","resultObject","addEntity","DropOffType","Step_1","_isNativeReflectConstruct","sham","Proxy","_createSuper","_setPrototypeOf","p","_inherits","_assertThisInitialized","ReferenceError","exporter","makeExporter","previous","hasOwn","supportsSymbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","supportsCreate","supportsProto","downLevel","HashMap","MakeDictionary","functionPrototype","usePolyfill","_Map","cacheSentinel","arraySentinel","MapIterator","selector","_index","_keys","_values","_selector","throw","return","_cacheKey","_cacheIndex","_find","getKey","getValue","getEntry","insert","_","CreateMapPolyfill","_Set","WeakMap","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","random","crypto","getRandomValues","msCrypto","byte","CreateWeakMapPolyfill","GetOrCreateMetadataMap","O","P","Create","targetMetadata","IsUndefined","metadataMap","OrdinaryHasOwnMetadata","MetadataKey","OrdinaryGetOwnMetadata","OrdinaryDefineOwnMetadata","MetadataValue","OrdinaryOwnMetadataKeys","GetMethod","IsCallable","IsObject","GetIterator","IteratorStep","nextValue","IteratorClose","Type","IsNull","ToPrimitive","PreferredType","hint","exoticToPrim","toString_1","valueOf","toString_2","OrdinaryToPrimitive","ToPropertyKey","argument","ToString","IsArray","IsConstructor","V","OrdinaryGetPrototypeOf","proto","prototypeProto","__","propertyKey","attributes","decorated","DecorateConstructor","DecorateProperty","metadataValue","IsPropertyKey","OrdinaryHasMetadata","parent","OrdinaryGetMetadata","OrdinaryMetadataKeys","parentKeys","ownKeys_1","_a","parentKeys_1","arrayLikeToArray","minLen","arg1","arg2","arg3","isNativeFunction","_wrapNativeSuper","Class","_cache","Wrapper","createMergedNodeMap","createNodeMap","mergeNodeMaps","node","_list","subjects","referencedNode","reverseMap","reverseProperty","itemName","mergeNodeMapGraphs","merged","mergedNode","defaultGraph","graphNames","graphName","nodeMap","lonToX","lon","zoom","latToY","lat","lat_rad","PI","tan","cos","tilesInBbox","bbox","tiles","xMin","left","xMax","right","yMin","top","yMax","bottom","z","tileId","getIdForLocation","stop","paths","getByUrl","TinyQueue","defaultCompare","_down","_up","halfLength","best","PickupType","binding_when_syntax_1","BindingOnSyntax","_binding","onActivation","BindingWhenSyntax","binding_on_syntax_1","when","whenTargetNamed","whenTargetIsDefault","whenTargetTagged","whenInjectedInto","whenParentNamed","whenParentTagged","whenAnyAncestorIs","ancestor","whenNoAncestorIs","whenAnyAncestorNamed","whenNoAncestorNamed","whenAnyAncestorTagged","whenNoAncestorTagged","whenAnyAncestorMatches","whenNoAncestorMatches","copyProps","SafeBuffer","CorkedRequest","_this","finish","corkReq","pendingcb","corkedRequestsFree","onCorkedFinish","asyncWrite","WritableState","internalUtil","deprecate","OurUint8Array","realHasInstance","destroyImpl","nop","stream","isDuplex","objectMode","writableObjectMode","hwm","writableHwm","writableHighWaterMark","defaultHwm","finalCalled","needDrain","ending","finished","noDecode","decodeStrings","defaultEncoding","writing","corked","sync","bufferProcessing","onwrite","writecb","writelen","onwriteStateUpdate","finishMaybe","errorEmitted","onwriteError","needFinish","bufferedRequest","clearBuffer","afterWrite","lastBufferedRequest","prefinished","bufferedRequestCount","_write","writev","_writev","final","_final","doWrite","chunk","onwriteDrain","l","holder","allBuffers","isBuf","callFinal","need","prefinish","getBuffer","hasInstance","pipe","_uint8ArrayToBuffer","writeAfterEnd","validChunk","newChunk","decodeChunk","writeOrBuffer","cork","uncork","setDefaultEncoding","endWritable","_undestroy","undestroy","punycode","Url","slashes","auth","host","hostname","hash","search","pathname","urlParse","relative","resolveObject","format","protocolPattern","portPattern","simplePathPattern","unwise","autoEscape","nonHostChars","hostEndingChars","hostnamePartPattern","hostnamePartStart","unsafeProtocol","hostlessProtocol","slashedProtocol","querystring","parseQueryString","slashesDenoteHost","queryIndex","splitter","uSplit","simplePath","lowerProto","atSign","hostEnd","hec","decodeURIComponent","parseHost","ipv6Hostname","hostparts","part","newpart","validParts","notHost","bit","toASCII","ae","esc","encodeURIComponent","escape","qm","charAt","tkeys","tk","tkey","rkeys","rk","rkey","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","hasTrailingSlash","up","namespaces","escapeSequence","escapeReplacements","illegalIriChars","lineModeRegExps","_iri","_unescapedIri","_simpleQuotedString","_langcode","_blank","_newline","_comment","_whitespace","_endOfFile","invalidRegExp","N3Lexer","_simpleApostropheString","_prefixed","_variable","_number","_boolean","_keyword","_sparqlKeyword","_shortPredicates","_lineMode","lineMode","_n3Mode","RegExp","n3","_comments","comments","_literalClosingPos","inputFinished","_input","outputComments","whiteSpaceMatch","comment","line","_line","firstChar","matchLength","inconclusive","_previousMarker","_unescape","reportSyntaxError","_parseLiteral","toUpperCase","token","previousToken","_syntaxError","sequence","unicode4","unicode8","escapedChar","charCode","replacement","opening","openingLength","closingPos","backslashCount","raw","substring","lines","issue","tokens","_tokenizeToEnd","t","_pendingBuffer","setEncoding","EE","dest","ondata","pause","ondrain","resume","_isStdio","onclose","didOnEnd","onerror","cleanup","canonize","NQuads","Rdfa","_expand","expand","_flatten","flatten","_fromRDF","fromRDF","_toRDF","toRDF","_frameMergedOrDefault","frameMergedOrDefault","_isSubjectReference","_getInitialContext","_processContext","_getAllContexts","_compact","compact","_compactIri","compactIri","_removePreserve","removePreserve","_createNodeMap","_createMergedNodeMap","_mergeNodeMaps","_nodejs","_browser","wrapper","_rdfParsers","_setDefaults","defaults","compactArrays","compactToRelative","skipExpansion","link","expanded","processContext","compacted","compactionMap","tmp","hasContext","graphAlias","framing","keepFreeFloatingNodes","expansionMap","toResolve","contextsToProcess","expandContext","defaultBase","documentUrl","remoteContext","flattened","embed","explicit","requireAll","omitDefault","pruneBlankNodeIdentifiers","bnodesToClear","frameContext","opts","isFrame","expandedFrame","framed","normalize","algorithm","inputFormat","parsedInput","produceGeneralizedRdf","dataset","rdfParser","parsedDataset","legacyDatasetToQuads","serialize","merge","docs","mergeNodes","_graphs","_nodeMap","_documentLoader","loadDocument","load","documentLoaders","xhr","useDocumentLoader","registerRDFParser","contentType","unregisterRDFParser","RequestQueue","JsonLdProcessor","XMLHttpRequest","rdfCanonizeNative","URDNA2015","URGNA2012","URDNA2015Sync","URGNA2012Sync","_rdfCanonizeNative","canonical","useNative","main","canonizeSync","counter","old","identifier","forge","md","algorithms","REGEX","_compareTriples","t1","t2","eoln","quad","lineNumber","_unescapeRegex","U","unique","quads","serializeQuad","g","nquad","_escapeRegex","_escape","termTypeMap","componentName","oldComponent","newComponent","startsWith","_requests","loader","_loader","__self__","fetch","DOMException","support","Blob","viewClasses","isArrayBufferView","normalizeName","normalizeValue","iteratorFor","Headers","consumed","bodyUsed","fileReaderReady","reader","onload","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","bufferClone","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","rejected","arrayBuffer","text","readAsText","readBlobAsText","chars","readArrayBufferAsText","formData","decode","json","oldValue","thisArg","methods","credentials","mode","signal","upcased","normalizeMethod","referrer","form","parseHeaders","rawHeaders","parts","Response","bodyInit","status","ok","statusText","redirectStatuses","redirect","stack","aborted","abortXhr","abort","getAllResponseHeaders","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","roadNetworkOnly","Tiles_1","accessUrls","DEFAULTGRAPH","_blankNodeCounter","Term","other","NamedNode","Literal","datatypeString","atPos","ch","dtPos","BlankNode","DefaultGraph","Quad","namedNode","blankNode","variable","literal","languageOrDataType","isInteger","internal","Triple","fromId","endPos","toId","blankNodePrefix","blankNodeCount","N3Parser","_contextStack","_graph","_setBase","baseIRI","initDataFactory","isTurtle","isTriG","isNTriples","isNQuads","isN3","isLineMode","_supportsNamedGraphs","_readPredicateOrNamedGraph","_readPredicate","_supportsQuads","_resolveRelativeIRI","_blankNodePrefix","_lexer","lexer","_explicitQuantifiers","explicitQuantifiers","_blankNode","fragmentPos","_base","_basePath","_baseRoot","_baseScheme","n3Mode","_inversePredicate","blankPrefix","_prefixes","quantified","_quantified","_subject","_predicate","_object","_error","_callback","_sparqlStyle","_readPrefix","_readBaseIRI","_readSubject","_readNamedGraphLabel","quantifier","_resolveIRI","_namedNode","_saveContext","_readBlankNodeHead","_readListItem","_readPunctuation","N3_FORSOME","_quantifier","_readQuantifierList","N3_FORALL","_readEntity","_getPathReader","ABBREVIATIONS","_readBlankNodeTail","_readObject","_literalValue","_readDataTypeOrLang","_literal","_getContextEndReader","_readGraph","_readBlankNodePunctuation","_emit","_restoreContext","_readPredicateAfterBlank","previousList","_readListItemDataTypeOrLang","_completeLiteral","listItem","_readCallback","inversePredicate","_readFormulaTail","_readInTopContext","_readQuadPunctuation","_readPrefixIRI","prefixNode","_prefixCallback","_readDeclarationPunctuation","_readNamedGraphBlankLabel","QUANTIFIERS_GRAPH","_readQuantifierPunctuation","afterPath","_afterPath","_readPath","_readForwardPath","_readBackwardPath","contextStack","_quad","_removeDotSegments","pathStart","segmentStart","quadCallback","prefixCallback","tokenize","N3DataFactory","escapeAll","escapedCharacters","SerializedTerm","N3Writer","outputStream","_prefixRegex","_lists","lists","_outputStream","_endStream","_writeQuad","_writeQuadLine","_prefixIRIs","addPrefixes","_inDefaultGraph","_encodeIriOrBlank","_encodeObject","_encodePredicate","_prefixMatch","quadToString","characterReplacer","prefixMatch","_encodeLiteral","addQuad","prefixIRIs","hasPrefixes","IRIlist","prefixList","prefixIRI","children","contents","elements","_blockedWrite","singleDone","character","N3Store","_size","_ids","_entities","_blankNodeIndex","_factory","addQuads","index0","key0","key1","key2","index1","index2","existed","name0","name1","name2","entityKeys","value0","entity0","value1","entity1","uniqueIds","entities","graphItem","predicates","freeze","changed","_addToIndex","_removeFromIndex","removeQuad","remove","removeMatches","content","subjectId","predicateId","objectId","_getGraphs","graphId","_findInIndex","getQuads","_countInIndex","results","forSubjects","_uniqueEntities","_loopBy2Keys","_loopByKey1","_loopByKey0","_loop","forPredicates","forObjects","forGraphs","suggestedName","ignoreErrors","onError","tails","toRemove","tailQuad","headPos","malformed","objectQuads","subjectQuads","removeQuads","graphKey","subjectKey","predicateKey","N3StreamParser","onData","onEnd","event","N3StreamWriter","writer","_writer","addPrefix","isNamedNode","isLiteral","isVariable","isDefaultGraph","inDefaultGraph","defaultPrefixes","processPrefix","local","getConstructorMetadata","constructorFunc","compilerGeneratedMetadata","userGeneratedMetadata","getPropertiesMetadata","isStackOverflowExeption","error_msgs_1","metadata_1","_cb","targetKey","queryable_string_1","Target","namedOrTagged","QueryableString","metadataItem","hasTag","matchesArray","matchesTag","isOptional","matchesNamedTag","BindingWhenOnSyntax","_bindingWhenSyntax","_bindingOnSyntax","bindings","arr2","iter","types_1","getOwnPropertyDescriptors","descriptors","formatRegExp","msg","noDeprecation","throwDeprecation","traceDeprecation","trace","debugEnviron","debugs","seen","stylize","stylizeNoColor","depth","colors","showHidden","_extend","customInspect","stylizeWithColor","formatValue","styleType","style","styles","recurseTimes","primitive","formatPrimitive","visibleKeys","arrayToHash","formatError","braces","toUTCString","formatProperty","formatArray","reduce","prev","cur","numLinesEst","reduceToSingleString","ar","pad","debuglog","NODE_DEBUG","pid","months","timestamp","time","getHours","getMinutes","getSeconds","getDate","getMonth","prop","origin","kCustomPromisifiedSymbol","callbackifyOnRejected","reason","newReason","promisify","original","promiseResolve","promiseReject","defineProperties","custom","callbackified","maybeCb","rej","definition","bootstrap","hasStacks","qFileName","qStartingLine","captureLine","task","tail","flushing","requestTick","isNodeJS","laterQueue","flush","domain","enter","runSingle","exit","MessageChannel","channel","port1","onmessage","requestPortTick","port2","postMessage","runAfter","uncurryThis","QReturnValue","array_slice","array_reduce","basis","array_indexOf","array_map","thisp","collect","object_create","object_defineProperty","object_hasOwnProperty","object_keys","object_toString","isStopIteration","exception","ReturnValue","makeStackTraceLong","stacks","__minimumStackCounter__","stackCounter","stackString","desiredLines","isInternalFrame","stackLine","filterStackString","getFileNameAndLineNumber","attempt1","attempt2","attempt3","fileNameAndLineNumber","fileName","qEndingLine","Q","isPromiseAlike","deferred","notify","coerce","fulfill","longStackSupport","longStackCounter","resolvedPromise","messages","progressListeners","promiseDispatch","op","operands","nearerValue","nearer","isPromise","become","newPromise","progress","progressListener","resolver","race","answerPs","fallback","inspected","fulfilled","progressed","Q_DEBUG","makeNodeResolver","passByCopy","spread","makePromise","_fulfilled","newException","_rejected","newValue","threw","_progressed","tap","fcall","thenResolve","thenReject","isPending","isFulfilled","isRejected","alternative","unhandledReasons","unhandledRejections","reportedUnhandledRejections","trackUnhandledRejections","resetUnhandledRejections","rejection","at","atReport","untrackRejection","trackRejection","rhs","dispatch","pendingCount","snapshot","any","allResolved","getUnhandledReasons","stopUnhandledRejectionTracking","master","async","makeGenerator","continuer","verb","StopIteration","generator","errback","spawn","promised","del","mapply","post","mcall","invoke","fapply","fbind","allSettled","regardless","fail","fin","onUnhandledError","ms","timeoutId","delay","nfapply","nodeArgs","nfcall","nfbind","denodeify","baseArgs","nbind","bound","nmapply","npost","nsend","nmcall","ninvoke","nodeify","nodeback","noConflict","ClientRequest","extend","statusCodes","http","defaultProtocol","IncomingMessage","Agent","defaultMaxSockets","globalAgent","STATUS_CODES","METHODS","ReadableStream","writableStream","WritableStream","abortController","AbortController","blobConstructor","getXHR","XDomainRequest","checkTypeSupport","haveArrayBuffer","haveSlice","arraybuffer","msstream","mozchunkedarraybuffer","overrideMimeType","vbArray","VBArray","capability","rStates","readyStates","UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE","fetchTimer","_mode","trailers","rawTrailers","_fetchResponse","statusMessage","_destroyed","_resumeFetch","pipeTo","catch","getReader","_xhr","_pos","matches","_charset","mimeType","charsetMatch","_onXHRProgress","responseBody","toArray","newData","MSStreamReader","onprogress","ReadableState","EElistenerCount","debugUtil","debug","StringDecoder","BufferList","kProxyEvents","readableObjectMode","readableHwm","readableHighWaterMark","pipes","pipesCount","flowing","endEmitted","reading","needReadable","emittedReadable","readableListening","resumeScheduled","awaitDrain","readingMore","decoder","readableAddChunk","addToFront","skipChunkCheck","emitReadable","onEofChunk","chunkInvalid","addChunk","maybeReadMore","needMoreData","isPaused","enc","howMuchToRead","computeNewHighWaterMark","emitReadable_","flow","maybeReadMore_","nReadingNextTick","resume_","fromList","hasStrings","nb","copyFromBufferString","copyFromBuffer","fromListPartial","endReadable","endReadableNT","xs","nOrig","doRead","pipeOpts","endFn","stdout","stderr","unpipe","onunpipe","unpipeInfo","hasUnpiped","onfinish","cleanedUp","pipeOnDrain","increasedAwaitDrain","dests","ev","paused","_fromList","emitErrorNT","readableDestroyed","writableDestroyed","nenc","retried","_normalizeEncoding","normalizeEncoding","utf16Text","utf16End","fillLast","utf8FillLast","base64Text","base64End","simpleWrite","simpleEnd","lastNeed","lastTotal","lastChar","utf8CheckByte","utf8CheckExtraBytes","total","utf8CheckIncomplete","afterTransform","ts","_transformState","transforming","writechunk","rs","needTransform","writeencoding","_this2","err2","_createForOfIteratorHelper","given","baseColon","baseScheme","baseSingle","lastSlash","baseHash","alert","_extends","pt","ppt","NodeType","ELEMENT_NODE","ATTRIBUTE_NODE","TEXT_NODE","CDATA_SECTION_NODE","ENTITY_REFERENCE_NODE","ENTITY_NODE","PROCESSING_INSTRUCTION_NODE","COMMENT_NODE","DOCUMENT_NODE","DOCUMENT_TYPE_NODE","DOCUMENT_FRAGMENT_NODE","NOTATION_NODE","ExceptionCode","ExceptionMessage","HIERARCHY_REQUEST_ERR","INDEX_SIZE_ERR","DOMSTRING_SIZE_ERR","NOT_FOUND_ERR","WRONG_DOCUMENT_ERR","INVALID_CHARACTER_ERR","NO_DATA_ALLOWED_ERR","NO_MODIFICATION_ALLOWED_ERR","INUSE_ATTRIBUTE_ERR","NOT_SUPPORTED_ERR","INVALID_STATE_ERR","SYNTAX_ERR","INVALID_MODIFICATION_ERR","NAMESPACE_ERR","INVALID_ACCESS_ERR","captureStackTrace","NodeList","LiveNodeList","refresh","_node","_refresh","_updateLiveList","inc","_inc","ownerDocument","ls","__set__","NamedNodeMap","_findNodeIndex","_addNamedNode","el","newAttr","oldAttr","ownerElement","_onRemoveAttribute","namespaceURI","_nsMap","localName","_onAddAttribute","_removeNamedNode","attr","tagName","lastIndex","DOMImplementation","features","_features","feature","Node","_xmlEncoder","_visitNode","firstChild","nextSibling","Document","_onUpdateChild","newChild","cs","childNodes","_removeChild","parentNode","previousSibling","lastChild","_insertBefore","nextChild","cp","removeChild","nodeType","newFirst","newLast","pre","Element","Attr","CharacterData","Text","Comment","CDATASection","DocumentType","Notation","Entity","EntityReference","DocumentFragment","ProcessingInstruction","XMLSerializer","nodeSerializeToString","isHtml","nodeFilter","refNode","documentElement","lookupPrefix","visibleNamespaces","namespace","serializeToString","needNamespaceDefine","isHTML","attrs","nodeName","pubid","publicId","sysid","systemId","internalSubset","getNamedItem","setNamedItem","_ownerElement","setNamedItemNS","getNamedItemNS","removeNamedItem","removeNamedItemNS","hasFeature","createDocument","qualifiedName","doctype","implementation","appendChild","createElementNS","createDocumentType","nodeValue","insertBefore","refChild","replaceChild","oldChild","hasChildNodes","cloneNode","deep","node2","attrs2","setAttributeNode","appendData","isSupported","hasAttributes","lookupNamespaceURI","isDefaultNamespace","importNode","importedNode","getElementById","rtv","getAttribute","createElement","createDocumentFragment","createTextNode","createComment","createCDATASection","createProcessingInstruction","createAttribute","specified","createEntityReference","pl","createAttributeNS","hasAttribute","getAttributeNode","setAttribute","removeAttribute","removeAttributeNode","_appendSingleChild","setAttributeNodeNS","removeAttributeNS","getAttributeNodeNS","hasAttributeNS","getAttributeNS","setAttributeNS","getElementsByTagName","getElementsByTagNameNS","substringData","insertData","replaceData","deleteData","splitText","newText","newNode","$$length","getTextContent","AsyncAlgorithm","MessageDigest","Permutator","POSITIONS","blankNodeInfo","hashToBlankNodes","canonicalIssuer","hashAlgorithm","schedule","now","nonNormalized","waterfall","forEachComponent","component","whilst","hashFirstDegreeQuads","hashes","idList","hashPathList","hasId","hashNDegreeQuads","normalized","nquads","modifyFirstDegreeComponent","update","digest","related","getRelatedPredicate","hashToRelated","createHashToRelated","chosenIssuer","chosenPath","permutator","hasNext","nextPermutation","permutation","issuerCopy","recursionList","hashRelatedBlankNode","baseN","_checkBitsParam","ByteStringBuffer","isArrayBuffer","putByte","_constructedStringLength","stopPropagation","MutationObserver","div","observe","oldSetImmediate","isNodejs","globalScope","ByteBuffer","_optimizeConstructedString","isEmpty","putBytes","fillWithByte","putString","encodeUtf8","putInt16","putInt24","putInt32","putInt16Le","putInt24Le","putInt32Le","putInt","putSignedInt","putBuffer","getBytes","getByte","getInt16","getInt24","getInt32","getInt16Le","getInt24Le","getInt32Le","getInt","getSignedInt","setAt","truncate","decodeUtf8","DataBuffer","readOffset","growSize","writeOffset","accommodate","amount","setUint8","ceil","binary","hex","Uint16Array","utf16","encode","setInt16","setInt8","setInt32","getInt8","getUint8","utf8","fillString","xorBytes","s1","s2","s3","hexToBytes","bytesToHex","int32ToBytes","_base64","_base64Idx","_base58","encode64","maxline","chr1","chr2","chr3","decode64","enc1","enc2","enc3","enc4","unescape","base58","deflate","inflate","_setStorageObject","removeItem","setItem","_getStorageObject","getItem","_setItem","_getItem","_removeItem","_clearItems","_callStorageFunction","localStorage","ex","clearItems","fullHost","_queryVariables","getQueryVariables","kvpairs","parseFragment","fp","fq","pathString","queryString","makeRequest","reqString","frag","getPath","getQuery","getQueryLast","_default","vals","makeLink","jQuery","qstr","param","setPath","deletePath","argi","formatNumber","number","decimals","dec_point","thousands_sep","abs","toFixed","formatSize","bytesFromIP","ip","bytesFromIPv4","bytesFromIPv6","num","blanks","zeros","bytesToIP","bytesToIPv4","bytesToIPv6","zeroGroups","zeroMaxGroup","group","estimateCores","cores","navigator","hardwareConcurrency","Worker","blobUrl","URL","createObjectURL","st","et","sample","samples","numWorkers","avg","revokeObjectURL","workers","worker","terminate","overlaps","r1","overlap","r2","gj","geometry","pairWKT","ringWKT","ringsWKT","wrapParens","coordinates","geometries","numberRegexp","tuples","srid","$","white","multicoords","elem","rings","pointer","coords","point","linestring","polygon","newCoordsFormat","multipoint","multilinestring","multipolygon","geometrycollection","crs","Geo_1","removeBreakPoint","tinyqueue_1","__export","twoProduct","robustSum","robustScale","robustSubtract","cofactor","generateSum","expr","determinant","orientation","neg","matrix","posExpr","negExpr","funcName","proc","orientation3Exact","orientation4Exact","CACHED","det","tol","adx","bdx","cdx","ady","bdy","cdy","adz","bdz","cdz","bdxcdy","cdxbdy","cdxady","adxcdy","adxbdy","bdxady","slowOrient","procArgs","generateOrientationProc","SPLITTER","ahi","alo","bhi","blo","_1","FlexibleProfileTransitPlanner","Datatypes_1","QueryMode","addConnectionSource","accessUrl","travelMode","treeProvider","addTreeSource","processArray","EPSILON","Delaunator","minX","minY","maxX","maxY","Uint32Array","i0","i1","i2","cx","cy","minDist","dist","i0x","i0y","i1x","i1y","minRadius","circumradius","i2x","i2y","orient","center","ax","ay","bx","by","dx","dy","ey","bl","cl","circumcenter","_cx","_cy","quicksort","temp","_hashSize","sqrt","_hash","hull","insertNode","_hashEdge","maxTriangles","triangles","halfedges","Int32Array","trianglesLen","_addTriangle","xp","yp","startKey","_hashKey","removed","walkBack","_legalize","removeNode","points","getX","getY","defaultGetX","defaultGetY","Float64Array","pseudoAngle","a0","b0","al","p0","pr","p1","px","py","fx","fy","bp","inCircle","hbl","_link","br","qx","qy","rx","ry","Path","_x0","_y0","_x1","_y1","x0","y0","Polygon","Voronoi","delaunay","xmin","ymin","xmax","ymax","circumcenters","vectors","t3","y1","y2","x3","y3","a2","a3","b2","b3","d1","d2","d3","ab","ti","tj","xi","yi","xj","yj","_renderSegment","_project","rect","_clip","moveTo","lineTo","closePath","cell","cellPolygon","renderCell","S","c0","_regioncode","c1","_clipSegment","inedges","e0","_cell","_clipInfinite","_clipFinite","e1","sx0","sy0","sx1","sy1","_edgecode","_edge","contains","vx0","vy0","vxn","vyn","vx","vy","flatIterable","tau","pointX","pointY","Delaunay","outedges","node0","node1","bounds","dc","neighbors","dt","renderHull","arc","t0","trianglePolygon","renderTriangle","flatArray","_typeof","_possibleConstructorReturn","assertThisInitialized","__awaiter","_arguments","__generator","label","sent","trys","ops","binding_1","planner_1","resolver_1","binding_to_syntax_1","container_snapshot_1","lookup_1","containerOptions","defaultScope","autoBindInjectable","skipBaseClassChecks","_bindingDictionary","Lookup","_snapshots","_middleware","_metadataReader","container1","container2","bindingDictionary","getBindingDictionary","bindingDictionary1","bindingDictionary2","copyDictionary","traverse","modules","getHelpers","_getContainerModuleHelpersFactory","modules_1","currentModule","containerModuleHelpers","registry","bindFunction","unbindFunction","isboundFunction","rebindFunction","loadAsync","modules_2","_b","unload","conditionFactory","expected","moduleId","condition","removeByCondition","Binding","BindingToSyntax","rebind","unbind","unbindAll","isBound","hasKey","isBoundNamed","isBoundTagged","request_1","createMockRequest","ContainerSnapshot","of","restore","middleware","createChild","applyMiddleware","middlewares","initial","_planAndResolve","curr","applyCustomMetadataReader","metadataReader","getTagged","getNamed","getAll","getAllTagged","getAllNamed","constructorFunction","tempContainer","toSelf","setModuleId","bindingToSyntax","getRebindFunction","_rebind","mId","_bind","_isBound","_unbind","avoidConstraints","isMultiInject","targetType","defaultArgs","contextInterceptor","plan","activated","provider","dynamicValue","binding_count_1","exceptions_1","context_1","plan_1","reflection_utils_1","target_1","cntnr","_getActiveBindings","activeBindings","BindingCount","NoBindingsAvailable","OnlyOneBindingAvailable","MultipleBindingsAvailable","_validateActiveBindingCount","Context","injectMetadata","tagMetadata","_createTarget","_createSubRequests","thePlan","Plan","addPlan","addChildRequest","subChildRequest","dependencies","getDependencies","baseClassDependencyCount","getBaseClassDependencyCount","dependency","rootRequest","setCurrentRequest","currentRequest","parentContext","getTargets","constructorName","isBaseClass","serviceIdentifiers","constructorArgsMetadata","constructorTargets","iterations","targets","getConstructorArgsAsTarget","getConstructorArgsAsTargets","propertyTargets","getClassPropsAsTargets","classPropsMetadata","keys_1","formatTargetMetadata","baseConstructor","baseTargets","isManaged","injectIdentifier","targetMetadataMap","unmanagedCount","dependencyCount","searchString","endsWith","reverseString","reverseSearchString","compareString","requestScope","instantiation_1","invokeFactory","factoryType","_resolveRequest","targetIsAnArray","targetParentIsNotAnArray","_f","isSingleton","isRequestSingleton","resolveInstance","constr","resolveRequest","Func","injections","constructorInjections","propertyInjectionsRequests","propertyInjections","injection","_injectProperties","hasMetadata","_postConstruct","binding_in_when_on_syntax_1","binding_when_on_syntax_1","to","BindingInWhenOnSyntax","toConstantValue","toDynamicValue","toConstructor","toFactory","toFunction","bindingWhenOnSyntax","toAutoFactory","toProvider","toService","service","binding_in_syntax_1","_bindingInSyntax","BindingInSyntax","inRequestScope","inSingletonScope","inTransientScope","getMap","updatedEntries","ERRORS_MSGS","_n","_d","_s","haversine","RADII","km","mile","meter","nmi","toRad","convertCoordinates","latitude","longitude","lng","startCoordinates","endCoordinates","unit","dLat","dLon","lat1","lat2","sin","atan2","threshold","registerImmediate","nextHandle","tasksByHandle","currentlyRunningATask","attachTo","handle","runIfPresent","importScripts","postMessageIsAsynchronous","oldOnMessage","canUsePostMessage","messagePrefix","onGlobalMessage","attachEvent","installPostMessageImplementation","installMessageChannelImplementation","html","script","installReadyStateChangeImplementation","https","URLParser","HttpFetcher","customHeaders","_accept","_customHeaders","methodName","parsedUrl","settings","executionResponse","responseStream","chunks","totalBytes","onResponse","responseUrl","cancelAll","toArrayBuffer","preferBinary","_opts","_body","_headers","setHeader","useFetch","decideMode","_fetchTimer","_onFinish","lowerName","unsafeHeaders","getHeader","removeHeader","headersObj","headersList","keyName","controller","_fetchAbortController","requestTimeout","_connect","_response","statusValid","flushHeaders","setNoDelay","setSocketKeepAlive","b64","lens","getLens","validLen","placeHoldersLen","Arr","_byteLength","curByte","revLookup","uint8","extraBytes","len2","encodeChunk","lookup","isLE","mLen","nBytes","eLen","eMax","eBias","nBits","NaN","rt","LN2","config","arrayCopy","freeGlobal","maxInt","regexPunycode","regexNonASCII","regexSeparators","errors","stringFromCharCode","mapDomain","ucs2decode","extra","ucs2encode","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","baseMinusTMin","basic","oldi","baseMinusT","inputLength","bias","handledCPCount","basicLength","currentValue","handledCPCountPlusOne","qMinusT","define","webpackPolyfill","qs","sep","eq","regexp","maxKeys","kstr","vstr","stringifyPrimitive","ks","validateParams","uriUtil","Frame","RDFXMLProcessor","bnodes","why","reify","attributeNode","potentialNode","writeTriple","finalize","cleanParser","DOCUMENT","ELEMENT","lang","parseDOM","buildFrame","rdfid","elementURI","dig","dom","TEXT","CDATA_SECTION","NODE","addArc","addLiteral","collection","addCollectionArc","ARC","parsetype","nv","addBNode","addCollection","resource","bnid2","addNode","about","bnid","rdftype","pframe","candidate","terminateFrame","listIndex","restTriple","addSymbol","isTripleToLoad","loadTriple","locator","DOMHandler","cdata","columnNumber","_locator","_toString","java","appendElement","hander","currentElement","sax","XMLReader","domBuilder","errorHandler","defaultNSMap","xmlns","entityMap","setDocumentLocator","errorImpl","isCallback","build","buildErrorHandler","nbsp","xml","startDocument","documentURI","startElement","qName","getURI","getQName","getLocator","endElement","startPrefixMapping","endPrefixMapping","processingInstruction","ins","ignorableWhitespace","characters","charNode","skippedEntity","endDocument","comm","startCDATA","endCDATA","startDTD","impl","fatalError","nameStartChar","nameChar","tagNamePattern","copyLocator","parseElementStartPart","currentNSMap","entityReplacer","attrName","setTagName","localNSMap","nsp","nsPrefix","_copy","parseHtmlSpecialContent","elStartEnd","elEndStart","fixSelfClosed","closeMap","parseDCC","matchs","reg","lastMatch","endDTD","parseInstruction","ElementAttributes","_set_proto_","thiz","defaultNSMapCopy","surrogate1","surrogate2","fixedFromCharCode","appendText","xt","lineEnd","linePattern","lineStart","parseStack","tagStart","endMatch","locator2","getLocalName","plainTerm","addEqualsMethodToQuad","objectWithoutPropertiesLoose","excluded","sourceSymbolKeys","propertyIsEnumerable","sourceKeys","maxCallStackDepth","maxTotalCallStackDepth","timeSlice","MAX_DEPTH","MAX_TOTAL_DEPTH","totalDepth","work","running","deadline","iterable","iterate","doWork","fns","loop","sha1","_initialized","_padding","_w","blockLength","digestLength","messageLength","fullMessageLength","messageLengthSize","messageLength64","int32s","h0","h1","h2","h3","h4","_update","finalBlock","overflow","bits","_reverseAlphabets","alphabet","digits","carry","_encodeWithByteBuffer","sha256","_k","h5","h6","h7","s0","maj","_construct","Parent","_Node","getXMLSerializerClass","getSubjects","si","getSubjectTriples","oi","serializer","_isEmptyObject","_isList","_isValue","_isGraph","_getContextValue","_isKeyword","_processingMode","_addValue","_getValues","_validateTypeValue","_expandLanguageMap","languageMap","expandedKey","_expandIndexMap","activeProperty","asGraph","indexKey","isTypeIndex","insideList","insideIndex","typeScopedContext","mapped","unmappedValue","expandedProperty","_expandValue","expandedParent","expandedActiveProperty","mustRevert","_expandObject","nests","expandedValue","unmappedProperty","keyword","termCtx","nextActiveProperty","ii","useArray","nestedValues","validCount","order","level1","_RDFToObject","useNativeTypes","useRdfType","graphMap","referencedOnce","objectIsNode","usages","graphObject","usage","listNodes","nodeKeyCount","listNode","graphSubjects","graphSubject","jsonCanonicalize","_graphToRDF","graphTerm","_objectToRDF","toExponential","_listToRDF","cv","ci","_mergeNodeMapGraphs","_createImplicitFrame","flags","_createsCircularReference","subjectToEmbed","subjectStack","_getFrameFlag","_validateFrame","_filterSubjects","_filterSubject","wildcard","matchesSome","matchThis","nodeValues","tt","thisFrame","hasDefault","_valueMatch","_nodeMatch","listValue","nodeListValues","lv","_removeEmbed","embeds","uniqueEmbeds","removeDependents","_addFrameOutput","pattern","nodeObject","l1","l2","graphStack","bnodeMap","recurse","subframe","preserve","reverseProp","_isSimpleGraph","_removeBase","_checkNestProperty","nestProperty","linked","compactValue","insideReverse","typeContext","compactedType","isType","valueContext","compactedValue","expandedIri","alias","itemActiveProperty","nestResult","expandedItem","inner","compactedItem","mapObject","idKey","typeKey","compactedProperty","inverseCtx","containers","typeOrLanguage","commonLanguage","commonType","itemLanguage","itemType","prefs","containerMap","typeOrLanguageValueMap","pi","pref","_selectTerm","choice","partialMatches","maxPartialLength","curie","preserveIndex","keyCount","isValueOnlyKey","hasDefaultLanguage","isValueString","hasNullMapping","idAlias","_request","strictSSL","maxRedirects","secure","wrapLoader","redirects","followRedirect","httpStatusCode","linkHeader","getResponseHeader","languageOrDatatype","defaultGraphInstance","nextId","stringDatatype","langStringDatatype","RDFaProcessor","processor","onTriple","baseURI","URIResolver","targetObject","uriresolver","XMLLiteralURI","HTMLLiteralURI","PlainLiteralURI","objectURI","typeURI","NCNAME","theOne","getTime","vocabulary","blankCounter","langAttributes","inXHTMLMode","absURIRE","finishedHandlers","parseCURIE","parseCURIEOrURI","resolveAndNormalize","defaultVocabulary","ignoreTerms","parseTermOrCURIEOrAbsURI","parseURI","spec","newMappings","setXHTMLContext","setHTMLContext","setXMLContext","setInitialContext","inHTMLMode","dateTimeTypes","matched","setContext","removeHash","baseURIMap","listMapping","newBlankNode","addTriple","newSubject","currentObjectResource","typedResource","prefixesCopied","incomplete","listMappingDifferent","vocabAtt","baseSubject","att","copyMappings","prefixAtt","parsePrefixMappings","xmlLangAtt","relAtt","revAtt","typeofAtt","propertyAtt","datatypeAtt","datetimeAtt","contentAtt","aboutAtt","srcAtt","resourceAtt","hrefAtt","inlistAtt","relAttPredicates","parsePredicate","revAttPredicates","parseSafeCURIEOrCURIEOrURI","parentObject","encodeURI","newSubjectOrigin","forward","deriveDateTimeType","innerHTML","childContext","listSubject","SCHEME","schemeSpecificPart","parseGeneric","isGeneric","segments","lastHash","otherURI","questionMark","check","backward","beginTime","upperBoundDate","getIdForTime","region","beginUrl","BackwardConnectionIterator_1","currentIndex","uriTemplateGlobalModifiers","uriTemplateSuffices","notReallyPercentEncode","doubleEncoded","isPercentEncoded","uriTemplateSubstitution","modifier","separator","shouldEscape","showVariables","trimEmptyString","varNames","varList","varSpecs","varSpecMap","varName","suffices","varSpec","substitution","valueFunction","startIndex","unSubstitution","stringValue","resultObj","strict","arrayValue","hasEquals","innerArrayValue","objectValue","innerValue","innerVarName","specIndexMap","firstStarred","lastStarred","UriTemplate","template","textParts","substitutions","unSubstitutions","remainder","funcs","fromUri","substituted","nextPart","endPart","nextPartPos","fillFromObject","characteristic","getWayCharacteristic","useWeightedCost","PromiseProxyIterator","sourceGetter","loadSource","rbush","convexHull","Queue","pointInPolygon","concaveman","concavity","lengthThreshold","cull","filtered","indices","fastConvexHull","tree","segTree","updateBBox","sqConcavity","sqLenThreshold","sqLen","getSqDist","maxSqLen","findCandidate","concave","maxDist","compareDist","leaf","sqSegDist","sqSegBoxDist","peek","d0","noIntersections","inside","sqSegSegDist","d4","q1","p2","q2","edges","sc","sN","tc","tN","ux","uy","wx","wy","D","sD","tD","quickselect","maxEntries","_maxEntries","_minEntries","_initFormat","findItem","equalsFn","calcBBox","toBBox","distBBox","destNode","createNode","compareNodeMinX","compareNodeMinY","bboxArea","bboxMargin","intersectionArea","intersects","height","multiSelect","mid","_all","childBBox","nodesToSearch","collides","_build","_splitRoot","tmpNode","goingUp","indexes","_condense","compareMinX","compareMinY","fromJSON","N","M","right2","right3","N2","N1","_chooseSubtree","level","targetNode","area","enlargement","minArea","minEnlargement","isNode","insertPath","_split","_adjustParentBBoxes","_chooseSplitAxis","splitIndex","_chooseSplitIndex","bbox1","bbox2","minOverlap","_allDistMargin","leftBBox","rightBBox","margin","siblings","compareArr","quickselectStep","exp","sd","newLeft","newRight","sorted","lower","upper","ptr","nl","ne","nf","bv","scalarScalar","eptr","fptr","ei","ea","fi","fa","_x","_bv","q0","twoSum","scale","pq","vs","bidir","classic","possibleTarget","routableTile","getNodes","nodeId","getNode","SEC_TO_RAD","HALF_PI","D2R","R2D","FORTPI","TWO_PI","SPI","ft","to_meter","ignoredChar","testkey","lkey","defData","paramName","paramVal","paramOutname","paramObj","proj","datum","rf","lat_0","lat0","lat_1","lat_2","lat_ts","lon_0","long0","lon_1","long1","lon_2","long2","alpha","lonc","longc","x_0","y_0","k_0","k0","r_a","R_A","zone","south","utmSouth","towgs84","datum_params","from_greenwich","pm","PrimeMeridian","nadgrids","datumCode","axis","parseString","txt","whitespace","latin","endThings","digets","place","currentObject","mapit","thing","newObj","sExpr","convert","readCharicter","char","neutral","quoted","afterquote","word","afterItem","newObjects","d2r","wkt","lisp","projName","PROJECTION","UNIT","DATUM","SPHEROID","geogcs","GEOGCS","toMeter","sphere","ellps","TOWGS84","outName","inName","rename","cleanWKT","defs","def","parseProj","EPSG","ESRI","IAU2000","WGS84","GOOGLE","globals","codeWords","codes","testObj","testDef","testWKT","checkMercator","maybeProjStr","checkProjStr","projStr","testProj","eccent","sinphi","cosphi","con","sign","phi","com","dphi","eccnth","atan","identity","projs","es","msfnz","adjust_lon","tsfnz","phi2z","names","projStore","ellipseName","wgs84","ellipse","datumName","ch1903","ggrs87","nad83","nad27","potsdam","carthage","hermannskogel","osni52","ire65","rassadiran","nzgd49","osgb36","s_jtsk","beduaram","gunung_segara","rnb72","ep2","datum_type","Projection","srsCode","parseCode","ourProj","projections","datumDef","Datum","sphere_","Ellipsoid","dc_sphere","ecc","dc_eccentricity","datumObj","geodeticToGeocentric","Rn","Sin_Lat","Sin2_Lat","Cos_Lat","Longitude","Latitude","Height","geocentricToGeodetic","RR","CT","ST","RX","RK","RN","CPHI0","SPHI0","CPHI","SPHI","SDPHI","X","Y","Z","genau","checkParams","compareDatums","Dx_BF","Dy_BF","Dz_BF","Rx_BF","Ry_BF","Rz_BF","M_BF","geocentricToWgs84","x_tmp","y_tmp","z_tmp","geocentricFromWgs84","denorm","xin","yin","zin","checkCoord","toPoint","checkSanity","checkNotWGS","adjust_axis","datum_transform","transformedArray","checkProj","oProj","proj4","fromProj","toProj","coord","I","mgrs","UTMtoLL","ll","accuracy","utm","seasting","easting","snorthing","northing","zoneNumber","zoneLetter","setParm","get100kSetForZone","setColumn","setRow","column","row","parm","colOrigin","rowOrigin","colInt","rowInt","rollover","getLetter100kID","get100kID","T","C","A","LongOriginRad","ZoneNumber","Lat","Long","LatRad","degToRad","LongRad","eccSquared","UTMEasting","UTMNorthing","round","getLetterDesignator","LLtoUTM","deg","radToDeg","rad","T1","C1","R1","LongOrigin","mu","phi1Rad","topRight","LetterDesignator","mgrsString","testChar","hunK","sb","east100k","curCol","eastingValue","rewindMarker","getEastingFromChar","north100k","curRow","northingValue","getNorthingFromChar","getMinNorthing","accuracyBonus","sepEastingString","sepNorthingString","sepEasting","sepNorthing","Point","fromMGRS","mgrsStr","toMGRS","C08","en","sphi","cphi","pj_mlfn","pj_enfn","ml0","delta_lon","sin_phi","cos_phi","als","tq","ml","acos","pj_inv_mlfn","tan_phi","ds","asin","log1py","hypot","pp","B","cos_2B","arg_r","arg_i","hr2","hi2","sin_arg_r","cos_arg_r","sinh_arg_i","sinh","cosh_arg_i","cosh","hr","hi1","hr1","cgb","cbg","utg","gtu","np","Qn","gatg","Zb","clens","Ce","Cn","sin_Cn","cos_Cn","sin_Ce","cos_Ce","asinhy","clens_cmplx","adjust_zone","etmerc","dependsOn","esinp","rc","phic0","ratexp","K","srat","gauss","sinc0","cosc0","R2","sinc","cosc","cosl","rho","coslat0","sinlat0","cons","ms1","X0","ssfn_","cosX0","sinX0","sinX","cosX","rh","sinlat","coslat","dlon","ce","Chi","phit","eccen","phy0","lambda0","sinPhy0","semiMajorAxis","flattening","e2","k2","k3","Sa1","Sa2","rotI","rotB","lambda","phy","prevPhy","iteration","no_off","no_rot","fl","gl","dl","hl","jl","dlon12","dlon10","gamma0","uc","us","ql","sl","tl","vl","ul","POSITIVE_INFINITY","qp","sp","tp","vp","sin1","cos1","ts1","sin2","cos2","ms2","ts2","ts0","f0","rh1","theta","s45","s90","fi0","alfa","uq","u0","n0","ro0","ad","gfi","deltav","eps","ro","czech","fi1","e3","e0fn","e1fn","e2fn","e3fn","mlfn","lam","gN","asq","dd","ml1","phi1","imlfn","nl1","rl1","tl1","dsq","adjust_lat","S_POLE","N_POLE","EQUIT","OBLIQ","qsfnz","mmf","apa","APA","authset","rq","xmf","ymf","sinb1","cosb1","sinph0","cosph0","coslam","sinlam","sinb","cosb","phi0","cCe","sCe","cosz","sinz","beta","authlat","sin_po","cos_po","qs1","qs2","qs0","ns0","phi1z","asinz","eccnts","sin_p14","cos_p14","infinity_dist","coslon","iqsfnz","dlat","tanphi","mln","mlnp","ma","B_re","B_im","C_re","C_im","delta_lat","d_phi","d_lambda","d_phi_n","d_psi","th_n_im1","th_re","th_im","th_n_re","th_n_im","z_re","z_im","z_n_im1","delta_x","z_n_re","z_n_im","num_re","num_im","den_re","den_im","den2","d_psi_n","C_y","C_x","delta_theta","ml2","sinth","costh","gsq","msq","xx","yy","xys","c2","c3","a1","m1","th1","sin_p12","cos_p12","Mlp","Ml","Nl1","Nl","psi","Az","G","H","GH","Hs","kp","cos_c","s4","cosAz","Ee","FACE_ENUM","AREA_ENUM","qsc_fwd_equat_face_theta","qsc_shift_lon_origin","slon","face","one_minus_f","one_minus_f_squared","xy","sinlon","nu","cosmu","tannu","tantheta","invert_sign","xa","lp","COEFS_X","COEFS_Y","poly3_val","coefs","NODES","f_df","max_err","iters","upd","newton_rapshon","poly3_der","defaultDatum","Proj","common","tmerc","sterea","stere","somerc","omerc","lcc","krovak","cass","laea","aea","gnom","cea","eqc","poly","nzmg","mill","sinu","moll","eqdc","vandg","aeqd","ortho","qsc","robin","geocent"],"mappings":"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","file":"static/js/4.aab3ab79.chunk.js","sourcesContent":["function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nmodule.exports = _asyncToGenerator;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar keys = require(\"./constants/metadata_keys\");\nexports.METADATA_KEY = keys;\nvar container_1 = require(\"./container/container\");\nexports.Container = container_1.Container;\nvar literal_types_1 = require(\"./constants/literal_types\");\nexports.BindingScopeEnum = literal_types_1.BindingScopeEnum;\nexports.BindingTypeEnum = literal_types_1.BindingTypeEnum;\nexports.TargetTypeEnum = literal_types_1.TargetTypeEnum;\nvar container_module_1 = require(\"./container/container_module\");\nexports.AsyncContainerModule = container_module_1.AsyncContainerModule;\nexports.ContainerModule = container_module_1.ContainerModule;\nvar injectable_1 = require(\"./annotation/injectable\");\nexports.injectable = injectable_1.injectable;\nvar tagged_1 = require(\"./annotation/tagged\");\nexports.tagged = tagged_1.tagged;\nvar named_1 = require(\"./annotation/named\");\nexports.named = named_1.named;\nvar inject_1 = require(\"./annotation/inject\");\nexports.inject = inject_1.inject;\nexports.LazyServiceIdentifer = inject_1.LazyServiceIdentifer;\nvar optional_1 = require(\"./annotation/optional\");\nexports.optional = optional_1.optional;\nvar unmanaged_1 = require(\"./annotation/unmanaged\");\nexports.unmanaged = unmanaged_1.unmanaged;\nvar multi_inject_1 = require(\"./annotation/multi_inject\");\nexports.multiInject = multi_inject_1.multiInject;\nvar target_name_1 = require(\"./annotation/target_name\");\nexports.targetName = target_name_1.targetName;\nvar post_construct_1 = require(\"./annotation/post_construct\");\nexports.postConstruct = post_construct_1.postConstruct;\nvar metadata_reader_1 = require(\"./planning/metadata_reader\");\nexports.MetadataReader = metadata_reader_1.MetadataReader;\nvar id_1 = require(\"./utils/id\");\nexports.id = id_1.id;\nvar decorator_utils_1 = require(\"./annotation/decorator_utils\");\nexports.decorate = decorator_utils_1.decorate;\nvar constraint_helpers_1 = require(\"./syntax/constraint_helpers\");\nexports.traverseAncerstors = constraint_helpers_1.traverseAncerstors;\nexports.taggedConstraint = constraint_helpers_1.taggedConstraint;\nexports.namedConstraint = constraint_helpers_1.namedConstraint;\nexports.typeConstraint = constraint_helpers_1.typeConstraint;\nvar serialization_1 = require(\"./utils/serialization\");\nexports.getServiceIdentifierAsString = serialization_1.getServiceIdentifierAsString;\nvar binding_utils_1 = require(\"./utils/binding_utils\");\nexports.multiBindToService = binding_utils_1.multiBindToService;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst TYPES = {\n    EventBus: Symbol(\"EventBus\"),\n    Context: Symbol(\"Context\"),\n    QueryRunner: Symbol(\"QueryRunner\"),\n    LocationResolver: Symbol(\"LocationResolver\"),\n    HydraTemplateFetcher: Symbol(\"HydraTemplateFetcher\"),\n    HypermediaTreeFetcher: Symbol(\"HypermediaTreeFetcher\"),\n    HypermediaTreeProvider: Symbol(\"HypermediaTreeProvider\"),\n    HypermediaTreeFetcherFactory: Symbol(\"HypermediaTreeFetcherFactory\"),\n    CatalogFetcher: Symbol(\"CatalogFetcher\"),\n    CatalogProvider: Symbol(\"CatalogProvider\"),\n    ConnectionsProvider: Symbol(\"ConnectionsProvider\"),\n    ConnectionsFetcher: Symbol(\"ConnectionsFetcher\"),\n    ConnectionsFetcherFactory: Symbol(\"ConnectionsFetcherFactory\"),\n    StopsProvider: Symbol(\"StopsProvider\"),\n    StopsFetcher: Symbol(\"StopsFetcher\"),\n    StopsFetcherFactory: Symbol(\"StopsFetcherFactory\"),\n    RoutableTileProvider: Symbol(\"TileProvider\"),\n    RoutableTileFetcher: Symbol(\"TileFetcher\"),\n    FootpathsProvider: Symbol(\"FootpathsProvider\"),\n    PublicTransportPlanner: Symbol(\"PublicTransportPlanner\"),\n    PublicTransportPlannerFactory: Symbol(\"PublicTransportPlannerFactory\"),\n    ProfileFetcher: Symbol(\"ProfileFetcher\"),\n    ProfileProvider: Symbol(\"ProfileProvider\"),\n    RoadPlanner: Symbol(\"RoadPlanner\"),\n    RoadPlannerFactory: Symbol(\"RoadPlannerFactory\"),\n    PathfinderProvider: Symbol(\"PathfinderProvider\"),\n    ShortestPathAlgorithm: Symbol(\"ShortestPathAlgorithm\"),\n    ShortestPathTreeAlgorithm: Symbol(\"ShortestPathTreeAlgorithm\"),\n    ReachableStopsFinder: Symbol(\"ReachableStopsFinder\"),\n    JourneyExtractor: Symbol(\"JourneyExtractor\"),\n    LDFetch: Symbol(\"LDFetch\"),\n    LDLoader: Symbol(\"LDLoader\"),\n};\nexports.default = TYPES;\n//# sourceMappingURL=types.js.map","var unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nfunction _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}\n\nmodule.exports = _createForOfIteratorHelper;","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nvar possibleConstructorReturn = require(\"./possibleConstructorReturn\");\n\nfunction _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}\n\nmodule.exports = _createSuper;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}\n\nmodule.exports = _inherits;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar EventBus_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst events_1 = require(\"events\");\nconst inversify_1 = require(\"inversify\");\n/**\n * Proxies an internal EventEmitter (instead of extending EventEmitter) because\n * decorate(injectable(), EventEmitter) causes errors when running tests in Jest\n */\nlet EventBus = EventBus_1 = class EventBus {\n    constructor() {\n        this.emitter = new events_1.EventEmitter();\n    }\n    static getInstance() {\n        if (!EventBus_1.instance) {\n            EventBus_1.instance = new EventBus_1();\n        }\n        return EventBus_1.instance;\n    }\n    eventNames() {\n        return this.emitter.eventNames();\n    }\n    // tslint:disable-next-line: ban-types\n    rawListeners(event) {\n        return this.emitter.rawListeners(event);\n    }\n    getMaxListeners() {\n        return this.emitter.getMaxListeners();\n    }\n    off(event, listener) {\n        this.emitter.off(event, listener);\n        return this;\n    }\n    prependOnceListener(event, listener) {\n        this.emitter.prependOnceListener(event, listener);\n        return this;\n    }\n    prependListener(event, listener) {\n        this.emitter.prependListener(event, listener);\n        return this;\n    }\n    addListener(type, listener) {\n        this.emitter.addListener(type, listener);\n        return this;\n    }\n    emit(type, ...args) {\n        return this.emitter.emit(type, ...args);\n    }\n    listenerCount(type) {\n        return this.emitter.listenerCount(type);\n    }\n    listeners(type) {\n        return this.emitter.listeners(type);\n    }\n    on(type, listener) {\n        this.emitter.on(type, listener);\n        return this;\n    }\n    once(type, listener) {\n        this.emitter.once(type, listener);\n        return this;\n    }\n    removeAllListeners(type) {\n        this.emitter.removeAllListeners(type);\n        return this;\n    }\n    removeListener(type, listener) {\n        this.emitter.removeListener(type, listener);\n        return this;\n    }\n    setMaxListeners(n) {\n        this.emitter.setMaxListeners(n);\n        return this;\n    }\n};\nEventBus = EventBus_1 = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [])\n], EventBus);\nexports.default = EventBus;\n//# sourceMappingURL=EventBus.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar EventType;\n(function (EventType) {\n    EventType[\"Query\"] = \"query\";\n    EventType[\"SubQuery\"] = \"sub-query\";\n    EventType[\"AbortQuery\"] = \"abort-query\";\n    EventType[\"InvalidQuery\"] = \"invalid-query\";\n    EventType[\"Warning\"] = \"warning\";\n    EventType[\"ConnectionPrefetch\"] = \"connection-prefetch\";\n    EventType[\"ConnectionIteratorView\"] = \"connection-iterator-view\";\n    EventType[\"ConnectionScan\"] = \"connection-scan\";\n    EventType[\"FinalReachableStops\"] = \"final-reachable-stops\";\n    EventType[\"InitialReachableStops\"] = \"initial-reachable-stops\";\n    EventType[\"AddedNewTransferProfile\"] = \"added-new-transfer-profile\";\n    EventType[\"ReachableLocation\"] = \"ReachableLocation\";\n    EventType[\"ReachableID\"] = \"ReachableID\";\n    EventType[\"ReachableTile\"] = \"ReachableTile\";\n    EventType[\"ReachableTransfer\"] = \"ReachableTransfer\";\n    EventType[\"ResourceFetch\"] = \"ResourceFetch\";\n    EventType[\"ZoiZone\"] = \"ZoiZone\";\n})(EventType || (EventType = {}));\nexports.default = EventType;\n//# sourceMappingURL=EventType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NAMED_TAG = \"named\";\nexports.NAME_TAG = \"name\";\nexports.UNMANAGED_TAG = \"unmanaged\";\nexports.OPTIONAL_TAG = \"optional\";\nexports.INJECT_TAG = \"inject\";\nexports.MULTI_INJECT_TAG = \"multi_inject\";\nexports.TAGGED = \"inversify:tagged\";\nexports.TAGGED_PROP = \"inversify:tagged_props\";\nexports.PARAM_TYPES = \"inversify:paramtypes\";\nexports.DESIGN_PARAM_TYPES = \"design:paramtypes\";\nexports.POST_CONSTRUCT = \"post_construct\";\n","var EventEmitter = require('events').EventEmitter;\n\n/**\n  Names of possible iterator states.\n  The state's position in the array corresponds to its ID.\n\n  @name AsyncIterator.STATES\n  @type String[]\n  @protected\n*/\nvar STATES = AsyncIterator.STATES = ['INIT', 'OPEN', 'CLOSING', 'CLOSED', 'ENDED', 'DESTROYED'];\nvar INIT = 0, OPEN = 1, CLOSING = 2, CLOSED = 3, ENDED = 4, DESTROYED = 5;\nSTATES.forEach(function (state, id) { AsyncIterator[state] = id; });\n\n/**\n  ID of the INIT state.\n  An iterator is initializing if it is preparing main item generation.\n  It can already produce items.\n\n  @name AsyncIterator.INIT\n  @type integer\n  @protected\n*/\n\n/**\n  ID of the OPEN state.\n  An iterator is open if it can generate new items.\n\n  @name AsyncIterator.OPEN\n  @type integer\n  @protected\n*/\n\n/**\n  ID of the CLOSING state.\n  An iterator is closing if item generation is pending but will not be scheduled again.\n\n  @name AsyncIterator.CLOSING\n  @type integer\n  @protected\n*/\n\n/**\n  ID of the CLOSED state.\n  An iterator is closed if it no longer actively generates new items.\n  Items might still be available.\n\n  @name AsyncIterator.CLOSED\n  @type integer\n  @protected\n*/\n\n/**\n  ID of the ENDED state.\n  An iterator has ended if no further items will become available.\n  The 'end' event is guaranteed to have been called when in this state.\n\n  @name AsyncIterator.ENDED\n  @type integer\n  @protected\n*/\n\n/**\n ID of the DESTROYED state.\n An iterator has been destroyed after calling {@link AsyncIterator#destroy}.\n The 'end' event has not been called, as pending elements were voided.\n\n @name AsyncIterator.DESTROYED\n @type integer\n @protected\n */\n\n\n\n\n/**\n  Creates a new `AsyncIterator`.\n\n  @public\n  @constructor\n  @classdesc An asynchronous iterator provides pull-based access to a stream of objects.\n  @extends EventEmitter\n**/\nfunction AsyncIterator() {\n  if (!(this instanceof AsyncIterator))\n    return new AsyncIterator();\n  EventEmitter.call(this);\n  this.on('newListener', waitForDataListener);\n  this._state = OPEN;\n  this._readable = false;\n}\n\n/**\n  Makes the prototype of the current constructor a prototype for the given constructor.\n\n  @protected\n  @function AsyncIterator.subclass\n  @param {Function} Constructor The constructor that should inherit from the current constructor\n  @returns {AsyncIterator} The constructor's prototype\n**/\n(function subclass(Constructor) {\n  Constructor.prototype = Object.create(this.prototype,\n    { constructor: { value: Constructor, configurable: true, writable: true } });\n  Constructor.subclass = subclass;\n}).call(EventEmitter, AsyncIterator);\n\n/**\n  Changes the iterator to the given state if possible and necessary,\n  possibly emitting events to signal that change.\n\n  @protected\n  @param {integer} newState The ID of the new state (from the `STATES` array)\n  @param {boolean} [eventAsync=false] Whether resulting events should be emitted asynchronously\n  @returns {boolean} Whether the state was changed\n  @emits AsyncIterator.end\n**/\nAsyncIterator.prototype._changeState = function (newState, eventAsync) {\n  // Validate the state change\n  var valid = newState > this._state && this._state < ENDED;\n  if (valid) {\n    this._state = newState;\n    // Emit the `end` event when changing to ENDED\n    if (newState === ENDED)\n      eventAsync ? setImmediate(emit, this, 'end') : this.emit('end');\n  }\n  return valid;\n};\n// Emits the event on the given EventEmitter\nfunction emit(self, eventName) { self.emit(eventName); }\n\n/**\n  Tries to read the next item from the iterator.\n\n  This is the main method for reading the iterator in _on-demand mode_,\n  where new items are only created when needed by consumers.\n  If no items are currently available, this methods returns `null`.\n  The {@link AsyncIterator.event:readable} event will then signal when new items might be ready.\n\n  To read all items from the iterator,\n  switch to _flow mode_ by subscribing to the {@link AsyncIterator.event:data} event.\n  When in flow mode, do not use the `read` method.\n\n  @returns {object?} The next item, or `null` if none is available\n**/\nAsyncIterator.prototype.read = function () { return null; };\n\n/**\n  Emitted when the iterator might have new items available\n  after having had no items available right before this event.\n\n  If the iterator is not in flow mode,\n  items can be retrieved by calling {@link AsyncIterator#read}.\n\n  @event AsyncIterator.readable\n**/\n\n/**\n  Invokes the callback for each remaining item in the iterator.\n\n  Switches the iterator to flow mode.\n\n  @param {Function} callback A function that will be called with each item\n  @param {object?} self The `this` pointer for the callback\n**/\nAsyncIterator.prototype.each = function (callback, self) {\n  this.on('data', self ? callback.bind(self) : callback);\n};\n\n/**\n  Verifies whether the iterator has listeners for the given event.\n\n  @private\n  @param {string} eventName The name of the event\n  @returns {boolean} Whether the iterator has listeners\n**/\nAsyncIterator.prototype._hasListeners = function (eventName) {\n  return this._events && (eventName in this._events);\n};\n\n/**\n  Adds the listener to the event, if it has not been added previously.\n\n  @private\n  @param {string} eventName The name of the event\n  @param {Function} listener The listener to add\n**/\nAsyncIterator.prototype._addSingleListener = function (eventName, listener) {\n  var listeners = this._events && this._events[eventName];\n  if (!listeners ||\n      (isFunction(listeners) ? listeners !== listener : listeners.indexOf(listener) < 0))\n    this.on(eventName, listener);\n};\n\n/**\n  Stops the iterator from generating new items.\n\n  Already generated items or terminating items can still be emitted.\n  After this, the iterator will end asynchronously.\n\n  @emits AsyncIterator.end\n**/\nAsyncIterator.prototype.close = function () {\n  if (this._changeState(CLOSED))\n    endAsync(this);\n};\n\n/**\n Destroy the iterator and stop it from generating new items.\n\n This will not do anything if the iterator was already ended or destroyed.\n\n All internal resources will be released an no new items will be emitted,\n even not already generated items.\n\n Implementors should not override this method,\n but instead implement {@link AsyncIterator#_destroy}.\n\n @param {Error} [cause] An optional error to emit.\n @emits AsyncIterator.end\n @emits AsyncIterator.error Only emitted if an error is passed.\n **/\nAsyncIterator.prototype.destroy = function (cause) {\n  if (!this.done) {\n    var self = this;\n    this._destroy(cause, function (error) {\n      cause = cause || error;\n      if (cause)\n        self.emit('error', cause);\n      end(self, true);\n    });\n  }\n};\n\n/**\n Called by {@link AsyncIterator#destroy}.\n Implementers can override this, but this should not be called directly.\n\n @param {?Error} cause The reason why the iterator is destroyed.\n @param {Function} callback A callback function with an optional error argument.\n */\nAsyncIterator.prototype._destroy = function (cause, callback) {\n  callback();\n};\n\n/**\n  Asynchronously ends the iterator and cleans up.\n\n  Should never be called before {@link AsyncIterator#close};\n  typically, `close` is responsible for calling `_end`.\n\n  @param {boolean} [destroy] If the iterator should be forcefully destroyed.\n  @protected\n  @emits AsyncIterator.end\n**/\nAsyncIterator.prototype._end = function (destroy) {\n  if (this._changeState(destroy ? DESTROYED : ENDED)) {\n    this._readable = false;\n    this.removeAllListeners('readable');\n    this.removeAllListeners('data');\n    this.removeAllListeners('end');\n  }\n};\nfunction end(self, destroy) { self._end(destroy); }\nfunction endAsync(self) { setImmediate(end, self); }\n\n/**\n  Emitted after the last item of the iterator has been read.\n\n  @event AsyncIterator.end\n**/\n\n/**\n  Gets or sets whether this iterator might have items available for read.\n\n  A value of `false` means there are _definitely_ no items available;\n  a value of `true` means items _might_ be available.\n\n  @name AsyncIterator#readable\n  @type boolean\n  @emits AsyncIterator.readable\n**/\nObject.defineProperty(AsyncIterator.prototype, 'readable', {\n  get: function () { return this._readable; },\n  set: function (readable) {\n    readable = !!readable && !this.done;\n    // Set the readable value only if it has changed\n    if (this._readable !== readable) {\n      this._readable = readable;\n      // If the iterator became readable, emit the `readable` event\n      if (readable)\n        setImmediate(emit, this, 'readable');\n    }\n  },\n  enumerable: true,\n});\n\n/**\n  Gets whether the iterator has stopped generating new items.\n\n  @name AsyncIterator#closed\n  @type boolean\n  @readonly\n**/\nObject.defineProperty(AsyncIterator.prototype, 'closed', {\n  get: function () { return this._state >= CLOSING; },\n  enumerable: true,\n});\n\n/**\n  Gets whether the iterator has finished emitting items.\n\n  @name AsyncIterator#ended\n  @type boolean\n  @readonly\n**/\nObject.defineProperty(AsyncIterator.prototype, 'ended', {\n  get: function () { return this._state === ENDED; },\n  enumerable: true,\n});\n\n/**\n Gets whether the iterator has been destroyed.\n\n @name AsyncIterator#destroyed\n @type boolean\n @readonly\n **/\nObject.defineProperty(AsyncIterator.prototype, 'destroyed', {\n  get: function () { return this._state === DESTROYED; },\n  enumerable: true,\n});\n\n/**\n Gets whether the iterator will not emit anymore items,\n either due to being closed or due to being destroyed.\n\n @name AsyncIterator#done\n @type boolean\n @readonly\n **/\nObject.defineProperty(AsyncIterator.prototype, 'done', {\n  get: function () { return this._state >= ENDED; },\n  enumerable: true,\n});\n\n/**\n  The iterator emits a `data` event with a new item as soon as it becomes available.\n\n  When one or more listeners are attached to the `data` event,\n  the iterator switches to _flow mode_,\n  generating and emitting new items as fast as possible.\n  This drains the source and might create backpressure on the consumers,\n  so only subscribe to this event if this behavior is intended.\n  In flow mode, don't use the {@link AsyncIterator#read} method.\n\n  To switch back to _on-demand mode_, remove all listeners from the `data` event.\n  You can then obtain items through {@link AsyncIterator#read} again.\n\n  @event AsyncIterator.data\n  @param {object} item The new item\n**/\n\n// Starts emitting `data` events when `data` listeners are added\nfunction waitForDataListener(eventName) {\n  if (eventName === 'data') {\n    this.removeListener('newListener', waitForDataListener);\n    this._addSingleListener('readable', emitData);\n    if (this.readable)\n      setImmediate(call, emitData, this);\n  }\n}\n// Emits new items though `data` events as long as there are `data` listeners\nfunction emitData() {\n  // While there are `data` listeners and items, emit them\n  var item;\n  while (this._hasListeners('data') && (item = this.read()) !== null)\n    this.emit('data', item);\n  // Stop draining the source if there are no more `data` listeners\n  if (!this._hasListeners('data') && !this.done) {\n    this.removeListener('readable', emitData);\n    this._addSingleListener('newListener', waitForDataListener);\n  }\n}\n// Calls the given function with the specified argument as `this` value\nfunction call(func, self) { func.call(self); }\n\n/**\n  Retrieves the property with the given name from the iterator.\n\n  If no callback is passed, it returns the value of the property\n  or `undefined` if the property is not set.\n\n  If a callback is passed, it returns `undefined`\n  and calls the callback with the property the moment it is set.\n\n  @param {string} propertyName The name of the property to retrieve\n  @param {Function} [callback] A one-argument callback to receive the property value\n  @returns {object?} The value of the property (if set and no callback is given)\n**/\nAsyncIterator.prototype.getProperty = function (propertyName, callback) {\n  var properties = this._properties, propertyCallbacks;\n  // If no callback was passed, return the property value\n  if (!callback)\n    return properties && properties[propertyName];\n  // If the value has been set, send it through the callback\n  if (properties && (propertyName in properties))\n    setImmediate(callback, properties[propertyName]);\n  // If the value was not set, store the callback for when the value will be set\n  else {\n    if (!(propertyCallbacks = this._propertyCallbacks))\n      this._propertyCallbacks = propertyCallbacks = Object.create(null);\n    if (propertyName in propertyCallbacks)\n      propertyCallbacks[propertyName].push(callback);\n    else\n      propertyCallbacks[propertyName] = [callback];\n  }\n};\n\n/**\n  Sets the property with the given name to the value.\n\n  @param {string} propertyName The name of the property to set\n  @param {object?} value The new value of the property\n**/\nAsyncIterator.prototype.setProperty = function (propertyName, value) {\n  var properties = this._properties || (this._properties = Object.create(null));\n  properties[propertyName] = value;\n  // Execute getter callbacks that were waiting for this property to be set\n  var propertyCallbacks = this._propertyCallbacks, callbacks;\n  if (callbacks = propertyCallbacks && propertyCallbacks[propertyName]) {\n    delete propertyCallbacks[propertyName];\n    if (callbacks.length === 1)\n      setImmediate(callbacks[0], value);\n    else {\n      setImmediate(function () {\n        for (var i = 0; i < callbacks.length; i++)\n          callbacks[i](value);\n      });\n    }\n    // Remove _propertyCallbacks if no pending callbacks are left\n    for (propertyName in propertyCallbacks) return;\n    delete this._propertyCallbacks;\n  }\n};\n\n/**\n  Retrieves all properties of the iterator.\n\n  @returns {object} An object with property names as keys.\n**/\nAsyncIterator.prototype.getProperties = function () {\n  var properties = this._properties, copy = {};\n  for (var name in properties)\n    copy[name] = properties[name];\n  return copy;\n};\n\n/**\n  Sets all of the given properties.\n\n  @param {object} properties Key/value pairs of properties to set\n**/\nAsyncIterator.prototype.setProperties = function (properties) {\n  for (var propertyName in properties)\n    this.setProperty(propertyName, properties[propertyName]);\n};\n\n/**\n  Copies the given properties from the source iterator.\n\n  @param {AsyncIterator} source The iterator to copy from\n  @param {Array} propertyNames List of property names to copy\n**/\nAsyncIterator.prototype.copyProperties = function (source, propertyNames) {\n  for (var i = 0; i < propertyNames.length; i++)\n    copyProperty(source, this, propertyNames[i]);\n};\nfunction copyProperty(source, destination, propertyName) {\n  source.getProperty(propertyName, function (value) {\n    destination.setProperty(propertyName, value);\n  });\n}\n\n/* Generates a textual representation of the iterator. */\nAsyncIterator.prototype.toString = function () {\n  var details = this._toStringDetails();\n  return '[' + this.constructor.name + (details ? ' ' + details + ']' : ']');\n};\n\n/**\n  Generates details for a textual representation of the iterator.\n\n  @protected\n**/\nAsyncIterator.prototype._toStringDetails = function () { };\n\n\n\n/**\n  Creates a new `EmptyIterator`.\n\n  @constructor\n  @classdesc An iterator that doesn't emit any items.\n  @extends AsyncIterator\n**/\nfunction EmptyIterator() {\n  if (!(this instanceof EmptyIterator))\n    return new EmptyIterator();\n  AsyncIterator.call(this);\n  this._changeState(ENDED, true);\n}\nAsyncIterator.subclass(EmptyIterator);\n\n\n\n/**\n  Creates a new `SingletonIterator`.\n\n  @constructor\n  @classdesc An iterator that emits a single item.\n  @param {object} item The item that will be emitted.\n  @extends AsyncIterator\n**/\nfunction SingletonIterator(item) {\n  if (!(this instanceof SingletonIterator))\n    return new SingletonIterator(item);\n  AsyncIterator.call(this);\n\n  this._item = item;\n  if (item === null)\n    this.close();\n  else\n    this.readable = true;\n}\nAsyncIterator.subclass(SingletonIterator);\n\n/* Reads the item from the iterator. */\nSingletonIterator.prototype.read = function () {\n  var item = this._item;\n  this._item = null;\n  this.close();\n  return item;\n};\n\n/* Generates details for a textual representation of the iterator. */\nSingletonIterator.prototype._toStringDetails = function () {\n  return this._item === null ? '' : '(' + this._item + ')';\n};\n\n\n\n/**\n  Creates a new `ArrayIterator`.\n\n  @constructor\n  @classdesc An iterator that emits the items of a given array.\n  @param {Array} items The items that will be emitted.\n  @extends AsyncIterator\n**/\nfunction ArrayIterator(items) {\n  if (!(this instanceof ArrayIterator))\n    return new ArrayIterator(items);\n  AsyncIterator.call(this);\n\n  if (!(items && items.length > 0))\n    return this.close();\n\n  this._buffer = Array.prototype.slice.call(items);\n  this.readable = true;\n}\nAsyncIterator.subclass(ArrayIterator);\n\n/* Reads an item from the iterator. */\nArrayIterator.prototype.read = function () {\n  var buffer = this._buffer, item = null;\n  if (buffer) {\n    item = buffer.shift();\n    if (!buffer.length) {\n      delete this._buffer;\n      this.close();\n    }\n  }\n  return item;\n};\n\n/* Generates details for a textual representation of the iterator. */\nArrayIterator.prototype._toStringDetails = function () {\n  return '(' + (this._buffer && this._buffer.length || 0) + ')';\n};\n\n/* Called by {@link AsyncIterator#destroy} */\nArrayIterator.prototype._destroy = function (error, callback) {\n  delete this._buffer;\n  callback();\n};\n\n\n\n/**\n  Creates a new `IntegerIterator`.\n\n  @constructor\n  @classdesc An iterator that enumerates integers in a certain range.\n  @param {object} [options] Settings of the iterator\n  @param {integer} [options.start=0] The first number to emit\n  @param {integer} [options.end=Infinity] The last number to emit\n  @param {integer} [options.step=1] The increment between two numbers\n  @extends AsyncIterator\n**/\nfunction IntegerIterator(options) {\n  if (!(this instanceof IntegerIterator))\n    return new IntegerIterator(options);\n  AsyncIterator.call(this);\n\n  // Set start, end, and step\n  options = options || {};\n  var step = options.step, limit, last = options.end, next = options.start;\n  this._step = step  = isFinite(step) ? ~~step : 1;\n  limit      = step >= 0 ? Infinity : -Infinity; // counting towards plus or minus infinity?\n  this._last = last  = isFinite(last) ? ~~last : (last === -limit ? last : limit);\n  this._next = next  = typeof next !== 'number' ? 0 : (isFinite(next) ? ~~next : next);\n\n  // Start iteration if there is at least one item; close otherwise\n  if (!isFinite(next) || (step >= 0 ? next > last : next < last))\n    this.close();\n  else\n    this.readable = true;\n}\nAsyncIterator.subclass(IntegerIterator);\n\n/* Reads an item from the iterator. */\nIntegerIterator.prototype.read = function () {\n  if (this.closed)\n    return null;\n  var current = this._next, step = this._step, last = this._last, next = this._next += step;\n  if (step >= 0 ? next > last : next < last)\n    this.close();\n  return current;\n};\n\n/* Generates details for a textual representation of the iterator. */\nIntegerIterator.prototype._toStringDetails = function () {\n  return '(' + this._next + '...' + this._last + ')';\n};\n\n/**\n  Creates an iterator of natural numbers within the given range.\n\n  The current iterator may not be read anymore until the returned iterator ends.\n\n  @param {integer} [start=0] The first number to emit\n  @param {integer} [end=Infinity] The last number to emit\n  @param {integer} [step=1] The increment between two numbers\n  @returns {IntegerIterator} An iterator of natural numbers within the given range\n**/\nAsyncIterator.range = function (start, end, step) {\n  return new IntegerIterator({ start: start, end: end, step: step });\n};\n\n\n\n/**\n  Creates a new `BufferedIterator`.\n\n  @constructor\n  @classdesc A iterator that maintains an internal buffer of items.\n\n  This class serves as a base class for other iterators\n  with a typically complex item generation process.\n  @param {object} [options] Settings of the iterator\n  @param {integer} [options.maxBufferSize=4] The number of items to preload in the internal buffer\n  @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n  @extends AsyncIterator\n**/\nfunction BufferedIterator(options) {\n  if (!(this instanceof BufferedIterator))\n    return new BufferedIterator(options);\n  AsyncIterator.call(this);\n\n  options = options || {};\n\n  // Set up the internal buffer\n  var maxBufferSize = options.maxBufferSize, autoStart = options.autoStart;\n  this._state  = INIT;\n  this._buffer = [];\n  this._pushedCount = 0;\n  this.maxBufferSize = maxBufferSize;\n\n  // Acquire reading lock to read initialization items\n  this._reading = true;\n  setImmediate(init, this, autoStart !== false || autoStart);\n}\nAsyncIterator.subclass(BufferedIterator);\n\n/**\n  Gets or sets the maximum number of items to preload in the internal buffer.\n\n  A `BufferedIterator` tries to fill its buffer as far as possible.\n  Set to `Infinity` to fully drain the source.\n\n  @name BufferedIterator#maxBufferSize\n  @type number\n**/\nObject.defineProperty(BufferedIterator.prototype, 'maxBufferSize', {\n  set: function (maxBufferSize) {\n    // Allow only positive integers and infinity\n    if (maxBufferSize !== Infinity)\n      maxBufferSize = isFinite(maxBufferSize) ? Math.max(~~maxBufferSize, 1) : 4;\n    // Only set the maximum buffer size if it changes\n    if (this._maxBufferSize !== maxBufferSize) {\n      this._maxBufferSize = maxBufferSize;\n      // Ensure sufficient elements are buffered\n      if (this._state === OPEN)\n        this._fillBuffer();\n    }\n  },\n  get: function () { return this._maxBufferSize; },\n  enumerable: true,\n});\n\n/**\n  Initializing the iterator by calling {@link BufferedIterator#_begin}\n  and changing state from INIT to OPEN.\n\n  @protected\n  @param {boolean} autoStart Whether reading of items should immediately start after OPEN.\n**/\nBufferedIterator.prototype._init = function (autoStart) {\n  // Perform initialization tasks\n  var self = this;\n  this._reading = true;\n  this._begin(function () {\n    if (!self)\n      throw new Error('done callback called multiple times');\n    // Open the iterator and start buffering\n    self._reading = false;\n    self._changeState(OPEN);\n    if (autoStart)\n      fillBufferAsync(self);\n    // If reading should not start automatically, the iterator doesn't become readable.\n    // Therefore, mark the iterator as (potentially) readable so consumers know it might be read.\n    else\n      self.readable = true;\n    self = null;\n  });\n};\nfunction init(self, autoStart) { self._init(autoStart); }\n\n/**\n  Writes beginning items and opens iterator resources.\n\n  Should never be called before {@link BufferedIterator#_init};\n  typically, `_init` is responsible for calling `_begin`.\n\n  @protected\n  @param {function} done To be called when initialization is complete\n**/\nBufferedIterator.prototype._begin = function (done) { done(); };\n\n/**\n  Tries to read the next item from the iterator.\n\n  If the buffer is empty,\n  this method calls {@link BufferedIterator#_read} to fetch items.\n  @returns {object?} The next item, or `null` if none is available\n**/\nBufferedIterator.prototype.read = function () {\n  if (this.done)\n    return null;\n\n  // Try to retrieve an item from the buffer\n  var buffer = this._buffer, item;\n  if (buffer.length)\n    item = buffer.shift();\n  else {\n    item = null;\n    this.readable = false;\n  }\n\n  // If the buffer is becoming empty, either fill it or end the iterator\n  if (!this._reading && buffer.length < this._maxBufferSize) {\n    // If the iterator is not closed and thus may still generate new items, fill the buffer\n    if (!this.closed)\n      fillBufferAsync(this);\n    // No new items will be generated, so if none are buffered, the iterator ends here\n    else if (!buffer.length)\n      endAsync(this);\n  }\n\n  return item;\n};\n\n/**\n  Tries to generate the given number of items.\n\n  Implementers should add `count` items through {@link BufferedIterator#_push}.\n\n  @protected\n  @param {integer} count The number of items to generate\n  @param {function} done To be called when reading is complete\n**/\nBufferedIterator.prototype._read = function (count, done) { done(); };\n\n/**\n  Adds an item to the internal buffer.\n\n  @protected\n  @param {object} item The item to add\n  @emits AsyncIterator.readable\n**/\nBufferedIterator.prototype._push = function (item) {\n  if (!this.done) {\n    this._pushedCount++;\n    this._buffer.push(item);\n    this.readable = true;\n  }\n};\n\n/**\n  Fills the internal buffer until `this._maxBufferSize` items are present.\n\n  This method calls {@link BufferedIterator#_read} to fetch items.\n\n  @protected\n  @emits AsyncIterator.readable\n**/\nBufferedIterator.prototype._fillBuffer = function () {\n  var self = this, neededItems;\n  // Avoid recursive reads\n  if (this._reading)\n    return;\n  // If iterator closing started in the meantime, don't generate new items anymore\n  else if (this.closed)\n    this._completeClose();\n  // Otherwise, try to fill empty spaces in the buffer by generating new items\n  else if ((neededItems = Math.min(this._maxBufferSize - this._buffer.length, 128)) > 0) {\n    // Acquire reading lock and start reading, counting pushed items\n    this._pushedCount = 0;\n    this._reading = true;\n    this._read(neededItems, function () {\n      // Verify the callback is only called once\n      if (!neededItems)\n        throw new Error('done callback called multiple times');\n      neededItems = 0;\n      // Release reading lock\n      self._reading = false;\n      // If the iterator was closed while reading, complete closing\n      if (self.closed)\n        self._completeClose();\n      // If the iterator pushed one or more items,\n      // it might currently be able to generate additional items\n      // (even though all pushed items might already have been read)\n      else if (self._pushedCount) {\n        self.readable = true;\n        // If the buffer is insufficiently full, continue filling\n        if (self._buffer.length < self._maxBufferSize / 2)\n          fillBufferAsync(self);\n      }\n    });\n  }\n};\nfunction fillBufferAsync(self) {\n  // Acquire reading lock to avoid recursive reads\n  if (!self._reading) {\n    self._reading = true;\n    setImmediate(fillBufferAsyncCallback, self);\n  }\n}\nfunction fillBufferAsyncCallback(self) {\n  // Release reading lock so _fillBuffer` can take it\n  self._reading = false;\n  self._fillBuffer();\n}\n\n/**\n  Stops the iterator from generating new items\n  after a possible pending read operation has finished.\n\n  Already generated, pending, or terminating items can still be emitted.\n  After this, the iterator will end asynchronously.\n\n  @emits AsyncIterator.end\n**/\nBufferedIterator.prototype.close = function () {\n  // If the iterator is not currently reading, we can close immediately\n  if (!this._reading)\n    this._completeClose();\n  // Closing cannot complete when reading, so temporarily assume CLOSING state\n  // `_fillBuffer` becomes responsible for calling `_completeClose`\n  else\n    this._changeState(CLOSING);\n};\n\n/**\n  Stops the iterator from generating new items,\n  switching from `CLOSING` state into `CLOSED` state.\n\n  @protected\n  @emits AsyncIterator.end\n**/\nBufferedIterator.prototype._completeClose = function () {\n  if (this._changeState(CLOSED)) {\n    // Write possible terminating items\n    var self = this;\n    this._reading = true;\n    this._flush(function () {\n      if (!self._reading)\n        throw new Error('done callback called multiple times');\n      self._reading = false;\n      // If no items are left, end the iterator\n      // Otherwise, `read` becomes responsible for ending the iterator\n      if (!self._buffer.length)\n        endAsync(self);\n    });\n  }\n};\n\n/* Called by {@link AsyncIterator#destroy} */\nBufferedIterator.prototype._destroy = function (error, callback) {\n  this._buffer = [];\n  callback();\n};\n\n/**\n  Writes terminating items and closes iterator resources.\n\n  Should never be called before {@link BufferedIterator#close};\n  typically, `close` is responsible for calling `_flush`.\n\n  @protected\n  @param {function} done To be called when termination is complete\n**/\nBufferedIterator.prototype._flush = function (done) { done(); };\n\n/* Generates details for a textual representation of the iterator. */\nBufferedIterator.prototype._toStringDetails = function () {\n  var buffer = this._buffer, length = buffer.length;\n  return '{' + (length ? 'next: ' + buffer[0] + ', ' : '') + 'buffer: ' + length + '}';\n};\n\n\n\n\n/**\n  Creates a new `TransformIterator`.\n\n  This class serves as a base class for other iterators.\n\n  @constructor\n  @classdesc An iterator that generates items based on a source iterator.\n  @param {AsyncIterator|Readable} [source] The source this iterator generates items from\n  @param {object} [options] Settings of the iterator\n  @param {integer} [options.maxBufferSize=4] The maximum number of items to keep in the buffer\n  @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n  @param {boolean} [options.optional=false] If transforming is optional, the original item is pushed when its transformation yields no items\n  @param {boolean} [options.destroySource=true] Whether the source should be destroyed when this transformed iterator is closed or destroyed\n  @param {AsyncIterator} [options.source] The source this iterator generates items from\n  @extends BufferedIterator\n**/\nfunction TransformIterator(source, options) {\n  if (!(this instanceof TransformIterator))\n    return new TransformIterator(source, options);\n  // Shift arguments if the first is not a source\n  if (!source || !isFunction(source.read)) {\n    if (!options) options = source;\n    source = options && options.source;\n  }\n  BufferedIterator.call(this, options);\n  if (source) this.source = source;\n  this._optional = !!(options && options.optional);\n  this._destroySource = !options || options.destroySource !== false;\n}\nBufferedIterator.subclass(TransformIterator);\n\n/**\n  Gets or sets the source this iterator generates items from.\n\n  @name TransformIterator#source\n  @type AsyncIterator\n**/\nObject.defineProperty(TransformIterator.prototype, 'source', {\n  set: function (source) {\n    // Validate and set source\n    this._validateSource(source);\n    this._source = source;\n    source._destination = this;\n\n    // Close this iterator if the source has already ended\n    if (source.ended)\n      this.close();\n    // Otherwise, react to source events\n    else {\n      source.on('end',      destinationCloseWhenDone);\n      source.on('readable', destinationFillBuffer);\n      source.on('error',    destinationEmitError);\n    }\n  },\n  get: getSource,\n  enumerable: true,\n});\nfunction getSource() { return this._source; }\nfunction destinationEmitError(error) { this._destination.emit('error', error); }\nfunction destinationCloseWhenDone()  { this._destination._closeWhenDone(); }\nfunction destinationFillBuffer()     { this._destination._fillBuffer(); }\n\n/**\n  Validates whether the given iterator can be used as a source.\n\n  @protected\n  @param {object} source The source to validate\n  @param {boolean} allowDestination Whether the source can already have a destination\n**/\nTransformIterator.prototype._validateSource = function (source, allowDestination) {\n  if (this._source)\n    throw new Error('The source cannot be changed after it has been set');\n  if (!source || !isFunction(source.read) || !isFunction(source.on))\n    throw new Error('Invalid source: ' + source);\n  if (!allowDestination && source._destination)\n    throw new Error('The source already has a destination');\n};\n\n/* Tries to read a transformed item */\nTransformIterator.prototype._read = function (count, done) {\n  var self = this;\n  readAndTransform(self, function next() {\n    // Continue transforming until at least `count` items have been pushed\n    if (self._pushedCount < count && !self.closed)\n      setImmediate(readAndTransform, self, next, done);\n    else\n      done();\n  }, done);\n};\nfunction readAndTransform(self, next, done) {\n  // If the source exists and still can read items,\n  // try to read and transform the next item.\n  var source = self._source, item;\n  if (source && !source.ended && (item = source.read()) !== null) {\n    if (!self._optional)\n      self._transform(item, next);\n    else\n      optionalTransform(self, item, next);\n  }\n  else\n    done();\n}\n// Tries to transform the item;\n// if the transformation yields no items, pushes the original item\nfunction optionalTransform(self, item, done) {\n  var pushedCount = self._pushedCount;\n  self._transform(item, function () {\n    if (pushedCount === self._pushedCount)\n      self._push(item);\n    done();\n  });\n}\n\n/**\n  Generates items based on the item from the source.\n\n  Implementers should add items through {@link BufferedIterator#_push}.\n  The default implementation pushes the source item as-is.\n\n  @protected\n  @param {object} item The last read item from the source\n  @param {function} done To be called when reading is complete\n**/\nTransformIterator.prototype._transform = function (item, done) {\n  this._push(item), done();\n};\n\n/**\n  Closes the iterator when pending items are transformed.\n\n  @protected\n**/\nTransformIterator.prototype._closeWhenDone = function () {\n  this.close();\n};\n\n/* Cleans up the source iterator and ends. */\nTransformIterator.prototype._end = function (destroy) {\n  var source = this._source;\n  if (source) {\n    source.removeListener('end',      destinationCloseWhenDone);\n    source.removeListener('error',    destinationEmitError);\n    source.removeListener('readable', destinationFillBuffer);\n    delete source._destination;\n    if (this._destroySource)\n      source.destroy();\n  }\n  BufferedIterator.prototype._end.call(this, destroy);\n};\n\n/**\n  Creates an iterator that wraps around a given iterator or readable stream.\n\n  Use this to convert an iterator-like object into a full-featured AsyncIterator.\n\n  After this operation, only read the returned iterator instead of the given one.\n\n  @function\n  @param {AsyncIterator|Readable} [source] The source this iterator generates items from\n  @param {object} [options] Settings of the iterator\n  @returns {AsyncIterator} A new iterator with the items from the given iterator\n**/\nAsyncIterator.wrap = TransformIterator;\n\n\n\n\n/**\n  Creates a new `SimpleTransformIterator`.\n\n  @constructor\n  @classdesc An iterator that generates items based on a source iterator\n             and simple transformation steps passed as arguments.\n  @param {AsyncIterator|Readable} [source] The source this iterator generates items from\n  @param {object|Function} [options] Settings of the iterator, or the transformation function\n  @param {integer} [options.maxbufferSize=4] The maximum number of items to keep in the buffer\n  @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n  @param {AsyncIterator} [options.source] The source this iterator generates items from\n  @param {integer} [options.offset] The number of items to skip\n  @param {integer} [options.limit] The maximum number of items\n  @param {Function} [options.filter] A function to synchronously filter items from the source\n  @param {Function} [options.map] A function to synchronously transform items from the source\n  @param {Function} [options.transform] A function to asynchronously transform items from the source\n  @param {boolean} [options.optional=false] If transforming is optional, the original item is pushed when its mapping yields `null` or its transformation yields no items\n  @param {Array|AsyncIterator} [options.prepend] Items to insert before the source items\n  @param {Array|AsyncIterator} [options.append]  Items to insert after the source items\n  @extends TransformIterator\n**/\nfunction SimpleTransformIterator(source, options) {\n  if (!(this instanceof SimpleTransformIterator))\n    return new SimpleTransformIterator(source, options);\n  TransformIterator.call(this, source, options);\n\n  // Set transformation steps from the options\n  if (options = options || !isFunction(source && source.read) && source) {\n    var limit = options.limit, offset = options.offset,\n        filter = options.filter, map = options.map,\n        transform = isFunction(options) ? options : options.transform,\n        prepend = options.prepend, append = options.append;\n    // Don't emit any items when bounds are unreachable\n    if (offset === Infinity || limit === -Infinity)\n      this._limit = 0;\n    else {\n      if (isFinite(offset))      this._offset    = Math.max(~~offset, 0);\n      if (isFinite(limit))       this._limit     = Math.max(~~limit,  0);\n      if (isFunction(filter))    this._filter    = filter;\n      if (isFunction(map))       this._map       = map;\n      if (isFunction(transform)) this._transform = transform;\n    }\n    if (prepend) this._prepender = prepend.on ? prepend : new ArrayIterator(prepend);\n    if (append)  this._appender  = append.on  ? append  : new ArrayIterator(append);\n  }\n}\nTransformIterator.subclass(SimpleTransformIterator);\n\n// Default settings\nSimpleTransformIterator.prototype._offset = 0;\nSimpleTransformIterator.prototype._limit = Infinity;\nSimpleTransformIterator.prototype._filter = function ()  { return true; };\nSimpleTransformIterator.prototype._map = null;\nSimpleTransformIterator.prototype._transform = null;\n\n/* Tries to read and transform items */\nSimpleTransformIterator.prototype._read = function (count, done) {\n  var self = this;\n  readAndTransformSimple(self, count, function next() {\n    setImmediate(readAndTransformSimple, self, count, next, done);\n  }, done);\n};\nfunction readAndTransformSimple(self, count, next, done) {\n  // Verify we have a readable source\n  var source = self._source, item;\n  if (!source || source.ended) {\n    done();\n    return;\n  }\n  // Verify we are still below the limit\n  if (self._limit === 0)\n    self.close();\n\n  // Try to read the next item until at least `count` items have been pushed\n  while (!self.closed && self._pushedCount < count && (item = source.read()) !== null) {\n    // Verify the item passes the filter and we've reached the offset\n    if (!self._filter(item) || self._offset !== 0 && self._offset--)\n      continue;\n\n    // Synchronously map the item\n    var mappedItem = self._map === null ? item : self._map(item);\n    // Skip `null` items, pushing the original item if the mapping was optional\n    if (mappedItem === null) {\n      if (self._optional)\n        self._push(item);\n    }\n    // Skip the asynchronous phase if no transformation was specified\n    else if (self._transform === null)\n      self._push(mappedItem);\n    // Asynchronously transform the item, and wait for `next` to call back\n    else {\n      if (!self._optional)\n        self._transform(mappedItem, next);\n      else\n        optionalTransform(self, mappedItem, next);\n      return;\n    }\n\n    // Stop when we've reached the limit\n    if (--self._limit === 0)\n      self.close();\n  }\n  done();\n}\n\n// Prepends items to the iterator\nSimpleTransformIterator.prototype._begin = function (done) {\n  this._insert(this._prepender, done);\n  delete this._prepender;\n};\n\n// Appends items to the iterator\nSimpleTransformIterator.prototype._flush = function (done) {\n  this._insert(this._appender, done);\n  delete this._appender;\n};\n\n// Inserts items in the iterator\nSimpleTransformIterator.prototype._insert = function (inserter, done) {\n  var self = this;\n  if (!inserter || inserter.ended)\n    done();\n  else {\n    inserter.on('data', push);\n    inserter.on('end',  end);\n  }\n  function push(item) { self._push(item); }\n  function end() {\n    inserter.removeListener('data', push);\n    inserter.removeListener('end',  end);\n    done();\n  }\n};\n\n/**\n  Transforms items from this iterator.\n\n  After this operation, only read the returned iterator instead of the current one.\n\n  @param {object|Function} [options] Settings of the iterator, or the transformation function\n  @param {integer} [options.maxbufferSize=4] The maximum number of items to keep in the buffer\n  @param {boolean} [options.autoStart=true] Whether buffering starts directly after construction\n  @param {integer} [options.offset] The number of items to skip\n  @param {integer} [options.limit] The maximum number of items\n  @param {Function} [options.filter] A function to synchronously filter items from the source\n  @param {Function} [options.map] A function to synchronously transform items from the source\n  @param {Function} [options.transform] A function to asynchronously transform items from the source\n  @param {boolean} [options.optional=false] If transforming is optional, the original item is pushed when its mapping yields `null` or its transformation yields no items\n  @param {Array|AsyncIterator} [options.prepend] Items to insert before the source items\n  @param {Array|AsyncIterator} [options.append]  Items to insert after the source items\n  @returns {AsyncIterator} A new iterator that maps the items from this iterator\n**/\nAsyncIterator.prototype.transform = function (options) {\n  return new SimpleTransformIterator(this, options);\n};\n\n/**\n  Maps items from this iterator using the given function.\n\n  After this operation, only read the returned iterator instead of the current one.\n\n  @param {Function} mapper A mapping function to call on this iterator's (remaining) items\n  @param {object?} self The `this` pointer for the mapping function\n  @returns {AsyncIterator} A new iterator that maps the items from this iterator\n**/\nAsyncIterator.prototype.map = function (mapper, self) {\n  return this.transform({ map: self ? mapper.bind(self) : mapper });\n};\n\n/**\n  Return items from this iterator that match the filter.\n\n  After this operation, only read the returned iterator instead of the current one.\n\n  @param {Function} filter A filter function to call on this iterator's (remaining) items\n  @param {object?} self The `this` pointer for the filter function\n  @returns {AsyncIterator} A new iterator that filters items from this iterator\n**/\nAsyncIterator.prototype.filter = function (filter, self) {\n  return this.transform({ filter: self ? filter.bind(self) : filter });\n};\n\n/**\n  Prepends the items after those of the current iterator.\n\n  After this operation, only read the returned iterator instead of the current one.\n\n  @param {Array|AsyncIterator} items Items to insert before this iterator's (remaining) items\n  @returns {AsyncIterator} A new iterator that prepends items to this iterator\n**/\nAsyncIterator.prototype.prepend = function (items) {\n  return this.transform({ prepend: items });\n};\n\n/**\n  Appends the items after those of the current iterator.\n\n  After this operation, only read the returned iterator instead of the current one.\n\n  @param {Array|AsyncIterator} items Items to insert after this iterator's (remaining) items\n  @returns {AsyncIterator} A new iterator that appends items to this iterator\n**/\nAsyncIterator.prototype.append = function (items) {\n  return this.transform({ append: items });\n};\n\n/**\n  Surrounds items of the current iterator with the given items.\n\n  After this operation, only read the returned iterator instead of the current one.\n\n  @param {Array|AsyncIterator} prepend Items to insert before this iterator's (remaining) items\n  @param {Array|AsyncIterator} append Items to insert after this iterator's (remaining) items\n  @returns {AsyncIterator} A new iterator that appends and prepends items to this iterator\n**/\nAsyncIterator.prototype.surround = function (prepend, append) {\n  return this.transform({ prepend: prepend, append: append });\n};\n\n/**\n  Skips the given number of items from the current iterator.\n\n  The current iterator may not be read anymore until the returned iterator ends.\n\n  @param {integer} offset The number of items to skip\n  @returns {AsyncIterator} A new iterator that skips the given number of items\n**/\nAsyncIterator.prototype.skip = function (offset) {\n  return this.transform({ offset: offset });\n};\n\n/**\n  Limits the current iterator to the given number of items.\n\n  The current iterator may not be read anymore until the returned iterator ends.\n\n  @param {integer} limit The maximum number of items\n  @returns {AsyncIterator} A new iterator with at most the given number of items\n**/\nAsyncIterator.prototype.take = function (limit) {\n  return this.transform({ limit: limit });\n};\n\n/**\n  Limits the current iterator to the given range.\n\n  The current iterator may not be read anymore until the returned iterator ends.\n\n  @param {integer} start Index of the first item to return\n  @param {integer} end Index of the last item to return\n  @returns {AsyncIterator} A new iterator with items in the given range\n**/\nAsyncIterator.prototype.range = function (start, end) {\n  return this.transform({ offset: start, limit: Math.max(end - start + 1, 0) });\n};\n\n\n\n\n/**\n  Creates a new `MultiTransformIterator`.\n\n  @constructor\n  @classdesc An iterator that generates items by transforming each item of a source\n             with a different iterator.\n  @param {AsyncIterator|Readable} [source] The source this iterator generates items from\n  @param {object} [options] Settings of the iterator\n  @extends TransformIterator\n**/\nfunction MultiTransformIterator(source, options) {\n  if (!(this instanceof MultiTransformIterator))\n    return new MultiTransformIterator(source, options);\n  TransformIterator.call(this, source, options);\n  this._transformerQueue = [];\n}\nTransformIterator.subclass(MultiTransformIterator);\n\n/* Tries to read and transform items */\nMultiTransformIterator.prototype._read = function (count, done) {\n  // Remove transformers that have ended\n  var item, head, transformer, transformerQueue = this._transformerQueue,\n      source = this._source, optional = this._optional;\n  while ((head = transformerQueue[0]) && head.transformer.ended) {\n    // If transforming is optional, push the original item if none was pushed\n    if (optional && head.item !== null)\n      this._push(head.item), count--;\n    // Remove listeners from the transformer\n    head = transformerQueue.shift(), transformer = head.transformer;\n    transformer.removeListener('end',      destinationFillBuffer);\n    transformer.removeListener('readable', destinationFillBuffer);\n    transformer.removeListener('error',    destinationEmitError);\n  }\n\n  // Create new transformers if there are less than the maximum buffer size\n  while (source && !source.ended && transformerQueue.length < this._maxBufferSize) {\n    // Read an item to create the next transformer\n    item = this._source.read();\n    if (item === null)\n      break;\n    // Create the transformer and listen to its events\n    transformer = this._createTransformer(item) || new EmptyIterator();\n    transformer._destination = this;\n    transformer.on('end',      destinationFillBuffer);\n    transformer.on('readable', destinationFillBuffer);\n    transformer.on('error',    destinationEmitError);\n    transformerQueue.push({ transformer: transformer, item: item });\n  }\n\n  // Try to read `count` items from the transformer\n  head = transformerQueue[0];\n  if (head) {\n    transformer = head.transformer;\n    while (count-- > 0 && (item = transformer.read()) !== null) {\n      this._push(item);\n      // If a transformed item was pushed, no need to push the original anymore\n      if (optional)\n        head.item = null;\n    }\n  }\n  // End the iterator if the source has ended\n  else if (source && source.ended)\n    this.close();\n  done();\n};\n\n/**\n  Creates a transformer for the given item.\n\n  @param {object} item The last read item from the source\n  @returns {AsyncIterator} An iterator that transforms the given item\n**/\nMultiTransformIterator.prototype._createTransformer = SingletonIterator;\n\n/* Closes the iterator when pending items are transformed. */\nMultiTransformIterator.prototype._closeWhenDone = function () {\n  // Only close if all transformers are read\n  if (!this._transformerQueue.length)\n    this.close();\n};\n\n\n\n\n/**\n  Creates a new `ClonedIterator`.\n\n  @constructor\n  @classdesc An iterator that copies items from another iterator.\n  @param {AsyncIterator|Readable} [source] The source this iterator copies items from\n  @extends TransformIterator\n**/\nfunction ClonedIterator(source) {\n  if (!(this instanceof ClonedIterator))\n    return new ClonedIterator(source);\n  // Although ClonedIterator inherits from TransformIterator and hence BufferedIterator,\n  // we do not need the buffering because items arrive directly from a history buffer.\n  // Therefore, initialize as an AsyncIterator, which does not set up buffering.\n  AsyncIterator.call(this);\n\n  this._readPosition = 0;\n  if (source) this.source = source;\n}\nTransformIterator.subclass(ClonedIterator);\n\n// The source this iterator copies items from\nObject.defineProperty(ClonedIterator.prototype, 'source', {\n  set: function (source) {\n    // Validate and set the source\n    var history = source && source._destination;\n    this._validateSource(source, !history || history instanceof HistoryReader);\n    this._source = source;\n    // Create a history reader for the source if none already existed\n    if (!history)\n      history = source._destination = new HistoryReader(source);\n\n    // Close this clone if history is empty and the source has ended\n    if (history.endsAt(0))\n      this.close();\n    else {\n      // Subscribe to history events\n      history.register(this);\n      // If there are already items in history, this clone is readable\n      if (history.readAt(0) !== null)\n        this.readable = true;\n    }\n\n    // Hook pending property callbacks to the source\n    var propertyCallbacks = this._propertyCallbacks;\n    for (var propertyName in propertyCallbacks) {\n      var callbacks = propertyCallbacks[propertyName];\n      for (var i = 0; i < callbacks.length; i++)\n        getSourceProperty(this, source, propertyName, callbacks[i]);\n    }\n  },\n  get: getSource,\n  enumerable: true,\n});\n\n// Retrieves the property with the given name from the clone or its source.\nClonedIterator.prototype.getProperty = function (propertyName, callback) {\n  var properties = this._properties, source = this._source,\n      hasProperty = properties && (propertyName in properties);\n  // If no callback was passed, return the property value\n  if (!callback)\n    return hasProperty ? properties[propertyName] : source && source.getProperty(propertyName);\n  // Try to look up the property in this clone\n  AsyncIterator.prototype.getProperty.call(this, propertyName, callback);\n  // If the property is not set on this clone, it might become set on the source first\n  if (source && !hasProperty)\n    getSourceProperty(this, source, propertyName, callback);\n};\n// Retrieves the property with the given name from the source\nfunction getSourceProperty(clone, source, propertyName, callback) {\n  source.getProperty(propertyName, function (value) {\n    // Only send the source's property if it was not set on the clone in the meantime\n    if (!clone._properties || !(propertyName in clone._properties))\n      callback(value);\n  });\n}\n\n// Retrieves all properties of the iterator and its source.\nClonedIterator.prototype.getProperties = function () {\n  var base = this._source ? this._source.getProperties() : {}, properties = this._properties;\n  for (var name in properties)\n    base[name] = properties[name];\n  return base;\n};\n\n/* Generates details for a textual representation of the iterator. */\nClonedIterator.prototype._toStringDetails = function () {\n  var source = this._source;\n  return '{source: ' + (source ? source.toString() : 'none') + '}';\n};\n\n// Stores the history of a source, so it can be cloned\nfunction HistoryReader(source) {\n  var history = [], clones;\n\n  // Tries to read the item at the given history position\n  this.readAt = function (pos) {\n    var item = null;\n    // Retrieve an item from history when available\n    if (pos < history.length)\n      item = history[pos];\n    // Read a new item from the source when possible\n    else if (!source.ended && (item = source.read()) !== null)\n      history[pos] = item;\n    return item;\n  };\n\n  // Determines whether the given position is the end of the source\n  this.endsAt = function (pos) {\n    return pos === history.length && source.ended;\n  };\n\n  // Registers a clone for history updates\n  this.register = function (clone) { clones && clones.push(clone); };\n\n  // Unregisters a clone for history updates\n  this.unregister = function (clone) {\n    var cloneIndex;\n    if (clones && (cloneIndex = clones.indexOf(clone)) >= 0)\n      clones.splice(cloneIndex, 1);\n  };\n\n  // Listen to source events to trigger events in subscribed clones\n  if (!source.ended) {\n    clones = [];\n    // When the source becomes readable, make all clones readable\n    source.on('readable', clonesMakeReadable);\n    function clonesMakeReadable() {\n      for (var i = 0; i < clones.length; i++)\n        clones[i].readable = true;\n    }\n    // When the source ends, close all clones that are fully read\n    source.on('end', clonesEnd);\n    function clonesEnd() {\n      for (var i = 0; i < clones.length; i++) {\n        if (clones[i]._readPosition === history.length)\n          clones[i].close();\n      }\n      clones = null;\n      source.removeListener('end',      clonesEnd);\n      source.removeListener('error',    clonesEmitError);\n      source.removeListener('readable', clonesMakeReadable);\n    }\n    // When the source errors, re-emit the error\n    source.on('error', clonesEmitError);\n    function clonesEmitError(error) {\n      for (var i = 0; i < clones.length; i++)\n        clones[i].emit('error', error);\n    }\n  }\n}\n\n/* Tries to read an item */\nClonedIterator.prototype.read = function () {\n  var source = this._source, item = null;\n  if (!this.done && source) {\n    // Try to read an item at the current point in history\n    var history = source._destination;\n    if ((item = history.readAt(this._readPosition)) !== null)\n      this._readPosition++;\n    else\n      this.readable = false;\n    // Close the iterator if we are at the end of the source\n    if (history.endsAt(this._readPosition))\n      this.close();\n  }\n  return item;\n};\n\n/* End the iterator and cleans up. */\nClonedIterator.prototype._end = function (destroy) {\n  // Unregister from a possible history reader\n  var history = this._source && this._source._destination;\n  if (history) history.unregister(this);\n\n  // Don't call TransformIterator#_end,\n  // as it would make the source inaccessible for other clones\n  BufferedIterator.prototype._end.call(this, destroy);\n};\n\n// Disable buffer cleanup\nClonedIterator.prototype.close = AsyncIterator.prototype.close;\n\n/**\n  Creates a copy of the current iterator,\n  containing all items emitted from this point onward.\n\n  Further copies can be created; they will all start from this same point.\n  After this operation, only read the returned copies instead of the original iterator.\n\n  @returns {AsyncIterator} A new iterator that contains all future items of this iterator\n**/\nAsyncIterator.prototype.clone = function () {\n  return new ClonedIterator(this);\n};\n\n\n\n\n// Determines whether the given object is a function\nfunction isFunction(object) { return typeof object === 'function'; }\n\n// Export all submodules\nmodule.exports = AsyncIterator;\nAsyncIterator.AsyncIterator = AsyncIterator;\nAsyncIterator.EmptyIterator = AsyncIterator.empty = EmptyIterator;\nAsyncIterator.SingletonIterator = AsyncIterator.single = SingletonIterator;\nAsyncIterator.ArrayIterator = AsyncIterator.fromArray = ArrayIterator;\nAsyncIterator.IntegerIterator = IntegerIterator;\nAsyncIterator.BufferedIterator = BufferedIterator;\nAsyncIterator.TransformIterator = TransformIterator;\nAsyncIterator.SimpleTransformIterator = SimpleTransformIterator;\nAsyncIterator.MultiTransformIterator = MultiTransformIterator;\nAsyncIterator.ClonedIterator = ClonedIterator;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst proj4_1 = __importDefault(require(\"proj4\"));\nconst inversify_1 = require(\"inversify\");\nconst RoutableTileRegistry_1 = __importDefault(require(\"../entities/tiles/RoutableTileRegistry\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst Geo_1 = __importDefault(require(\"../util/Geo\"));\nconst graph_1 = __importDefault(require(\"./graph\"));\nlet PathfinderProvider = class PathfinderProvider {\n    constructor(shortestPathTree, pointToPoint, profileProvider, locationResolver) {\n        this.locationResolver = locationResolver;\n        this.shortestPath = pointToPoint;\n        this.shortestPathTree = shortestPathTree;\n        this.routableTileRegistry = RoutableTileRegistry_1.default.getInstance();\n        this.profileProvider = profileProvider;\n        this.graphs = {};\n        this.embeddings = [];\n        this.embedded = new Set();\n    }\n    getShortestPathAlgorithm(profile) {\n        const graph = this.getGraphForProfile(profile);\n        return this.shortestPath.createInstance(graph, this.locationResolver);\n    }\n    getShortestPathTreeAlgorithm(profile) {\n        const graph = this.getGraphForProfile(profile);\n        return this.shortestPathTree.createInstance(graph);\n    }\n    async registerEdges(ways) {\n        // add new edges to existing graphs\n        for (const profileId of Object.keys(this.graphs)) {\n            const profile = await this.profileProvider.getProfile(profileId);\n            for (const wayId of ways) {\n                const way = this.routableTileRegistry.getWay(wayId);\n                if (!profile.hasAccess(way)) {\n                    continue;\n                }\n                for (const edge of way.getParts()) {\n                    const from = this.routableTileRegistry.getNode(edge.from);\n                    const to = this.routableTileRegistry.getNode(edge.to);\n                    if (from && to) {\n                        if (profile.isObstacle(from) || profile.isObstacle(to)) {\n                            continue;\n                        }\n                        this.addEdge(profile, from, to, way, edge.distance);\n                        if (!profile.isOneWay(way)) {\n                            this.addEdge(profile, to, from, way, edge.distance);\n                        }\n                    }\n                }\n            }\n        }\n    }\n    async embedLocation(p, tileset, invert = false) {\n        for (const profile of await this.profileProvider.getProfiles()) {\n            if (this.embedded.has(profile.getID() + Geo_1.default.getId(p))) {\n                continue;\n            }\n            this.embedded.add(profile.getID() + Geo_1.default.getId(p));\n            let bestDistance = Infinity;\n            let bestSegment;\n            for (const wayId of tileset.getWays()) {\n                const way = this.routableTileRegistry.getWay(wayId);\n                if (!profile.hasAccess(way) || way.reachable === false) {\n                    continue;\n                }\n                for (const segment of way.segments) {\n                    for (let i = 0; i < segment.length - 1; i++) {\n                        const nodeA = segment[i];\n                        const from = this.routableTileRegistry.getNode(nodeA);\n                        const nodeB = segment[i + 1];\n                        const to = this.routableTileRegistry.getNode(nodeB);\n                        if (!from || !to) {\n                            // FIXME, caused by bug in data\n                            continue;\n                        }\n                        const distance = this.segmentDistToPoint(from, to, p);\n                        if (distance < bestDistance) {\n                            bestDistance = distance;\n                            bestSegment = [way, from, to];\n                        }\n                    }\n                }\n            }\n            if (bestSegment) {\n                const [way, segA, segB] = bestSegment;\n                const intersection = this.projectOntoSegment(segA, segB, p);\n                const newEmbedding = {\n                    way, segA, segB, intersection, point: p,\n                };\n                for (const otherEmbedding of this.embeddings) {\n                    if (Geo_1.default.getId(otherEmbedding.segA) === Geo_1.default.getId(segA)\n                        && Geo_1.default.getId(otherEmbedding.segB) === Geo_1.default.getId(segB)) {\n                        this.addEdge(profile, intersection, otherEmbedding.intersection, way);\n                        this.addEdge(profile, otherEmbedding.intersection, intersection, way);\n                    }\n                }\n                this.embeddings.push(newEmbedding);\n                const isOneWay = profile.isOneWay(way);\n                if (!invert) {\n                    // A -------------------> B\n                    // A <-- intersection --> B\n                    //            |\n                    //            p\n                    this.addEdge(profile, p, intersection, way);\n                    this.addEdge(profile, intersection, segB, way);\n                    if (!isOneWay) {\n                        this.addEdge(profile, intersection, segA, way);\n                    }\n                }\n                else {\n                    // A -------------------> B\n                    // A --> intersection <-- B\n                    //            |\n                    //            p\n                    this.addEdge(profile, intersection, p, way);\n                    this.addEdge(profile, segA, intersection, way);\n                    if (!isOneWay) {\n                        this.addEdge(profile, segB, intersection, way);\n                    }\n                }\n            }\n        }\n    }\n    getGraphForProfile(profile) {\n        if (!this.graphs[profile.getID()]) {\n            // we don't have a graph for this profile yet\n            // create one\n            const graph = new graph_1.default(profile.getID());\n            this.graphs[profile.getID()] = graph;\n            // and populate it with all the data we have\n            for (const way of this.routableTileRegistry.getWays()) {\n                if (!profile.hasAccess(way)) {\n                    continue;\n                }\n                for (const edge of way.getParts()) {\n                    const from = this.routableTileRegistry.getNode(edge.from);\n                    const to = this.routableTileRegistry.getNode(edge.to);\n                    if (from && to) {\n                        if (profile.isObstacle(from) || profile.isObstacle(to)) {\n                            continue;\n                        }\n                        this.addEdge(profile, from, to, way, edge.distance, graph);\n                        if (!profile.isOneWay(way)) {\n                            this.addEdge(profile, to, from, way, edge.distance, graph);\n                        }\n                    }\n                }\n            }\n        }\n        return this.graphs[profile.getID()];\n    }\n    addEdge(profile, from, to, way, distance, graph) {\n        // this specifically adds an edge that corresponds to an actual street\n        // if you need to add any other edge, you'll need to create a different method\n        graph = graph || this.getGraphForProfile(profile);\n        // make sure we never have 0 costs, this confuses dijkstra\n        distance = distance || profile.getDistance(from, to, way) || 0.01;\n        const duration = profile.getDuration(from, to, way) || 1;\n        const cost = profile.getCost(from, to, way) || 1;\n        graph.addEdge(Geo_1.default.getId(from), Geo_1.default.getId(to), way.id, distance, duration, cost);\n    }\n    segmentDistToPoint(segA, segB, p) {\n        // potential 'catastrophic cancellation'\n        const sx1 = segA.longitude;\n        const sx2 = segB.longitude;\n        const px = p.longitude;\n        const sy1 = segA.latitude;\n        const sy2 = segB.latitude;\n        const py = p.latitude;\n        const px2 = sx2 - sx1; // <-\n        const py2 = sy2 - sy1; // <-\n        const norm = px2 * px2 + py2 * py2;\n        let u;\n        if (norm) {\n            u = ((px - sx1) * px2 + (py - sy1) * py2) / norm;\n        }\n        else {\n            u = Infinity;\n        }\n        if (u > 1) {\n            u = 1;\n        }\n        else if (u < 0) {\n            u = 0;\n        }\n        const x = sx1 + u * px2;\n        const y = sy1 + u * py2;\n        const result = {\n            longitude: x,\n            latitude: y,\n        };\n        const dist = Geo_1.default.getDistanceBetweenLocations(p, result);\n        return dist;\n    }\n    projectOntoSegment(segA, segB, p) {\n        // potential 'catastrophic cancellation'\n        const mSegA = proj4_1.default(\"EPSG:4326\", \"EPSG:3857\", [segA.longitude, segA.latitude]);\n        const mSegB = proj4_1.default(\"EPSG:4326\", \"EPSG:3857\", [segB.longitude, segB.latitude]);\n        const mP = proj4_1.default(\"EPSG:4326\", \"EPSG:3857\", [p.longitude, p.latitude]);\n        const sx1 = mSegA[0];\n        const sx2 = mSegB[0];\n        const px = mP[0];\n        const sy1 = mSegA[1];\n        const sy2 = mSegB[1];\n        const py = mP[1];\n        const px2 = sx2 - sx1; // <-\n        const py2 = sy2 - sy1; // <-\n        const norm = px2 * px2 + py2 * py2;\n        let u;\n        if (norm) {\n            u = ((px - sx1) * px2 + (py - sy1) * py2) / norm;\n        }\n        else {\n            u = Infinity;\n        }\n        if (u > 1) {\n            u = 1;\n        }\n        else if (u < 0) {\n            u = 0;\n        }\n        const x = sx1 + u * px2;\n        const y = sy1 + u * py2;\n        const intersection = proj4_1.default(\"EPSG:3857\", \"EPSG:4326\", [x, y]);\n        const result = {\n            longitude: intersection[0],\n            latitude: intersection[1],\n        };\n        return result;\n    }\n};\nPathfinderProvider = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.ShortestPathTreeAlgorithm)),\n    __param(1, inversify_1.inject(types_1.default.ShortestPathAlgorithm)),\n    __param(2, inversify_1.inject(types_1.default.ProfileProvider)),\n    __param(3, inversify_1.inject(types_1.default.LocationResolver)),\n    __metadata(\"design:paramtypes\", [Object, Object, ProfileProviderDefault_1.default, Object])\n], PathfinderProvider);\nexports.default = PathfinderProvider;\n//# sourceMappingURL=PathfinderProvider.js.map","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RoutingPhase;\n(function (RoutingPhase) {\n    RoutingPhase[\"Base\"] = \"base\";\n    RoutingPhase[\"Transit\"] = \"transit\";\n})(RoutingPhase || (RoutingPhase = {}));\nexports.default = RoutingPhase;\n//# sourceMappingURL=RoutingPhase.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst parse = require(\"wellknown\");\nconst constants_1 = require(\"../uri/constants\");\nconst uri_1 = __importDefault(require(\"../uri/uri\"));\nlet LDLoader = class LDLoader {\n    constructor() {\n        this.collectionFields = new Set();\n    }\n    defineCollection(field) {\n        this.collectionFields.add(field);\n    }\n    process(triples, views) {\n        const entities = this._extractEntities(triples);\n        for (const entity of Object.values(entities)) {\n            for (const view of views) {\n                const mapped = view.process(entity);\n                if (mapped) {\n                    view.addEntity(mapped);\n                }\n            }\n        }\n        return views.map((view) => view.getContents());\n    }\n    disambiguateBlankNodes(triples, scope) {\n        for (const triple of triples) {\n            if (triple.subject.termType === \"BlankNode\") {\n                triple.subject.value = `${scope}#${triple.subject.value}`;\n            }\n            if (triple.object.termType === \"BlankNode\") {\n                triple.object.value = `${scope}#${triple.object.value}`;\n            }\n        }\n    }\n    _parseValue(entities, triple) {\n        const tripleObject = triple.object;\n        const rawValue = tripleObject.value;\n        if (tripleObject.termType === \"BlankNode\") {\n            return entities[rawValue];\n        }\n        if (tripleObject.termType === \"NamedNode\") {\n            if (entities[rawValue]) {\n                return entities[rawValue];\n            }\n        }\n        if (tripleObject.termType === \"Literal\") {\n            const valueType = tripleObject.datatype.value;\n            if (valueType === uri_1.default.inNS(constants_1.XMLS, \"string\")) {\n                return rawValue;\n            }\n            if (valueType === uri_1.default.inNS(constants_1.XMLS, \"boolean\")) {\n                return rawValue === \"true\";\n            }\n            if (valueType === uri_1.default.inNS(constants_1.XMLS, \"double\")) {\n                return parseFloat(rawValue);\n            }\n            if (valueType === uri_1.default.inNS(constants_1.XMLS, \"integer\")) {\n                return parseInt(rawValue, 10);\n            }\n            if (valueType === uri_1.default.inNS(constants_1.GEOSPARQL, \"wktLiteral\")) {\n                return this.parseWktLiteral(rawValue);\n            }\n        }\n        return rawValue;\n    }\n    parseWktLiteral(raw) {\n        const [reference, ...rest] = raw.split(\" \");\n        if (reference === \"<http://www.opengis.net/def/crs/OGC/1.3/CRS84>\") {\n            return parse(rest.join(\" \"));\n        }\n        return parse(raw);\n    }\n    _extractEntities(triples) {\n        const entities = {};\n        for (const triple of triples) {\n            const { subject: { value: subject } } = triple;\n            if (!(subject in entities)) {\n                entities[subject] = { id: subject };\n            }\n        }\n        for (const triple of triples) {\n            const { subject: { value: subject }, predicate: { value: predicate } } = triple;\n            const entity = entities[subject];\n            const parsedValue = this._parseValue(entities, triple);\n            if (!this.collectionFields.has(predicate)) {\n                entity[predicate] = parsedValue;\n            }\n            else {\n                const fieldData = entity[predicate] || [];\n                fieldData.push(parsedValue);\n                entity[predicate] = fieldData;\n            }\n        }\n        return entities;\n    }\n};\nLDLoader = __decorate([\n    inversify_1.injectable()\n], LDLoader);\nexports.LDLoader = LDLoader;\n//# sourceMappingURL=ldloader.js.map","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DUPLICATED_INJECTABLE_DECORATOR = \"Cannot apply @injectable decorator multiple times.\";\nexports.DUPLICATED_METADATA = \"Metadata key was used more than once in a parameter:\";\nexports.NULL_ARGUMENT = \"NULL argument\";\nexports.KEY_NOT_FOUND = \"Key Not Found\";\nexports.AMBIGUOUS_MATCH = \"Ambiguous match found for serviceIdentifier:\";\nexports.CANNOT_UNBIND = \"Could not unbind serviceIdentifier:\";\nexports.NOT_REGISTERED = \"No matching bindings found for serviceIdentifier:\";\nexports.MISSING_INJECTABLE_ANNOTATION = \"Missing required @injectable annotation in:\";\nexports.MISSING_INJECT_ANNOTATION = \"Missing required @inject or @multiInject annotation in:\";\nexports.UNDEFINED_INJECT_ANNOTATION = function (name) {\n    return \"@inject called with undefined this could mean that the class \" + name + \" has \" +\n        \"a circular dependency problem. You can use a LazyServiceIdentifer to  \" +\n        \"overcome this limitation.\";\n};\nexports.CIRCULAR_DEPENDENCY = \"Circular dependency found:\";\nexports.NOT_IMPLEMENTED = \"Sorry, this feature is not fully implemented yet.\";\nexports.INVALID_BINDING_TYPE = \"Invalid binding type:\";\nexports.NO_MORE_SNAPSHOTS_AVAILABLE = \"No snapshot available to restore.\";\nexports.INVALID_MIDDLEWARE_RETURN = \"Invalid return type in middleware. Middleware must return!\";\nexports.INVALID_FUNCTION_BINDING = \"Value provided to function binding must be a function!\";\nexports.INVALID_TO_SELF_VALUE = \"The toSelf function can only be applied when a constructor is \" +\n    \"used as service identifier\";\nexports.INVALID_DECORATOR_OPERATION = \"The @inject @multiInject @tagged and @named decorators \" +\n    \"must be applied to the parameters of a class constructor or a class property.\";\nexports.ARGUMENTS_LENGTH_MISMATCH = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"The number of constructor arguments in the derived class \" +\n        (values[0] + \" must be >= than the number of constructor arguments of its base class.\");\n};\nexports.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT = \"Invalid Container constructor argument. Container options \" +\n    \"must be an object.\";\nexports.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE = \"Invalid Container option. Default scope must \" +\n    \"be a string ('singleton' or 'transient').\";\nexports.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE = \"Invalid Container option. Auto bind injectable must \" +\n    \"be a boolean\";\nexports.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK = \"Invalid Container option. Skip base check must \" +\n    \"be a boolean\";\nexports.MULTIPLE_POST_CONSTRUCT_METHODS = \"Cannot apply @postConstruct decorator multiple times in the same class\";\nexports.POST_CONSTRUCT_ERROR = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"@postConstruct error in class \" + values[0] + \": \" + values[1];\n};\nexports.CIRCULAR_DEPENDENCY_IN_FACTORY = function () {\n    var values = [];\n    for (var _i = 0; _i < arguments.length; _i++) {\n        values[_i] = arguments[_i];\n    }\n    return \"It looks like there is a circular dependency \" +\n        (\"in one of the '\" + values[0] + \"' bindings. Please investigate bindings with\") +\n        (\"service identifier '\" + values[1] + \"'.\");\n};\nexports.STACK_OVERFLOW = \"Maximum call stack size exceeded\";\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst graphTypes = require('./graphTypes');\nconst types = require('./types');\n// TODO: move `IdentifierIssuer` to its own package\nconst IdentifierIssuer = require('rdf-canonize').IdentifierIssuer;\nconst JsonLdError = require('./JsonLdError');\n\n// constants\nconst REGEX_LINK_HEADERS = /(?:<[^>]*?>|\"[^\"]*?\"|[^,])+/g;\nconst REGEX_LINK_HEADER = /\\s*<([^>]*?)>\\s*(?:;\\s*(.*))?/;\nconst REGEX_LINK_HEADER_PARAMS =\n  /(.*?)=(?:(?:\"([^\"]*?)\")|([^\"]*?))\\s*(?:(?:;\\s*)|$)/g;\n\nconst DEFAULTS = {\n  headers: {\n    accept: 'application/ld+json, application/json'\n  }\n};\n\nconst api = {};\nmodule.exports = api;\napi.IdentifierIssuer = IdentifierIssuer;\n\n// define setImmediate and nextTick\n// // nextTick implementation with browser-compatible fallback // //\n// from https://github.com/caolan/async/blob/master/lib/async.js\n\n// capture the global reference to guard against fakeTimer mocks\nconst _setImmediate = typeof setImmediate === 'function' && setImmediate;\n\nconst _delay = _setImmediate ?\n  // not a direct alias (for IE10 compatibility)\n  fn => _setImmediate(fn) :\n  fn => setTimeout(fn, 0);\n\nif(typeof process === 'object' && typeof process.nextTick === 'function') {\n  api.nextTick = process.nextTick;\n} else {\n  api.nextTick = _delay;\n}\napi.setImmediate = _setImmediate ? _delay : api.nextTick;\n\n/**\n * Clones an object, array, Map, Set, or string/number. If a typed JavaScript\n * object is given, such as a Date, it will be converted to a string.\n *\n * @param value the value to clone.\n *\n * @return the cloned value.\n */\napi.clone = function(value) {\n  if(value && typeof value === 'object') {\n    let rval;\n    if(types.isArray(value)) {\n      rval = [];\n      for(let i = 0; i < value.length; ++i) {\n        rval[i] = api.clone(value[i]);\n      }\n    } else if(value instanceof Map) {\n      rval = new Map();\n      for(const [k, v] of value) {\n        rval.set(k, api.clone(v));\n      }\n    } else if(value instanceof Set) {\n      rval = new Set();\n      for(const v of value) {\n        rval.add(api.clone(v));\n      }\n    } else if(types.isObject(value)) {\n      rval = {};\n      for(const key in value) {\n        rval[key] = api.clone(value[key]);\n      }\n    } else {\n      rval = value.toString();\n    }\n    return rval;\n  }\n  return value;\n};\n\n/**\n * Ensure a value is an array. If the value is an array, it is returned.\n * Otherwise, it is wrapped in an array.\n *\n * @param value the value to return as an array.\n *\n * @return the value as an array.\n */\napi.asArray = function(value) {\n  return Array.isArray(value) ? value : [value];\n};\n\n/**\n * Builds an HTTP headers object for making a JSON-LD request from custom\n * headers and asserts the `accept` header isn't overridden.\n *\n * @param headers an object of headers with keys as header names and values\n *          as header values.\n *\n * @return an object of headers with a valid `accept` header.\n */\napi.buildHeaders = (headers = {}) => {\n  const hasAccept = Object.keys(headers).some(\n    h => h.toLowerCase() === 'accept');\n\n  if(hasAccept) {\n    throw new RangeError(\n      'Accept header may not be specified; only \"' +\n      DEFAULTS.headers.accept + '\" is supported.');\n  }\n\n  return Object.assign({Accept: DEFAULTS.headers.accept}, headers);\n};\n\n/**\n * Parses a link header. The results will be key'd by the value of \"rel\".\n *\n * Link: <http://json-ld.org/contexts/person.jsonld>;\n * rel=\"http://www.w3.org/ns/json-ld#context\"; type=\"application/ld+json\"\n *\n * Parses as: {\n *   'http://www.w3.org/ns/json-ld#context': {\n *     target: http://json-ld.org/contexts/person.jsonld,\n *     type: 'application/ld+json'\n *   }\n * }\n *\n * If there is more than one \"rel\" with the same IRI, then entries in the\n * resulting map for that \"rel\" will be arrays.\n *\n * @param header the link header to parse.\n */\napi.parseLinkHeader = header => {\n  const rval = {};\n  // split on unbracketed/unquoted commas\n  const entries = header.match(REGEX_LINK_HEADERS);\n  for(let i = 0; i < entries.length; ++i) {\n    let match = entries[i].match(REGEX_LINK_HEADER);\n    if(!match) {\n      continue;\n    }\n    const result = {target: match[1]};\n    const params = match[2];\n    while((match = REGEX_LINK_HEADER_PARAMS.exec(params))) {\n      result[match[1]] = (match[2] === undefined) ? match[3] : match[2];\n    }\n    const rel = result['rel'] || '';\n    if(Array.isArray(rval[rel])) {\n      rval[rel].push(result);\n    } else if(rval.hasOwnProperty(rel)) {\n      rval[rel] = [rval[rel], result];\n    } else {\n      rval[rel] = result;\n    }\n  }\n  return rval;\n};\n\n/**\n * Throws an exception if the given value is not a valid @type value.\n *\n * @param v the value to check.\n */\napi.validateTypeValue = v => {\n  // can be a string or an empty object\n  if(types.isString(v) || types.isEmptyObject(v)) {\n    return;\n  }\n\n  // must be an array\n  let isValid = false;\n  if(types.isArray(v)) {\n    // must contain only strings\n    isValid = true;\n    for(let i = 0; i < v.length; ++i) {\n      if(!(types.isString(v[i]))) {\n        isValid = false;\n        break;\n      }\n    }\n  }\n\n  if(!isValid) {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; \"@type\" value must a string, an array of ' +\n      'strings, or an empty object.', 'jsonld.SyntaxError',\n      {code: 'invalid type value', value: v});\n  }\n};\n\n/**\n * Returns true if the given subject has the given property.\n *\n * @param subject the subject to check.\n * @param property the property to look for.\n *\n * @return true if the subject has the given property, false if not.\n */\napi.hasProperty = (subject, property) => {\n  if(subject.hasOwnProperty(property)) {\n    const value = subject[property];\n    return (!types.isArray(value) || value.length > 0);\n  }\n  return false;\n};\n\n/**\n * Determines if the given value is a property of the given subject.\n *\n * @param subject the subject to check.\n * @param property the property to check.\n * @param value the value to check.\n *\n * @return true if the value exists, false if not.\n */\napi.hasValue = (subject, property, value) => {\n  if(api.hasProperty(subject, property)) {\n    let val = subject[property];\n    const isList = graphTypes.isList(val);\n    if(types.isArray(val) || isList) {\n      if(isList) {\n        val = val['@list'];\n      }\n      for(let i = 0; i < val.length; ++i) {\n        if(api.compareValues(value, val[i])) {\n          return true;\n        }\n      }\n    } else if(!types.isArray(value)) {\n      // avoid matching the set of values with an array value parameter\n      return api.compareValues(value, val);\n    }\n  }\n  return false;\n};\n\n/**\n * Adds a value to a subject. If the value is an array, all values in the\n * array will be added.\n *\n * @param subject the subject to add the value to.\n * @param property the property that relates the value to the subject.\n * @param value the value to add.\n * @param [options] the options to use:\n *        [propertyIsArray] true if the property is always an array, false\n *          if not (default: false).\n *        [valueIsArray] true if the value to be added should be preserved as\n *          an array (lists) (default: false).\n *        [allowDuplicate] true to allow duplicates, false not to (uses a\n *          simple shallow comparison of subject ID or value) (default: true).\n */\napi.addValue = (subject, property, value, options) => {\n  options = options || {};\n  if(!('propertyIsArray' in options)) {\n    options.propertyIsArray = false;\n  }\n  if(!('valueIsArray' in options)) {\n    options.valueIsArray = false;\n  }\n  if(!('allowDuplicate' in options)) {\n    options.allowDuplicate = true;\n  }\n\n  if(options.valueIsArray) {\n    subject[property] = value;\n  } else if(types.isArray(value)) {\n    if(value.length === 0 && options.propertyIsArray &&\n      !subject.hasOwnProperty(property)) {\n      subject[property] = [];\n    }\n    for(let i = 0; i < value.length; ++i) {\n      api.addValue(subject, property, value[i], options);\n    }\n  } else if(subject.hasOwnProperty(property)) {\n    // check if subject already has value if duplicates not allowed\n    const hasValue = (!options.allowDuplicate &&\n      api.hasValue(subject, property, value));\n\n    // make property an array if value not present or always an array\n    if(!types.isArray(subject[property]) &&\n      (!hasValue || options.propertyIsArray)) {\n      subject[property] = [subject[property]];\n    }\n\n    // add new value\n    if(!hasValue) {\n      subject[property].push(value);\n    }\n  } else {\n    // add new value as set or single value\n    subject[property] = options.propertyIsArray ? [value] : value;\n  }\n};\n\n/**\n * Gets all of the values for a subject's property as an array.\n *\n * @param subject the subject.\n * @param property the property.\n *\n * @return all of the values for a subject's property as an array.\n */\napi.getValues = (subject, property) => [].concat(subject[property] || []);\n\n/**\n * Removes a property from a subject.\n *\n * @param subject the subject.\n * @param property the property.\n */\napi.removeProperty = (subject, property) => {\n  delete subject[property];\n};\n\n/**\n * Removes a value from a subject.\n *\n * @param subject the subject.\n * @param property the property that relates the value to the subject.\n * @param value the value to remove.\n * @param [options] the options to use:\n *          [propertyIsArray] true if the property is always an array, false\n *            if not (default: false).\n */\napi.removeValue = (subject, property, value, options) => {\n  options = options || {};\n  if(!('propertyIsArray' in options)) {\n    options.propertyIsArray = false;\n  }\n\n  // filter out value\n  const values = api.getValues(subject, property).filter(\n    e => !api.compareValues(e, value));\n\n  if(values.length === 0) {\n    api.removeProperty(subject, property);\n  } else if(values.length === 1 && !options.propertyIsArray) {\n    subject[property] = values[0];\n  } else {\n    subject[property] = values;\n  }\n};\n\n/**\n * Relabels all blank nodes in the given JSON-LD input.\n *\n * @param input the JSON-LD input.\n * @param [options] the options to use:\n *          [issuer] an IdentifierIssuer to use to label blank nodes.\n */\napi.relabelBlankNodes = (input, options) => {\n  options = options || {};\n  const issuer = options.issuer || new IdentifierIssuer('_:b');\n  return _labelBlankNodes(issuer, input);\n};\n\n/**\n * Compares two JSON-LD values for equality. Two JSON-LD values will be\n * considered equal if:\n *\n * 1. They are both primitives of the same type and value.\n * 2. They are both @values with the same @value, @type, @language,\n *   and @index, OR\n * 3. They both have @ids they are the same.\n *\n * @param v1 the first value.\n * @param v2 the second value.\n *\n * @return true if v1 and v2 are considered equal, false if not.\n */\napi.compareValues = (v1, v2) => {\n  // 1. equal primitives\n  if(v1 === v2) {\n    return true;\n  }\n\n  // 2. equal @values\n  if(graphTypes.isValue(v1) && graphTypes.isValue(v2) &&\n    v1['@value'] === v2['@value'] &&\n    v1['@type'] === v2['@type'] &&\n    v1['@language'] === v2['@language'] &&\n    v1['@index'] === v2['@index']) {\n    return true;\n  }\n\n  // 3. equal @ids\n  if(types.isObject(v1) &&\n    ('@id' in v1) &&\n    types.isObject(v2) &&\n    ('@id' in v2)) {\n    return v1['@id'] === v2['@id'];\n  }\n\n  return false;\n};\n\n/**\n * Compares two strings first based on length and then lexicographically.\n *\n * @param a the first string.\n * @param b the second string.\n *\n * @return -1 if a < b, 1 if a > b, 0 if a === b.\n */\napi.compareShortestLeast = (a, b) => {\n  if(a.length < b.length) {\n    return -1;\n  }\n  if(b.length < a.length) {\n    return 1;\n  }\n  if(a === b) {\n    return 0;\n  }\n  return (a < b) ? -1 : 1;\n};\n\napi.normalizeDocumentLoader = fn => {\n  if(fn.length < 2) {\n    return api.callbackify(fn);\n  }\n\n  return async function(url) {\n    const callback = arguments[1];\n    return new Promise((resolve, reject) => {\n      try {\n        fn(url, (err, remoteDoc) => {\n          if(typeof callback === 'function') {\n            return _invokeCallback(callback, err, remoteDoc);\n          } else if(err) {\n            reject(err);\n          } else {\n            resolve(remoteDoc);\n          }\n        });\n      } catch(e) {\n        if(typeof callback === 'function') {\n          return _invokeCallback(callback, e);\n        }\n        reject(e);\n      }\n    });\n  };\n};\n\napi.callbackify = fn => {\n  return async function(...args) {\n    const callback = args[args.length - 1];\n    if(typeof callback === 'function') {\n      args.pop();\n    }\n\n    let result;\n    try {\n      result = await fn.apply(null, args);\n    } catch(e) {\n      if(typeof callback === 'function') {\n        return _invokeCallback(callback, e);\n      }\n      throw e;\n    }\n\n    if(typeof callback === 'function') {\n      return _invokeCallback(callback, null, result);\n    }\n\n    return result;\n  };\n};\n\nfunction _invokeCallback(callback, err, result) {\n  // execute on next tick to prevent \"unhandled rejected promise\"\n  // and simulate what would have happened in a promiseless API\n  api.nextTick(() => callback(err, result));\n}\n\n/**\n * Labels the blank nodes in the given value using the given IdentifierIssuer.\n *\n * @param issuer the IdentifierIssuer to use.\n * @param element the element with blank nodes to rename.\n *\n * @return the element.\n */\nfunction _labelBlankNodes(issuer, element) {\n  if(types.isArray(element)) {\n    for(let i = 0; i < element.length; ++i) {\n      element[i] = _labelBlankNodes(issuer, element[i]);\n    }\n  } else if(graphTypes.isList(element)) {\n    element['@list'] = _labelBlankNodes(issuer, element['@list']);\n  } else if(types.isObject(element)) {\n    // relabel blank node\n    if(graphTypes.isBlankNode(element)) {\n      element['@id'] = issuer.getId(element['@id']);\n    }\n\n    // recursively apply to all keys\n    const keys = Object.keys(element).sort();\n    for(let ki = 0; ki < keys.length; ++ki) {\n      const key = keys[ki];\n      if(key !== '@id') {\n        element[key] = _labelBlankNodes(issuer, element[key]);\n      }\n    }\n  }\n\n  return element;\n}\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst RoutableTileRegistry_1 = __importDefault(require(\"../../entities/tiles/RoutableTileRegistry\"));\nconst RoutableTileSet_1 = require(\"../../entities/tiles/RoutableTileSet\");\nconst TileCoordinate_1 = __importDefault(require(\"../../entities/tiles/TileCoordinate\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../../pathfinding/PathfinderProvider\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Tiles_1 = require(\"../../util/Tiles\");\nlet RoutableTileProviderDefault = class RoutableTileProviderDefault {\n    constructor(pathfinderProvider, fetcher) {\n        this.tiles = {};\n        this.pathfinderProvider = pathfinderProvider;\n        this.fetcher = fetcher;\n        this.registry = RoutableTileRegistry_1.default.getInstance();\n    }\n    async wait() {\n        await Promise.all(Object.values(this.tiles));\n    }\n    getIdForLocation(zoom, location) {\n        const y = Tiles_1.lat_to_tile(location.latitude, zoom);\n        const x = Tiles_1.long_to_tile(location.longitude, zoom);\n        const coordinate = new TileCoordinate_1.default(zoom, x, y);\n        return this.getIdForTileCoords(coordinate);\n    }\n    getIdForTileCoords(coordinate) {\n        return `https://tiles.openplanner.team/planet/${coordinate.zoom}/${coordinate.x}/${coordinate.y}`;\n    }\n    getByLocation(zoom, location) {\n        const y = this.lat2tile(location.latitude, zoom);\n        const x = this.long2tile(location.longitude, zoom);\n        const coordinate = new TileCoordinate_1.default(zoom, x, y);\n        return this.getByTileCoords(coordinate);\n    }\n    async getByTileCoords(coordinate) {\n        const url = this.getIdForTileCoords(coordinate);\n        const tile = await this.getByUrl(url);\n        tile.coordinate = coordinate; // todo, get these from server response\n        return tile;\n    }\n    async getmultipleByLocation(zoom, locations) {\n        const tiles = await Promise.all(locations.map((location) => {\n            return this.getByLocation(zoom, location);\n        }));\n        return new RoutableTileSet_1.RoutableTileSet(tiles);\n    }\n    async getMultipleByTileCoords(coordinates) {\n        const tiles = await Promise.all(coordinates.map((coordinate) => {\n            return this.getByTileCoords(coordinate);\n        }));\n        return new RoutableTileSet_1.RoutableTileSet(tiles);\n    }\n    async getByUrl(url) {\n        if (!this.tiles[url]) {\n            this.tiles[url] = this.fetcher.get(url);\n            const tile = await this.tiles[url];\n            this.pathfinderProvider.registerEdges(tile.getWays());\n        }\n        return await this.tiles[url];\n    }\n    long2tile(lon, zoom) {\n        return (Math.floor((lon + 180) / 360 * Math.pow(2, zoom)));\n    }\n    lat2tile(lat, zoom) {\n        return (Math.floor((1 - Math.log(Math.tan(lat * Math.PI / 180) + 1\n            / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom)));\n    }\n};\nRoutableTileProviderDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.PathfinderProvider)),\n    __param(1, inversify_1.inject(types_1.default.RoutableTileFetcher)),\n    __metadata(\"design:paramtypes\", [PathfinderProvider_1.default, Object])\n], RoutableTileProviderDefault);\nexports.default = RoutableTileProviderDefault;\n//# sourceMappingURL=RoutableTileProviderDefault.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst haversine_1 = __importDefault(require(\"haversine\"));\n/**\n * Utility class with geographic functions\n */\nclass Geo {\n    /**\n     * Calculate the distance between two [[ILocation]] instances using the haversine formula\n     * @returns distance is meters ([[DistanceM]])\n     */\n    static getDistanceBetweenLocations(start, stop) {\n        const { longitude: depLongitude, latitude: depLatitude } = start;\n        const { longitude: arrLongitude, latitude: arrLatitude } = stop;\n        if (depLongitude === undefined || depLatitude === undefined ||\n            arrLongitude === undefined || arrLatitude === undefined) {\n            return Number.POSITIVE_INFINITY;\n        }\n        return haversine_1.default({\n            latitude: depLatitude,\n            longitude: depLongitude,\n        }, {\n            latitude: arrLatitude,\n            longitude: arrLongitude,\n        }, {\n            unit: \"meter\",\n        });\n    }\n    /**\n     * Calculate tge distance between two [[IStop]] instances using the haversine formula\n     * @returns distance is meters ([[DistanceM]])\n     */\n    static getDistanceBetweenStops(start, stop) {\n        return this.getDistanceBetweenLocations(start, stop);\n    }\n    /**\n     * Get the geo id of an [[ILocation]]\n     * @param location\n     * @returns geo id string\n     */\n    static getId(location) {\n        if (\"id\" in location) {\n            return location.id;\n        }\n        return `geo:${location.latitude},${location.longitude}`;\n    }\n}\nexports.default = Geo;\n//# sourceMappingURL=Geo.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Signifies different phases at which reachable stops can be searched for\n * Classes that use [[IReachableStopsFinder]] implementations can use these to tag different dependencies\n * This is especially useful when the class could potentially use different implementations of\n * the same [[IReachableStopsFinder]] interface at each phase\n */\nvar ReachableStopsSearchPhase;\n(function (ReachableStopsSearchPhase) {\n    ReachableStopsSearchPhase[\"Initial\"] = \"reachableStopsSearchInitial\";\n    ReachableStopsSearchPhase[\"Transfer\"] = \"reachableStopsSearchTransfer\";\n    ReachableStopsSearchPhase[\"Final\"] = \"reachableStopsSearchFinal\";\n})(ReachableStopsSearchPhase || (ReachableStopsSearchPhase = {}));\nexports.default = ReachableStopsSearchPhase;\n//# sourceMappingURL=ReachableStopsSearchPhase.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar TravelMode;\n(function (TravelMode) {\n    TravelMode[\"Train\"] = \"train\";\n    TravelMode[\"Bus\"] = \"bus\";\n    TravelMode[\"Walking\"] = \"walking\";\n    TravelMode[\"Profile\"] = \"profile\";\n})(TravelMode || (TravelMode = {}));\nexports.default = TravelMode;\n//# sourceMappingURL=TravelMode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar Metadata = (function () {\n    function Metadata(key, value) {\n        this.key = key;\n        this.value = value;\n    }\n    Metadata.prototype.toString = function () {\n        if (this.key === METADATA_KEY.NAMED_TAG) {\n            return \"named: \" + this.value.toString() + \" \";\n        }\n        else {\n            return \"tagged: { key:\" + this.key.toString() + \", value: \" + this.value + \" }\";\n        }\n    };\n    return Metadata;\n}());\nexports.Metadata = Metadata;\n","function _getPrototypeOf(o) {\n  module.exports = _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}\n\nmodule.exports = _getPrototypeOf;","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Returns true if the given value is an Array.\n *\n * @param v the value to check.\n *\n * @return true if the value is an Array, false if not.\n */\napi.isArray = Array.isArray;\n\n/**\n * Returns true if the given value is a Boolean.\n *\n * @param v the value to check.\n *\n * @return true if the value is a Boolean, false if not.\n */\napi.isBoolean = v => (typeof v === 'boolean' ||\n  Object.prototype.toString.call(v) === '[object Boolean]');\n\n/**\n * Returns true if the given value is a double.\n *\n * @param v the value to check.\n *\n * @return true if the value is a double, false if not.\n */\napi.isDouble = v => api.isNumber(v) && String(v).indexOf('.') !== -1;\n\n/**\n * Returns true if the given value is an empty Object.\n *\n * @param v the value to check.\n *\n * @return true if the value is an empty Object, false if not.\n */\napi.isEmptyObject = v => api.isObject(v) && Object.keys(v).length === 0;\n\n/**\n * Returns true if the given value is a Number.\n *\n * @param v the value to check.\n *\n * @return true if the value is a Number, false if not.\n */\napi.isNumber = v => (typeof v === 'number' ||\n  Object.prototype.toString.call(v) === '[object Number]');\n\n/**\n * Returns true if the given value is numeric.\n *\n * @param v the value to check.\n *\n * @return true if the value is numeric, false if not.\n */\napi.isNumeric = v => !isNaN(parseFloat(v)) && isFinite(v);\n\n/**\n * Returns true if the given value is an Object.\n *\n * @param v the value to check.\n *\n * @return true if the value is an Object, false if not.\n */\napi.isObject = v => Object.prototype.toString.call(v) === '[object Object]';\n\n/**\n * Returns true if the given value is a String.\n *\n * @param v the value to check.\n *\n * @return true if the value is a String, false if not.\n */\napi.isString = v => (typeof v === 'string' ||\n  Object.prototype.toString.call(v) === '[object String]');\n\n/**\n * Returns true if the given value is undefined.\n *\n * @param v the value to check.\n *\n * @return true if the value is undefined, false if not.\n */\napi.isUndefined = v => typeof v === 'undefined';\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass URI {\n    static inNS(ns, id) {\n        // this probably misses a lot of special cases\n        // but it'll do for now\n        const lastChar = ns[ns.length - 1];\n        if (lastChar === \"/\") {\n            return `${ns}${id}`;\n        }\n        else if (lastChar === \"#\") {\n            return `${ns}${id}`;\n        }\n        else {\n            return `${ns}#${id}`;\n        }\n    }\n    static fakeExpand(ns, id) {\n        // discards the prefix and places it the specified NS\n        return this.inNS(ns, id.substring(4));\n    }\n}\nexports.default = URI;\n//# sourceMappingURL=uri.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nlet ProfileProviderDefault = class ProfileProviderDefault {\n    constructor(fetcher) {\n        this.profiles = {};\n        this.fetcher = fetcher;\n        this.developmentProfile = undefined;\n        this.developmentProfileCounter = 0;\n    }\n    async parseDevelopmentProfile(blob) {\n        this.developmentProfileCounter += 1;\n        const newProfile = await this.fetcher.parseProfileBlob(blob, \"\" + this.developmentProfileCounter);\n        if (this.developmentProfile) {\n            // delete this.profiles[this.developmentProfile.getID()];\n        }\n        this.developmentProfile = newProfile;\n        this.profiles[this.developmentProfile.getID()] = Promise.resolve(newProfile);\n        return newProfile.getID();\n    }\n    addProfile(profile) {\n        this.profiles[profile.getID()] = Promise.resolve(profile);\n    }\n    getProfile(profileId) {\n        if (this.profiles[profileId] === undefined) {\n            this.profiles[profileId] = this.fetcher.get(profileId);\n        }\n        return this.profiles[profileId];\n    }\n    getProfiles() {\n        return Promise.all(Object.values(this.profiles));\n    }\n};\nProfileProviderDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.ProfileFetcher)),\n    __metadata(\"design:paramtypes\", [Object])\n], ProfileProviderDefault);\nexports.default = ProfileProviderDefault;\n//# sourceMappingURL=ProfileProviderDefault.js.map","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nmodule.exports = class JsonLdError extends Error {\n  /**\n   * Creates a JSON-LD Error.\n   *\n   * @param msg the error message.\n   * @param type the error type.\n   * @param details the error details.\n   */\n  constructor(\n    message = 'An unspecified JSON-LD error occurred.',\n    name = 'jsonld.Error',\n    details = {}) {\n    super(message);\n    this.name = name;\n    this.message = message;\n    this.details = details;\n  }\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.XMLS = \"http://www.w3.org/2001/XMLSchema\";\nexports.HYDRA = \"http://www.w3.org/ns/hydra/core\";\nexports.OSM = \"https://w3id.org/openstreetmap/terms\";\nexports.GEO = \"http://www.w3.org/2003/01/geo/wgs84_pos\";\nexports.GEOSPARQL = \"http://www.opengis.net/ont/geosparql#\";\nexports.RDF = \"http://www.w3.org/1999/02/22-rdf-syntax-ns\";\nexports.RDFS = \"http://www.w3.org/2000/01/rdf-schema\";\nexports.ROUTE = \"https://w3id.org/routabletiles/terms#\";\nexports.PLANNER = \"https://planner.js.org/terms#\";\nexports.PROFILE = \"https://w3id.org/openplannerteam/profile#\";\nexports.TREE = \"https://w3id.org/tree#\";\nexports.LC = \"http://semweb.mmlab.be/ns/linkedconnections#\";\nexports.DCAT = \"http://www.w3.org/ns/dcat#\";\nexports.DCT = \"http://purl.org/dc/terms/\";\nexports.GTFS = \"http://vocab.gtfs.org/terms#\";\n//# sourceMappingURL=constants.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst ldfetch_1 = __importDefault(require(\"ldfetch\"));\nconst EventBus_1 = __importDefault(require(\"../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../events/EventType\"));\n/**\n * Proxies an ldfetch instance to transform its events\n */\nlet LDFetch = class LDFetch {\n    constructor() {\n        this.ldFetchBase = new ldfetch_1.default({ headers: { Accept: \"application/ld+json\" } });\n        this.eventBus = EventBus_1.default.getInstance();\n        this.setupEvents();\n    }\n    get(url) {\n        return this.ldFetchBase.get(url);\n    }\n    setupEvents() {\n        this.httpStartTimes = {};\n        this.ldFetchBase.on(\"request\", (url) => this.httpStartTimes[url] = new Date());\n        this.ldFetchBase.on(\"redirect\", (obj) => this.httpStartTimes[obj.to] = this.httpStartTimes[obj.from]);\n        this.ldFetchBase.on(\"response\", (url) => {\n            const duration = (new Date()).getTime() - this.httpStartTimes[url].getTime();\n            this.eventBus.emit(EventType_1.default.ResourceFetch, {\n                url,\n                duration,\n            });\n        });\n    }\n};\nLDFetch = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [])\n], LDFetch);\nexports.default = LDFetch;\n//# sourceMappingURL=LDFetch.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BindingScopeEnum = {\n    Request: \"Request\",\n    Singleton: \"Singleton\",\n    Transient: \"Transient\"\n};\nexports.BindingScopeEnum = BindingScopeEnum;\nvar BindingTypeEnum = {\n    ConstantValue: \"ConstantValue\",\n    Constructor: \"Constructor\",\n    DynamicValue: \"DynamicValue\",\n    Factory: \"Factory\",\n    Function: \"Function\",\n    Instance: \"Instance\",\n    Invalid: \"Invalid\",\n    Provider: \"Provider\"\n};\nexports.BindingTypeEnum = BindingTypeEnum;\nvar TargetTypeEnum = {\n    ClassProperty: \"ClassProperty\",\n    ConstructorArgument: \"ConstructorArgument\",\n    Variable: \"Variable\"\n};\nexports.TargetTypeEnum = TargetTypeEnum;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar RoutableTileRegistry_1;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nlet RoutableTileRegistry = RoutableTileRegistry_1 = class RoutableTileRegistry {\n    constructor() {\n        this.nodes = {};\n        this.ways = {};\n    }\n    static getInstance() {\n        if (!RoutableTileRegistry_1.instance) {\n            RoutableTileRegistry_1.instance = new RoutableTileRegistry_1();\n        }\n        return RoutableTileRegistry_1.instance;\n    }\n    registerNode(node) {\n        this.nodes[node.id] = node;\n    }\n    registerWay(way) {\n        if (!this.ways[way.id]) {\n            this.ways[way.id] = way;\n        }\n        else {\n            // creates a new Way instance\n            // avoids overwriting data from the individual tile definitions\n            // otherwise ways might refer to nodes that aren't in the tile\n            this.ways[way.id] = way.mergeDefinitions(this.ways[way.id]);\n        }\n    }\n    getNode(id) {\n        return this.nodes[id];\n    }\n    getWay(id) {\n        return this.ways[id];\n    }\n    getNodes() {\n        return Object.values(this.nodes);\n    }\n    getWays() {\n        return Object.values(this.ways);\n    }\n};\nRoutableTileRegistry = RoutableTileRegistry_1 = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [])\n], RoutableTileRegistry);\nexports.default = RoutableTileRegistry;\n//# sourceMappingURL=RoutableTileRegistry.js.map","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass TileCoordinate {\n    constructor(zoom, x, y) {\n        this.zoom = zoom;\n        this.x = x;\n        this.y = y;\n    }\n    contains(other) {\n        const n = Math.pow(2, other.zoom - this.zoom);\n        const otherX = Math.floor(other.x / n);\n        const otherY = Math.floor(other.y / n);\n        if (otherX === this.x && otherY === this.y) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n}\nexports.default = TileCoordinate;\n//# sourceMappingURL=TileCoordinate.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\n/**\n * The Context serves as event pass through and holder of the inversify container object.\n *\n * It proxies an internal EventEmitter (instead of extending EventEmitter) because\n * decorate(injectable(), EventEmitter) causes errors when running tests in Jest\n */\nlet Context = class Context {\n    setContainer(container) {\n        this.container = container;\n    }\n    getContainer() {\n        return this.container;\n    }\n};\nContext = __decorate([\n    inversify_1.injectable()\n], Context);\nexports.default = Context;\n//# sourceMappingURL=Context.js.map","/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <http://feross.org>\n * @license  MIT\n */\n/* eslint-disable no-proto */\n\n'use strict'\n\nvar base64 = require('base64-js')\nvar ieee754 = require('ieee754')\nvar isArray = require('isarray')\n\nexports.Buffer = Buffer\nexports.SlowBuffer = SlowBuffer\nexports.INSPECT_MAX_BYTES = 50\n\n/**\n * If `Buffer.TYPED_ARRAY_SUPPORT`:\n *   === true    Use Uint8Array implementation (fastest)\n *   === false   Use Object implementation (most compatible, even IE6)\n *\n * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,\n * Opera 11.6+, iOS 4.2+.\n *\n * Due to various browser bugs, sometimes the Object implementation will be used even\n * when the browser supports typed arrays.\n *\n * Note:\n *\n *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,\n *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.\n *\n *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.\n *\n *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of\n *     incorrect length in some situations.\n\n * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they\n * get the Object implementation, which is slower but behaves correctly.\n */\nBuffer.TYPED_ARRAY_SUPPORT = global.TYPED_ARRAY_SUPPORT !== undefined\n  ? global.TYPED_ARRAY_SUPPORT\n  : typedArraySupport()\n\n/*\n * Export kMaxLength after typed array support is determined.\n */\nexports.kMaxLength = kMaxLength()\n\nfunction typedArraySupport () {\n  try {\n    var arr = new Uint8Array(1)\n    arr.__proto__ = {__proto__: Uint8Array.prototype, foo: function () { return 42 }}\n    return arr.foo() === 42 && // typed array instances can be augmented\n        typeof arr.subarray === 'function' && // chrome 9-10 lack `subarray`\n        arr.subarray(1, 1).byteLength === 0 // ie10 has broken `subarray`\n  } catch (e) {\n    return false\n  }\n}\n\nfunction kMaxLength () {\n  return Buffer.TYPED_ARRAY_SUPPORT\n    ? 0x7fffffff\n    : 0x3fffffff\n}\n\nfunction createBuffer (that, length) {\n  if (kMaxLength() < length) {\n    throw new RangeError('Invalid typed array length')\n  }\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = new Uint8Array(length)\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    if (that === null) {\n      that = new Buffer(length)\n    }\n    that.length = length\n  }\n\n  return that\n}\n\n/**\n * The Buffer constructor returns instances of `Uint8Array` that have their\n * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of\n * `Uint8Array`, so the returned instances will have all the node `Buffer` methods\n * and the `Uint8Array` methods. Square bracket notation works as expected -- it\n * returns a single octet.\n *\n * The `Uint8Array` prototype remains unmodified.\n */\n\nfunction Buffer (arg, encodingOrOffset, length) {\n  if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {\n    return new Buffer(arg, encodingOrOffset, length)\n  }\n\n  // Common case.\n  if (typeof arg === 'number') {\n    if (typeof encodingOrOffset === 'string') {\n      throw new Error(\n        'If encoding is specified then the first argument must be a string'\n      )\n    }\n    return allocUnsafe(this, arg)\n  }\n  return from(this, arg, encodingOrOffset, length)\n}\n\nBuffer.poolSize = 8192 // not used by this implementation\n\n// TODO: Legacy, not needed anymore. Remove in next major version.\nBuffer._augment = function (arr) {\n  arr.__proto__ = Buffer.prototype\n  return arr\n}\n\nfunction from (that, value, encodingOrOffset, length) {\n  if (typeof value === 'number') {\n    throw new TypeError('\"value\" argument must not be a number')\n  }\n\n  if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {\n    return fromArrayBuffer(that, value, encodingOrOffset, length)\n  }\n\n  if (typeof value === 'string') {\n    return fromString(that, value, encodingOrOffset)\n  }\n\n  return fromObject(that, value)\n}\n\n/**\n * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError\n * if value is a number.\n * Buffer.from(str[, encoding])\n * Buffer.from(array)\n * Buffer.from(buffer)\n * Buffer.from(arrayBuffer[, byteOffset[, length]])\n **/\nBuffer.from = function (value, encodingOrOffset, length) {\n  return from(null, value, encodingOrOffset, length)\n}\n\nif (Buffer.TYPED_ARRAY_SUPPORT) {\n  Buffer.prototype.__proto__ = Uint8Array.prototype\n  Buffer.__proto__ = Uint8Array\n  if (typeof Symbol !== 'undefined' && Symbol.species &&\n      Buffer[Symbol.species] === Buffer) {\n    // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97\n    Object.defineProperty(Buffer, Symbol.species, {\n      value: null,\n      configurable: true\n    })\n  }\n}\n\nfunction assertSize (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('\"size\" argument must be a number')\n  } else if (size < 0) {\n    throw new RangeError('\"size\" argument must not be negative')\n  }\n}\n\nfunction alloc (that, size, fill, encoding) {\n  assertSize(size)\n  if (size <= 0) {\n    return createBuffer(that, size)\n  }\n  if (fill !== undefined) {\n    // Only pay attention to encoding if it's a string. This\n    // prevents accidentally sending in a number that would\n    // be interpretted as a start offset.\n    return typeof encoding === 'string'\n      ? createBuffer(that, size).fill(fill, encoding)\n      : createBuffer(that, size).fill(fill)\n  }\n  return createBuffer(that, size)\n}\n\n/**\n * Creates a new filled Buffer instance.\n * alloc(size[, fill[, encoding]])\n **/\nBuffer.alloc = function (size, fill, encoding) {\n  return alloc(null, size, fill, encoding)\n}\n\nfunction allocUnsafe (that, size) {\n  assertSize(size)\n  that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) {\n    for (var i = 0; i < size; ++i) {\n      that[i] = 0\n    }\n  }\n  return that\n}\n\n/**\n * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.\n * */\nBuffer.allocUnsafe = function (size) {\n  return allocUnsafe(null, size)\n}\n/**\n * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.\n */\nBuffer.allocUnsafeSlow = function (size) {\n  return allocUnsafe(null, size)\n}\n\nfunction fromString (that, string, encoding) {\n  if (typeof encoding !== 'string' || encoding === '') {\n    encoding = 'utf8'\n  }\n\n  if (!Buffer.isEncoding(encoding)) {\n    throw new TypeError('\"encoding\" must be a valid string encoding')\n  }\n\n  var length = byteLength(string, encoding) | 0\n  that = createBuffer(that, length)\n\n  var actual = that.write(string, encoding)\n\n  if (actual !== length) {\n    // Writing a hex string, for example, that contains invalid characters will\n    // cause everything after the first invalid character to be ignored. (e.g.\n    // 'abxxcd' will be treated as 'ab')\n    that = that.slice(0, actual)\n  }\n\n  return that\n}\n\nfunction fromArrayLike (that, array) {\n  var length = array.length < 0 ? 0 : checked(array.length) | 0\n  that = createBuffer(that, length)\n  for (var i = 0; i < length; i += 1) {\n    that[i] = array[i] & 255\n  }\n  return that\n}\n\nfunction fromArrayBuffer (that, array, byteOffset, length) {\n  array.byteLength // this throws if `array` is not a valid ArrayBuffer\n\n  if (byteOffset < 0 || array.byteLength < byteOffset) {\n    throw new RangeError('\\'offset\\' is out of bounds')\n  }\n\n  if (array.byteLength < byteOffset + (length || 0)) {\n    throw new RangeError('\\'length\\' is out of bounds')\n  }\n\n  if (byteOffset === undefined && length === undefined) {\n    array = new Uint8Array(array)\n  } else if (length === undefined) {\n    array = new Uint8Array(array, byteOffset)\n  } else {\n    array = new Uint8Array(array, byteOffset, length)\n  }\n\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    // Return an augmented `Uint8Array` instance, for best performance\n    that = array\n    that.__proto__ = Buffer.prototype\n  } else {\n    // Fallback: Return an object instance of the Buffer class\n    that = fromArrayLike(that, array)\n  }\n  return that\n}\n\nfunction fromObject (that, obj) {\n  if (Buffer.isBuffer(obj)) {\n    var len = checked(obj.length) | 0\n    that = createBuffer(that, len)\n\n    if (that.length === 0) {\n      return that\n    }\n\n    obj.copy(that, 0, 0, len)\n    return that\n  }\n\n  if (obj) {\n    if ((typeof ArrayBuffer !== 'undefined' &&\n        obj.buffer instanceof ArrayBuffer) || 'length' in obj) {\n      if (typeof obj.length !== 'number' || isnan(obj.length)) {\n        return createBuffer(that, 0)\n      }\n      return fromArrayLike(that, obj)\n    }\n\n    if (obj.type === 'Buffer' && isArray(obj.data)) {\n      return fromArrayLike(that, obj.data)\n    }\n  }\n\n  throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')\n}\n\nfunction checked (length) {\n  // Note: cannot use `length < kMaxLength()` here because that fails when\n  // length is NaN (which is otherwise coerced to zero.)\n  if (length >= kMaxLength()) {\n    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +\n                         'size: 0x' + kMaxLength().toString(16) + ' bytes')\n  }\n  return length | 0\n}\n\nfunction SlowBuffer (length) {\n  if (+length != length) { // eslint-disable-line eqeqeq\n    length = 0\n  }\n  return Buffer.alloc(+length)\n}\n\nBuffer.isBuffer = function isBuffer (b) {\n  return !!(b != null && b._isBuffer)\n}\n\nBuffer.compare = function compare (a, b) {\n  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {\n    throw new TypeError('Arguments must be Buffers')\n  }\n\n  if (a === b) return 0\n\n  var x = a.length\n  var y = b.length\n\n  for (var i = 0, len = Math.min(x, y); i < len; ++i) {\n    if (a[i] !== b[i]) {\n      x = a[i]\n      y = b[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\nBuffer.isEncoding = function isEncoding (encoding) {\n  switch (String(encoding).toLowerCase()) {\n    case 'hex':\n    case 'utf8':\n    case 'utf-8':\n    case 'ascii':\n    case 'latin1':\n    case 'binary':\n    case 'base64':\n    case 'ucs2':\n    case 'ucs-2':\n    case 'utf16le':\n    case 'utf-16le':\n      return true\n    default:\n      return false\n  }\n}\n\nBuffer.concat = function concat (list, length) {\n  if (!isArray(list)) {\n    throw new TypeError('\"list\" argument must be an Array of Buffers')\n  }\n\n  if (list.length === 0) {\n    return Buffer.alloc(0)\n  }\n\n  var i\n  if (length === undefined) {\n    length = 0\n    for (i = 0; i < list.length; ++i) {\n      length += list[i].length\n    }\n  }\n\n  var buffer = Buffer.allocUnsafe(length)\n  var pos = 0\n  for (i = 0; i < list.length; ++i) {\n    var buf = list[i]\n    if (!Buffer.isBuffer(buf)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers')\n    }\n    buf.copy(buffer, pos)\n    pos += buf.length\n  }\n  return buffer\n}\n\nfunction byteLength (string, encoding) {\n  if (Buffer.isBuffer(string)) {\n    return string.length\n  }\n  if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&\n      (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {\n    return string.byteLength\n  }\n  if (typeof string !== 'string') {\n    string = '' + string\n  }\n\n  var len = string.length\n  if (len === 0) return 0\n\n  // Use a for loop to avoid recursion\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'ascii':\n      case 'latin1':\n      case 'binary':\n        return len\n      case 'utf8':\n      case 'utf-8':\n      case undefined:\n        return utf8ToBytes(string).length\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return len * 2\n      case 'hex':\n        return len >>> 1\n      case 'base64':\n        return base64ToBytes(string).length\n      default:\n        if (loweredCase) return utf8ToBytes(string).length // assume utf8\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\nBuffer.byteLength = byteLength\n\nfunction slowToString (encoding, start, end) {\n  var loweredCase = false\n\n  // No need to verify that \"this.length <= MAX_UINT32\" since it's a read-only\n  // property of a typed array.\n\n  // This behaves neither like String nor Uint8Array in that we set start/end\n  // to their upper/lower bounds if the value passed is out of range.\n  // undefined is handled specially as per ECMA-262 6th Edition,\n  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.\n  if (start === undefined || start < 0) {\n    start = 0\n  }\n  // Return early if start > this.length. Done here to prevent potential uint32\n  // coercion fail below.\n  if (start > this.length) {\n    return ''\n  }\n\n  if (end === undefined || end > this.length) {\n    end = this.length\n  }\n\n  if (end <= 0) {\n    return ''\n  }\n\n  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.\n  end >>>= 0\n  start >>>= 0\n\n  if (end <= start) {\n    return ''\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  while (true) {\n    switch (encoding) {\n      case 'hex':\n        return hexSlice(this, start, end)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Slice(this, start, end)\n\n      case 'ascii':\n        return asciiSlice(this, start, end)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Slice(this, start, end)\n\n      case 'base64':\n        return base64Slice(this, start, end)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return utf16leSlice(this, start, end)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = (encoding + '').toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\n// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect\n// Buffer instances.\nBuffer.prototype._isBuffer = true\n\nfunction swap (b, n, m) {\n  var i = b[n]\n  b[n] = b[m]\n  b[m] = i\n}\n\nBuffer.prototype.swap16 = function swap16 () {\n  var len = this.length\n  if (len % 2 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 16-bits')\n  }\n  for (var i = 0; i < len; i += 2) {\n    swap(this, i, i + 1)\n  }\n  return this\n}\n\nBuffer.prototype.swap32 = function swap32 () {\n  var len = this.length\n  if (len % 4 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 32-bits')\n  }\n  for (var i = 0; i < len; i += 4) {\n    swap(this, i, i + 3)\n    swap(this, i + 1, i + 2)\n  }\n  return this\n}\n\nBuffer.prototype.swap64 = function swap64 () {\n  var len = this.length\n  if (len % 8 !== 0) {\n    throw new RangeError('Buffer size must be a multiple of 64-bits')\n  }\n  for (var i = 0; i < len; i += 8) {\n    swap(this, i, i + 7)\n    swap(this, i + 1, i + 6)\n    swap(this, i + 2, i + 5)\n    swap(this, i + 3, i + 4)\n  }\n  return this\n}\n\nBuffer.prototype.toString = function toString () {\n  var length = this.length | 0\n  if (length === 0) return ''\n  if (arguments.length === 0) return utf8Slice(this, 0, length)\n  return slowToString.apply(this, arguments)\n}\n\nBuffer.prototype.equals = function equals (b) {\n  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')\n  if (this === b) return true\n  return Buffer.compare(this, b) === 0\n}\n\nBuffer.prototype.inspect = function inspect () {\n  var str = ''\n  var max = exports.INSPECT_MAX_BYTES\n  if (this.length > 0) {\n    str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')\n    if (this.length > max) str += ' ... '\n  }\n  return '<Buffer ' + str + '>'\n}\n\nBuffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {\n  if (!Buffer.isBuffer(target)) {\n    throw new TypeError('Argument must be a Buffer')\n  }\n\n  if (start === undefined) {\n    start = 0\n  }\n  if (end === undefined) {\n    end = target ? target.length : 0\n  }\n  if (thisStart === undefined) {\n    thisStart = 0\n  }\n  if (thisEnd === undefined) {\n    thisEnd = this.length\n  }\n\n  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n    throw new RangeError('out of range index')\n  }\n\n  if (thisStart >= thisEnd && start >= end) {\n    return 0\n  }\n  if (thisStart >= thisEnd) {\n    return -1\n  }\n  if (start >= end) {\n    return 1\n  }\n\n  start >>>= 0\n  end >>>= 0\n  thisStart >>>= 0\n  thisEnd >>>= 0\n\n  if (this === target) return 0\n\n  var x = thisEnd - thisStart\n  var y = end - start\n  var len = Math.min(x, y)\n\n  var thisCopy = this.slice(thisStart, thisEnd)\n  var targetCopy = target.slice(start, end)\n\n  for (var i = 0; i < len; ++i) {\n    if (thisCopy[i] !== targetCopy[i]) {\n      x = thisCopy[i]\n      y = targetCopy[i]\n      break\n    }\n  }\n\n  if (x < y) return -1\n  if (y < x) return 1\n  return 0\n}\n\n// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,\n// OR the last index of `val` in `buffer` at offset <= `byteOffset`.\n//\n// Arguments:\n// - buffer - a Buffer to search\n// - val - a string, Buffer, or number\n// - byteOffset - an index into `buffer`; will be clamped to an int32\n// - encoding - an optional encoding, relevant is val is a string\n// - dir - true for indexOf, false for lastIndexOf\nfunction bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {\n  // Empty buffer means no match\n  if (buffer.length === 0) return -1\n\n  // Normalize byteOffset\n  if (typeof byteOffset === 'string') {\n    encoding = byteOffset\n    byteOffset = 0\n  } else if (byteOffset > 0x7fffffff) {\n    byteOffset = 0x7fffffff\n  } else if (byteOffset < -0x80000000) {\n    byteOffset = -0x80000000\n  }\n  byteOffset = +byteOffset  // Coerce to Number.\n  if (isNaN(byteOffset)) {\n    // byteOffset: it it's undefined, null, NaN, \"foo\", etc, search whole buffer\n    byteOffset = dir ? 0 : (buffer.length - 1)\n  }\n\n  // Normalize byteOffset: negative offsets start from the end of the buffer\n  if (byteOffset < 0) byteOffset = buffer.length + byteOffset\n  if (byteOffset >= buffer.length) {\n    if (dir) return -1\n    else byteOffset = buffer.length - 1\n  } else if (byteOffset < 0) {\n    if (dir) byteOffset = 0\n    else return -1\n  }\n\n  // Normalize val\n  if (typeof val === 'string') {\n    val = Buffer.from(val, encoding)\n  }\n\n  // Finally, search either indexOf (if dir is true) or lastIndexOf\n  if (Buffer.isBuffer(val)) {\n    // Special case: looking for empty string/buffer always fails\n    if (val.length === 0) {\n      return -1\n    }\n    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)\n  } else if (typeof val === 'number') {\n    val = val & 0xFF // Search for a byte value [0-255]\n    if (Buffer.TYPED_ARRAY_SUPPORT &&\n        typeof Uint8Array.prototype.indexOf === 'function') {\n      if (dir) {\n        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)\n      } else {\n        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)\n      }\n    }\n    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)\n  }\n\n  throw new TypeError('val must be string, number or Buffer')\n}\n\nfunction arrayIndexOf (arr, val, byteOffset, encoding, dir) {\n  var indexSize = 1\n  var arrLength = arr.length\n  var valLength = val.length\n\n  if (encoding !== undefined) {\n    encoding = String(encoding).toLowerCase()\n    if (encoding === 'ucs2' || encoding === 'ucs-2' ||\n        encoding === 'utf16le' || encoding === 'utf-16le') {\n      if (arr.length < 2 || val.length < 2) {\n        return -1\n      }\n      indexSize = 2\n      arrLength /= 2\n      valLength /= 2\n      byteOffset /= 2\n    }\n  }\n\n  function read (buf, i) {\n    if (indexSize === 1) {\n      return buf[i]\n    } else {\n      return buf.readUInt16BE(i * indexSize)\n    }\n  }\n\n  var i\n  if (dir) {\n    var foundIndex = -1\n    for (i = byteOffset; i < arrLength; i++) {\n      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n        if (foundIndex === -1) foundIndex = i\n        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize\n      } else {\n        if (foundIndex !== -1) i -= i - foundIndex\n        foundIndex = -1\n      }\n    }\n  } else {\n    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength\n    for (i = byteOffset; i >= 0; i--) {\n      var found = true\n      for (var j = 0; j < valLength; j++) {\n        if (read(arr, i + j) !== read(val, j)) {\n          found = false\n          break\n        }\n      }\n      if (found) return i\n    }\n  }\n\n  return -1\n}\n\nBuffer.prototype.includes = function includes (val, byteOffset, encoding) {\n  return this.indexOf(val, byteOffset, encoding) !== -1\n}\n\nBuffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)\n}\n\nBuffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {\n  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)\n}\n\nfunction hexWrite (buf, string, offset, length) {\n  offset = Number(offset) || 0\n  var remaining = buf.length - offset\n  if (!length) {\n    length = remaining\n  } else {\n    length = Number(length)\n    if (length > remaining) {\n      length = remaining\n    }\n  }\n\n  // must be an even number of digits\n  var strLen = string.length\n  if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')\n\n  if (length > strLen / 2) {\n    length = strLen / 2\n  }\n  for (var i = 0; i < length; ++i) {\n    var parsed = parseInt(string.substr(i * 2, 2), 16)\n    if (isNaN(parsed)) return i\n    buf[offset + i] = parsed\n  }\n  return i\n}\n\nfunction utf8Write (buf, string, offset, length) {\n  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nfunction asciiWrite (buf, string, offset, length) {\n  return blitBuffer(asciiToBytes(string), buf, offset, length)\n}\n\nfunction latin1Write (buf, string, offset, length) {\n  return asciiWrite(buf, string, offset, length)\n}\n\nfunction base64Write (buf, string, offset, length) {\n  return blitBuffer(base64ToBytes(string), buf, offset, length)\n}\n\nfunction ucs2Write (buf, string, offset, length) {\n  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)\n}\n\nBuffer.prototype.write = function write (string, offset, length, encoding) {\n  // Buffer#write(string)\n  if (offset === undefined) {\n    encoding = 'utf8'\n    length = this.length\n    offset = 0\n  // Buffer#write(string, encoding)\n  } else if (length === undefined && typeof offset === 'string') {\n    encoding = offset\n    length = this.length\n    offset = 0\n  // Buffer#write(string, offset[, length][, encoding])\n  } else if (isFinite(offset)) {\n    offset = offset | 0\n    if (isFinite(length)) {\n      length = length | 0\n      if (encoding === undefined) encoding = 'utf8'\n    } else {\n      encoding = length\n      length = undefined\n    }\n  // legacy write(string, encoding, offset, length) - remove in v0.13\n  } else {\n    throw new Error(\n      'Buffer.write(string, encoding, offset[, length]) is no longer supported'\n    )\n  }\n\n  var remaining = this.length - offset\n  if (length === undefined || length > remaining) length = remaining\n\n  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {\n    throw new RangeError('Attempt to write outside buffer bounds')\n  }\n\n  if (!encoding) encoding = 'utf8'\n\n  var loweredCase = false\n  for (;;) {\n    switch (encoding) {\n      case 'hex':\n        return hexWrite(this, string, offset, length)\n\n      case 'utf8':\n      case 'utf-8':\n        return utf8Write(this, string, offset, length)\n\n      case 'ascii':\n        return asciiWrite(this, string, offset, length)\n\n      case 'latin1':\n      case 'binary':\n        return latin1Write(this, string, offset, length)\n\n      case 'base64':\n        // Warning: maxLength not taken into account in base64Write\n        return base64Write(this, string, offset, length)\n\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return ucs2Write(this, string, offset, length)\n\n      default:\n        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)\n        encoding = ('' + encoding).toLowerCase()\n        loweredCase = true\n    }\n  }\n}\n\nBuffer.prototype.toJSON = function toJSON () {\n  return {\n    type: 'Buffer',\n    data: Array.prototype.slice.call(this._arr || this, 0)\n  }\n}\n\nfunction base64Slice (buf, start, end) {\n  if (start === 0 && end === buf.length) {\n    return base64.fromByteArray(buf)\n  } else {\n    return base64.fromByteArray(buf.slice(start, end))\n  }\n}\n\nfunction utf8Slice (buf, start, end) {\n  end = Math.min(buf.length, end)\n  var res = []\n\n  var i = start\n  while (i < end) {\n    var firstByte = buf[i]\n    var codePoint = null\n    var bytesPerSequence = (firstByte > 0xEF) ? 4\n      : (firstByte > 0xDF) ? 3\n      : (firstByte > 0xBF) ? 2\n      : 1\n\n    if (i + bytesPerSequence <= end) {\n      var secondByte, thirdByte, fourthByte, tempCodePoint\n\n      switch (bytesPerSequence) {\n        case 1:\n          if (firstByte < 0x80) {\n            codePoint = firstByte\n          }\n          break\n        case 2:\n          secondByte = buf[i + 1]\n          if ((secondByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)\n            if (tempCodePoint > 0x7F) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 3:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)\n            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {\n              codePoint = tempCodePoint\n            }\n          }\n          break\n        case 4:\n          secondByte = buf[i + 1]\n          thirdByte = buf[i + 2]\n          fourthByte = buf[i + 3]\n          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {\n            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)\n            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {\n              codePoint = tempCodePoint\n            }\n          }\n      }\n    }\n\n    if (codePoint === null) {\n      // we did not generate a valid codePoint so insert a\n      // replacement char (U+FFFD) and advance only 1 byte\n      codePoint = 0xFFFD\n      bytesPerSequence = 1\n    } else if (codePoint > 0xFFFF) {\n      // encode to utf16 (surrogate pair dance)\n      codePoint -= 0x10000\n      res.push(codePoint >>> 10 & 0x3FF | 0xD800)\n      codePoint = 0xDC00 | codePoint & 0x3FF\n    }\n\n    res.push(codePoint)\n    i += bytesPerSequence\n  }\n\n  return decodeCodePointsArray(res)\n}\n\n// Based on http://stackoverflow.com/a/22747272/680742, the browser with\n// the lowest limit is Chrome, with 0x10000 args.\n// We go 1 magnitude less, for safety\nvar MAX_ARGUMENTS_LENGTH = 0x1000\n\nfunction decodeCodePointsArray (codePoints) {\n  var len = codePoints.length\n  if (len <= MAX_ARGUMENTS_LENGTH) {\n    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()\n  }\n\n  // Decode in chunks to avoid \"call stack size exceeded\".\n  var res = ''\n  var i = 0\n  while (i < len) {\n    res += String.fromCharCode.apply(\n      String,\n      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)\n    )\n  }\n  return res\n}\n\nfunction asciiSlice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i] & 0x7F)\n  }\n  return ret\n}\n\nfunction latin1Slice (buf, start, end) {\n  var ret = ''\n  end = Math.min(buf.length, end)\n\n  for (var i = start; i < end; ++i) {\n    ret += String.fromCharCode(buf[i])\n  }\n  return ret\n}\n\nfunction hexSlice (buf, start, end) {\n  var len = buf.length\n\n  if (!start || start < 0) start = 0\n  if (!end || end < 0 || end > len) end = len\n\n  var out = ''\n  for (var i = start; i < end; ++i) {\n    out += toHex(buf[i])\n  }\n  return out\n}\n\nfunction utf16leSlice (buf, start, end) {\n  var bytes = buf.slice(start, end)\n  var res = ''\n  for (var i = 0; i < bytes.length; i += 2) {\n    res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)\n  }\n  return res\n}\n\nBuffer.prototype.slice = function slice (start, end) {\n  var len = this.length\n  start = ~~start\n  end = end === undefined ? len : ~~end\n\n  if (start < 0) {\n    start += len\n    if (start < 0) start = 0\n  } else if (start > len) {\n    start = len\n  }\n\n  if (end < 0) {\n    end += len\n    if (end < 0) end = 0\n  } else if (end > len) {\n    end = len\n  }\n\n  if (end < start) end = start\n\n  var newBuf\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    newBuf = this.subarray(start, end)\n    newBuf.__proto__ = Buffer.prototype\n  } else {\n    var sliceLen = end - start\n    newBuf = new Buffer(sliceLen, undefined)\n    for (var i = 0; i < sliceLen; ++i) {\n      newBuf[i] = this[i + start]\n    }\n  }\n\n  return newBuf\n}\n\n/*\n * Need to make sure that buffer isn't trying to write out of bounds.\n */\nfunction checkOffset (offset, ext, length) {\n  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')\n  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')\n}\n\nBuffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    checkOffset(offset, byteLength, this.length)\n  }\n\n  var val = this[offset + --byteLength]\n  var mul = 1\n  while (byteLength > 0 && (mul *= 0x100)) {\n    val += this[offset + --byteLength] * mul\n  }\n\n  return val\n}\n\nBuffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  return this[offset]\n}\n\nBuffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return this[offset] | (this[offset + 1] << 8)\n}\n\nBuffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  return (this[offset] << 8) | this[offset + 1]\n}\n\nBuffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return ((this[offset]) |\n      (this[offset + 1] << 8) |\n      (this[offset + 2] << 16)) +\n      (this[offset + 3] * 0x1000000)\n}\n\nBuffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] * 0x1000000) +\n    ((this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    this[offset + 3])\n}\n\nBuffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var val = this[offset]\n  var mul = 1\n  var i = 0\n  while (++i < byteLength && (mul *= 0x100)) {\n    val += this[offset + i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) checkOffset(offset, byteLength, this.length)\n\n  var i = byteLength\n  var mul = 1\n  var val = this[offset + --i]\n  while (i > 0 && (mul *= 0x100)) {\n    val += this[offset + --i] * mul\n  }\n  mul *= 0x80\n\n  if (val >= mul) val -= Math.pow(2, 8 * byteLength)\n\n  return val\n}\n\nBuffer.prototype.readInt8 = function readInt8 (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 1, this.length)\n  if (!(this[offset] & 0x80)) return (this[offset])\n  return ((0xff - this[offset] + 1) * -1)\n}\n\nBuffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset] | (this[offset + 1] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 2, this.length)\n  var val = this[offset + 1] | (this[offset] << 8)\n  return (val & 0x8000) ? val | 0xFFFF0000 : val\n}\n\nBuffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset]) |\n    (this[offset + 1] << 8) |\n    (this[offset + 2] << 16) |\n    (this[offset + 3] << 24)\n}\n\nBuffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n\n  return (this[offset] << 24) |\n    (this[offset + 1] << 16) |\n    (this[offset + 2] << 8) |\n    (this[offset + 3])\n}\n\nBuffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, true, 23, 4)\n}\n\nBuffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 4, this.length)\n  return ieee754.read(this, offset, false, 23, 4)\n}\n\nBuffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, true, 52, 8)\n}\n\nBuffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {\n  if (!noAssert) checkOffset(offset, 8, this.length)\n  return ieee754.read(this, offset, false, 52, 8)\n}\n\nfunction checkInt (buf, value, offset, ext, max, min) {\n  if (!Buffer.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance')\n  if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds')\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n}\n\nBuffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var mul = 1\n  var i = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  byteLength = byteLength | 0\n  if (!noAssert) {\n    var maxBytes = Math.pow(2, 8 * byteLength) - 1\n    checkInt(this, value, offset, byteLength, maxBytes, 0)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    this[offset + i] = (value / mul) & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nfunction objectWriteUInt16 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {\n    buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>\n      (littleEndian ? i : 1 - i) * 8\n  }\n}\n\nBuffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nfunction objectWriteUInt32 (buf, value, offset, littleEndian) {\n  if (value < 0) value = 0xffffffff + value + 1\n  for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {\n    buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff\n  }\n}\n\nBuffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset + 3] = (value >>> 24)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 1] = (value >>> 8)\n    this[offset] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = 0\n  var mul = 1\n  var sub = 0\n  this[offset] = value & 0xFF\n  while (++i < byteLength && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) {\n    var limit = Math.pow(2, 8 * byteLength - 1)\n\n    checkInt(this, value, offset, byteLength, limit - 1, -limit)\n  }\n\n  var i = byteLength - 1\n  var mul = 1\n  var sub = 0\n  this[offset + i] = value & 0xFF\n  while (--i >= 0 && (mul *= 0x100)) {\n    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n      sub = 1\n    }\n    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF\n  }\n\n  return offset + byteLength\n}\n\nBuffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)\n  if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)\n  if (value < 0) value = 0xff + value + 1\n  this[offset] = (value & 0xff)\n  return offset + 1\n}\n\nBuffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n  } else {\n    objectWriteUInt16(this, value, offset, true)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 8)\n    this[offset + 1] = (value & 0xff)\n  } else {\n    objectWriteUInt16(this, value, offset, false)\n  }\n  return offset + 2\n}\n\nBuffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value & 0xff)\n    this[offset + 1] = (value >>> 8)\n    this[offset + 2] = (value >>> 16)\n    this[offset + 3] = (value >>> 24)\n  } else {\n    objectWriteUInt32(this, value, offset, true)\n  }\n  return offset + 4\n}\n\nBuffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {\n  value = +value\n  offset = offset | 0\n  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)\n  if (value < 0) value = 0xffffffff + value + 1\n  if (Buffer.TYPED_ARRAY_SUPPORT) {\n    this[offset] = (value >>> 24)\n    this[offset + 1] = (value >>> 16)\n    this[offset + 2] = (value >>> 8)\n    this[offset + 3] = (value & 0xff)\n  } else {\n    objectWriteUInt32(this, value, offset, false)\n  }\n  return offset + 4\n}\n\nfunction checkIEEE754 (buf, value, offset, ext, max, min) {\n  if (offset + ext > buf.length) throw new RangeError('Index out of range')\n  if (offset < 0) throw new RangeError('Index out of range')\n}\n\nfunction writeFloat (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 23, 4)\n  return offset + 4\n}\n\nBuffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {\n  return writeFloat(this, value, offset, false, noAssert)\n}\n\nfunction writeDouble (buf, value, offset, littleEndian, noAssert) {\n  if (!noAssert) {\n    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)\n  }\n  ieee754.write(buf, value, offset, littleEndian, 52, 8)\n  return offset + 8\n}\n\nBuffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, true, noAssert)\n}\n\nBuffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {\n  return writeDouble(this, value, offset, false, noAssert)\n}\n\n// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)\nBuffer.prototype.copy = function copy (target, targetStart, start, end) {\n  if (!start) start = 0\n  if (!end && end !== 0) end = this.length\n  if (targetStart >= target.length) targetStart = target.length\n  if (!targetStart) targetStart = 0\n  if (end > 0 && end < start) end = start\n\n  // Copy 0 bytes; we're done\n  if (end === start) return 0\n  if (target.length === 0 || this.length === 0) return 0\n\n  // Fatal error conditions\n  if (targetStart < 0) {\n    throw new RangeError('targetStart out of bounds')\n  }\n  if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')\n  if (end < 0) throw new RangeError('sourceEnd out of bounds')\n\n  // Are we oob?\n  if (end > this.length) end = this.length\n  if (target.length - targetStart < end - start) {\n    end = target.length - targetStart + start\n  }\n\n  var len = end - start\n  var i\n\n  if (this === target && start < targetStart && targetStart < end) {\n    // descending copy from end\n    for (i = len - 1; i >= 0; --i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {\n    // ascending copy from start\n    for (i = 0; i < len; ++i) {\n      target[i + targetStart] = this[i + start]\n    }\n  } else {\n    Uint8Array.prototype.set.call(\n      target,\n      this.subarray(start, start + len),\n      targetStart\n    )\n  }\n\n  return len\n}\n\n// Usage:\n//    buffer.fill(number[, offset[, end]])\n//    buffer.fill(buffer[, offset[, end]])\n//    buffer.fill(string[, offset[, end]][, encoding])\nBuffer.prototype.fill = function fill (val, start, end, encoding) {\n  // Handle string cases:\n  if (typeof val === 'string') {\n    if (typeof start === 'string') {\n      encoding = start\n      start = 0\n      end = this.length\n    } else if (typeof end === 'string') {\n      encoding = end\n      end = this.length\n    }\n    if (val.length === 1) {\n      var code = val.charCodeAt(0)\n      if (code < 256) {\n        val = code\n      }\n    }\n    if (encoding !== undefined && typeof encoding !== 'string') {\n      throw new TypeError('encoding must be a string')\n    }\n    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {\n      throw new TypeError('Unknown encoding: ' + encoding)\n    }\n  } else if (typeof val === 'number') {\n    val = val & 255\n  }\n\n  // Invalid ranges are not set to a default, so can range check early.\n  if (start < 0 || this.length < start || this.length < end) {\n    throw new RangeError('Out of range index')\n  }\n\n  if (end <= start) {\n    return this\n  }\n\n  start = start >>> 0\n  end = end === undefined ? this.length : end >>> 0\n\n  if (!val) val = 0\n\n  var i\n  if (typeof val === 'number') {\n    for (i = start; i < end; ++i) {\n      this[i] = val\n    }\n  } else {\n    var bytes = Buffer.isBuffer(val)\n      ? val\n      : utf8ToBytes(new Buffer(val, encoding).toString())\n    var len = bytes.length\n    for (i = 0; i < end - start; ++i) {\n      this[i + start] = bytes[i % len]\n    }\n  }\n\n  return this\n}\n\n// HELPER FUNCTIONS\n// ================\n\nvar INVALID_BASE64_RE = /[^+\\/0-9A-Za-z-_]/g\n\nfunction base64clean (str) {\n  // Node strips out invalid characters like \\n and \\t from the string, base64-js does not\n  str = stringtrim(str).replace(INVALID_BASE64_RE, '')\n  // Node converts strings with length < 2 to ''\n  if (str.length < 2) return ''\n  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not\n  while (str.length % 4 !== 0) {\n    str = str + '='\n  }\n  return str\n}\n\nfunction stringtrim (str) {\n  if (str.trim) return str.trim()\n  return str.replace(/^\\s+|\\s+$/g, '')\n}\n\nfunction toHex (n) {\n  if (n < 16) return '0' + n.toString(16)\n  return n.toString(16)\n}\n\nfunction utf8ToBytes (string, units) {\n  units = units || Infinity\n  var codePoint\n  var length = string.length\n  var leadSurrogate = null\n  var bytes = []\n\n  for (var i = 0; i < length; ++i) {\n    codePoint = string.charCodeAt(i)\n\n    // is surrogate component\n    if (codePoint > 0xD7FF && codePoint < 0xE000) {\n      // last char was a lead\n      if (!leadSurrogate) {\n        // no lead yet\n        if (codePoint > 0xDBFF) {\n          // unexpected trail\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        } else if (i + 1 === length) {\n          // unpaired lead\n          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n          continue\n        }\n\n        // valid lead\n        leadSurrogate = codePoint\n\n        continue\n      }\n\n      // 2 leads in a row\n      if (codePoint < 0xDC00) {\n        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n        leadSurrogate = codePoint\n        continue\n      }\n\n      // valid surrogate pair\n      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000\n    } else if (leadSurrogate) {\n      // valid bmp char, but last char was a lead\n      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)\n    }\n\n    leadSurrogate = null\n\n    // encode utf8\n    if (codePoint < 0x80) {\n      if ((units -= 1) < 0) break\n      bytes.push(codePoint)\n    } else if (codePoint < 0x800) {\n      if ((units -= 2) < 0) break\n      bytes.push(\n        codePoint >> 0x6 | 0xC0,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x10000) {\n      if ((units -= 3) < 0) break\n      bytes.push(\n        codePoint >> 0xC | 0xE0,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else if (codePoint < 0x110000) {\n      if ((units -= 4) < 0) break\n      bytes.push(\n        codePoint >> 0x12 | 0xF0,\n        codePoint >> 0xC & 0x3F | 0x80,\n        codePoint >> 0x6 & 0x3F | 0x80,\n        codePoint & 0x3F | 0x80\n      )\n    } else {\n      throw new Error('Invalid code point')\n    }\n  }\n\n  return bytes\n}\n\nfunction asciiToBytes (str) {\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    // Node's code seems to be doing this and not & 0x7F..\n    byteArray.push(str.charCodeAt(i) & 0xFF)\n  }\n  return byteArray\n}\n\nfunction utf16leToBytes (str, units) {\n  var c, hi, lo\n  var byteArray = []\n  for (var i = 0; i < str.length; ++i) {\n    if ((units -= 2) < 0) break\n\n    c = str.charCodeAt(i)\n    hi = c >> 8\n    lo = c % 256\n    byteArray.push(lo)\n    byteArray.push(hi)\n  }\n\n  return byteArray\n}\n\nfunction base64ToBytes (str) {\n  return base64.toByteArray(base64clean(str))\n}\n\nfunction blitBuffer (src, dst, offset, length) {\n  for (var i = 0; i < length; ++i) {\n    if ((i + offset >= dst.length) || (i >= src.length)) break\n    dst[i + offset] = src[i]\n  }\n  return i\n}\n\nfunction isnan (val) {\n  return val !== val // eslint-disable-line no-self-compare\n}\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst types = require('./types');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Returns true if the given value is a subject with properties.\n *\n * @param v the value to check.\n *\n * @return true if the value is a subject with properties, false if not.\n */\napi.isSubject = v => {\n  // Note: A value is a subject if all of these hold true:\n  // 1. It is an Object.\n  // 2. It is not a @value, @set, or @list.\n  // 3. It has more than 1 key OR any existing key is not @id.\n  if(types.isObject(v) &&\n    !(('@value' in v) || ('@set' in v) || ('@list' in v))) {\n    const keyCount = Object.keys(v).length;\n    return (keyCount > 1 || !('@id' in v));\n  }\n  return false;\n};\n\n/**\n * Returns true if the given value is a subject reference.\n *\n * @param v the value to check.\n *\n * @return true if the value is a subject reference, false if not.\n */\napi.isSubjectReference = v =>\n  // Note: A value is a subject reference if all of these hold true:\n  // 1. It is an Object.\n  // 2. It has a single key: @id.\n  (types.isObject(v) && Object.keys(v).length === 1 && ('@id' in v));\n\n/**\n * Returns true if the given value is a @value.\n *\n * @param v the value to check.\n *\n * @return true if the value is a @value, false if not.\n */\napi.isValue = v =>\n  // Note: A value is a @value if all of these hold true:\n  // 1. It is an Object.\n  // 2. It has the @value property.\n  types.isObject(v) && ('@value' in v);\n\n/**\n * Returns true if the given value is a @list.\n *\n * @param v the value to check.\n *\n * @return true if the value is a @list, false if not.\n */\napi.isList = v =>\n  // Note: A value is a @list if all of these hold true:\n  // 1. It is an Object.\n  // 2. It has the @list property.\n  types.isObject(v) && ('@list' in v);\n\n/**\n * Returns true if the given value is a @graph.\n *\n * @return true if the value is a @graph, false if not.\n */\napi.isGraph = v => {\n  // Note: A value is a graph if all of these hold true:\n  // 1. It is an object.\n  // 2. It has an `@graph` key.\n  // 3. It may have '@id' or '@index'\n  return types.isObject(v) &&\n    '@graph' in v &&\n    Object.keys(v)\n      .filter(key => key !== '@id' && key !== '@index').length === 1;\n};\n\n/**\n * Returns true if the given value is a simple @graph.\n *\n * @return true if the value is a simple @graph, false if not.\n */\napi.isSimpleGraph = v => {\n  // Note: A value is a simple graph if all of these hold true:\n  // 1. It is an object.\n  // 2. It has an `@graph` key.\n  // 3. It has only 1 key or 2 keys where one of them is `@index`.\n  return api.isGraph(v) && !('@id' in v);\n};\n\n/**\n * Returns true if the given value is a blank node.\n *\n * @param v the value to check.\n *\n * @return true if the value is a blank node, false if not.\n */\napi.isBlankNode = v => {\n  // Note: A value is a blank node if all of these hold true:\n  // 1. It is an Object.\n  // 2. If it has an @id key its value begins with '_:'.\n  // 3. It has no keys OR is not a @value, @set, or @list.\n  if(types.isObject(v)) {\n    if('@id' in v) {\n      return (v['@id'].indexOf('_:') === 0);\n    }\n    return (Object.keys(v).length === 0 ||\n      !(('@value' in v) || ('@set' in v) || ('@list' in v)));\n  }\n  return false;\n};\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\nconst inversify_1 = require(\"inversify\");\nconst __1 = require(\"../..\");\nconst page_1 = require(\"../../entities/connections/page\");\nconst DropOffType_1 = __importDefault(require(\"../../enums/DropOffType\"));\nconst PickupType_1 = __importDefault(require(\"../../enums/PickupType\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst JSONLDContext_1 = __importDefault(require(\"../../uri/JSONLDContext\"));\nconst ARRIVAL_STOP = \"http://semweb.mmlab.be/ns/linkedconnections#arrivalStop\";\nconst ARRIVAL_TIME = \"http://semweb.mmlab.be/ns/linkedconnections#arrivalTime\";\nconst ARRIVAL_DELAY = \"http://semweb.mmlab.be/ns/linkedconnections#arrivalDelay\";\nconst DEPARTURE_STOP = \"http://semweb.mmlab.be/ns/linkedconnections#departureStop\";\nconst DEPARTURE_TIME = \"http://semweb.mmlab.be/ns/linkedconnections#departureTime\";\nconst DEPARTURE_DELAY = \"http://semweb.mmlab.be/ns/linkedconnections#departureDelay\";\nconst NEXT_CONNECTION = \"http://semweb.mmlab.be/ns/linkedconnections#nextConnection\";\nconst DROP_OFF_TYPE = \"http://vocab.gtfs.org/terms#dropOffType\";\nconst HEADSIGN = \"http://vocab.gtfs.org/terms#headsign\";\nconst PICKUP_TYPE = \"http://vocab.gtfs.org/terms#pickupType\";\nconst ROUTE = \"http://vocab.gtfs.org/terms#route\";\nconst TRIP = \"http://vocab.gtfs.org/terms#trip\";\nlet ConnectionsFetcherRaw = \n// tslint:disable: no-string-literal\nclass ConnectionsFetcherRaw {\n    setTravelMode(travelMode) {\n        this.travelMode = travelMode;\n    }\n    async get(url) {\n        const beginTime = new Date();\n        const response = await cross_fetch_1.default(url);\n        const size = this.parseResponseLength(response);\n        const duration = (new Date()).getTime() - beginTime.getTime();\n        const responseText = await response.text();\n        if (response.status !== 200) {\n            EventBus_1.default.getInstance().emit(EventType_1.default.Warning, `${url} responded with status code ${response.status}`);\n        }\n        if (response.status === 200 && responseText) {\n            const blob = JSON.parse(responseText);\n            const connections = [];\n            const context = new JSONLDContext_1.default(blob[\"@context\"]);\n            for (const entity of blob[\"@graph\"]) {\n                for (const [name, data] of Object.entries(entity)) {\n                    entity[context.resolveIdentifier(name)] = data;\n                }\n                const connectionId = context.resolveIdentifier(entity[\"@id\"]);\n                const arrivalTime = new Date(entity[ARRIVAL_TIME]);\n                const arrivalStop = context.resolveIdentifier(entity[ARRIVAL_STOP]);\n                const arrivalDelay = entity[ARRIVAL_DELAY] ? parseFloat(entity[ARRIVAL_DELAY]) : 0;\n                const departureTime = new Date(entity[DEPARTURE_TIME]);\n                const departureStop = context.resolveIdentifier(entity[DEPARTURE_STOP]);\n                const departureDelay = entity[DEPARTURE_DELAY] ? parseFloat(entity[DEPARTURE_DELAY]) : 0;\n                const tripId = entity[TRIP] ? context.resolveIdentifier(entity[TRIP]) : null;\n                const route = entity[ROUTE] ? context.resolveIdentifier(entity[ROUTE]) : null;\n                const dropOffType = entity[DROP_OFF_TYPE] ?\n                    context.resolveIdentifier(entity[DROP_OFF_TYPE]) :\n                    DropOffType_1.default.Regular;\n                const pickupType = entity[PICKUP_TYPE] ?\n                    context.resolveIdentifier(entity[PICKUP_TYPE]) :\n                    PickupType_1.default.Regular;\n                const headsign = entity[HEADSIGN] || null;\n                const connection = {\n                    id: connectionId,\n                    travelMode: this.travelMode,\n                    arrivalTime,\n                    arrivalStop,\n                    arrivalDelay,\n                    departureTime,\n                    departureStop,\n                    departureDelay,\n                    tripId,\n                    route,\n                    dropOffType,\n                    pickupType,\n                    headsign,\n                };\n                if (connection.departureTime < connection.arrivalTime) {\n                    // safety precaution\n                    connections.push(connection);\n                }\n            }\n            const pageId = blob[\"@id\"];\n            const nextPageUrl = blob[\"hydra:next\"];\n            const previousPageUrl = blob[\"hydra:previous\"];\n            connections.sort((a, b) => {\n                if (a.departureTime.getTime() !== b.departureTime.getTime()) {\n                    return a.departureTime.getTime() - b.departureTime.getTime();\n                }\n                else if (a.arrivalTime.getTime() !== b.arrivalTime.getTime()) {\n                    return a.arrivalTime.getTime() - b.arrivalTime.getTime();\n                }\n                return a.id.localeCompare(b.id);\n            });\n            EventBus_1.default.getInstance().emit(EventType_1.default.ResourceFetch, {\n                datatype: __1.DataType.Connections,\n                url,\n                duration,\n                size,\n            });\n            return new page_1.LinkedConnectionsPage(pageId, connections, previousPageUrl, nextPageUrl);\n        }\n        else {\n            return new page_1.LinkedConnectionsPage(url, [], undefined, undefined);\n        }\n    }\n    parseResponseLength(response) {\n        if (response.headers.get(\"content-length\")) {\n            return parseInt(response.headers.get(\"content-length\"), 10);\n        }\n        else {\n            try {\n                return response.body._chunkSize;\n            }\n            catch (e) {\n                //\n            }\n        }\n    }\n};\nConnectionsFetcherRaw = __decorate([\n    inversify_1.injectable()\n    // tslint:disable: no-string-literal\n], ConnectionsFetcherRaw);\nexports.default = ConnectionsFetcherRaw;\n//# sourceMappingURL=ConnectionsFetcherRaw.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst MergeIterator_1 = __importDefault(require(\"../../util/iterators/MergeIterator\"));\nconst ConnectionSelectors_1 = require(\"./ConnectionSelectors\");\nconst ConnectionsProviderSingle_1 = __importDefault(require(\"./ConnectionsProviderSingle\"));\nlet ConnectionsProviderDefault = class ConnectionsProviderDefault {\n    constructor(connectionsFetcherFactory, templateFetcher) {\n        this.sources = [];\n        this.singleProviders = [];\n        this.connectionsFetcherFactory = connectionsFetcherFactory;\n        this.templateFetcher = templateFetcher;\n    }\n    addConnectionSource(source) {\n        this.sources.push(source);\n        this.singleProviders.push(new ConnectionsProviderSingle_1.default(this.connectionsFetcherFactory, source, this.templateFetcher));\n    }\n    getSources() {\n        return this.sources;\n    }\n    prefetchConnections(lowerBound, upperBound) {\n        for (const provider of this.singleProviders) {\n            provider.prefetchConnections(lowerBound, upperBound);\n        }\n    }\n    async createIterator(options) {\n        const iterators = await Promise.all(this.singleProviders\n            .map((provider) => provider.createIterator(options)));\n        const selector = options.backward ? ConnectionSelectors_1.backwardsConnectionsSelector : ConnectionSelectors_1.forwardsConnectionSelector;\n        if (options.excludedModes) {\n            return new MergeIterator_1.default(iterators, selector, true).filter((item) => {\n                return !options.excludedModes.has(item.travelMode);\n            });\n        }\n        else {\n            return new MergeIterator_1.default(iterators, selector, true);\n        }\n    }\n    async appendIterator(options, existingIterator) {\n        const iterators = await Promise.all(this.singleProviders\n            .map((provider) => provider.createIterator(options)));\n        const selector = options.backward ? ConnectionSelectors_1.backwardsConnectionsSelector : ConnectionSelectors_1.forwardsConnectionSelector;\n        const dataListeners = existingIterator.listeners(\"data\");\n        const readListeners = existingIterator.listeners(\"readable\");\n        const endListeners = existingIterator.listeners(\"end\");\n        existingIterator.removeAllListeners();\n        const mergedIterator = new MergeIterator_1.default([...iterators, existingIterator], selector, true);\n        for (const listener of dataListeners) {\n            mergedIterator.addListener(\"data\", listener);\n        }\n        for (const listener of readListeners) {\n            mergedIterator.addListener(\"readable\", listener);\n        }\n        for (const listener of endListeners) {\n            mergedIterator.addListener(\"end\", listener);\n        }\n        return mergedIterator;\n    }\n    getByUrl(url) {\n        // TODO, if needed this can delegate the call to one of the sub providers\n        throw new Error(\"Not implemented yet\");\n    }\n    getByTime(date) {\n        throw new Error(\"Method not implemented because the semantics would be ambiguous.\");\n    }\n};\nConnectionsProviderDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.ConnectionsFetcherFactory)),\n    __param(1, inversify_1.inject(types_1.default.HydraTemplateFetcher)),\n    __metadata(\"design:paramtypes\", [Function, Object])\n], ConnectionsProviderDefault);\nexports.default = ConnectionsProviderDefault;\n//# sourceMappingURL=ConnectionsProviderDefault.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst ldfetch_1 = __importDefault(require(\"ldfetch\"));\nconst mapping_1 = require(\"../../entities/hydra/mapping\");\nconst search_1 = require(\"../../entities/hydra/search\");\nconst ldloader_1 = require(\"../../loader/ldloader\");\nconst single_1 = require(\"../../loader/views/single\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst constants_1 = require(\"../../uri/constants\");\nconst uri_1 = __importDefault(require(\"../../uri/uri\"));\nlet HydraTemplateFetcherDefault = class HydraTemplateFetcherDefault {\n    constructor(ldFetch) {\n        this.ldFetch = ldFetch;\n        this.ldLoader = new ldloader_1.LDLoader();\n        // unordered collections\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.HYDRA, \"mapping\"));\n    }\n    async get(url) {\n        const rdfThing = await this.ldFetch.get(url);\n        const triples = rdfThing.triples;\n        const [profile] = this.ldLoader.process(triples, [\n            this.getView(),\n        ]);\n        profile.id = url;\n        return profile;\n    }\n    getView() {\n        const view = new single_1.ThingView(search_1.HydraTemplate.create);\n        view.addFilter((entity) => entity[uri_1.default.inNS(constants_1.HYDRA, \"template\")] !== undefined);\n        view.addMapping(uri_1.default.inNS(constants_1.HYDRA, \"template\"), \"template\");\n        view.addMapping(uri_1.default.inNS(constants_1.HYDRA, \"mapping\"), \"mappings\", this.getMappingView());\n        return view;\n    }\n    getMappingView() {\n        const view = new single_1.ThingView(mapping_1.HydraTemplateMapping.create);\n        view.addFilter((entity) => entity[uri_1.default.inNS(constants_1.HYDRA, \"variable\")] !== undefined);\n        view.addMapping(uri_1.default.inNS(constants_1.HYDRA, \"variable\"), \"variable\");\n        view.addMapping(uri_1.default.inNS(constants_1.HYDRA, \"required\"), \"required\");\n        view.addMapping(uri_1.default.inNS(constants_1.HYDRA, \"property\"), \"property\");\n        return view;\n    }\n};\nHydraTemplateFetcherDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LDFetch)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof ldfetch_1.default !== \"undefined\" && ldfetch_1.default) === \"function\" ? _a : Object])\n], HydraTemplateFetcherDefault);\nexports.default = HydraTemplateFetcherDefault;\n//# sourceMappingURL=HydraTemplateFetcherDefault.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst jsonld = require(\"jsonld\");\nconst ldfetch_1 = __importDefault(require(\"ldfetch\"));\nconst CharacteresticProfile_1 = __importDefault(require(\"../../entities/profile/CharacteresticProfile\"));\nconst ProfileConclusion_1 = __importDefault(require(\"../../entities/profile/ProfileConclusion\"));\nconst ProfileCondition_1 = __importDefault(require(\"../../entities/profile/ProfileCondition\"));\nconst ProfileRule_1 = __importDefault(require(\"../../entities/profile/ProfileRule\"));\nconst ldloader_1 = require(\"../../loader/ldloader\");\nconst single_1 = require(\"../../loader/views/single\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst constants_1 = require(\"../../uri/constants\");\nconst uri_1 = __importDefault(require(\"../../uri/uri\"));\nlet ProfileFetcherDefault = class ProfileFetcherDefault {\n    constructor(ldFetch) {\n        this.ldFetch = ldFetch;\n        this.ldLoader = new ldloader_1.LDLoader();\n        // unordered collections\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.PROFILE, \"hasAccessRules\"));\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.PROFILE, \"hasOnewayRules\"));\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.PROFILE, \"hasSpeedRules\"));\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.PROFILE, \"hasPriorityRules\"));\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.PROFILE, \"hasObstacleRules\"));\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.PROFILE, \"hasObstacleTimeRules\"));\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.PROFILE, \"hasProximityRules\"));\n    }\n    async parseProfileBlob(blob, id) {\n        const triples = await jsonld.toRDF(blob);\n        const [profile] = this.ldLoader.process(triples, [\n            this.getView(),\n        ]);\n        profile.id = id;\n        return profile;\n    }\n    async get(url) {\n        const rdfThing = await this.ldFetch.get(url);\n        const triples = rdfThing.triples;\n        const [profile] = this.ldLoader.process(triples, [\n            this.getView(),\n        ]);\n        profile.id = url;\n        return profile;\n    }\n    getView() {\n        const view = new single_1.ThingView(CharacteresticProfile_1.default.create);\n        view.addFilter((entity) => entity[uri_1.default.inNS(constants_1.PROFILE, \"hasAccessRules\")] !== undefined ||\n            entity[uri_1.default.inNS(constants_1.PROFILE, \"hasOnewayRules\")] !== undefined ||\n            entity[uri_1.default.inNS(constants_1.PROFILE, \"hasSpeedRules\")] !== undefined ||\n            entity[uri_1.default.inNS(constants_1.PROFILE, \"hasPriorityRules\")] !== undefined ||\n            entity[uri_1.default.inNS(constants_1.PROFILE, \"hasObstacleRules\")] !== undefined ||\n            entity[uri_1.default.inNS(constants_1.PROFILE, \"hasObstacleTimeRules\")] !== undefined);\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasAccessRules\"), \"accessRules\", this.getRuleView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasOnewayRules\"), \"onewayRules\", this.getRuleView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasSpeedRules\"), \"speedRules\", this.getRuleView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasPriorityRules\"), \"priorityRules\", this.getRuleView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasObstacleRules\"), \"obstacleRules\", this.getRuleView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasObstacleTimeRules\"), \"obstacleTimeRules\", this.getRuleView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasProximityRules\"), \"proximityRules\", this.getRuleView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasMaxSpeed\"), \"maxSpeed\");\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"usePublicTransport\"), \"usePublicTransport\");\n        return view;\n    }\n    getRuleView() {\n        const view = new single_1.ThingView(ProfileRule_1.default.create);\n        view.addFilter((entity) => entity[uri_1.default.inNS(constants_1.PROFILE, \"concludes\")] !== undefined);\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"concludes\"), \"conclusion\", this.getConclusionView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"match\"), \"condition\", this.getConditionView());\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasOrder\"), \"order\");\n        return view;\n    }\n    getConditionView() {\n        const view = new single_1.ThingView(ProfileCondition_1.default.create);\n        view.addFilter((entity) => entity[uri_1.default.inNS(constants_1.PROFILE, \"hasPredicate\")] !== undefined ||\n            entity[uri_1.default.inNS(constants_1.PROFILE, \"hasObject\")] !== undefined);\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasPredicate\"), \"predicate\");\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasObject\"), \"object\");\n        return view;\n    }\n    getConclusionView() {\n        const view = new single_1.ThingView(ProfileConclusion_1.default.create);\n        view.addFilter((entity) => (entity[uri_1.default.inNS(constants_1.PROFILE, \"hasAccess\")] !== undefined) ||\n            (entity[uri_1.default.inNS(constants_1.PROFILE, \"isOneway\")] !== undefined) ||\n            (entity[uri_1.default.inNS(constants_1.PROFILE, \"isReversed\")] !== undefined) ||\n            (entity[uri_1.default.inNS(constants_1.PROFILE, \"hasSpeed\")] !== undefined) ||\n            (entity[uri_1.default.inNS(constants_1.PROFILE, \"isObstacle\")] !== undefined) ||\n            (entity[uri_1.default.inNS(constants_1.PROFILE, \"hasPriority\")] !== undefined) ||\n            (entity[uri_1.default.inNS(constants_1.PROFILE, \"hasObstacleTime\")] !== undefined));\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasAccess\"), \"hasAccess\");\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"isOneway\"), \"isOneway\");\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"isReversed\"), \"isReversed\");\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasSpeed\"), \"speed\");\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"isObstacle\"), \"isObstacle\");\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasPriority\"), \"priority\");\n        view.addMapping(uri_1.default.inNS(constants_1.PROFILE, \"hasObstacleTime\"), \"obstacleTime\");\n        return view;\n    }\n};\nProfileFetcherDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LDFetch)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof ldfetch_1.default !== \"undefined\" && ldfetch_1.default) === \"function\" ? _a : Object])\n], ProfileFetcherDefault);\nexports.default = ProfileFetcherDefault;\n//# sourceMappingURL=ProfileFetcherDefault.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nlet StopsProviderDefault = class StopsProviderDefault {\n    constructor(stopsFetcherFactory) {\n        this.sources = [];\n        this.stopsFetchers = [];\n        this.cachedStops = [];\n        this.stopsFetcherFactory = stopsFetcherFactory;\n    }\n    addStopSource(source) {\n        this.sources.push(source);\n        this.cachedStops = [];\n        this.allStops = null;\n        this.stopsFetchers.push(this.stopsFetcherFactory(source.accessUrl));\n    }\n    getSources() {\n        return this.sources;\n    }\n    prefetchStops() {\n        for (const stopsFetcher of this.stopsFetchers) {\n            stopsFetcher.prefetchStops();\n        }\n    }\n    async getStopById(stopId) {\n        return Promise.all(this.stopsFetchers\n            .map((stopsFetcher) => stopsFetcher.getStopById(stopId))).then((results) => results.find((stop) => stop !== undefined));\n    }\n    async getAllStops() {\n        if (!this.allStops) {\n            if (this.cachedStops.length > 0) {\n                return Promise.resolve(this.cachedStops);\n            }\n            this.allStops = Promise.all(this.stopsFetchers\n                .map((stopsFetcher) => stopsFetcher.getAllStops())).then((results) => {\n                this.cachedStops = [].concat(...results);\n                return this.cachedStops;\n            });\n        }\n        return this.allStops;\n    }\n};\nStopsProviderDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.StopsFetcherFactory)),\n    __metadata(\"design:paramtypes\", [Function])\n], StopsProviderDefault);\nexports.default = StopsProviderDefault;\n//# sourceMappingURL=StopsProviderDefault.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\nconst inversify_1 = require(\"inversify\");\nconst __1 = require(\"../..\");\nconst RoutableTile_1 = require(\"../../entities/tiles/RoutableTile\");\nconst RoutableTileNode_1 = require(\"../../entities/tiles/RoutableTileNode\");\nconst RoutableTileRegistry_1 = __importDefault(require(\"../../entities/tiles/RoutableTileRegistry\"));\nconst RoutableTileWay_1 = require(\"../../entities/tiles/RoutableTileWay\");\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst constants_1 = require(\"../../uri/constants\");\nconst uri_1 = __importDefault(require(\"../../uri/uri\"));\nlet RoutableTileFetcherRaw = class RoutableTileFetcherRaw {\n    constructor() {\n        this.routableTileRegistry = RoutableTileRegistry_1.default.getInstance();\n    }\n    async get(url) {\n        const beginTime = new Date();\n        const response = await cross_fetch_1.default(url);\n        const responseText = await response.text();\n        if (response.status !== 200) {\n            EventBus_1.default.getInstance().emit(EventType_1.default.Warning, `${url} responded with status code ${response.status}`);\n        }\n        if (response.status === 200 && responseText) {\n            const blob = JSON.parse(responseText);\n            const nodes = {};\n            const ways = {};\n            const size = this.parseResponseLength(response);\n            const duration = (new Date()).getTime() - beginTime.getTime();\n            for (const entity of blob[\"@graph\"]) {\n                if (entity[\"@type\"] === \"osm:Node\") {\n                    const node = this.createNode(entity);\n                    nodes[node.id] = node;\n                }\n                else if (entity[\"@type\"] === \"osm:Way\") {\n                    const way = this.createWay(entity);\n                    ways[way.id] = way;\n                }\n            }\n            EventBus_1.default.getInstance().emit(EventType_1.default.ResourceFetch, {\n                DataType: __1.DataType.RoutableTile,\n                url,\n                duration,\n                size,\n            });\n            return this.processTileData(url, nodes, ways);\n        }\n        else {\n            return new RoutableTile_1.RoutableTile(url, new Set(), new Set());\n        }\n    }\n    parseResponseLength(response) {\n        if (response.headers.get(\"content-length\")) {\n            return parseInt(response.headers.get(\"content-length\"), 10);\n        }\n        else {\n            try {\n                return response.body._outOffset;\n            }\n            catch (e) {\n                //\n            }\n        }\n    }\n    processTileData(url, nodes, ways) {\n        for (const node of Object.values(nodes)) {\n            this.routableTileRegistry.registerNode(node);\n        }\n        for (const way of Object.values(ways)) {\n            this.routableTileRegistry.registerWay(way);\n        }\n        return new RoutableTile_1.RoutableTile(url, new Set(Object.keys(nodes)), new Set(Object.keys(ways)));\n    }\n    createNode(blob) {\n        const id = blob[\"@id\"];\n        const node = new RoutableTileNode_1.RoutableTileNode(id);\n        node.latitude = parseFloat(blob[\"geo:lat\"]);\n        node.longitude = parseFloat(blob[\"geo:long\"]);\n        for (const [key, value] of Object.entries(blob)) {\n            if (key === \"osm:hasTag\") {\n                node.freeformTags = value;\n            }\n            else if (key.indexOf(\"osm:\") === 0) {\n                const expandedKey = uri_1.default.fakeExpand(constants_1.OSM, key);\n                if (value.toString().indexOf(\"osm:\") === 0) {\n                    const expandedValue = uri_1.default.fakeExpand(constants_1.OSM, value.toString());\n                    node.definedTags[expandedKey] = expandedValue;\n                }\n                else {\n                    node.definedTags[expandedKey] = value;\n                }\n            }\n        }\n        return node;\n    }\n    createWay(blob) {\n        const id = blob[\"@id\"];\n        const way = new RoutableTileWay_1.RoutableTileWay(id);\n        if (blob[\"osm:maxspeed\"]) {\n            way.maxSpeed = parseFloat(blob[\"osm:maxspeed\"]);\n        }\n        if (blob[\"osm:hasNodes\"]) {\n            way.segments = [blob[\"osm:hasNodes\"]];\n        }\n        else {\n            const weights = blob[\"osm:hasEdges\"];\n            way.segments = [weights[\"osm:hasNodes\"]];\n            way.distances = [weights[\"osm:hasWeights\"]];\n        }\n        way.name = blob[\"osm:name\"];\n        for (const [key, value] of Object.entries(blob)) {\n            if (key === \"osm:hasNodes\" || key === \"osm:hasWeights\") {\n                // not tags, these are our own properties\n                continue;\n            }\n            else if (key === \"osm:hasTag\") {\n                way.freeformTags = value;\n            }\n            else if (key.indexOf(\"osm:\") === 0) {\n                const expandedKey = uri_1.default.fakeExpand(constants_1.OSM, key);\n                if (value.toString().indexOf(\"osm:\") === 0) {\n                    const expandedValue = uri_1.default.fakeExpand(constants_1.OSM, value.toString());\n                    way.definedTags[expandedKey] = expandedValue;\n                }\n                else {\n                    way.definedTags[expandedKey] = value;\n                }\n            }\n        }\n        return way;\n    }\n};\nRoutableTileFetcherRaw = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [])\n], RoutableTileFetcherRaw);\nexports.default = RoutableTileFetcherRaw;\n//# sourceMappingURL=RoutableTileFetcherRaw.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst DijkstraTreeInstance_1 = __importDefault(require(\"./DijkstraTreeInstance\"));\nlet DijkstraTree = class DijkstraTree {\n    createInstance(graph) {\n        return new DijkstraTreeInstance_1.default(graph);\n    }\n};\nDijkstraTree = __decorate([\n    inversify_1.injectable()\n], DijkstraTree);\nexports.default = DijkstraTree;\n//# sourceMappingURL=DijkstraTree.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst inversify_1 = require(\"inversify\");\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Leg_1 = __importDefault(require(\"../Leg\"));\nconst Path_1 = __importDefault(require(\"../Path\"));\nconst Step_1 = __importDefault(require(\"../Step\"));\nconst ProfileUtil_1 = __importDefault(require(\"./CSA/util/ProfileUtil\"));\n/**\n * Creates journeys based on the profiles and query from [[CSAProfile]].\n * A journey is an [[IPath]] that consist of several [[IStep]]s.\n *\n * @property bestArrivalTime Stores the best arrival time for each pair of departure-arrival stops.\n */\nlet JourneyExtractorProfile = class JourneyExtractorProfile {\n    constructor(locationResolver) {\n        this.bestArrivalTime = [];\n        this.locationResolver = locationResolver;\n        this.eventBus = EventBus_1.default.getInstance();\n    }\n    async extractJourneys(profilesByStop, query) {\n        const filteredProfilesByStop = ProfileUtil_1.default.filterInfinity(profilesByStop);\n        const departureLocation = query.from[0];\n        const arrivalLocation = query.to[0];\n        const paths = [];\n        const departureLocationProfiles = filteredProfilesByStop[departureLocation.id];\n        // Can't find departure stop;\n        if (!departureLocationProfiles) {\n            return new asynciterator_1.ArrayIterator(paths);\n        }\n        for (const profile of departureLocationProfiles) {\n            for (let amountOfTransfers = 0; amountOfTransfers < profile.transferProfiles.length; amountOfTransfers++) {\n                const transferProfile = profile.transferProfiles[amountOfTransfers];\n                if (this.checkBestArrivalTime(transferProfile, departureLocation, arrivalLocation)) {\n                    try {\n                        paths.push(await this.extractJourney(departureLocation, arrivalLocation, transferProfile, amountOfTransfers, filteredProfilesByStop));\n                        this.setBestArrivalTime(departureLocation, arrivalLocation, transferProfile.arrivalTime);\n                    }\n                    catch (e) {\n                        if (this.eventBus) {\n                            this.eventBus.emit(EventType_1.default.Warning, (e));\n                        }\n                    }\n                }\n            }\n        }\n        return new asynciterator_1.ArrayIterator(paths.reverse());\n    }\n    checkBestArrivalTime(transferProfile, departureLocation, arrivalLocation) {\n        const canArrive = transferProfile.arrivalTime < Infinity;\n        if (!canArrive) {\n            return false;\n        }\n        const bestArrivalTimesOfDepartureStop = this.bestArrivalTime[departureLocation.id];\n        if (!bestArrivalTimesOfDepartureStop) {\n            return true;\n        }\n        const bestArrivalTime = bestArrivalTimesOfDepartureStop[arrivalLocation.id];\n        if (!bestArrivalTime) {\n            return true;\n        }\n        return transferProfile.arrivalTime < bestArrivalTime;\n    }\n    setBestArrivalTime(departureLocation, arrivalLocation, arrivalTime) {\n        if (!this.bestArrivalTime[departureLocation.id]) {\n            this.bestArrivalTime[departureLocation.id] = [];\n        }\n        this.bestArrivalTime[departureLocation.id][arrivalLocation.id] = arrivalTime;\n    }\n    async extractJourney(departureLocation, arrivalLocation, transferProfile, transfers, profilesByStop) {\n        const path = Path_1.default.create();\n        let currentTransferProfile = transferProfile;\n        let departureTime = transferProfile.departureTime;\n        let remainingTransfers = transfers;\n        let currentLocation = departureLocation;\n        while (remainingTransfers >= 0) {\n            const enterConnection = currentTransferProfile.enterConnection;\n            const exitConnection = currentTransferProfile.exitConnection;\n            const enterLocation = await this.locationResolver.resolve(enterConnection.departureStop);\n            const exitLocation = await this.locationResolver.resolve(exitConnection.arrivalStop);\n            // Initial or transfer footpath.\n            const transferDepartureTime = enterConnection.departureTime.getTime();\n            if (departureTime !== transferDepartureTime) {\n                let timeToSubtract = 0;\n                if (path.legs.length > 0) {\n                    timeToSubtract = departureTime - path.legs[path.legs.length - 1].getStopTime().getTime();\n                }\n                const footpath = Step_1.default.create(currentLocation, enterLocation, {\n                    minimum: transferDepartureTime - departureTime,\n                }, null, new Date(departureTime - timeToSubtract), new Date(transferDepartureTime - timeToSubtract));\n                const footpathLeg = new Leg_1.default(TravelMode_1.default.Walking, [footpath]);\n                path.appendLeg(footpathLeg);\n            }\n            // Public transport step.\n            const step = Step_1.default.createFromConnections(enterConnection, exitConnection);\n            step.startLocation = enterLocation;\n            step.stopLocation = exitLocation;\n            const leg = new Leg_1.default(exitConnection.travelMode, [step]);\n            path.appendLeg(leg);\n            currentLocation = exitLocation;\n            remainingTransfers--;\n            // Stop if we already arrived.\n            if (path.legs[path.legs.length - 1].getStopLocation().id === arrivalLocation.id) {\n                break;\n            }\n            // Get next profile based on the arrival time at the current location.\n            if (remainingTransfers >= 0) {\n                const currentProfiles = profilesByStop[currentLocation.id];\n                let profileIndex = currentProfiles.length - 1;\n                currentTransferProfile = currentProfiles[profileIndex].transferProfiles[remainingTransfers];\n                departureTime = currentTransferProfile.departureTime;\n                while (profileIndex >= 0 && departureTime < exitConnection.arrivalTime.getTime()) {\n                    currentTransferProfile = currentProfiles[--profileIndex].transferProfiles[remainingTransfers];\n                    departureTime = currentTransferProfile.departureTime;\n                }\n                if (profileIndex === -1) {\n                    // This should never happen.\n                    return Promise.reject(\"Can't find next connection\");\n                }\n            }\n            // Final footpath.\n            if (remainingTransfers === -1) {\n                const transferArrivalTime = exitConnection.arrivalTime;\n                const arrivalTime = new Date(currentTransferProfile.arrivalTime);\n                if (arrivalTime.getTime() !== transferArrivalTime.getTime()) {\n                    const footpath = Step_1.default.create(currentLocation, arrivalLocation, {\n                        minimum: arrivalTime.getTime() - transferArrivalTime.getTime(),\n                    }, null, transferArrivalTime, arrivalTime);\n                    const footpathLeg = new Leg_1.default(TravelMode_1.default.Walking, [footpath]);\n                    path.appendLeg(footpathLeg);\n                }\n            }\n        }\n        // Check if path ends in the arrival location.\n        if (path.legs[path.legs.length - 1].getStopLocation().id !== arrivalLocation.id) {\n            // This should never happen.\n            return Promise.reject(\"Can't reach arrival stop:\");\n        }\n        return path;\n    }\n};\nJourneyExtractorProfile = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LocationResolver)),\n    __metadata(\"design:paramtypes\", [Object])\n], JourneyExtractorProfile);\nexports.default = JourneyExtractorProfile;\n//# sourceMappingURL=JourneyExtractorProfile.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst LocationResolverError_1 = __importDefault(require(\"../errors/LocationResolverError\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst LocationResolverDefault_1 = __importDefault(require(\"./LocationResolverDefault\"));\n/**\n * Location resolver that allows stop names as input\n * Falls back to LocationResolverDefault\n */\nlet LocationResolverConvenience = class LocationResolverConvenience {\n    constructor(stopsProvider) {\n        this.stopsProvider = stopsProvider;\n        this.defaultLocationResolver = new LocationResolverDefault_1.default(this.stopsProvider);\n    }\n    async resolve(input) {\n        if (typeof input === \"string\" && !this.isId(input)) {\n            if (input.includes(\"geo:\")) {\n                const expression = /geo:([\\-0-9.]+),([\\-0-9.]+)/;\n                const result = expression.exec(input);\n                if (result && result.length) {\n                    return {\n                        latitude: parseFloat(result[1]),\n                        longitude: parseFloat(result[2]),\n                    };\n                }\n            }\n            this.allStops = await this.stopsProvider.getAllStops();\n            const matchingStop = this.allStops.find((stop) => stop.name === input);\n            if (matchingStop) {\n                return matchingStop;\n            }\n            return Promise.reject(new LocationResolverError_1.default(`Location \"${input}\" is a string, but not an ID and not a valid stop name`));\n        }\n        return this.defaultLocationResolver.resolve(input);\n    }\n    isId(testString) {\n        return testString.indexOf(\"http://\") === 0 || testString.indexOf(\"https://\") === 0;\n    }\n};\nLocationResolverConvenience = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.StopsProvider)),\n    __metadata(\"design:paramtypes\", [Object])\n], LocationResolverConvenience);\nexports.default = LocationResolverConvenience;\n//# sourceMappingURL=LocationResolverConvenience.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction tagParameter(annotationTarget, propertyName, parameterIndex, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED;\n    _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex);\n}\nexports.tagParameter = tagParameter;\nfunction tagProperty(annotationTarget, propertyName, metadata) {\n    var metadataKey = METADATA_KEY.TAGGED_PROP;\n    _tagParameterOrProperty(metadataKey, annotationTarget.constructor, propertyName, metadata);\n}\nexports.tagProperty = tagProperty;\nfunction _tagParameterOrProperty(metadataKey, annotationTarget, propertyName, metadata, parameterIndex) {\n    var paramsOrPropertiesMetadata = {};\n    var isParameterDecorator = (typeof parameterIndex === \"number\");\n    var key = (parameterIndex !== undefined && isParameterDecorator) ? parameterIndex.toString() : propertyName;\n    if (isParameterDecorator && propertyName !== undefined) {\n        throw new Error(ERROR_MSGS.INVALID_DECORATOR_OPERATION);\n    }\n    if (Reflect.hasOwnMetadata(metadataKey, annotationTarget)) {\n        paramsOrPropertiesMetadata = Reflect.getMetadata(metadataKey, annotationTarget);\n    }\n    var paramOrPropertyMetadata = paramsOrPropertiesMetadata[key];\n    if (!Array.isArray(paramOrPropertyMetadata)) {\n        paramOrPropertyMetadata = [];\n    }\n    else {\n        for (var _i = 0, paramOrPropertyMetadata_1 = paramOrPropertyMetadata; _i < paramOrPropertyMetadata_1.length; _i++) {\n            var m = paramOrPropertyMetadata_1[_i];\n            if (m.key === metadata.key) {\n                throw new Error(ERROR_MSGS.DUPLICATED_METADATA + \" \" + m.key.toString());\n            }\n        }\n    }\n    paramOrPropertyMetadata.push(metadata);\n    paramsOrPropertiesMetadata[key] = paramOrPropertyMetadata;\n    Reflect.defineMetadata(metadataKey, paramsOrPropertiesMetadata, annotationTarget);\n}\nfunction _decorate(decorators, target) {\n    Reflect.decorate(decorators, target);\n}\nfunction _param(paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); };\n}\nfunction decorate(decorator, target, parameterIndex) {\n    if (typeof parameterIndex === \"number\") {\n        _decorate([_param(parameterIndex, decorator)], target);\n    }\n    else if (typeof parameterIndex === \"string\") {\n        Reflect.decorate([decorator], target, parameterIndex);\n    }\n    else {\n        _decorate([decorator], target);\n    }\n}\nexports.decorate = decorate;\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst ldfetch_1 = __importDefault(require(\"ldfetch\"));\nconst catalog_1 = require(\"../../entities/catalog/catalog\");\nconst dataset_1 = require(\"../../entities/catalog/dataset\");\nconst dataset_distribution_1 = __importDefault(require(\"../../entities/catalog/dataset_distribution\"));\nconst ldloader_1 = require(\"../../loader/ldloader\");\nconst single_1 = require(\"../../loader/views/single\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst constants_1 = require(\"../../uri/constants\");\nconst uri_1 = __importDefault(require(\"../../uri/uri\"));\nlet CatalogFetcherDefault = class CatalogFetcherDefault {\n    constructor(ldFetch) {\n        this.ldFetch = ldFetch;\n        this.ldLoader = new ldloader_1.LDLoader();\n        // unordered collections\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.DCAT, \"distribution\"));\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.DCAT, \"dataset\"));\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.DCAT, \"mediaType\"));\n    }\n    async get(url) {\n        const rdfThing = await this.ldFetch.get(url);\n        const triples = rdfThing.triples;\n        const [profile] = this.ldLoader.process(triples, [\n            this.getView(),\n        ]);\n        profile.id = url;\n        return profile;\n    }\n    getView() {\n        const view = new single_1.ThingView(catalog_1.Catalog.create);\n        view.addFilter((entity) => entity[uri_1.default.inNS(constants_1.DCAT, \"dataset\")] !== undefined);\n        view.addMapping(uri_1.default.inNS(constants_1.DCT, \"publisher\"), \"publisher\");\n        view.addMapping(uri_1.default.inNS(constants_1.DCAT, \"dataset\"), \"datasets\", this.getDatasetView());\n        return view;\n    }\n    getDatasetView() {\n        const view = new single_1.ThingView(dataset_1.Dataset.create);\n        view.addFilter((entity) => entity[uri_1.default.inNS(constants_1.DCAT, \"distribution\")] !== undefined);\n        view.addMapping(uri_1.default.inNS(constants_1.DCT, \"subject\"), \"subject\");\n        view.addMapping(uri_1.default.inNS(constants_1.DCT, \"description\"), \"description\");\n        view.addMapping(uri_1.default.inNS(constants_1.DCT, \"title\"), \"title\");\n        view.addMapping(uri_1.default.inNS(constants_1.DCT, \"spatial\"), \"area\");\n        view.addMapping(uri_1.default.inNS(constants_1.DCAT, \"accessRights\"), \"rights\");\n        view.addMapping(uri_1.default.inNS(constants_1.DCAT, \"distribution\"), \"distributions\", this.getDistributionView());\n        return view;\n    }\n    getDistributionView() {\n        const view = new single_1.ThingView(dataset_distribution_1.default.create);\n        view.addMapping(uri_1.default.inNS(constants_1.DCAT, \"accessURL\"), \"accessUrl\");\n        view.addMapping(uri_1.default.inNS(constants_1.DCAT, \"mediaType\"), \"mediatypes\");\n        return view;\n    }\n};\nCatalogFetcherDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LDFetch)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof ldfetch_1.default !== \"undefined\" && ldfetch_1.default) === \"function\" ? _a : Object])\n], CatalogFetcherDefault);\nexports.default = CatalogFetcherDefault;\n//# sourceMappingURL=CatalogFetcherDefault.js.map","const util = require(\"util\");\nconst q = require('q');\nconst Fetcher = require(\"./NodeHttpFetcher.js\");\nconst N3 = require('n3');\nconst RDFXMLParser = require('rdfxmlprocessor');\nconst {DOMParser} = require('xmldom');\nconst JsonldToRDF = require('./JsonldToRDF');\nconst RDFaToRDF = require('./RDFaToRDF');\nconst NodeHTMLParser = require('./NodeHTMLParser');\nconst jsonld = require('jsonld');\nconst DataFactory = require('@rdfjs/data-model')\n\nconst EventEmitter = require('events');\n/** This is the common part for both browser and NodeJS */\nmodule.exports = class extends EventEmitter {\n  constructor (options) {\n    super();\n    this.prefixes = {};\n    //We like quads, so preference to serializations that we can parse fast with quads\n    //Then comes JSON-LD, which is slower to parse\n    //Then comes rdf/xml, turtle and n-triples, which we support in a fast manner, but it doesnt contain named graphs\n    //We also support HTML, but thats really slow\n    //We also support N3 and parse it quite fast, but we wont do anything special with the N3 rules, so put it to low q\n    var accept = 'application/trig;q=1.0,application/n-quads,application/ld+json;q=.9,application/rdf+xml;q=.8,text/turtle,application/n-triples';\n    if (options && options.headers) {\n      this.fetcher = new Fetcher(accept, options.headers);\n    } else {\n      this.fetcher = new Fetcher(accept);\n    }\n    //forward events on this class\n    this.fetcher.on(\"cache-miss\", obj => {\n      this.emit(\"cache-miss\",obj);\n    });\n    this.fetcher.on(\"cache-hit\", obj => {\n      this.emit(\"cache-hit\",obj);\n    });\n    this.fetcher.on(\"downloaded\", obj => {\n      this.emit(\"downloaded\",obj);\n    });\n  }\n\n  async frame (triples, frame) {\n    if (typeof triples === 'string') {\n      triples = await this.get(triples).then(response => {\n        return response.triples;\n      });\n    }\n    var objects = {\"@graph\": []};\n    var graphs = {};\n    for (var triple of triples) {\n      //Json-LD lib uses underscores when blanknode\n      if (triple.subject.termType === 'BlankNode') {\n        triple.subject.value = '_:' + triple.subject.value;\n      }\n      if (triple.predicate.termType === 'BlankNode') {\n        triple.predicate.value = '_:' + triple.predicate.value;\n      }\n      if (triple.object.termType === 'BlankNode') {\n        triple.object.value = '_:' + triple.object.value;\n      }\n      if (triple.graph.termType === 'BlankNode') {\n        triple.graph.value = '_:' + triple.graph.value;\n      }\n      if (triple.graph.value && !graphs[triple.graph.value])\n        graphs[triple.graph.value] = {\"@id\": triple.graph.value, \"@graph\" : []};\n      var obj = {\n        \"@id\" : triple.subject.value,  \n      };\n      if (triple.object.termType === 'Literal') {\n        obj[triple.predicate.value] = {\"@value\" : triple.object.value};\n        if (triple.predicate.language)\n          obj[triple.predicate.value][\"@language\"] = triple.object.language;\n        if (triple.object.datatype)\n          obj[triple.predicate.value][\"@type\"] = triple.object.datatype.value;\n      } else if (triple.predicate.value === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type') {\n        obj[\"@type\"] = triple.object.value;\n      } else {\n        obj[triple.predicate.value] = {\"@id\": triple.object.value};\n      }\n      if (!triple.graph.value) {\n        objects[\"@graph\"].push(obj);\n      } else {\n        graphs[triple.graph.value][\"@graph\"].push(obj);\n      }\n    }\n    objects[\"@graph\"].push(Object.values(graphs));\n    return jsonld.frame(objects, frame);\n  }\n\n  addPrefix (prefix, uri) {\n    this.prefixes[prefix] = uri;\n  }\n\n  getCacheStats () {\n    return this.fetcher.getCacheStats();\n  }\n  \n  get (url) {\n    this.emit('request', url);\n    return this.fetcher.get(url).then((response) => {\n      if (url !== response.url) {\n        this.emit('redirect',{'from': url, 'to': response.url});\n      }\n      this.emit('response', response.url);\n      var triples = [], prefixes = {}, promise = q.defer();\n      if (response.type === 'application/ld+json' || response.type === 'application/json') {\n        var parser = new JsonldToRDF({documentIRI: response.url, factory: DataFactory});\n        parser.parse(response.body, (error, triple, newPrefixes) => {\n          this.emit('parsed', response.url);\n          if (error) {\n            promise.reject(error);\n          } else if (triple) {\n            triples.push(triple);\n          } else {\n            prefixes = Object.assign(this.prefixes, prefixes);\n            promise.resolve({ triples,\n                              prefixes,\n                              statusCode: response.statusCode,\n                              url : response.url});\n          }\n          if (newPrefixes) {\n            prefixes = Object.assign(prefixes, newPrefixes);\n          }\n        });\n        return promise.promise;\n      } else if (response.type === 'text/html') {\n        var promises = [];\n        var promiseIndex = 0;\n\n        //Parses extra JSON-LD snippets in the page\n        var document = NodeHTMLParser(response.body, response.url); //In the browser, this is replaced with BrowserHTMLParser\n        var jsonldscriptelements = document.querySelectorAll(\"script[type*='application/ld+json']\");\n        \n        for (var index = 0; index < jsonldscriptelements.length; index++) {\n          var tag = jsonldscriptelements[index];\n          //TODO: what if there is no textContent and there is an src tag instead? Should this be supported?\n          promises[index] = q.defer();\n          var newTriples = [];\n          (new JsonldToRDF({documentIRI: response.url})).parse(tag.textContent, (error, triple, newPrefixes) => {\n            if (triple) {\n              triples.push(triple);\n            } else if (error) {\n              //If theres an error in this promise, just resolve it without anything else\n              console.error('WARNING: an error was given while processing a JSON-LD snippet: ', error );\n              promises[promiseIndex].resolve();\n              promiseIndex++;\n            } else {\n              //Success! Lets resolve it.\n              promises[promiseIndex].resolve();\n              promiseIndex++;\n            }\n          });\n        }\n        //Parses the RDFa\n        var parser = new RDFaToRDF({documentIRI: response.url, factory: DataFactory});\n        parser.parse(document, (error, triple, newPrefixes) => {\n          this.emit('parsed', response.url);\n          if (error) {\n            promise.reject(error);\n          } else if (triple) {\n            triples.push(triple);\n          } else {\n            prefixes = Object.assign(this.prefixes, prefixes);\n            promise.resolve();\n          }\n          if (newPrefixes) {\n            prefixes = Object.assign(prefixes, newPrefixes);\n          }\n        });\n        var promises2 = [promise].concat(promises).map(promise => {return promise.promise});\n        return q.all(promises2).then(() => {\n          return { triples,\n                   prefixes,\n                   statusCode: response.statusCode,\n                   url : response.url};\n        });\n      } else if ([\"application/trig\",\"application/n-quads\",\"text/turtle\",\"application/n-triples\",\"text/n3\"].indexOf(response.type.toLowerCase()) > -1) {\n        //Parse N3, text/turtle, N-Quads, n-triples or trig\n        var parser = new N3.Parser({documentIRI: response.url, factory: DataFactory});\n        parser.parse(response.body, (error, triple, newPrefixes) => {\n          this.emit(\"parsed\", response.url);\n          if (error) {\n            promise.reject(error);\n          } else if (triple) {\n            triples.push(triple);\n          } else {\n            prefixes = Object.assign(prefixes, this.prefixes);\n            promise.resolve({ triples: triples,\n                              prefixes: prefixes,\n                              statusCode: response.statusCode,\n                              url : response.url});\n          }\n          if (newPrefixes) {\n            prefixes = Object.assign(prefixes, newPrefixes);\n          }\n        });\n      } else if ([\"application/rdf+xml\"].indexOf(response.type.toLowerCase()) > -1) {\n        //RDFXML\n        var parser = new RDFXMLParser();\n        //both base and graphname to the response url\n        parser.parse(new DOMParser().parseFromString(response.body), response.url, response.url, (triple) => {\n          this.emit(\"parsed\", response.url);\n          if (triple) {\n            triples.push(triple);\n          } else {\n            promise.resolve({ triples: triples,\n                              statusCode: response.statusCode,\n                              url : response.url});\n          }\n        });\n      } else {\n        //No parser found -- TODO: lets try any parser until we find triples! The fastest first, the slowest last.\n        \n        //Just resolve the promise\n        promise.resolve({\n          statusCode: response.statusCode,\n          triples: triples,\n          prefixes: prefixes,\n          url : response.url,\n          error: 'Cannot parse ' + response.type\n        });\n      }\n      return promise.promise;\n    });\n  }\n};\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nlet CatalogProviderDefault = class CatalogProviderDefault {\n    constructor(fetcher) {\n        this.catalogs = {};\n        this.fetcher = fetcher;\n    }\n    getCatalog(catalogId) {\n        if (this.catalogs[catalogId] === undefined) {\n            this.catalogs[catalogId] = this.fetcher.get(catalogId);\n        }\n        return this.catalogs[catalogId];\n    }\n    getCatalogs() {\n        return Promise.all(Object.values(this.catalogs));\n    }\n};\nCatalogProviderDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.CatalogFetcher)),\n    __metadata(\"design:paramtypes\", [Object])\n], CatalogProviderDefault);\nexports.default = CatalogProviderDefault;\n//# sourceMappingURL=CatalogProviderDefault.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"isomorphic-fetch\");\nrequire(\"reflect-metadata\");\n// classes\nconst main_1 = __importDefault(require(\"./analytics/isochrones/main\"));\nconst main_2 = __importDefault(require(\"./analytics/traffic/main\"));\n// functions\nconst create_1 = __importDefault(require(\"./create\"));\nconst classify_1 = __importDefault(require(\"./data/classify\"));\n// instances\nconst RoutableTileRegistry_1 = __importDefault(require(\"./entities/tiles/RoutableTileRegistry\"));\nconst EventBus_1 = __importDefault(require(\"./events/EventBus\"));\n// enums\nconst Datatypes_1 = __importDefault(require(\"./data/Datatypes\"));\nconst TravelMode_1 = __importDefault(require(\"./enums/TravelMode\"));\nconst EventType_1 = __importDefault(require(\"./events/EventType\"));\nconst QueryMode_1 = __importDefault(require(\"./QueryMode\"));\nconst Units_1 = __importDefault(require(\"./util/Units\"));\n//\n// EXPORTS\n//\n// planners\nconst DissectPlanner_1 = __importDefault(require(\"./planner/configurations/DissectPlanner\"));\nconst FlexibleProfileTransitPlanner_1 = __importDefault(require(\"./planner/configurations/FlexibleProfileTransitPlanner\"));\nconst FlexibleRoadPlanner_1 = __importDefault(require(\"./planner/configurations/FlexibleRoadPlanner\"));\nconst FlexibleTransitPlanner_1 = __importDefault(require(\"./planner/configurations/FlexibleTransitPlanner\"));\nconst GeospatialFragmentedPlanner_1 = __importDefault(require(\"./planner/configurations/GeospatialFragmentedPlanner\"));\nconst ReducedCarPlanner_1 = __importDefault(require(\"./planner/configurations/ReducedCarPlanner\"));\nconst TriangleTransitPlanner_1 = __importDefault(require(\"./planner/configurations/TriangleTransitPlanner\"));\nconst ZoiDemoPlanner_1 = __importDefault(require(\"./planner/configurations/ZoiDemoPlanner\"));\n// classes\nvar main_3 = require(\"./analytics/isochrones/main\");\nexports.IsochroneGenerator = main_3.default;\nvar main_4 = require(\"./analytics/traffic/main\");\nexports.TrafficEstimator = main_4.default;\n// functions\nvar create_2 = require(\"./create\");\nexports.createPlanner = create_2.default;\nvar classify_2 = require(\"./data/classify\");\nexports.classifyDataSource = classify_2.default;\n// instances\nexports.EventBus = EventBus_1.default.getInstance();\nexports.RoutableTileRegistry = RoutableTileRegistry_1.default.getInstance();\n// enums\nvar Datatypes_2 = require(\"./data/Datatypes\");\nexports.DataType = Datatypes_2.default;\nvar TravelMode_2 = require(\"./enums/TravelMode\");\nexports.TravelMode = TravelMode_2.default;\nvar EventType_2 = require(\"./events/EventType\");\nexports.EventType = EventType_2.default;\nvar QueryMode_2 = require(\"./QueryMode\");\nexports.QueryMode = QueryMode_2.default;\nvar Units_2 = require(\"./util/Units\");\nexports.Units = Units_2.default;\n// planners\nvar DissectPlanner_2 = require(\"./planner/configurations/DissectPlanner\");\nexports.DissectPlanner = DissectPlanner_2.default;\nvar FlexibleProfileTransitPlanner_2 = require(\"./planner/configurations/FlexibleProfileTransitPlanner\");\nexports.FlexibleProfileTransitPlanner = FlexibleProfileTransitPlanner_2.default;\nvar FlexibleRoadPlanner_2 = require(\"./planner/configurations/FlexibleRoadPlanner\");\nexports.FlexibleRoadPlanner = FlexibleRoadPlanner_2.default;\nvar FlexibleTransitPlanner_2 = require(\"./planner/configurations/FlexibleTransitPlanner\");\nexports.FlexibleTransitPlanner = FlexibleTransitPlanner_2.default;\nvar GeospatialFragmentedPlanner_2 = require(\"./planner/configurations/GeospatialFragmentedPlanner\");\nexports.GeospatialFragmentedPlanner = GeospatialFragmentedPlanner_2.default;\nvar ReducedCarPlanner_2 = require(\"./planner/configurations/ReducedCarPlanner\");\nexports.ReducedCarPlanner = ReducedCarPlanner_2.default;\nvar TriangleTransitPlanner_2 = require(\"./planner/configurations/TriangleTransitPlanner\");\nexports.TriangleTransitPlanner = TriangleTransitPlanner_2.default;\nvar ZoiDemoPlanner_2 = require(\"./planner/configurations/ZoiDemoPlanner\");\nexports.ZoiDemoPlanner = ZoiDemoPlanner_2.default;\nexports.default = {\n    // classes\n    IsochroneGenerator: main_1.default,\n    TrafficEstimator: main_2.default,\n    // functions\n    classifyDataSource: classify_1.default,\n    createPlanner: create_1.default,\n    // instances\n    RoutableTileRegistry: exports.RoutableTileRegistry,\n    EventBus: exports.EventBus,\n    // enums\n    TravelMode: TravelMode_1.default,\n    EventType: EventType_1.default,\n    Units: Units_1.default,\n    QueryMode: QueryMode_1.default,\n    DataType: Datatypes_1.default,\n    // planners\n    DissectPlanner: DissectPlanner_1.default,\n    FlexibleProfileTransitPlanner: FlexibleProfileTransitPlanner_1.default,\n    FlexibleRoadPlanner: FlexibleRoadPlanner_1.default,\n    FlexibleTransitPlanner: FlexibleTransitPlanner_1.default,\n    GeospatialFragmentedPlanner: GeospatialFragmentedPlanner_1.default,\n    ReducedCarPlanner: // experimental\n    ReducedCarPlanner_1.default,\n    TriangleTransitPlanner: TriangleTransitPlanner_1.default,\n    ZoiDemoPlanner: ZoiDemoPlanner_1.default,\n};\n//# sourceMappingURL=index.js.map","var superPropBase = require(\"./superPropBase\");\n\nfunction _get(target, property, receiver) {\n  if (typeof Reflect !== \"undefined\" && Reflect.get) {\n    module.exports = _get = Reflect.get;\n  } else {\n    module.exports = _get = function _get(target, property, receiver) {\n      var base = superPropBase(target, property);\n      if (!base) return;\n      var desc = Object.getOwnPropertyDescriptor(base, property);\n\n      if (desc.get) {\n        return desc.get.call(receiver);\n      }\n\n      return desc.value;\n    };\n  }\n\n  return _get(target, property, receiver || target);\n}\n\nmodule.exports = _get;","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst inversify_1 = require(\"inversify\");\nconst tiles_in_bbox_1 = __importDefault(require(\"tiles-in-bbox\"));\nconst RoutableTileRegistry_1 = __importDefault(require(\"../../entities/tiles/RoutableTileRegistry\"));\nconst TileCoordinate_1 = __importDefault(require(\"../../entities/tiles/TileCoordinate\"));\nconst RoutingPhase_1 = __importDefault(require(\"../../enums/RoutingPhase\"));\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../../pathfinding/PathfinderProvider\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst Tiles_1 = require(\"../../util/Tiles\");\nconst Leg_1 = __importDefault(require(\"../Leg\"));\nconst Path_1 = __importDefault(require(\"../Path\"));\n/*\n      ,-----------.          ,------------------.\n      |RoadPlanner|          |PathfinderProvider|\n      `-----+-----'          `--------+---------'\n plan(query)|                         |\n ----------->                         |\n            |                         |\n   ,-----------------!.               |\n   |See other diagram|_\\              |\n   `-------------------'              |\n            |----.                    |\n            |    | fetchTile          |\n            |<---'                    |\n            |                         |\n            |    ,------------------------------------------!.\n            |    |Connect begin/end location to road network|_\\\n            |    `--------------------------------------------'\n            |      embedLocation      |\n            | ------------------------>\n            |                         |\n            |                         |              ,-------------------------------!.\n            |                         |              |Contains the pathfinding state,|_\\\n            |                         |              |which is query-specific          |\n            |                         |              `---------------------------------'\n            |                  queryPath                   ,--------------------.\n            | -------------------------------------------->|ShortestPathInstance|\n            |                         |                    `--------------------'\n            |                         |\n*/\n/*\n         ,-----------.          ,--------------------.                          ,------------------.\n         |RoadPlanner|          |RoutableTileProvider|                          |PathfinderProvider|\n         `-----+-----'          `---------+----------'                          `--------+---------'\n   fetchTile   |                          |                                              |\n ------------->|                          |                                              |\n               |                          |                                              |\n               |           get            |                                              |\n               |------------------------->|                                              |\n               |                          |                                              |\n               |                          |         ,--------------------------!.        |\n               |                          |         |Boundary nodes lie outside|_\\       |\n               |                          |         |the tile's bounding box     |       |\n               |                          |         `----------------------------'       |\n               |              get_boundary_nodes                ,----.                   |\n               |----------------------------------------------> |Tile|                   |\n               |                          |                     `----'                   |\n  ,------------------------!.             |                       |                      |\n  |Call this function again|_\\            |                       |                      |\n  |when pathfinding reaches  |            |                       |                      |\n  |a boundary node           |            |                       |                      |\n  `--------------------------'            |                       |                      |\n               |             add_breakpoint(boundary_node, this.fetchTile)               |\n               |------------------------------------------------------------------------>|\n               |                          |                       |                      |\n               |                          |                       |                      |\n*/\nlet RoadPlannerPathfinding = class RoadPlannerPathfinding {\n    constructor(tileProvider, pathfinderProvider, profileProvider, locationResolver) {\n        this.tileProvider = tileProvider;\n        this.pathfinderProvider = pathfinderProvider;\n        this.profileProvider = profileProvider;\n        this.locationResolver = locationResolver;\n        this.registry = RoutableTileRegistry_1.default.getInstance();\n        this.eventBus = EventBus_1.default.getInstance();\n        this.reachedTiles = new Set();\n    }\n    async plan(query) {\n        const { from: fromLocations, to: toLocations, profileID, } = query;\n        const paths = [];\n        const profile = await this.profileProvider.getProfile(profileID);\n        if (fromLocations && toLocations && fromLocations.length && toLocations.length) {\n            for (const from of fromLocations) {\n                for (const to of toLocations) {\n                    const newPath = await this.getPathBetweenLocations(from, to, profile);\n                    if (newPath) {\n                        paths.push(newPath);\n                    }\n                }\n            }\n        }\n        return new asynciterator_1.ArrayIterator(paths);\n    }\n    async getPathBetweenLocations(from, to, profile) {\n        await Promise.all([\n            this.embedLocation(from),\n            this.embedLocation(to, true),\n        ]);\n        return this._innerPath(from, to, profile);\n    }\n    async _innerPath(start, stop, profile) {\n        const pathfinder = await this.pathfinderProvider.getShortestPathAlgorithm(profile);\n        const maxDistance = Geo_1.default.getDistanceBetweenLocations(start, stop) * 10 + 1000;\n        const path = await pathfinder.queryPath(Geo_1.default.getId(start), Geo_1.default.getId(stop), maxDistance);\n        const steps = [];\n        const context = {};\n        for (const step of path) {\n            const to = await this.locationResolver.resolve(step.to);\n            const from = await this.locationResolver.resolve(step.from);\n            steps.push({\n                startLocation: from,\n                stopLocation: to,\n                through: step.through,\n                duration: { average: step.duration },\n                distance: step.distance,\n            });\n            if (step.through) {\n                context[step.through] = this.registry.getWay(step.through);\n            }\n        }\n        const leg = new Leg_1.default(TravelMode_1.default.Profile, steps);\n        return new Path_1.default([leg], context);\n    }\n    async fetchTile(coordinate) {\n        const tileId = this.tileProvider.getIdForTileCoords(coordinate);\n        if (!this.reachedTiles.has(tileId)) {\n            const tile = await this.tileProvider.getByTileCoords(coordinate);\n            this.eventBus.emit(EventType_1.default.ReachableTile, coordinate);\n            this.reachedTiles.add(tileId);\n            const boundaryNodes = new Set();\n            for (const nodeId of tile.getNodes()) {\n                const node = this.registry.getNode(nodeId);\n                if (!tile.contains(node)) {\n                    boundaryNodes.add(nodeId);\n                }\n            }\n            const self = this;\n            for (const profile of await this.profileProvider.getProfiles()) {\n                const pathfinder = this.pathfinderProvider.getShortestPathAlgorithm(profile);\n                for (const nodeId of boundaryNodes) {\n                    pathfinder.setBreakPoint(nodeId, async (on) => {\n                        const node = self.registry.getNode(on);\n                        const boundaryTileCoordinate = Tiles_1.toTileCoordinate(node.latitude, node.longitude);\n                        await self.fetchTile(boundaryTileCoordinate);\n                    });\n                }\n            }\n        }\n    }\n    async embedLocation(from, invert = false) {\n        const zoom = 14;\n        const padding = 0.005;\n        const fromBBox = {\n            top: from.latitude + padding,\n            bottom: from.latitude - padding,\n            left: from.longitude - padding,\n            right: from.longitude + padding,\n        };\n        const fromTileCoords = tiles_in_bbox_1.default.tilesInBbox(fromBBox, zoom).map((obj) => {\n            const coordinate = new TileCoordinate_1.default(zoom, obj.x, obj.y);\n            this.fetchTile(coordinate);\n            return coordinate;\n        });\n        // this won't download anything new\n        // but we need the tile data to embed the starting location\n        const fromTileset = await this.tileProvider.getMultipleByTileCoords(fromTileCoords);\n        await this.pathfinderProvider.embedLocation(from, fromTileset, invert);\n    }\n};\nRoadPlannerPathfinding = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.RoutableTileProvider)),\n    __param(0, inversify_1.tagged(\"phase\", RoutingPhase_1.default.Base)),\n    __param(1, inversify_1.inject(types_1.default.PathfinderProvider)),\n    __param(2, inversify_1.inject(types_1.default.ProfileProvider)),\n    __param(3, inversify_1.inject(types_1.default.LocationResolver)),\n    __metadata(\"design:paramtypes\", [Object, PathfinderProvider_1.default, Object, Object])\n], RoadPlannerPathfinding);\nexports.default = RoadPlannerPathfinding;\n//# sourceMappingURL=RoadPlannerPathfinding.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst d3_delaunay_1 = require(\"d3-delaunay\");\nconst inversify_1 = require(\"inversify\");\nconst ReachableStopsFinderMode_1 = __importDefault(require(\"../../enums/ReachableStopsFinderMode\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Iterators_1 = __importDefault(require(\"../../util/Iterators\"));\nlet ReachableStopsFinderDelaunay = class ReachableStopsFinderDelaunay {\n    constructor(stopsProvider, roadPlanner) {\n        this.stopsProvider = stopsProvider;\n        this.roadPlanner = roadPlanner;\n        this.prepare();\n    }\n    async findReachableStops(location, mode, maximumDuration, minimumSpeed, profileID) {\n        const minimumDepartureTime = new Date();\n        const maximumArrivalTime = new Date(minimumDepartureTime.getTime() + maximumDuration);\n        const baseProp = mode === ReachableStopsFinderMode_1.default.Target ? \"to\" : \"from\";\n        const otherProp = mode === ReachableStopsFinderMode_1.default.Target ? \"from\" : \"to\";\n        const baseQuery = {\n            [baseProp]: [location],\n            minimumDepartureTime,\n            maximumArrivalTime,\n            minimumWalkingSpeed: minimumSpeed,\n            profileID,\n        };\n        const stopsNearCell = await this.getNearbyStops(location);\n        const reachableStops = [];\n        await Promise.all(stopsNearCell.map(async (possibleTarget) => {\n            const query = Object.assign({}, baseQuery, {\n                [otherProp]: [possibleTarget],\n            });\n            const pathIterator = await this.roadPlanner.plan(query);\n            const durationIterator = pathIterator.map((path) => path.legs.reduce((totalDuration, step) => totalDuration + step.getAverageDuration(), 0));\n            const durations = await Iterators_1.default.toArray(durationIterator);\n            if (durations.length) {\n                const shortestDuration = Math.min(...durations);\n                reachableStops.push({ stop: possibleTarget, duration: shortestDuration });\n            }\n        }));\n        return reachableStops;\n    }\n    async getNearbyStops(location) {\n        if (!this.triangles) {\n            await this.prepare();\n        }\n        const cell = this.triangles.find(location.longitude, location.latitude);\n        const result = [this.trianglePoints[cell]];\n        // not including these for now\n        // may result in large route network queries if the stops network is sparse\n        /*\n        const neighbors = this.triangles.neighbors(cell);\n        for (const neighbor of neighbors) {\n          const neighborLocation = this.trianglePoints[neighbor];\n          if (Geo.getDistanceBetweenLocations(location, neighborLocation) < 2500) {\n            result.push(neighborLocation);\n          }\n        }\n        */\n        return result;\n    }\n    async prepare() {\n        this.trianglePoints = await this.stopsProvider.getAllStops();\n        if (this.trianglePoints && this.trianglePoints.length) {\n            function getX(p) {\n                return p.longitude;\n            }\n            function getY(p) {\n                return p.latitude;\n            }\n            this.triangles = d3_delaunay_1.Delaunay.from(this.trianglePoints, getX, getY);\n        }\n    }\n};\nReachableStopsFinderDelaunay = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.StopsProvider)),\n    __param(1, inversify_1.inject(types_1.default.RoadPlanner)),\n    __metadata(\"design:paramtypes\", [Object, Object])\n], ReachableStopsFinderDelaunay);\nexports.default = ReachableStopsFinderDelaunay;\n//# sourceMappingURL=ReachableStopsFinderDelaunay.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Utility class with calculation functions dealing with [[DistanceM]], [[DurationMs]] and [[SpeedKmH]]\n */\nclass Units {\n    static toSpeed(distance, duration) {\n        return (distance / duration) * 3600;\n    }\n    static toDistance(duration, speed) {\n        return (speed * duration) / 3600;\n    }\n    static toDuration(distance, speed) {\n        // tslint:disable-next-line:no-bitwise\n        return ((distance / speed) * 3600 | 0);\n    }\n    static fromHours(hours) {\n        return hours * 3600000;\n    }\n    static fromMinutes(minutes) {\n        return minutes * 60000;\n    }\n    static fromSeconds(seconds) {\n        return seconds * 1000;\n    }\n}\nexports.default = Units;\n//# sourceMappingURL=Units.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst asynciterator_promiseproxy_1 = require(\"asynciterator-promiseproxy\");\nconst default_1 = __importDefault(require(\"../../configs/default\"));\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst constants_1 = require(\"../../uri/constants\");\nconst uri_1 = __importDefault(require(\"../../uri/uri\"));\nconst Iterators_1 = __importDefault(require(\"../../util/Iterators\"));\nconst Units_1 = __importDefault(require(\"../../util/Units\"));\nconst Path_1 = __importDefault(require(\"../Path\"));\n/*\n          ,-.\n          `-'\n          /|\\\n           |                ,-------.             ,-----------.\n          / \\               |Planner|             |QueryRunner|\n      Application           `---+---'             `-----+-----'\n           |       query        |                       |\n           |------------------->|                       |\n           |                    |                       |\n           |                    |      run(query)       |\n           |                    |---------------------->|\n           |                    |                       |\n           |                    |           ,----------------------!.\n           |                    |           |Resolve ids to objects|_\\\n           |                    |           `------------------------'\n           |                    |                       ----.\n           |                    |                           | resolveQuery(query)\n           |                    |                       <---'\n           |                    |                       |\n           |           ,---------------------------------------------------------------!.\n           |           |Query is delegated to RoadPlanner or PublicTransportPlanner now|_\\\n           |           `-----------------------------------------------------------------'\n          ,-----------------------------------------!.  |\n          |Add context, intermediate path steps, ...|_\\ |\n          `-------------------------------------------' |\n           |                    ----.                   |\n           |                        | completePath(path)|\n           |                    <---'                   |\n           |                    |                       |\n           |                    |                       |\n\n*/\n/**\n * Allows to ask route planning queries. Emits events defined in [[EventType]]\n */\nclass Planner {\n    /**\n     * Initializes a new Planner\n     * @param container The container of dependencies we are working with\n     */\n    constructor(container = default_1.default) {\n        // Store container on context before doing anything else\n        this.context = container.get(types_1.default.Context);\n        this.context.setContainer(container);\n        this.queryRunner = container.get(types_1.default.QueryRunner);\n        this.profileProvider = container.get(types_1.default.ProfileProvider);\n        this.eventBus = EventBus_1.default.getInstance();\n        this.roadPlanner = container.get(types_1.default.RoadPlanner);\n        this.connectionsProvider = container.get(types_1.default.ConnectionsProvider);\n        this.catalogProvider = container.get(types_1.default.CatalogProvider);\n        this.stopsProvider = container.get(types_1.default.StopsProvider);\n        this.locationResolver = container.get(types_1.default.LocationResolver);\n        this.activeProfileID = \"https://hdelva.be/profile/pedestrian\";\n    }\n    addConnectionSource(accessUrl, travelMode = TravelMode_1.default.Train) {\n        this.connectionsProvider.addConnectionSource({ accessUrl, travelMode });\n    }\n    addStopSource(accessUrl) {\n        this.stopsProvider.addStopSource({ accessUrl });\n    }\n    getConnectionSources() {\n        return this.connectionsProvider.getSources();\n    }\n    getStopsSources() {\n        return this.stopsProvider.getSources();\n    }\n    async addCatalogSource(accessUrl) {\n        const catalog = await this.catalogProvider.getCatalog(accessUrl);\n        for (const dataset of catalog.datasets) {\n            for (const distribution of dataset.distributions) {\n                if (dataset.subject === uri_1.default.inNS(constants_1.LC, \"Connection\")) {\n                    this.connectionsProvider.addConnectionSource({ accessUrl: distribution.accessUrl, travelMode: TravelMode_1.default.Train });\n                }\n                else if (dataset.subject === uri_1.default.inNS(constants_1.GTFS, \"Stop\")) {\n                    this.stopsProvider.addStopSource({ accessUrl: distribution.accessUrl });\n                }\n            }\n        }\n    }\n    async completePath(path) {\n        const completePath = Path_1.default.create();\n        let walkingDeparture;\n        let walkingDestination;\n        for (const leg of path.legs) {\n            if (leg.getTravelMode() === TravelMode_1.default.Walking) {\n                if (!walkingDeparture) {\n                    walkingDeparture = leg.getStartLocation();\n                }\n                walkingDestination = leg.getStopLocation();\n            }\n            else {\n                if (walkingDestination) {\n                    const walkingPathIterator = await this.roadPlanner.plan({\n                        from: [walkingDeparture],\n                        to: [walkingDestination],\n                        profileID: this.activeProfileID,\n                    });\n                    const walkingPaths = await Iterators_1.default.toArray(walkingPathIterator);\n                    for (const walkingLeg of walkingPaths[0].legs) {\n                        completePath.appendLeg(walkingLeg);\n                    }\n                    completePath.updateContext(walkingPaths[0].getContext());\n                    walkingDeparture = null;\n                    walkingDestination = null;\n                }\n                completePath.appendLeg(leg);\n            }\n        }\n        if (walkingDestination) {\n            const walkingPathIterator = await this.roadPlanner.plan({\n                from: [walkingDeparture],\n                to: [walkingDestination],\n                profileID: this.activeProfileID,\n            });\n            const walkingPaths = await Iterators_1.default.toArray(walkingPathIterator);\n            for (const walkingLeg of walkingPaths[0].legs) {\n                completePath.appendLeg(walkingLeg);\n            }\n            completePath.updateContext(walkingPaths[0].getContext());\n            walkingDeparture = null;\n            walkingDestination = null;\n        }\n        return completePath;\n    }\n    /**\n     * Given an [[IQuery]], it will evaluate the query and return a promise for an AsyncIterator of [[IPath]] instances\n     * @param query An [[IQuery]] specifying a route planning query\n     * @returns An [[AsyncIterator]] of [[IPath]] instances\n     */\n    query(query) {\n        this.eventBus.emit(EventType_1.default.Query, query);\n        query.profileID = this.activeProfileID;\n        const pathIterator = new asynciterator_promiseproxy_1.PromiseProxyIterator(() => this.queryRunner.run(query));\n        this.eventBus.once(EventType_1.default.AbortQuery, () => {\n            pathIterator.close();\n        });\n        pathIterator.on(\"error\", (e) => {\n            if (e && e.eventType) {\n                this.eventBus.emit(e.eventType, e.message);\n            }\n        });\n        if (query.minimized) {\n            return pathIterator;\n        }\n        const completeIterator = new asynciterator_1.BufferedIterator();\n        pathIterator.on(\"data\", async (path) => {\n            const completePath = await this.completePath(path);\n            completeIterator._push(completePath);\n            if (pathIterator.closed) {\n                completeIterator.close();\n            }\n        });\n        return completeIterator;\n    }\n    prefetchStops() {\n        const container = this.context.getContainer();\n        const stopsProvider = container.get(types_1.default.StopsProvider);\n        if (stopsProvider) {\n            stopsProvider.prefetchStops();\n        }\n    }\n    prefetchConnections(from, to) {\n        this.connectionsProvider.prefetchConnections(from, to);\n    }\n    async setDevelopmentProfile(blob) {\n        const profileID = await this.profileProvider.parseDevelopmentProfile(blob);\n        return this.setProfileID(profileID);\n    }\n    setProfileID(profileID) {\n        this.activeProfileID = profileID;\n        return this;\n    }\n    getAllStops() {\n        // fixme, why is this here?\n        // is this just for visualizations?\n        const container = this.context.getContainer();\n        const stopsProvider = container.get(types_1.default.StopsProvider);\n        if (stopsProvider) {\n            return stopsProvider.getAllStops();\n        }\n        return Promise.reject();\n    }\n    resolveLocation(id) {\n        return this.locationResolver.resolve(id);\n    }\n}\nexports.default = Planner;\nPlanner.Units = Units_1.default;\n//# sourceMappingURL=Planner.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst ldfetch_1 = __importDefault(require(\"ldfetch\"));\nconst __1 = require(\"../..\");\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nlet StopsFetcherRaw = \n// tslint:disable: no-string-literal\nclass StopsFetcherRaw {\n    constructor(ldFetch) {\n        this.ldFetch = ldFetch;\n    }\n    addStopSource(source) {\n        throw new Error(\"Method not implemented.\");\n    }\n    getSources() {\n        return [{ accessUrl: this.accessUrl }];\n    }\n    setAccessUrl(accessUrl) {\n        this.accessUrl = accessUrl;\n    }\n    prefetchStops() {\n        this.ensureStopsLoaded();\n    }\n    async getStopById(stopId) {\n        await this.ensureStopsLoaded();\n        return this.stops[stopId];\n    }\n    async getAllStops() {\n        await this.ensureStopsLoaded();\n        return Object.values(this.stops);\n    }\n    async ensureStopsLoaded() {\n        if (!this.loadPromise && !this.stops) {\n            this.loadStops();\n        }\n        if (this.loadPromise) {\n            await this.loadPromise;\n        }\n    }\n    loadStops() {\n        this.loadPromise = this.getByUrl(this.accessUrl)\n            .then((stops) => {\n            this.stops = stops;\n            this.loadPromise = null;\n        })\n            .catch((reason) => {\n            console.log(reason);\n        });\n    }\n    async getByUrl(url) {\n        const beginTime = new Date();\n        const response = await fetch(url);\n        const responseText = await response.text();\n        const size = this.parseResponseLength(response);\n        const duration = (new Date()).getTime() - beginTime.getTime();\n        const stops = {};\n        if (response.status !== 200) {\n            EventBus_1.default.getInstance().emit(__1.EventType.Warning, `${url} responded with status code ${response.status}`);\n        }\n        if (response.status === 200 && responseText) {\n            const blob = JSON.parse(responseText);\n            for (const entity of blob[\"@graph\"]) {\n                const id = entity[\"@id\"];\n                const latitudeRaw = entity[\"http://www.w3.org/2003/01/geo/wgs84_pos#lat\"] || entity[\"latitude\"];\n                const longitudeRaw = entity[\"http://www.w3.org/2003/01/geo/wgs84_pos#long\"] || entity[\"longitude\"];\n                const stopTimeRaw = entity[\"avgStopTimes\"] || 0;\n                const stop = {\n                    id: entity[\"@id\"],\n                    latitude: parseFloat(latitudeRaw),\n                    longitude: parseFloat(longitudeRaw),\n                    name: entity[\"name\"],\n                    avgStopTimes: parseFloat(stopTimeRaw) * 1000,\n                };\n                stops[id] = stop;\n            }\n        }\n        EventBus_1.default.getInstance().emit(__1.EventType.ResourceFetch, {\n            DataType: __1.DataType.Stops,\n            url,\n            duration,\n            size,\n        });\n        return stops;\n    }\n    parseResponseLength(response) {\n        if (response.headers.get(\"content-length\")) {\n            return parseInt(response.headers.get(\"content-length\"), 10);\n        }\n        else {\n            try {\n                return response.body._chunkSize;\n            }\n            catch (e) {\n                //\n            }\n        }\n    }\n};\nStopsFetcherRaw = __decorate([\n    inversify_1.injectable()\n    // tslint:disable: no-string-literal\n    ,\n    __param(0, inversify_1.inject(types_1.default.LDFetch)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof ldfetch_1.default !== \"undefined\" && ldfetch_1.default) === \"function\" ? _a : Object])\n], StopsFetcherRaw);\nexports.default = StopsFetcherRaw;\n//# sourceMappingURL=StopsFetcherRaw.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar idCounter = 0;\nfunction id() {\n    return idCounter++;\n}\nexports.id = id;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst TileCoordinate_1 = __importDefault(require(\"../entities/tiles/TileCoordinate\"));\nfunction lat_to_tile(lat, zoom) {\n    // from https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames\n    return Math.floor((1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI)\n        / 2 * Math.pow(2, zoom));\n}\nexports.lat_to_tile = lat_to_tile;\nfunction long_to_tile(lon, zoom) {\n    // from https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames\n    return Math.floor((lon + 180) / 360 * Math.pow(2, zoom));\n}\nexports.long_to_tile = long_to_tile;\nfunction toTileCoordinate(lat, long, zoom = 14) {\n    return new TileCoordinate_1.default(zoom, long_to_tile(long, zoom), lat_to_tile(lat, zoom));\n}\nexports.toTileCoordinate = toTileCoordinate;\n//# sourceMappingURL=Tiles.js.map","var scope = (typeof global !== \"undefined\" && global) ||\n            (typeof self !== \"undefined\" && self) ||\n            window;\nvar apply = Function.prototype.apply;\n\n// DOM APIs, for completeness\n\nexports.setTimeout = function() {\n  return new Timeout(apply.call(setTimeout, scope, arguments), clearTimeout);\n};\nexports.setInterval = function() {\n  return new Timeout(apply.call(setInterval, scope, arguments), clearInterval);\n};\nexports.clearTimeout =\nexports.clearInterval = function(timeout) {\n  if (timeout) {\n    timeout.close();\n  }\n};\n\nfunction Timeout(id, clearFn) {\n  this._id = id;\n  this._clearFn = clearFn;\n}\nTimeout.prototype.unref = Timeout.prototype.ref = function() {};\nTimeout.prototype.close = function() {\n  this._clearFn.call(scope, this._id);\n};\n\n// Does not start the time, just sets up the members needed.\nexports.enroll = function(item, msecs) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = msecs;\n};\n\nexports.unenroll = function(item) {\n  clearTimeout(item._idleTimeoutId);\n  item._idleTimeout = -1;\n};\n\nexports._unrefActive = exports.active = function(item) {\n  clearTimeout(item._idleTimeoutId);\n\n  var msecs = item._idleTimeout;\n  if (msecs >= 0) {\n    item._idleTimeoutId = setTimeout(function onTimeout() {\n      if (item._onTimeout)\n        item._onTimeout();\n    }, msecs);\n  }\n};\n\n// setimmediate attaches itself to the global object\nrequire(\"setimmediate\");\n// On some exotic environments, it's not clear which object `setimmediate` was\n// able to install onto.  Search each possibility in the same order as the\n// `setimmediate` library.\nexports.setImmediate = (typeof self !== \"undefined\" && self.setImmediate) ||\n                       (typeof global !== \"undefined\" && global.setImmediate) ||\n                       (this && this.setImmediate);\nexports.clearImmediate = (typeof self !== \"undefined\" && self.clearImmediate) ||\n                         (typeof global !== \"undefined\" && global.clearImmediate) ||\n                         (this && this.clearImmediate);\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a duplex stream is just a stream that is both readable and writable.\n// Since JS doesn't have multiple prototypal inheritance, this class\n// prototypally inherits from Readable, and then parasitically from\n// Writable.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n/*<replacement>*/\nvar objectKeys = Object.keys || function (obj) {\n  var keys = [];\n  for (var key in obj) {\n    keys.push(key);\n  }return keys;\n};\n/*</replacement>*/\n\nmodule.exports = Duplex;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nvar Readable = require('./_stream_readable');\nvar Writable = require('./_stream_writable');\n\nutil.inherits(Duplex, Readable);\n\n{\n  // avoid scope creep, the keys array can then be collected\n  var keys = objectKeys(Writable.prototype);\n  for (var v = 0; v < keys.length; v++) {\n    var method = keys[v];\n    if (!Duplex.prototype[method]) Duplex.prototype[method] = Writable.prototype[method];\n  }\n}\n\nfunction Duplex(options) {\n  if (!(this instanceof Duplex)) return new Duplex(options);\n\n  Readable.call(this, options);\n  Writable.call(this, options);\n\n  if (options && options.readable === false) this.readable = false;\n\n  if (options && options.writable === false) this.writable = false;\n\n  this.allowHalfOpen = true;\n  if (options && options.allowHalfOpen === false) this.allowHalfOpen = false;\n\n  this.once('end', onend);\n}\n\nObject.defineProperty(Duplex.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// the no-half-open enforcer\nfunction onend() {\n  // if we allow half-open state, or if the writable side ended,\n  // then we're ok.\n  if (this.allowHalfOpen || this._writableState.ended) return;\n\n  // no more data can be written.\n  // But allow more writes to happen in this tick.\n  pna.nextTick(onEndNT, this);\n}\n\nfunction onEndNT(self) {\n  self.end();\n}\n\nObject.defineProperty(Duplex.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed && this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (this._readableState === undefined || this._writableState === undefined) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n    this._writableState.destroyed = value;\n  }\n});\n\nDuplex.prototype._destroy = function (err, cb) {\n  this.push(null);\n  this.end();\n\n  pna.nextTick(cb, err);\n};","/*\n * Copyright (c) 2016-2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst api = {};\nmodule.exports = api;\n\n// define setImmediate and nextTick\n//// nextTick implementation with browser-compatible fallback ////\n// from https://github.com/caolan/async/blob/master/lib/async.js\n\n// capture the global reference to guard against fakeTimer mocks\nconst _setImmediate = typeof setImmediate === 'function' && setImmediate;\n\nconst _delay = _setImmediate ?\n  // not a direct alias (for IE10 compatibility)\n  fn => _setImmediate(fn) :\n  fn => setTimeout(fn, 0);\n\nif(typeof process === 'object' && typeof process.nextTick === 'function') {\n  api.nextTick = process.nextTick;\n} else {\n  api.nextTick = _delay;\n}\napi.setImmediate = _setImmediate ? _delay : api.nextTick;\n\n/**\n * Clones an object, array, or string/number. If a typed JavaScript object\n * is given, such as a Date, it will be converted to a string.\n *\n * @param value the value to clone.\n *\n * @return the cloned value.\n */\napi.clone = function(value) {\n  if(value && typeof value === 'object') {\n    let rval;\n    if(Array.isArray(value)) {\n      rval = [];\n      for(let i = 0; i < value.length; ++i) {\n        rval[i] = api.clone(value[i]);\n      }\n    } else if(api.isObject(value)) {\n      rval = {};\n      for(const key in value) {\n        rval[key] = api.clone(value[key]);\n      }\n    } else {\n      rval = value.toString();\n    }\n    return rval;\n  }\n  return value;\n};\n\n/**\n * Returns true if the given value is an Object.\n *\n * @param v the value to check.\n *\n * @return true if the value is an Object, false if not.\n */\napi.isObject = v => Object.prototype.toString.call(v) === '[object Object]';\n\n/**\n * Returns true if the given value is undefined.\n *\n * @param v the value to check.\n *\n * @return true if the value is undefined, false if not.\n */\napi.isUndefined = v => typeof v === 'undefined';\n\napi.callbackify = fn => {\n  return async function(...args) {\n    const callback = args[args.length - 1];\n    if(typeof callback === 'function') {\n      args.pop();\n    }\n\n    let result;\n    try {\n      result = await fn.apply(null, args);\n    } catch(e) {\n      if(typeof callback === 'function') {\n        return _invokeCallback(callback, e);\n      }\n      throw e;\n    }\n\n    if(typeof callback === 'function') {\n      return _invokeCallback(callback, null, result);\n    }\n\n    return result;\n  };\n};\n\nfunction _invokeCallback(callback, err, result) {\n  try {\n    return callback(err, result);\n  } catch(unhandledError) {\n    // throw unhandled errors to prevent \"unhandled rejected promise\"\n    // and simulate what would have happened in a promiseless API\n    process.nextTick(() => {\n      throw unhandledError;\n    });\n  }\n}\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst util = require('./util');\nconst ActiveContextCache = require('./ActiveContextCache');\nconst JsonLdError = require('./JsonLdError');\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isString: _isString,\n  isUndefined: _isUndefined\n} = require('./types');\n\nconst {\n  isAbsolute: _isAbsoluteIri,\n  isRelative: _isRelativeIri,\n  prependBase,\n  parse: parseUrl\n} = require('./url');\n\nconst {\n  asArray: _asArray,\n  compareShortestLeast: _compareShortestLeast\n} = require('./util');\n\nconst MAX_CONTEXT_URLS = 10;\n\nconst INITIAL_CONTEXT_CACHE = new Map();\nconst INITIAL_CONTEXT_CACHE_MAX_SIZE = 10000;\n\nconst api = {};\nmodule.exports = api;\n\napi.cache = new ActiveContextCache();\n\n/**\n * Processes a local context and returns a new active context.\n *\n * @param activeCtx the current active context.\n * @param localCtx the local context to process.\n * @param options the context processing options.\n * @param isPropertyTermScopedContext `true` if `localCtx` is a scoped context\n *   from a property term.\n * @param isTypeScopedContext `true` if `localCtx` is a scoped context\n *   from a type.\n *\n * @return the new active context.\n */\napi.process = ({\n  activeCtx, localCtx, options,\n  isPropertyTermScopedContext = false,\n  isTypeScopedContext = false\n}) => {\n  // normalize local context to an array of @context objects\n  if(_isObject(localCtx) && '@context' in localCtx &&\n    _isArray(localCtx['@context'])) {\n    localCtx = localCtx['@context'];\n  }\n  const ctxs = _asArray(localCtx);\n\n  // no contexts in array, return current active context w/o changes\n  if(ctxs.length === 0) {\n    return activeCtx;\n  }\n\n  // track the previous context\n  const previousContext = activeCtx.previousContext || activeCtx;\n\n  // if context is property scoped and there's a previous context, amend it,\n  // not the current one\n  if(isPropertyTermScopedContext && activeCtx.previousContext) {\n    // TODO: consider optimizing to a shallow copy\n    activeCtx = activeCtx.clone();\n    activeCtx.isPropertyTermScoped = true;\n    activeCtx.previousContext = api.process({\n      activeCtx: activeCtx.previousContext,\n      localCtx: ctxs,\n      options,\n      isPropertyTermScopedContext\n    });\n    return activeCtx;\n  }\n\n  // process each context in order, update active context\n  // on each iteration to ensure proper caching\n  let rval = activeCtx;\n  for(let i = 0; i < ctxs.length; ++i) {\n    let ctx = ctxs[i];\n\n    // update active context to one computed from last iteration\n    activeCtx = rval;\n\n    // reset to initial context\n    if(ctx === null) {\n      // We can't nullify if there are protected terms and we're\n      // not processing a property term scoped context\n      if(!isPropertyTermScopedContext &&\n        Object.keys(activeCtx.protected).length !== 0) {\n        const protectedMode = (options && options.protectedMode) || 'error';\n        if(protectedMode === 'error') {\n          throw new JsonLdError(\n            'Tried to nullify a context with protected terms outside of ' +\n            'a term definition.',\n            'jsonld.SyntaxError',\n            {code: 'invalid context nullification'});\n        } else if(protectedMode === 'warn') {\n          // FIXME: remove logging and use a handler\n          console.warn('WARNING: invalid context nullification');\n          const oldActiveCtx = activeCtx;\n          // copy all protected term definitions to fresh initial context\n          rval = activeCtx = api.getInitialContext(options).clone();\n          for(const [term, _protected] of\n            Object.entries(oldActiveCtx.protected)) {\n            if(_protected) {\n              activeCtx.mappings[term] =\n                util.clone(oldActiveCtx.mappings[term]);\n            }\n          }\n          activeCtx.protected = util.clone(oldActiveCtx.protected);\n\n          // cache result\n          if(api.cache) {\n            api.cache.set(oldActiveCtx, ctx, rval);\n          }\n\n          continue;\n        }\n        throw new JsonLdError(\n          'Invalid protectedMode.',\n          'jsonld.SyntaxError',\n          {code: 'invalid protected mode', context: localCtx, protectedMode});\n      }\n      rval = activeCtx = api.getInitialContext(options).clone();\n      // if context is type-scoped, ensure previous context has been set\n      if(isTypeScopedContext) {\n        rval.previousContext = previousContext.clone();\n      }\n      continue;\n    }\n\n    // get context from cache if available\n    if(api.cache) {\n      const cached = api.cache.get(activeCtx, ctx);\n      if(cached) {\n        rval = activeCtx = cached;\n        continue;\n      }\n    }\n\n    // dereference @context key if present\n    if(_isObject(ctx) && '@context' in ctx) {\n      ctx = ctx['@context'];\n    }\n\n    // context must be an object by now, all URLs retrieved before this call\n    if(!_isObject(ctx)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context must be an object.',\n        'jsonld.SyntaxError', {code: 'invalid local context', context: ctx});\n    }\n\n    // TODO: there is likely a `preivousContext` cloning optimization that\n    // could be applied here (no need to copy it under certain conditions)\n\n    // clone context before updating it\n    rval = rval.clone();\n\n    // define context mappings for keys in local context\n    const defined = new Map();\n\n    // handle @version\n    if('@version' in ctx) {\n      if(ctx['@version'] !== 1.1) {\n        throw new JsonLdError(\n          'Unsupported JSON-LD version: ' + ctx['@version'],\n          'jsonld.UnsupportedVersion',\n          {code: 'invalid @version value', context: ctx});\n      }\n      if(activeCtx.processingMode &&\n        activeCtx.processingMode === 'json-ld-1.0') {\n        throw new JsonLdError(\n          '@version: ' + ctx['@version'] + ' not compatible with ' +\n          activeCtx.processingMode,\n          'jsonld.ProcessingModeConflict',\n          {code: 'processing mode conflict', context: ctx});\n      }\n      rval.processingMode = 'json-ld-1.1';\n      rval['@version'] = ctx['@version'];\n      defined.set('@version', true);\n    }\n\n    // if not set explicitly, set processingMode to \"json-ld-1.0\"\n    rval.processingMode =\n      rval.processingMode || activeCtx.processingMode || 'json-ld-1.0';\n\n    // handle @base\n    if('@base' in ctx) {\n      let base = ctx['@base'];\n\n      if(base === null) {\n        // no action\n      } else if(_isAbsoluteIri(base)) {\n        base = parseUrl(base);\n      } else if(_isRelativeIri(base)) {\n        base = parseUrl(prependBase(activeCtx['@base'].href, base));\n      } else {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@base\" in a ' +\n          '@context must be an absolute IRI, a relative IRI, or null.',\n          'jsonld.SyntaxError', {code: 'invalid base IRI', context: ctx});\n      }\n\n      rval['@base'] = base;\n      defined.set('@base', true);\n    }\n\n    // handle @vocab\n    if('@vocab' in ctx) {\n      const value = ctx['@vocab'];\n      if(value === null) {\n        delete rval['@vocab'];\n      } else if(!_isString(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@vocab\" in a ' +\n          '@context must be a string or null.',\n          'jsonld.SyntaxError', {code: 'invalid vocab mapping', context: ctx});\n      } else if(!_isAbsoluteIri(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@vocab\" in a ' +\n          '@context must be an absolute IRI.',\n          'jsonld.SyntaxError', {code: 'invalid vocab mapping', context: ctx});\n      } else {\n        rval['@vocab'] = value;\n      }\n      defined.set('@vocab', true);\n    }\n\n    // handle @language\n    if('@language' in ctx) {\n      const value = ctx['@language'];\n      if(value === null) {\n        delete rval['@language'];\n      } else if(!_isString(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; the value of \"@language\" in a ' +\n          '@context must be a string or null.',\n          'jsonld.SyntaxError',\n          {code: 'invalid default language', context: ctx});\n      } else {\n        rval['@language'] = value.toLowerCase();\n      }\n      defined.set('@language', true);\n    }\n\n    // handle @protected; determine whether this sub-context is declaring\n    // all its terms to be \"protected\" (exceptions can be made on a\n    // per-definition basis)\n    defined.set('@protected', ctx['@protected'] || false);\n\n    // process all other keys\n    for(const key in ctx) {\n      api.createTermDefinition(\n        rval, ctx, key, defined, options,\n        isPropertyTermScopedContext);\n    }\n\n    // if context is type-scoped, ensure previous context has been set\n    if(isTypeScopedContext && !rval.previousContext) {\n      rval.previousContext = previousContext.clone();\n    }\n\n    // cache result\n    if(api.cache) {\n      api.cache.set(activeCtx, ctx, rval);\n    }\n  }\n\n  return rval;\n};\n\n/**\n * Creates a term definition during context processing.\n *\n * @param activeCtx the current active context.\n * @param localCtx the local context being processed.\n * @param term the term in the local context to define the mapping for.\n * @param defined a map of defining/defined keys to detect cycles and prevent\n *          double definitions.\n * @param {Object} [options] - creation options.\n * @param {string} [options.protectedMode=\"error\"] - \"error\" to throw error\n *   on `@protected` constraint violation, \"warn\" to allow violations and\n *   signal a warning.\n * @param isPropertyTermScopedContext `true` if `localCtx` is a scoped context\n *   from a property term.\n */\napi.createTermDefinition = (\n  activeCtx, localCtx, term, defined, options,\n  isPropertyTermScopedContext = false) => {\n  if(defined.has(term)) {\n    // term already defined\n    if(defined.get(term)) {\n      return;\n    }\n    // cycle detected\n    throw new JsonLdError(\n      'Cyclical context definition detected.',\n      'jsonld.CyclicalContext',\n      {code: 'cyclic IRI mapping', context: localCtx, term});\n  }\n\n  // now defining term\n  defined.set(term, false);\n\n  if(api.isKeyword(term)) {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; keywords cannot be overridden.',\n      'jsonld.SyntaxError',\n      {code: 'keyword redefinition', context: localCtx, term});\n  }\n\n  if(term === '') {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; a term cannot be an empty string.',\n      'jsonld.SyntaxError',\n      {code: 'invalid term definition', context: localCtx});\n  }\n\n  // keep reference to previous mapping for potential `@protected` check\n  const previousMapping = activeCtx.mappings.get(term);\n\n  // remove old mapping\n  if(activeCtx.mappings.has(term)) {\n    activeCtx.mappings.delete(term);\n  }\n\n  // get context term value\n  let value;\n  if(localCtx.hasOwnProperty(term)) {\n    value = localCtx[term];\n  }\n\n  // clear context entry\n  if(value === null || (_isObject(value) && value['@id'] === null)) {\n    activeCtx.mappings.set(term, null);\n    defined.set(term, true);\n    return;\n  }\n\n  // convert short-hand value to object w/@id\n  let simpleTerm = false;\n  if(_isString(value)) {\n    simpleTerm = true;\n    value = {'@id': value};\n  }\n\n  if(!_isObject(value)) {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; @context term values must be ' +\n      'strings or objects.',\n      'jsonld.SyntaxError',\n      {code: 'invalid term definition', context: localCtx});\n  }\n\n  // create new mapping\n  const mapping = {};\n  activeCtx.mappings.set(term, mapping);\n  mapping.reverse = false;\n\n  // make sure term definition only has expected keywords\n  const validKeys = ['@container', '@id', '@language', '@reverse', '@type'];\n\n  // JSON-LD 1.1 support\n  if(api.processingMode(activeCtx, 1.1)) {\n    validKeys.push('@context', '@nest', '@prefix', '@protected');\n  }\n\n  for(const kw in value) {\n    if(!validKeys.includes(kw)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a term definition must not contain ' + kw,\n        'jsonld.SyntaxError',\n        {code: 'invalid term definition', context: localCtx});\n    }\n  }\n\n  // always compute whether term has a colon as an optimization for\n  // _compactIri\n  const colon = term.indexOf(':');\n  mapping._termHasColon = (colon !== -1);\n\n  if('@reverse' in value) {\n    if('@id' in value) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @reverse term definition must not ' +\n        'contain @id.', 'jsonld.SyntaxError',\n        {code: 'invalid reverse property', context: localCtx});\n    }\n    if('@nest' in value) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @reverse term definition must not ' +\n        'contain @nest.', 'jsonld.SyntaxError',\n        {code: 'invalid reverse property', context: localCtx});\n    }\n    const reverse = value['@reverse'];\n    if(!_isString(reverse)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @context @reverse value must be a string.',\n        'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});\n    }\n\n    // expand and add @id mapping\n    const id = _expandIri(\n      activeCtx, reverse, {vocab: true, base: false}, localCtx, defined,\n      options);\n    if(!_isAbsoluteIri(id)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @context @reverse value must be an ' +\n        'absolute IRI or a blank node identifier.',\n        'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});\n    }\n    mapping['@id'] = id;\n    mapping.reverse = true;\n  } else if('@id' in value) {\n    let id = value['@id'];\n    if(!_isString(id)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; a @context @id value must be an array ' +\n        'of strings or a string.',\n        'jsonld.SyntaxError', {code: 'invalid IRI mapping', context: localCtx});\n    }\n    if(id !== term) {\n      // expand and add @id mapping\n      id = _expandIri(\n        activeCtx, id, {vocab: true, base: false}, localCtx, defined, options);\n      if(!_isAbsoluteIri(id) && !api.isKeyword(id)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; a @context @id value must be an ' +\n          'absolute IRI, a blank node identifier, or a keyword.',\n          'jsonld.SyntaxError',\n          {code: 'invalid IRI mapping', context: localCtx});\n      }\n      mapping['@id'] = id;\n      // indicate if this term may be used as a compact IRI prefix\n      mapping._prefix = (!mapping._termHasColon &&\n        id.match(/[:\\/\\?#\\[\\]@]$/) &&\n        (simpleTerm || api.processingMode(activeCtx, 1.0)));\n    }\n  }\n\n  if(!('@id' in mapping)) {\n    // see if the term has a prefix\n    if(mapping._termHasColon) {\n      const prefix = term.substr(0, colon);\n      if(localCtx.hasOwnProperty(prefix)) {\n        // define parent prefix\n        api.createTermDefinition(activeCtx, localCtx, prefix, defined, options);\n      }\n\n      if(activeCtx.mappings.has(prefix)) {\n        // set @id based on prefix parent\n        const suffix = term.substr(colon + 1);\n        mapping['@id'] = activeCtx.mappings.get(prefix)['@id'] + suffix;\n      } else {\n        // term is an absolute IRI\n        mapping['@id'] = term;\n      }\n    } else {\n      // non-IRIs *must* define @ids if @vocab is not available\n      if(!('@vocab' in activeCtx)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; @context terms must define an @id.',\n          'jsonld.SyntaxError',\n          {code: 'invalid IRI mapping', context: localCtx, term});\n      }\n      // prepend vocab to term\n      mapping['@id'] = activeCtx['@vocab'] + term;\n    }\n  }\n\n  // Handle term protection\n  if(value['@protected'] === true ||\n    (defined.get('@protected') === true && value['@protected'] !== false)) {\n    activeCtx.protected[term] = true;\n    mapping.protected = true;\n  }\n\n  // IRI mapping now defined\n  defined.set(term, true);\n\n  if('@type' in value) {\n    let type = value['@type'];\n    if(!_isString(type)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; an @context @type value must be a string.',\n        'jsonld.SyntaxError',\n        {code: 'invalid type mapping', context: localCtx});\n    }\n\n    if(type !== '@id' && type !== '@vocab' && type !== '@json') {\n      // expand @type to full IRI\n      type = _expandIri(\n        activeCtx, type, {vocab: true, base: false}, localCtx, defined,\n        options);\n      if(!_isAbsoluteIri(type)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; an @context @type value must be an ' +\n          'absolute IRI.',\n          'jsonld.SyntaxError',\n          {code: 'invalid type mapping', context: localCtx});\n      }\n      if(type.indexOf('_:') === 0) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; an @context @type value must be an IRI, ' +\n          'not a blank node identifier.',\n          'jsonld.SyntaxError',\n          {code: 'invalid type mapping', context: localCtx});\n      }\n    }\n\n    // add @type to mapping\n    mapping['@type'] = type;\n  }\n\n  if('@container' in value) {\n    // normalize container to an array form\n    const container = _isString(value['@container']) ?\n      [value['@container']] : (value['@container'] || []);\n    const validContainers = ['@list', '@set', '@index', '@language'];\n    let isValid = true;\n    const hasSet = container.includes('@set');\n\n    // JSON-LD 1.1 support\n    if(api.processingMode(activeCtx, 1.1)) {\n      validContainers.push('@graph', '@id', '@type');\n\n      // check container length\n      if(container.includes('@list')) {\n        if(container.length !== 1) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; @context @container with @list must ' +\n            'have no other values',\n            'jsonld.SyntaxError',\n            {code: 'invalid container mapping', context: localCtx});\n        }\n      } else if(container.includes('@graph')) {\n        if(container.some(key =>\n          key !== '@graph' && key !== '@id' && key !== '@index' &&\n          key !== '@set')) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; @context @container with @graph must ' +\n            'have no other values other than @id, @index, and @set',\n            'jsonld.SyntaxError',\n            {code: 'invalid container mapping', context: localCtx});\n        }\n      } else {\n        // otherwise, container may also include @set\n        isValid &= container.length <= (hasSet ? 2 : 1);\n      }\n    } else {\n      // in JSON-LD 1.0, container must not be an array (it must be a string,\n      // which is one of the validContainers)\n      isValid &= !_isArray(value['@container']);\n\n      // check container length\n      isValid &= container.length <= 1;\n    }\n\n    // check against valid containers\n    isValid &= container.every(c => validContainers.includes(c));\n\n    // @set not allowed with @list\n    isValid &= !(hasSet && container.includes('@list'));\n\n    if(!isValid) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @container value must be ' +\n        'one of the following: ' + validContainers.join(', '),\n        'jsonld.SyntaxError',\n        {code: 'invalid container mapping', context: localCtx});\n    }\n\n    if(mapping.reverse &&\n      !container.every(c => ['@index', '@set'].includes(c))) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @container value for a @reverse ' +\n        'type definition must be @index or @set.', 'jsonld.SyntaxError',\n        {code: 'invalid reverse property', context: localCtx});\n    }\n\n    // add @container to mapping\n    mapping['@container'] = container;\n  }\n\n  // scoped contexts\n  if('@context' in value) {\n    mapping['@context'] = value['@context'];\n  }\n\n  if('@language' in value && !('@type' in value)) {\n    let language = value['@language'];\n    if(language !== null && !_isString(language)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @language value must be ' +\n        'a string or null.', 'jsonld.SyntaxError',\n        {code: 'invalid language mapping', context: localCtx});\n    }\n\n    // add @language to mapping\n    if(language !== null) {\n      language = language.toLowerCase();\n    }\n    mapping['@language'] = language;\n  }\n\n  // term may be used as a prefix\n  if('@prefix' in value) {\n    if(mapping._termHasColon) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @prefix used on a compact IRI term',\n        'jsonld.SyntaxError',\n        {code: 'invalid term definition', context: localCtx});\n    }\n    if(typeof value['@prefix'] === 'boolean') {\n      mapping._prefix = value['@prefix'] === true;\n    } else {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context value for @prefix must be boolean',\n        'jsonld.SyntaxError',\n        {code: 'invalid @prefix value', context: localCtx});\n    }\n  }\n\n  if('@nest' in value) {\n    const nest = value['@nest'];\n    if(!_isString(nest) || (nest !== '@nest' && nest.indexOf('@') === 0)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; @context @nest value must be ' +\n        'a string which is not a keyword other than @nest.',\n        'jsonld.SyntaxError',\n        {code: 'invalid @nest value', context: localCtx});\n    }\n    mapping['@nest'] = nest;\n  }\n\n  // disallow aliasing @context and @preserve\n  const id = mapping['@id'];\n  if(id === '@context' || id === '@preserve') {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; @context and @preserve cannot be aliased.',\n      'jsonld.SyntaxError', {code: 'invalid keyword alias', context: localCtx});\n  }\n\n  // FIXME if(1.1) ... ?\n  if(previousMapping && previousMapping.protected &&\n    !isPropertyTermScopedContext) {\n    // force new term to continue to be protected and see if the mappings would\n    // be equal\n    activeCtx.protected[term] = true;\n    mapping.protected = true;\n    if(!_deepCompare(previousMapping, mapping)) {\n      const protectedMode = (options && options.protectedMode) || 'error';\n      if(protectedMode === 'error') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; tried to redefine a protected term.',\n          'jsonld.SyntaxError',\n          {code: 'protected term redefinition', context: localCtx, term});\n      } else if(protectedMode === 'warn') {\n        // FIXME: remove logging and use a handler\n        console.warn('WARNING: protected term redefinition', {term});\n        return;\n      }\n      throw new JsonLdError(\n        'Invalid protectedMode.',\n        'jsonld.SyntaxError',\n        {code: 'invalid protected mode', context: localCtx, term,\n          protectedMode});\n    }\n  }\n};\n\n/**\n * Expands a string to a full IRI. The string may be a term, a prefix, a\n * relative IRI, or an absolute IRI. The associated absolute IRI will be\n * returned.\n *\n * @param activeCtx the current active context.\n * @param value the string to expand.\n * @param relativeTo options for how to resolve relative IRIs:\n *          base: true to resolve against the base IRI, false not to.\n *          vocab: true to concatenate after @vocab, false not to.\n * @param {Object} [options] - processing options.\n *\n * @return the expanded value.\n */\napi.expandIri = (activeCtx, value, relativeTo, options) => {\n  return _expandIri(activeCtx, value, relativeTo, undefined, undefined,\n    options);\n};\n\n/**\n * Expands a string to a full IRI. The string may be a term, a prefix, a\n * relative IRI, or an absolute IRI. The associated absolute IRI will be\n * returned.\n *\n * @param activeCtx the current active context.\n * @param value the string to expand.\n * @param relativeTo options for how to resolve relative IRIs:\n *          base: true to resolve against the base IRI, false not to.\n *          vocab: true to concatenate after @vocab, false not to.\n * @param localCtx the local context being processed (only given if called\n *          during context processing).\n * @param defined a map for tracking cycles in context definitions (only given\n *          if called during context processing).\n * @param {Object} [options] - processing options.\n *\n * @return the expanded value.\n */\nfunction _expandIri(activeCtx, value, relativeTo, localCtx, defined, options) {\n  // already expanded\n  if(value === null || !_isString(value) || api.isKeyword(value)) {\n    return value;\n  }\n\n  // define term dependency if not defined\n  if(localCtx && localCtx.hasOwnProperty(value) &&\n    defined.get(value) !== true) {\n    api.createTermDefinition(activeCtx, localCtx, value, defined, options);\n  }\n\n  // if context is from a property term scoped context composed with a\n  // type-scoped context, then use previous context instead\n  if(activeCtx.isPropertyTermScoped && activeCtx.previousContext) {\n    activeCtx = activeCtx.previousContext;\n  }\n\n  relativeTo = relativeTo || {};\n  if(relativeTo.vocab) {\n    const mapping = activeCtx.mappings.get(value);\n\n    // value is explicitly ignored with a null mapping\n    if(mapping === null) {\n      return null;\n    }\n\n    if(mapping) {\n      // value is a term\n      return mapping['@id'];\n    }\n  }\n\n  // split value into prefix:suffix\n  const colon = value.indexOf(':');\n  if(colon !== -1) {\n    const prefix = value.substr(0, colon);\n    const suffix = value.substr(colon + 1);\n\n    // do not expand blank nodes (prefix of '_') or already-absolute\n    // IRIs (suffix of '//')\n    if(prefix === '_' || suffix.indexOf('//') === 0) {\n      return value;\n    }\n\n    // prefix dependency not defined, define it\n    if(localCtx && localCtx.hasOwnProperty(prefix)) {\n      api.createTermDefinition(activeCtx, localCtx, prefix, defined, options);\n    }\n\n    // use mapping if prefix is defined\n    if(activeCtx.mappings.has(prefix)) {\n      const mapping = activeCtx.mappings.get(prefix);\n      return mapping['@id'] + suffix;\n    }\n\n    // already absolute IRI\n    return value;\n  }\n\n  // prepend vocab\n  if(relativeTo.vocab && '@vocab' in activeCtx) {\n    return activeCtx['@vocab'] + value;\n  }\n\n  // prepend base\n  if(relativeTo.base) {\n    return prependBase(activeCtx['@base'], value);\n  }\n\n  return value;\n}\n\n/**\n * Gets the initial context.\n *\n * @param options the options to use:\n *          [base] the document base IRI.\n *\n * @return the initial context.\n */\napi.getInitialContext = options => {\n  const base = parseUrl(options.base || '');\n  const key = JSON.stringify({base, processingMode: options.processingMode});\n  const cached = INITIAL_CONTEXT_CACHE.get(key);\n  if(cached) {\n    return cached;\n  }\n\n  const initialContext = {\n    '@base': base,\n    processingMode: options.processingMode,\n    mappings: new Map(),\n    inverse: null,\n    getInverse: _createInverseContext,\n    clone: _cloneActiveContext,\n    revertTypeScopedContext: _revertTypeScopedContext,\n    protected: {}\n  };\n  // TODO: consider using LRU cache instead\n  if(INITIAL_CONTEXT_CACHE.size === INITIAL_CONTEXT_CACHE_MAX_SIZE) {\n    // clear whole cache -- assumes scenario where the cache fills means\n    // the cache isn't being used very efficiently anyway\n    INITIAL_CONTEXT_CACHE.clear();\n  }\n  INITIAL_CONTEXT_CACHE.set(key, initialContext);\n  return initialContext;\n\n  /**\n   * Generates an inverse context for use in the compaction algorithm, if\n   * not already generated for the given active context.\n   *\n   * @return the inverse context.\n   */\n  function _createInverseContext() {\n    const activeCtx = this;\n\n    // lazily create inverse\n    if(activeCtx.inverse) {\n      return activeCtx.inverse;\n    }\n    const inverse = activeCtx.inverse = {};\n\n    // variables for building fast CURIE map\n    const fastCurieMap = activeCtx.fastCurieMap = {};\n    const irisToTerms = {};\n\n    // handle default language\n    const defaultLanguage = activeCtx['@language'] || '@none';\n\n    // create term selections for each mapping in the context, ordered by\n    // shortest and then lexicographically least\n    const mappings = activeCtx.mappings;\n    const terms = [...mappings.keys()].sort(_compareShortestLeast);\n    for(const term of terms) {\n      const mapping = mappings.get(term);\n      if(mapping === null) {\n        continue;\n      }\n\n      let container = mapping['@container'] || '@none';\n      container = [].concat(container).sort().join('');\n\n      // iterate over every IRI in the mapping\n      const ids = _asArray(mapping['@id']);\n      for(const iri of ids) {\n        let entry = inverse[iri];\n        const isKeyword = api.isKeyword(iri);\n\n        if(!entry) {\n          // initialize entry\n          inverse[iri] = entry = {};\n\n          if(!isKeyword && !mapping._termHasColon) {\n            // init IRI to term map and fast CURIE prefixes\n            irisToTerms[iri] = [term];\n            const fastCurieEntry = {iri, terms: irisToTerms[iri]};\n            if(iri[0] in fastCurieMap) {\n              fastCurieMap[iri[0]].push(fastCurieEntry);\n            } else {\n              fastCurieMap[iri[0]] = [fastCurieEntry];\n            }\n          }\n        } else if(!isKeyword && !mapping._termHasColon) {\n          // add IRI to term match\n          irisToTerms[iri].push(term);\n        }\n\n        // add new entry\n        if(!entry[container]) {\n          entry[container] = {\n            '@language': {},\n            '@type': {},\n            '@any': {}\n          };\n        }\n        entry = entry[container];\n        _addPreferredTerm(term, entry['@any'], '@none');\n\n        if(mapping.reverse) {\n          // term is preferred for values using @reverse\n          _addPreferredTerm(term, entry['@type'], '@reverse');\n        } else if('@type' in mapping) {\n          // term is preferred for values using specific type\n          _addPreferredTerm(term, entry['@type'], mapping['@type']);\n        } else if('@language' in mapping) {\n          // term is preferred for values using specific language\n          const language = mapping['@language'] || '@null';\n          _addPreferredTerm(term, entry['@language'], language);\n        } else {\n          // term is preferred for values w/default language or no type and\n          // no language\n          // add an entry for the default language\n          _addPreferredTerm(term, entry['@language'], defaultLanguage);\n\n          // add entries for no type and no language\n          _addPreferredTerm(term, entry['@type'], '@none');\n          _addPreferredTerm(term, entry['@language'], '@none');\n        }\n      }\n    }\n\n    // build fast CURIE map\n    for(const key in fastCurieMap) {\n      _buildIriMap(fastCurieMap, key, 1);\n    }\n\n    return inverse;\n  }\n\n  /**\n   * Runs a recursive algorithm to build a lookup map for quickly finding\n   * potential CURIEs.\n   *\n   * @param iriMap the map to build.\n   * @param key the current key in the map to work on.\n   * @param idx the index into the IRI to compare.\n   */\n  function _buildIriMap(iriMap, key, idx) {\n    const entries = iriMap[key];\n    const next = iriMap[key] = {};\n\n    let iri;\n    let letter;\n    for(const entry of entries) {\n      iri = entry.iri;\n      if(idx >= iri.length) {\n        letter = '';\n      } else {\n        letter = iri[idx];\n      }\n      if(letter in next) {\n        next[letter].push(entry);\n      } else {\n        next[letter] = [entry];\n      }\n    }\n\n    for(const key in next) {\n      if(key === '') {\n        continue;\n      }\n      _buildIriMap(next, key, idx + 1);\n    }\n  }\n\n  /**\n   * Adds the term for the given entry if not already added.\n   *\n   * @param term the term to add.\n   * @param entry the inverse context typeOrLanguage entry to add to.\n   * @param typeOrLanguageValue the key in the entry to add to.\n   */\n  function _addPreferredTerm(term, entry, typeOrLanguageValue) {\n    if(!entry.hasOwnProperty(typeOrLanguageValue)) {\n      entry[typeOrLanguageValue] = term;\n    }\n  }\n\n  /**\n   * Clones an active context, creating a child active context.\n   *\n   * @return a clone (child) of the active context.\n   */\n  function _cloneActiveContext() {\n    const child = {};\n    child['@base'] = this['@base'];\n    child.mappings = util.clone(this.mappings);\n    child.clone = this.clone;\n    child.inverse = null;\n    child.getInverse = this.getInverse;\n    child.protected = util.clone(this.protected);\n    if(this.previousContext) {\n      child.isPropertyTermScoped = this.previousContext.isPropertyTermScoped;\n      child.previousContext = this.previousContext.clone();\n    }\n    child.revertTypeScopedContext = this.revertTypeScopedContext;\n    if('@language' in this) {\n      child['@language'] = this['@language'];\n    }\n    if('@vocab' in this) {\n      child['@vocab'] = this['@vocab'];\n    }\n    return child;\n  }\n\n  /**\n   * Reverts any type-scoped context in this active context to the previous\n   * context.\n   */\n  function _revertTypeScopedContext() {\n    if(!this.previousContext) {\n      return this;\n    }\n    return this.previousContext.clone();\n  }\n};\n\n/**\n * Gets the value for the given active context key and type, null if none is\n * set or undefined if none is set and type is '@context'.\n *\n * @param ctx the active context.\n * @param key the context key.\n * @param [type] the type of value to get (eg: '@id', '@type'), if not\n *          specified gets the entire entry for a key, null if not found.\n *\n * @return the value, null, or undefined.\n */\napi.getContextValue = (ctx, key, type) => {\n  // invalid key\n  if(key === null) {\n    if(type === '@context') {\n      return undefined;\n    }\n    return null;\n  }\n\n  // get specific entry information\n  if(ctx.mappings.has(key)) {\n    const entry = ctx.mappings.get(key);\n\n    if(_isUndefined(type)) {\n      // return whole entry\n      return entry;\n    }\n    if(entry.hasOwnProperty(type)) {\n      // return entry value for type\n      return entry[type];\n    }\n  }\n\n  // get default language\n  if(type === '@language' && ctx.hasOwnProperty(type)) {\n    return ctx[type];\n  }\n\n  if(type === '@context') {\n    return undefined;\n  }\n  return null;\n};\n\n/**\n * Retrieves external @context URLs using the given document loader. Every\n * instance of @context in the input that refers to a URL will be replaced\n * with the JSON @context found at that URL.\n *\n * @param input the JSON-LD input with possible contexts.\n * @param options the options to use:\n *          documentLoader(url, [callback(err, remoteDoc)]) the document loader.\n * @param callback(err, input) called once the operation completes.\n */\napi.getAllContexts = async (input, options) => {\n  return _retrieveContextUrls(input, options);\n};\n\n/**\n * Processing Mode check.\n *\n * @param activeCtx the current active context.\n * @param version the string or numeric version to check.\n *\n * @return boolean.\n */\napi.processingMode = (activeCtx, version) => {\n  if(version.toString() >= '1.1') {\n    return activeCtx.processingMode &&\n      activeCtx.processingMode >= 'json-ld-' + version.toString();\n  } else {\n    return !activeCtx.processingMode ||\n      activeCtx.processingMode === 'json-ld-1.0';\n  }\n};\n\n/**\n * Returns whether or not the given value is a keyword.\n *\n * @param v the value to check.\n *\n * @return true if the value is a keyword, false if not.\n */\napi.isKeyword = v => {\n  if(!_isString(v)) {\n    return false;\n  }\n  switch(v) {\n    case '@base':\n    case '@container':\n    case '@context':\n    case '@default':\n    case '@embed':\n    case '@explicit':\n    case '@graph':\n    case '@id':\n    case '@index':\n    case '@json':\n    case '@language':\n    case '@list':\n    case '@nest':\n    case '@none':\n    case '@omitDefault':\n    case '@prefix':\n    case '@preserve':\n    case '@protected':\n    case '@requireAll':\n    case '@reverse':\n    case '@set':\n    case '@type':\n    case '@value':\n    case '@version':\n    case '@vocab':\n      return true;\n  }\n  return false;\n};\n\nasync function _retrieveContextUrls(input, options) {\n  const documentLoader = util.normalizeDocumentLoader(options.documentLoader);\n\n  // retrieve all @context URLs in input\n  await retrieve(input, new Set(), documentLoader);\n\n  return input;\n\n  // recursive function that will retrieve all @context URLs in documents\n  async function retrieve(doc, cycles, documentLoader) {\n    if(cycles.size > MAX_CONTEXT_URLS) {\n      throw new JsonLdError(\n        'Maximum number of @context URLs exceeded.',\n        'jsonld.ContextUrlError',\n        {code: 'loading remote context failed', max: MAX_CONTEXT_URLS});\n    }\n\n    // find all URLs in the given document\n    const urls = new Map();\n    _findContextUrls(doc, urls, false, options.base);\n    if(urls.size === 0) {\n      return;\n    }\n\n    // queue all unretrieved URLs\n    const queue = [...urls.keys()].filter(u => urls.get(u) === false);\n\n    // retrieve URLs in queue\n    return Promise.all(queue.map(async url => {\n      // check for context URL cycle\n      if(cycles.has(url)) {\n        throw new JsonLdError(\n          'Cyclical @context URLs detected.',\n          'jsonld.ContextUrlError',\n          {code: 'recursive context inclusion', url});\n      }\n\n      const _cycles = new Set(cycles);\n      _cycles.add(url);\n      let remoteDoc;\n      let ctx;\n\n      try {\n        remoteDoc = await documentLoader(url);\n        ctx = remoteDoc.document || null;\n        // parse string context as JSON\n        if(_isString(ctx)) {\n          ctx = JSON.parse(ctx);\n        }\n      } catch(e) {\n        throw new JsonLdError(\n          'Dereferencing a URL did not result in a valid JSON-LD object. ' +\n          'Possible causes are an inaccessible URL perhaps due to ' +\n          'a same-origin policy (ensure the server uses CORS if you are ' +\n          'using client-side JavaScript), too many redirects, a ' +\n          'non-JSON response, or more than one HTTP Link Header was ' +\n          'provided for a remote context.',\n          'jsonld.InvalidUrl',\n          {code: 'loading remote context failed', url, cause: e});\n      }\n\n      // ensure ctx is an object\n      if(!_isObject(ctx)) {\n        throw new JsonLdError(\n          'Dereferencing a URL did not result in a JSON object. The ' +\n          'response was valid JSON, but it was not a JSON object.',\n          'jsonld.InvalidUrl',\n          {code: 'invalid remote context', url});\n      }\n\n      // use empty context if no @context key is present\n      if(!('@context' in ctx)) {\n        ctx = {'@context': {}};\n      } else {\n        ctx = {'@context': ctx['@context']};\n      }\n\n      // append @context URL to context if given\n      if(remoteDoc.contextUrl) {\n        if(!_isArray(ctx['@context'])) {\n          ctx['@context'] = [ctx['@context']];\n        }\n        ctx['@context'].push(remoteDoc.contextUrl);\n      }\n\n      // recurse\n      await retrieve(ctx, _cycles, documentLoader);\n\n      // store retrieved context w/replaced @context URLs\n      urls.set(url, ctx['@context']);\n\n      // replace all @context URLs in the document\n      _findContextUrls(doc, urls, true, options.base);\n    }));\n  }\n}\n\n/**\n * Finds all @context URLs in the given JSON-LD input.\n *\n * @param input the JSON-LD input.\n * @param urls a map of URLs (url => false/@contexts).\n * @param replace true to replace the URLs in the given input with the\n *           @contexts from the urls map, false not to.\n * @param base the base IRI to use to resolve relative IRIs.\n *\n * @return true if new URLs to retrieve were found, false if not.\n */\nfunction _findContextUrls(input, urls, replace, base) {\n  if(_isArray(input)) {\n    for(const element of input) {\n      _findContextUrls(element, urls, replace, base);\n    }\n    return;\n  }\n\n  if(!_isObject(input)) {\n    // no @context URLs can be found in non-object input\n    return;\n  }\n\n  // input is an object\n  for(const key in input) {\n    if(key !== '@context') {\n      _findContextUrls(input[key], urls, replace, base);\n      continue;\n    }\n\n    // get @context\n    const ctx = input[key];\n\n    if(_isArray(ctx)) {\n      // array @context\n      let length = ctx.length;\n      for(let i = 0; i < length; ++i) {\n        const _ctx = ctx[i];\n        if(_isString(_ctx)) {\n          const prepended = prependBase(base, _ctx);\n          const resolved = urls.get(prepended);\n          // replace w/@context if requested\n          if(replace) {\n            if(_isArray(resolved)) {\n              // add flattened context\n              Array.prototype.splice.apply(ctx, [i, 1].concat(resolved));\n              i += resolved.length - 1;\n              length = ctx.length;\n            } else if(resolved !== false) {\n              ctx[i] = resolved;\n            }\n          } else if(resolved === undefined) {\n            // @context URL found\n            urls.set(prepended, false);\n          }\n        } else {\n          // look for scoped context\n          for(const key in _ctx) {\n            if(_isObject(_ctx[key])) {\n              _findContextUrls(_ctx[key], urls, replace, base);\n            }\n          }\n        }\n      }\n    } else if(_isString(ctx)) {\n      // string @context\n      const prepended = prependBase(base, ctx);\n      const resolved = urls.get(prepended);\n      // replace w/@context if requested\n      if(replace) {\n        if(resolved !== false) {\n          input[key] = resolved;\n        }\n      } else if(resolved === undefined) {\n        // @context URL found\n        urls.set(prepended, false);\n      }\n    } else {\n      // look for scoped context\n      for(const key in ctx) {\n        if(_isObject(ctx[key])) {\n          _findContextUrls(ctx[key], urls, replace, base);\n        }\n      }\n    }\n  }\n}\n\nfunction _deepCompare(x1, x2) {\n  // compare `null` or primitive types directly\n  if((!(x1 && typeof x1 === 'object')) ||\n     (!(x2 && typeof x2 === 'object'))) {\n    return x1 === x2;\n  }\n  // x1 and x2 are objects (also potentially arrays)\n  const x1Array = Array.isArray(x1);\n  if(x1Array !== Array.isArray(x2)) {\n    return false;\n  }\n  if(x1Array) {\n    if(x1.length !== x2.length) {\n      return false;\n    }\n    for(let i = 0; i < x1.length; ++i) {\n      if(!_deepCompare(x1[i], x2[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  // x1 and x2 are non-array objects\n  const k1s = Object.keys(x1);\n  const k2s = Object.keys(x2);\n  if(k1s.length !== k2s.length) {\n    return false;\n  }\n  for(const k1 in x1) {\n    let v1 = x1[k1];\n    let v2 = x2[k1];\n    // special case: `@container` can be in any order\n    if(k1 === '@container') {\n      if(Array.isArray(v1) && Array.isArray(v2)) {\n        v1 = v1.slice().sort();\n        v2 = v2.slice().sort();\n      }\n    }\n    if(!_deepCompare(v1, v2)) {\n      return false;\n    }\n  }\n  return true;\n}\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst inversify_1 = require(\"inversify\");\nconst DropOffType_1 = __importDefault(require(\"../../enums/DropOffType\"));\nconst PickupType_1 = __importDefault(require(\"../../enums/PickupType\"));\nconst ReachableStopsFinderMode_1 = __importDefault(require(\"../../enums/ReachableStopsFinderMode\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../../enums/ReachableStopsSearchPhase\"));\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst ConnectionSelectors_1 = require(\"../../fetcher/connections/ConnectionSelectors\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst MergeIterator_1 = __importDefault(require(\"../../util/iterators/MergeIterator\"));\nconst FootpathQueue_1 = __importDefault(require(\"./CSA/FootpathQueue\"));\nconst JourneyExtractorEarliestArrival_1 = __importDefault(require(\"./JourneyExtractorEarliestArrival\"));\n// Implementation is as close as possible to the original paper: https://arxiv.org/pdf/1703.05997.pdf\nlet CSAEarliestArrival = class CSAEarliestArrival {\n    constructor(connectionsProvider, locationResolver, transferReachableStopsFinder, initialReachableStopsFinder, finalReachableStopsFinder) {\n        this.connectionsProvider = connectionsProvider;\n        this.locationResolver = locationResolver;\n        this.transferReachableStopsFinder = transferReachableStopsFinder;\n        this.initialReachableStopsFinder = initialReachableStopsFinder;\n        this.finalReachableStopsFinder = finalReachableStopsFinder;\n        this.eventBus = EventBus_1.default.getInstance();\n        this.journeyExtractor = new JourneyExtractorEarliestArrival_1.default(locationResolver);\n    }\n    async plan(query) {\n        const { minimumDepartureTime: lowerBoundDate, maximumArrivalTime: upperBoundDate, } = query;\n        const footpathsQueue = new FootpathQueue_1.default();\n        const connectionsIterator = await this.connectionsProvider.createIterator({\n            upperBoundDate,\n            lowerBoundDate,\n            excludedModes: query.excludedTravelModes,\n            region: null,\n        });\n        const connectionsQueue = new MergeIterator_1.default([connectionsIterator, footpathsQueue], ConnectionSelectors_1.forwardsConnectionSelector, true);\n        const queryState = {\n            finalReachableStops: {},\n            profilesByStop: {},\n            enterConnectionByTrip: {},\n            footpathsQueue,\n            connectionsQueue,\n        };\n        const [hasInitialReachableStops, hasFinalReachableStops] = await Promise.all([\n            this.initInitialReachableStops(queryState, query),\n            this.initFinalReachableStops(queryState, query),\n        ]);\n        if (!hasInitialReachableStops || !hasFinalReachableStops) {\n            return Promise.resolve(new asynciterator_1.ArrayIterator([]));\n        }\n        const self = this;\n        return new Promise((resolve, reject) => {\n            let isDone = false;\n            const done = () => {\n                if (!isDone) {\n                    connectionsQueue.close();\n                    self.extractJourneys(queryState, query)\n                        .then((resultIterator) => {\n                        resolve(resultIterator);\n                    });\n                    isDone = true;\n                }\n            };\n            connectionsIterator.on(\"readable\", () => self.processConnections(queryState, query, done));\n            connectionsIterator.on(\"end\", () => done());\n            // iterator may have become readable before the listener was attached\n            self.processConnections(queryState, query, done);\n        });\n    }\n    updateProfile(state, query, connection) {\n        /*\n        Call this ONLY if the given connection is known to improve the arrival stop's profile\n        */\n        const tripId = connection.tripId;\n        const departureTime = connection.departureTime.getTime();\n        const arrivalTime = connection.arrivalTime.getTime();\n        // update profile of arrival stop\n        const arrivalProfile = {\n            departureTime,\n            arrivalTime,\n            exitConnection: connection,\n            enterConnection: state.enterConnectionByTrip[tripId],\n        };\n        state.profilesByStop[connection.arrivalStop] = arrivalProfile;\n        EventBus_1.default.getInstance().emit(EventType_1.default.ReachableID, connection.arrivalStop);\n    }\n    async extractJourneys(state, query) {\n        return this.journeyExtractor.extractJourneys(state.profilesByStop, query);\n    }\n    async processConnections(state, query, resolve) {\n        const { from, to, minimumDepartureTime } = query;\n        const departureStopId = from[0].id;\n        const arrivalStopId = to[0].id;\n        let connection = state.connectionsQueue.read();\n        while (connection && !state.connectionsQueue.closed) {\n            if (connection.departureTime < minimumDepartureTime && !state.connectionsQueue.closed) {\n                // starting criterion\n                // skip connections before the minimum departure time\n                connection = state.connectionsQueue.read();\n                continue;\n            }\n            if (this.getProfile(state, arrivalStopId).arrivalTime <= connection.departureTime.getTime()) {\n                // stopping criterion\n                // we cannot improve the tentative arrival time anymore\n                return resolve();\n            }\n            const tripId = connection.tripId;\n            const departureTime = connection.departureTime.getTime();\n            const canRemainSeated = state.enterConnectionByTrip[tripId];\n            const canTakeTransfer = ((connection.departureStop === departureStopId ||\n                this.getProfile(state, connection.departureStop).arrivalTime <= departureTime) &&\n                connection.pickupType !== PickupType_1.default.NotAvailable);\n            if (canRemainSeated || canTakeTransfer) {\n                // enterConnectionByTrip should point to the first reachable connection\n                if (!state.enterConnectionByTrip[tripId]) {\n                    state.enterConnectionByTrip[tripId] = connection;\n                }\n                // limited walking optimization\n                const canImprove = connection.arrivalTime.getTime() <\n                    this.getProfile(state, connection.arrivalStop).arrivalTime;\n                const canLeave = connection.dropOffType !== DropOffType_1.default.NotAvailable;\n                if (canLeave && canImprove) {\n                    this.updateProfile(state, query, connection);\n                    await this.scheduleExtraConnections(state, query, connection);\n                }\n            }\n            if (!state.connectionsQueue.closed) {\n                connection = state.connectionsQueue.read();\n                continue;\n            }\n            connection = undefined;\n        }\n    }\n    getProfile(state, stopId) {\n        if (!state.profilesByStop[stopId]) {\n            state.profilesByStop[stopId] = {\n                departureTime: Infinity,\n                arrivalTime: Infinity,\n            };\n        }\n        return state.profilesByStop[stopId];\n    }\n    async scheduleExtraConnections(state, query, sourceConnection) {\n        try {\n            const arrivalStop = await this.locationResolver.resolve(sourceConnection.arrivalStop);\n            const reachableStops = await this.transferReachableStopsFinder.findReachableStops(arrivalStop, ReachableStopsFinderMode_1.default.Source, query.maximumTransferDuration, query.minimumWalkingSpeed, query.profileID);\n            if (state.finalReachableStops[arrivalStop.id]) {\n                reachableStops.push(state.finalReachableStops[arrivalStop.id]);\n            }\n            for (const reachableStop of reachableStops) {\n                const { stop: stop, duration: duration } = reachableStop;\n                if (duration && stop.id) {\n                    const transferTentativeArrival = this.getProfile(state, stop.id).arrivalTime;\n                    const newArrivalTime = new Date(sourceConnection.arrivalTime.getTime() + duration);\n                    if (transferTentativeArrival > newArrivalTime.getTime() && newArrivalTime <= query.maximumArrivalTime) {\n                        const tripId = `TRANSFER_TO:${sourceConnection.arrivalStop}@${sourceConnection.arrivalTime.getTime()}`;\n                        // create a connection that resembles a footpath\n                        // TODO, ditch the IReachbleStop and IConnection interfaces and make these proper objects\n                        const transferConnection = {\n                            id: `${tripId}-${stop.id}`,\n                            tripId,\n                            travelMode: TravelMode_1.default.Walking,\n                            departureTime: sourceConnection.arrivalTime,\n                            departureStop: sourceConnection.arrivalStop,\n                            arrivalTime: new Date(sourceConnection.arrivalTime.getTime() + duration),\n                            arrivalStop: stop.id,\n                            dropOffType: DropOffType_1.default.Regular,\n                            pickupType: PickupType_1.default.Regular,\n                            headsign: stop.id,\n                        };\n                        state.footpathsQueue.write(transferConnection);\n                    }\n                }\n            }\n        }\n        catch (e) {\n            if (this.eventBus) {\n                this.eventBus.emit(EventType_1.default.Warning, (e));\n            }\n        }\n    }\n    async initInitialReachableStops(state, query) {\n        const fromLocation = query.from[0];\n        // Making sure the departure location has an id\n        const geoId = Geo_1.default.getId(fromLocation);\n        if (!fromLocation.id) {\n            query.from[0].id = geoId;\n            query.from[0].name = \"Departure location\";\n        }\n        const reachableStops = await this.initialReachableStopsFinder.findReachableStops(fromLocation, ReachableStopsFinderMode_1.default.Source, query.maximumWalkingDuration, query.minimumWalkingSpeed, query.profileID);\n        // Abort when we can't reach a single stop.\n        if (reachableStops.length === 0) {\n            this.eventBus.emit(EventType_1.default.AbortQuery, \"No reachable stops at departure location\");\n            return false;\n        }\n        if (this.eventBus) {\n            this.eventBus.emit(EventType_1.default.InitialReachableStops, reachableStops);\n        }\n        for (const reachableStop of reachableStops) {\n            const { stop: stop, duration: duration } = reachableStop;\n            if (duration) {\n                // create a connection that resembles a footpath\n                // TODO, ditch the IReachbleStop and IConnection interfaces and make these proper objects\n                const transferConnection = {\n                    id: `MOVE_TO:${stop.id}`,\n                    tripId: `MOVE_TO:${stop.id}`,\n                    travelMode: TravelMode_1.default.Walking,\n                    departureTime: query.minimumDepartureTime,\n                    departureStop: fromLocation.id,\n                    arrivalTime: new Date(query.minimumDepartureTime.getTime() + duration),\n                    arrivalStop: stop.id,\n                    dropOffType: DropOffType_1.default.Regular,\n                    pickupType: PickupType_1.default.Regular,\n                    headsign: stop.id,\n                };\n                state.footpathsQueue.write(transferConnection);\n            }\n        }\n        return true;\n    }\n    async initFinalReachableStops(state, query) {\n        const toLocation = query.to[0];\n        // Making sure the departure location has an id\n        const geoId = Geo_1.default.getId(toLocation);\n        if (!toLocation.id) {\n            query.to[0].id = geoId;\n            query.to[0].name = \"Arrival location\";\n        }\n        const reachableStops = await this.finalReachableStopsFinder.findReachableStops(toLocation, ReachableStopsFinderMode_1.default.Target, query.maximumWalkingDuration, query.minimumWalkingSpeed, query.profileID);\n        // Abort when we can't reach a single stop.\n        if (reachableStops.length === 0) {\n            this.eventBus.emit(EventType_1.default.AbortQuery, \"No reachable stops at arrival location\");\n            return false;\n        }\n        if (this.eventBus) {\n            this.eventBus.emit(EventType_1.default.FinalReachableStops, reachableStops);\n        }\n        for (const reachableStop of reachableStops) {\n            if (reachableStop.duration > 0) {\n                state.finalReachableStops[reachableStop.stop.id] = {\n                    stop: toLocation,\n                    duration: reachableStop.duration,\n                };\n            }\n        }\n        return true;\n    }\n};\nCSAEarliestArrival = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.ConnectionsProvider)),\n    __param(1, inversify_1.inject(types_1.default.LocationResolver)),\n    __param(2, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(2, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer)),\n    __param(3, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(3, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial)),\n    __param(4, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(4, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Final)),\n    __metadata(\"design:paramtypes\", [Object, Object, Object, Object, Object])\n], CSAEarliestArrival);\nexports.default = CSAEarliestArrival;\n//# sourceMappingURL=CSAEarliestArrival.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst TravelMode_1 = __importDefault(require(\"../enums/TravelMode\"));\nconst Leg_1 = __importDefault(require(\"./Leg\"));\n/**\n * This Path class serves as an implementation of the [[IPath]] interface and as a home for some helper functions\n * related to [[IPath]] instances\n */\nclass Path {\n    constructor(legs, context) {\n        this.legs = legs;\n        if (context) {\n            this.context = context;\n        }\n        else {\n            this.context = {};\n        }\n    }\n    static create() {\n        return new Path([]);\n    }\n    /**\n     * Compare two [[IPath]] instances\n     * @returns true if the two paths are the same\n     */\n    static compareEquals(path, otherPath) {\n        if (path.legs.length !== otherPath.legs.length) {\n            return false;\n        }\n        return path.legs.every((leg, legIndex) => {\n            const otherLeg = otherPath.legs[legIndex];\n            return Leg_1.default.compareEquals(leg, otherLeg);\n        });\n    }\n    updateContext(other) {\n        this.context = Object.assign(this.context, other);\n    }\n    addToContext(id, value) {\n        this.context[id] = value;\n    }\n    getContext() {\n        return this.context;\n    }\n    getFromContext(id) {\n        return this.context[id];\n    }\n    prependLeg(leg) {\n        this.legs.unshift(leg);\n    }\n    appendLeg(leg) {\n        this.legs.push(leg);\n    }\n    addPath(path) {\n        this.legs.push(...path.legs);\n    }\n    getStartLocationId() {\n        return (\" \" + this.legs[0].getStartLocation().id).slice(1);\n    }\n    getDepartureTime(query) {\n        let acc = 0;\n        for (const leg of this.legs) {\n            if (leg.getStartTime()) {\n                return new Date(leg.getStartTime().getTime() - acc);\n            }\n            else {\n                acc += leg.getExpectedDuration();\n            }\n        }\n        return query.minimumDepartureTime;\n    }\n    getArrivalTime(query) {\n        let acc = 0;\n        for (let i = this.legs.length - 1; i >= 0; i--) {\n            const leg = this.legs[i];\n            if (leg.getStopTime()) {\n                return new Date(leg.getStopTime().getTime() + acc);\n            }\n            else {\n                acc += leg.getExpectedDuration();\n            }\n        }\n        return new Date(query.minimumDepartureTime.getTime() + acc);\n    }\n    getTravelTime(query) {\n        return this.getArrivalTime(query).getTime() - this.getDepartureTime(query).getTime();\n    }\n    getTransferTime(query) {\n        let time = this.getTravelTime(query);\n        for (const leg of this.legs) {\n            if (leg.getTravelMode() === TravelMode_1.default.Train || leg.getTravelMode() === TravelMode_1.default.Bus) {\n                time -= leg.getExpectedDuration();\n            }\n        }\n        return time;\n    }\n}\nexports.default = Path;\n//# sourceMappingURL=Path.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction getServiceIdentifierAsString(serviceIdentifier) {\n    if (typeof serviceIdentifier === \"function\") {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier.name;\n    }\n    else if (typeof serviceIdentifier === \"symbol\") {\n        return serviceIdentifier.toString();\n    }\n    else {\n        var _serviceIdentifier = serviceIdentifier;\n        return _serviceIdentifier;\n    }\n}\nexports.getServiceIdentifierAsString = getServiceIdentifierAsString;\nfunction listRegisteredBindingsForServiceIdentifier(container, serviceIdentifier, getBindings) {\n    var registeredBindingsList = \"\";\n    var registeredBindings = getBindings(container, serviceIdentifier);\n    if (registeredBindings.length !== 0) {\n        registeredBindingsList = \"\\nRegistered bindings:\";\n        registeredBindings.forEach(function (binding) {\n            var name = \"Object\";\n            if (binding.implementationType !== null) {\n                name = getFunctionName(binding.implementationType);\n            }\n            registeredBindingsList = registeredBindingsList + \"\\n \" + name;\n            if (binding.constraint.metaData) {\n                registeredBindingsList = registeredBindingsList + \" - \" + binding.constraint.metaData;\n            }\n        });\n    }\n    return registeredBindingsList;\n}\nexports.listRegisteredBindingsForServiceIdentifier = listRegisteredBindingsForServiceIdentifier;\nfunction alreadyDependencyChain(request, serviceIdentifier) {\n    if (request.parentRequest === null) {\n        return false;\n    }\n    else if (request.parentRequest.serviceIdentifier === serviceIdentifier) {\n        return true;\n    }\n    else {\n        return alreadyDependencyChain(request.parentRequest, serviceIdentifier);\n    }\n}\nfunction dependencyChainToString(request) {\n    function _createStringArr(req, result) {\n        if (result === void 0) { result = []; }\n        var serviceIdentifier = getServiceIdentifierAsString(req.serviceIdentifier);\n        result.push(serviceIdentifier);\n        if (req.parentRequest !== null) {\n            return _createStringArr(req.parentRequest, result);\n        }\n        return result;\n    }\n    var stringArr = _createStringArr(request);\n    return stringArr.reverse().join(\" --> \");\n}\nfunction circularDependencyToException(request) {\n    request.childRequests.forEach(function (childRequest) {\n        if (alreadyDependencyChain(childRequest, childRequest.serviceIdentifier)) {\n            var services = dependencyChainToString(childRequest);\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY + \" \" + services);\n        }\n        else {\n            circularDependencyToException(childRequest);\n        }\n    });\n}\nexports.circularDependencyToException = circularDependencyToException;\nfunction listMetadataForTarget(serviceIdentifierString, target) {\n    if (target.isTagged() || target.isNamed()) {\n        var m_1 = \"\";\n        var namedTag = target.getNamedTag();\n        var otherTags = target.getCustomTags();\n        if (namedTag !== null) {\n            m_1 += namedTag.toString() + \"\\n\";\n        }\n        if (otherTags !== null) {\n            otherTags.forEach(function (tag) {\n                m_1 += tag.toString() + \"\\n\";\n            });\n        }\n        return \" \" + serviceIdentifierString + \"\\n \" + serviceIdentifierString + \" - \" + m_1;\n    }\n    else {\n        return \" \" + serviceIdentifierString;\n    }\n}\nexports.listMetadataForTarget = listMetadataForTarget;\nfunction getFunctionName(v) {\n    if (v.name) {\n        return v.name;\n    }\n    else {\n        var name_1 = v.toString();\n        var match = name_1.match(/^function\\s*([^\\s(]+)/);\n        return match ? match[1] : \"Anonymous function: \" + name_1;\n    }\n}\nexports.getFunctionName = getFunctionName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass PathfindingGraph {\n    constructor(id) {\n        this.nodes = new Map();\n        this.labels = [];\n        this.adjacencyList = [];\n        this.reverseAdjacencyList = [];\n        this.id = id;\n        this.breakPoints = {};\n    }\n    addEdge(from, to, through, distance, duration, cost) {\n        const fromIndex = this.getNodeIndex(from);\n        const toIndex = this.getNodeIndex(to);\n        this.adjacencyList[fromIndex].push({ node: toIndex, through, distance, cost, duration });\n        this.reverseAdjacencyList[toIndex].push({ node: fromIndex, through, distance, cost, duration });\n    }\n    getNodeMap() {\n        return this.nodes;\n    }\n    getLabel(position) {\n        return this.labels[position];\n    }\n    getAdjacencyList() {\n        return this.adjacencyList;\n    }\n    getReverseAdjacencyList() {\n        return this.reverseAdjacencyList;\n    }\n    getNodeIndex(label) {\n        if (!this.nodes.has(label)) {\n            const index = this.adjacencyList.length;\n            this.nodes.set(label, index);\n            this.labels.push(label);\n            this.adjacencyList.push([]);\n            this.reverseAdjacencyList.push([]);\n        }\n        return this.nodes.get(label);\n    }\n    setBreakPoint(on, callback) {\n        const position = this.getNodeIndex(on);\n        this.breakPoints[position] = callback;\n    }\n    getBreakPoint(position) {\n        return this.breakPoints[position];\n    }\n    removeBreakPoint(on) {\n        const position = this.getNodeIndex(on);\n        delete this.breakPoints[position];\n    }\n}\nexports.default = PathfindingGraph;\n//# sourceMappingURL=graph.js.map","exports = module.exports = require('./lib/_stream_readable.js');\nexports.Stream = exports;\nexports.Readable = exports;\nexports.Writable = require('./lib/_stream_writable.js');\nexports.Duplex = require('./lib/_stream_duplex.js');\nexports.Transform = require('./lib/_stream_transform.js');\nexports.PassThrough = require('./lib/_stream_passthrough.js');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\n\nfunction isArray(arg) {\n  if (Array.isArray) {\n    return Array.isArray(arg);\n  }\n  return objectToString(arg) === '[object Array]';\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = Buffer.isBuffer;\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n","var RDF  = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#',\n    XSD  = 'http://www.w3.org/2001/XMLSchema#',\n    SWAP = 'http://www.w3.org/2000/10/swap/';\n\nexport default {\n  xsd: {\n    decimal: XSD + 'decimal',\n    boolean: XSD + 'boolean',\n    double:  XSD + 'double',\n    integer: XSD + 'integer',\n    string:  XSD + 'string',\n  },\n  rdf: {\n    type:       RDF + 'type',\n    nil:        RDF + 'nil',\n    first:      RDF + 'first',\n    rest:       RDF + 'rest',\n    langString: RDF + 'langString',\n  },\n  owl: {\n    sameAs: 'http://www.w3.org/2002/07/owl#sameAs',\n  },\n  r: {\n    forSome: SWAP + 'reify#forSome',\n    forAll:  SWAP + 'reify#forAll',\n  },\n  log: {\n    implies: SWAP + 'log#implies',\n  },\n};\n","/**\n * Node.js module for Forge.\n *\n * @author Dave Longley\n *\n * Copyright 2011-2016 Digital Bazaar, Inc.\n */\nmodule.exports = {\n  // default options\n  options: {\n    usePureJavaScript: false\n  }\n};\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst RDF = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\nconst XSD = 'http://www.w3.org/2001/XMLSchema#';\n\nmodule.exports = {\n  LINK_HEADER_REL: 'http://www.w3.org/ns/json-ld#context',\n\n  RDF,\n  RDF_LIST: RDF + 'List',\n  RDF_FIRST: RDF + 'first',\n  RDF_REST: RDF + 'rest',\n  RDF_NIL: RDF + 'nil',\n  RDF_TYPE: RDF + 'type',\n  RDF_PLAIN_LITERAL: RDF + 'PlainLiteral',\n  RDF_XML_LITERAL: RDF + 'XMLLiteral',\n  RDF_JSON_LITERAL: RDF + 'JSON',\n  RDF_OBJECT: RDF + 'object',\n  RDF_LANGSTRING: RDF + 'langString',\n\n  XSD,\n  XSD_BOOLEAN: XSD + 'boolean',\n  XSD_DOUBLE: XSD + 'double',\n  XSD_INTEGER: XSD + 'integer',\n  XSD_STRING: XSD + 'string',\n};\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst types = require('./types');\n\nconst api = {};\nmodule.exports = api;\n\n// define URL parser\n// parseUri 1.2.2\n// (c) Steven Levithan <stevenlevithan.com>\n// MIT License\n// with local jsonld.js modifications\napi.parsers = {\n  simple: {\n    // RFC 3986 basic parts\n    keys: [\n      'href', 'scheme', 'authority', 'path', 'query', 'fragment'\n    ],\n    /* eslint-disable-next-line max-len */\n    regex: /^(?:([^:\\/?#]+):)?(?:\\/\\/([^\\/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?/\n  },\n  full: {\n    keys: [\n      'href', 'protocol', 'scheme', 'authority', 'auth', 'user', 'password',\n      'hostname', 'port', 'path', 'directory', 'file', 'query', 'fragment'\n    ],\n    /* eslint-disable-next-line max-len */\n    regex: /^(([^:\\/?#]+):)?(?:\\/\\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?))?(?:(((?:[^?#\\/]*\\/)*)([^?#]*))(?:\\?([^#]*))?(?:#(.*))?)/\n  }\n};\napi.parse = (str, parser) => {\n  const parsed = {};\n  const o = api.parsers[parser || 'full'];\n  const m = o.regex.exec(str);\n  let i = o.keys.length;\n  while(i--) {\n    parsed[o.keys[i]] = (m[i] === undefined) ? null : m[i];\n  }\n\n  // remove default ports in found in URLs\n  if((parsed.scheme === 'https' && parsed.port === '443') ||\n    (parsed.scheme === 'http' && parsed.port === '80')) {\n    parsed.href = parsed.href.replace(':' + parsed.port, '');\n    parsed.authority = parsed.authority.replace(':' + parsed.port, '');\n    parsed.port = null;\n  }\n\n  parsed.normalizedPath = api.removeDotSegments(parsed.path);\n  return parsed;\n};\n\n/**\n * Prepends a base IRI to the given relative IRI.\n *\n * @param base the base IRI.\n * @param iri the relative IRI.\n *\n * @return the absolute IRI.\n */\napi.prependBase = (base, iri) => {\n  // skip IRI processing\n  if(base === null) {\n    return iri;\n  }\n  // already an absolute IRI\n  if(iri.indexOf(':') !== -1) {\n    return iri;\n  }\n\n  // parse base if it is a string\n  if(types.isString(base)) {\n    base = api.parse(base || '');\n  }\n\n  // parse given IRI\n  const rel = api.parse(iri);\n\n  // per RFC3986 5.2.2\n  const transform = {\n    protocol: base.protocol || ''\n  };\n\n  if(rel.authority !== null) {\n    transform.authority = rel.authority;\n    transform.path = rel.path;\n    transform.query = rel.query;\n  } else {\n    transform.authority = base.authority;\n\n    if(rel.path === '') {\n      transform.path = base.path;\n      if(rel.query !== null) {\n        transform.query = rel.query;\n      } else {\n        transform.query = base.query;\n      }\n    } else {\n      if(rel.path.indexOf('/') === 0) {\n        // IRI represents an absolute path\n        transform.path = rel.path;\n      } else {\n        // merge paths\n        let path = base.path;\n\n        // append relative path to the end of the last directory from base\n        path = path.substr(0, path.lastIndexOf('/') + 1);\n        if(path.length > 0 && path.substr(-1) !== '/') {\n          path += '/';\n        }\n        path += rel.path;\n\n        transform.path = path;\n      }\n      transform.query = rel.query;\n    }\n  }\n\n  if(rel.path !== '') {\n    // remove slashes and dots in path\n    transform.path = api.removeDotSegments(transform.path);\n  }\n\n  // construct URL\n  let rval = transform.protocol;\n  if(transform.authority !== null) {\n    rval += '//' + transform.authority;\n  }\n  rval += transform.path;\n  if(transform.query !== null) {\n    rval += '?' + transform.query;\n  }\n  if(rel.fragment !== null) {\n    rval += '#' + rel.fragment;\n  }\n\n  // handle empty base\n  if(rval === '') {\n    rval = './';\n  }\n\n  return rval;\n};\n\n/**\n * Removes a base IRI from the given absolute IRI.\n *\n * @param base the base IRI.\n * @param iri the absolute IRI.\n *\n * @return the relative IRI if relative to base, otherwise the absolute IRI.\n */\napi.removeBase = (base, iri) => {\n  // skip IRI processing\n  if(base === null) {\n    return iri;\n  }\n\n  if(types.isString(base)) {\n    base = api.parse(base || '');\n  }\n\n  // establish base root\n  let root = '';\n  if(base.href !== '') {\n    root += (base.protocol || '') + '//' + (base.authority || '');\n  } else if(iri.indexOf('//')) {\n    // support network-path reference with empty base\n    root += '//';\n  }\n\n  // IRI not relative to base\n  if(iri.indexOf(root) !== 0) {\n    return iri;\n  }\n\n  // remove root from IRI and parse remainder\n  const rel = api.parse(iri.substr(root.length));\n\n  // remove path segments that match (do not remove last segment unless there\n  // is a hash or query)\n  const baseSegments = base.normalizedPath.split('/');\n  const iriSegments = rel.normalizedPath.split('/');\n  const last = (rel.fragment || rel.query) ? 0 : 1;\n  while(baseSegments.length > 0 && iriSegments.length > last) {\n    if(baseSegments[0] !== iriSegments[0]) {\n      break;\n    }\n    baseSegments.shift();\n    iriSegments.shift();\n  }\n\n  // use '../' for each non-matching base segment\n  let rval = '';\n  if(baseSegments.length > 0) {\n    // don't count the last segment (if it ends with '/' last path doesn't\n    // count and if it doesn't end with '/' it isn't a path)\n    baseSegments.pop();\n    for(let i = 0; i < baseSegments.length; ++i) {\n      rval += '../';\n    }\n  }\n\n  // prepend remaining segments\n  rval += iriSegments.join('/');\n\n  // add query and hash\n  if(rel.query !== null) {\n    rval += '?' + rel.query;\n  }\n  if(rel.fragment !== null) {\n    rval += '#' + rel.fragment;\n  }\n\n  // handle empty base\n  if(rval === '') {\n    rval = './';\n  }\n\n  return rval;\n};\n\n/**\n * Removes dot segments from a URL path.\n *\n * @param path the path to remove dot segments from.\n */\napi.removeDotSegments = path => {\n  // RFC 3986 5.2.4 (reworked)\n\n  // empty path shortcut\n  if(path.length === 0) {\n    return '';\n  }\n\n  const input = path.split('/');\n  const output = [];\n\n  while(input.length > 0) {\n    const next = input.shift();\n    const done = input.length === 0;\n\n    if(next === '.') {\n      if(done) {\n        // ensure output has trailing /\n        output.push('');\n      }\n      continue;\n    }\n\n    if(next === '..') {\n      output.pop();\n      if(done) {\n        // ensure output has trailing /\n        output.push('');\n      }\n      continue;\n    }\n\n    output.push(next);\n  }\n\n  // ensure output has leading /\n  if(output.length > 0 && output[0] !== '') {\n    output.unshift('');\n  }\n  if(output.length === 1 && output[0] === '') {\n    return '/';\n  }\n\n  return output.join('/');\n};\n\n// TODO: time better isAbsolute/isRelative checks using full regexes:\n// http://jmrware.com/articles/2009/uri_regexp/URI_regex.html\n\n// regex to check for absolute IRI (starting scheme and ':') or blank node IRI\nconst isAbsoluteRegex = /^([A-Za-z][A-Za-z0-9+-.]*|_):/;\n\n/**\n * Returns true if the given value is an absolute IRI or blank node IRI, false\n * if not.\n * Note: This weak check only checks for a correct starting scheme.\n *\n * @param v the value to check.\n *\n * @return true if the value is an absolute IRI, false if not.\n */\napi.isAbsolute = v => types.isString(v) && isAbsoluteRegex.test(v);\n\n/**\n * Returns true if the given value is a relative IRI, false if not.\n * Note: this is a weak check.\n *\n * @param v the value to check.\n *\n * @return true if the value is a relative IRI, false if not.\n */\napi.isRelative = v => types.isString(v);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst constants_1 = require(\"../../uri/constants\");\nconst uri_1 = __importDefault(require(\"../../uri/uri\"));\nconst single_1 = require(\"../results/single\");\nclass ThingView {\n    constructor(entityType) {\n        this.entityType = entityType;\n        this.filters = [];\n        this.mappings = {};\n        this.nestedViews = {};\n        this.showId = true;\n        this.resultObject = this.createResultObject();\n    }\n    addEntity(entity) {\n        this.resultObject.addEntity(entity);\n    }\n    getContents() {\n        return this.resultObject.getContents();\n    }\n    hideId() {\n        this.showId = false;\n    }\n    addFilter(fn) {\n        this.filters.push(fn);\n    }\n    addMapping(from, to, view) {\n        this.mappings[from] = to;\n        this.nestedViews[from] = view;\n    }\n    process(entity) {\n        if (this._filter(entity)) {\n            return this._map(entity);\n        }\n    }\n    createResultObject() {\n        return new single_1.SingleThingViewResult();\n    }\n    _filter(entity) {\n        let ok = true;\n        for (const fn of this.filters) {\n            if (!fn(entity)) {\n                ok = false;\n                break;\n            }\n        }\n        return ok;\n    }\n    _makeList(element) {\n        let current = element;\n        const list = [current[uri_1.default.inNS(constants_1.RDF, \"first\")]];\n        let rest = current[uri_1.default.inNS(constants_1.RDF, \"rest\")];\n        while (rest && rest !== uri_1.default.inNS(constants_1.RDF, \"nil\")) {\n            current = rest;\n            list.push(current[uri_1.default.inNS(constants_1.RDF, \"first\")]);\n            rest = current[uri_1.default.inNS(constants_1.RDF, \"rest\")];\n        }\n        return list;\n    }\n    _flattenLists(entity) {\n        for (const kv of Object.entries(entity)) {\n            const [field, entityValue] = kv;\n            if (Array.isArray(entityValue)) {\n                for (const v of entityValue.entries()) {\n                    const [valueElementIndex, valueElement] = v;\n                    if (valueElement[uri_1.default.inNS(constants_1.RDF, \"first\")]) {\n                        const list = this._makeList(valueElement);\n                        entityValue[valueElementIndex] = list;\n                    }\n                }\n            }\n            if (entityValue[uri_1.default.inNS(constants_1.RDF, \"first\")]) {\n                // this value should become an array\n                entity[field] = this._makeList(entityValue);\n            }\n        }\n    }\n    _map(entity) {\n        this._flattenLists(entity);\n        let result;\n        if (this.showId) {\n            result = this.entityType(entity.id);\n        }\n        else {\n            result = this.entityType();\n        }\n        for (const kv of Object.entries(entity)) {\n            const field = kv[0];\n            let value = kv[1];\n            const fieldView = this.nestedViews[field];\n            if (fieldView) {\n                if (Array.isArray(value)) {\n                    value = value.map((v) => fieldView.process(v));\n                }\n                else {\n                    value = fieldView.process(value);\n                }\n            }\n            const destinationField = this.mappings[field];\n            if (destinationField) {\n                result[destinationField] = value;\n            }\n        }\n        return result;\n    }\n}\nexports.ThingView = ThingView;\n//# sourceMappingURL=single.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\n/**\n * AsyncIterator that merges a number of source asynciterators based on the passed selector function.\n *\n * The selector function gets passed an array of values read from each of the asynciterators.\n * Values can be undefined if their respective source iterator has ended.\n * The selector function should return the index in that array of the value to select.\n */\nclass MergeIterator extends asynciterator_1.AsyncIterator {\n    /**\n     * @param sourceIterators\n     * @param selector\n     * @param condensed When true, undefined values are filtered from the array passed to the selector function\n     */\n    constructor(sourceIterators, selector, condensed = false) {\n        super();\n        this.sourceIterators = sourceIterators;\n        this.selector = selector;\n        this.setMaxListeners(1000);\n        this.values = Array(this.sourceIterators.length).fill(undefined);\n        this.waitingForFill = Array(this.sourceIterators.length).fill(false);\n        this.readable = true;\n        this.condensed = condensed;\n        this.addListeners();\n    }\n    read() {\n        const allFilled = this.fillValues();\n        if (!allFilled) {\n            this.readable = false;\n            return null;\n        }\n        let selectedIndex;\n        if (this.condensed) {\n            const { values, indexMap } = this.getCondensedValues();\n            selectedIndex = indexMap[this.selector(values)];\n        }\n        else {\n            selectedIndex = this.selector(this.values);\n        }\n        const item = this.values[selectedIndex];\n        this.values[selectedIndex] = undefined;\n        this.readable = false;\n        return item;\n    }\n    close() {\n        for (const iterator of this.sourceIterators) {\n            iterator.close();\n        }\n        super.close();\n    }\n    fillValues() {\n        const allWaiting = this.waitingForFill.every((waiting) => waiting);\n        if (allWaiting) {\n            return false;\n        }\n        const allFilled = this.values.every((value) => value !== undefined);\n        if (allFilled) {\n            return true;\n        }\n        const allEnded = this.sourceIterators.every((iterator) => iterator.ended);\n        if (allEnded) {\n            return false;\n        }\n        let filledValues = 0;\n        const filled = () => {\n            filledValues++;\n            if (filledValues === this.sourceIterators.length) {\n                this.readable = true;\n            }\n        };\n        for (let sourceIndex = 0; sourceIndex < this.sourceIterators.length; sourceIndex++) {\n            if (this.sourceIterators[sourceIndex].ended) {\n                filled();\n                continue;\n            }\n            if (this.values[sourceIndex] !== undefined && this.values[sourceIndex] !== null) {\n                filled();\n            }\n            else {\n                this.fillValue(sourceIndex, filled);\n            }\n        }\n        return filledValues === this.sourceIterators.length;\n    }\n    fillValue(sourceIndex, filled) {\n        const iterator = this.sourceIterators[sourceIndex];\n        const value = iterator.read();\n        if (value || (!iterator.closed && iterator.readable)) {\n            this.values[sourceIndex] = value;\n            filled();\n        }\n        else {\n            const shouldWait = !this.waitingForFill[sourceIndex];\n            if (shouldWait) {\n                this.waitingForFill[sourceIndex] = true;\n                this.waitForValue(sourceIndex, filled);\n            }\n        }\n    }\n    waitForValue(sourceIndex, filled) {\n        const iterator = this.sourceIterators[sourceIndex];\n        if (iterator.ended) {\n            filled();\n            return;\n        }\n        iterator.once(\"readable\", () => {\n            const value = iterator.read();\n            if (value === null) {\n                this.waitForValue(sourceIndex, filled);\n            }\n            else {\n                this.values[sourceIndex] = value;\n                this.waitingForFill[sourceIndex] = false;\n                filled();\n            }\n        });\n    }\n    getCondensedValues() {\n        const values = [];\n        const indexMap = [];\n        this.values\n            .forEach((value, originalIndex) => {\n            if (value !== undefined && value !== null) {\n                values.push(value);\n                indexMap.push(originalIndex);\n            }\n        }, {});\n        return { values, indexMap };\n    }\n    addListeners() {\n        const self = this;\n        for (const iterator of this.sourceIterators) {\n            iterator.on(\"end\", () => {\n                const allEnded = this.sourceIterators.every((iter) => iter.ended);\n                if (allEnded) {\n                    this.close();\n                }\n            });\n        }\n    }\n}\nexports.default = MergeIterator;\n//# sourceMappingURL=MergeIterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction forwardsConnectionSelector(connections) {\n    if (connections.length === 1) {\n        return 0;\n    }\n    let earliestIndex = 0;\n    let earliest = connections[earliestIndex];\n    for (let i = 1; i < connections.length; i++) {\n        const connection = connections[i];\n        if (connection.departureTime < earliest.departureTime) {\n            earliestIndex = i;\n            earliest = connection;\n        }\n        else if (connection.departureTime === earliest.departureTime\n            && connection.arrivalTime < earliest.arrivalTime) {\n            earliestIndex = i;\n            earliest = connection;\n        }\n    }\n    return earliestIndex;\n}\nexports.forwardsConnectionSelector = forwardsConnectionSelector;\nfunction backwardsConnectionsSelector(connections) {\n    if (connections.length === 1) {\n        return 0;\n    }\n    let latestIndex = 0;\n    let latest = connections[latestIndex];\n    for (let i = 1; i < connections.length; i++) {\n        const connection = connections[i];\n        if (connection.departureTime > latest.departureTime) {\n            latestIndex = i;\n            latest = connection;\n        }\n    }\n    return latestIndex;\n}\nexports.backwardsConnectionsSelector = backwardsConnectionsSelector;\n//# sourceMappingURL=ConnectionSelectors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar DropOffType;\n(function (DropOffType) {\n    DropOffType[\"Regular\"] = \"http://vocab.gtfs.org/terms#Regular\";\n    DropOffType[\"NotAvailable\"] = \"http://vocab.gtfs.org/terms#NotAvailable\";\n    DropOffType[\"MustPhone\"] = \"http://vocab.gtfs.org/terms#MustPhone\";\n    DropOffType[\"MustCoordinateWithDriver\"] = \"http://vocab.gtfs.org/terms#MustCoordinateWithDriver\";\n})(DropOffType || (DropOffType = {}));\nexports.default = DropOffType;\n//# sourceMappingURL=DropOffType.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Step_1 = __importDefault(require(\"./Step\"));\nclass Leg {\n    constructor(travelMode, steps) {\n        this.travelMode = travelMode;\n        this.steps = steps;\n    }\n    static compareEquals(leg, otherLeg) {\n        if (leg.getSteps().length !== otherLeg.getSteps().length) {\n            return false;\n        }\n        if (otherLeg.getTravelMode() !== leg.getTravelMode()) {\n            return false;\n        }\n        return leg.getSteps().every((step, stepIndex) => {\n            const otherStep = otherLeg.getSteps()[stepIndex];\n            return Step_1.default.compareEquals(step, otherStep);\n        });\n    }\n    getExpectedDuration() {\n        return this.getAverageDuration() || this.getMinimumDuration() || this.getMaximumDuration();\n    }\n    getMinimumDuration() {\n        return this.steps.reduce((previous, current) => {\n            return previous + current.duration.minimum;\n        }, 0);\n    }\n    getAverageDuration() {\n        // the average of averages isn't really the average of the whole series\n        // but this will have to do\n        return this.steps.reduce((previous, current) => {\n            return previous + current.duration.average;\n        }, 0);\n    }\n    getMaximumDuration() {\n        return this.steps.reduce((previous, current) => {\n            return previous + current.duration.maximum;\n        }, 0);\n    }\n    getDistance() {\n        return this.steps.reduce((previous, current) => {\n            return previous + current.distance;\n        }, 0);\n    }\n    getTravelMode() {\n        return this.travelMode;\n    }\n    getSteps() {\n        return this.steps;\n    }\n    getStartTime() {\n        if (this.steps.length > 0) {\n            return this.steps[0].startTime;\n        }\n    }\n    getStopTime() {\n        if (this.steps.length > 0) {\n            return this.steps[this.steps.length - 1].stopTime;\n        }\n    }\n    getStartLocation() {\n        if (this.steps.length > 0) {\n            return this.steps[0].startLocation;\n        }\n    }\n    getStopLocation() {\n        if (this.steps.length > 0) {\n            return this.steps[this.steps.length - 1].stopLocation;\n        }\n    }\n}\nexports.default = Leg;\n//# sourceMappingURL=Leg.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_promiseproxy_1 = require(\"asynciterator-promiseproxy\");\nconst inversify_1 = require(\"inversify\");\nconst Defaults_1 = __importDefault(require(\"../../Defaults\"));\nconst InvalidQueryError_1 = __importDefault(require(\"../../errors/InvalidQueryError\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst Path_1 = __importDefault(require(\"../../planner/Path\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst FilterUniqueIterator_1 = __importDefault(require(\"../../util/iterators/FilterUniqueIterator\"));\nconst FlatMapIterator_1 = __importDefault(require(\"../../util/iterators/FlatMapIterator\"));\nconst Units_1 = __importDefault(require(\"../../util/Units\"));\nconst ExponentialQueryIterator_1 = __importDefault(require(\"./ExponentialQueryIterator\"));\n/**\n * To improve the user perceived performance, the query gets split into subqueries\n * with exponentially increasing time frames:\n *\n * ```\n * minimumDepartureTime + 15 minutes, 30 minutes, 60 minutes, 120 minutes...\n * ```\n *\n * In the current implementation, the `maximumArrivalTime` is ignored\n */\nlet QueryRunnerExponential = class QueryRunnerExponential {\n    constructor(locationResolver, publicTransportPlannerFactory, roadPlanner) {\n        this.eventBus = EventBus_1.default.getInstance();\n        this.locationResolver = locationResolver;\n        this.publicTransportPlannerFactory = publicTransportPlannerFactory;\n        this.roadPlanner = roadPlanner;\n    }\n    async run(query) {\n        const baseQuery = await this.resolveBaseQuery(query);\n        if (baseQuery.roadNetworkOnly) {\n            return this.roadPlanner.plan(baseQuery);\n        }\n        else {\n            const queryIterator = new ExponentialQueryIterator_1.default(baseQuery, 15 * 60 * 1000);\n            const subqueryIterator = new FlatMapIterator_1.default(queryIterator, this.runSubquery.bind(this));\n            return new FilterUniqueIterator_1.default(subqueryIterator, Path_1.default.compareEquals);\n        }\n    }\n    runSubquery(query) {\n        // TODO investigate if publicTransportPlanner can be reused or reuse some of its aggregated data\n        this.eventBus.emit(EventType_1.default.SubQuery, query);\n        const planner = this.publicTransportPlannerFactory();\n        return new asynciterator_promiseproxy_1.PromiseProxyIterator(() => planner.plan(query));\n    }\n    async resolveEndpoint(endpoint) {\n        if (Array.isArray(endpoint)) {\n            const promises = endpoint\n                .map((singleEndpoint) => this.locationResolver.resolve(singleEndpoint));\n            return await Promise.all(promises);\n        }\n        else {\n            return [await this.locationResolver.resolve(endpoint)];\n        }\n    }\n    async resolveBaseQuery(query) {\n        // tslint:disable:trailing-comma\n        const { minimumWalkingSpeed, maximumWalkingSpeed, walkingSpeed, maximumWalkingDuration, maximumWalkingDistance, minimumTransferDuration, maximumTransferDuration, maximumTransferDistance, maximumTransfers, minimumDepartureTime, excludedTravelModes } = query, other = __rest(query, [\"minimumWalkingSpeed\", \"maximumWalkingSpeed\", \"walkingSpeed\", \"maximumWalkingDuration\", \"maximumWalkingDistance\", \"minimumTransferDuration\", \"maximumTransferDuration\", \"maximumTransferDistance\", \"maximumTransfers\", \"minimumDepartureTime\", \"excludedTravelModes\"]);\n        // tslint:enable:trailing-comma\n        // make a deep copy of these\n        let { from, to } = other;\n        from = JSON.parse(JSON.stringify(from));\n        to = JSON.parse(JSON.stringify(to));\n        const resolvedQuery = Object.assign({}, other);\n        if (excludedTravelModes) {\n            resolvedQuery.excludedTravelModes = new Set(excludedTravelModes);\n        }\n        resolvedQuery.minimumDepartureTime = minimumDepartureTime || new Date();\n        try {\n            resolvedQuery.from = await this.resolveEndpoint(from);\n            resolvedQuery.to = await this.resolveEndpoint(to);\n        }\n        catch (e) {\n            return Promise.reject(new InvalidQueryError_1.default(e));\n        }\n        resolvedQuery.minimumWalkingSpeed = minimumWalkingSpeed || walkingSpeed || Defaults_1.default.defaultMinimumWalkingSpeed;\n        resolvedQuery.maximumWalkingSpeed = maximumWalkingSpeed || walkingSpeed || Defaults_1.default.defaultMaximumWalkingSpeed;\n        resolvedQuery.maximumWalkingDuration = maximumWalkingDuration ||\n            Units_1.default.toDuration(maximumWalkingDistance, resolvedQuery.minimumWalkingSpeed) || Defaults_1.default.defaultWalkingDuration;\n        resolvedQuery.minimumTransferDuration = minimumTransferDuration || Defaults_1.default.defaultMinimumTransferDuration;\n        resolvedQuery.maximumTransferDuration = maximumTransferDuration ||\n            Units_1.default.toDuration(maximumTransferDistance, resolvedQuery.minimumWalkingSpeed) ||\n            Defaults_1.default.defaultMaximumTransferDuration;\n        resolvedQuery.maximumTransfers = maximumTransfers || Defaults_1.default.defaultMaximumTransfers;\n        return resolvedQuery;\n    }\n};\nQueryRunnerExponential = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LocationResolver)),\n    __param(1, inversify_1.inject(types_1.default.PublicTransportPlannerFactory)),\n    __param(2, inversify_1.inject(types_1.default.RoadPlanner)),\n    __metadata(\"design:paramtypes\", [Object, Function, Object])\n], QueryRunnerExponential);\nexports.default = QueryRunnerExponential;\n//# sourceMappingURL=QueryRunnerExponential.js.map","export default function _getPrototypeOf(o) {\n  _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) {\n    return o.__proto__ || Object.getPrototypeOf(o);\n  };\n  return _getPrototypeOf(o);\n}","export default function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}","import getPrototypeOf from \"./getPrototypeOf\";\nimport isNativeReflectConstruct from \"./isNativeReflectConstruct\";\nimport possibleConstructorReturn from \"./possibleConstructorReturn\";\nexport default function _createSuper(Derived) {\n  return function () {\n    var Super = getPrototypeOf(Derived),\n        result;\n\n    if (isNativeReflectConstruct()) {\n      var NewTarget = getPrototypeOf(this).constructor;\n      result = Reflect.construct(Super, arguments, NewTarget);\n    } else {\n      result = Super.apply(this, arguments);\n    }\n\n    return possibleConstructorReturn(this, result);\n  };\n}","export default function _setPrototypeOf(o, p) {\n  _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}","import setPrototypeOf from \"./setPrototypeOf\";\nexport default function _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function\");\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) setPrototypeOf(subClass, superClass);\n}","export default function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}","/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof global === \"object\" ? global :\n            typeof self === \"object\" ? self :\n                typeof this === \"object\" ? this :\n                    Function(\"return this;\")();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        else {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter);\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                if (typeof target[key] !== \"function\") {\n                    Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                }\n                if (previous)\n                    previous(key, value);\n            };\n        }\n    })(function (exporter) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var usePolyfill = typeof process === \"object\" && process.env && process.env[\"REFLECT_METADATA_USE_MAP_POLYFILL\"] === \"true\";\n        var _Map = !usePolyfill && typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = !usePolyfill && typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = !usePolyfill && typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        // [[Metadata]] internal slot\n        // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n        var Metadata = new _WeakMap();\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var metadataMap = GetOrCreateMetadataMap(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            if (!metadataMap.delete(metadataKey))\n                return false;\n            if (metadataMap.size > 0)\n                return true;\n            var targetMetadata = Metadata.get(target);\n            targetMetadata.delete(propertyKey);\n            if (targetMetadata.size > 0)\n                return true;\n            Metadata.delete(target);\n            return true;\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        function GetOrCreateMetadataMap(O, P, Create) {\n            var targetMetadata = Metadata.get(O);\n            if (IsUndefined(targetMetadata)) {\n                if (!Create)\n                    return undefined;\n                targetMetadata = new _Map();\n                Metadata.set(O, targetMetadata);\n            }\n            var metadataMap = targetMetadata.get(P);\n            if (IsUndefined(metadataMap)) {\n                if (!Create)\n                    return undefined;\n                metadataMap = new _Map();\n                targetMetadata.set(P, metadataMap);\n            }\n            return metadataMap;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return false;\n            return ToBoolean(metadataMap.has(MetadataKey));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return undefined;\n            return metadataMap.get(MetadataKey);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n            metadataMap.set(MetadataKey, MetadataValue);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var keys = [];\n            var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n            if (IsUndefined(metadataMap))\n                return keys;\n            var keysObj = metadataMap.keys();\n            var iterator = GetIterator(keysObj);\n            var k = 0;\n            while (true) {\n                var next = IteratorStep(iterator);\n                if (!next) {\n                    keys.length = k;\n                    return keys;\n                }\n                var nextValue = IteratorValue(next);\n                try {\n                    keys[k] = nextValue;\n                }\n                catch (e) {\n                    try {\n                        IteratorClose(iterator);\n                    }\n                    finally {\n                        throw e;\n                    }\n                }\n                k++;\n            }\n        }\n        // 6 ECMAScript Data Typ0es and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            return /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (key === this._cacheKey) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (this._cacheKey !== key) {\n                        this._cacheIndex = this._keys.indexOf(this._cacheKey = key);\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            return /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.values(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    if (typeof crypto !== \"undefined\")\n                        return crypto.getRandomValues(new Uint8Array(size));\n                    if (typeof msCrypto !== \"undefined\")\n                        return msCrypto.getRandomValues(new Uint8Array(size));\n                    return FillRandomBytes(new Uint8Array(size), size);\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(n);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","'use strict';\n\nif (typeof process === 'undefined' ||\n    !process.version ||\n    process.version.indexOf('v0.') === 0 ||\n    process.version.indexOf('v1.') === 0 && process.version.indexOf('v1.8.') !== 0) {\n  module.exports = { nextTick: nextTick };\n} else {\n  module.exports = process\n}\n\nfunction nextTick(fn, arg1, arg2, arg3) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('\"callback\" argument must be a function');\n  }\n  var len = arguments.length;\n  var args, i;\n  switch (len) {\n  case 0:\n  case 1:\n    return process.nextTick(fn);\n  case 2:\n    return process.nextTick(function afterTickOne() {\n      fn.call(null, arg1);\n    });\n  case 3:\n    return process.nextTick(function afterTickTwo() {\n      fn.call(null, arg1, arg2);\n    });\n  case 4:\n    return process.nextTick(function afterTickThree() {\n      fn.call(null, arg1, arg2, arg3);\n    });\n  default:\n    args = new Array(len - 1);\n    i = 0;\n    while (i < args.length) {\n      args[i++] = arguments[i];\n    }\n    return process.nextTick(function afterTick() {\n      fn.apply(null, args);\n    });\n  }\n}\n\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nvar setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeFunction = require(\"./isNativeFunction\");\n\nvar construct = require(\"./construct\");\n\nfunction _wrapNativeSuper(Class) {\n  var _cache = typeof Map === \"function\" ? new Map() : undefined;\n\n  module.exports = _wrapNativeSuper = function _wrapNativeSuper(Class) {\n    if (Class === null || !isNativeFunction(Class)) return Class;\n\n    if (typeof Class !== \"function\") {\n      throw new TypeError(\"Super expression must either be null or a function\");\n    }\n\n    if (typeof _cache !== \"undefined\") {\n      if (_cache.has(Class)) return _cache.get(Class);\n\n      _cache.set(Class, Wrapper);\n    }\n\n    function Wrapper() {\n      return construct(Class, arguments, getPrototypeOf(this).constructor);\n    }\n\n    Wrapper.prototype = Object.create(Class.prototype, {\n      constructor: {\n        value: Wrapper,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n    return setPrototypeOf(Wrapper, Class);\n  };\n\n  return _wrapNativeSuper(Class);\n}\n\nmodule.exports = _wrapNativeSuper;","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {isKeyword} = require('./context');\nconst graphTypes = require('./graphTypes');\nconst types = require('./types');\nconst util = require('./util');\nconst JsonLdError = require('./JsonLdError');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Creates a merged JSON-LD node map (node ID => node).\n *\n * @param input the expanded JSON-LD to create a node map of.\n * @param [options] the options to use:\n *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.\n *\n * @return the node map.\n */\napi.createMergedNodeMap = (input, options) => {\n  options = options || {};\n\n  // produce a map of all subjects and name each bnode\n  const issuer = options.issuer || new util.IdentifierIssuer('_:b');\n  const graphs = {'@default': {}};\n  api.createNodeMap(input, graphs, '@default', issuer);\n\n  // add all non-default graphs to default graph\n  return api.mergeNodeMaps(graphs);\n};\n\n/**\n * Recursively flattens the subjects in the given JSON-LD expanded input\n * into a node map.\n *\n * @param input the JSON-LD expanded input.\n * @param graphs a map of graph name to subject map.\n * @param graph the name of the current graph.\n * @param issuer the blank node identifier issuer.\n * @param name the name assigned to the current input if it is a bnode.\n * @param list the list to append to, null for none.\n */\napi.createNodeMap = (input, graphs, graph, issuer, name, list) => {\n  // recurse through array\n  if(types.isArray(input)) {\n    for(const node of input) {\n      api.createNodeMap(node, graphs, graph, issuer, undefined, list);\n    }\n    return;\n  }\n\n  // add non-object to list\n  if(!types.isObject(input)) {\n    if(list) {\n      list.push(input);\n    }\n    return;\n  }\n\n  // add values to list\n  if(graphTypes.isValue(input)) {\n    if('@type' in input) {\n      let type = input['@type'];\n      // rename @type blank node\n      if(type.indexOf('_:') === 0) {\n        input['@type'] = type = issuer.getId(type);\n      }\n    }\n    if(list) {\n      list.push(input);\n    }\n    return;\n  } else if(list && graphTypes.isList(input)) {\n    const _list = [];\n    api.createNodeMap(input['@list'], graphs, graph, issuer, name, _list);\n    list.push({'@list': _list});\n    return;\n  }\n\n  // Note: At this point, input must be a subject.\n\n  // spec requires @type to be named first, so assign names early\n  if('@type' in input) {\n    const types = input['@type'];\n    for(const type of types) {\n      if(type.indexOf('_:') === 0) {\n        issuer.getId(type);\n      }\n    }\n  }\n\n  // get name for subject\n  if(types.isUndefined(name)) {\n    name = graphTypes.isBlankNode(input) ?\n      issuer.getId(input['@id']) : input['@id'];\n  }\n\n  // add subject reference to list\n  if(list) {\n    list.push({'@id': name});\n  }\n\n  // create new subject or merge into existing one\n  const subjects = graphs[graph];\n  const subject = subjects[name] = subjects[name] || {};\n  subject['@id'] = name;\n  const properties = Object.keys(input).sort();\n  for(let property of properties) {\n    // skip @id\n    if(property === '@id') {\n      continue;\n    }\n\n    // handle reverse properties\n    if(property === '@reverse') {\n      const referencedNode = {'@id': name};\n      const reverseMap = input['@reverse'];\n      for(const reverseProperty in reverseMap) {\n        const items = reverseMap[reverseProperty];\n        for(const item of items) {\n          let itemName = item['@id'];\n          if(graphTypes.isBlankNode(item)) {\n            itemName = issuer.getId(itemName);\n          }\n          api.createNodeMap(item, graphs, graph, issuer, itemName);\n          util.addValue(\n            subjects[itemName], reverseProperty, referencedNode,\n            {propertyIsArray: true, allowDuplicate: false});\n        }\n      }\n      continue;\n    }\n\n    // recurse into graph\n    if(property === '@graph') {\n      // add graph subjects map entry\n      if(!(name in graphs)) {\n        graphs[name] = {};\n      }\n      api.createNodeMap(input[property], graphs, name, issuer);\n      continue;\n    }\n\n    // copy non-@type keywords\n    if(property !== '@type' && isKeyword(property)) {\n      if(property === '@index' && property in subject &&\n        (input[property] !== subject[property] ||\n        input[property]['@id'] !== subject[property]['@id'])) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; conflicting @index property detected.',\n          'jsonld.SyntaxError',\n          {code: 'conflicting indexes', subject});\n      }\n      subject[property] = input[property];\n      continue;\n    }\n\n    // iterate over objects\n    const objects = input[property];\n\n    // if property is a bnode, assign it a new id\n    if(property.indexOf('_:') === 0) {\n      property = issuer.getId(property);\n    }\n\n    // ensure property is added for empty arrays\n    if(objects.length === 0) {\n      util.addValue(subject, property, [], {propertyIsArray: true});\n      continue;\n    }\n    for(let o of objects) {\n      if(property === '@type') {\n        // rename @type blank nodes\n        o = (o.indexOf('_:') === 0) ? issuer.getId(o) : o;\n      }\n\n      // handle embedded subject or subject reference\n      if(graphTypes.isSubject(o) || graphTypes.isSubjectReference(o)) {\n        // relabel blank node @id\n        const id = graphTypes.isBlankNode(o) ?\n          issuer.getId(o['@id']) : o['@id'];\n\n        // add reference and recurse\n        util.addValue(\n          subject, property, {'@id': id},\n          {propertyIsArray: true, allowDuplicate: false});\n        api.createNodeMap(o, graphs, graph, issuer, id);\n      } else if(graphTypes.isValue(o)) {\n        util.addValue(\n          subject, property, o,\n          {propertyIsArray: true, allowDuplicate: false});\n      } else if(graphTypes.isList(o)) {\n        // handle @list\n        const _list = [];\n        api.createNodeMap(o['@list'], graphs, graph, issuer, name, _list);\n        o = {'@list': _list};\n        util.addValue(\n          subject, property, o,\n          {propertyIsArray: true, allowDuplicate: false});\n      } else {\n        // handle @value\n        api.createNodeMap(o, graphs, graph, issuer, name);\n        util.addValue(\n          subject, property, o, {propertyIsArray: true, allowDuplicate: false});\n      }\n    }\n  }\n};\n\n/**\n * Merge separate named graphs into a single merged graph including\n * all nodes from the default graph and named graphs.\n *\n * @param graphs a map of graph name to subject map.\n *\n * @return the merged graph map.\n */\napi.mergeNodeMapGraphs = graphs => {\n  const merged = {};\n  for(const name of Object.keys(graphs).sort()) {\n    for(const id of Object.keys(graphs[name]).sort()) {\n      const node = graphs[name][id];\n      if(!(id in merged)) {\n        merged[id] = {'@id': id};\n      }\n      const mergedNode = merged[id];\n\n      for(const property of Object.keys(node).sort()) {\n        if(isKeyword(property)) {\n          // copy keywords\n          mergedNode[property] = util.clone(node[property]);\n        } else {\n          // merge objects\n          for(const value of node[property]) {\n            util.addValue(\n              mergedNode, property, util.clone(value),\n              {propertyIsArray: true, allowDuplicate: false});\n          }\n        }\n      }\n    }\n  }\n\n  return merged;\n};\n\napi.mergeNodeMaps = graphs => {\n  // add all non-default graphs to default graph\n  const defaultGraph = graphs['@default'];\n  const graphNames = Object.keys(graphs).sort();\n  for(const graphName of graphNames) {\n    if(graphName === '@default') {\n      continue;\n    }\n    const nodeMap = graphs[graphName];\n    let subject = defaultGraph[graphName];\n    if(!subject) {\n      defaultGraph[graphName] = subject = {\n        '@id': graphName,\n        '@graph': []\n      };\n    } else if(!('@graph' in subject)) {\n      subject['@graph'] = [];\n    }\n    const graph = subject['@graph'];\n    for(const id of Object.keys(nodeMap).sort()) {\n      const node = nodeMap[id];\n      // only add full subjects\n      if(!graphTypes.isSubjectReference(node)) {\n        graph.push(node);\n      }\n    }\n  }\n  return defaultGraph;\n};\n","function lonToX(lon, zoom) {\n\n    var n = Math.pow(2, zoom)\n    var x = Math.floor( (lon + 180) / 360 * n )\n\n    return (x)\n}\n\nfunction latToY(lat, zoom) {\n\n    var lat_rad = lat * Math.PI / 180\n    var n = Math.pow(2, zoom)\n    var y = Math.floor((1 - Math.log(Math.tan(lat_rad) + 1 / Math.cos(lat_rad)) / Math.PI) / 2 * n)\n\n    return (y)\n}\n\nexports.tilesInBbox = function(bbox, zoom) {\n\n    var tiles = []\n\n    var xMin = lonToX(bbox.left, zoom)\n    var xMax = lonToX(bbox.right, zoom)\n    var yMin = latToY(bbox.top, zoom)\n    var yMax = latToY(bbox.bottom, zoom)\n\n    var i = xMin\n    while (i <= xMax) {\n        var j = yMin\n        while (j <= yMax) {\n            tiles.push({ x : i, y : j, z : zoom })\n            j++\n        }\n        i++\n    }\n\n    return (tiles)\n}\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst ldfetch_1 = __importDefault(require(\"ldfetch\"));\nconst footpath_1 = require(\"../../entities/footpaths/footpath\");\nconst TileCoordinate_1 = __importDefault(require(\"../../entities/tiles/TileCoordinate\"));\nconst ldloader_1 = require(\"../../loader/ldloader\");\nconst views_1 = require(\"../../loader/views\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst constants_1 = require(\"../../uri/constants\");\nconst uri_1 = __importDefault(require(\"../../uri/uri\"));\nconst Tiles_1 = require(\"../../util/Tiles\");\nconst ZOOM = 12;\nlet FootpathsProviderDefault = class FootpathsProviderDefault {\n    constructor(ldFetch) {\n        this.ldFetch = ldFetch;\n        this.ldLoader = new ldloader_1.LDLoader();\n        this.paths = {};\n    }\n    async get(stop) {\n        const tileId = this.getIdForLocation(ZOOM, stop);\n        if (!this.paths[tileId]) {\n            this.paths[tileId] = this.getByUrl(tileId);\n        }\n        return this.paths[tileId];\n    }\n    getIdForLocation(zoom, location) {\n        const y = Tiles_1.lat_to_tile(location.latitude, zoom);\n        const x = Tiles_1.long_to_tile(location.longitude, zoom);\n        const coordinate = new TileCoordinate_1.default(zoom, x, y);\n        return this.getIdForTileCoords(coordinate);\n    }\n    getIdForTileCoords(coordinate) {\n        return `https://hdelva.be/stops/distances/${coordinate.zoom}/${coordinate.x}/${coordinate.y}`;\n    }\n    getByLocation(zoom, location) {\n        const y = Tiles_1.lat_to_tile(location.latitude, zoom);\n        const x = Tiles_1.long_to_tile(location.longitude, zoom);\n        const coordinate = new TileCoordinate_1.default(zoom, x, y);\n        return this.getByTileCoords(coordinate);\n    }\n    async getByTileCoords(coordinate) {\n        const url = this.getIdForTileCoords(coordinate);\n        return await this.getByUrl(url);\n    }\n    async getByUrl(url) {\n        const rdfThing = await this.ldFetch.get(url);\n        const triples = rdfThing.triples;\n        const [paths] = this.ldLoader.process(triples, [\n            this.getPathsView(),\n        ]);\n        return paths;\n    }\n    getPathsView() {\n        const nodesView = new views_1.IndexThingView(footpath_1.Footpath.create);\n        nodesView.addMapping(uri_1.default.inNS(constants_1.PLANNER, \"source\"), \"from\");\n        nodesView.addMapping(uri_1.default.inNS(constants_1.PLANNER, \"destination\"), \"to\");\n        nodesView.addMapping(uri_1.default.inNS(constants_1.PLANNER, \"distance\"), \"distance\");\n        return nodesView;\n    }\n};\nFootpathsProviderDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LDFetch)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof ldfetch_1.default !== \"undefined\" && ldfetch_1.default) === \"function\" ? _a : Object])\n], FootpathsProviderDefault);\nexports.default = FootpathsProviderDefault;\n//# sourceMappingURL=FootpathsProviderDefault.js.map","\nexport default class TinyQueue {\n    constructor(data = [], compare = defaultCompare) {\n        this.data = data;\n        this.length = this.data.length;\n        this.compare = compare;\n\n        if (this.length > 0) {\n            for (let i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n        }\n    }\n\n    push(item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    }\n\n    pop() {\n        if (this.length === 0) return undefined;\n\n        const top = this.data[0];\n        const bottom = this.data.pop();\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = bottom;\n            this._down(0);\n        }\n\n        return top;\n    }\n\n    peek() {\n        return this.data[0];\n    }\n\n    _up(pos) {\n        const {data, compare} = this;\n        const item = data[pos];\n\n        while (pos > 0) {\n            const parent = (pos - 1) >> 1;\n            const current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    }\n\n    _down(pos) {\n        const {data, compare} = this;\n        const halfLength = this.length >> 1;\n        const item = data[pos];\n\n        while (pos < halfLength) {\n            let left = (pos << 1) + 1;\n            let best = data[left];\n            const right = left + 1;\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar PickupType;\n(function (PickupType) {\n    PickupType[\"Regular\"] = \"http://vocab.gtfs.org/terms#Regular\";\n    PickupType[\"NotAvailable\"] = \"http://vocab.gtfs.org/terms#NotAvailable\";\n    PickupType[\"MustPhone\"] = \"http://vocab.gtfs.org/terms#MustPhone\";\n    PickupType[\"MustCoordinateWithDriver\"] = \"http://vocab.gtfs.org/terms#MustCoordinateWithDriver\";\n})(PickupType || (PickupType = {}));\nexports.default = PickupType;\n//# sourceMappingURL=PickupType.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ReachableStopsFinderMode;\n(function (ReachableStopsFinderMode) {\n    ReachableStopsFinderMode[\"Source\"] = \"source\";\n    ReachableStopsFinderMode[\"Target\"] = \"target\";\n})(ReachableStopsFinderMode || (ReachableStopsFinderMode = {}));\nexports.default = ReachableStopsFinderMode;\n//# sourceMappingURL=ReachableStopsFinderMode.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst MixedDijkstraInstance_1 = require(\"./MixedDijkstraInstance\");\nlet MixedDijkstra = class MixedDijkstra {\n    createInstance(graph, locationResolver) {\n        return new MixedDijkstraInstance_1.MixedDijkstraInstance(graph, locationResolver);\n    }\n};\nMixedDijkstra = __decorate([\n    inversify_1.injectable()\n], MixedDijkstra);\nexports.default = MixedDijkstra;\n//# sourceMappingURL=MixedDijkstra.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Defaults_1 = __importDefault(require(\"../Defaults\"));\nconst InvalidQueryError_1 = __importDefault(require(\"../errors/InvalidQueryError\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst Units_1 = __importDefault(require(\"../util/Units\"));\n/**\n * The default `minimumDepartureTime` is *now*. The default `maximumArrivalTime` is `minimumDepartureTime + 2 hours`.\n */\nlet QueryRunnerDefault = class QueryRunnerDefault {\n    constructor(locationResolver, publicTransportPlanner, roadPlanner) {\n        this.locationResolver = locationResolver;\n        this.publicTransportPlanner = publicTransportPlanner;\n        this.roadPlanner = roadPlanner;\n    }\n    async run(query) {\n        const resolvedQuery = await this.resolveQuery(query);\n        if (resolvedQuery.roadNetworkOnly) {\n            return this.roadPlanner.plan(resolvedQuery);\n        }\n        else {\n            return this.publicTransportPlanner.plan(resolvedQuery);\n        }\n    }\n    async resolveEndpoint(endpoint) {\n        if (Array.isArray(endpoint)) {\n            const promises = endpoint\n                .map((singleEndpoint) => this.locationResolver.resolve(singleEndpoint));\n            return await Promise.all(promises);\n        }\n        else {\n            return [await this.locationResolver.resolve(endpoint)];\n        }\n    }\n    async resolveQuery(query) {\n        // tslint:disable:trailing-comma\n        const { minimumWalkingSpeed, maximumWalkingSpeed, walkingSpeed, maximumWalkingDuration, maximumWalkingDistance, minimumTransferDuration, maximumTransferDuration, maximumTransferDistance, maximumTransfers, minimumDepartureTime, maximumArrivalTime, excludedTravelModes } = query, other = __rest(query, [\"minimumWalkingSpeed\", \"maximumWalkingSpeed\", \"walkingSpeed\", \"maximumWalkingDuration\", \"maximumWalkingDistance\", \"minimumTransferDuration\", \"maximumTransferDuration\", \"maximumTransferDistance\", \"maximumTransfers\", \"minimumDepartureTime\", \"maximumArrivalTime\", \"excludedTravelModes\"]);\n        // tslint:enable:trailing-comma\n        // make a deep copy of these\n        let { from, to } = other;\n        from = JSON.parse(JSON.stringify(from));\n        to = JSON.parse(JSON.stringify(to));\n        const resolvedQuery = Object.assign({}, other);\n        if (excludedTravelModes) {\n            resolvedQuery.excludedTravelModes = new Set(excludedTravelModes);\n        }\n        resolvedQuery.minimumDepartureTime = minimumDepartureTime || new Date();\n        if (maximumArrivalTime) {\n            resolvedQuery.maximumArrivalTime = maximumArrivalTime;\n        }\n        else {\n            const { minimumDepartureTime: newDepartureTime } = resolvedQuery;\n            resolvedQuery.maximumArrivalTime = new Date(newDepartureTime.getTime()\n                + 12 * 60 * 60 * 1000);\n        }\n        try {\n            resolvedQuery.from = await this.resolveEndpoint(from);\n            resolvedQuery.to = await this.resolveEndpoint(to);\n        }\n        catch (e) {\n            return Promise.reject(new InvalidQueryError_1.default(e));\n        }\n        resolvedQuery.minimumWalkingSpeed = minimumWalkingSpeed || walkingSpeed || Defaults_1.default.defaultMinimumWalkingSpeed;\n        resolvedQuery.maximumWalkingSpeed = maximumWalkingSpeed || walkingSpeed || Defaults_1.default.defaultMaximumWalkingSpeed;\n        resolvedQuery.maximumWalkingDuration = maximumWalkingDuration ||\n            Units_1.default.toDuration(maximumWalkingDistance, resolvedQuery.minimumWalkingSpeed) || Defaults_1.default.defaultWalkingDuration;\n        resolvedQuery.minimumTransferDuration = minimumTransferDuration || Defaults_1.default.defaultMinimumTransferDuration;\n        resolvedQuery.maximumTransferDuration = maximumTransferDuration ||\n            Units_1.default.toDuration(maximumTransferDistance, resolvedQuery.minimumWalkingSpeed) ||\n            Defaults_1.default.defaultMaximumTransferDuration;\n        resolvedQuery.maximumTransfers = maximumTransfers || Defaults_1.default.defaultMaximumTransfers;\n        return resolvedQuery;\n    }\n};\nQueryRunnerDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LocationResolver)),\n    __param(1, inversify_1.inject(types_1.default.PublicTransportPlanner)),\n    __param(2, inversify_1.inject(types_1.default.RoadPlanner)),\n    __metadata(\"design:paramtypes\", [Object, Object, Object])\n], QueryRunnerDefault);\nexports.default = QueryRunnerDefault;\n//# sourceMappingURL=QueryRunnerDefault.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\n/**\n * This [[IReachableStopsFinder]] just returns the passed source or target stop.\n *\n * This can be a valid strategy to optimize speed if the user doesn't want to travel by foot to another stop\n */\nlet ReachableStopsFinderOnlySelf = class ReachableStopsFinderOnlySelf {\n    async findReachableStops(sourceOrTargetStop, mode, maximumDuration, minimumSpeed) {\n        return [{ stop: sourceOrTargetStop, duration: 0 }];\n    }\n};\nReachableStopsFinderOnlySelf = __decorate([\n    inversify_1.injectable()\n], ReachableStopsFinderOnlySelf);\nexports.default = ReachableStopsFinderOnlySelf;\n//# sourceMappingURL=ReachableStopsFinderOnlySelf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingOnSyntax = (function () {\n    function BindingOnSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingOnSyntax.prototype.onActivation = function (handler) {\n        this._binding.onActivation = handler;\n        return new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n    };\n    return BindingOnSyntax;\n}());\nexports.BindingOnSyntax = BindingOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar constraint_helpers_1 = require(\"./constraint_helpers\");\nvar BindingWhenSyntax = (function () {\n    function BindingWhenSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingWhenSyntax.prototype.when = function (constraint) {\n        this._binding.constraint = constraint;\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetNamed = function (name) {\n        this._binding.constraint = constraint_helpers_1.namedConstraint(name);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetIsDefault = function () {\n        this._binding.constraint = function (request) {\n            var targetIsDefault = (request.target !== null) &&\n                (!request.target.isNamed()) &&\n                (!request.target.isTagged());\n            return targetIsDefault;\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenTargetTagged = function (tag, value) {\n        this._binding.constraint = constraint_helpers_1.taggedConstraint(tag)(value);\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenInjectedInto = function (parent) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.typeConstraint(parent)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.namedConstraint(name)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenParentTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.taggedConstraint(tag)(value)(request.parentRequest);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.typeConstraint(ancestor));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorNamed = function (name) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.namedConstraint(name));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint_helpers_1.taggedConstraint(tag)(value));\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    BindingWhenSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        this._binding.constraint = function (request) {\n            return !constraint_helpers_1.traverseAncerstors(request, constraint);\n        };\n        return new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    };\n    return BindingWhenSyntax;\n}());\nexports.BindingWhenSyntax = BindingWhenSyntax;\n","function _setPrototypeOf(o, p) {\n  module.exports = _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) {\n    o.__proto__ = p;\n    return o;\n  };\n\n  return _setPrototypeOf(o, p);\n}\n\nmodule.exports = _setPrototypeOf;","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// A bit simpler than readable streams.\n// Implement an async ._write(chunk, encoding, cb), and it'll handle all\n// the drain event emission and buffering.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Writable;\n\n/* <replacement> */\nfunction WriteReq(chunk, encoding, cb) {\n  this.chunk = chunk;\n  this.encoding = encoding;\n  this.callback = cb;\n  this.next = null;\n}\n\n// It seems a linked list but it is not\n// there will be only 2 of these for each stream\nfunction CorkedRequest(state) {\n  var _this = this;\n\n  this.next = null;\n  this.entry = null;\n  this.finish = function () {\n    onCorkedFinish(_this, state);\n  };\n}\n/* </replacement> */\n\n/*<replacement>*/\nvar asyncWrite = !process.browser && ['v0.10', 'v0.9.'].indexOf(process.version.slice(0, 5)) > -1 ? setImmediate : pna.nextTick;\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nWritable.WritableState = WritableState;\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar internalUtil = {\n  deprecate: require('util-deprecate')\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\nvar destroyImpl = require('./internal/streams/destroy');\n\nutil.inherits(Writable, Stream);\n\nfunction nop() {}\n\nfunction WritableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag to indicate whether or not this stream\n  // contains buffers or objects.\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.writableObjectMode;\n\n  // the point at which write() starts returning false\n  // Note: 0 is a valid value, means that we always return false if\n  // the entire buffer is not flushed immediately on write()\n  var hwm = options.highWaterMark;\n  var writableHwm = options.writableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (writableHwm || writableHwm === 0)) this.highWaterMark = writableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // if _final has been called\n  this.finalCalled = false;\n\n  // drain event flag.\n  this.needDrain = false;\n  // at the start of calling end()\n  this.ending = false;\n  // when end() has been called, and returned\n  this.ended = false;\n  // when 'finish' is emitted\n  this.finished = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // should we decode strings into buffers before passing to _write?\n  // this is here so that some node-core streams can optimize string\n  // handling at a lower level.\n  var noDecode = options.decodeStrings === false;\n  this.decodeStrings = !noDecode;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // not an actual buffer we keep track of, but a measurement\n  // of how much we're waiting to get pushed to some underlying\n  // socket or file.\n  this.length = 0;\n\n  // a flag to see when we're in the middle of a write.\n  this.writing = false;\n\n  // when true all writes will be buffered until .uncork() call\n  this.corked = 0;\n\n  // a flag to be able to tell if the onwrite cb is called immediately,\n  // or on a later tick.  We set this to true at first, because any\n  // actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first write call.\n  this.sync = true;\n\n  // a flag to know if we're processing previously buffered items, which\n  // may call the _write() callback in the same tick, so that we don't\n  // end up in an overlapped onwrite situation.\n  this.bufferProcessing = false;\n\n  // the callback that's passed to _write(chunk,cb)\n  this.onwrite = function (er) {\n    onwrite(stream, er);\n  };\n\n  // the callback that the user supplies to write(chunk,encoding,cb)\n  this.writecb = null;\n\n  // the amount that is being written when _write is called.\n  this.writelen = 0;\n\n  this.bufferedRequest = null;\n  this.lastBufferedRequest = null;\n\n  // number of pending user-supplied write callbacks\n  // this must be 0 before 'finish' can be emitted\n  this.pendingcb = 0;\n\n  // emit prefinish if the only thing we're waiting for is _write cbs\n  // This is relevant for synchronous Transform streams\n  this.prefinished = false;\n\n  // True if the error was already emitted and should not be thrown again\n  this.errorEmitted = false;\n\n  // count buffered requests\n  this.bufferedRequestCount = 0;\n\n  // allocate the first CorkedRequest, there is always\n  // one allocated and free to use, and we maintain at most two\n  this.corkedRequestsFree = new CorkedRequest(this);\n}\n\nWritableState.prototype.getBuffer = function getBuffer() {\n  var current = this.bufferedRequest;\n  var out = [];\n  while (current) {\n    out.push(current);\n    current = current.next;\n  }\n  return out;\n};\n\n(function () {\n  try {\n    Object.defineProperty(WritableState.prototype, 'buffer', {\n      get: internalUtil.deprecate(function () {\n        return this.getBuffer();\n      }, '_writableState.buffer is deprecated. Use _writableState.getBuffer ' + 'instead.', 'DEP0003')\n    });\n  } catch (_) {}\n})();\n\n// Test _writableState for inheritance to account for Duplex streams,\n// whose prototype chain only points to Readable.\nvar realHasInstance;\nif (typeof Symbol === 'function' && Symbol.hasInstance && typeof Function.prototype[Symbol.hasInstance] === 'function') {\n  realHasInstance = Function.prototype[Symbol.hasInstance];\n  Object.defineProperty(Writable, Symbol.hasInstance, {\n    value: function (object) {\n      if (realHasInstance.call(this, object)) return true;\n      if (this !== Writable) return false;\n\n      return object && object._writableState instanceof WritableState;\n    }\n  });\n} else {\n  realHasInstance = function (object) {\n    return object instanceof this;\n  };\n}\n\nfunction Writable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  // Writable ctor is applied to Duplexes, too.\n  // `realHasInstance` is necessary because using plain `instanceof`\n  // would return false, as no `_writableState` property is attached.\n\n  // Trying to use the custom `instanceof` for Writable here will also break the\n  // Node.js LazyTransform implementation, which has a non-trivial getter for\n  // `_writableState` that would lead to infinite recursion.\n  if (!realHasInstance.call(Writable, this) && !(this instanceof Duplex)) {\n    return new Writable(options);\n  }\n\n  this._writableState = new WritableState(options, this);\n\n  // legacy.\n  this.writable = true;\n\n  if (options) {\n    if (typeof options.write === 'function') this._write = options.write;\n\n    if (typeof options.writev === 'function') this._writev = options.writev;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n\n    if (typeof options.final === 'function') this._final = options.final;\n  }\n\n  Stream.call(this);\n}\n\n// Otherwise people can pipe Writable streams, which is just wrong.\nWritable.prototype.pipe = function () {\n  this.emit('error', new Error('Cannot pipe, not readable'));\n};\n\nfunction writeAfterEnd(stream, cb) {\n  var er = new Error('write after end');\n  // TODO: defer error events consistently everywhere, not just the cb\n  stream.emit('error', er);\n  pna.nextTick(cb, er);\n}\n\n// Checks that a user-supplied chunk is valid, especially for the particular\n// mode the stream is in. Currently this means that `null` is never accepted\n// and undefined/non-string values are only allowed in object mode.\nfunction validChunk(stream, state, chunk, cb) {\n  var valid = true;\n  var er = false;\n\n  if (chunk === null) {\n    er = new TypeError('May not write null values to stream');\n  } else if (typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  if (er) {\n    stream.emit('error', er);\n    pna.nextTick(cb, er);\n    valid = false;\n  }\n  return valid;\n}\n\nWritable.prototype.write = function (chunk, encoding, cb) {\n  var state = this._writableState;\n  var ret = false;\n  var isBuf = !state.objectMode && _isUint8Array(chunk);\n\n  if (isBuf && !Buffer.isBuffer(chunk)) {\n    chunk = _uint8ArrayToBuffer(chunk);\n  }\n\n  if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (isBuf) encoding = 'buffer';else if (!encoding) encoding = state.defaultEncoding;\n\n  if (typeof cb !== 'function') cb = nop;\n\n  if (state.ended) writeAfterEnd(this, cb);else if (isBuf || validChunk(this, state, chunk, cb)) {\n    state.pendingcb++;\n    ret = writeOrBuffer(this, state, isBuf, chunk, encoding, cb);\n  }\n\n  return ret;\n};\n\nWritable.prototype.cork = function () {\n  var state = this._writableState;\n\n  state.corked++;\n};\n\nWritable.prototype.uncork = function () {\n  var state = this._writableState;\n\n  if (state.corked) {\n    state.corked--;\n\n    if (!state.writing && !state.corked && !state.finished && !state.bufferProcessing && state.bufferedRequest) clearBuffer(this, state);\n  }\n};\n\nWritable.prototype.setDefaultEncoding = function setDefaultEncoding(encoding) {\n  // node::ParseEncoding() requires lower case.\n  if (typeof encoding === 'string') encoding = encoding.toLowerCase();\n  if (!(['hex', 'utf8', 'utf-8', 'ascii', 'binary', 'base64', 'ucs2', 'ucs-2', 'utf16le', 'utf-16le', 'raw'].indexOf((encoding + '').toLowerCase()) > -1)) throw new TypeError('Unknown encoding: ' + encoding);\n  this._writableState.defaultEncoding = encoding;\n  return this;\n};\n\nfunction decodeChunk(state, chunk, encoding) {\n  if (!state.objectMode && state.decodeStrings !== false && typeof chunk === 'string') {\n    chunk = Buffer.from(chunk, encoding);\n  }\n  return chunk;\n}\n\nObject.defineProperty(Writable.prototype, 'writableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._writableState.highWaterMark;\n  }\n});\n\n// if we're already writing something, then just put this\n// in the queue, and wait our turn.  Otherwise, call _write\n// If we return false, then we need a drain event, so set that flag.\nfunction writeOrBuffer(stream, state, isBuf, chunk, encoding, cb) {\n  if (!isBuf) {\n    var newChunk = decodeChunk(state, chunk, encoding);\n    if (chunk !== newChunk) {\n      isBuf = true;\n      encoding = 'buffer';\n      chunk = newChunk;\n    }\n  }\n  var len = state.objectMode ? 1 : chunk.length;\n\n  state.length += len;\n\n  var ret = state.length < state.highWaterMark;\n  // we must ensure that previous needDrain will not be reset to false.\n  if (!ret) state.needDrain = true;\n\n  if (state.writing || state.corked) {\n    var last = state.lastBufferedRequest;\n    state.lastBufferedRequest = {\n      chunk: chunk,\n      encoding: encoding,\n      isBuf: isBuf,\n      callback: cb,\n      next: null\n    };\n    if (last) {\n      last.next = state.lastBufferedRequest;\n    } else {\n      state.bufferedRequest = state.lastBufferedRequest;\n    }\n    state.bufferedRequestCount += 1;\n  } else {\n    doWrite(stream, state, false, len, chunk, encoding, cb);\n  }\n\n  return ret;\n}\n\nfunction doWrite(stream, state, writev, len, chunk, encoding, cb) {\n  state.writelen = len;\n  state.writecb = cb;\n  state.writing = true;\n  state.sync = true;\n  if (writev) stream._writev(chunk, state.onwrite);else stream._write(chunk, encoding, state.onwrite);\n  state.sync = false;\n}\n\nfunction onwriteError(stream, state, sync, er, cb) {\n  --state.pendingcb;\n\n  if (sync) {\n    // defer the callback if we are being called synchronously\n    // to avoid piling up things on the stack\n    pna.nextTick(cb, er);\n    // this can emit finish, and it will always happen\n    // after error\n    pna.nextTick(finishMaybe, stream, state);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n  } else {\n    // the caller expect this to happen before if\n    // it is async\n    cb(er);\n    stream._writableState.errorEmitted = true;\n    stream.emit('error', er);\n    // this can emit finish, but finish must\n    // always follow error\n    finishMaybe(stream, state);\n  }\n}\n\nfunction onwriteStateUpdate(state) {\n  state.writing = false;\n  state.writecb = null;\n  state.length -= state.writelen;\n  state.writelen = 0;\n}\n\nfunction onwrite(stream, er) {\n  var state = stream._writableState;\n  var sync = state.sync;\n  var cb = state.writecb;\n\n  onwriteStateUpdate(state);\n\n  if (er) onwriteError(stream, state, sync, er, cb);else {\n    // Check if we're actually ready to finish, but don't emit yet\n    var finished = needFinish(state);\n\n    if (!finished && !state.corked && !state.bufferProcessing && state.bufferedRequest) {\n      clearBuffer(stream, state);\n    }\n\n    if (sync) {\n      /*<replacement>*/\n      asyncWrite(afterWrite, stream, state, finished, cb);\n      /*</replacement>*/\n    } else {\n      afterWrite(stream, state, finished, cb);\n    }\n  }\n}\n\nfunction afterWrite(stream, state, finished, cb) {\n  if (!finished) onwriteDrain(stream, state);\n  state.pendingcb--;\n  cb();\n  finishMaybe(stream, state);\n}\n\n// Must force callback to be called on nextTick, so that we don't\n// emit 'drain' before the write() consumer gets the 'false' return\n// value, and has a chance to attach a 'drain' listener.\nfunction onwriteDrain(stream, state) {\n  if (state.length === 0 && state.needDrain) {\n    state.needDrain = false;\n    stream.emit('drain');\n  }\n}\n\n// if there's something in the buffer waiting, then process it\nfunction clearBuffer(stream, state) {\n  state.bufferProcessing = true;\n  var entry = state.bufferedRequest;\n\n  if (stream._writev && entry && entry.next) {\n    // Fast case, write everything using _writev()\n    var l = state.bufferedRequestCount;\n    var buffer = new Array(l);\n    var holder = state.corkedRequestsFree;\n    holder.entry = entry;\n\n    var count = 0;\n    var allBuffers = true;\n    while (entry) {\n      buffer[count] = entry;\n      if (!entry.isBuf) allBuffers = false;\n      entry = entry.next;\n      count += 1;\n    }\n    buffer.allBuffers = allBuffers;\n\n    doWrite(stream, state, true, state.length, buffer, '', holder.finish);\n\n    // doWrite is almost always async, defer these to save a bit of time\n    // as the hot path ends with doWrite\n    state.pendingcb++;\n    state.lastBufferedRequest = null;\n    if (holder.next) {\n      state.corkedRequestsFree = holder.next;\n      holder.next = null;\n    } else {\n      state.corkedRequestsFree = new CorkedRequest(state);\n    }\n    state.bufferedRequestCount = 0;\n  } else {\n    // Slow case, write chunks one-by-one\n    while (entry) {\n      var chunk = entry.chunk;\n      var encoding = entry.encoding;\n      var cb = entry.callback;\n      var len = state.objectMode ? 1 : chunk.length;\n\n      doWrite(stream, state, false, len, chunk, encoding, cb);\n      entry = entry.next;\n      state.bufferedRequestCount--;\n      // if we didn't call the onwrite immediately, then\n      // it means that we need to wait until it does.\n      // also, that means that the chunk and cb are currently\n      // being processed, so move the buffer counter past them.\n      if (state.writing) {\n        break;\n      }\n    }\n\n    if (entry === null) state.lastBufferedRequest = null;\n  }\n\n  state.bufferedRequest = entry;\n  state.bufferProcessing = false;\n}\n\nWritable.prototype._write = function (chunk, encoding, cb) {\n  cb(new Error('_write() is not implemented'));\n};\n\nWritable.prototype._writev = null;\n\nWritable.prototype.end = function (chunk, encoding, cb) {\n  var state = this._writableState;\n\n  if (typeof chunk === 'function') {\n    cb = chunk;\n    chunk = null;\n    encoding = null;\n  } else if (typeof encoding === 'function') {\n    cb = encoding;\n    encoding = null;\n  }\n\n  if (chunk !== null && chunk !== undefined) this.write(chunk, encoding);\n\n  // .end() fully uncorks\n  if (state.corked) {\n    state.corked = 1;\n    this.uncork();\n  }\n\n  // ignore unnecessary end() calls.\n  if (!state.ending && !state.finished) endWritable(this, state, cb);\n};\n\nfunction needFinish(state) {\n  return state.ending && state.length === 0 && state.bufferedRequest === null && !state.finished && !state.writing;\n}\nfunction callFinal(stream, state) {\n  stream._final(function (err) {\n    state.pendingcb--;\n    if (err) {\n      stream.emit('error', err);\n    }\n    state.prefinished = true;\n    stream.emit('prefinish');\n    finishMaybe(stream, state);\n  });\n}\nfunction prefinish(stream, state) {\n  if (!state.prefinished && !state.finalCalled) {\n    if (typeof stream._final === 'function') {\n      state.pendingcb++;\n      state.finalCalled = true;\n      pna.nextTick(callFinal, stream, state);\n    } else {\n      state.prefinished = true;\n      stream.emit('prefinish');\n    }\n  }\n}\n\nfunction finishMaybe(stream, state) {\n  var need = needFinish(state);\n  if (need) {\n    prefinish(stream, state);\n    if (state.pendingcb === 0) {\n      state.finished = true;\n      stream.emit('finish');\n    }\n  }\n  return need;\n}\n\nfunction endWritable(stream, state, cb) {\n  state.ending = true;\n  finishMaybe(stream, state);\n  if (cb) {\n    if (state.finished) pna.nextTick(cb);else stream.once('finish', cb);\n  }\n  state.ended = true;\n  stream.writable = false;\n}\n\nfunction onCorkedFinish(corkReq, state, err) {\n  var entry = corkReq.entry;\n  corkReq.entry = null;\n  while (entry) {\n    var cb = entry.callback;\n    state.pendingcb--;\n    cb(err);\n    entry = entry.next;\n  }\n  if (state.corkedRequestsFree) {\n    state.corkedRequestsFree.next = corkReq;\n  } else {\n    state.corkedRequestsFree = corkReq;\n  }\n}\n\nObject.defineProperty(Writable.prototype, 'destroyed', {\n  get: function () {\n    if (this._writableState === undefined) {\n      return false;\n    }\n    return this._writableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._writableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._writableState.destroyed = value;\n  }\n});\n\nWritable.prototype.destroy = destroyImpl.destroy;\nWritable.prototype._undestroy = destroyImpl.undestroy;\nWritable.prototype._destroy = function (err, cb) {\n  this.end();\n  cb(err);\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","// **N3Lexer** tokenizes N3 documents.\nimport namespaces from './IRIs';\nconst { xsd } = namespaces;\n\nconst { fromCharCode } = String;\n\n// Regular expression and replacement string to escape N3 strings.\n// Note how we catch invalid unicode sequences separately (they will trigger an error).\nvar escapeSequence = /\\\\u([a-fA-F0-9]{4})|\\\\U([a-fA-F0-9]{8})|\\\\[uU]|\\\\(.)/g;\nvar escapeReplacements = {\n  '\\\\': '\\\\', \"'\": \"'\", '\"': '\"',\n  'n': '\\n', 'r': '\\r', 't': '\\t', 'f': '\\f', 'b': '\\b',\n  '_': '_', '~': '~', '.': '.', '-': '-', '!': '!', '$': '$', '&': '&',\n  '(': '(', ')': ')', '*': '*', '+': '+', ',': ',', ';': ';', '=': '=',\n  '/': '/', '?': '?', '#': '#', '@': '@', '%': '%',\n};\nvar illegalIriChars = /[\\x00-\\x20<>\\\\\"\\{\\}\\|\\^\\`]/;\n\nvar lineModeRegExps = {\n  _iri: true,\n  _unescapedIri: true,\n  _simpleQuotedString: true,\n  _langcode: true,\n  _blank: true,\n  _newline: true,\n  _comment: true,\n  _whitespace: true,\n  _endOfFile: true,\n};\nvar invalidRegExp = /$0^/;\n\n// ## Constructor\nexport default class N3Lexer {\n  constructor(options) {\n    // ## Regular expressions\n    // It's slightly faster to have these as properties than as in-scope variables\n    this._iri = /^<((?:[^ <>{}\\\\]|\\\\[uU])+)>[ \\t]*/; // IRI with escape sequences; needs sanity check after unescaping\n    this._unescapedIri = /^<([^\\x00-\\x20<>\\\\\"\\{\\}\\|\\^\\`]*)>[ \\t]*/; // IRI without escape sequences; no unescaping\n    this._simpleQuotedString = /^\"([^\"\\\\\\r\\n]*)\"(?=[^\"])/; // string without escape sequences\n    this._simpleApostropheString = /^'([^'\\\\\\r\\n]*)'(?=[^'])/;\n    this._langcode = /^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\\-])/i;\n    this._prefix = /^((?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)?:(?=[#\\s<])/;\n    this._prefixed = /^((?:[A-Za-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)?:((?:(?:[0-:A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~])(?:(?:[\\.\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~])*(?:[\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff]|%[0-9a-fA-F]{2}|\\\\[!#-\\/;=?\\-@_~]))?)?)(?:[ \\t]+|(?=\\.?[,;!\\^\\s#()\\[\\]\\{\\}\"'<]))/;\n    this._variable = /^\\?(?:(?:[A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:[\\-0-:A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)(?=[.,;!\\^\\s#()\\[\\]\\{\\}\"'<])/;\n    this._blank = /^_:((?:[0-9A-Z_a-z\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u02ff\\u0370-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])(?:\\.?[\\-0-9A-Z_a-z\\xb7\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\u037d\\u037f-\\u1fff\\u200c\\u200d\\u203f\\u2040\\u2070-\\u218f\\u2c00-\\u2fef\\u3001-\\ud7ff\\uf900-\\ufdcf\\ufdf0-\\ufffd]|[\\ud800-\\udb7f][\\udc00-\\udfff])*)(?:[ \\t]+|(?=\\.?[,;:\\s#()\\[\\]\\{\\}\"'<]))/;\n    this._number = /^[\\-+]?(?:\\d+\\.?\\d*([eE](?:[\\-\\+])?\\d+)|\\d*\\.?\\d+)(?=\\.?[,;:\\s#()\\[\\]\\{\\}\"'<])/;\n    this._boolean = /^(?:true|false)(?=[.,;\\s#()\\[\\]\\{\\}\"'<])/;\n    this._keyword = /^@[a-z]+(?=[\\s#<:])/i;\n    this._sparqlKeyword = /^(?:PREFIX|BASE|GRAPH)(?=[\\s#<])/i;\n    this._shortPredicates = /^a(?=[\\s()\\[\\]\\{\\}\"'<])/;\n    this._newline = /^[ \\t]*(?:#[^\\n\\r]*)?(?:\\r\\n|\\n|\\r)[ \\t]*/;\n    this._comment = /#([^\\n\\r]*)/;\n    this._whitespace = /^[ \\t]+/;\n    this._endOfFile = /^(?:#[^\\n\\r]*)?$/;\n    options = options || {};\n\n    // In line mode (N-Triples or N-Quads), only simple features may be parsed\n    if (this._lineMode = !!options.lineMode) {\n      this._n3Mode = false;\n      // Don't tokenize special literals\n      for (var key in this) {\n        if (!(key in lineModeRegExps) && this[key] instanceof RegExp)\n          this[key] = invalidRegExp;\n      }\n    }\n    // When not in line mode, enable N3 functionality by default\n    else {\n      this._n3Mode = options.n3 !== false;\n    }\n    // Don't output comment tokens by default\n    this._comments = !!options.comments;\n    // Cache the last tested closing position of long literals\n    this._literalClosingPos = 0;\n  }\n\n  // ## Private methods\n\n  // ### `_tokenizeToEnd` tokenizes as for as possible, emitting tokens through the callback\n  _tokenizeToEnd(callback, inputFinished) {\n    // Continue parsing as far as possible; the loop will return eventually\n    var input = this._input, outputComments = this._comments;\n    while (true) {\n      // Count and skip whitespace lines\n      var whiteSpaceMatch, comment;\n      while (whiteSpaceMatch = this._newline.exec(input)) {\n        // Try to find a comment\n        if (outputComments && (comment = this._comment.exec(whiteSpaceMatch[0])))\n          callback(null, { line: this._line, type: 'comment', value: comment[1], prefix: '' });\n        // Advance the input\n        input = input.substr(whiteSpaceMatch[0].length, input.length);\n        this._line++;\n      }\n      // Skip whitespace on current line\n      if (!whiteSpaceMatch && (whiteSpaceMatch = this._whitespace.exec(input)))\n        input = input.substr(whiteSpaceMatch[0].length, input.length);\n\n      // Stop for now if we're at the end\n      if (this._endOfFile.test(input)) {\n        // If the input is finished, emit EOF\n        if (inputFinished) {\n          // Try to find a final comment\n          if (outputComments && (comment = this._comment.exec(input)))\n            callback(null, { line: this._line, type: 'comment', value: comment[1], prefix: '' });\n          callback(input = null, { line: this._line, type: 'eof', value: '', prefix: '' });\n        }\n        return this._input = input;\n      }\n\n      // Look for specific token types based on the first character\n      var line = this._line, type = '', value = '', prefix = '',\n          firstChar = input[0], match = null, matchLength = 0, inconclusive = false;\n      switch (firstChar) {\n      case '^':\n        // We need at least 3 tokens lookahead to distinguish ^^<IRI> and ^^pre:fixed\n        if (input.length < 3)\n          break;\n        // Try to match a type\n        else if (input[1] === '^') {\n          this._previousMarker = '^^';\n          // Move to type IRI or prefixed name\n          input = input.substr(2);\n          if (input[0] !== '<') {\n            inconclusive = true;\n            break;\n          }\n        }\n        // If no type, it must be a path expression\n        else {\n          if (this._n3Mode) {\n            matchLength = 1;\n            type = '^';\n          }\n          break;\n        }\n        // Fall through in case the type is an IRI\n      case '<':\n        // Try to find a full IRI without escape sequences\n        if (match = this._unescapedIri.exec(input))\n          type = 'IRI', value = match[1];\n        // Try to find a full IRI with escape sequences\n        else if (match = this._iri.exec(input)) {\n          value = this._unescape(match[1]);\n          if (value === null || illegalIriChars.test(value))\n            return reportSyntaxError(this);\n          type = 'IRI';\n        }\n        // Try to find a backwards implication arrow\n        else if (this._n3Mode && input.length > 1 && input[1] === '=')\n          type = 'inverse', matchLength = 2, value = '>';\n        break;\n\n      case '_':\n        // Try to find a blank node. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a blank node.\n        // Therefore, try inserting a space if we're at the end of the input.\n        if ((match = this._blank.exec(input)) ||\n            inputFinished && (match = this._blank.exec(input + ' ')))\n          type = 'blank', prefix = '_', value = match[1];\n        break;\n\n      case '\"':\n        // Try to find a literal without escape sequences\n        if (match = this._simpleQuotedString.exec(input))\n          value = match[1];\n        // Try to find a literal wrapped in three pairs of quotes\n        else {\n          ({ value, matchLength } = this._parseLiteral(input));\n          if (value === null)\n            return reportSyntaxError(this);\n        }\n        if (match !== null || matchLength !== 0) {\n          type = 'literal';\n          this._literalClosingPos = 0;\n        }\n        break;\n\n      case \"'\":\n        if (!this._lineMode) {\n          // Try to find a literal without escape sequences\n          if (match = this._simpleApostropheString.exec(input))\n            value = match[1];\n          // Try to find a literal wrapped in three pairs of quotes\n          else {\n            ({ value, matchLength } = this._parseLiteral(input));\n            if (value === null)\n              return reportSyntaxError(this);\n          }\n          if (match !== null || matchLength !== 0) {\n            type = 'literal';\n            this._literalClosingPos = 0;\n          }\n        }\n        break;\n\n      case '?':\n        // Try to find a variable\n        if (this._n3Mode && (match = this._variable.exec(input)))\n          type = 'var', value = match[0];\n        break;\n\n      case '@':\n        // Try to find a language code\n        if (this._previousMarker === 'literal' && (match = this._langcode.exec(input)))\n          type = 'langcode', value = match[1];\n        // Try to find a keyword\n        else if (match = this._keyword.exec(input))\n          type = match[0];\n        break;\n\n      case '.':\n        // Try to find a dot as punctuation\n        if (input.length === 1 ? inputFinished : (input[1] < '0' || input[1] > '9')) {\n          type = '.';\n          matchLength = 1;\n          break;\n        }\n        // Fall through to numerical case (could be a decimal dot)\n\n      case '0':\n      case '1':\n      case '2':\n      case '3':\n      case '4':\n      case '5':\n      case '6':\n      case '7':\n      case '8':\n      case '9':\n      case '+':\n      case '-':\n        // Try to find a number. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a number.\n        // Therefore, try inserting a space if we're at the end of the input.\n        if (match = this._number.exec(input) ||\n            inputFinished && (match = this._number.exec(input + ' '))) {\n          type = 'literal', value = match[0];\n          prefix = (match[1] ? xsd.double :\n                    (/^[+\\-]?\\d+$/.test(match[0]) ? xsd.integer : xsd.decimal));\n        }\n        break;\n\n      case 'B':\n      case 'b':\n      case 'p':\n      case 'P':\n      case 'G':\n      case 'g':\n        // Try to find a SPARQL-style keyword\n        if (match = this._sparqlKeyword.exec(input))\n          type = match[0].toUpperCase();\n        else\n          inconclusive = true;\n        break;\n\n      case 'f':\n      case 't':\n        // Try to match a boolean\n        if (match = this._boolean.exec(input))\n          type = 'literal', value = match[0], prefix = xsd.boolean;\n        else\n          inconclusive = true;\n        break;\n\n      case 'a':\n        // Try to find an abbreviated predicate\n        if (match = this._shortPredicates.exec(input))\n          type = 'abbreviation', value = 'a';\n        else\n          inconclusive = true;\n        break;\n\n      case '=':\n        // Try to find an implication arrow or equals sign\n        if (this._n3Mode && input.length > 1) {\n          type = 'abbreviation';\n          if (input[1] !== '>')\n            matchLength = 1, value = '=';\n          else\n            matchLength = 2, value = '>';\n        }\n        break;\n\n      case '!':\n        if (!this._n3Mode)\n          break;\n      case ',':\n      case ';':\n      case '[':\n      case ']':\n      case '(':\n      case ')':\n      case '{':\n      case '}':\n        if (!this._lineMode) {\n          matchLength = 1;\n          type = firstChar;\n        }\n        break;\n\n      default:\n        inconclusive = true;\n      }\n\n      // Some first characters do not allow an immediate decision, so inspect more\n      if (inconclusive) {\n        // Try to find a prefix\n        if ((this._previousMarker === '@prefix' || this._previousMarker === 'PREFIX') &&\n            (match = this._prefix.exec(input)))\n          type = 'prefix', value = match[1] || '';\n        // Try to find a prefixed name. Since it can contain (but not end with) a dot,\n        // we always need a non-dot character before deciding it is a prefixed name.\n        // Therefore, try inserting a space if we're at the end of the input.\n        else if ((match = this._prefixed.exec(input)) ||\n                 inputFinished && (match = this._prefixed.exec(input + ' ')))\n          type = 'prefixed', prefix = match[1] || '', value = this._unescape(match[2]);\n      }\n\n      // A type token is special: it can only be emitted after an IRI or prefixed name is read\n      if (this._previousMarker === '^^') {\n        switch (type) {\n        case 'prefixed': type = 'type';    break;\n        case 'IRI':      type = 'typeIRI'; break;\n        default:         type = '';\n        }\n      }\n\n      // What if nothing of the above was found?\n      if (!type) {\n        // We could be in streaming mode, and then we just wait for more input to arrive.\n        // Otherwise, a syntax error has occurred in the input.\n        // One exception: error on an unaccounted linebreak (= not inside a triple-quoted literal).\n        if (inputFinished || (!/^'''|^\"\"\"/.test(input) && /\\n|\\r/.test(input)))\n          return reportSyntaxError(this);\n        else\n          return this._input = input;\n      }\n\n      // Emit the parsed token\n      var token = { line: line, type: type, value: value, prefix: prefix };\n      callback(null, token);\n      this.previousToken = token;\n      this._previousMarker = type;\n      // Advance to next part to tokenize\n      input = input.substr(matchLength || match[0].length, input.length);\n    }\n\n    // Signals the syntax error through the callback\n    function reportSyntaxError(self) { callback(self._syntaxError(/^\\S*/.exec(input)[0])); }\n  }\n\n  // ### `_unescape` replaces N3 escape codes by their corresponding characters\n  _unescape(item) {\n    try {\n      return item.replace(escapeSequence, function (sequence, unicode4, unicode8, escapedChar) {\n        var charCode;\n        if (unicode4) {\n          charCode = parseInt(unicode4, 16);\n          if (isNaN(charCode)) throw new Error(); // can never happen (regex), but helps performance\n          return fromCharCode(charCode);\n        }\n        else if (unicode8) {\n          charCode = parseInt(unicode8, 16);\n          if (isNaN(charCode)) throw new Error(); // can never happen (regex), but helps performance\n          if (charCode <= 0xFFFF) return fromCharCode(charCode);\n          return fromCharCode(0xD800 + ((charCode -= 0x10000) / 0x400), 0xDC00 + (charCode & 0x3FF));\n        }\n        else {\n          var replacement = escapeReplacements[escapedChar];\n          if (!replacement)\n            throw new Error();\n          return replacement;\n        }\n      });\n    }\n    catch (error) { return null; }\n  }\n\n  // ### `_parseLiteral` parses a literal into an unescaped value\n  _parseLiteral(input) {\n    // Ensure we have enough lookahead to identify triple-quoted strings\n    if (input.length >= 3) {\n      // Identify the opening quote(s)\n      const opening = input.match(/^(?:\"\"\"|\"|'''|'|)/)[0];\n      const openingLength = opening.length;\n\n      // Find the next candidate closing quotes\n      let closingPos = Math.max(this._literalClosingPos, openingLength);\n      while ((closingPos = input.indexOf(opening, closingPos)) > 0) {\n        // Count backslashes right before the closing quotes\n        let backslashCount = 0;\n        while (input[closingPos - backslashCount - 1] === '\\\\')\n          backslashCount++;\n\n        // An even number of backslashes (in particular 0)\n        // means these are actual, non-escaped closing quotes\n        if (backslashCount % 2 === 0) {\n          // Extract and unescape the value\n          const raw = input.substring(openingLength, closingPos);\n          const lines = raw.split(/\\r\\n|\\r|\\n/).length - 1;\n          const matchLength = closingPos + openingLength;\n          // Only triple-quoted strings can be multi-line\n          if (openingLength === 1 && lines !== 0 ||\n              openingLength === 3 && this._lineMode)\n            break;\n          this._line += lines;\n          return { value: this._unescape(raw), matchLength };\n        }\n        closingPos++;\n      }\n      this._literalClosingPos = input.length - openingLength + 1;\n    }\n    return { value: '', matchLength: 0 };\n  }\n\n  // ### `_syntaxError` creates a syntax error for the given issue\n  _syntaxError(issue) {\n    this._input = null;\n    var err = new Error('Unexpected \"' + issue + '\" on line ' + this._line + '.');\n    err.context = {\n      token: undefined,\n      line: this._line,\n      previousToken: this.previousToken,\n    };\n    return err;\n  }\n\n  // ## Public methods\n\n  // ### `tokenize` starts the transformation of an N3 document into an array of tokens.\n  // The input can be a string or a stream.\n  tokenize(input, callback) {\n    var self = this;\n    this._line = 1;\n\n    // If the input is a string, continuously emit tokens through the callback until the end\n    if (typeof input === 'string') {\n      this._input = input;\n      // If a callback was passed, asynchronously call it\n      if (typeof callback === 'function')\n        setImmediate(function () { self._tokenizeToEnd(callback, true); });\n      // If no callback was passed, tokenize synchronously and return\n      else {\n        var tokens = [], error;\n        this._tokenizeToEnd(function (e, t) { e ? (error = e) : tokens.push(t); }, true);\n        if (error) throw error;\n        return tokens;\n      }\n    }\n    // Otherwise, the input must be a stream\n    else {\n      this._input = '';\n      this._pendingBuffer = null;\n      if (typeof input.setEncoding === 'function')\n        input.setEncoding('utf8');\n      // Adds the data chunk to the buffer and parses as far as possible\n      input.on('data', function (data) {\n        if (self._input !== null && data.length !== 0) {\n          // Prepend any previous pending writes\n          if (self._pendingBuffer) {\n            data = Buffer.concat([self._pendingBuffer, data]);\n            self._pendingBuffer = null;\n          }\n          // Hold if the buffer ends in an incomplete unicode sequence\n          if (data[data.length - 1] & 0x80) {\n            self._pendingBuffer = data;\n          }\n          // Otherwise, tokenize as far as possible\n          else {\n            self._input += data;\n            self._tokenizeToEnd(callback, false);\n          }\n        }\n      });\n      // Parses until the end\n      input.on('end', function () {\n        if (self._input !== null)\n          self._tokenizeToEnd(callback, true);\n      });\n      input.on('error', callback);\n    }\n  }\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nmodule.exports = Stream;\n\nvar EE = require('events').EventEmitter;\nvar inherits = require('inherits');\n\ninherits(Stream, EE);\nStream.Readable = require('readable-stream/readable.js');\nStream.Writable = require('readable-stream/writable.js');\nStream.Duplex = require('readable-stream/duplex.js');\nStream.Transform = require('readable-stream/transform.js');\nStream.PassThrough = require('readable-stream/passthrough.js');\n\n// Backwards-compat with node 0.4.x\nStream.Stream = Stream;\n\n\n\n// old-style streams.  Note that the pipe method (the only relevant\n// part of this class) is overridden in the Readable class.\n\nfunction Stream() {\n  EE.call(this);\n}\n\nStream.prototype.pipe = function(dest, options) {\n  var source = this;\n\n  function ondata(chunk) {\n    if (dest.writable) {\n      if (false === dest.write(chunk) && source.pause) {\n        source.pause();\n      }\n    }\n  }\n\n  source.on('data', ondata);\n\n  function ondrain() {\n    if (source.readable && source.resume) {\n      source.resume();\n    }\n  }\n\n  dest.on('drain', ondrain);\n\n  // If the 'end' option is not supplied, dest.end() will be called when\n  // source gets the 'end' or 'close' events.  Only dest.end() once.\n  if (!dest._isStdio && (!options || options.end !== false)) {\n    source.on('end', onend);\n    source.on('close', onclose);\n  }\n\n  var didOnEnd = false;\n  function onend() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    dest.end();\n  }\n\n\n  function onclose() {\n    if (didOnEnd) return;\n    didOnEnd = true;\n\n    if (typeof dest.destroy === 'function') dest.destroy();\n  }\n\n  // don't leave dangling pipes when there are errors.\n  function onerror(er) {\n    cleanup();\n    if (EE.listenerCount(this, 'error') === 0) {\n      throw er; // Unhandled stream error in pipe.\n    }\n  }\n\n  source.on('error', onerror);\n  dest.on('error', onerror);\n\n  // remove all the event listeners that were added.\n  function cleanup() {\n    source.removeListener('data', ondata);\n    dest.removeListener('drain', ondrain);\n\n    source.removeListener('end', onend);\n    source.removeListener('close', onclose);\n\n    source.removeListener('error', onerror);\n    dest.removeListener('error', onerror);\n\n    source.removeListener('end', cleanup);\n    source.removeListener('close', cleanup);\n\n    dest.removeListener('close', cleanup);\n  }\n\n  source.on('end', cleanup);\n  source.on('close', cleanup);\n\n  dest.on('close', cleanup);\n\n  dest.emit('pipe', source);\n\n  // Allow for unix-like usage: A.pipe(B).pipe(C)\n  return dest;\n};\n","/**\n * A JavaScript implementation of the JSON-LD API.\n *\n * @author Dave Longley\n *\n * @license BSD 3-Clause License\n * Copyright (c) 2011-2017 Digital Bazaar, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * Redistributions in binary form must reproduce the above copyright\n * notice, this list of conditions and the following disclaimer in the\n * documentation and/or other materials provided with the distribution.\n *\n * Neither the name of the Digital Bazaar, Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\nconst canonize = require('rdf-canonize');\nconst util = require('./util');\nconst IdentifierIssuer = util.IdentifierIssuer;\nconst JsonLdError = require('./JsonLdError');\nconst NQuads = require('./NQuads');\nconst Rdfa = require('./Rdfa');\n\nconst {expand: _expand} = require('./expand');\nconst {flatten: _flatten} = require('./flatten');\nconst {fromRDF: _fromRDF} = require('./fromRdf');\nconst {toRDF: _toRDF} = require('./toRdf');\n\nconst {\n  frameMergedOrDefault: _frameMergedOrDefault\n} = require('./frame');\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isString: _isString\n} = require('./types');\n\nconst {\n  isSubjectReference: _isSubjectReference,\n} = require('./graphTypes');\n\nconst {\n  getInitialContext: _getInitialContext,\n  process: _processContext,\n  getAllContexts: _getAllContexts\n} = require('./context');\n\nconst {\n  compact: _compact,\n  compactIri: _compactIri,\n  removePreserve: _removePreserve\n} = require('./compact');\n\nconst {\n  createNodeMap: _createNodeMap,\n  createMergedNodeMap: _createMergedNodeMap,\n  mergeNodeMaps: _mergeNodeMaps\n} = require('./nodeMap');\n\n// determine if in-browser or using node.js\nconst _nodejs = (\n  typeof process !== 'undefined' && process.versions && process.versions.node);\nconst _browser = !_nodejs &&\n  (typeof window !== 'undefined' || typeof self !== 'undefined');\n\n/* eslint-disable indent */\n// attaches jsonld API to the given object\nconst wrapper = function(jsonld) {\n\n/** Registered RDF dataset parsers hashed by content-type. */\nconst _rdfParsers = {};\n\n/* Core API */\n\n/**\n * Performs JSON-LD compaction.\n *\n * @param input the JSON-LD input to compact.\n * @param ctx the context to compact with.\n * @param [options] options to use:\n *          [base] the base IRI to use.\n *          [compactArrays] true to compact arrays to single values when\n *            appropriate, false not to (default: true).\n *          [compactToRelative] true to compact IRIs to be relative to document\n *            base, false to keep absolute (default: true)\n *          [graph] true to always output a top-level graph (default: false).\n *          [expandContext] a context to expand with.\n *          [skipExpansion] true to assume the input is expanded and skip\n *            expansion, false not to, defaults to false.\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n *          [expansionMap(info)] a function that can be used to custom map\n *            unmappable values (or to throw an error when they are detected);\n *            if this function returns `undefined` then the default behavior\n *            will be used.\n *          [framing] true if compaction is occuring during a framing operation.\n *          [compactionMap(info)] a function that can be used to custom map\n *            unmappable values (or to throw an error when they are detected);\n *            if this function returns `undefined` then the default behavior\n *            will be used.\n * @param [callback(err, compacted)] called once the operation completes.\n *\n * @return a Promise that resolves to the compacted output.\n */\njsonld.compact = util.callbackify(async function(input, ctx, options) {\n  if(arguments.length < 2) {\n    throw new TypeError('Could not compact, too few arguments.');\n  }\n\n  if(ctx === null) {\n    throw new JsonLdError(\n      'The compaction context must not be null.',\n      'jsonld.CompactError', {code: 'invalid local context'});\n  }\n\n  // nothing to compact\n  if(input === null) {\n    return null;\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    compactArrays: true,\n    compactToRelative: true,\n    graph: false,\n    skipExpansion: false,\n    link: false,\n    issuer: new IdentifierIssuer('_:b')\n  });\n  if(options.link) {\n    // force skip expansion when linking, \"link\" is not part of the public\n    // API, it should only be called from framing\n    options.skipExpansion = true;\n  }\n  if(!options.compactToRelative) {\n    delete options.base;\n  }\n\n  // expand input\n  let expanded;\n  if(options.skipExpansion) {\n    expanded = input;\n  } else {\n    expanded = await jsonld.expand(input, options);\n  }\n\n  // process context\n  const activeCtx = await jsonld.processContext(\n    _getInitialContext(options), ctx, options);\n\n  // do compaction\n  let compacted = _compact({\n    activeCtx,\n    element: expanded,\n    options,\n    compactionMap: options.compactionMap\n  });\n\n  // perform clean up\n  if(options.compactArrays && !options.graph && _isArray(compacted)) {\n    if(compacted.length === 1) {\n      // simplify to a single item\n      compacted = compacted[0];\n    } else if(compacted.length === 0) {\n      // simplify to an empty object\n      compacted = {};\n    }\n  } else if(options.graph && _isObject(compacted)) {\n    // always use array if graph option is on\n    compacted = [compacted];\n  }\n\n  // follow @context key\n  if(_isObject(ctx) && '@context' in ctx) {\n    ctx = ctx['@context'];\n  }\n\n  // build output context\n  ctx = util.clone(ctx);\n  if(!_isArray(ctx)) {\n    ctx = [ctx];\n  }\n  // remove empty contexts\n  const tmp = ctx;\n  ctx = [];\n  for(let i = 0; i < tmp.length; ++i) {\n    if(!_isObject(tmp[i]) || Object.keys(tmp[i]).length > 0) {\n      ctx.push(tmp[i]);\n    }\n  }\n\n  // remove array if only one context\n  const hasContext = (ctx.length > 0);\n  if(ctx.length === 1) {\n    ctx = ctx[0];\n  }\n\n  // add context and/or @graph\n  if(_isArray(compacted)) {\n    // use '@graph' keyword\n    const graphAlias = _compactIri({\n      activeCtx, iri: '@graph', relativeTo: {vocab: true}\n    });\n    const graph = compacted;\n    compacted = {};\n    if(hasContext) {\n      compacted['@context'] = ctx;\n    }\n    compacted[graphAlias] = graph;\n  } else if(_isObject(compacted) && hasContext) {\n    // reorder keys so @context is first\n    const graph = compacted;\n    compacted = {'@context': ctx};\n    for(const key in graph) {\n      compacted[key] = graph[key];\n    }\n  }\n\n  if(options.framing) {\n    // get graph alias\n    const graph = _compactIri({\n      activeCtx, iri: '@graph', relativeTo: {vocab: true}\n    });\n    // remove @preserve from results\n    options.link = {};\n    compacted[graph] = _removePreserve(activeCtx, compacted[graph], options);\n  }\n\n  return compacted;\n});\n\n/**\n * Performs JSON-LD expansion.\n *\n * @param input the JSON-LD input to expand.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [keepFreeFloatingNodes] true to keep free-floating nodes,\n *            false not to, defaults to false.\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n *          [expansionMap(info)] a function that can be used to custom map\n *            unmappable values (or to throw an error when they are detected);\n *            if this function returns `undefined` then the default behavior\n *            will be used.\n * @param [callback(err, expanded)] called once the operation completes.\n *\n * @return a Promise that resolves to the expanded output.\n */\njsonld.expand = util.callbackify(async function(input, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not expand, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    keepFreeFloatingNodes: false\n  });\n  if(options.expansionMap === false) {\n    options.expansionMap = undefined;\n  }\n\n  // build set of objects that may have @contexts to resolve\n  const toResolve = {};\n\n  // build set of contexts to process prior to expansion\n  const contextsToProcess = [];\n\n  // if an `expandContext` has been given ensure it gets resolved\n  if('expandContext' in options) {\n    const expandContext = util.clone(options.expandContext);\n    if(_isObject(expandContext) && '@context' in expandContext) {\n      toResolve.expandContext = expandContext;\n    } else {\n      toResolve.expandContext = {'@context': expandContext};\n    }\n    contextsToProcess.push(toResolve.expandContext);\n  }\n\n  // if input is a string, attempt to dereference remote document\n  let defaultBase;\n  if(!_isString(input)) {\n    // input is not a URL, do not need to retrieve it first\n    toResolve.input = util.clone(input);\n  } else {\n    // load remote doc\n    const remoteDoc = await jsonld.get(input, options);\n    defaultBase = remoteDoc.documentUrl;\n    toResolve.input = remoteDoc.document;\n    if(remoteDoc.contextUrl) {\n      // context included in HTTP link header and must be resolved\n      toResolve.remoteContext = {'@context': remoteDoc.contextUrl};\n      contextsToProcess.push(toResolve.remoteContext);\n    }\n  }\n\n  // set default base\n  if(!('base' in options)) {\n    options.base = defaultBase || '';\n  }\n\n  // get all contexts in `toResolve`\n  await _getAllContexts(toResolve, options);\n\n  // process any additional contexts\n  let activeCtx = _getInitialContext(options);\n  contextsToProcess.forEach(localCtx => {\n    activeCtx = _processContext({activeCtx, localCtx, options});\n  });\n\n  // expand resolved input\n  let expanded = _expand({\n    activeCtx,\n    element: toResolve.input,\n    options,\n    expansionMap: options.expansionMap\n  });\n\n  // optimize away @graph with no other properties\n  if(_isObject(expanded) && ('@graph' in expanded) &&\n    Object.keys(expanded).length === 1) {\n    expanded = expanded['@graph'];\n  } else if(expanded === null) {\n    expanded = [];\n  }\n\n  // normalize to an array\n  if(!_isArray(expanded)) {\n    expanded = [expanded];\n  }\n\n  return expanded;\n});\n\n/**\n * Performs JSON-LD flattening.\n *\n * @param input the JSON-LD to flatten.\n * @param ctx the context to use to compact the flattened output, or null.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n * @param [callback(err, flattened)] called once the operation completes.\n *\n * @return a Promise that resolves to the flattened output.\n */\njsonld.flatten = util.callbackify(async function(input, ctx, options) {\n  if(arguments.length < 1) {\n    return new TypeError('Could not flatten, too few arguments.');\n  }\n\n  if(typeof ctx === 'function') {\n    ctx = null;\n  } else {\n    ctx = ctx || null;\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : ''\n  });\n\n  // expand input\n  const expanded = await jsonld.expand(input, options);\n\n  // do flattening\n  const flattened = _flatten(expanded);\n\n  if(ctx === null) {\n    // no compaction required\n    return flattened;\n  }\n\n  // compact result (force @graph option to true, skip expansion)\n  options.graph = true;\n  options.skipExpansion = true;\n  const compacted = await jsonld.compact(flattened, ctx, options);\n\n  return compacted;\n});\n\n/**\n * Performs JSON-LD framing.\n *\n * @param input the JSON-LD input to frame.\n * @param frame the JSON-LD frame to use.\n * @param [options] the framing options.\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [embed] default @embed flag: '@last', '@always', '@never', '@link'\n *            (default: '@last').\n *          [explicit] default @explicit flag (default: false).\n *          [requireAll] default @requireAll flag (default: true).\n *          [omitDefault] default @omitDefault flag (default: false).\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n * @param [callback(err, framed)] called once the operation completes.\n *\n * @return a Promise that resolves to the framed output.\n */\njsonld.frame = util.callbackify(async function(input, frame, options) {\n  if(arguments.length < 2) {\n    throw new TypeError('Could not frame, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    embed: '@last',\n    explicit: false,\n    requireAll: true,\n    omitDefault: false,\n    pruneBlankNodeIdentifiers: true,\n    bnodesToClear: []\n  });\n\n  // if frame is a string, attempt to dereference remote document\n  if(_isString(frame)) {\n    // load remote doc\n    const remoteDoc = await jsonld.get(frame, options);\n    frame = remoteDoc.document;\n\n    if(remoteDoc.contextUrl) {\n      // inject link header @context into frame\n      let ctx = frame['@context'];\n      if(!ctx) {\n        ctx = remoteDoc.contextUrl;\n      } else if(_isArray(ctx)) {\n        ctx.push(remoteDoc.contextUrl);\n      } else {\n        ctx = [ctx, remoteDoc.contextUrl];\n      }\n      frame['@context'] = ctx;\n    }\n  }\n\n  const frameContext = frame ? frame['@context'] || {} : {};\n\n  // expand input\n  const expanded = await jsonld.expand(input, options);\n\n  // expand frame\n  const opts = util.clone(options);\n  opts.isFrame = true;\n  opts.keepFreeFloatingNodes = true;\n  const expandedFrame = await jsonld.expand(frame, opts);\n\n  // if the unexpanded frame includes a key expanding to @graph, frame the\n  // default graph, otherwise, the merged graph\n  // FIXME should look for aliases of @graph\n  opts.merged = !('@graph' in frame);\n  // do framing\n  const framed = _frameMergedOrDefault(expanded, expandedFrame, opts);\n\n  // compact result (force @graph option to true, skip expansion,\n  // check for linked embeds)\n  opts.graph = true;\n  opts.skipExpansion = true;\n  opts.link = {};\n  opts.framing = true;\n  const compacted = await jsonld.compact(framed, frameContext, opts);\n\n  return compacted;\n});\n\n/**\n * **Experimental**\n *\n * Links a JSON-LD document's nodes in memory.\n *\n * @param input the JSON-LD document to link.\n * @param [ctx] the JSON-LD context to apply.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n * @param [callback(err, linked)] called once the operation completes.\n *\n * @return a Promise that resolves to the linked output.\n */\njsonld.link = util.callbackify(async function(input, ctx, options) {\n  // API matches running frame with a wildcard frame and embed: '@link'\n  // get arguments\n  const frame = {};\n  if(ctx) {\n    frame['@context'] = ctx;\n  }\n  frame['@embed'] = '@link';\n  return jsonld.frame(input, frame, options);\n});\n\n/**\n * Performs RDF dataset normalization on the given input. The input is JSON-LD\n * unless the 'inputFormat' option is used. The output is an RDF dataset\n * unless the 'format' option is used.\n *\n * @param input the input to normalize as JSON-LD or as a format specified by\n *          the 'inputFormat' option.\n * @param [options] the options to use:\n *          [algorithm] the normalization algorithm to use, `URDNA2015` or\n *            `URGNA2012` (default: `URDNA2015`).\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [skipExpansion] true to assume the input is expanded and skip\n *            expansion, false not to, defaults to false.\n *          [inputFormat] the format if input is not JSON-LD:\n *            'application/n-quads' for N-Quads.\n *          [format] the format if output is a string:\n *            'application/n-quads' for N-Quads.\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n *          [useNative] true to use a native canonize algorithm\n * @param [callback(err, normalized)] called once the operation completes.\n *\n * @return a Promise that resolves to the normalized output.\n */\njsonld.normalize = jsonld.canonize = util.callbackify(async function(\n  input, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not canonize, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    algorithm: 'URDNA2015',\n    skipExpansion: false\n  });\n  if('inputFormat' in options) {\n    if(options.inputFormat !== 'application/n-quads' &&\n      options.inputFormat !== 'application/nquads') {\n      throw new JsonLdError(\n        'Unknown canonicalization input format.',\n        'jsonld.CanonizeError');\n    }\n    // TODO: `await` for async parsers\n    const parsedInput = NQuads.parse(input);\n\n    // do canonicalization\n    return canonize.canonize(parsedInput, options);\n  }\n\n  // convert to RDF dataset then do normalization\n  const opts = util.clone(options);\n  delete opts.format;\n  opts.produceGeneralizedRdf = false;\n  const dataset = await jsonld.toRDF(input, opts);\n\n  // do canonicalization\n  return canonize.canonize(dataset, options);\n});\n\n/**\n * Converts an RDF dataset to JSON-LD.\n *\n * @param dataset a serialized string of RDF in a format specified by the\n *          format option or an RDF dataset to convert.\n * @param [options] the options to use:\n *          [format] the format if dataset param must first be parsed:\n *            'application/n-quads' for N-Quads (default).\n *          [rdfParser] a custom RDF-parser to use to parse the dataset.\n *          [useRdfType] true to use rdf:type, false to use @type\n *            (default: false).\n *          [useNativeTypes] true to convert XSD types into native types\n *            (boolean, integer, double), false not to (default: false).\n * @param [callback(err, output)] called once the operation completes.\n *\n * @return a Promise that resolves to the JSON-LD document.\n */\njsonld.fromRDF = util.callbackify(async function(dataset, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not convert from RDF, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    format: _isString(dataset) ? 'application/n-quads' : undefined\n  });\n\n  const {format} = options;\n  let {rdfParser} = options;\n\n  // handle special format\n  if(format) {\n    // check supported formats\n    rdfParser = rdfParser || _rdfParsers[format];\n    if(!rdfParser) {\n      throw new JsonLdError(\n        'Unknown input format.',\n        'jsonld.UnknownFormat', {format});\n    }\n  } else {\n    // no-op parser, assume dataset already parsed\n    rdfParser = () => dataset;\n  }\n\n  // TODO: call `normalizeAsyncFn` on parser fn\n\n  // rdfParser can be callback, promise-based, or synchronous\n  let parsedDataset;\n  if(rdfParser.length > 1) {\n    // convert callback-based rdf parser to promise-based\n    parsedDataset = new Promise((resolve, reject) => {\n      rdfParser(dataset, (err, dataset) => {\n        if(err) {\n          reject(err);\n        } else {\n          resolve(dataset);\n        }\n      });\n    });\n  } else {\n    parsedDataset = Promise.resolve(rdfParser(dataset));\n  }\n\n  parsedDataset = await parsedDataset;\n\n  // back-compat with old parsers that produced legacy dataset format\n  if(!Array.isArray(parsedDataset)) {\n    parsedDataset = NQuads.legacyDatasetToQuads(parsedDataset);\n  }\n\n  return _fromRDF(parsedDataset, options);\n});\n\n/**\n * Outputs the RDF dataset found in the given JSON-LD object.\n *\n * @param input the JSON-LD input.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [skipExpansion] true to assume the input is expanded and skip\n *            expansion, false not to, defaults to false.\n *          [format] the format to use to output a string:\n *            'application/n-quads' for N-Quads.\n *          [produceGeneralizedRdf] true to output generalized RDF, false\n *            to produce only standard RDF (default: false).\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n * @param [callback(err, dataset)] called once the operation completes.\n *\n * @return a Promise that resolves to the RDF dataset.\n */\njsonld.toRDF = util.callbackify(async function(input, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not convert to RDF, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : '',\n    skipExpansion: false\n  });\n\n  // TODO: support toRDF custom map?\n  let expanded;\n  if(options.skipExpansion) {\n    expanded = input;\n  } else {\n    // expand input\n    expanded = await jsonld.expand(input, options);\n  }\n\n  // output RDF dataset\n  const dataset = _toRDF(expanded, options);\n  if(options.format) {\n    if(options.format === 'application/n-quads' ||\n      options.format === 'application/nquads') {\n      return await NQuads.serialize(dataset);\n    }\n    throw new JsonLdError(\n      'Unknown output format.',\n      'jsonld.UnknownFormat', {format: options.format});\n  }\n\n  return dataset;\n});\n\n/**\n * **Experimental**\n *\n * Recursively flattens the nodes in the given JSON-LD input into a merged\n * map of node ID => node. All graphs will be merged into the default graph.\n *\n * @param input the JSON-LD input.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n * @param [callback(err, nodeMap)] called once the operation completes.\n *\n * @return a Promise that resolves to the merged node map.\n */\njsonld.createNodeMap = util.callbackify(async function(input, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not create node map, too few arguments.');\n  }\n\n  // set default options\n  options = _setDefaults(options, {\n    base: _isString(input) ? input : ''\n  });\n\n  // expand input\n  const expanded = await jsonld.expand(input, options);\n\n  return _createMergedNodeMap(expanded, options);\n});\n\n/**\n * **Experimental**\n *\n * Merges two or more JSON-LD documents into a single flattened document.\n *\n * @param docs the JSON-LD documents to merge together.\n * @param ctx the context to use to compact the merged result, or null.\n * @param [options] the options to use:\n *          [base] the base IRI to use.\n *          [expandContext] a context to expand with.\n *          [issuer] a jsonld.IdentifierIssuer to use to label blank nodes.\n *          [mergeNodes] true to merge properties for nodes with the same ID,\n *            false to ignore new properties for nodes with the same ID once\n *            the ID has been defined; note that this may not prevent merging\n *            new properties where a node is in the `object` position\n *            (default: true).\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n * @param [callback(err, merged)] called once the operation completes.\n *\n * @return a Promise that resolves to the merged output.\n */\njsonld.merge = util.callbackify(async function(docs, ctx, options) {\n  if(arguments.length < 1) {\n    throw new TypeError('Could not merge, too few arguments.');\n  }\n  if(!_isArray(docs)) {\n    throw new TypeError('Could not merge, \"docs\" must be an array.');\n  }\n\n  if(typeof ctx === 'function') {\n    ctx = null;\n  } else {\n    ctx = ctx || null;\n  }\n\n  // set default options\n  options = _setDefaults(options, {});\n\n  // expand all documents\n  const expanded = await Promise.all(docs.map(doc => {\n    const opts = Object.assign({}, options);\n    return jsonld.expand(doc, opts);\n  }));\n\n  let mergeNodes = true;\n  if('mergeNodes' in options) {\n    mergeNodes = options.mergeNodes;\n  }\n\n  const issuer = options.issuer || new IdentifierIssuer('_:b');\n  const graphs = {'@default': {}};\n\n  for(let i = 0; i < expanded.length; ++i) {\n    // uniquely relabel blank nodes\n    const doc = util.relabelBlankNodes(expanded[i], {\n      issuer: new IdentifierIssuer('_:b' + i + '-')\n    });\n\n    // add nodes to the shared node map graphs if merging nodes, to a\n    // separate graph set if not\n    const _graphs = (mergeNodes || i === 0) ? graphs : {'@default': {}};\n    _createNodeMap(doc, _graphs, '@default', issuer);\n\n    if(_graphs !== graphs) {\n      // merge document graphs but don't merge existing nodes\n      for(const graphName in _graphs) {\n        const _nodeMap = _graphs[graphName];\n        if(!(graphName in graphs)) {\n          graphs[graphName] = _nodeMap;\n          continue;\n        }\n        const nodeMap = graphs[graphName];\n        for(const key in _nodeMap) {\n          if(!(key in nodeMap)) {\n            nodeMap[key] = _nodeMap[key];\n          }\n        }\n      }\n    }\n  }\n\n  // add all non-default graphs to default graph\n  const defaultGraph = _mergeNodeMaps(graphs);\n\n  // produce flattened output\n  const flattened = [];\n  const keys = Object.keys(defaultGraph).sort();\n  for(let ki = 0; ki < keys.length; ++ki) {\n    const node = defaultGraph[keys[ki]];\n    // only add full subjects to top-level\n    if(!_isSubjectReference(node)) {\n      flattened.push(node);\n    }\n  }\n\n  if(ctx === null) {\n    return flattened;\n  }\n\n  // compact result (force @graph option to true, skip expansion)\n  options.graph = true;\n  options.skipExpansion = true;\n  const compacted = await jsonld.compact(flattened, ctx, options);\n\n  return compacted;\n});\n\n/**\n * The default document loader for external documents. If the environment\n * is node.js, a callback-continuation-style document loader is used; otherwise,\n * a promises-style document loader is used.\n *\n * @param url the URL to load.\n * @param callback(err, remoteDoc) called once the operation completes,\n *          if using a non-promises API.\n *\n * @return a promise, if using a promises API.\n */\nObject.defineProperty(jsonld, 'documentLoader', {\n  get: () => jsonld._documentLoader,\n  set: v => jsonld._documentLoader = util.normalizeDocumentLoader(v)\n});\n// default document loader not implemented\njsonld.documentLoader = async url => {\n  throw new JsonLdError(\n    'Could not retrieve a JSON-LD document from the URL. URL ' +\n    'dereferencing not implemented.', 'jsonld.LoadDocumentError',\n    {code: 'loading document failed', url});\n};\n\n/**\n * Deprecated default document loader. Do not use or override.\n */\njsonld.loadDocument = util.callbackify(async function() {\n  return jsonld.documentLoader.apply(null, arguments);\n});\n\n/**\n * Gets a remote JSON-LD document using the default document loader or\n * one given in the passed options.\n *\n * @param url the URL to fetch.\n * @param [options] the options to use:\n *          [documentLoader] the document loader to use.\n * @param [callback(err, remoteDoc)] called once the operation completes.\n *\n * @return a Promise that resolves to the retrieved remote document.\n */\njsonld.get = util.callbackify(async function(url, options) {\n  let load;\n  if(typeof options.documentLoader === 'function') {\n    load = util.normalizeDocumentLoader(options.documentLoader);\n  } else {\n    load = jsonld.documentLoader;\n  }\n\n  const remoteDoc = await load(url);\n\n  // TODO: can this be moved into `normalizeDocumentLoader`?\n  try {\n    if(!remoteDoc.document) {\n      throw new JsonLdError(\n        'No remote document found at the given URL.',\n        'jsonld.NullRemoteDocument');\n    }\n    if(_isString(remoteDoc.document)) {\n      remoteDoc.document = JSON.parse(remoteDoc.document);\n    }\n  } catch(e) {\n    throw new JsonLdError(\n      'Could not retrieve a JSON-LD document from the URL.',\n      'jsonld.LoadDocumentError', {\n        code: 'loading document failed',\n        cause: e,\n        remoteDoc\n      });\n  }\n\n  return remoteDoc;\n});\n\n/**\n * Processes a local context, resolving any URLs as necessary, and returns a\n * new active context in its callback.\n *\n * @param activeCtx the current active context.\n * @param localCtx the local context to process.\n * @param [options] the options to use:\n *          [documentLoader(url, callback(err, remoteDoc))] the document loader.\n * @param [callback(err, activeCtx)] called once the operation completes.\n *\n * @return a Promise that resolves to the new active context.\n */\njsonld.processContext = util.callbackify(async function(\n  activeCtx, localCtx, options) {\n  // set default options\n  options = _setDefaults(options, {\n    base: ''\n  });\n\n  // return initial context early for null context\n  if(localCtx === null) {\n    return _getInitialContext(options);\n  }\n\n  // get URLs in localCtx\n  localCtx = util.clone(localCtx);\n  if(!(_isObject(localCtx) && '@context' in localCtx)) {\n    localCtx = {'@context': localCtx};\n  }\n  const ctx = await _getAllContexts(localCtx, options);\n\n  return _processContext({activeCtx, localCtx: ctx, options});\n});\n\n// backwards compatibility\njsonld.getContextValue = require('./context').getContextValue;\n\n/**\n * Document loaders.\n */\njsonld.documentLoaders = {};\njsonld.documentLoaders.node = require('./documentLoaders/node');\njsonld.documentLoaders.xhr = require('./documentLoaders/xhr');\n\n/**\n * Assigns the default document loader for external document URLs to a built-in\n * default. Supported types currently include: 'xhr' and 'node'.\n *\n * @param type the type to set.\n * @param [params] the parameters required to use the document loader.\n */\njsonld.useDocumentLoader = function(type) {\n  if(!(type in jsonld.documentLoaders)) {\n    throw new JsonLdError(\n      'Unknown document loader type: \"' + type + '\"',\n      'jsonld.UnknownDocumentLoader',\n      {type});\n  }\n\n  // set document loader\n  jsonld.documentLoader = jsonld.documentLoaders[type].apply(\n    jsonld, Array.prototype.slice.call(arguments, 1));\n};\n\n/**\n * Registers an RDF dataset parser by content-type, for use with\n * jsonld.fromRDF. An RDF dataset parser will always be given two parameters,\n * a string of input and a callback. An RDF dataset parser can be synchronous\n * or asynchronous.\n *\n * If the parser function returns undefined or null then it will be assumed to\n * be asynchronous w/a continuation-passing style and the callback parameter\n * given to the parser MUST be invoked.\n *\n * If it returns a Promise, then it will be assumed to be asynchronous, but the\n * callback parameter MUST NOT be invoked. It should instead be ignored.\n *\n * If it returns an RDF dataset, it will be assumed to be synchronous and the\n * callback parameter MUST NOT be invoked. It should instead be ignored.\n *\n * @param contentType the content-type for the parser.\n * @param parser(input, callback(err, dataset)) the parser function (takes a\n *          string as a parameter and either returns null/undefined and uses\n *          the given callback, returns a Promise, or returns an RDF dataset).\n */\njsonld.registerRDFParser = function(contentType, parser) {\n  _rdfParsers[contentType] = parser;\n};\n\n/**\n * Unregisters an RDF dataset parser by content-type.\n *\n * @param contentType the content-type for the parser.\n */\njsonld.unregisterRDFParser = function(contentType) {\n  delete _rdfParsers[contentType];\n};\n\n// register the N-Quads RDF parser\njsonld.registerRDFParser('application/n-quads', NQuads.parse);\njsonld.registerRDFParser('application/nquads', NQuads.parse);\n\n// register the RDFa API RDF parser\njsonld.registerRDFParser('rdfa-api', Rdfa.parse);\n\n/* URL API */\njsonld.url = require('./url');\n\n/* Utility API */\njsonld.util = util;\n// backwards compatibility\nObject.assign(jsonld, util);\n\n// reexpose API as jsonld.promises for backwards compatability\njsonld.promises = jsonld;\n\n// backwards compatibility\njsonld.RequestQueue = require('./RequestQueue');\n\n/* WebIDL API */\njsonld.JsonLdProcessor = require('./JsonLdProcessor')(jsonld);\n\n// setup browser global JsonLdProcessor\nif(_browser && typeof global.JsonLdProcessor === 'undefined') {\n  Object.defineProperty(global, 'JsonLdProcessor', {\n    writable: true,\n    enumerable: false,\n    configurable: true,\n    value: jsonld.JsonLdProcessor\n  });\n}\n\n// set platform-specific defaults/APIs\nif(_nodejs) {\n  // use node document loader by default\n  jsonld.useDocumentLoader('node');\n} else if(typeof XMLHttpRequest !== 'undefined') {\n  // use xhr document loader by default\n  jsonld.useDocumentLoader('xhr');\n}\n\nfunction _setDefaults(options, {\n  documentLoader = jsonld.documentLoader,\n  ...defaults\n}) {\n  return Object.assign({}, {documentLoader}, defaults, options);\n}\n\n// end of jsonld API `wrapper` factory\nreturn jsonld;\n};\n\n// external APIs:\n\n// used to generate a new jsonld API instance\nconst factory = function() {\n  return wrapper(function() {\n    return factory();\n  });\n};\n\n// wrap the main jsonld API instance\nwrapper(factory);\n// export API\nmodule.exports = factory;\n","/**\n * An implementation of the RDF Dataset Normalization specification.\n * This library works in the browser and node.js.\n *\n * BSD 3-Clause License\n * Copyright (c) 2016-2017 Digital Bazaar, Inc.\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * Redistributions of source code must retain the above copyright notice,\n * this list of conditions and the following disclaimer.\n *\n * Redistributions in binary form must reproduce the above copyright\n * notice, this list of conditions and the following disclaimer in the\n * documentation and/or other materials provided with the distribution.\n *\n * Neither the name of the Digital Bazaar, Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS\n * IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED\n * TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A\n * PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED\n * TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n * PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF\n * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING\n * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS\n * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n'use strict';\n\nconst util = require('./util');\nconst URDNA2015 = require('./URDNA2015');\nconst URGNA2012 = require('./URGNA2012');\nconst URDNA2015Sync = require('./URDNA2015Sync');\nconst URGNA2012Sync = require('./URGNA2012Sync');\n\n// optional native support\nlet rdfCanonizeNative;\ntry {\n  rdfCanonizeNative = require('rdf-canonize-native');\n} catch(e) {}\n\nconst api = {};\nmodule.exports = api;\n\n// expose helpers\napi.NQuads = require('./NQuads');\napi.IdentifierIssuer = require('./IdentifierIssuer');\n\n/**\n * Get or set native API.\n *\n * @param api the native API.\n *\n * @return the currently set native API.\n */\napi._rdfCanonizeNative = function(api) {\n  if(api) {\n    rdfCanonizeNative = api;\n  }\n  return rdfCanonizeNative;\n};\n\n/**\n * Asynchronously canonizes an RDF dataset.\n *\n * @param dataset the dataset to canonize.\n * @param options the options to use:\n *          algorithm the canonicalization algorithm to use, `URDNA2015` or\n *            `URGNA2012`.\n *          [useNative] use native implementation (default: false).\n * @param [callback(err, canonical)] called once the operation completes.\n *\n * @return a Promise that resolves to the canonicalized RDF Dataset.\n */\napi.canonize = util.callbackify(async function(dataset, options) {\n  let callback;\n  const promise = new Promise((resolve, reject) => {\n    callback = (err, canonical) => {\n      if(err) {\n        return reject(err);\n      }\n\n      /*if(options.format === 'application/n-quads') {\n        canonical = canonical.join('');\n      }\n      canonical = _parseNQuads(canonical.join(''));*/\n\n      resolve(canonical);\n    };\n  });\n\n  // back-compat with legacy dataset\n  if(!Array.isArray(dataset)) {\n    dataset = api.NQuads.legacyDatasetToQuads(dataset);\n  }\n\n  // TODO: convert algorithms to Promise-based async\n  if(options.useNative) {\n    if(rdfCanonizeNative) {\n      rdfCanonizeNative.canonize(dataset, options, callback);\n    } else {\n      throw new Error('rdf-canonize-native not available');\n    }\n  } else {\n    if(options.algorithm === 'URDNA2015') {\n      new URDNA2015(options).main(dataset, callback);\n    } else if(options.algorithm === 'URGNA2012') {\n      new URGNA2012(options).main(dataset, callback);\n    } else if(!('algorithm' in options)) {\n      throw new Error('No RDF Dataset Canonicalization algorithm specified.');\n    } else {\n      throw new Error(\n        'Invalid RDF Dataset Canonicalization algorithm: ' + options.algorithm);\n    }\n  }\n\n  return promise;\n});\n\n/**\n * Synchronously canonizes an RDF dataset.\n *\n * @param dataset the dataset to canonize.\n * @param options the options to use:\n *          algorithm the canonicalization algorithm to use, `URDNA2015` or\n *            `URGNA2012`.\n *          [useNative] use native implementation (default: false).\n *\n * @return the RDF dataset in canonical form.\n */\napi.canonizeSync = function(dataset, options) {\n  // back-compat with legacy dataset\n  if(!Array.isArray(dataset)) {\n    dataset = api.NQuads.legacyDatasetToQuads(dataset);\n  }\n\n  if(options.useNative) {\n    if(rdfCanonizeNative) {\n      return rdfCanonizeNative.canonizeSync(dataset, options);\n    }\n    throw new Error('rdf-canonize-native not available');\n  }\n  if(options.algorithm === 'URDNA2015') {\n    return new URDNA2015Sync(options).main(dataset);\n  } else if(options.algorithm === 'URGNA2012') {\n    return new URGNA2012Sync(options).main(dataset);\n  }\n  if(!('algorithm' in options)) {\n    throw new Error('No RDF Dataset Canonicalization algorithm specified.');\n  }\n  throw new Error(\n    'Invalid RDF Dataset Canonicalization algorithm: ' + options.algorithm);\n};\n","/*\n * Copyright (c) 2016-2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst util = require('./util');\n\nmodule.exports = class IdentifierIssuer {\n  /**\n   * Creates a new IdentifierIssuer. A IdentifierIssuer issues unique\n   * identifiers, keeping track of any previously issued identifiers.\n   *\n   * @param prefix the prefix to use ('<prefix><counter>').\n   */\n  constructor(prefix) {\n    this.prefix = prefix;\n    this.counter = 0;\n    this.existing = {};\n  }\n\n  /**\n   * Copies this IdentifierIssuer.\n   *\n   * @return a copy of this IdentifierIssuer.\n   */\n  clone() {\n    const copy = new IdentifierIssuer(this.prefix);\n    copy.counter = this.counter;\n    copy.existing = util.clone(this.existing);\n    return copy;\n  }\n\n  /**\n   * Gets the new identifier for the given old identifier, where if no old\n   * identifier is given a new identifier will be generated.\n   *\n   * @param [old] the old identifier to get the new identifier for.\n   *\n   * @return the new identifier.\n   */\n  getId(old) {\n    // return existing old identifier\n    if(old && old in this.existing) {\n      return this.existing[old];\n    }\n\n    // get next identifier\n    const identifier = this.prefix + this.counter;\n    this.counter += 1;\n\n    // save mapping\n    if(old) {\n      this.existing[old] = identifier;\n    }\n\n    return identifier;\n  }\n\n  /**\n   * Returns true if the given old identifer has already been assigned a new\n   * identifier.\n   *\n   * @param old the old identifier to check.\n   *\n   * @return true if the old identifier has been assigned a new identifier,\n   *   false if not.\n   */\n  hasId(old) {\n    return (old in this.existing);\n  }\n};\n","/**\n * Node.js module for Forge message digests.\n *\n * @author Dave Longley\n *\n * Copyright 2011-2017 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\n\nmodule.exports = forge.md = forge.md || {};\nforge.md.algorithms = forge.md.algorithms || {};\n","/*\n * Copyright (c) 2016-2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst TERMS = ['subject', 'predicate', 'object', 'graph'];\nconst RDF = 'http://www.w3.org/1999/02/22-rdf-syntax-ns#';\nconst RDF_LANGSTRING = RDF + 'langString';\nconst XSD_STRING = 'http://www.w3.org/2001/XMLSchema#string';\n\n// build regexes\nconst REGEX = {};\n(() => {\n  const iri = '(?:<([^:]+:[^>]*)>)';\n  // https://www.w3.org/TR/turtle/#grammar-production-BLANK_NODE_LABEL\n  const PN_CHARS_BASE =\n    'A-Z' + 'a-z' +\n    '\\u00C0-\\u00D6' +\n    '\\u00D8-\\u00F6' +\n    '\\u00F8-\\u02FF' +\n    '\\u0370-\\u037D' +\n    '\\u037F-\\u1FFF' +\n    '\\u200C-\\u200D' +\n    '\\u2070-\\u218F' +\n    '\\u2C00-\\u2FEF' +\n    '\\u3001-\\uD7FF' +\n    '\\uF900-\\uFDCF' +\n    '\\uFDF0-\\uFFFD';\n    // TODO:\n    //'\\u10000-\\uEFFFF';\n  const PN_CHARS_U =\n    PN_CHARS_BASE +\n    '_';\n  const PN_CHARS =\n    PN_CHARS_U +\n    '0-9' +\n    '-' +\n    '\\u00B7' +\n    '\\u0300-\\u036F' +\n    '\\u203F-\\u2040';\n  const BLANK_NODE_LABEL =\n    '(_:' +\n      '(?:[' + PN_CHARS_U + '0-9])' +\n      '(?:(?:[' + PN_CHARS + '.])*(?:[' + PN_CHARS + ']))?' +\n    ')';\n  const bnode = BLANK_NODE_LABEL;\n  const plain = '\"([^\"\\\\\\\\]*(?:\\\\\\\\.[^\"\\\\\\\\]*)*)\"';\n  const datatype = '(?:\\\\^\\\\^' + iri + ')';\n  const language = '(?:@([a-zA-Z]+(?:-[a-zA-Z0-9]+)*))';\n  const literal = '(?:' + plain + '(?:' + datatype + '|' + language + ')?)';\n  const ws = '[ \\\\t]+';\n  const wso = '[ \\\\t]*';\n\n  // define quad part regexes\n  const subject = '(?:' + iri + '|' + bnode + ')' + ws;\n  const property = iri + ws;\n  const object = '(?:' + iri + '|' + bnode + '|' + literal + ')' + wso;\n  const graphName = '(?:\\\\.|(?:(?:' + iri + '|' + bnode + ')' + wso + '\\\\.))';\n\n  // end of line and empty regexes\n  REGEX.eoln = /(?:\\r\\n)|(?:\\n)|(?:\\r)/g;\n  REGEX.empty = new RegExp('^' + wso + '$');\n\n  // full quad regex\n  REGEX.quad = new RegExp(\n    '^' + wso + subject + property + object + graphName + wso + '$');\n})();\n\nmodule.exports = class NQuads {\n  /**\n   * Parses RDF in the form of N-Quads.\n   *\n   * @param input the N-Quads input to parse.\n   *\n   * @return an RDF dataset (an array of quads per http://rdf.js.org/).\n   */\n  static parse(input) {\n    // build RDF dataset\n    const dataset = [];\n\n    const graphs = {};\n\n    // split N-Quad input into lines\n    const lines = input.split(REGEX.eoln);\n    let lineNumber = 0;\n    for(const line of lines) {\n      lineNumber++;\n\n      // skip empty lines\n      if(REGEX.empty.test(line)) {\n        continue;\n      }\n\n      // parse quad\n      const match = line.match(REGEX.quad);\n      if(match === null) {\n        throw new Error('N-Quads parse error on line ' + lineNumber + '.');\n      }\n\n      // create RDF quad\n      const quad = {};\n\n      // get subject\n      if(match[1] !== undefined) {\n        quad.subject = {termType: 'NamedNode', value: match[1]};\n      } else {\n        quad.subject = {termType: 'BlankNode', value: match[2]};\n      }\n\n      // get predicate\n      quad.predicate = {termType: 'NamedNode', value: match[3]};\n\n      // get object\n      if(match[4] !== undefined) {\n        quad.object = {termType: 'NamedNode', value: match[4]};\n      } else if(match[5] !== undefined) {\n        quad.object = {termType: 'BlankNode', value: match[5]};\n      } else {\n        quad.object = {\n          termType: 'Literal',\n          value: undefined,\n          datatype: {\n            termType: 'NamedNode'\n          }\n        };\n        if(match[7] !== undefined) {\n          quad.object.datatype.value = match[7];\n        } else if(match[8] !== undefined) {\n          quad.object.datatype.value = RDF_LANGSTRING;\n          quad.object.language = match[8];\n        } else {\n          quad.object.datatype.value = XSD_STRING;\n        }\n        quad.object.value = _unescape(match[6]);\n      }\n\n      // get graph\n      if(match[9] !== undefined) {\n        quad.graph = {\n          termType: 'NamedNode',\n          value: match[9]\n        };\n      } else if(match[10] !== undefined) {\n        quad.graph = {\n          termType: 'BlankNode',\n          value: match[10]\n        };\n      } else {\n        quad.graph = {\n          termType: 'DefaultGraph',\n          value: ''\n        };\n      }\n\n      // only add quad if it is unique in its graph\n      if(!(quad.graph.value in graphs)) {\n        graphs[quad.graph.value] = [quad];\n        dataset.push(quad);\n      } else {\n        let unique = true;\n        const quads = graphs[quad.graph.value];\n        for(const q of quads) {\n          if(_compareTriples(q, quad)) {\n            unique = false;\n            break;\n          }\n        }\n        if(unique) {\n          quads.push(quad);\n          dataset.push(quad);\n        }\n      }\n    }\n\n    return dataset;\n  }\n\n  /**\n   * Converts an RDF dataset to N-Quads.\n   *\n   * @param dataset (array of quads) the RDF dataset to convert.\n   *\n   * @return the N-Quads string.\n   */\n  static serialize(dataset) {\n    if(!Array.isArray(dataset)) {\n      dataset = NQuads.legacyDatasetToQuads(dataset);\n    }\n    const quads = [];\n    for(const quad of dataset) {\n      quads.push(NQuads.serializeQuad(quad));\n    }\n    return quads.sort().join('');\n  }\n\n  /**\n   * Converts an RDF quad to an N-Quad string (a single quad).\n   *\n   * @param quad the RDF quad convert.\n   *\n   * @return the N-Quad string.\n   */\n  static serializeQuad(quad) {\n    const s = quad.subject;\n    const p = quad.predicate;\n    const o = quad.object;\n    const g = quad.graph;\n\n    let nquad = '';\n\n    // subject and predicate can only be NamedNode or BlankNode\n    [s, p].forEach(term => {\n      if(term.termType === 'NamedNode') {\n        nquad += '<' + term.value + '>';\n      } else {\n        nquad += term.value;\n      }\n      nquad += ' ';\n    });\n\n    // object is NamedNode, BlankNode, or Literal\n    if(o.termType === 'NamedNode') {\n      nquad += '<' + o.value + '>';\n    } else if(o.termType === 'BlankNode') {\n      nquad += o.value;\n    } else {\n      nquad += '\"' + _escape(o.value) + '\"';\n      if(o.datatype.value === RDF_LANGSTRING) {\n        if(o.language) {\n          nquad += '@' + o.language;\n        }\n      } else if(o.datatype.value !== XSD_STRING) {\n        nquad += '^^<' + o.datatype.value + '>';\n      }\n    }\n\n    // graph can only be NamedNode or BlankNode (or DefaultGraph, but that\n    // does not add to `nquad`)\n    if(g.termType === 'NamedNode') {\n      nquad += ' <' + g.value + '>';\n    } else if(g.termType === 'BlankNode') {\n      nquad += ' ' + g.value;\n    }\n\n    nquad += ' .\\n';\n    return nquad;\n  }\n\n  /**\n   * Converts a legacy-formatted dataset to an array of quads dataset per\n   * http://rdf.js.org/.\n   *\n   * @param dataset the legacy dataset to convert.\n   *\n   * @return the array of quads dataset.\n   */\n  static legacyDatasetToQuads(dataset) {\n    const quads = [];\n\n    const termTypeMap = {\n      'blank node': 'BlankNode',\n      'IRI': 'NamedNode',\n      'literal': 'Literal'\n    };\n\n    for(const graphName in dataset) {\n      const triples = dataset[graphName];\n      triples.forEach(triple => {\n        const quad = {};\n        for(const componentName in triple) {\n          const oldComponent = triple[componentName];\n          const newComponent = {\n            termType: termTypeMap[oldComponent.type],\n            value: oldComponent.value\n          };\n          if(newComponent.termType === 'Literal') {\n            newComponent.datatype = {\n              termType: 'NamedNode'\n            };\n            if('datatype' in oldComponent) {\n              newComponent.datatype.value = oldComponent.datatype;\n            }\n            if('language' in oldComponent) {\n              if(!('datatype' in oldComponent)) {\n                newComponent.datatype.value = RDF_LANGSTRING;\n              }\n              newComponent.language = oldComponent.language;\n            } else if(!('datatype' in oldComponent)) {\n              newComponent.datatype.value = XSD_STRING;\n            }\n          }\n          quad[componentName] = newComponent;\n        }\n        if(graphName === '@default') {\n          quad.graph = {\n            termType: 'DefaultGraph',\n            value: ''\n          };\n        } else {\n          quad.graph = {\n            termType: graphName.startsWith('_:') ? 'BlankNode' : 'NamedNode',\n            value: graphName\n          };\n        }\n        quads.push(quad);\n      });\n    }\n\n    return quads;\n  }\n};\n\n/**\n * Compares two RDF triples for equality.\n *\n * @param t1 the first triple.\n * @param t2 the second triple.\n *\n * @return true if the triples are the same, false if not.\n */\nfunction _compareTriples(t1, t2) {\n  for(const k in t1) {\n    if(t1[k].termType !== t2[k].termType || t1[k].value !== t2[k].value) {\n      return false;\n    }\n  }\n  if(t1.object.termType !== 'Literal') {\n    return true;\n  }\n  return (\n    (t1.object.datatype.termType === t2.object.datatype.termType) &&\n    (t1.object.datatype.value === t2.object.datatype.value) &&\n    (t1.object.language === t2.object.language)\n  );\n}\n\nconst _escapeRegex = /[\"\\\\\\n\\r]/g;\n/**\n * Escape string to N-Quads literal\n */\nfunction _escape(s) {\n  return s.replace(_escapeRegex, function(match) {\n    switch(match) {\n      case '\"': return '\\\\\"';\n      case '\\\\': return '\\\\\\\\';\n      case '\\n': return '\\\\n';\n      case '\\r': return '\\\\r';\n    }\n  });\n}\n\nconst _unescapeRegex =\n  /(?:\\\\([tbnrf\"'\\\\]))|(?:\\\\u([0-9A-Fa-f]{4}))|(?:\\\\U([0-9A-Fa-f]{8}))/g;\n/**\n * Unescape N-Quads literal to string\n */\nfunction _unescape(s) {\n  return s.replace(_unescapeRegex, function(match, code, u, U) {\n    if(code) {\n      switch(code) {\n        case 't': return '\\t';\n        case 'b': return '\\b';\n        case 'n': return '\\n';\n        case 'r': return '\\r';\n        case 'f': return '\\f';\n        case '\"': return '\"';\n        case '\\'': return '\\'';\n        case '\\\\': return '\\\\';\n      }\n    }\n    if(u) {\n      return String.fromCharCode(parseInt(u, 16));\n    }\n    if(U) {\n      // FIXME: support larger values\n      throw new Error('Unsupported U escape');\n    }\n  });\n}\n","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _toArray(arr) {\n  return arrayWithHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableRest();\n}\n\nmodule.exports = _toArray;","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {callbackify, normalizeDocumentLoader} = require('./util');\n\nmodule.exports = class RequestQueue {\n  /**\n   * Creates a simple queue for requesting documents.\n   */\n  constructor() {\n    this._requests = {};\n    this.add = callbackify(this.add.bind(this));\n  }\n\n  wrapLoader(loader) {\n    const self = this;\n    self._loader = normalizeDocumentLoader(loader);\n    return function(/* url */) {\n      return self.add.apply(self, arguments);\n    };\n  }\n\n  async add(url) {\n    const self = this;\n\n    let promise = self._requests[url];\n    if(promise) {\n      // URL already queued, wait for it to load\n      return Promise.resolve(promise);\n    }\n\n    // queue URL and load it\n    promise = self._requests[url] = self._loader(url);\n\n    try {\n      return await promise;\n    } finally {\n      delete self._requests[url];\n    }\n  }\n};\n","var DataFactory = require('./lib/data-factory')\n\nmodule.exports = DataFactory\n","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst CatalogFetcherDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogFetcherDefault\"));\nconst CatalogProviderDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogProviderDefault\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst FootpathsProviderDefault_1 = __importDefault(require(\"../fetcher/footpaths/FootpathsProviderDefault\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherLDFetch_1 = __importDefault(require(\"../fetcher/stops/ld-fetch/StopsFetcherLDFetch\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderDefault\"));\nconst RoutableTileProviderIntermediate_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderIntermediate\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst Dijkstra_1 = require(\"../pathfinding/dijkstra/Dijkstra\");\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAEarliestArrival_1 = __importDefault(require(\"../planner/public-transport/CSAEarliestArrival\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfinding_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfinding\"));\nconst ReachableStopsFinderDelaunay_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderDelaunay\"));\nconst ReachableStopsFinderFootpaths_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderFootpaths\"));\nconst QueryRunnerExponential_1 = __importDefault(require(\"../query-runner/exponential/QueryRunnerExponential\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerExponential_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAEarliestArrival_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner)\n    .to(RoadPlannerPathfinding_1.default);\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(Dijkstra_1.Dijkstra).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderFootpaths_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.CatalogFetcher).to(CatalogFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogProvider).to(CatalogProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherLDFetch_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderIntermediate_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\ncontainer.bind(types_1.default.FootpathsProvider).to(FootpathsProviderDefault_1.default).inSingletonScope();\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=default.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst tinyqueue_1 = __importDefault(require(\"tinyqueue\"));\nclass FootpathQueue extends asynciterator_1.AsyncIterator {\n    constructor(backwards = false) {\n        super();\n        if (backwards) {\n            this.buffer = new tinyqueue_1.default([], (a, b) => {\n                return b.departureTime - a.departureTime;\n            });\n        }\n        else {\n            this.buffer = new tinyqueue_1.default([], (a, b) => {\n                return a.departureTime - b.departureTime;\n            });\n        }\n        this.readable = true;\n        this.shouldClose = false;\n        this.setMaxListeners(100);\n    }\n    read() {\n        let item;\n        if (this.buffer.length) {\n            item = this.buffer.pop();\n        }\n        else {\n            item = null;\n        }\n        if (this.shouldClose) {\n            this.close();\n        }\n        return item;\n    }\n    write(item) {\n        if (!this.shouldClose) {\n            this.buffer.push(item);\n            this.readable = true;\n        }\n    }\n    closeAfterFlush() {\n        this.shouldClose = true;\n    }\n}\nexports.default = FootpathQueue;\n//# sourceMappingURL=FootpathQueue.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Geo_1 = __importDefault(require(\"../util/Geo\"));\n/**\n * This Step class serves as an implementation of the [[IStep]] interface and as a home for some helper functions\n * related to [[IStep]] instances\n */\nclass Step {\n    constructor(startLocation, stopLocation, duration, startTime, stopTime, distance, enterConnectionId, exitConnectionId) {\n        this.distance = distance;\n        this.duration = duration;\n        this.startLocation = startLocation;\n        this.startTime = startTime;\n        this.stopLocation = stopLocation;\n        this.stopTime = stopTime;\n        this.enterConnectionId = enterConnectionId;\n        this.exitConnectionId = exitConnectionId;\n    }\n    static create(startLocation, stopLocation, duration, through, // string identifier of a way, route, ... that was taken\n    startTime, stopTime, distance) {\n        return new Step(startLocation, stopLocation, duration, startTime, stopTime, distance, through);\n    }\n    static createFromConnections(enterConnection, exitConnection) {\n        return new Step({ id: enterConnection.departureStop }, { id: exitConnection.arrivalStop }, {\n            minimum: (exitConnection.arrivalTime.getTime() -\n                enterConnection.departureTime.getTime()),\n        }, enterConnection.departureTime, exitConnection.arrivalTime, undefined, enterConnection.id, exitConnection.id);\n    }\n    /**\n     * Compare two [[IStep]] instances\n     * @returns true if the two steps are the same\n     */\n    static compareEquals(step, otherStep) {\n        return Step.compareLocations(otherStep.startLocation, step.startLocation) &&\n            Step.compareLocations(otherStep.stopLocation, step.stopLocation);\n    }\n    static compareLocations(a, b) {\n        return Geo_1.default.getId(a) === Geo_1.default.getId(b) && a.longitude === b.longitude && a.latitude === b.latitude;\n    }\n}\nexports.default = Step;\n//# sourceMappingURL=Step.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Units_1 = __importDefault(require(\"../../util/Units\"));\nlet ReachableStopsFinderFootpaths = class ReachableStopsFinderFootpaths {\n    constructor(stopsProvider, footpathsProvider) {\n        this.stopsProvider = stopsProvider;\n        this.footpathsProvider = footpathsProvider;\n    }\n    async findReachableStops(sourceOrTargetStop, mode, maximumDuration, minimumSpeed) {\n        const reachableStops = [{ stop: sourceOrTargetStop, duration: 0 }];\n        const footpaths = await this.footpathsProvider.get(sourceOrTargetStop);\n        for (const footpath of Object.values(footpaths)) {\n            let otherStop;\n            if (sourceOrTargetStop.id === footpath.from) {\n                otherStop = await this.stopsProvider.getStopById(footpath.to);\n            }\n            else if (sourceOrTargetStop.id === footpath.to) {\n                otherStop = await this.stopsProvider.getStopById(footpath.from);\n            }\n            if (otherStop) {\n                const duration = Units_1.default.toDuration(footpath.distance, minimumSpeed);\n                reachableStops.push({ stop: otherStop, duration, id: footpath.id });\n            }\n        }\n        return reachableStops;\n    }\n};\nReachableStopsFinderFootpaths = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.StopsProvider)),\n    __param(1, inversify_1.inject(types_1.default.FootpathsProvider)),\n    __metadata(\"design:paramtypes\", [Object, Object])\n], ReachableStopsFinderFootpaths);\nexports.default = ReachableStopsFinderFootpaths;\n//# sourceMappingURL=ReachableStopsFinderFootpaths.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst road_planner_1 = __importDefault(require(\"../../configs/road_planner\"));\nconst Planner_1 = __importDefault(require(\"./Planner\"));\nclass FlexibleRoadPlanner extends Planner_1.default {\n    constructor() {\n        super(road_planner_1.default);\n    }\n    query(query) {\n        query.roadNetworkOnly = true;\n        return super.query(query);\n    }\n    async completePath(path) {\n        return path;\n    }\n}\nexports.default = FlexibleRoadPlanner;\n//# sourceMappingURL=FlexibleRoadPlanner.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DATATYPE = {\n    Connections: Symbol(\"Connection\"),\n    Stops: Symbol(\"Stop\"),\n    RoutableTile: Symbol(\"RoutableTile\"),\n    ZoiTile: Symbol(\"ZoiTile\"),\n    ReducedRoutableTile: Symbol(\"ReducedRoutableTile\"),\n    Profile: Symbol(\"Profile\"),\n    Footpath: Symbol(\"Footpath\"),\n    Unknown: Symbol(\"?\"),\n};\nexports.default = DATATYPE;\n//# sourceMappingURL=Datatypes.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst __1 = require(\"../..\");\nconst footpath_1 = require(\"../../entities/footpaths/footpath\");\nconst TileCoordinate_1 = __importDefault(require(\"../../entities/tiles/TileCoordinate\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst Tiles_1 = require(\"../../util/Tiles\");\nconst ZOOM = 12;\nlet FootpathsProviderRaw = class FootpathsProviderRaw {\n    constructor() {\n        this.paths = {};\n    }\n    async get(stop) {\n        const tileId = this.getIdForLocation(ZOOM, stop);\n        if (!this.paths[tileId]) {\n            this.paths[tileId] = this.getByUrl(tileId);\n        }\n        return this.paths[tileId];\n    }\n    getIdForLocation(zoom, location) {\n        const y = Tiles_1.lat_to_tile(location.latitude, zoom);\n        const x = Tiles_1.long_to_tile(location.longitude, zoom);\n        const coordinate = new TileCoordinate_1.default(zoom, x, y);\n        return this.getIdForTileCoords(coordinate);\n    }\n    getIdForTileCoords(coordinate) {\n        return `https://hdelva.be/stops/distances/${coordinate.zoom}/${coordinate.x}/${coordinate.y}`;\n    }\n    getByLocation(zoom, location) {\n        const y = Tiles_1.lat_to_tile(location.latitude, zoom);\n        const x = Tiles_1.long_to_tile(location.longitude, zoom);\n        const coordinate = new TileCoordinate_1.default(zoom, x, y);\n        return this.getByTileCoords(coordinate);\n    }\n    async getByTileCoords(coordinate) {\n        const url = this.getIdForTileCoords(coordinate);\n        return await this.getByUrl(url);\n    }\n    async getByUrl(url) {\n        const beginTime = new Date();\n        const response = await fetch(url);\n        const size = this.parseResponseLength(response);\n        const duration = (new Date()).getTime() - beginTime.getTime();\n        const responseText = await response.text();\n        const footpaths = {};\n        if (response.status !== 200) {\n            EventBus_1.default.getInstance().emit(EventType_1.default.Warning, `${url} responded with status code ${response.status}`);\n        }\n        if (response.status === 200 && responseText) {\n            const blob = JSON.parse(responseText);\n            for (const entity of blob[\"@graph\"]) {\n                const id = entity[\"@id\"];\n                const footpath = new footpath_1.Footpath(id);\n                footpath.to = entity[\"planner:destination\"];\n                footpath.from = entity[\"planner:source\"];\n                footpath.distance = entity[\"planner:distance\"];\n                footpaths[id] = footpath;\n            }\n        }\n        EventBus_1.default.getInstance().emit(EventType_1.default.ResourceFetch, {\n            datatype: __1.DataType.Footpath,\n            url,\n            duration,\n            size,\n        });\n        return footpaths;\n    }\n    parseResponseLength(response) {\n        if (response.headers.get(\"content-length\")) {\n            return parseInt(response.headers.get(\"content-length\"), 10);\n        }\n        else {\n            try {\n                return response.body._chunkSize;\n            }\n            catch (e) {\n                //\n            }\n        }\n    }\n};\nFootpathsProviderRaw = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [])\n], FootpathsProviderRaw);\nexports.default = FootpathsProviderRaw;\n//# sourceMappingURL=FootpathsProviderRaw.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst PathfinderProvider_1 = __importDefault(require(\"../../pathfinding/PathfinderProvider\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"./RoutableTileProviderDefault\"));\nlet RoutableTileProviderTransit = class RoutableTileProviderTransit extends RoutableTileProviderDefault_1.default {\n    constructor(pathfinderProvider, fetcher) {\n        super(pathfinderProvider, fetcher);\n    }\n    getIdForTileCoords(coordinate) {\n        return `https://hdelva.be/tiles/reduced/${coordinate.zoom}/${coordinate.x}/${coordinate.y}`;\n    }\n};\nRoutableTileProviderTransit = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.PathfinderProvider)),\n    __param(1, inversify_1.inject(types_1.default.RoutableTileFetcher)),\n    __metadata(\"design:paramtypes\", [PathfinderProvider_1.default, Object])\n], RoutableTileProviderTransit);\nexports.default = RoutableTileProviderTransit;\n//# sourceMappingURL=RoutableTileProviderTransit.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst ldfetch_1 = __importDefault(require(\"ldfetch\"));\nconst ldloader_1 = require(\"../../loader/ldloader\");\nconst single_1 = require(\"../../loader/views/single\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst constants_1 = require(\"../../uri/constants\");\nconst uri_1 = __importDefault(require(\"../../uri/uri\"));\nconst geometry_1 = __importDefault(require(\"../../entities/tree/geometry\"));\nconst relation_1 = __importDefault(require(\"../../entities/tree/relation\"));\nconst tree_1 = __importDefault(require(\"../../entities/tree/tree\"));\nlet HypermediaTreeFetcherDefault = class HypermediaTreeFetcherDefault {\n    constructor(ldFetch) {\n        this.ldFetch = ldFetch;\n        this.ldLoader = new ldloader_1.LDLoader();\n        this.ldLoader.defineCollection(uri_1.default.inNS(constants_1.TREE, \"relation\"));\n    }\n    async get(url) {\n        const rdfThing = await this.ldFetch.get(url);\n        const triples = rdfThing.triples;\n        const [fragment] = this.ldLoader.process(triples, [\n            this.getView(),\n        ]);\n        fragment.id = url;\n        return fragment;\n    }\n    getView() {\n        const view = new single_1.ThingView(tree_1.default.create);\n        view.addFilter((entity) => {\n            return entity[uri_1.default.inNS(constants_1.TREE, \"relation\")] !== undefined;\n        });\n        view.addMapping(uri_1.default.inNS(constants_1.TREE, \"relation\"), \"relations\", this.getRelationView());\n        return view;\n    }\n    getRelationView() {\n        const view = new single_1.ThingView(relation_1.default.create);\n        view.addFilter((entity) => {\n            return entity[uri_1.default.inNS(constants_1.RDF, \"type\")] === uri_1.default.inNS(constants_1.TREE, \"GeospatiallyContainsRelation\");\n        });\n        view.addMapping(uri_1.default.inNS(constants_1.TREE, \"node\"), \"node\");\n        view.addMapping(uri_1.default.inNS(constants_1.TREE, \"value\"), \"geoValue\", this.getFragmentView());\n        return view;\n    }\n    getFragmentView() {\n        const view = new single_1.ThingView(geometry_1.default.create);\n        view.addFilter((entity) => {\n            return entity[uri_1.default.inNS(constants_1.RDF, \"type\")] === uri_1.default.inNS(constants_1.GEOSPARQL, \"Geometry\");\n        });\n        view.addMapping(uri_1.default.inNS(constants_1.GEOSPARQL, \"asWKT\"), \"area\");\n        return view;\n    }\n};\nHypermediaTreeFetcherDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LDFetch)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof ldfetch_1.default !== \"undefined\" && ldfetch_1.default) === \"function\" ? _a : Object])\n], HypermediaTreeFetcherDefault);\nexports.default = HypermediaTreeFetcherDefault;\n//# sourceMappingURL=HypermediaTreeFetcherDefault.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nlet HypermediaTreeProviderDefault = class HypermediaTreeProviderDefault {\n    constructor(treeFetcher) {\n        this.accessUrls = [];\n        this.treeFetcher = treeFetcher;\n    }\n    addTreeSource(accessUrl) {\n        this.allTrees = null;\n        this.accessUrls.push(accessUrl);\n    }\n    async getAllTrees() {\n        if (!this.allTrees) {\n            this.allTrees = Promise.all(this.accessUrls\n                .map((url) => this.treeFetcher.get(url)));\n        }\n        return this.allTrees;\n    }\n};\nHypermediaTreeProviderDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.HypermediaTreeFetcher)),\n    __metadata(\"design:paramtypes\", [Object])\n], HypermediaTreeProviderDefault);\nexports.default = HypermediaTreeProviderDefault;\n//# sourceMappingURL=HypermediaTreeProviderDefault.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst BidirDijkstraInstance_1 = require(\"./BidirDijkstraInstance\");\nlet BidirDijkstra = class BidirDijkstra {\n    createInstance(graph) {\n        return new BidirDijkstraInstance_1.BidirDijkstraInstance(graph);\n    }\n};\nBidirDijkstra = __decorate([\n    inversify_1.injectable()\n], BidirDijkstra);\nexports.BidirDijkstra = BidirDijkstra;\n//# sourceMappingURL=BidirDijkstra.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst ReachableStopsFinderBirdsEye_1 = __importDefault(require(\"./ReachableStopsFinderBirdsEye\"));\n/**\n * This [[IReachableStopsFinder]] forms a caching layer in front of a [[ReachableStopsFinderBirdsEye]] instance,\n * so all the distances don't have to be calculated repeatedly\n */\nlet ReachableStopsFinderBirdsEyeCached = class ReachableStopsFinderBirdsEyeCached {\n    constructor(stopsProvider) {\n        this.reachableStopsFinder = new ReachableStopsFinderBirdsEye_1.default(stopsProvider);\n        this.reachableStopsCache = {};\n    }\n    async findReachableStops(sourceOrTargetStop, mode, maximumDuration, minimumSpeed) {\n        // Mode can be ignored since birds eye view distance is identical\n        const cacheKey = `${sourceOrTargetStop.id} ${maximumDuration} ${minimumSpeed}`;\n        const cacheItem = this.reachableStopsCache[cacheKey];\n        if (cacheItem) {\n            return cacheItem;\n        }\n        const reachableStops = await this.reachableStopsFinder\n            .findReachableStops(sourceOrTargetStop, mode, maximumDuration, minimumSpeed);\n        this.reachableStopsCache[cacheKey] = reachableStops;\n        return reachableStops;\n    }\n};\nReachableStopsFinderBirdsEyeCached = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.StopsProvider)),\n    __metadata(\"design:paramtypes\", [Object])\n], ReachableStopsFinderBirdsEyeCached);\nexports.default = ReachableStopsFinderBirdsEyeCached;\n//# sourceMappingURL=ReachableStopsFinderBirdsEyeCached.js.map","// N3.js implementations of the RDF/JS core data types\n// See https://github.com/rdfjs/representation-task-force/blob/master/interface-spec.md\n\nimport namespaces from './IRIs';\nconst { rdf, xsd } = namespaces;\n\nvar DataFactory, DEFAULTGRAPH;\n\nvar _blankNodeCounter = 0;\n\n// ## Term constructor\nclass Term {\n  constructor(id) {\n    this.id = id;\n  }\n\n  // ### The value of this term\n  get value() {\n    return this.id;\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both terms were created by this library,\n    // equality can be computed through ids\n    if (other instanceof Term)\n      return this.id === other.id;\n    // Otherwise, compare term type and value\n    return !!other && this.termType === other.termType &&\n                      this.value    === other.value;\n  }\n\n  // ### Returns a plain object representation of this term\n  toJSON() {\n    return {\n      termType: this.termType,\n      value:    this.value,\n    };\n  }\n}\n\n\n// ## NamedNode constructor\nclass NamedNode extends Term {\n  // ### The term type of this term\n  get termType() {\n    return 'NamedNode';\n  }\n}\n\n// ## Literal constructor\nclass Literal extends Term {\n  // ### The term type of this term\n  get termType() {\n    return 'Literal';\n  }\n\n  // ### The text value of this literal\n  get value() {\n    return this.id.substring(1, this.id.lastIndexOf('\"'));\n  }\n\n  // ### The language of this literal\n  get language() {\n    // Find the last quotation mark (e.g., '\"abc\"@en-us')\n    var id = this.id, atPos = id.lastIndexOf('\"') + 1;\n    // If \"@\" it follows, return the remaining substring; empty otherwise\n    return atPos < id.length && id[atPos++] === '@' ? id.substr(atPos).toLowerCase() : '';\n  }\n\n  // ### The datatype IRI of this literal\n  get datatype() {\n    return new NamedNode(this.datatypeString);\n  }\n\n  // ### The datatype string of this literal\n  get datatypeString() {\n    // Find the last quotation mark (e.g., '\"abc\"^^http://ex.org/types#t')\n    var id = this.id, dtPos = id.lastIndexOf('\"') + 1, ch;\n    // If \"^\" it follows, return the remaining substring\n    return dtPos < id.length && (ch = id[dtPos]) === '^' ? id.substr(dtPos + 2) :\n           // If \"@\" follows, return rdf:langString; xsd:string otherwise\n           (ch !== '@' ? xsd.string : rdf.langString);\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both literals were created by this library,\n    // equality can be computed through ids\n    if (other instanceof Literal)\n      return this.id === other.id;\n    // Otherwise, compare term type, value, language, and datatype\n    return !!other && !!other.datatype &&\n                      this.termType === other.termType &&\n                      this.value    === other.value    &&\n                      this.language === other.language &&\n                      this.datatype.value === other.datatype.value;\n  }\n\n  toJSON() {\n    return {\n      termType: this.termType,\n      value:    this.value,\n      language: this.language,\n      datatype: { termType: 'NamedNode', value: this.datatypeString },\n    };\n  }\n}\n\n// ## BlankNode constructor\nclass BlankNode extends Term {\n  constructor(name) {\n    super('_:' + name);\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'BlankNode';\n  }\n\n  // ### The name of this blank node\n  get value() {\n    return this.id.substr(2);\n  }\n}\n\nclass Variable extends Term {\n  constructor(name) {\n    super('?' + name);\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'Variable';\n  }\n\n  // ### The name of this variable\n  get value() {\n    return this.id.substr(1);\n  }\n}\n\n// ## DefaultGraph constructor\nclass DefaultGraph extends Term {\n  constructor() {\n    super('');\n    return DEFAULTGRAPH || this;\n  }\n\n  // ### The term type of this term\n  get termType() {\n    return 'DefaultGraph';\n  }\n\n  // ### Returns whether this object represents the same term as the other\n  equals(other) {\n    // If both terms were created by this library,\n    // equality can be computed through strict equality;\n    // otherwise, compare term types.\n    return (this === other) || (!!other && (this.termType === other.termType));\n  }\n}\n\n// ## DefaultGraph singleton\nDEFAULTGRAPH = new DefaultGraph();\n\n\n// ### Constructs a term from the given internal string ID\nfunction fromId(id, factory) {\n  factory = factory || DataFactory;\n\n  // Falsy value or empty string indicate the default graph\n  if (!id)\n    return factory.defaultGraph();\n\n  // Identify the term type based on the first character\n  switch (id[0]) {\n  case '_': return factory.blankNode(id.substr(2));\n  case '?': return factory.variable(id.substr(1));\n  case '\"':\n    // Shortcut for internal literals\n    if (factory === DataFactory)\n      return new Literal(id);\n    // Literal without datatype or language\n    if (id[id.length - 1] === '\"')\n      return factory.literal(id.substr(1, id.length - 2));\n    // Literal with datatype or language\n    var endPos = id.lastIndexOf('\"', id.length - 1);\n    return factory.literal(id.substr(1, endPos - 1),\n            id[endPos + 1] === '@' ? id.substr(endPos + 2)\n                                   : factory.namedNode(id.substr(endPos + 3)));\n  default:  return factory.namedNode(id);\n  }\n}\n\n// ### Constructs an internal string ID from the given term or ID string\nfunction toId(term) {\n  if (typeof term === 'string')\n    return term;\n  if (term instanceof Term)\n    return term.id;\n  if (!term)\n    return DEFAULTGRAPH.id;\n\n  // Term instantiated with another library\n  switch (term.termType) {\n  case 'NamedNode':    return term.value;\n  case 'BlankNode':    return '_:' + term.value;\n  case 'Variable':     return '?' + term.value;\n  case 'DefaultGraph': return '';\n  case 'Literal':      return '\"' + term.value + '\"' +\n    (term.language ? '@' + term.language :\n      (term.datatype && term.datatype.value !== xsd.string ? '^^' + term.datatype.value : ''));\n  default: throw new Error('Unexpected termType: ' + term.termType);\n  }\n}\n\n\n// ## Quad constructor\nclass Quad {\n  constructor(subject, predicate, object, graph) {\n    this.subject   = subject;\n    this.predicate = predicate;\n    this.object    = object;\n    this.graph     = graph || DEFAULTGRAPH;\n  }\n\n  // ### Returns a plain object representation of this quad\n  toJSON() {\n    return {\n      subject:   this.subject.toJSON(),\n      predicate: this.predicate.toJSON(),\n      object:    this.object.toJSON(),\n      graph:     this.graph.toJSON(),\n    };\n  }\n\n  // ### Returns whether this object represents the same quad as the other\n  equals(other) {\n    return !!other && this.subject.equals(other.subject)     &&\n                      this.predicate.equals(other.predicate) &&\n                      this.object.equals(other.object)       &&\n                      this.graph.equals(other.graph);\n  }\n}\n\n\n// ## DataFactory singleton\nDataFactory = {\n  // ### Public factory functions\n  namedNode,\n  blankNode,\n  variable,\n  literal,\n  defaultGraph,\n  quad,\n  triple: quad,\n\n  // ### Internal datatype constructors\n  internal: {\n    Term,\n    NamedNode,\n    BlankNode,\n    Variable,\n    Literal,\n    DefaultGraph,\n    Quad,\n    Triple: Quad,\n    fromId,\n    toId,\n  },\n};\nexport default DataFactory;\n\n// ### Creates an IRI\nfunction namedNode(iri) {\n  return new NamedNode(iri);\n}\n\n// ### Creates a blank node\nfunction blankNode(name) {\n  if (!name)\n    name = 'n3-' + _blankNodeCounter++;\n  return new BlankNode(name);\n}\n\n// ### Creates a literal\nfunction literal(value, languageOrDataType) {\n  // Create a language-tagged string\n  if (typeof languageOrDataType === 'string')\n    return new Literal('\"' + value + '\"@' + languageOrDataType.toLowerCase());\n\n  // Automatically determine datatype for booleans and numbers\n  let datatype = languageOrDataType ? languageOrDataType.value : '';\n  if (datatype === '') {\n    // Convert a boolean\n    if (typeof value === 'boolean')\n      datatype = xsd.boolean;\n    // Convert an integer or double\n    else if (typeof value === 'number') {\n      if (Number.isFinite(value))\n        datatype = Number.isInteger(value) ? xsd.integer : xsd.double;\n      else {\n        datatype = xsd.double;\n        if (!Number.isNaN(value))\n          value = value > 0 ? 'INF' : '-INF';\n      }\n    }\n  }\n\n  // Create a datatyped literal\n  return (datatype === '' || datatype === xsd.string) ?\n    new Literal('\"' + value + '\"') :\n    new Literal('\"' + value + '\"^^' + datatype);\n}\n\n// ### Creates a variable\nfunction variable(name) {\n  return new Variable(name);\n}\n\n// ### Returns the default graph\nfunction defaultGraph() {\n  return DEFAULTGRAPH;\n}\n\n// ### Creates a quad\nfunction quad(subject, predicate, object, graph) {\n  return new Quad(subject, predicate, object, graph);\n}\n","// **N3Parser** parses N3 documents.\nimport N3Lexer from './N3Lexer';\nimport N3DataFactory from './N3DataFactory';\nimport namespaces from './IRIs';\n\n// The next ID for new blank nodes\nvar blankNodePrefix = 0, blankNodeCount = 0;\n\n// ## Constructor\nexport default class N3Parser {\n  constructor(options) {\n    this._contextStack = [];\n    this._graph = null;\n\n    // Set the document IRI\n    options = options || {};\n    this._setBase(options.baseIRI);\n    options.factory && initDataFactory(this, options.factory);\n\n    // Set supported features depending on the format\n    var format = (typeof options.format === 'string') ?\n                 options.format.match(/\\w*$/)[0].toLowerCase() : '',\n        isTurtle = format === 'turtle', isTriG = format === 'trig',\n        isNTriples = /triple/.test(format), isNQuads = /quad/.test(format),\n        isN3 = this._n3Mode = /n3/.test(format),\n        isLineMode = isNTriples || isNQuads;\n    if (!(this._supportsNamedGraphs = !(isTurtle || isN3)))\n      this._readPredicateOrNamedGraph = this._readPredicate;\n    this._supportsQuads = !(isTurtle || isTriG || isNTriples || isN3);\n    // Disable relative IRIs in N-Triples or N-Quads mode\n    if (isLineMode)\n      this._resolveRelativeIRI = function (iri) { return null; };\n    this._blankNodePrefix = typeof options.blankNodePrefix !== 'string' ? '' :\n                              options.blankNodePrefix.replace(/^(?!_:)/, '_:');\n    this._lexer = options.lexer || new N3Lexer({ lineMode: isLineMode, n3: isN3 });\n    // Disable explicit quantifiers by default\n    this._explicitQuantifiers = !!options.explicitQuantifiers;\n  }\n\n  // ## Static class methods\n\n// ### `_resetBlankNodeIds` restarts blank node identification\n  static _resetBlankNodeIds() {\n    blankNodePrefix = blankNodeCount = 0;\n  }\n\n  // ## Private methods\n\n  // ### `_blank` creates a new blank node\n  _blank() {\n    return this._blankNode('b' + blankNodeCount++);\n  }\n\n  // ### `_setBase` sets the base IRI to resolve relative IRIs\n  _setBase(baseIRI) {\n    if (!baseIRI) {\n      this._base = '';\n      this._basePath = '';\n    }\n    else {\n      // Remove fragment if present\n      var fragmentPos = baseIRI.indexOf('#');\n      if (fragmentPos >= 0)\n        baseIRI = baseIRI.substr(0, fragmentPos);\n      // Set base IRI and its components\n      this._base = baseIRI;\n      this._basePath   = baseIRI.indexOf('/') < 0 ? baseIRI :\n                         baseIRI.replace(/[^\\/?]*(?:\\?.*)?$/, '');\n      baseIRI = baseIRI.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\\/\\/[^\\/]*)?/i);\n      this._baseRoot   = baseIRI[0];\n      this._baseScheme = baseIRI[1];\n    }\n  }\n\n  // ### `_saveContext` stores the current parsing context\n  // when entering a new scope (list, blank node, formula)\n  _saveContext(type, graph, subject, predicate, object) {\n    var n3Mode = this._n3Mode;\n    this._contextStack.push({\n      subject: subject, predicate: predicate, object: object,\n      graph: graph, type: type,\n      inverse: n3Mode ? this._inversePredicate : false,\n      blankPrefix: n3Mode ? this._prefixes._ : '',\n      quantified: n3Mode ? this._quantified : null,\n    });\n    // The settings below only apply to N3 streams\n    if (n3Mode) {\n      // Every new scope resets the predicate direction\n      this._inversePredicate = false;\n      // In N3, blank nodes are scoped to a formula\n      // (using a dot as separator, as a blank node label cannot start with it)\n      this._prefixes._ = (this._graph ? this._graph.id.substr(2) + '.' : '.');\n      // Quantifiers are scoped to a formula\n      this._quantified = Object.create(this._quantified);\n    }\n  }\n\n  // ### `_restoreContext` restores the parent context\n  // when leaving a scope (list, blank node, formula)\n  _restoreContext() {\n    var context = this._contextStack.pop(), n3Mode = this._n3Mode;\n    this._subject   = context.subject;\n    this._predicate = context.predicate;\n    this._object    = context.object;\n    this._graph     = context.graph;\n    // The settings below only apply to N3 streams\n    if (n3Mode) {\n      this._inversePredicate = context.inverse;\n      this._prefixes._ = context.blankPrefix;\n      this._quantified = context.quantified;\n    }\n  }\n\n  // ### `_readInTopContext` reads a token when in the top context\n  _readInTopContext(token) {\n    switch (token.type) {\n    // If an EOF token arrives in the top context, signal that we're done\n    case 'eof':\n      if (this._graph !== null)\n        return this._error('Unclosed graph', token);\n      delete this._prefixes._;\n      return this._callback(null, null, this._prefixes);\n    // It could be a prefix declaration\n    case 'PREFIX':\n      this._sparqlStyle = true;\n    case '@prefix':\n      return this._readPrefix;\n    // It could be a base declaration\n    case 'BASE':\n      this._sparqlStyle = true;\n    case '@base':\n      return this._readBaseIRI;\n    // It could be a graph\n    case '{':\n      if (this._supportsNamedGraphs) {\n        this._graph = '';\n        this._subject = null;\n        return this._readSubject;\n      }\n    case 'GRAPH':\n      if (this._supportsNamedGraphs)\n        return this._readNamedGraphLabel;\n    // Otherwise, the next token must be a subject\n    default:\n      return this._readSubject(token);\n    }\n  }\n\n  // ### `_readEntity` reads an IRI, prefixed name, blank node, or variable\n  _readEntity(token, quantifier) {\n    var value;\n    switch (token.type) {\n    // Read a relative or absolute IRI\n    case 'IRI':\n    case 'typeIRI':\n      var iri = this._resolveIRI(token.value);\n      if (iri === null)\n        return this._error('Invalid IRI', token);\n      value = this._namedNode(iri);\n      break;\n    // Read a prefixed name\n    case 'type':\n    case 'prefixed':\n      var prefix = this._prefixes[token.prefix];\n      if (prefix === undefined)\n        return this._error('Undefined prefix \"' + token.prefix + ':\"', token);\n      value = this._namedNode(prefix + token.value);\n      break;\n    // Read a blank node\n    case 'blank':\n      value = this._blankNode(this._prefixes[token.prefix] + token.value);\n      break;\n    // Read a variable\n    case 'var':\n      value = this._variable(token.value.substr(1));\n      break;\n    // Everything else is not an entity\n    default:\n      return this._error('Expected entity but got ' + token.type, token);\n    }\n    // In N3 mode, replace the entity if it is quantified\n    if (!quantifier && this._n3Mode && (value.id in this._quantified))\n      value = this._quantified[value.id];\n    return value;\n  }\n\n  // ### `_readSubject` reads a quad's subject\n  _readSubject(token) {\n    this._predicate = null;\n    switch (token.type) {\n    case '[':\n      // Start a new quad with a new blank node as subject\n      this._saveContext('blank', this._graph,\n                        this._subject = this._blank(), null, null);\n      return this._readBlankNodeHead;\n    case '(':\n      // Start a new list\n      this._saveContext('list', this._graph, this.RDF_NIL, null, null);\n      this._subject = null;\n      return this._readListItem;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph,\n                        this._graph = this._blank(), null, null);\n      return this._readSubject;\n    case '}':\n       // No subject; the graph in which we are reading is closed instead\n      return this._readPunctuation(token);\n    case '@forSome':\n      if (!this._n3Mode)\n        return this._error('Unexpected \"@forSome\"', token);\n      this._subject = null;\n      this._predicate = this.N3_FORSOME;\n      this._quantifier = this._blankNode;\n      return this._readQuantifierList;\n    case '@forAll':\n      if (!this._n3Mode)\n        return this._error('Unexpected \"@forAll\"', token);\n      this._subject = null;\n      this._predicate = this.N3_FORALL;\n      this._quantifier = this._variable;\n      return this._readQuantifierList;\n    default:\n      // Read the subject entity\n      if ((this._subject = this._readEntity(token)) === undefined)\n        return;\n      // In N3 mode, the subject might be a path\n      if (this._n3Mode)\n        return this._getPathReader(this._readPredicateOrNamedGraph);\n    }\n\n    // The next token must be a predicate,\n    // or, if the subject was actually a graph IRI, a named graph\n    return this._readPredicateOrNamedGraph;\n  }\n\n  // ### `_readPredicate` reads a quad's predicate\n  _readPredicate(token) {\n    var type = token.type;\n    switch (type) {\n    case 'inverse':\n      this._inversePredicate = true;\n    case 'abbreviation':\n      this._predicate = this.ABBREVIATIONS[token.value];\n      break;\n    case '.':\n    case ']':\n    case '}':\n      // Expected predicate didn't come, must have been trailing semicolon\n      if (this._predicate === null)\n        return this._error('Unexpected ' + type, token);\n      this._subject = null;\n      return type === ']' ? this._readBlankNodeTail(token) : this._readPunctuation(token);\n    case ';':\n      // Additional semicolons can be safely ignored\n      return this._predicate !== null ? this._readPredicate :\n             this._error('Expected predicate but got ;', token);\n    case 'blank':\n      if (!this._n3Mode)\n        return this._error('Disallowed blank node as predicate', token);\n    default:\n      if ((this._predicate = this._readEntity(token)) === undefined)\n        return;\n    }\n    // The next token must be an object\n    return this._readObject;\n  }\n\n  // ### `_readObject` reads a quad's object\n  _readObject(token) {\n    switch (token.type) {\n    case 'literal':\n      // Regular literal, can still get a datatype or language\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        return this._readDataTypeOrLang;\n      }\n      // Pre-datatyped string literal (prefix stores the datatype)\n      else\n        this._object = this._literal(token.value, this._namedNode(token.prefix));\n      break;\n    case '[':\n      // Start a new quad with a new blank node as subject\n      this._saveContext('blank', this._graph, this._subject, this._predicate,\n                        this._subject = this._blank());\n      return this._readBlankNodeHead;\n    case '(':\n      // Start a new list\n      this._saveContext('list', this._graph, this._subject, this._predicate, this.RDF_NIL);\n      this._subject = null;\n      return this._readListItem;\n    case '{':\n      // Start a new formula\n      if (!this._n3Mode)\n        return this._error('Unexpected graph', token);\n      this._saveContext('formula', this._graph, this._subject, this._predicate,\n                        this._graph = this._blank());\n      return this._readSubject;\n    default:\n      // Read the object entity\n      if ((this._object = this._readEntity(token)) === undefined)\n        return;\n      // In N3 mode, the object might be a path\n      if (this._n3Mode)\n        return this._getPathReader(this._getContextEndReader());\n    }\n    return this._getContextEndReader();\n  }\n\n  // ### `_readPredicateOrNamedGraph` reads a quad's predicate, or a named graph\n  _readPredicateOrNamedGraph(token) {\n    return token.type === '{' ? this._readGraph(token) : this._readPredicate(token);\n  }\n\n  // ### `_readGraph` reads a graph\n  _readGraph(token) {\n    if (token.type !== '{')\n      return this._error('Expected graph but got ' + token.type, token);\n    // The \"subject\" we read is actually the GRAPH's label\n    this._graph = this._subject, this._subject = null;\n    return this._readSubject;\n  }\n\n  // ### `_readBlankNodeHead` reads the head of a blank node\n  _readBlankNodeHead(token) {\n    if (token.type === ']') {\n      this._subject = null;\n      return this._readBlankNodeTail(token);\n    }\n    else {\n      this._predicate = null;\n      return this._readPredicate(token);\n    }\n  }\n\n  // ### `_readBlankNodeTail` reads the end of a blank node\n  _readBlankNodeTail(token) {\n    if (token.type !== ']')\n      return this._readBlankNodePunctuation(token);\n\n    // Store blank node quad\n    if (this._subject !== null)\n      this._emit(this._subject, this._predicate, this._object, this._graph);\n\n    // Restore the parent context containing this blank node\n    var empty = this._predicate === null;\n    this._restoreContext();\n    // If the blank node was the subject, continue reading the predicate\n    if (this._object === null)\n      // If the blank node was empty, it could be a named graph label\n      return empty ? this._readPredicateOrNamedGraph : this._readPredicateAfterBlank;\n    // If the blank node was the object, restore previous context and read punctuation\n    else\n      return this._getContextEndReader();\n  }\n\n  // ### `_readPredicateAfterBlank` reads a predicate after an anonymous blank node\n  _readPredicateAfterBlank(token) {\n    switch (token.type) {\n    case '.':\n    case '}':\n      // No predicate is coming if the triple is terminated here\n      this._subject = null;\n      return this._readPunctuation(token);\n    default:\n      return this._readPredicate(token);\n    }\n  }\n\n  // ### `_readListItem` reads items from a list\n  _readListItem(token) {\n    var item = null,                      // The item of the list\n        list = null,                      // The list itself\n        previousList = this._subject,     // The previous list that contains this list\n        stack = this._contextStack,       // The stack of parent contexts\n        parent = stack[stack.length - 1], // The parent containing the current list\n        next = this._readListItem;        // The next function to execute\n\n    switch (token.type) {\n    case '[':\n      // Stack the current list quad and start a new quad with a blank node as subject\n      this._saveContext('blank', this._graph,\n                        list = this._blank(), this.RDF_FIRST,\n                        this._subject = item = this._blank());\n      next = this._readBlankNodeHead;\n      break;\n    case '(':\n      // Stack the current list quad and start a new list\n      this._saveContext('list', this._graph,\n                        list = this._blank(), this.RDF_FIRST, this.RDF_NIL);\n      this._subject = null;\n      break;\n    case ')':\n      // Closing the list; restore the parent context\n      this._restoreContext();\n      // If this list is contained within a parent list, return the membership quad here.\n      // This will be `<parent list element> rdf:first <this list>.`.\n      if (stack.length !== 0 && stack[stack.length - 1].type === 'list')\n        this._emit(this._subject, this._predicate, this._object, this._graph);\n      // Was this list the parent's subject?\n      if (this._predicate === null) {\n        // The next token is the predicate\n        next = this._readPredicate;\n        // No list tail if this was an empty list\n        if (this._subject === this.RDF_NIL)\n          return next;\n      }\n      // The list was in the parent context's object\n      else {\n        next = this._getContextEndReader();\n        // No list tail if this was an empty list\n        if (this._object === this.RDF_NIL)\n          return next;\n      }\n      // Close the list by making the head nil\n      list = this.RDF_NIL;\n      break;\n    case 'literal':\n      // Regular literal, can still get a datatype or language\n      if (token.prefix.length === 0) {\n        this._literalValue = token.value;\n        next = this._readListItemDataTypeOrLang;\n      }\n      // Pre-datatyped string literal (prefix stores the datatype)\n      else {\n        item = this._literal(token.value, this._namedNode(token.prefix));\n        next = this._getContextEndReader();\n      }\n      break;\n    default:\n      if ((item = this._readEntity(token)) === undefined)\n        return;\n    }\n\n     // Create a new blank node if no item head was assigned yet\n    if (list === null)\n      this._subject = list = this._blank();\n\n    // Is this the first element of the list?\n    if (previousList === null) {\n      // This list is either the subject or the object of its parent\n      if (parent.predicate === null)\n        parent.subject = list;\n      else\n        parent.object = list;\n    }\n    else {\n      // Continue the previous list with the current list\n      this._emit(previousList, this.RDF_REST, list, this._graph);\n    }\n    // If an item was read, add it to the list\n    if (item !== null) {\n      // In N3 mode, the item might be a path\n      if (this._n3Mode && (token.type === 'IRI' || token.type === 'prefixed')) {\n        // Create a new context to add the item's path\n        this._saveContext('item', this._graph, list, this.RDF_FIRST, item);\n        this._subject = item, this._predicate = null;\n        // _readPath will restore the context and output the item\n        return this._getPathReader(this._readListItem);\n      }\n      // Output the item\n      this._emit(list, this.RDF_FIRST, item, this._graph);\n    }\n    return next;\n  }\n\n  // ### `_readDataTypeOrLang` reads an _optional_ datatype or language\n  _readDataTypeOrLang(token) {\n    return this._completeLiteral(token, false);\n  }\n\n  // ### `_readListItemDataTypeOrLang` reads an _optional_ datatype or language in a list\n  _readListItemDataTypeOrLang(token) {\n    return this._completeLiteral(token, true);\n  }\n\n  // ### `_completeLiteral` completes a literal with an optional datatype or language\n  _completeLiteral(token, listItem) {\n    switch (token.type) {\n    // Create a datatyped literal\n    case 'type':\n    case 'typeIRI':\n      var datatype = this._readEntity(token);\n      if (datatype === undefined) return; // No datatype means an error occurred\n      this._object = this._literal(this._literalValue, datatype);\n      token = null;\n      break;\n    // Create a language-tagged string\n    case 'langcode':\n      this._object = this._literal(this._literalValue, token.value);\n      token = null;\n      break;\n    // Create a simple string literal\n    default:\n      this._object = this._literal(this._literalValue);\n    }\n    // If this literal was part of a list, write the item\n    // (we could also check the context stack, but passing in a flag is faster)\n    if (listItem)\n      this._emit(this._subject, this.RDF_FIRST, this._object, this._graph);\n    // If the token was consumed, continue with the rest of the input\n    if (token === null)\n      return this._getContextEndReader();\n    // Otherwise, consume the token now\n    else {\n      this._readCallback = this._getContextEndReader();\n      return this._readCallback(token);\n    }\n  }\n\n  // ### `_readFormulaTail` reads the end of a formula\n  _readFormulaTail(token) {\n    if (token.type !== '}')\n      return this._readPunctuation(token);\n\n    // Store the last quad of the formula\n    if (this._subject !== null)\n      this._emit(this._subject, this._predicate, this._object, this._graph);\n\n    // Restore the parent context containing this formula\n    this._restoreContext();\n    // If the formula was the subject, continue reading the predicate.\n    // If the formula was the object, read punctuation.\n    return this._object === null ? this._readPredicate : this._getContextEndReader();\n  }\n\n  // ### `_readPunctuation` reads punctuation between quads or quad parts\n  _readPunctuation(token) {\n    var next, subject = this._subject, graph = this._graph,\n        inversePredicate = this._inversePredicate;\n    switch (token.type) {\n    // A closing brace ends a graph\n    case '}':\n      if (this._graph === null)\n        return this._error('Unexpected graph closing', token);\n      if (this._n3Mode)\n        return this._readFormulaTail(token);\n      this._graph = null;\n    // A dot just ends the statement, without sharing anything with the next\n    case '.':\n      this._subject = null;\n      next = this._contextStack.length ? this._readSubject : this._readInTopContext;\n      if (inversePredicate) this._inversePredicate = false;\n      break;\n    // Semicolon means the subject is shared; predicate and object are different\n    case ';':\n      next = this._readPredicate;\n      break;\n    // Comma means both the subject and predicate are shared; the object is different\n    case ',':\n      next = this._readObject;\n      break;\n    default:\n      // An entity means this is a quad (only allowed if not already inside a graph)\n      if (this._supportsQuads && this._graph === null && (graph = this._readEntity(token)) !== undefined) {\n        next = this._readQuadPunctuation;\n        break;\n      }\n      return this._error('Expected punctuation to follow \"' + this._object.id + '\"', token);\n    }\n    // A quad has been completed now, so return it\n    if (subject !== null) {\n      var predicate = this._predicate, object = this._object;\n      if (!inversePredicate)\n        this._emit(subject, predicate, object,  graph);\n      else\n        this._emit(object,  predicate, subject, graph);\n    }\n    return next;\n  }\n\n    // ### `_readBlankNodePunctuation` reads punctuation in a blank node\n  _readBlankNodePunctuation(token) {\n    var next;\n    switch (token.type) {\n    // Semicolon means the subject is shared; predicate and object are different\n    case ';':\n      next = this._readPredicate;\n      break;\n    // Comma means both the subject and predicate are shared; the object is different\n    case ',':\n      next = this._readObject;\n      break;\n    default:\n      return this._error('Expected punctuation to follow \"' + this._object.id + '\"', token);\n    }\n    // A quad has been completed now, so return it\n    this._emit(this._subject, this._predicate, this._object, this._graph);\n    return next;\n  }\n\n  // ### `_readQuadPunctuation` reads punctuation after a quad\n  _readQuadPunctuation(token) {\n    if (token.type !== '.')\n      return this._error('Expected dot to follow quad', token);\n    return this._readInTopContext;\n  }\n\n  // ### `_readPrefix` reads the prefix of a prefix declaration\n  _readPrefix(token) {\n    if (token.type !== 'prefix')\n      return this._error('Expected prefix to follow @prefix', token);\n    this._prefix = token.value;\n    return this._readPrefixIRI;\n  }\n\n  // ### `_readPrefixIRI` reads the IRI of a prefix declaration\n  _readPrefixIRI(token) {\n    if (token.type !== 'IRI')\n      return this._error('Expected IRI to follow prefix \"' + this._prefix + ':\"', token);\n    var prefixNode = this._readEntity(token);\n    this._prefixes[this._prefix] = prefixNode.value;\n    this._prefixCallback(this._prefix, prefixNode);\n    return this._readDeclarationPunctuation;\n  }\n\n  // ### `_readBaseIRI` reads the IRI of a base declaration\n  _readBaseIRI(token) {\n    var iri = token.type === 'IRI' && this._resolveIRI(token.value);\n    if (!iri)\n      return this._error('Expected valid IRI to follow base declaration', token);\n    this._setBase(iri);\n    return this._readDeclarationPunctuation;\n  }\n\n  // ### `_readNamedGraphLabel` reads the label of a named graph\n  _readNamedGraphLabel(token) {\n    switch (token.type) {\n    case 'IRI':\n    case 'blank':\n    case 'prefixed':\n      return this._readSubject(token), this._readGraph;\n    case '[':\n      return this._readNamedGraphBlankLabel;\n    default:\n      return this._error('Invalid graph label', token);\n    }\n  }\n\n  // ### `_readNamedGraphLabel` reads a blank node label of a named graph\n  _readNamedGraphBlankLabel(token) {\n    if (token.type !== ']')\n      return this._error('Invalid graph label', token);\n    this._subject = this._blank();\n    return this._readGraph;\n  }\n\n  // ### `_readDeclarationPunctuation` reads the punctuation of a declaration\n  _readDeclarationPunctuation(token) {\n    // SPARQL-style declarations don't have punctuation\n    if (this._sparqlStyle) {\n      this._sparqlStyle = false;\n      return this._readInTopContext(token);\n    }\n\n    if (token.type !== '.')\n      return this._error('Expected declaration to end with a dot', token);\n    return this._readInTopContext;\n  }\n\n  // Reads a list of quantified symbols from a @forSome or @forAll statement\n  _readQuantifierList(token) {\n    var entity;\n    switch (token.type) {\n    case 'IRI':\n    case 'prefixed':\n      if ((entity = this._readEntity(token, true)) !== undefined)\n        break;\n    default:\n      return this._error('Unexpected ' + token.type, token);\n    }\n    // Without explicit quantifiers, map entities to a quantified entity\n    if (!this._explicitQuantifiers)\n      this._quantified[entity.id] = this._quantifier('b' + blankNodeCount++);\n    // With explicit quantifiers, output the reified quantifier\n    else {\n      // If this is the first item, start a new quantifier list\n      if (this._subject === null)\n        this._emit(this._graph || this.DEFAULTGRAPH, this._predicate,\n                   this._subject = this._blank(), this.QUANTIFIERS_GRAPH);\n      // Otherwise, continue the previous list\n      else\n        this._emit(this._subject, this.RDF_REST,\n                   this._subject = this._blank(), this.QUANTIFIERS_GRAPH);\n      // Output the list item\n      this._emit(this._subject, this.RDF_FIRST, entity, this.QUANTIFIERS_GRAPH);\n    }\n    return this._readQuantifierPunctuation;\n  }\n\n  // Reads punctuation from a @forSome or @forAll statement\n  _readQuantifierPunctuation(token) {\n    // Read more quantifiers\n    if (token.type === ',')\n      return this._readQuantifierList;\n    // End of the quantifier list\n    else {\n      // With explicit quantifiers, close the quantifier list\n      if (this._explicitQuantifiers) {\n        this._emit(this._subject, this.RDF_REST, this.RDF_NIL, this.QUANTIFIERS_GRAPH);\n        this._subject = null;\n      }\n      // Read a dot\n      this._readCallback = this._getContextEndReader();\n      return this._readCallback(token);\n    }\n  }\n\n  // ### `_getPathReader` reads a potential path and then resumes with the given function\n  _getPathReader(afterPath) {\n    this._afterPath = afterPath;\n    return this._readPath;\n  }\n\n  // ### `_readPath` reads a potential path\n  _readPath(token) {\n    switch (token.type) {\n    // Forward path\n    case '!': return this._readForwardPath;\n    // Backward path\n    case '^': return this._readBackwardPath;\n    // Not a path; resume reading where we left off\n    default:\n      var stack = this._contextStack, parent = stack.length && stack[stack.length - 1];\n      // If we were reading a list item, we still need to output it\n      if (parent && parent.type === 'item') {\n        // The list item is the remaining subejct after reading the path\n        var item = this._subject;\n        // Switch back to the context of the list\n        this._restoreContext();\n        // Output the list item\n        this._emit(this._subject, this.RDF_FIRST, item, this._graph);\n      }\n      return this._afterPath(token);\n    }\n  }\n\n  // ### `_readForwardPath` reads a '!' path\n  _readForwardPath(token) {\n    var subject, predicate, object = this._blank();\n    // The next token is the predicate\n    if ((predicate = this._readEntity(token)) === undefined)\n      return;\n    // If we were reading a subject, replace the subject by the path's object\n    if (this._predicate === null)\n      subject = this._subject, this._subject = object;\n    // If we were reading an object, replace the subject by the path's object\n    else\n      subject = this._object,  this._object  = object;\n    // Emit the path's current quad and read its next section\n    this._emit(subject, predicate, object, this._graph);\n    return this._readPath;\n  }\n\n  // ### `_readBackwardPath` reads a '^' path\n  _readBackwardPath(token) {\n    var subject = this._blank(), predicate, object;\n    // The next token is the predicate\n    if ((predicate = this._readEntity(token)) === undefined)\n      return;\n    // If we were reading a subject, replace the subject by the path's subject\n    if (this._predicate === null)\n      object = this._subject, this._subject = subject;\n    // If we were reading an object, replace the subject by the path's subject\n    else\n      object = this._object,  this._object  = subject;\n    // Emit the path's current quad and read its next section\n    this._emit(subject, predicate, object, this._graph);\n    return this._readPath;\n  }\n\n  // ### `_getContextEndReader` gets the next reader function at the end of a context\n  _getContextEndReader() {\n    var contextStack = this._contextStack;\n    if (!contextStack.length)\n      return this._readPunctuation;\n\n    switch (contextStack[contextStack.length - 1].type) {\n    case 'blank':\n      return this._readBlankNodeTail;\n    case 'list':\n      return this._readListItem;\n    case 'formula':\n      return this._readFormulaTail;\n    }\n  }\n\n  // ### `_emit` sends a quad through the callback\n  _emit(subject, predicate, object, graph) {\n    this._callback(null, this._quad(subject, predicate, object, graph || this.DEFAULTGRAPH));\n  }\n\n  // ### `_error` emits an error message through the callback\n  _error(message, token) {\n    var err = new Error(message + ' on line ' + token.line + '.');\n    err.context = {\n      token: token,\n      line: token.line,\n      previousToken: this._lexer.previousToken,\n    };\n    this._callback(err);\n    this._callback = noop;\n  }\n\n  // ### `_resolveIRI` resolves an IRI against the base path\n  _resolveIRI(iri) {\n    return /^[a-z][a-z0-9+.-]*:/i.test(iri) ? iri : this._resolveRelativeIRI(iri);\n  }\n\n  // ### `_resolveRelativeIRI` resolves an IRI against the base path,\n  // assuming that a base path has been set and that the IRI is indeed relative\n  _resolveRelativeIRI(iri) {\n    // An empty relative IRI indicates the base IRI\n    if (!iri.length)\n      return this._base;\n    // Decide resolving strategy based in the first character\n    switch (iri[0]) {\n    // Resolve relative fragment IRIs against the base IRI\n    case '#': return this._base + iri;\n    // Resolve relative query string IRIs by replacing the query string\n    case '?': return this._base.replace(/(?:\\?.*)?$/, iri);\n    // Resolve root-relative IRIs at the root of the base IRI\n    case '/':\n      // Resolve scheme-relative IRIs to the scheme\n      return (iri[1] === '/' ? this._baseScheme : this._baseRoot) + this._removeDotSegments(iri);\n    // Resolve all other IRIs at the base IRI's path\n    default:\n      // Relative IRIs cannot contain a colon in the first path segment\n      return (/^[^/:]*:/.test(iri)) ? null : this._removeDotSegments(this._basePath + iri);\n    }\n  }\n\n  // ### `_removeDotSegments` resolves './' and '../' path segments in an IRI as per RFC3986\n  _removeDotSegments(iri) {\n    // Don't modify the IRI if it does not contain any dot segments\n    if (!/(^|\\/)\\.\\.?($|[/#?])/.test(iri))\n      return iri;\n\n    // Start with an imaginary slash before the IRI in order to resolve trailing './' and '../'\n    var result = '', length = iri.length, i = -1, pathStart = -1, segmentStart = 0, next = '/';\n\n    while (i < length) {\n      switch (next) {\n      // The path starts with the first slash after the authority\n      case ':':\n        if (pathStart < 0) {\n          // Skip two slashes before the authority\n          if (iri[++i] === '/' && iri[++i] === '/')\n            // Skip to slash after the authority\n            while ((pathStart = i + 1) < length && iri[pathStart] !== '/')\n              i = pathStart;\n        }\n        break;\n      // Don't modify a query string or fragment\n      case '?':\n      case '#':\n        i = length;\n        break;\n      // Handle '/.' or '/..' path segments\n      case '/':\n        if (iri[i + 1] === '.') {\n          next = iri[++i + 1];\n          switch (next) {\n          // Remove a '/.' segment\n          case '/':\n            result += iri.substring(segmentStart, i - 1);\n            segmentStart = i + 1;\n            break;\n          // Remove a trailing '/.' segment\n          case undefined:\n          case '?':\n          case '#':\n            return result + iri.substring(segmentStart, i) + iri.substr(i + 1);\n          // Remove a '/..' segment\n          case '.':\n            next = iri[++i + 1];\n            if (next === undefined || next === '/' || next === '?' || next === '#') {\n              result += iri.substring(segmentStart, i - 2);\n              // Try to remove the parent path from result\n              if ((segmentStart = result.lastIndexOf('/')) >= pathStart)\n                result = result.substr(0, segmentStart);\n              // Remove a trailing '/..' segment\n              if (next !== '/')\n                return result + '/' + iri.substr(i + 1);\n              segmentStart = i + 1;\n            }\n          }\n        }\n      }\n      next = iri[++i];\n    }\n    return result + iri.substring(segmentStart);\n  }\n\n  // ## Public methods\n\n  // ### `parse` parses the N3 input and emits each parsed quad through the callback\n  parse(input, quadCallback, prefixCallback) {\n    var self = this;\n    // The read callback is the next function to be executed when a token arrives.\n    // We start reading in the top context.\n    this._readCallback = this._readInTopContext;\n    this._sparqlStyle = false;\n    this._prefixes = Object.create(null);\n    this._prefixes._ = this._blankNodePrefix ? this._blankNodePrefix.substr(2)\n                                             : 'b' + blankNodePrefix++ + '_';\n    this._prefixCallback = prefixCallback || noop;\n    this._inversePredicate = false;\n    this._quantified = Object.create(null);\n\n    // Parse synchronously if no quad callback is given\n    if (!quadCallback) {\n      var quads = [], error;\n      this._callback = function (e, t) { e ? (error = e) : t && quads.push(t); };\n      this._lexer.tokenize(input).every(function (token) {\n        return self._readCallback = self._readCallback(token);\n      });\n      if (error) throw error;\n      return quads;\n    }\n\n    // Parse asynchronously otherwise, executing the read callback when a token arrives\n    this._callback = quadCallback;\n    this._lexer.tokenize(input, function (error, token) {\n      if (error !== null)\n        self._callback(error), self._callback = noop;\n      else if (self._readCallback)\n        self._readCallback = self._readCallback(token);\n    });\n  }\n}\n\n// The empty function\nfunction noop() {}\n\n// Initializes the parser with the given data factory\nfunction initDataFactory(parser, factory) {\n  // Set factory methods\n  var namedNode = factory.namedNode;\n  parser._namedNode   = namedNode;\n  parser._blankNode   = factory.blankNode;\n  parser._literal     = factory.literal;\n  parser._variable    = factory.variable;\n  parser._quad        = factory.quad;\n  parser.DEFAULTGRAPH = factory.defaultGraph();\n\n  // Set common named nodes\n  parser.RDF_FIRST  = namedNode(namespaces.rdf.first);\n  parser.RDF_REST   = namedNode(namespaces.rdf.rest);\n  parser.RDF_NIL    = namedNode(namespaces.rdf.nil);\n  parser.N3_FORALL  = namedNode(namespaces.r.forAll);\n  parser.N3_FORSOME = namedNode(namespaces.r.forSome);\n  parser.ABBREVIATIONS = {\n    'a': namedNode(namespaces.rdf.type),\n    '=': namedNode(namespaces.owl.sameAs),\n    '>': namedNode(namespaces.log.implies),\n  };\n  parser.QUANTIFIERS_GRAPH = namedNode('urn:n3:quantifiers');\n}\ninitDataFactory(N3Parser.prototype, N3DataFactory);\n","// **N3Writer** writes N3 documents.\nimport namespaces from './IRIs';\nimport N3DataFactory from './N3DataFactory';\n\nconst DEFAULTGRAPH = N3DataFactory.defaultGraph();\n\nconst { rdf, xsd } = namespaces;\n\n// Characters in literals that require escaping\nvar escape    = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019\\ud800-\\udbff]/,\n    escapeAll = /[\"\\\\\\t\\n\\r\\b\\f\\u0000-\\u0019]|[\\ud800-\\udbff][\\udc00-\\udfff]/g,\n    escapedCharacters = {\n      '\\\\': '\\\\\\\\', '\"': '\\\\\"', '\\t': '\\\\t',\n      '\\n': '\\\\n', '\\r': '\\\\r', '\\b': '\\\\b', '\\f': '\\\\f',\n    };\n\n// ## Placeholder class to represent already pretty-printed terms\nclass SerializedTerm extends N3DataFactory.internal.Term {\n  // Pretty-printed nodes are not equal to any other node\n  // (e.g., [] does not equal [])\n  equals() {\n    return false;\n  }\n}\n\n// ## Constructor\nexport default class N3Writer {\n  constructor(outputStream, options) {\n    // ### `_prefixRegex` matches a prefixed name or IRI that begins with one of the added prefixes\n    this._prefixRegex = /$0^/;\n\n    // Shift arguments if the first argument is not a stream\n    if (outputStream && typeof outputStream.write !== 'function')\n      options = outputStream, outputStream = null;\n    options = options || {};\n    this._lists = options.lists;\n\n    // If no output stream given, send the output as string through the end callback\n    if (!outputStream) {\n      var output = '';\n      this._outputStream = {\n        write(chunk, encoding, done) { output += chunk; done && done(); },\n        end:   function (done) { done && done(null, output); },\n      };\n      this._endStream = true;\n    }\n    else {\n      this._outputStream = outputStream;\n      this._endStream = options.end === undefined ? true : !!options.end;\n    }\n\n    // Initialize writer, depending on the format\n    this._subject = null;\n    if (!(/triple|quad/i).test(options.format)) {\n      this._graph = DEFAULTGRAPH;\n      this._prefixIRIs = Object.create(null);\n      options.prefixes && this.addPrefixes(options.prefixes);\n    }\n    else {\n      this._writeQuad = this._writeQuadLine;\n    }\n  }\n\n  // ## Private methods\n\n  // ### Whether the current graph is the default graph\n  get _inDefaultGraph() {\n    return DEFAULTGRAPH.equals(this._graph);\n  }\n\n  // ### `_write` writes the argument to the output stream\n  _write(string, callback) {\n    this._outputStream.write(string, 'utf8', callback);\n  }\n\n  // ### `_writeQuad` writes the quad to the output stream\n  _writeQuad(subject, predicate, object, graph, done) {\n    try {\n      // Write the graph's label if it has changed\n      if (!graph.equals(this._graph)) {\n        // Close the previous graph and start the new one\n        this._write((this._subject === null ? '' : (this._inDefaultGraph ? '.\\n' : '\\n}\\n')) +\n                    (DEFAULTGRAPH.equals(graph) ? '' : this._encodeIriOrBlank(graph) + ' {\\n'));\n        this._graph = graph;\n        this._subject = null;\n      }\n      // Don't repeat the subject if it's the same\n      if (subject.equals(this._subject)) {\n        // Don't repeat the predicate if it's the same\n        if (predicate.equals(this._predicate))\n          this._write(', ' + this._encodeObject(object), done);\n        // Same subject, different predicate\n        else\n          this._write(';\\n    ' +\n                      this._encodePredicate(this._predicate = predicate) + ' ' +\n                      this._encodeObject(object), done);\n      }\n      // Different subject; write the whole quad\n      else\n        this._write((this._subject === null ? '' : '.\\n') +\n                    this._encodeIriOrBlank(this._subject = subject) + ' ' +\n                    this._encodePredicate(this._predicate = predicate) + ' ' +\n                    this._encodeObject(object), done);\n    }\n    catch (error) { done && done(error); }\n  }\n\n  // ### `_writeQuadLine` writes the quad to the output stream as a single line\n  _writeQuadLine(subject, predicate, object, graph, done) {\n    // Write the quad without prefixes\n    delete this._prefixMatch;\n    this._write(this.quadToString(subject, predicate, object, graph), done);\n  }\n\n  // ### `quadToString` serializes a quad as a string\n  quadToString(subject, predicate, object, graph) {\n    return  this._encodeIriOrBlank(subject)   + ' ' +\n            this._encodeIriOrBlank(predicate) + ' ' +\n            this._encodeObject(object) +\n            (graph && graph.value ? ' ' + this._encodeIriOrBlank(graph) + ' .\\n' : ' .\\n');\n  }\n\n  // ### `quadsToString` serializes an array of quads as a string\n  quadsToString(quads) {\n    return quads.map(function (t) {\n      return this.quadToString(t.subject, t.predicate, t.object, t.graph);\n    }, this).join('');\n  }\n\n  // ### `_encodeIriOrBlank` represents an IRI or blank node\n  _encodeIriOrBlank(entity) {\n    // A blank node or list is represented as-is\n    if (entity.termType !== 'NamedNode') {\n      // If it is a list head, pretty-print it\n      if (this._lists && (entity.value in this._lists))\n        entity = this.list(this._lists[entity.value]);\n      return 'id' in entity ? entity.id : '_:' + entity.value;\n    }\n    // Escape special characters\n    var iri = entity.value;\n    if (escape.test(iri))\n      iri = iri.replace(escapeAll, characterReplacer);\n    // Try to represent the IRI as prefixed name\n    var prefixMatch = this._prefixRegex.exec(iri);\n    return !prefixMatch ? '<' + iri + '>' :\n           (!prefixMatch[1] ? iri : this._prefixIRIs[prefixMatch[1]] + prefixMatch[2]);\n  }\n\n  // ### `_encodeLiteral` represents a literal\n  _encodeLiteral(literal) {\n    // Escape special characters\n    var value = literal.value;\n    if (escape.test(value))\n      value = value.replace(escapeAll, characterReplacer);\n    // Write the literal, possibly with type or language\n    if (literal.language)\n      return '\"' + value + '\"@' + literal.language;\n    else if (literal.datatype.value !== xsd.string)\n      return '\"' + value + '\"^^' + this._encodeIriOrBlank(literal.datatype);\n    else\n      return '\"' + value + '\"';\n  }\n\n  // ### `_encodePredicate` represents a predicate\n  _encodePredicate(predicate) {\n    return predicate.value === rdf.type ? 'a' : this._encodeIriOrBlank(predicate);\n  }\n\n  // ### `_encodeObject` represents an object\n  _encodeObject(object) {\n    return object.termType === 'Literal' ? this._encodeLiteral(object) : this._encodeIriOrBlank(object);\n  }\n\n  // ### `_blockedWrite` replaces `_write` after the writer has been closed\n  _blockedWrite() {\n    throw new Error('Cannot write because the writer has been closed.');\n  }\n\n  // ### `addQuad` adds the quad to the output stream\n  addQuad(subject, predicate, object, graph, done) {\n    // The quad was given as an object, so shift parameters\n    if (object === undefined)\n      this._writeQuad(subject.subject, subject.predicate, subject.object, subject.graph, predicate);\n    // The optional `graph` parameter was not provided\n    else if (typeof graph === 'function')\n      this._writeQuad(subject, predicate, object, DEFAULTGRAPH, graph);\n    // The `graph` parameter was provided\n    else\n      this._writeQuad(subject, predicate, object, graph || DEFAULTGRAPH, done);\n  }\n\n  // ### `addQuads` adds the quads to the output stream\n  addQuads(quads) {\n    for (var i = 0; i < quads.length; i++)\n      this.addQuad(quads[i]);\n  }\n\n  // ### `addPrefix` adds the prefix to the output stream\n  addPrefix(prefix, iri, done) {\n    var prefixes = {};\n    prefixes[prefix] = iri;\n    this.addPrefixes(prefixes, done);\n  }\n\n  // ### `addPrefixes` adds the prefixes to the output stream\n  addPrefixes(prefixes, done) {\n    var prefixIRIs = this._prefixIRIs, hasPrefixes = false;\n    for (var prefix in prefixes) {\n      var iri = prefixes[prefix];\n      if (typeof iri !== 'string')\n        iri = iri.value;\n      hasPrefixes = true;\n      // Finish a possible pending quad\n      if (this._subject !== null) {\n        this._write(this._inDefaultGraph ? '.\\n' : '\\n}\\n');\n        this._subject = null, this._graph = '';\n      }\n      // Store and write the prefix\n      prefixIRIs[iri] = (prefix += ':');\n      this._write('@prefix ' + prefix + ' <' + iri + '>.\\n');\n    }\n    // Recreate the prefix matcher\n    if (hasPrefixes) {\n      var IRIlist = '', prefixList = '';\n      for (var prefixIRI in prefixIRIs) {\n        IRIlist += IRIlist ? '|' + prefixIRI : prefixIRI;\n        prefixList += (prefixList ? '|' : '') + prefixIRIs[prefixIRI];\n      }\n      IRIlist = IRIlist.replace(/[\\]\\/\\(\\)\\*\\+\\?\\.\\\\\\$]/g, '\\\\$&');\n      this._prefixRegex = new RegExp('^(?:' + prefixList + ')[^\\/]*$|' +\n                                     '^(' + IRIlist + ')([a-zA-Z][\\\\-_a-zA-Z0-9]*)$');\n    }\n    // End a prefix block with a newline\n    this._write(hasPrefixes ? '\\n' : '', done);\n  }\n\n  // ### `blank` creates a blank node with the given content\n  blank(predicate, object) {\n    var children = predicate, child, length;\n    // Empty blank node\n    if (predicate === undefined)\n      children = [];\n    // Blank node passed as blank(Term(\"predicate\"), Term(\"object\"))\n    else if (predicate.termType)\n      children = [{ predicate: predicate, object: object }];\n    // Blank node passed as blank({ predicate: predicate, object: object })\n    else if (!('length' in predicate))\n      children = [predicate];\n\n    switch (length = children.length) {\n    // Generate an empty blank node\n    case 0:\n      return new SerializedTerm('[]');\n    // Generate a non-nested one-triple blank node\n    case 1:\n      child = children[0];\n      if (!(child.object instanceof SerializedTerm))\n        return new SerializedTerm('[ ' + this._encodePredicate(child.predicate) + ' ' +\n                                  this._encodeObject(child.object) + ' ]');\n    // Generate a multi-triple or nested blank node\n    default:\n      var contents = '[';\n      // Write all triples in order\n      for (var i = 0; i < length; i++) {\n        child = children[i];\n        // Write only the object is the predicate is the same as the previous\n        if (child.predicate.equals(predicate))\n          contents += ', ' + this._encodeObject(child.object);\n        // Otherwise, write the predicate and the object\n        else {\n          contents += (i ? ';\\n  ' : '\\n  ') +\n                      this._encodePredicate(child.predicate) + ' ' +\n                      this._encodeObject(child.object);\n          predicate = child.predicate;\n        }\n      }\n      return new SerializedTerm(contents + '\\n]');\n    }\n  }\n\n  // ### `list` creates a list node with the given content\n  list(elements) {\n    var length = elements && elements.length || 0, contents = new Array(length);\n    for (var i = 0; i < length; i++)\n      contents[i] = this._encodeObject(elements[i]);\n    return new SerializedTerm('(' + contents.join(' ') + ')');\n  }\n\n  // ### `end` signals the end of the output stream\n  end(done) {\n    // Finish a possible pending quad\n    if (this._subject !== null) {\n      this._write(this._inDefaultGraph ? '.\\n' : '\\n}\\n');\n      this._subject = null;\n    }\n    // Disallow further writing\n    this._write = this._blockedWrite;\n\n    // Try to end the underlying stream, ensuring done is called exactly one time\n    var singleDone = done && function (error, result) { singleDone = null, done(error, result); };\n    if (this._endStream) {\n      try { return this._outputStream.end(singleDone); }\n      catch (error) { /* error closing stream */ }\n    }\n    singleDone && singleDone();\n  }\n}\n\n// Replaces a character by its escaped version\nfunction characterReplacer(character) {\n  // Replace a single character by its escaped version\n  var result = escapedCharacters[character];\n  if (result === undefined) {\n    // Replace a single character with its 4-bit unicode escape sequence\n    if (character.length === 1) {\n      result = character.charCodeAt(0).toString(16);\n      result = '\\\\u0000'.substr(0, 6 - result.length) + result;\n    }\n    // Replace a surrogate pair with its 8-bit unicode escape sequence\n    else {\n      result = ((character.charCodeAt(0) - 0xD800) * 0x400 +\n                 character.charCodeAt(1) + 0x2400).toString(16);\n      result = '\\\\U00000000'.substr(0, 10 - result.length) + result;\n    }\n  }\n  return result;\n}\n","// **N3Store** objects store N3 quads by graph in memory.\nimport N3DataFactory from './N3DataFactory';\nimport { Readable } from 'stream';\nimport namespaces from './IRIs';\n\nconst { toId, fromId } = N3DataFactory.internal;\n\n// ## Constructor\nexport default class N3Store {\n  constructor(quads, options) {\n    // The number of quads is initially zero\n    this._size = 0;\n    // `_graphs` contains subject, predicate, and object indexes per graph\n    this._graphs = Object.create(null);\n    // `_ids` maps entities such as `http://xmlns.com/foaf/0.1/name` to numbers,\n    // saving memory by using only numbers as keys in `_graphs`\n    this._id = 0;\n    this._ids = Object.create(null);\n    this._ids['><'] = 0; // dummy entry, so the first actual key is non-zero\n    this._entities = Object.create(null); // inverse of `_ids`\n    // `_blankNodeIndex` is the index of the last automatically named blank node\n    this._blankNodeIndex = 0;\n\n    // Shift parameters if `quads` is not given\n    if (!options && quads && !quads[0])\n      options = quads, quads = null;\n    options = options || {};\n    this._factory = options.factory || N3DataFactory;\n\n    // Add quads if passed\n    if (quads)\n      this.addQuads(quads);\n  }\n\n  // ## Public properties\n\n  // ### `size` returns the number of quads in the store\n  get size() {\n    // Return the quad count if if was cached\n    var size = this._size;\n    if (size !== null)\n      return size;\n\n    // Calculate the number of quads by counting to the deepest level\n    size = 0;\n    var graphs = this._graphs, subjects, subject;\n    for (var graphKey in graphs)\n      for (var subjectKey in (subjects = graphs[graphKey].subjects))\n        for (var predicateKey in (subject = subjects[subjectKey]))\n          size += Object.keys(subject[predicateKey]).length;\n    return this._size = size;\n  }\n\n  // ## Private methods\n\n  // ### `_addToIndex` adds a quad to a three-layered index.\n  // Returns if the index has changed, if the entry did not already exist.\n  _addToIndex(index0, key0, key1, key2) {\n    // Create layers as necessary\n    var index1 = index0[key0] || (index0[key0] = {});\n    var index2 = index1[key1] || (index1[key1] = {});\n    // Setting the key to _any_ value signals the presence of the quad\n    var existed = key2 in index2;\n    if (!existed)\n      index2[key2] = null;\n    return !existed;\n  }\n\n  // ### `_removeFromIndex` removes a quad from a three-layered index\n  _removeFromIndex(index0, key0, key1, key2) {\n    // Remove the quad from the index\n    var index1 = index0[key0], index2 = index1[key1], key;\n    delete index2[key2];\n\n    // Remove intermediary index layers if they are empty\n    for (key in index2) return;\n    delete index1[key1];\n    for (key in index1) return;\n    delete index0[key0];\n  }\n\n  // ### `_findInIndex` finds a set of quads in a three-layered index.\n  // The index base is `index0` and the keys at each level are `key0`, `key1`, and `key2`.\n  // Any of these keys can be undefined, which is interpreted as a wildcard.\n  // `name0`, `name1`, and `name2` are the names of the keys at each level,\n  // used when reconstructing the resulting quad\n  // (for instance: _subject_, _predicate_, and _object_).\n  // Finally, `graph` will be the graph of the created quads.\n  // If `callback` is given, each result is passed through it\n  // and iteration halts when it returns truthy for any quad.\n  // If instead `array` is given, each result is added to the array.\n  _findInIndex(index0, key0, key1, key2, name0, name1, name2, graph, callback, array) {\n    var tmp, index1, index2, varCount = !key0 + !key1 + !key2,\n        // depending on the number of variables, keys or reverse index are faster\n        entityKeys = varCount > 1 ? Object.keys(this._ids) : this._entities;\n\n    // If a key is specified, use only that part of index 0.\n    if (key0) (tmp = index0, index0 = {})[key0] = tmp[key0];\n    for (var value0 in index0) {\n      var entity0 = entityKeys[value0];\n\n      if (index1 = index0[value0]) {\n        // If a key is specified, use only that part of index 1.\n        if (key1) (tmp = index1, index1 = {})[key1] = tmp[key1];\n        for (var value1 in index1) {\n          var entity1 = entityKeys[value1];\n\n          if (index2 = index1[value1]) {\n            // If a key is specified, use only that part of index 2, if it exists.\n            var values = key2 ? (key2 in index2 ? [key2] : []) : Object.keys(index2);\n            // Create quads for all items found in index 2.\n            for (var l = 0; l < values.length; l++) {\n              var parts = { subject: null, predicate: null, object: null };\n              parts[name0] = fromId(entity0, this._factory);\n              parts[name1] = fromId(entity1, this._factory);\n              parts[name2] = fromId(entityKeys[values[l]], this._factory);\n              var quad = this._factory.quad(\n                parts.subject, parts.predicate, parts.object, fromId(graph, this._factory));\n              if (array)\n                array.push(quad);\n              else if (callback(quad))\n                return true;\n            }\n          }\n        }\n      }\n    }\n    return array;\n  }\n\n  // ### `_loop` executes the callback on all keys of index 0\n  _loop(index0, callback) {\n    for (var key0 in index0)\n      callback(key0);\n  }\n\n  // ### `_loopByKey0` executes the callback on all keys of a certain entry in index 0\n  _loopByKey0(index0, key0, callback) {\n    var index1, key1;\n    if (index1 = index0[key0]) {\n      for (key1 in index1)\n        callback(key1);\n    }\n  }\n\n  // ### `_loopByKey1` executes the callback on given keys of all entries in index 0\n  _loopByKey1(index0, key1, callback) {\n    var key0, index1;\n    for (key0 in index0) {\n      index1 = index0[key0];\n      if (index1[key1])\n        callback(key0);\n    }\n  }\n\n  // ### `_loopBy2Keys` executes the callback on given keys of certain entries in index 2\n  _loopBy2Keys(index0, key0, key1, callback) {\n    var index1, index2, key2;\n    if ((index1 = index0[key0]) && (index2 = index1[key1])) {\n      for (key2 in index2)\n        callback(key2);\n    }\n  }\n\n  // ### `_countInIndex` counts matching quads in a three-layered index.\n  // The index base is `index0` and the keys at each level are `key0`, `key1`, and `key2`.\n  // Any of these keys can be undefined, which is interpreted as a wildcard.\n  _countInIndex(index0, key0, key1, key2) {\n    var count = 0, tmp, index1, index2;\n\n    // If a key is specified, count only that part of index 0\n    if (key0) (tmp = index0, index0 = {})[key0] = tmp[key0];\n    for (var value0 in index0) {\n      if (index1 = index0[value0]) {\n        // If a key is specified, count only that part of index 1\n        if (key1) (tmp = index1, index1 = {})[key1] = tmp[key1];\n        for (var value1 in index1) {\n          if (index2 = index1[value1]) {\n            // If a key is specified, count the quad if it exists\n            if (key2) (key2 in index2) && count++;\n            // Otherwise, count all quads\n            else count += Object.keys(index2).length;\n          }\n        }\n      }\n    }\n    return count;\n  }\n\n  // ### `_getGraphs` returns an array with the given graph,\n  // or all graphs if the argument is null or undefined.\n  _getGraphs(graph) {\n    if (!isString(graph))\n      return this._graphs;\n    var graphs = {};\n    graphs[graph] = this._graphs[graph];\n    return graphs;\n  }\n\n  // ### `_uniqueEntities` returns a function that accepts an entity ID\n  // and passes the corresponding entity to callback if it hasn't occurred before.\n  _uniqueEntities(callback) {\n    var uniqueIds = Object.create(null), entities = this._entities;\n    return function (id) {\n      if (!(id in uniqueIds)) {\n        uniqueIds[id] = true;\n        callback(fromId(entities[id]));\n      }\n    };\n  }\n\n  // ## Public methods\n\n  // ### `addQuad` adds a new quad to the store.\n  // Returns if the quad index has changed, if the quad did not already exist.\n  addQuad(subject, predicate, object, graph) {\n    // Shift arguments if a quad object is given instead of components\n    if (!predicate)\n      graph = subject.graph, object = subject.object,\n        predicate = subject.predicate, subject = subject.subject;\n\n    // Convert terms to internal string representation\n    subject = toId(subject);\n    predicate = toId(predicate);\n    object = toId(object);\n    graph = toId(graph);\n\n    // Find the graph that will contain the triple\n    var graphItem = this._graphs[graph];\n    // Create the graph if it doesn't exist yet\n    if (!graphItem) {\n      graphItem = this._graphs[graph] = { subjects: {}, predicates: {}, objects: {} };\n      // Freezing a graph helps subsequent `add` performance,\n      // and properties will never be modified anyway\n      Object.freeze(graphItem);\n    }\n\n    // Since entities can often be long IRIs, we avoid storing them in every index.\n    // Instead, we have a separate index that maps entities to numbers,\n    // which are then used as keys in the other indexes.\n    var ids = this._ids;\n    var entities = this._entities;\n    subject   = ids[subject]   || (ids[entities[++this._id] = subject]   = this._id);\n    predicate = ids[predicate] || (ids[entities[++this._id] = predicate] = this._id);\n    object    = ids[object]    || (ids[entities[++this._id] = object]    = this._id);\n\n    var changed = this._addToIndex(graphItem.subjects,   subject,   predicate, object);\n    this._addToIndex(graphItem.predicates, predicate, object,    subject);\n    this._addToIndex(graphItem.objects,    object,    subject,   predicate);\n\n    // The cached quad count is now invalid\n    this._size = null;\n    return changed;\n  }\n\n  // ### `addQuads` adds multiple quads to the store\n  addQuads(quads) {\n    for (var i = 0; i < quads.length; i++)\n      this.addQuad(quads[i]);\n  }\n\n  // ### `import` adds a stream of quads to the store\n  import(stream) {\n    var self = this;\n    stream.on('data', function (quad) { self.addQuad(quad); });\n    return stream;\n  }\n\n  // ### `removeQuad` removes a quad from the store if it exists\n  removeQuad(subject, predicate, object, graph) {\n    // Shift arguments if a quad object is given instead of components\n    if (!predicate)\n      graph = subject.graph, object = subject.object,\n        predicate = subject.predicate, subject = subject.subject;\n\n    // Convert terms to internal string representation\n    subject = toId(subject);\n    predicate = toId(predicate);\n    object = toId(object);\n    graph = toId(graph);\n\n    // Find internal identifiers for all components\n    // and verify the quad exists.\n    var graphItem, ids = this._ids, graphs = this._graphs, subjects, predicates;\n    if (!(subject    = ids[subject]) || !(predicate = ids[predicate]) ||\n        !(object     = ids[object])  || !(graphItem = graphs[graph])  ||\n        !(subjects   = graphItem.subjects[subject]) ||\n        !(predicates = subjects[predicate]) ||\n        !(object in predicates))\n      return false;\n\n    // Remove it from all indexes\n    this._removeFromIndex(graphItem.subjects,   subject,   predicate, object);\n    this._removeFromIndex(graphItem.predicates, predicate, object,    subject);\n    this._removeFromIndex(graphItem.objects,    object,    subject,   predicate);\n    if (this._size !== null) this._size--;\n\n    // Remove the graph if it is empty\n    for (subject in graphItem.subjects) return true;\n    delete graphs[graph];\n    return true;\n  }\n\n  // ### `removeQuads` removes multiple quads from the store\n  removeQuads(quads) {\n    for (var i = 0; i < quads.length; i++)\n      this.removeQuad(quads[i]);\n  }\n\n  // ### `remove` removes a stream of quads from the store\n  remove(stream) {\n    var self = this;\n    stream.on('data', function (quad) { self.removeQuad(quad); });\n    return stream;\n  }\n\n  // ### `removeMatches` removes all matching quads from the store\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  removeMatches(subject, predicate, object, graph) {\n    return this.remove(this.match(subject, predicate, object, graph));\n  }\n\n  // ### `deleteGraph` removes all triples with the given graph from the store\n  deleteGraph(graph) {\n    return this.removeMatches(null, null, null, graph);\n  }\n\n  // ### `getQuads` returns an array of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getQuads(subject, predicate, object, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    predicate = predicate && toId(predicate);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var quads = [], graphs = this._getGraphs(graph), content,\n        ids = this._ids, subjectId, predicateId, objectId;\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject)   && !(subjectId   = ids[subject])   ||\n        isString(predicate) && !(predicateId = ids[predicate]) ||\n        isString(object)    && !(objectId    = ids[object]))\n      return quads;\n\n    for (var graphId in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graphId]) {\n        // Choose the optimal index, based on what fields are present\n        if (subjectId) {\n          if (objectId)\n            // If subject and object are given, the object index will be the fastest\n            this._findInIndex(content.objects, objectId, subjectId, predicateId,\n                              'object', 'subject', 'predicate', graphId, null, quads);\n          else\n            // If only subject and possibly predicate are given, the subject index will be the fastest\n            this._findInIndex(content.subjects, subjectId, predicateId, null,\n                              'subject', 'predicate', 'object', graphId, null, quads);\n        }\n        else if (predicateId)\n          // If only predicate and possibly object are given, the predicate index will be the fastest\n          this._findInIndex(content.predicates, predicateId, objectId, null,\n                            'predicate', 'object', 'subject', graphId, null, quads);\n        else if (objectId)\n          // If only object is given, the object index will be the fastest\n          this._findInIndex(content.objects, objectId, null, null,\n                            'object', 'subject', 'predicate', graphId, null, quads);\n        else\n          // If nothing is given, iterate subjects and predicates first\n          this._findInIndex(content.subjects, null, null, null,\n                            'subject', 'predicate', 'object', graphId, null, quads);\n      }\n    }\n    return quads;\n  }\n\n  // ### `match` returns a stream of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  match(subject, predicate, object, graph) {\n    var stream = new Readable({ objectMode: true });\n\n    // Initialize stream once it is being read\n    stream._read = () => {\n      for (var quad of this.getQuads(subject, predicate, object, graph))\n        stream.push(quad);\n      stream.push(null);\n    };\n\n    return stream;\n  }\n\n  // ### `countQuads` returns the number of quads matching a pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  countQuads(subject, predicate, object, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    predicate = predicate && toId(predicate);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var count = 0, graphs = this._getGraphs(graph), content,\n        ids = this._ids, subjectId, predicateId, objectId;\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject)   && !(subjectId   = ids[subject])   ||\n        isString(predicate) && !(predicateId = ids[predicate]) ||\n        isString(object)    && !(objectId    = ids[object]))\n      return 0;\n\n    for (var graphId in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graphId]) {\n        // Choose the optimal index, based on what fields are present\n        if (subject) {\n          if (object)\n            // If subject and object are given, the object index will be the fastest\n            count += this._countInIndex(content.objects, objectId, subjectId, predicateId);\n          else\n            // If only subject and possibly predicate are given, the subject index will be the fastest\n            count += this._countInIndex(content.subjects, subjectId, predicateId, objectId);\n        }\n        else if (predicate) {\n          // If only predicate and possibly object are given, the predicate index will be the fastest\n          count += this._countInIndex(content.predicates, predicateId, objectId, subjectId);\n        }\n        else {\n          // If only object is possibly given, the object index will be the fastest\n          count += this._countInIndex(content.objects, objectId, subjectId, predicateId);\n        }\n      }\n    }\n    return count;\n  }\n\n  // ### `forEach` executes the callback on all quads.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forEach(callback, subject, predicate, object, graph) {\n    this.some(function (quad) {\n      callback(quad);\n      return false;\n    }, subject, predicate, object, graph);\n  }\n\n  // ### `every` executes the callback on all quads,\n  // and returns `true` if it returns truthy for all them.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  every(callback, subject, predicate, object, graph) {\n    var some = false;\n    var every = !this.some(function (quad) {\n      some = true;\n      return !callback(quad);\n    }, subject, predicate, object, graph);\n    return some && every;\n  }\n\n  // ### `some` executes the callback on all quads,\n  // and returns `true` if it returns truthy for any of them.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  some(callback, subject, predicate, object, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    predicate = predicate && toId(predicate);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var graphs = this._getGraphs(graph), content,\n        ids = this._ids, subjectId, predicateId, objectId;\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject)   && !(subjectId   = ids[subject])   ||\n        isString(predicate) && !(predicateId = ids[predicate]) ||\n        isString(object)    && !(objectId    = ids[object]))\n      return false;\n\n    for (var graphId in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graphId]) {\n        // Choose the optimal index, based on what fields are present\n        if (subjectId) {\n          if (objectId) {\n          // If subject and object are given, the object index will be the fastest\n            if (this._findInIndex(content.objects, objectId, subjectId, predicateId,\n                                  'object', 'subject', 'predicate', graphId, callback, null))\n              return true;\n          }\n          else\n            // If only subject and possibly predicate are given, the subject index will be the fastest\n            if (this._findInIndex(content.subjects, subjectId, predicateId, null,\n                                  'subject', 'predicate', 'object', graphId, callback, null))\n              return true;\n        }\n        else if (predicateId) {\n          // If only predicate and possibly object are given, the predicate index will be the fastest\n          if (this._findInIndex(content.predicates, predicateId, objectId, null,\n                                'predicate', 'object', 'subject', graphId, callback, null)) {\n            return true;\n          }\n        }\n        else if (objectId) {\n          // If only object is given, the object index will be the fastest\n          if (this._findInIndex(content.objects, objectId, null, null,\n                                'object', 'subject', 'predicate', graphId, callback, null)) {\n            return true;\n          }\n        }\n        else\n        // If nothing is given, iterate subjects and predicates first\n        if (this._findInIndex(content.subjects, null, null, null,\n                              'subject', 'predicate', 'object', graphId, callback, null)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  // ### `getSubjects` returns all subjects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getSubjects(predicate, object, graph) {\n    var results = [];\n    this.forSubjects(function (s) { results.push(s); }, predicate, object, graph);\n    return results;\n  }\n\n  // ### `forSubjects` executes the callback on all subjects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forSubjects(callback, predicate, object, graph) {\n    // Convert terms to internal string representation\n    predicate = predicate && toId(predicate);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var ids = this._ids, graphs = this._getGraphs(graph), content, predicateId, objectId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (isString(predicate) && !(predicateId = ids[predicate]) ||\n        isString(object)    && !(objectId    = ids[object]))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (predicateId) {\n          if (objectId)\n            // If predicate and object are given, the POS index is best.\n            this._loopBy2Keys(content.predicates, predicateId, objectId, callback);\n          else\n            // If only predicate is given, the SPO index is best.\n            this._loopByKey1(content.subjects, predicateId, callback);\n        }\n        else if (objectId)\n          // If only object is given, the OSP index is best.\n          this._loopByKey0(content.objects, objectId, callback);\n        else\n          // If no params given, iterate all the subjects\n          this._loop(content.subjects, callback);\n      }\n    }\n  }\n\n  // ### `getPredicates` returns all predicates that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getPredicates(subject, object, graph) {\n    var results = [];\n    this.forPredicates(function (p) { results.push(p); }, subject, object, graph);\n    return results;\n  }\n\n  // ### `forPredicates` executes the callback on all predicates that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forPredicates(callback, subject, object, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    object = object && toId(object);\n    graph = graph && toId(graph);\n\n    var ids = this._ids, graphs = this._getGraphs(graph), content, subjectId, objectId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject) && !(subjectId = ids[subject]) ||\n        isString(object)  && !(objectId  = ids[object]))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (subjectId) {\n          if (objectId)\n            // If subject and object are given, the OSP index is best.\n            this._loopBy2Keys(content.objects, objectId, subjectId, callback);\n          else\n            // If only subject is given, the SPO index is best.\n            this._loopByKey0(content.subjects, subjectId, callback);\n        }\n        else if (objectId)\n          // If only object is given, the POS index is best.\n          this._loopByKey1(content.predicates, objectId, callback);\n        else\n          // If no params given, iterate all the predicates.\n          this._loop(content.predicates, callback);\n      }\n    }\n  }\n\n  // ### `getObjects` returns all objects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getObjects(subject, predicate, graph) {\n    var results = [];\n    this.forObjects(function (o) { results.push(o); }, subject, predicate, graph);\n    return results;\n  }\n\n  // ### `forObjects` executes the callback on all objects that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forObjects(callback, subject, predicate, graph) {\n    // Convert terms to internal string representation\n    subject = subject && toId(subject);\n    predicate = predicate && toId(predicate);\n    graph = graph && toId(graph);\n\n    var ids = this._ids, graphs = this._getGraphs(graph), content, subjectId, predicateId;\n    callback = this._uniqueEntities(callback);\n\n    // Translate IRIs to internal index keys.\n    if (isString(subject)   && !(subjectId   = ids[subject]) ||\n        isString(predicate) && !(predicateId = ids[predicate]))\n      return;\n\n    for (graph in graphs) {\n      // Only if the specified graph contains triples, there can be results\n      if (content = graphs[graph]) {\n        // Choose optimal index based on which fields are wildcards\n        if (subjectId) {\n          if (predicateId)\n            // If subject and predicate are given, the SPO index is best.\n            this._loopBy2Keys(content.subjects, subjectId, predicateId, callback);\n          else\n            // If only subject is given, the OSP index is best.\n            this._loopByKey1(content.objects, subjectId, callback);\n        }\n        else if (predicateId)\n          // If only predicate is given, the POS index is best.\n          this._loopByKey0(content.predicates, predicateId, callback);\n        else\n          // If no params given, iterate all the objects.\n          this._loop(content.objects, callback);\n      }\n    }\n  }\n\n  // ### `getGraphs` returns all graphs that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  getGraphs(subject, predicate, object) {\n    var results = [];\n    this.forGraphs(function (g) { results.push(g); }, subject, predicate, object);\n    return results;\n  }\n\n  // ### `forGraphs` executes the callback on all graphs that match the pattern.\n  // Setting any field to `undefined` or `null` indicates a wildcard.\n  forGraphs(callback, subject, predicate, object) {\n    for (var graph in this._graphs) {\n      this.some(function (quad) {\n        callback(quad.graph);\n        return true; // Halt iteration of some()\n      }, subject, predicate, object, graph);\n    }\n  }\n\n  // ### `createBlankNode` creates a new blank node, returning its name\n  createBlankNode(suggestedName) {\n    var name, index;\n    // Generate a name based on the suggested name\n    if (suggestedName) {\n      name = suggestedName = '_:' + suggestedName, index = 1;\n      while (this._ids[name])\n        name = suggestedName + index++;\n    }\n    // Generate a generic blank node name\n    else {\n      do { name = '_:b' + this._blankNodeIndex++; }\n      while (this._ids[name]);\n    }\n    // Add the blank node to the entities, avoiding the generation of duplicates\n    this._ids[name] = ++this._id;\n    this._entities[this._id] = name;\n    return this._factory.blankNode(name.substr(2));\n  }\n\n  // ### `extractLists` finds and removes all list triples\n  // and returns the items per list.\n  extractLists({ remove = false, ignoreErrors = false } = {}) {\n    var lists = {}; // has scalar keys so could be a simple Object\n    var onError = ignoreErrors ? (() => true) :\n                  ((node, message) => { throw new Error(`${node.value} ${message}`); });\n\n    // Traverse each list from its tail\n    var tails = this.getQuads(null, namespaces.rdf.rest, namespaces.rdf.nil, null);\n    var toRemove = remove ? [...tails] : [];\n    tails.forEach(tailQuad => {\n      var items = [];             // the members found as objects of rdf:first quads\n      var malformed = false;      // signals whether the current list is malformed\n      var head;                   // the head of the list (_:b1 in above example)\n      var headPos;                // set to subject or object when head is set\n      var graph = tailQuad.graph; // make sure list is in exactly one graph\n\n      // Traverse the list from tail to end\n      var current = tailQuad.subject;\n      while (current && !malformed) {\n        var objectQuads = this.getQuads(null, null, current, null);\n        var subjectQuads = this.getQuads(current, null, null, null);\n        var i, quad, first = null, rest = null, parent = null;\n\n        // Find the first and rest of this list node\n        for (i = 0; i < subjectQuads.length && !malformed; i++) {\n          quad = subjectQuads[i];\n          if (!quad.graph.equals(graph))\n            malformed = onError(current, 'not confined to single graph');\n          else if (head)\n            malformed = onError(current, 'has non-list arcs out');\n\n          // one rdf:first\n          else if (quad.predicate.value === namespaces.rdf.first) {\n            if (first)\n              malformed = onError(current, 'has multiple rdf:first arcs');\n            else\n              toRemove.push(first = quad);\n          }\n\n          // one rdf:rest\n          else if (quad.predicate.value === namespaces.rdf.rest) {\n            if (rest)\n              malformed = onError(current, 'has multiple rdf:rest arcs');\n            else\n              toRemove.push(rest = quad);\n          }\n\n          // alien triple\n          else if (objectQuads.length)\n            malformed = onError(current, 'can\\'t be subject and object');\n          else {\n            head = quad; // e.g. { (1 2 3) :p :o }\n            headPos = 'subject';\n          }\n        }\n\n        // { :s :p (1 2) } arrives here with no head\n        // { (1 2) :p :o } arrives here with head set to the list.\n        for (i = 0; i < objectQuads.length && !malformed; ++i) {\n          quad = objectQuads[i];\n          if (head)\n            malformed = onError(current, 'can\\'t have coreferences');\n          // one rdf:rest\n          else if (quad.predicate.value === namespaces.rdf.rest) {\n            if (parent)\n              malformed = onError(current, 'has incoming rdf:rest arcs');\n            else\n              parent = quad;\n          }\n          else {\n            head = quad; // e.g. { :s :p (1 2) }\n            headPos = 'object';\n          }\n        }\n\n        // Store the list item and continue with parent\n        if (!first)\n          malformed = onError(current, 'has no list head');\n        else\n          items.unshift(first.object);\n        current = parent && parent.subject;\n      }\n\n      // Don't remove any quads if the list is malformed\n      if (malformed)\n        remove = false;\n      // Store the list under the value of its head\n      else if (head)\n        lists[head[headPos].value] = items;\n    });\n\n    // Remove list quads if requested\n    if (remove)\n      this.removeQuads(toRemove);\n    return lists;\n  }\n}\n\n// Determines whether the argument is a string\nfunction isString(s) {\n  return typeof s === 'string' || s instanceof String;\n}\n","// **N3StreamParser** parses a text stream into a quad stream.\nimport N3Parser from './N3Parser';\nimport { Transform } from 'stream';\n\n// ## Constructor\nexport default class N3StreamParser extends Transform {\n  constructor(options) {\n    super({ decodeStrings: true });\n    this._readableState.objectMode = true;\n\n    // Set up parser with dummy stream to obtain `data` and `end` callbacks\n    var self = this, parser = new N3Parser(options), onData, onEnd;\n    parser.parse({\n      on: function (event, callback) {\n        switch (event) {\n        case 'data': onData = callback; break;\n        case 'end':   onEnd = callback; break;\n        }\n      },\n    },\n      // Handle quads by pushing them down the pipeline\n      function (error, quad) { error && self.emit('error', error) || quad && self.push(quad); },\n      // Emit prefixes through the `prefix` event\n      function (prefix, uri) { self.emit('prefix', prefix, uri); }\n    );\n\n    // Implement Transform methods through parser callbacks\n    this._transform = function (chunk, encoding, done) { onData(chunk); done(); };\n    this._flush = function (done) { onEnd(); done(); };\n  }\n\n  // ### Parses a stream of strings\n  import(stream) {\n    var self = this;\n    stream.on('data',  function (chunk) { self.write(chunk); });\n    stream.on('end',   function ()      { self.end(); });\n    stream.on('error', function (error) { self.emit('error', error); });\n    return this;\n  }\n}\n","// **N3StreamWriter** serializes a quad stream into a text stream.\nimport { Transform } from 'stream';\nimport N3Writer from './N3Writer';\n\n// ## Constructor\nexport default class N3StreamWriter extends Transform {\n  constructor(options) {\n    super({ encoding: 'utf8' });\n    this._writableState.objectMode = true;\n\n    // Set up writer with a dummy stream object\n    var self = this;\n    var writer = this._writer = new N3Writer({\n      write: function (quad, encoding, callback) { self.push(quad); callback && callback(); },\n      end: function (callback) { self.push(null); callback && callback(); },\n    }, options);\n\n    // Implement Transform methods on top of writer\n    this._transform = function (quad, encoding, done) { writer.addQuad(quad, done); };\n    this._flush = function (done) { writer.end(done); };\n  }\n\n// ### Serializes a stream of quads\n  import(stream) {\n    var self = this;\n    stream.on('data',   function (quad)  { self.write(quad); });\n    stream.on('end',    function ()      { self.end(); });\n    stream.on('error',  function (error) { self.emit('error', error); });\n    stream.on('prefix', function (prefix, iri) { self._writer.addPrefix(prefix, iri); });\n    return this;\n  }\n}\n","// **N3Util** provides N3 utility functions.\n\nimport N3DataFactory from './N3DataFactory';\n\n// Tests whether the given term represents an IRI\nexport function isNamedNode(term) {\n  return !!term && term.termType === 'NamedNode';\n}\n\n// Tests whether the given term represents a blank node\nexport function isBlankNode(term) {\n  return !!term && term.termType === 'BlankNode';\n}\n\n// Tests whether the given term represents a literal\nexport function isLiteral(term) {\n  return !!term && term.termType === 'Literal';\n}\n\n// Tests whether the given term represents a variable\nexport function isVariable(term) {\n  return !!term && term.termType === 'Variable';\n}\n\n// Tests whether the given term represents the default graph\nexport function isDefaultGraph(term) {\n  return !!term && term.termType === 'DefaultGraph';\n}\n\n// Tests whether the given quad is in the default graph\nexport function inDefaultGraph(quad) {\n  return isDefaultGraph(quad.graph);\n}\n\n// Creates a function that prepends the given IRI to a local name\nexport function prefix(iri, factory) {\n  return prefixes({ '': iri }, factory)('');\n}\n\n// Creates a function that allows registering and expanding prefixes\nexport function prefixes(defaultPrefixes, factory) {\n  // Add all of the default prefixes\n  var prefixes = Object.create(null);\n  for (var prefix in defaultPrefixes)\n    processPrefix(prefix, defaultPrefixes[prefix]);\n  // Set the default factory if none was specified\n  factory = factory || N3DataFactory;\n\n  // Registers a new prefix (if an IRI was specified)\n  // or retrieves a function that expands an existing prefix (if no IRI was specified)\n  function processPrefix(prefix, iri) {\n    // Create a new prefix if an IRI is specified or the prefix doesn't exist\n    if (typeof iri === 'string') {\n      // Create a function that expands the prefix\n      var cache = Object.create(null);\n      prefixes[prefix] = function (local) {\n        return cache[local] || (cache[local] = factory.namedNode(iri + local));\n      };\n    }\n    else if (!(prefix in prefixes)) {\n      throw new Error('Unknown prefix: ' + prefix);\n    }\n    return prefixes[prefix];\n  }\n  return processPrefix;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar MetadataReader = (function () {\n    function MetadataReader() {\n    }\n    MetadataReader.prototype.getConstructorMetadata = function (constructorFunc) {\n        var compilerGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.PARAM_TYPES, constructorFunc);\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED, constructorFunc);\n        return {\n            compilerGeneratedMetadata: compilerGeneratedMetadata,\n            userGeneratedMetadata: userGeneratedMetadata || {}\n        };\n    };\n    MetadataReader.prototype.getPropertiesMetadata = function (constructorFunc) {\n        var userGeneratedMetadata = Reflect.getMetadata(METADATA_KEY.TAGGED_PROP, constructorFunc) || [];\n        return userGeneratedMetadata;\n    };\n    return MetadataReader;\n}());\nexports.MetadataReader = MetadataReader;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nfunction isStackOverflowExeption(error) {\n    return (error instanceof RangeError ||\n        error.message === ERROR_MSGS.STACK_OVERFLOW);\n}\nexports.isStackOverflowExeption = isStackOverflowExeption;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nvar LazyServiceIdentifer = (function () {\n    function LazyServiceIdentifer(cb) {\n        this._cb = cb;\n    }\n    LazyServiceIdentifer.prototype.unwrap = function () {\n        return this._cb();\n    };\n    return LazyServiceIdentifer;\n}());\nexports.LazyServiceIdentifer = LazyServiceIdentifer;\nfunction inject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        if (serviceIdentifier === undefined) {\n            throw new Error(error_msgs_1.UNDEFINED_INJECT_ANNOTATION(target.name));\n        }\n        var metadata = new metadata_1.Metadata(METADATA_KEY.INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.inject = inject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar id_1 = require(\"../utils/id\");\nvar metadata_1 = require(\"./metadata\");\nvar queryable_string_1 = require(\"./queryable_string\");\nvar Target = (function () {\n    function Target(type, name, serviceIdentifier, namedOrTagged) {\n        this.id = id_1.id();\n        this.type = type;\n        this.serviceIdentifier = serviceIdentifier;\n        this.name = new queryable_string_1.QueryableString(name || \"\");\n        this.metadata = new Array();\n        var metadataItem = null;\n        if (typeof namedOrTagged === \"string\") {\n            metadataItem = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, namedOrTagged);\n        }\n        else if (namedOrTagged instanceof metadata_1.Metadata) {\n            metadataItem = namedOrTagged;\n        }\n        if (metadataItem !== null) {\n            this.metadata.push(metadataItem);\n        }\n    }\n    Target.prototype.hasTag = function (key) {\n        for (var _i = 0, _a = this.metadata; _i < _a.length; _i++) {\n            var m = _a[_i];\n            if (m.key === key) {\n                return true;\n            }\n        }\n        return false;\n    };\n    Target.prototype.isArray = function () {\n        return this.hasTag(METADATA_KEY.MULTI_INJECT_TAG);\n    };\n    Target.prototype.matchesArray = function (name) {\n        return this.matchesTag(METADATA_KEY.MULTI_INJECT_TAG)(name);\n    };\n    Target.prototype.isNamed = function () {\n        return this.hasTag(METADATA_KEY.NAMED_TAG);\n    };\n    Target.prototype.isTagged = function () {\n        return this.metadata.some(function (m) {\n            return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                (m.key !== METADATA_KEY.NAME_TAG) &&\n                (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                (m.key !== METADATA_KEY.NAMED_TAG);\n        });\n    };\n    Target.prototype.isOptional = function () {\n        return this.matchesTag(METADATA_KEY.OPTIONAL_TAG)(true);\n    };\n    Target.prototype.getNamedTag = function () {\n        if (this.isNamed()) {\n            return this.metadata.filter(function (m) { return m.key === METADATA_KEY.NAMED_TAG; })[0];\n        }\n        return null;\n    };\n    Target.prototype.getCustomTags = function () {\n        if (this.isTagged()) {\n            return this.metadata.filter(function (m) {\n                return (m.key !== METADATA_KEY.INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.MULTI_INJECT_TAG) &&\n                    (m.key !== METADATA_KEY.NAME_TAG) &&\n                    (m.key !== METADATA_KEY.UNMANAGED_TAG) &&\n                    (m.key !== METADATA_KEY.NAMED_TAG);\n            });\n        }\n        return null;\n    };\n    Target.prototype.matchesNamedTag = function (name) {\n        return this.matchesTag(METADATA_KEY.NAMED_TAG)(name);\n    };\n    Target.prototype.matchesTag = function (key) {\n        var _this = this;\n        return function (value) {\n            for (var _i = 0, _a = _this.metadata; _i < _a.length; _i++) {\n                var m = _a[_i];\n                if (m.key === key && m.value === value) {\n                    return true;\n                }\n            }\n            return false;\n        };\n    };\n    return Target;\n}());\nexports.Target = Target;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingWhenOnSyntax = (function () {\n    function BindingWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n    }\n    BindingWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingWhenOnSyntax;\n}());\nexports.BindingWhenOnSyntax = BindingWhenOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar traverseAncerstors = function (request, constraint) {\n    var parent = request.parentRequest;\n    if (parent !== null) {\n        return constraint(parent) ? true : traverseAncerstors(parent, constraint);\n    }\n    else {\n        return false;\n    }\n};\nexports.traverseAncerstors = traverseAncerstors;\nvar taggedConstraint = function (key) { return function (value) {\n    var constraint = function (request) {\n        return request !== null && request.target !== null && request.target.matchesTag(key)(value);\n    };\n    constraint.metaData = new metadata_1.Metadata(key, value);\n    return constraint;\n}; };\nexports.taggedConstraint = taggedConstraint;\nvar namedConstraint = taggedConstraint(METADATA_KEY.NAMED_TAG);\nexports.namedConstraint = namedConstraint;\nvar typeConstraint = function (type) { return function (request) {\n    var binding = null;\n    if (request !== null) {\n        binding = request.bindings[0];\n        if (typeof type === \"string\") {\n            var serviceIdentifier = binding.serviceIdentifier;\n            return serviceIdentifier === type;\n        }\n        else {\n            var constructor = request.bindings[0].implementationType;\n            return type === constructor;\n        }\n    }\n    return false;\n}; };\nexports.typeConstraint = typeConstraint;\n","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _isNativeReflectConstruct() {\n  if (typeof Reflect === \"undefined\" || !Reflect.construct) return false;\n  if (Reflect.construct.sham) return false;\n  if (typeof Proxy === \"function\") return true;\n\n  try {\n    Date.prototype.toString.call(Reflect.construct(Date, [], function () {}));\n    return true;\n  } catch (e) {\n    return false;\n  }\n}\n\nmodule.exports = _isNativeReflectConstruct;","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst TileCoordinate_1 = __importDefault(require(\"./TileCoordinate\"));\nfunction tile_to_lat(coordinate) {\n    // from https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames\n    const n = Math.PI - 2 * Math.PI * coordinate.y / Math.pow(2, coordinate.zoom);\n    return (180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n))));\n}\nfunction tile_to_long(coordinate) {\n    // from https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames\n    return (coordinate.x / Math.pow(2, coordinate.zoom) * 360 - 180);\n}\nclass RoutableTile {\n    constructor(id, nodes, ways) {\n        this.id = id;\n        this.nodes = nodes;\n        this.ways = ways;\n    }\n    getWays() {\n        return this.ways;\n    }\n    getNodes() {\n        return this.nodes;\n    }\n    contains(location) {\n        const top = tile_to_lat(this.coordinate);\n        const left = tile_to_long(this.coordinate);\n        const next = new TileCoordinate_1.default(this.coordinate.zoom, this.coordinate.x + 1, this.coordinate.y + 1);\n        const bottom = tile_to_lat(next);\n        const right = tile_to_long(next);\n        if (location.latitude > top || location.latitude < bottom) {\n            return false;\n        }\n        else if (location.longitude < left || location.longitude > right) {\n            return false;\n        }\n        return true;\n    }\n}\nexports.RoutableTile = RoutableTile;\n//# sourceMappingURL=RoutableTile.js.map","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst CatalogFetcherDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogFetcherDefault\"));\nconst CatalogProviderDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogProviderDefault\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst FootpathsProviderDefault_1 = __importDefault(require(\"../fetcher/footpaths/FootpathsProviderDefault\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherRaw_1 = __importDefault(require(\"../fetcher/stops/StopsFetcherRaw\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderDefault\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst MixedDijkstra_1 = __importDefault(require(\"../pathfinding/mixed-dijkstra/MixedDijkstra\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAEarliestArrival_1 = __importDefault(require(\"../planner/public-transport/CSAEarliestArrival\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfinding_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfinding\"));\nconst ReachableStopsFinderDelaunay_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderDelaunay\"));\nconst ReachableStopsFinderOnlySelf_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderOnlySelf\"));\nconst QueryRunnerExponential_1 = __importDefault(require(\"../query-runner/exponential/QueryRunnerExponential\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerExponential_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAEarliestArrival_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner).to(RoadPlannerPathfinding_1.default);\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(MixedDijkstra_1.default).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.FootpathsProvider).to(FootpathsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderOnlySelf_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.CatalogFetcher).to(CatalogFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogProvider).to(CatalogProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherRaw_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=road_planner.js.map","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar getOwnPropertyDescriptors = Object.getOwnPropertyDescriptors ||\n  function getOwnPropertyDescriptors(obj) {\n    var keys = Object.keys(obj);\n    var descriptors = {};\n    for (var i = 0; i < keys.length; i++) {\n      descriptors[keys[i]] = Object.getOwnPropertyDescriptor(obj, keys[i]);\n    }\n    return descriptors;\n  };\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  if (typeof process !== 'undefined' && process.noDeprecation === true) {\n    return fn;\n  }\n\n  // Allow for deprecating things in the process of starting up.\n  if (typeof process === 'undefined') {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nvar kCustomPromisifiedSymbol = typeof Symbol !== 'undefined' ? Symbol('util.promisify.custom') : undefined;\n\nexports.promisify = function promisify(original) {\n  if (typeof original !== 'function')\n    throw new TypeError('The \"original\" argument must be of type Function');\n\n  if (kCustomPromisifiedSymbol && original[kCustomPromisifiedSymbol]) {\n    var fn = original[kCustomPromisifiedSymbol];\n    if (typeof fn !== 'function') {\n      throw new TypeError('The \"util.promisify.custom\" argument must be of type Function');\n    }\n    Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n      value: fn, enumerable: false, writable: false, configurable: true\n    });\n    return fn;\n  }\n\n  function fn() {\n    var promiseResolve, promiseReject;\n    var promise = new Promise(function (resolve, reject) {\n      promiseResolve = resolve;\n      promiseReject = reject;\n    });\n\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n    args.push(function (err, value) {\n      if (err) {\n        promiseReject(err);\n      } else {\n        promiseResolve(value);\n      }\n    });\n\n    try {\n      original.apply(this, args);\n    } catch (err) {\n      promiseReject(err);\n    }\n\n    return promise;\n  }\n\n  Object.setPrototypeOf(fn, Object.getPrototypeOf(original));\n\n  if (kCustomPromisifiedSymbol) Object.defineProperty(fn, kCustomPromisifiedSymbol, {\n    value: fn, enumerable: false, writable: false, configurable: true\n  });\n  return Object.defineProperties(\n    fn,\n    getOwnPropertyDescriptors(original)\n  );\n}\n\nexports.promisify.custom = kCustomPromisifiedSymbol\n\nfunction callbackifyOnRejected(reason, cb) {\n  // `!reason` guard inspired by bluebird (Ref: https://goo.gl/t5IS6M).\n  // Because `null` is a special error value in callbacks which means \"no error\n  // occurred\", we error-wrap so the callback consumer can distinguish between\n  // \"the promise rejected with null\" or \"the promise fulfilled with undefined\".\n  if (!reason) {\n    var newReason = new Error('Promise was rejected with a falsy value');\n    newReason.reason = reason;\n    reason = newReason;\n  }\n  return cb(reason);\n}\n\nfunction callbackify(original) {\n  if (typeof original !== 'function') {\n    throw new TypeError('The \"original\" argument must be of type Function');\n  }\n\n  // We DO NOT return the promise as it gives the user a false sense that\n  // the promise is actually somehow related to the callback's execution\n  // and that the callback throwing will reject the promise.\n  function callbackified() {\n    var args = [];\n    for (var i = 0; i < arguments.length; i++) {\n      args.push(arguments[i]);\n    }\n\n    var maybeCb = args.pop();\n    if (typeof maybeCb !== 'function') {\n      throw new TypeError('The last argument must be of type Function');\n    }\n    var self = this;\n    var cb = function() {\n      return maybeCb.apply(self, arguments);\n    };\n    // In true node style we process the callback on `nextTick` with all the\n    // implications (stack, `uncaughtException`, `async_hooks`)\n    original.apply(this, args)\n      .then(function(ret) { process.nextTick(cb, null, ret) },\n            function(rej) { process.nextTick(callbackifyOnRejected, rej, cb) });\n  }\n\n  Object.setPrototypeOf(callbackified, Object.getPrototypeOf(original));\n  Object.defineProperties(callbackified,\n                          getOwnPropertyDescriptors(original));\n  return callbackified;\n}\nexports.callbackify = callbackify;\n","// vim:ts=4:sts=4:sw=4:\n/*!\n *\n * Copyright 2009-2017 Kris Kowal under the terms of the MIT\n * license found at https://github.com/kriskowal/q/blob/v1/LICENSE\n *\n * With parts by Tyler Close\n * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found\n * at http://www.opensource.org/licenses/mit-license.html\n * Forked at ref_send.js version: 2009-05-11\n *\n * With parts by Mark Miller\n * Copyright (C) 2011 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n *\n */\n\n(function (definition) {\n    \"use strict\";\n\n    // This file will function properly as a <script> tag, or a module\n    // using CommonJS and NodeJS or RequireJS module formats.  In\n    // Common/Node/RequireJS, the module exports the Q API and when\n    // executed as a simple <script>, it creates a Q global instead.\n\n    // Montage Require\n    if (typeof bootstrap === \"function\") {\n        bootstrap(\"promise\", definition);\n\n    // CommonJS\n    } else if (typeof exports === \"object\" && typeof module === \"object\") {\n        module.exports = definition();\n\n    // RequireJS\n    } else if (typeof define === \"function\" && define.amd) {\n        define(definition);\n\n    // SES (Secure EcmaScript)\n    } else if (typeof ses !== \"undefined\") {\n        if (!ses.ok()) {\n            return;\n        } else {\n            ses.makeQ = definition;\n        }\n\n    // <script>\n    } else if (typeof window !== \"undefined\" || typeof self !== \"undefined\") {\n        // Prefer window over self for add-on scripts. Use self for\n        // non-windowed contexts.\n        var global = typeof window !== \"undefined\" ? window : self;\n\n        // Get the `window` object, save the previous Q global\n        // and initialize Q as a global.\n        var previousQ = global.Q;\n        global.Q = definition();\n\n        // Add a noConflict function so Q can be removed from the\n        // global namespace.\n        global.Q.noConflict = function () {\n            global.Q = previousQ;\n            return this;\n        };\n\n    } else {\n        throw new Error(\"This environment was not anticipated by Q. Please file a bug.\");\n    }\n\n})(function () {\n\"use strict\";\n\nvar hasStacks = false;\ntry {\n    throw new Error();\n} catch (e) {\n    hasStacks = !!e.stack;\n}\n\n// All code after this point will be filtered from stack traces reported\n// by Q.\nvar qStartingLine = captureLine();\nvar qFileName;\n\n// shims\n\n// used for fallback in \"allResolved\"\nvar noop = function () {};\n\n// Use the fastest possible means to execute a task in a future turn\n// of the event loop.\nvar nextTick =(function () {\n    // linked list of tasks (single, with head node)\n    var head = {task: void 0, next: null};\n    var tail = head;\n    var flushing = false;\n    var requestTick = void 0;\n    var isNodeJS = false;\n    // queue for late tasks, used by unhandled rejection tracking\n    var laterQueue = [];\n\n    function flush() {\n        /* jshint loopfunc: true */\n        var task, domain;\n\n        while (head.next) {\n            head = head.next;\n            task = head.task;\n            head.task = void 0;\n            domain = head.domain;\n\n            if (domain) {\n                head.domain = void 0;\n                domain.enter();\n            }\n            runSingle(task, domain);\n\n        }\n        while (laterQueue.length) {\n            task = laterQueue.pop();\n            runSingle(task);\n        }\n        flushing = false;\n    }\n    // runs a single function in the async queue\n    function runSingle(task, domain) {\n        try {\n            task();\n\n        } catch (e) {\n            if (isNodeJS) {\n                // In node, uncaught exceptions are considered fatal errors.\n                // Re-throw them synchronously to interrupt flushing!\n\n                // Ensure continuation if the uncaught exception is suppressed\n                // listening \"uncaughtException\" events (as domains does).\n                // Continue in next event to avoid tick recursion.\n                if (domain) {\n                    domain.exit();\n                }\n                setTimeout(flush, 0);\n                if (domain) {\n                    domain.enter();\n                }\n\n                throw e;\n\n            } else {\n                // In browsers, uncaught exceptions are not fatal.\n                // Re-throw them asynchronously to avoid slow-downs.\n                setTimeout(function () {\n                    throw e;\n                }, 0);\n            }\n        }\n\n        if (domain) {\n            domain.exit();\n        }\n    }\n\n    nextTick = function (task) {\n        tail = tail.next = {\n            task: task,\n            domain: isNodeJS && process.domain,\n            next: null\n        };\n\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n\n    if (typeof process === \"object\" &&\n        process.toString() === \"[object process]\" && process.nextTick) {\n        // Ensure Q is in a real Node environment, with a `process.nextTick`.\n        // To see through fake Node environments:\n        // * Mocha test runner - exposes a `process` global without a `nextTick`\n        // * Browserify - exposes a `process.nexTick` function that uses\n        //   `setTimeout`. In this case `setImmediate` is preferred because\n        //    it is faster. Browserify's `process.toString()` yields\n        //   \"[object Object]\", while in a real Node environment\n        //   `process.toString()` yields \"[object process]\".\n        isNodeJS = true;\n\n        requestTick = function () {\n            process.nextTick(flush);\n        };\n\n    } else if (typeof setImmediate === \"function\") {\n        // In IE10, Node.js 0.9+, or https://github.com/NobleJS/setImmediate\n        if (typeof window !== \"undefined\") {\n            requestTick = setImmediate.bind(window, flush);\n        } else {\n            requestTick = function () {\n                setImmediate(flush);\n            };\n        }\n\n    } else if (typeof MessageChannel !== \"undefined\") {\n        // modern browsers\n        // http://www.nonblocking.io/2011/06/windownexttick.html\n        var channel = new MessageChannel();\n        // At least Safari Version 6.0.5 (8536.30.1) intermittently cannot create\n        // working message ports the first time a page loads.\n        channel.port1.onmessage = function () {\n            requestTick = requestPortTick;\n            channel.port1.onmessage = flush;\n            flush();\n        };\n        var requestPortTick = function () {\n            // Opera requires us to provide a message payload, regardless of\n            // whether we use it.\n            channel.port2.postMessage(0);\n        };\n        requestTick = function () {\n            setTimeout(flush, 0);\n            requestPortTick();\n        };\n\n    } else {\n        // old browsers\n        requestTick = function () {\n            setTimeout(flush, 0);\n        };\n    }\n    // runs a task after all other tasks have been run\n    // this is useful for unhandled rejection tracking that needs to happen\n    // after all `then`d tasks have been run.\n    nextTick.runAfter = function (task) {\n        laterQueue.push(task);\n        if (!flushing) {\n            flushing = true;\n            requestTick();\n        }\n    };\n    return nextTick;\n})();\n\n// Attempt to make generics safe in the face of downstream\n// modifications.\n// There is no situation where this is necessary.\n// If you need a security guarantee, these primordials need to be\n// deeply frozen anyway, and if you dont need a security guarantee,\n// this is just plain paranoid.\n// However, this **might** have the nice side-effect of reducing the size of\n// the minified code by reducing x.call() to merely x()\n// See Mark Millers explanation of what this does.\n// http://wiki.ecmascript.org/doku.php?id=conventions:safe_meta_programming\nvar call = Function.call;\nfunction uncurryThis(f) {\n    return function () {\n        return call.apply(f, arguments);\n    };\n}\n// This is equivalent, but slower:\n// uncurryThis = Function_bind.bind(Function_bind.call);\n// http://jsperf.com/uncurrythis\n\nvar array_slice = uncurryThis(Array.prototype.slice);\n\nvar array_reduce = uncurryThis(\n    Array.prototype.reduce || function (callback, basis) {\n        var index = 0,\n            length = this.length;\n        // concerning the initial value, if one is not provided\n        if (arguments.length === 1) {\n            // seek to the first value in the array, accounting\n            // for the possibility that is is a sparse array\n            do {\n                if (index in this) {\n                    basis = this[index++];\n                    break;\n                }\n                if (++index >= length) {\n                    throw new TypeError();\n                }\n            } while (1);\n        }\n        // reduce\n        for (; index < length; index++) {\n            // account for the possibility that the array is sparse\n            if (index in this) {\n                basis = callback(basis, this[index], index);\n            }\n        }\n        return basis;\n    }\n);\n\nvar array_indexOf = uncurryThis(\n    Array.prototype.indexOf || function (value) {\n        // not a very good shim, but good enough for our one use of it\n        for (var i = 0; i < this.length; i++) {\n            if (this[i] === value) {\n                return i;\n            }\n        }\n        return -1;\n    }\n);\n\nvar array_map = uncurryThis(\n    Array.prototype.map || function (callback, thisp) {\n        var self = this;\n        var collect = [];\n        array_reduce(self, function (undefined, value, index) {\n            collect.push(callback.call(thisp, value, index, self));\n        }, void 0);\n        return collect;\n    }\n);\n\nvar object_create = Object.create || function (prototype) {\n    function Type() { }\n    Type.prototype = prototype;\n    return new Type();\n};\n\nvar object_defineProperty = Object.defineProperty || function (obj, prop, descriptor) {\n    obj[prop] = descriptor.value;\n    return obj;\n};\n\nvar object_hasOwnProperty = uncurryThis(Object.prototype.hasOwnProperty);\n\nvar object_keys = Object.keys || function (object) {\n    var keys = [];\n    for (var key in object) {\n        if (object_hasOwnProperty(object, key)) {\n            keys.push(key);\n        }\n    }\n    return keys;\n};\n\nvar object_toString = uncurryThis(Object.prototype.toString);\n\nfunction isObject(value) {\n    return value === Object(value);\n}\n\n// generator related shims\n\n// FIXME: Remove this function once ES6 generators are in SpiderMonkey.\nfunction isStopIteration(exception) {\n    return (\n        object_toString(exception) === \"[object StopIteration]\" ||\n        exception instanceof QReturnValue\n    );\n}\n\n// FIXME: Remove this helper and Q.return once ES6 generators are in\n// SpiderMonkey.\nvar QReturnValue;\nif (typeof ReturnValue !== \"undefined\") {\n    QReturnValue = ReturnValue;\n} else {\n    QReturnValue = function (value) {\n        this.value = value;\n    };\n}\n\n// long stack traces\n\nvar STACK_JUMP_SEPARATOR = \"From previous event:\";\n\nfunction makeStackTraceLong(error, promise) {\n    // If possible, transform the error stack trace by removing Node and Q\n    // cruft, then concatenating with the stack trace of `promise`. See #57.\n    if (hasStacks &&\n        promise.stack &&\n        typeof error === \"object\" &&\n        error !== null &&\n        error.stack\n    ) {\n        var stacks = [];\n        for (var p = promise; !!p; p = p.source) {\n            if (p.stack && (!error.__minimumStackCounter__ || error.__minimumStackCounter__ > p.stackCounter)) {\n                object_defineProperty(error, \"__minimumStackCounter__\", {value: p.stackCounter, configurable: true});\n                stacks.unshift(p.stack);\n            }\n        }\n        stacks.unshift(error.stack);\n\n        var concatedStacks = stacks.join(\"\\n\" + STACK_JUMP_SEPARATOR + \"\\n\");\n        var stack = filterStackString(concatedStacks);\n        object_defineProperty(error, \"stack\", {value: stack, configurable: true});\n    }\n}\n\nfunction filterStackString(stackString) {\n    var lines = stackString.split(\"\\n\");\n    var desiredLines = [];\n    for (var i = 0; i < lines.length; ++i) {\n        var line = lines[i];\n\n        if (!isInternalFrame(line) && !isNodeFrame(line) && line) {\n            desiredLines.push(line);\n        }\n    }\n    return desiredLines.join(\"\\n\");\n}\n\nfunction isNodeFrame(stackLine) {\n    return stackLine.indexOf(\"(module.js:\") !== -1 ||\n           stackLine.indexOf(\"(node.js:\") !== -1;\n}\n\nfunction getFileNameAndLineNumber(stackLine) {\n    // Named functions: \"at functionName (filename:lineNumber:columnNumber)\"\n    // In IE10 function name can have spaces (\"Anonymous function\") O_o\n    var attempt1 = /at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(stackLine);\n    if (attempt1) {\n        return [attempt1[1], Number(attempt1[2])];\n    }\n\n    // Anonymous functions: \"at filename:lineNumber:columnNumber\"\n    var attempt2 = /at ([^ ]+):(\\d+):(?:\\d+)$/.exec(stackLine);\n    if (attempt2) {\n        return [attempt2[1], Number(attempt2[2])];\n    }\n\n    // Firefox style: \"function@filename:lineNumber or @filename:lineNumber\"\n    var attempt3 = /.*@(.+):(\\d+)$/.exec(stackLine);\n    if (attempt3) {\n        return [attempt3[1], Number(attempt3[2])];\n    }\n}\n\nfunction isInternalFrame(stackLine) {\n    var fileNameAndLineNumber = getFileNameAndLineNumber(stackLine);\n\n    if (!fileNameAndLineNumber) {\n        return false;\n    }\n\n    var fileName = fileNameAndLineNumber[0];\n    var lineNumber = fileNameAndLineNumber[1];\n\n    return fileName === qFileName &&\n        lineNumber >= qStartingLine &&\n        lineNumber <= qEndingLine;\n}\n\n// discover own file name and line number range for filtering stack\n// traces\nfunction captureLine() {\n    if (!hasStacks) {\n        return;\n    }\n\n    try {\n        throw new Error();\n    } catch (e) {\n        var lines = e.stack.split(\"\\n\");\n        var firstLine = lines[0].indexOf(\"@\") > 0 ? lines[1] : lines[2];\n        var fileNameAndLineNumber = getFileNameAndLineNumber(firstLine);\n        if (!fileNameAndLineNumber) {\n            return;\n        }\n\n        qFileName = fileNameAndLineNumber[0];\n        return fileNameAndLineNumber[1];\n    }\n}\n\nfunction deprecate(callback, name, alternative) {\n    return function () {\n        if (typeof console !== \"undefined\" &&\n            typeof console.warn === \"function\") {\n            console.warn(name + \" is deprecated, use \" + alternative +\n                         \" instead.\", new Error(\"\").stack);\n        }\n        return callback.apply(callback, arguments);\n    };\n}\n\n// end of shims\n// beginning of real work\n\n/**\n * Constructs a promise for an immediate reference, passes promises through, or\n * coerces promises from different systems.\n * @param value immediate reference or promise\n */\nfunction Q(value) {\n    // If the object is already a Promise, return it directly.  This enables\n    // the resolve function to both be used to created references from objects,\n    // but to tolerably coerce non-promises to promises.\n    if (value instanceof Promise) {\n        return value;\n    }\n\n    // assimilate thenables\n    if (isPromiseAlike(value)) {\n        return coerce(value);\n    } else {\n        return fulfill(value);\n    }\n}\nQ.resolve = Q;\n\n/**\n * Performs a task in a future turn of the event loop.\n * @param {Function} task\n */\nQ.nextTick = nextTick;\n\n/**\n * Controls whether or not long stack traces will be on\n */\nQ.longStackSupport = false;\n\n/**\n * The counter is used to determine the stopping point for building\n * long stack traces. In makeStackTraceLong we walk backwards through\n * the linked list of promises, only stacks which were created before\n * the rejection are concatenated.\n */\nvar longStackCounter = 1;\n\n// enable long stacks if Q_DEBUG is set\nif (typeof process === \"object\" && process && process.env && process.env.Q_DEBUG) {\n    Q.longStackSupport = true;\n}\n\n/**\n * Constructs a {promise, resolve, reject} object.\n *\n * `resolve` is a callback to invoke with a more resolved value for the\n * promise. To fulfill the promise, invoke `resolve` with any value that is\n * not a thenable. To reject the promise, invoke `resolve` with a rejected\n * thenable, or invoke `reject` with the reason directly. To resolve the\n * promise to another thenable, thus putting it in the same state, invoke\n * `resolve` with that other thenable.\n */\nQ.defer = defer;\nfunction defer() {\n    // if \"messages\" is an \"Array\", that indicates that the promise has not yet\n    // been resolved.  If it is \"undefined\", it has been resolved.  Each\n    // element of the messages array is itself an array of complete arguments to\n    // forward to the resolved promise.  We coerce the resolution value to a\n    // promise using the `resolve` function because it handles both fully\n    // non-thenable values and other thenables gracefully.\n    var messages = [], progressListeners = [], resolvedPromise;\n\n    var deferred = object_create(defer.prototype);\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, operands) {\n        var args = array_slice(arguments);\n        if (messages) {\n            messages.push(args);\n            if (op === \"when\" && operands[1]) { // progress operand\n                progressListeners.push(operands[1]);\n            }\n        } else {\n            Q.nextTick(function () {\n                resolvedPromise.promiseDispatch.apply(resolvedPromise, args);\n            });\n        }\n    };\n\n    // XXX deprecated\n    promise.valueOf = function () {\n        if (messages) {\n            return promise;\n        }\n        var nearerValue = nearer(resolvedPromise);\n        if (isPromise(nearerValue)) {\n            resolvedPromise = nearerValue; // shorten chain\n        }\n        return nearerValue;\n    };\n\n    promise.inspect = function () {\n        if (!resolvedPromise) {\n            return { state: \"pending\" };\n        }\n        return resolvedPromise.inspect();\n    };\n\n    if (Q.longStackSupport && hasStacks) {\n        try {\n            throw new Error();\n        } catch (e) {\n            // NOTE: don't try to use `Error.captureStackTrace` or transfer the\n            // accessor around; that causes memory leaks as per GH-111. Just\n            // reify the stack trace as a string ASAP.\n            //\n            // At the same time, cut off the first line; it's always just\n            // \"[object Promise]\\n\", as per the `toString`.\n            promise.stack = e.stack.substring(e.stack.indexOf(\"\\n\") + 1);\n            promise.stackCounter = longStackCounter++;\n        }\n    }\n\n    // NOTE: we do the checks for `resolvedPromise` in each method, instead of\n    // consolidating them into `become`, since otherwise we'd create new\n    // promises with the lines `become(whatever(value))`. See e.g. GH-252.\n\n    function become(newPromise) {\n        resolvedPromise = newPromise;\n\n        if (Q.longStackSupport && hasStacks) {\n            // Only hold a reference to the new promise if long stacks\n            // are enabled to reduce memory usage\n            promise.source = newPromise;\n        }\n\n        array_reduce(messages, function (undefined, message) {\n            Q.nextTick(function () {\n                newPromise.promiseDispatch.apply(newPromise, message);\n            });\n        }, void 0);\n\n        messages = void 0;\n        progressListeners = void 0;\n    }\n\n    deferred.promise = promise;\n    deferred.resolve = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(Q(value));\n    };\n\n    deferred.fulfill = function (value) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(fulfill(value));\n    };\n    deferred.reject = function (reason) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        become(reject(reason));\n    };\n    deferred.notify = function (progress) {\n        if (resolvedPromise) {\n            return;\n        }\n\n        array_reduce(progressListeners, function (undefined, progressListener) {\n            Q.nextTick(function () {\n                progressListener(progress);\n            });\n        }, void 0);\n    };\n\n    return deferred;\n}\n\n/**\n * Creates a Node-style callback that will resolve or reject the deferred\n * promise.\n * @returns a nodeback\n */\ndefer.prototype.makeNodeResolver = function () {\n    var self = this;\n    return function (error, value) {\n        if (error) {\n            self.reject(error);\n        } else if (arguments.length > 2) {\n            self.resolve(array_slice(arguments, 1));\n        } else {\n            self.resolve(value);\n        }\n    };\n};\n\n/**\n * @param resolver {Function} a function that returns nothing and accepts\n * the resolve, reject, and notify functions for a deferred.\n * @returns a promise that may be resolved with the given resolve and reject\n * functions, or rejected by a thrown exception in resolver\n */\nQ.Promise = promise; // ES6\nQ.promise = promise;\nfunction promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"resolver must be a function.\");\n    }\n    var deferred = defer();\n    try {\n        resolver(deferred.resolve, deferred.reject, deferred.notify);\n    } catch (reason) {\n        deferred.reject(reason);\n    }\n    return deferred.promise;\n}\n\npromise.race = race; // ES6\npromise.all = all; // ES6\npromise.reject = reject; // ES6\npromise.resolve = Q; // ES6\n\n// XXX experimental.  This method is a way to denote that a local value is\n// serializable and should be immediately dispatched to a remote upon request,\n// instead of passing a reference.\nQ.passByCopy = function (object) {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return object;\n};\n\nPromise.prototype.passByCopy = function () {\n    //freeze(object);\n    //passByCopies.set(object, true);\n    return this;\n};\n\n/**\n * If two promises eventually fulfill to the same value, promises that value,\n * but otherwise rejects.\n * @param x {Any*}\n * @param y {Any*}\n * @returns {Any*} a promise for x and y if they are the same, but a rejection\n * otherwise.\n *\n */\nQ.join = function (x, y) {\n    return Q(x).join(y);\n};\n\nPromise.prototype.join = function (that) {\n    return Q([this, that]).spread(function (x, y) {\n        if (x === y) {\n            // TODO: \"===\" should be Object.is or equiv\n            return x;\n        } else {\n            throw new Error(\"Q can't join: not the same: \" + x + \" \" + y);\n        }\n    });\n};\n\n/**\n * Returns a promise for the first of an array of promises to become settled.\n * @param answers {Array[Any*]} promises to race\n * @returns {Any*} the first promise to be settled\n */\nQ.race = race;\nfunction race(answerPs) {\n    return promise(function (resolve, reject) {\n        // Switch to this once we can assume at least ES5\n        // answerPs.forEach(function (answerP) {\n        //     Q(answerP).then(resolve, reject);\n        // });\n        // Use this in the meantime\n        for (var i = 0, len = answerPs.length; i < len; i++) {\n            Q(answerPs[i]).then(resolve, reject);\n        }\n    });\n}\n\nPromise.prototype.race = function () {\n    return this.then(Q.race);\n};\n\n/**\n * Constructs a Promise with a promise descriptor object and optional fallback\n * function.  The descriptor contains methods like when(rejected), get(name),\n * set(name, value), post(name, args), and delete(name), which all\n * return either a value, a promise for a value, or a rejection.  The fallback\n * accepts the operation name, a resolver, and any further arguments that would\n * have been forwarded to the appropriate method above had a method been\n * provided with the proper name.  The API makes no guarantees about the nature\n * of the returned object, apart from that it is usable whereever promises are\n * bought and sold.\n */\nQ.makePromise = Promise;\nfunction Promise(descriptor, fallback, inspect) {\n    if (fallback === void 0) {\n        fallback = function (op) {\n            return reject(new Error(\n                \"Promise does not support operation: \" + op\n            ));\n        };\n    }\n    if (inspect === void 0) {\n        inspect = function () {\n            return {state: \"unknown\"};\n        };\n    }\n\n    var promise = object_create(Promise.prototype);\n\n    promise.promiseDispatch = function (resolve, op, args) {\n        var result;\n        try {\n            if (descriptor[op]) {\n                result = descriptor[op].apply(promise, args);\n            } else {\n                result = fallback.call(promise, op, args);\n            }\n        } catch (exception) {\n            result = reject(exception);\n        }\n        if (resolve) {\n            resolve(result);\n        }\n    };\n\n    promise.inspect = inspect;\n\n    // XXX deprecated `valueOf` and `exception` support\n    if (inspect) {\n        var inspected = inspect();\n        if (inspected.state === \"rejected\") {\n            promise.exception = inspected.reason;\n        }\n\n        promise.valueOf = function () {\n            var inspected = inspect();\n            if (inspected.state === \"pending\" ||\n                inspected.state === \"rejected\") {\n                return promise;\n            }\n            return inspected.value;\n        };\n    }\n\n    return promise;\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.then = function (fulfilled, rejected, progressed) {\n    var self = this;\n    var deferred = defer();\n    var done = false;   // ensure the untrusted promise makes at most a\n                        // single call to one of the callbacks\n\n    function _fulfilled(value) {\n        try {\n            return typeof fulfilled === \"function\" ? fulfilled(value) : value;\n        } catch (exception) {\n            return reject(exception);\n        }\n    }\n\n    function _rejected(exception) {\n        if (typeof rejected === \"function\") {\n            makeStackTraceLong(exception, self);\n            try {\n                return rejected(exception);\n            } catch (newException) {\n                return reject(newException);\n            }\n        }\n        return reject(exception);\n    }\n\n    function _progressed(value) {\n        return typeof progressed === \"function\" ? progressed(value) : value;\n    }\n\n    Q.nextTick(function () {\n        self.promiseDispatch(function (value) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_fulfilled(value));\n        }, \"when\", [function (exception) {\n            if (done) {\n                return;\n            }\n            done = true;\n\n            deferred.resolve(_rejected(exception));\n        }]);\n    });\n\n    // Progress propagator need to be attached in the current tick.\n    self.promiseDispatch(void 0, \"when\", [void 0, function (value) {\n        var newValue;\n        var threw = false;\n        try {\n            newValue = _progressed(value);\n        } catch (e) {\n            threw = true;\n            if (Q.onerror) {\n                Q.onerror(e);\n            } else {\n                throw e;\n            }\n        }\n\n        if (!threw) {\n            deferred.notify(newValue);\n        }\n    }]);\n\n    return deferred.promise;\n};\n\nQ.tap = function (promise, callback) {\n    return Q(promise).tap(callback);\n};\n\n/**\n * Works almost like \"finally\", but not called for rejections.\n * Original resolution value is passed through callback unaffected.\n * Callback may return a promise that will be awaited for.\n * @param {Function} callback\n * @returns {Q.Promise}\n * @example\n * doSomething()\n *   .then(...)\n *   .tap(console.log)\n *   .then(...);\n */\nPromise.prototype.tap = function (callback) {\n    callback = Q(callback);\n\n    return this.then(function (value) {\n        return callback.fcall(value).thenResolve(value);\n    });\n};\n\n/**\n * Registers an observer on a promise.\n *\n * Guarantees:\n *\n * 1. that fulfilled and rejected will be called only once.\n * 2. that either the fulfilled callback or the rejected callback will be\n *    called, but not both.\n * 3. that fulfilled and rejected will not be called in this turn.\n *\n * @param value      promise or immediate reference to observe\n * @param fulfilled  function to be called with the fulfilled value\n * @param rejected   function to be called with the rejection exception\n * @param progressed function to be called on any progress notifications\n * @return promise for the return value from the invoked callback\n */\nQ.when = when;\nfunction when(value, fulfilled, rejected, progressed) {\n    return Q(value).then(fulfilled, rejected, progressed);\n}\n\nPromise.prototype.thenResolve = function (value) {\n    return this.then(function () { return value; });\n};\n\nQ.thenResolve = function (promise, value) {\n    return Q(promise).thenResolve(value);\n};\n\nPromise.prototype.thenReject = function (reason) {\n    return this.then(function () { throw reason; });\n};\n\nQ.thenReject = function (promise, reason) {\n    return Q(promise).thenReject(reason);\n};\n\n/**\n * If an object is not a promise, it is as \"near\" as possible.\n * If a promise is rejected, it is as \"near\" as possible too.\n * If its a fulfilled promise, the fulfillment value is nearer.\n * If its a deferred promise and the deferred has been resolved, the\n * resolution is \"nearer\".\n * @param object\n * @returns most resolved (nearest) form of the object\n */\n\n// XXX should we re-do this?\nQ.nearer = nearer;\nfunction nearer(value) {\n    if (isPromise(value)) {\n        var inspected = value.inspect();\n        if (inspected.state === \"fulfilled\") {\n            return inspected.value;\n        }\n    }\n    return value;\n}\n\n/**\n * @returns whether the given object is a promise.\n * Otherwise it is a fulfilled value.\n */\nQ.isPromise = isPromise;\nfunction isPromise(object) {\n    return object instanceof Promise;\n}\n\nQ.isPromiseAlike = isPromiseAlike;\nfunction isPromiseAlike(object) {\n    return isObject(object) && typeof object.then === \"function\";\n}\n\n/**\n * @returns whether the given object is a pending promise, meaning not\n * fulfilled or rejected.\n */\nQ.isPending = isPending;\nfunction isPending(object) {\n    return isPromise(object) && object.inspect().state === \"pending\";\n}\n\nPromise.prototype.isPending = function () {\n    return this.inspect().state === \"pending\";\n};\n\n/**\n * @returns whether the given object is a value or fulfilled\n * promise.\n */\nQ.isFulfilled = isFulfilled;\nfunction isFulfilled(object) {\n    return !isPromise(object) || object.inspect().state === \"fulfilled\";\n}\n\nPromise.prototype.isFulfilled = function () {\n    return this.inspect().state === \"fulfilled\";\n};\n\n/**\n * @returns whether the given object is a rejected promise.\n */\nQ.isRejected = isRejected;\nfunction isRejected(object) {\n    return isPromise(object) && object.inspect().state === \"rejected\";\n}\n\nPromise.prototype.isRejected = function () {\n    return this.inspect().state === \"rejected\";\n};\n\n//// BEGIN UNHANDLED REJECTION TRACKING\n\n// This promise library consumes exceptions thrown in handlers so they can be\n// handled by a subsequent promise.  The exceptions get added to this array when\n// they are created, and removed when they are handled.  Note that in ES6 or\n// shimmed environments, this would naturally be a `Set`.\nvar unhandledReasons = [];\nvar unhandledRejections = [];\nvar reportedUnhandledRejections = [];\nvar trackUnhandledRejections = true;\n\nfunction resetUnhandledRejections() {\n    unhandledReasons.length = 0;\n    unhandledRejections.length = 0;\n\n    if (!trackUnhandledRejections) {\n        trackUnhandledRejections = true;\n    }\n}\n\nfunction trackRejection(promise, reason) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n    if (typeof process === \"object\" && typeof process.emit === \"function\") {\n        Q.nextTick.runAfter(function () {\n            if (array_indexOf(unhandledRejections, promise) !== -1) {\n                process.emit(\"unhandledRejection\", reason, promise);\n                reportedUnhandledRejections.push(promise);\n            }\n        });\n    }\n\n    unhandledRejections.push(promise);\n    if (reason && typeof reason.stack !== \"undefined\") {\n        unhandledReasons.push(reason.stack);\n    } else {\n        unhandledReasons.push(\"(no stack) \" + reason);\n    }\n}\n\nfunction untrackRejection(promise) {\n    if (!trackUnhandledRejections) {\n        return;\n    }\n\n    var at = array_indexOf(unhandledRejections, promise);\n    if (at !== -1) {\n        if (typeof process === \"object\" && typeof process.emit === \"function\") {\n            Q.nextTick.runAfter(function () {\n                var atReport = array_indexOf(reportedUnhandledRejections, promise);\n                if (atReport !== -1) {\n                    process.emit(\"rejectionHandled\", unhandledReasons[at], promise);\n                    reportedUnhandledRejections.splice(atReport, 1);\n                }\n            });\n        }\n        unhandledRejections.splice(at, 1);\n        unhandledReasons.splice(at, 1);\n    }\n}\n\nQ.resetUnhandledRejections = resetUnhandledRejections;\n\nQ.getUnhandledReasons = function () {\n    // Make a copy so that consumers can't interfere with our internal state.\n    return unhandledReasons.slice();\n};\n\nQ.stopUnhandledRejectionTracking = function () {\n    resetUnhandledRejections();\n    trackUnhandledRejections = false;\n};\n\nresetUnhandledRejections();\n\n//// END UNHANDLED REJECTION TRACKING\n\n/**\n * Constructs a rejected promise.\n * @param reason value describing the failure\n */\nQ.reject = reject;\nfunction reject(reason) {\n    var rejection = Promise({\n        \"when\": function (rejected) {\n            // note that the error has been handled\n            if (rejected) {\n                untrackRejection(this);\n            }\n            return rejected ? rejected(reason) : this;\n        }\n    }, function fallback() {\n        return this;\n    }, function inspect() {\n        return { state: \"rejected\", reason: reason };\n    });\n\n    // Note that the reason has not been handled.\n    trackRejection(rejection, reason);\n\n    return rejection;\n}\n\n/**\n * Constructs a fulfilled promise for an immediate reference.\n * @param value immediate reference\n */\nQ.fulfill = fulfill;\nfunction fulfill(value) {\n    return Promise({\n        \"when\": function () {\n            return value;\n        },\n        \"get\": function (name) {\n            return value[name];\n        },\n        \"set\": function (name, rhs) {\n            value[name] = rhs;\n        },\n        \"delete\": function (name) {\n            delete value[name];\n        },\n        \"post\": function (name, args) {\n            // Mark Miller proposes that post with no name should apply a\n            // promised function.\n            if (name === null || name === void 0) {\n                return value.apply(void 0, args);\n            } else {\n                return value[name].apply(value, args);\n            }\n        },\n        \"apply\": function (thisp, args) {\n            return value.apply(thisp, args);\n        },\n        \"keys\": function () {\n            return object_keys(value);\n        }\n    }, void 0, function inspect() {\n        return { state: \"fulfilled\", value: value };\n    });\n}\n\n/**\n * Converts thenables to Q promises.\n * @param promise thenable promise\n * @returns a Q promise\n */\nfunction coerce(promise) {\n    var deferred = defer();\n    Q.nextTick(function () {\n        try {\n            promise.then(deferred.resolve, deferred.reject, deferred.notify);\n        } catch (exception) {\n            deferred.reject(exception);\n        }\n    });\n    return deferred.promise;\n}\n\n/**\n * Annotates an object such that it will never be\n * transferred away from this process over any promise\n * communication channel.\n * @param object\n * @returns promise a wrapping of that object that\n * additionally responds to the \"isDef\" message\n * without a rejection.\n */\nQ.master = master;\nfunction master(object) {\n    return Promise({\n        \"isDef\": function () {}\n    }, function fallback(op, args) {\n        return dispatch(object, op, args);\n    }, function () {\n        return Q(object).inspect();\n    });\n}\n\n/**\n * Spreads the values of a promised array of arguments into the\n * fulfillment callback.\n * @param fulfilled callback that receives variadic arguments from the\n * promised array\n * @param rejected callback that receives the exception if the promise\n * is rejected.\n * @returns a promise for the return value or thrown exception of\n * either callback.\n */\nQ.spread = spread;\nfunction spread(value, fulfilled, rejected) {\n    return Q(value).spread(fulfilled, rejected);\n}\n\nPromise.prototype.spread = function (fulfilled, rejected) {\n    return this.all().then(function (array) {\n        return fulfilled.apply(void 0, array);\n    }, rejected);\n};\n\n/**\n * The async function is a decorator for generator functions, turning\n * them into asynchronous generators.  Although generators are only part\n * of the newest ECMAScript 6 drafts, this code does not cause syntax\n * errors in older engines.  This code should continue to work and will\n * in fact improve over time as the language improves.\n *\n * ES6 generators are currently part of V8 version 3.19 with the\n * --harmony-generators runtime flag enabled.  SpiderMonkey has had them\n * for longer, but under an older Python-inspired form.  This function\n * works on both kinds of generators.\n *\n * Decorates a generator function such that:\n *  - it may yield promises\n *  - execution will continue when that promise is fulfilled\n *  - the value of the yield expression will be the fulfilled value\n *  - it returns a promise for the return value (when the generator\n *    stops iterating)\n *  - the decorated function returns a promise for the return value\n *    of the generator or the first rejected promise among those\n *    yielded.\n *  - if an error is thrown in the generator, it propagates through\n *    every following yield until it is caught, or until it escapes\n *    the generator function altogether, and is translated into a\n *    rejection for the promise returned by the decorated generator.\n */\nQ.async = async;\nfunction async(makeGenerator) {\n    return function () {\n        // when verb is \"send\", arg is a value\n        // when verb is \"throw\", arg is an exception\n        function continuer(verb, arg) {\n            var result;\n\n            // Until V8 3.19 / Chromium 29 is released, SpiderMonkey is the only\n            // engine that has a deployed base of browsers that support generators.\n            // However, SM's generators use the Python-inspired semantics of\n            // outdated ES6 drafts.  We would like to support ES6, but we'd also\n            // like to make it possible to use generators in deployed browsers, so\n            // we also support Python-style generators.  At some point we can remove\n            // this block.\n\n            if (typeof StopIteration === \"undefined\") {\n                // ES6 Generators\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    return reject(exception);\n                }\n                if (result.done) {\n                    return Q(result.value);\n                } else {\n                    return when(result.value, callback, errback);\n                }\n            } else {\n                // SpiderMonkey Generators\n                // FIXME: Remove this case when SM does ES6 generators.\n                try {\n                    result = generator[verb](arg);\n                } catch (exception) {\n                    if (isStopIteration(exception)) {\n                        return Q(exception.value);\n                    } else {\n                        return reject(exception);\n                    }\n                }\n                return when(result, callback, errback);\n            }\n        }\n        var generator = makeGenerator.apply(this, arguments);\n        var callback = continuer.bind(continuer, \"next\");\n        var errback = continuer.bind(continuer, \"throw\");\n        return callback();\n    };\n}\n\n/**\n * The spawn function is a small wrapper around async that immediately\n * calls the generator and also ends the promise chain, so that any\n * unhandled errors are thrown instead of forwarded to the error\n * handler. This is useful because it's extremely common to run\n * generators at the top-level to work with libraries.\n */\nQ.spawn = spawn;\nfunction spawn(makeGenerator) {\n    Q.done(Q.async(makeGenerator)());\n}\n\n// FIXME: Remove this interface once ES6 generators are in SpiderMonkey.\n/**\n * Throws a ReturnValue exception to stop an asynchronous generator.\n *\n * This interface is a stop-gap measure to support generator return\n * values in older Firefox/SpiderMonkey.  In browsers that support ES6\n * generators like Chromium 29, just use \"return\" in your generator\n * functions.\n *\n * @param value the return value for the surrounding generator\n * @throws ReturnValue exception with the value.\n * @example\n * // ES6 style\n * Q.async(function* () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      return foo + bar;\n * })\n * // Older SpiderMonkey style\n * Q.async(function () {\n *      var foo = yield getFooPromise();\n *      var bar = yield getBarPromise();\n *      Q.return(foo + bar);\n * })\n */\nQ[\"return\"] = _return;\nfunction _return(value) {\n    throw new QReturnValue(value);\n}\n\n/**\n * The promised function decorator ensures that any promise arguments\n * are settled and passed as values (`this` is also settled and passed\n * as a value).  It will also ensure that the result of a function is\n * always a promise.\n *\n * @example\n * var add = Q.promised(function (a, b) {\n *     return a + b;\n * });\n * add(Q(a), Q(B));\n *\n * @param {function} callback The function to decorate\n * @returns {function} a function that has been decorated.\n */\nQ.promised = promised;\nfunction promised(callback) {\n    return function () {\n        return spread([this, all(arguments)], function (self, args) {\n            return callback.apply(self, args);\n        });\n    };\n}\n\n/**\n * sends a message to a value in a future turn\n * @param object* the recipient\n * @param op the name of the message operation, e.g., \"when\",\n * @param args further arguments to be forwarded to the operation\n * @returns result {Promise} a promise for the result of the operation\n */\nQ.dispatch = dispatch;\nfunction dispatch(object, op, args) {\n    return Q(object).dispatch(op, args);\n}\n\nPromise.prototype.dispatch = function (op, args) {\n    var self = this;\n    var deferred = defer();\n    Q.nextTick(function () {\n        self.promiseDispatch(deferred.resolve, op, args);\n    });\n    return deferred.promise;\n};\n\n/**\n * Gets the value of a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to get\n * @return promise for the property value\n */\nQ.get = function (object, key) {\n    return Q(object).dispatch(\"get\", [key]);\n};\n\nPromise.prototype.get = function (key) {\n    return this.dispatch(\"get\", [key]);\n};\n\n/**\n * Sets the value of a property in a future turn.\n * @param object    promise or immediate reference for object object\n * @param name      name of property to set\n * @param value     new value of property\n * @return promise for the return value\n */\nQ.set = function (object, key, value) {\n    return Q(object).dispatch(\"set\", [key, value]);\n};\n\nPromise.prototype.set = function (key, value) {\n    return this.dispatch(\"set\", [key, value]);\n};\n\n/**\n * Deletes a property in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of property to delete\n * @return promise for the return value\n */\nQ.del = // XXX legacy\nQ[\"delete\"] = function (object, key) {\n    return Q(object).dispatch(\"delete\", [key]);\n};\n\nPromise.prototype.del = // XXX legacy\nPromise.prototype[\"delete\"] = function (key) {\n    return this.dispatch(\"delete\", [key]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param value     a value to post, typically an array of\n *                  invocation arguments for promises that\n *                  are ultimately backed with `resolve` values,\n *                  as opposed to those backed with URLs\n *                  wherein the posted value can be any\n *                  JSON serializable object.\n * @return promise for the return value\n */\n// bound locally because it is used by other methods\nQ.mapply = // XXX As proposed by \"Redsandro\"\nQ.post = function (object, name, args) {\n    return Q(object).dispatch(\"post\", [name, args]);\n};\n\nPromise.prototype.mapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.post = function (name, args) {\n    return this.dispatch(\"post\", [name, args]);\n};\n\n/**\n * Invokes a method in a future turn.\n * @param object    promise or immediate reference for target object\n * @param name      name of method to invoke\n * @param ...args   array of invocation arguments\n * @return promise for the return value\n */\nQ.send = // XXX Mark Miller's proposed parlance\nQ.mcall = // XXX As proposed by \"Redsandro\"\nQ.invoke = function (object, name /*...args*/) {\n    return Q(object).dispatch(\"post\", [name, array_slice(arguments, 2)]);\n};\n\nPromise.prototype.send = // XXX Mark Miller's proposed parlance\nPromise.prototype.mcall = // XXX As proposed by \"Redsandro\"\nPromise.prototype.invoke = function (name /*...args*/) {\n    return this.dispatch(\"post\", [name, array_slice(arguments, 1)]);\n};\n\n/**\n * Applies the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param args      array of application arguments\n */\nQ.fapply = function (object, args) {\n    return Q(object).dispatch(\"apply\", [void 0, args]);\n};\n\nPromise.prototype.fapply = function (args) {\n    return this.dispatch(\"apply\", [void 0, args]);\n};\n\n/**\n * Calls the promised function in a future turn.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ[\"try\"] =\nQ.fcall = function (object /* ...args*/) {\n    return Q(object).dispatch(\"apply\", [void 0, array_slice(arguments, 1)]);\n};\n\nPromise.prototype.fcall = function (/*...args*/) {\n    return this.dispatch(\"apply\", [void 0, array_slice(arguments)]);\n};\n\n/**\n * Binds the promised function, transforming return values into a fulfilled\n * promise and thrown errors into a rejected one.\n * @param object    promise or immediate reference for target function\n * @param ...args   array of application arguments\n */\nQ.fbind = function (object /*...args*/) {\n    var promise = Q(object);\n    var args = array_slice(arguments, 1);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\nPromise.prototype.fbind = function (/*...args*/) {\n    var promise = this;\n    var args = array_slice(arguments);\n    return function fbound() {\n        return promise.dispatch(\"apply\", [\n            this,\n            args.concat(array_slice(arguments))\n        ]);\n    };\n};\n\n/**\n * Requests the names of the owned properties of a promised\n * object in a future turn.\n * @param object    promise or immediate reference for target object\n * @return promise for the keys of the eventually settled object\n */\nQ.keys = function (object) {\n    return Q(object).dispatch(\"keys\", []);\n};\n\nPromise.prototype.keys = function () {\n    return this.dispatch(\"keys\", []);\n};\n\n/**\n * Turns an array of promises into a promise for an array.  If any of\n * the promises gets rejected, the whole array is rejected immediately.\n * @param {Array*} an array (or promise for an array) of values (or\n * promises for values)\n * @returns a promise for an array of the corresponding values\n */\n// By Mark Miller\n// http://wiki.ecmascript.org/doku.php?id=strawman:concurrency&rev=1308776521#allfulfilled\nQ.all = all;\nfunction all(promises) {\n    return when(promises, function (promises) {\n        var pendingCount = 0;\n        var deferred = defer();\n        array_reduce(promises, function (undefined, promise, index) {\n            var snapshot;\n            if (\n                isPromise(promise) &&\n                (snapshot = promise.inspect()).state === \"fulfilled\"\n            ) {\n                promises[index] = snapshot.value;\n            } else {\n                ++pendingCount;\n                when(\n                    promise,\n                    function (value) {\n                        promises[index] = value;\n                        if (--pendingCount === 0) {\n                            deferred.resolve(promises);\n                        }\n                    },\n                    deferred.reject,\n                    function (progress) {\n                        deferred.notify({ index: index, value: progress });\n                    }\n                );\n            }\n        }, void 0);\n        if (pendingCount === 0) {\n            deferred.resolve(promises);\n        }\n        return deferred.promise;\n    });\n}\n\nPromise.prototype.all = function () {\n    return all(this);\n};\n\n/**\n * Returns the first resolved promise of an array. Prior rejected promises are\n * ignored.  Rejects only if all promises are rejected.\n * @param {Array*} an array containing values or promises for values\n * @returns a promise fulfilled with the value of the first resolved promise,\n * or a rejected promise if all promises are rejected.\n */\nQ.any = any;\n\nfunction any(promises) {\n    if (promises.length === 0) {\n        return Q.resolve();\n    }\n\n    var deferred = Q.defer();\n    var pendingCount = 0;\n    array_reduce(promises, function (prev, current, index) {\n        var promise = promises[index];\n\n        pendingCount++;\n\n        when(promise, onFulfilled, onRejected, onProgress);\n        function onFulfilled(result) {\n            deferred.resolve(result);\n        }\n        function onRejected(err) {\n            pendingCount--;\n            if (pendingCount === 0) {\n                var rejection = err || new Error(\"\" + err);\n\n                rejection.message = (\"Q can't get fulfillment value from any promise, all \" +\n                    \"promises were rejected. Last error message: \" + rejection.message);\n\n                deferred.reject(rejection);\n            }\n        }\n        function onProgress(progress) {\n            deferred.notify({\n                index: index,\n                value: progress\n            });\n        }\n    }, undefined);\n\n    return deferred.promise;\n}\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n/**\n * Waits for all promises to be settled, either fulfilled or\n * rejected.  This is distinct from `all` since that would stop\n * waiting at the first rejection.  The promise returned by\n * `allResolved` will never be rejected.\n * @param promises a promise for an array (or an array) of promises\n * (or values)\n * @return a promise for an array of promises\n */\nQ.allResolved = deprecate(allResolved, \"allResolved\", \"allSettled\");\nfunction allResolved(promises) {\n    return when(promises, function (promises) {\n        promises = array_map(promises, Q);\n        return when(all(array_map(promises, function (promise) {\n            return when(promise, noop, noop);\n        })), function () {\n            return promises;\n        });\n    });\n}\n\nPromise.prototype.allResolved = function () {\n    return allResolved(this);\n};\n\n/**\n * @see Promise#allSettled\n */\nQ.allSettled = allSettled;\nfunction allSettled(promises) {\n    return Q(promises).allSettled();\n}\n\n/**\n * Turns an array of promises into a promise for an array of their states (as\n * returned by `inspect`) when they have all settled.\n * @param {Array[Any*]} values an array (or promise for an array) of values (or\n * promises for values)\n * @returns {Array[State]} an array of states for the respective values.\n */\nPromise.prototype.allSettled = function () {\n    return this.then(function (promises) {\n        return all(array_map(promises, function (promise) {\n            promise = Q(promise);\n            function regardless() {\n                return promise.inspect();\n            }\n            return promise.then(regardless, regardless);\n        }));\n    });\n};\n\n/**\n * Captures the failure of a promise, giving an oportunity to recover\n * with a callback.  If the given promise is fulfilled, the returned\n * promise is fulfilled.\n * @param {Any*} promise for something\n * @param {Function} callback to fulfill the returned promise if the\n * given promise is rejected\n * @returns a promise for the return value of the callback\n */\nQ.fail = // XXX legacy\nQ[\"catch\"] = function (object, rejected) {\n    return Q(object).then(void 0, rejected);\n};\n\nPromise.prototype.fail = // XXX legacy\nPromise.prototype[\"catch\"] = function (rejected) {\n    return this.then(void 0, rejected);\n};\n\n/**\n * Attaches a listener that can respond to progress notifications from a\n * promise's originating deferred. This listener receives the exact arguments\n * passed to ``deferred.notify``.\n * @param {Any*} promise for something\n * @param {Function} callback to receive any progress notifications\n * @returns the given promise, unchanged\n */\nQ.progress = progress;\nfunction progress(object, progressed) {\n    return Q(object).then(void 0, void 0, progressed);\n}\n\nPromise.prototype.progress = function (progressed) {\n    return this.then(void 0, void 0, progressed);\n};\n\n/**\n * Provides an opportunity to observe the settling of a promise,\n * regardless of whether the promise is fulfilled or rejected.  Forwards\n * the resolution to the returned promise when the callback is done.\n * The callback can return a promise to defer completion.\n * @param {Any*} promise\n * @param {Function} callback to observe the resolution of the given\n * promise, takes no arguments.\n * @returns a promise for the resolution of the given promise when\n * ``fin`` is done.\n */\nQ.fin = // XXX legacy\nQ[\"finally\"] = function (object, callback) {\n    return Q(object)[\"finally\"](callback);\n};\n\nPromise.prototype.fin = // XXX legacy\nPromise.prototype[\"finally\"] = function (callback) {\n    if (!callback || typeof callback.apply !== \"function\") {\n        throw new Error(\"Q can't apply finally callback\");\n    }\n    callback = Q(callback);\n    return this.then(function (value) {\n        return callback.fcall().then(function () {\n            return value;\n        });\n    }, function (reason) {\n        // TODO attempt to recycle the rejection with \"this\".\n        return callback.fcall().then(function () {\n            throw reason;\n        });\n    });\n};\n\n/**\n * Terminates a chain of promises, forcing rejections to be\n * thrown as exceptions.\n * @param {Any*} promise at the end of a chain of promises\n * @returns nothing\n */\nQ.done = function (object, fulfilled, rejected, progress) {\n    return Q(object).done(fulfilled, rejected, progress);\n};\n\nPromise.prototype.done = function (fulfilled, rejected, progress) {\n    var onUnhandledError = function (error) {\n        // forward to a future turn so that ``when``\n        // does not catch it and turn it into a rejection.\n        Q.nextTick(function () {\n            makeStackTraceLong(error, promise);\n            if (Q.onerror) {\n                Q.onerror(error);\n            } else {\n                throw error;\n            }\n        });\n    };\n\n    // Avoid unnecessary `nextTick`ing via an unnecessary `when`.\n    var promise = fulfilled || rejected || progress ?\n        this.then(fulfilled, rejected, progress) :\n        this;\n\n    if (typeof process === \"object\" && process && process.domain) {\n        onUnhandledError = process.domain.bind(onUnhandledError);\n    }\n\n    promise.then(void 0, onUnhandledError);\n};\n\n/**\n * Causes a promise to be rejected if it does not get fulfilled before\n * some milliseconds time out.\n * @param {Any*} promise\n * @param {Number} milliseconds timeout\n * @param {Any*} custom error message or Error object (optional)\n * @returns a promise for the resolution of the given promise if it is\n * fulfilled before the timeout, otherwise rejected.\n */\nQ.timeout = function (object, ms, error) {\n    return Q(object).timeout(ms, error);\n};\n\nPromise.prototype.timeout = function (ms, error) {\n    var deferred = defer();\n    var timeoutId = setTimeout(function () {\n        if (!error || \"string\" === typeof error) {\n            error = new Error(error || \"Timed out after \" + ms + \" ms\");\n            error.code = \"ETIMEDOUT\";\n        }\n        deferred.reject(error);\n    }, ms);\n\n    this.then(function (value) {\n        clearTimeout(timeoutId);\n        deferred.resolve(value);\n    }, function (exception) {\n        clearTimeout(timeoutId);\n        deferred.reject(exception);\n    }, deferred.notify);\n\n    return deferred.promise;\n};\n\n/**\n * Returns a promise for the given value (or promised value), some\n * milliseconds after it resolved. Passes rejections immediately.\n * @param {Any*} promise\n * @param {Number} milliseconds\n * @returns a promise for the resolution of the given promise after milliseconds\n * time has elapsed since the resolution of the given promise.\n * If the given promise rejects, that is passed immediately.\n */\nQ.delay = function (object, timeout) {\n    if (timeout === void 0) {\n        timeout = object;\n        object = void 0;\n    }\n    return Q(object).delay(timeout);\n};\n\nPromise.prototype.delay = function (timeout) {\n    return this.then(function (value) {\n        var deferred = defer();\n        setTimeout(function () {\n            deferred.resolve(value);\n        }, timeout);\n        return deferred.promise;\n    });\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided as an array, and returns a promise.\n *\n *      Q.nfapply(FS.readFile, [__filename])\n *      .then(function (content) {\n *      })\n *\n */\nQ.nfapply = function (callback, args) {\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfapply = function (args) {\n    var deferred = defer();\n    var nodeArgs = array_slice(args);\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Passes a continuation to a Node function, which is called with the given\n * arguments provided individually, and returns a promise.\n * @example\n * Q.nfcall(FS.readFile, __filename)\n * .then(function (content) {\n * })\n *\n */\nQ.nfcall = function (callback /*...args*/) {\n    var args = array_slice(arguments, 1);\n    return Q(callback).nfapply(args);\n};\n\nPromise.prototype.nfcall = function (/*...args*/) {\n    var nodeArgs = array_slice(arguments);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.fapply(nodeArgs).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Wraps a NodeJS continuation passing function and returns an equivalent\n * version that returns a promise.\n * @example\n * Q.nfbind(FS.readFile, __filename)(\"utf-8\")\n * .then(console.log)\n * .done()\n */\nQ.nfbind =\nQ.denodeify = function (callback /*...args*/) {\n    if (callback === undefined) {\n        throw new Error(\"Q can't wrap an undefined function\");\n    }\n    var baseArgs = array_slice(arguments, 1);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        Q(callback).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nfbind =\nPromise.prototype.denodeify = function (/*...args*/) {\n    var args = array_slice(arguments);\n    args.unshift(this);\n    return Q.denodeify.apply(void 0, args);\n};\n\nQ.nbind = function (callback, thisp /*...args*/) {\n    var baseArgs = array_slice(arguments, 2);\n    return function () {\n        var nodeArgs = baseArgs.concat(array_slice(arguments));\n        var deferred = defer();\n        nodeArgs.push(deferred.makeNodeResolver());\n        function bound() {\n            return callback.apply(thisp, arguments);\n        }\n        Q(bound).fapply(nodeArgs).fail(deferred.reject);\n        return deferred.promise;\n    };\n};\n\nPromise.prototype.nbind = function (/*thisp, ...args*/) {\n    var args = array_slice(arguments, 0);\n    args.unshift(this);\n    return Q.nbind.apply(void 0, args);\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback with a given array of arguments, plus a provided callback.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param {Array} args arguments to pass to the method; the callback\n * will be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nmapply = // XXX As proposed by \"Redsandro\"\nQ.npost = function (object, name, args) {\n    return Q(object).npost(name, args);\n};\n\nPromise.prototype.nmapply = // XXX As proposed by \"Redsandro\"\nPromise.prototype.npost = function (name, args) {\n    var nodeArgs = array_slice(args || []);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * Calls a method of a Node-style object that accepts a Node-style\n * callback, forwarding the given variadic arguments, plus a provided\n * callback argument.\n * @param object an object that has the named method\n * @param {String} name name of the method of object\n * @param ...args arguments to pass to the method; the callback will\n * be provided by Q and appended to these arguments.\n * @returns a promise for the value or error\n */\nQ.nsend = // XXX Based on Mark Miller's proposed \"send\"\nQ.nmcall = // XXX Based on \"Redsandro's\" proposal\nQ.ninvoke = function (object, name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 2);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    Q(object).dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\nPromise.prototype.nsend = // XXX Based on Mark Miller's proposed \"send\"\nPromise.prototype.nmcall = // XXX Based on \"Redsandro's\" proposal\nPromise.prototype.ninvoke = function (name /*...args*/) {\n    var nodeArgs = array_slice(arguments, 1);\n    var deferred = defer();\n    nodeArgs.push(deferred.makeNodeResolver());\n    this.dispatch(\"post\", [name, nodeArgs]).fail(deferred.reject);\n    return deferred.promise;\n};\n\n/**\n * If a function would like to support both Node continuation-passing-style and\n * promise-returning-style, it can end its internal promise chain with\n * `nodeify(nodeback)`, forwarding the optional nodeback argument.  If the user\n * elects to use a nodeback, the result will be sent there.  If they do not\n * pass a nodeback, they will receive the result promise.\n * @param object a result (or a promise for a result)\n * @param {Function} nodeback a Node.js-style callback\n * @returns either the promise or nothing\n */\nQ.nodeify = nodeify;\nfunction nodeify(object, nodeback) {\n    return Q(object).nodeify(nodeback);\n}\n\nPromise.prototype.nodeify = function (nodeback) {\n    if (nodeback) {\n        this.then(function (value) {\n            Q.nextTick(function () {\n                nodeback(null, value);\n            });\n        }, function (error) {\n            Q.nextTick(function () {\n                nodeback(error);\n            });\n        });\n    } else {\n        return this;\n    }\n};\n\nQ.noConflict = function() {\n    throw new Error(\"Q.noConflict only works when Q is used as a global\");\n};\n\n// All code before this point will be filtered from stack traces.\nvar qEndingLine = captureLine();\n\nreturn Q;\n\n});\n","var ClientRequest = require('./lib/request')\nvar response = require('./lib/response')\nvar extend = require('xtend')\nvar statusCodes = require('builtin-status-codes')\nvar url = require('url')\n\nvar http = exports\n\nhttp.request = function (opts, cb) {\n\tif (typeof opts === 'string')\n\t\topts = url.parse(opts)\n\telse\n\t\topts = extend(opts)\n\n\t// Normally, the page is loaded from http or https, so not specifying a protocol\n\t// will result in a (valid) protocol-relative url. However, this won't work if\n\t// the protocol is something else, like 'file:'\n\tvar defaultProtocol = global.location.protocol.search(/^https?:$/) === -1 ? 'http:' : ''\n\n\tvar protocol = opts.protocol || defaultProtocol\n\tvar host = opts.hostname || opts.host\n\tvar port = opts.port\n\tvar path = opts.path || '/'\n\n\t// Necessary for IPv6 addresses\n\tif (host && host.indexOf(':') !== -1)\n\t\thost = '[' + host + ']'\n\n\t// This may be a relative url. The browser should always be able to interpret it correctly.\n\topts.url = (host ? (protocol + '//' + host) : '') + (port ? ':' + port : '') + path\n\topts.method = (opts.method || 'GET').toUpperCase()\n\topts.headers = opts.headers || {}\n\n\t// Also valid opts.auth, opts.mode\n\n\tvar req = new ClientRequest(opts)\n\tif (cb)\n\t\treq.on('response', cb)\n\treturn req\n}\n\nhttp.get = function get (opts, cb) {\n\tvar req = http.request(opts, cb)\n\treq.end()\n\treturn req\n}\n\nhttp.ClientRequest = ClientRequest\nhttp.IncomingMessage = response.IncomingMessage\n\nhttp.Agent = function () {}\nhttp.Agent.defaultMaxSockets = 4\n\nhttp.globalAgent = new http.Agent()\n\nhttp.STATUS_CODES = statusCodes\n\nhttp.METHODS = [\n\t'CHECKOUT',\n\t'CONNECT',\n\t'COPY',\n\t'DELETE',\n\t'GET',\n\t'HEAD',\n\t'LOCK',\n\t'M-SEARCH',\n\t'MERGE',\n\t'MKACTIVITY',\n\t'MKCOL',\n\t'MOVE',\n\t'NOTIFY',\n\t'OPTIONS',\n\t'PATCH',\n\t'POST',\n\t'PROPFIND',\n\t'PROPPATCH',\n\t'PURGE',\n\t'PUT',\n\t'REPORT',\n\t'SEARCH',\n\t'SUBSCRIBE',\n\t'TRACE',\n\t'UNLOCK',\n\t'UNSUBSCRIBE'\n]","var toString = {}.toString;\n\nmodule.exports = Array.isArray || function (arr) {\n  return toString.call(arr) == '[object Array]';\n};\n","exports.fetch = isFunction(global.fetch) && isFunction(global.ReadableStream)\n\nexports.writableStream = isFunction(global.WritableStream)\n\nexports.abortController = isFunction(global.AbortController)\n\nexports.blobConstructor = false\ntry {\n\tnew Blob([new ArrayBuffer(1)])\n\texports.blobConstructor = true\n} catch (e) {}\n\n// The xhr request to example.com may violate some restrictive CSP configurations,\n// so if we're running in a browser that supports `fetch`, avoid calling getXHR()\n// and assume support for certain features below.\nvar xhr\nfunction getXHR () {\n\t// Cache the xhr value\n\tif (xhr !== undefined) return xhr\n\n\tif (global.XMLHttpRequest) {\n\t\txhr = new global.XMLHttpRequest()\n\t\t// If XDomainRequest is available (ie only, where xhr might not work\n\t\t// cross domain), use the page location. Otherwise use example.com\n\t\t// Note: this doesn't actually make an http request.\n\t\ttry {\n\t\t\txhr.open('GET', global.XDomainRequest ? '/' : 'https://example.com')\n\t\t} catch(e) {\n\t\t\txhr = null\n\t\t}\n\t} else {\n\t\t// Service workers don't have XHR\n\t\txhr = null\n\t}\n\treturn xhr\n}\n\nfunction checkTypeSupport (type) {\n\tvar xhr = getXHR()\n\tif (!xhr) return false\n\ttry {\n\t\txhr.responseType = type\n\t\treturn xhr.responseType === type\n\t} catch (e) {}\n\treturn false\n}\n\n// For some strange reason, Safari 7.0 reports typeof global.ArrayBuffer === 'object'.\n// Safari 7.1 appears to have fixed this bug.\nvar haveArrayBuffer = typeof global.ArrayBuffer !== 'undefined'\nvar haveSlice = haveArrayBuffer && isFunction(global.ArrayBuffer.prototype.slice)\n\n// If fetch is supported, then arraybuffer will be supported too. Skip calling\n// checkTypeSupport(), since that calls getXHR().\nexports.arraybuffer = exports.fetch || (haveArrayBuffer && checkTypeSupport('arraybuffer'))\n\n// These next two tests unavoidably show warnings in Chrome. Since fetch will always\n// be used if it's available, just return false for these to avoid the warnings.\nexports.msstream = !exports.fetch && haveSlice && checkTypeSupport('ms-stream')\nexports.mozchunkedarraybuffer = !exports.fetch && haveArrayBuffer &&\n\tcheckTypeSupport('moz-chunked-arraybuffer')\n\n// If fetch is supported, then overrideMimeType will be supported too. Skip calling\n// getXHR().\nexports.overrideMimeType = exports.fetch || (getXHR() ? isFunction(getXHR().overrideMimeType) : false)\n\nexports.vbArray = isFunction(global.VBArray)\n\nfunction isFunction (value) {\n\treturn typeof value === 'function'\n}\n\nxhr = null // Help gc\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar stream = require('readable-stream')\n\nvar rStates = exports.readyStates = {\n\tUNSENT: 0,\n\tOPENED: 1,\n\tHEADERS_RECEIVED: 2,\n\tLOADING: 3,\n\tDONE: 4\n}\n\nvar IncomingMessage = exports.IncomingMessage = function (xhr, response, mode, fetchTimer) {\n\tvar self = this\n\tstream.Readable.call(self)\n\n\tself._mode = mode\n\tself.headers = {}\n\tself.rawHeaders = []\n\tself.trailers = {}\n\tself.rawTrailers = []\n\n\t// Fake the 'close' event, but only once 'end' fires\n\tself.on('end', function () {\n\t\t// The nextTick is necessary to prevent the 'request' module from causing an infinite loop\n\t\tprocess.nextTick(function () {\n\t\t\tself.emit('close')\n\t\t})\n\t})\n\n\tif (mode === 'fetch') {\n\t\tself._fetchResponse = response\n\n\t\tself.url = response.url\n\t\tself.statusCode = response.status\n\t\tself.statusMessage = response.statusText\n\t\t\n\t\tresponse.headers.forEach(function (header, key){\n\t\t\tself.headers[key.toLowerCase()] = header\n\t\t\tself.rawHeaders.push(key, header)\n\t\t})\n\n\t\tif (capability.writableStream) {\n\t\t\tvar writable = new WritableStream({\n\t\t\t\twrite: function (chunk) {\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tif (self._destroyed) {\n\t\t\t\t\t\t\treject()\n\t\t\t\t\t\t} else if(self.push(new Buffer(chunk))) {\n\t\t\t\t\t\t\tresolve()\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tself._resumeFetch = resolve\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t},\n\t\t\t\tclose: function () {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.push(null)\n\t\t\t\t},\n\t\t\t\tabort: function (err) {\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t}\n\t\t\t})\n\n\t\t\ttry {\n\t\t\t\tresponse.body.pipeTo(writable).catch(function (err) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tif (!self._destroyed)\n\t\t\t\t\t\tself.emit('error', err)\n\t\t\t\t})\n\t\t\t\treturn\n\t\t\t} catch (e) {} // pipeTo method isn't defined. Can't find a better way to feature test this\n\t\t}\n\t\t// fallback for when writableStream or pipeTo aren't available\n\t\tvar reader = response.body.getReader()\n\t\tfunction read () {\n\t\t\treader.read().then(function (result) {\n\t\t\t\tif (self._destroyed)\n\t\t\t\t\treturn\n\t\t\t\tif (result.done) {\n\t\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\t\tself.push(null)\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tself.push(new Buffer(result.value))\n\t\t\t\tread()\n\t\t\t}).catch(function (err) {\n\t\t\t\tglobal.clearTimeout(fetchTimer)\n\t\t\t\tif (!self._destroyed)\n\t\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t}\n\t\tread()\n\t} else {\n\t\tself._xhr = xhr\n\t\tself._pos = 0\n\n\t\tself.url = xhr.responseURL\n\t\tself.statusCode = xhr.status\n\t\tself.statusMessage = xhr.statusText\n\t\tvar headers = xhr.getAllResponseHeaders().split(/\\r?\\n/)\n\t\theaders.forEach(function (header) {\n\t\t\tvar matches = header.match(/^([^:]+):\\s*(.*)/)\n\t\t\tif (matches) {\n\t\t\t\tvar key = matches[1].toLowerCase()\n\t\t\t\tif (key === 'set-cookie') {\n\t\t\t\t\tif (self.headers[key] === undefined) {\n\t\t\t\t\t\tself.headers[key] = []\n\t\t\t\t\t}\n\t\t\t\t\tself.headers[key].push(matches[2])\n\t\t\t\t} else if (self.headers[key] !== undefined) {\n\t\t\t\t\tself.headers[key] += ', ' + matches[2]\n\t\t\t\t} else {\n\t\t\t\t\tself.headers[key] = matches[2]\n\t\t\t\t}\n\t\t\t\tself.rawHeaders.push(matches[1], matches[2])\n\t\t\t}\n\t\t})\n\n\t\tself._charset = 'x-user-defined'\n\t\tif (!capability.overrideMimeType) {\n\t\t\tvar mimeType = self.rawHeaders['mime-type']\n\t\t\tif (mimeType) {\n\t\t\t\tvar charsetMatch = mimeType.match(/;\\s*charset=([^;])(;|$)/)\n\t\t\t\tif (charsetMatch) {\n\t\t\t\t\tself._charset = charsetMatch[1].toLowerCase()\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (!self._charset)\n\t\t\t\tself._charset = 'utf-8' // best guess\n\t\t}\n\t}\n}\n\ninherits(IncomingMessage, stream.Readable)\n\nIncomingMessage.prototype._read = function () {\n\tvar self = this\n\n\tvar resolve = self._resumeFetch\n\tif (resolve) {\n\t\tself._resumeFetch = null\n\t\tresolve()\n\t}\n}\n\nIncomingMessage.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tvar xhr = self._xhr\n\n\tvar response = null\n\tswitch (self._mode) {\n\t\tcase 'text:vbarray': // For IE9\n\t\t\tif (xhr.readyState !== rStates.DONE)\n\t\t\t\tbreak\n\t\t\ttry {\n\t\t\t\t// This fails in IE8\n\t\t\t\tresponse = new global.VBArray(xhr.responseBody).toArray()\n\t\t\t} catch (e) {}\n\t\t\tif (response !== null) {\n\t\t\t\tself.push(new Buffer(response))\n\t\t\t\tbreak\n\t\t\t}\n\t\t\t// Falls through in IE8\t\n\t\tcase 'text':\n\t\t\ttry { // This will fail when readyState = 3 in IE9. Switch mode and wait for readyState = 4\n\t\t\t\tresponse = xhr.responseText\n\t\t\t} catch (e) {\n\t\t\t\tself._mode = 'text:vbarray'\n\t\t\t\tbreak\n\t\t\t}\n\t\t\tif (response.length > self._pos) {\n\t\t\t\tvar newData = response.substr(self._pos)\n\t\t\t\tif (self._charset === 'x-user-defined') {\n\t\t\t\t\tvar buffer = new Buffer(newData.length)\n\t\t\t\t\tfor (var i = 0; i < newData.length; i++)\n\t\t\t\t\t\tbuffer[i] = newData.charCodeAt(i) & 0xff\n\n\t\t\t\t\tself.push(buffer)\n\t\t\t\t} else {\n\t\t\t\t\tself.push(newData, self._charset)\n\t\t\t\t}\n\t\t\t\tself._pos = response.length\n\t\t\t}\n\t\t\tbreak\n\t\tcase 'arraybuffer':\n\t\t\tif (xhr.readyState !== rStates.DONE || !xhr.response)\n\t\t\t\tbreak\n\t\t\tresponse = xhr.response\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'moz-chunked-arraybuffer': // take whole\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING || !response)\n\t\t\t\tbreak\n\t\t\tself.push(new Buffer(new Uint8Array(response)))\n\t\t\tbreak\n\t\tcase 'ms-stream':\n\t\t\tresponse = xhr.response\n\t\t\tif (xhr.readyState !== rStates.LOADING)\n\t\t\t\tbreak\n\t\t\tvar reader = new global.MSStreamReader()\n\t\t\treader.onprogress = function () {\n\t\t\t\tif (reader.result.byteLength > self._pos) {\n\t\t\t\t\tself.push(new Buffer(new Uint8Array(reader.result.slice(self._pos))))\n\t\t\t\t\tself._pos = reader.result.byteLength\n\t\t\t\t}\n\t\t\t}\n\t\t\treader.onload = function () {\n\t\t\t\tself.push(null)\n\t\t\t}\n\t\t\t// reader.onerror = ??? // TODO: this\n\t\t\treader.readAsArrayBuffer(response)\n\t\t\tbreak\n\t}\n\n\t// The ms-stream case handles end separately in reader.onload()\n\tif (self._xhr.readyState === rStates.DONE && self._mode !== 'ms-stream') {\n\t\tself.push(null)\n\t}\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\nmodule.exports = Readable;\n\n/*<replacement>*/\nvar isArray = require('isarray');\n/*</replacement>*/\n\n/*<replacement>*/\nvar Duplex;\n/*</replacement>*/\n\nReadable.ReadableState = ReadableState;\n\n/*<replacement>*/\nvar EE = require('events').EventEmitter;\n\nvar EElistenerCount = function (emitter, type) {\n  return emitter.listeners(type).length;\n};\n/*</replacement>*/\n\n/*<replacement>*/\nvar Stream = require('./internal/streams/stream');\n/*</replacement>*/\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\nvar OurUint8Array = global.Uint8Array || function () {};\nfunction _uint8ArrayToBuffer(chunk) {\n  return Buffer.from(chunk);\n}\nfunction _isUint8Array(obj) {\n  return Buffer.isBuffer(obj) || obj instanceof OurUint8Array;\n}\n\n/*</replacement>*/\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\n/*<replacement>*/\nvar debugUtil = require('util');\nvar debug = void 0;\nif (debugUtil && debugUtil.debuglog) {\n  debug = debugUtil.debuglog('stream');\n} else {\n  debug = function () {};\n}\n/*</replacement>*/\n\nvar BufferList = require('./internal/streams/BufferList');\nvar destroyImpl = require('./internal/streams/destroy');\nvar StringDecoder;\n\nutil.inherits(Readable, Stream);\n\nvar kProxyEvents = ['error', 'close', 'destroy', 'pause', 'resume'];\n\nfunction prependListener(emitter, event, fn) {\n  // Sadly this is not cacheable as some libraries bundle their own\n  // event emitter implementation with them.\n  if (typeof emitter.prependListener === 'function') return emitter.prependListener(event, fn);\n\n  // This is a hack to make sure that our error handler is attached before any\n  // userland ones.  NEVER DO THIS. This is here only because this code needs\n  // to continue to work with older versions of Node.js that do not include\n  // the prependListener() method. The goal is to eventually remove this hack.\n  if (!emitter._events || !emitter._events[event]) emitter.on(event, fn);else if (isArray(emitter._events[event])) emitter._events[event].unshift(fn);else emitter._events[event] = [fn, emitter._events[event]];\n}\n\nfunction ReadableState(options, stream) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  options = options || {};\n\n  // Duplex streams are both readable and writable, but share\n  // the same options object.\n  // However, some cases require setting options to different\n  // values for the readable and the writable sides of the duplex stream.\n  // These options can be provided separately as readableXXX and writableXXX.\n  var isDuplex = stream instanceof Duplex;\n\n  // object stream flag. Used to make read(n) ignore n and to\n  // make all the buffer merging and length checks go away\n  this.objectMode = !!options.objectMode;\n\n  if (isDuplex) this.objectMode = this.objectMode || !!options.readableObjectMode;\n\n  // the point at which it stops calling _read() to fill the buffer\n  // Note: 0 is a valid value, means \"don't call _read preemptively ever\"\n  var hwm = options.highWaterMark;\n  var readableHwm = options.readableHighWaterMark;\n  var defaultHwm = this.objectMode ? 16 : 16 * 1024;\n\n  if (hwm || hwm === 0) this.highWaterMark = hwm;else if (isDuplex && (readableHwm || readableHwm === 0)) this.highWaterMark = readableHwm;else this.highWaterMark = defaultHwm;\n\n  // cast to ints.\n  this.highWaterMark = Math.floor(this.highWaterMark);\n\n  // A linked list is used to store data chunks instead of an array because the\n  // linked list can remove elements from the beginning faster than\n  // array.shift()\n  this.buffer = new BufferList();\n  this.length = 0;\n  this.pipes = null;\n  this.pipesCount = 0;\n  this.flowing = null;\n  this.ended = false;\n  this.endEmitted = false;\n  this.reading = false;\n\n  // a flag to be able to tell if the event 'readable'/'data' is emitted\n  // immediately, or on a later tick.  We set this to true at first, because\n  // any actions that shouldn't happen until \"later\" should generally also\n  // not happen before the first read call.\n  this.sync = true;\n\n  // whenever we return null, then we set a flag to say\n  // that we're awaiting a 'readable' event emission.\n  this.needReadable = false;\n  this.emittedReadable = false;\n  this.readableListening = false;\n  this.resumeScheduled = false;\n\n  // has it been destroyed\n  this.destroyed = false;\n\n  // Crypto is kind of old and crusty.  Historically, its default string\n  // encoding is 'binary' so we have to make this configurable.\n  // Everything else in the universe uses 'utf8', though.\n  this.defaultEncoding = options.defaultEncoding || 'utf8';\n\n  // the number of writers that are awaiting a drain event in .pipe()s\n  this.awaitDrain = 0;\n\n  // if true, a maybeReadMore has been scheduled\n  this.readingMore = false;\n\n  this.decoder = null;\n  this.encoding = null;\n  if (options.encoding) {\n    if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n    this.decoder = new StringDecoder(options.encoding);\n    this.encoding = options.encoding;\n  }\n}\n\nfunction Readable(options) {\n  Duplex = Duplex || require('./_stream_duplex');\n\n  if (!(this instanceof Readable)) return new Readable(options);\n\n  this._readableState = new ReadableState(options, this);\n\n  // legacy\n  this.readable = true;\n\n  if (options) {\n    if (typeof options.read === 'function') this._read = options.read;\n\n    if (typeof options.destroy === 'function') this._destroy = options.destroy;\n  }\n\n  Stream.call(this);\n}\n\nObject.defineProperty(Readable.prototype, 'destroyed', {\n  get: function () {\n    if (this._readableState === undefined) {\n      return false;\n    }\n    return this._readableState.destroyed;\n  },\n  set: function (value) {\n    // we ignore the value if the stream\n    // has not been initialized yet\n    if (!this._readableState) {\n      return;\n    }\n\n    // backward compatibility, the user is explicitly\n    // managing destroyed\n    this._readableState.destroyed = value;\n  }\n});\n\nReadable.prototype.destroy = destroyImpl.destroy;\nReadable.prototype._undestroy = destroyImpl.undestroy;\nReadable.prototype._destroy = function (err, cb) {\n  this.push(null);\n  cb(err);\n};\n\n// Manually shove something into the read() buffer.\n// This returns true if the highWaterMark has not been hit yet,\n// similar to how Writable.write() returns true if you should\n// write() some more.\nReadable.prototype.push = function (chunk, encoding) {\n  var state = this._readableState;\n  var skipChunkCheck;\n\n  if (!state.objectMode) {\n    if (typeof chunk === 'string') {\n      encoding = encoding || state.defaultEncoding;\n      if (encoding !== state.encoding) {\n        chunk = Buffer.from(chunk, encoding);\n        encoding = '';\n      }\n      skipChunkCheck = true;\n    }\n  } else {\n    skipChunkCheck = true;\n  }\n\n  return readableAddChunk(this, chunk, encoding, false, skipChunkCheck);\n};\n\n// Unshift should *always* be something directly out of read()\nReadable.prototype.unshift = function (chunk) {\n  return readableAddChunk(this, chunk, null, true, false);\n};\n\nfunction readableAddChunk(stream, chunk, encoding, addToFront, skipChunkCheck) {\n  var state = stream._readableState;\n  if (chunk === null) {\n    state.reading = false;\n    onEofChunk(stream, state);\n  } else {\n    var er;\n    if (!skipChunkCheck) er = chunkInvalid(state, chunk);\n    if (er) {\n      stream.emit('error', er);\n    } else if (state.objectMode || chunk && chunk.length > 0) {\n      if (typeof chunk !== 'string' && !state.objectMode && Object.getPrototypeOf(chunk) !== Buffer.prototype) {\n        chunk = _uint8ArrayToBuffer(chunk);\n      }\n\n      if (addToFront) {\n        if (state.endEmitted) stream.emit('error', new Error('stream.unshift() after end event'));else addChunk(stream, state, chunk, true);\n      } else if (state.ended) {\n        stream.emit('error', new Error('stream.push() after EOF'));\n      } else {\n        state.reading = false;\n        if (state.decoder && !encoding) {\n          chunk = state.decoder.write(chunk);\n          if (state.objectMode || chunk.length !== 0) addChunk(stream, state, chunk, false);else maybeReadMore(stream, state);\n        } else {\n          addChunk(stream, state, chunk, false);\n        }\n      }\n    } else if (!addToFront) {\n      state.reading = false;\n    }\n  }\n\n  return needMoreData(state);\n}\n\nfunction addChunk(stream, state, chunk, addToFront) {\n  if (state.flowing && state.length === 0 && !state.sync) {\n    stream.emit('data', chunk);\n    stream.read(0);\n  } else {\n    // update the buffer info.\n    state.length += state.objectMode ? 1 : chunk.length;\n    if (addToFront) state.buffer.unshift(chunk);else state.buffer.push(chunk);\n\n    if (state.needReadable) emitReadable(stream);\n  }\n  maybeReadMore(stream, state);\n}\n\nfunction chunkInvalid(state, chunk) {\n  var er;\n  if (!_isUint8Array(chunk) && typeof chunk !== 'string' && chunk !== undefined && !state.objectMode) {\n    er = new TypeError('Invalid non-string/buffer chunk');\n  }\n  return er;\n}\n\n// if it's past the high water mark, we can push in some more.\n// Also, if we have no data yet, we can stand some\n// more bytes.  This is to work around cases where hwm=0,\n// such as the repl.  Also, if the push() triggered a\n// readable event, and the user called read(largeNumber) such that\n// needReadable was set, then we ought to push more, so that another\n// 'readable' event will be triggered.\nfunction needMoreData(state) {\n  return !state.ended && (state.needReadable || state.length < state.highWaterMark || state.length === 0);\n}\n\nReadable.prototype.isPaused = function () {\n  return this._readableState.flowing === false;\n};\n\n// backwards compatibility.\nReadable.prototype.setEncoding = function (enc) {\n  if (!StringDecoder) StringDecoder = require('string_decoder/').StringDecoder;\n  this._readableState.decoder = new StringDecoder(enc);\n  this._readableState.encoding = enc;\n  return this;\n};\n\n// Don't raise the hwm > 8MB\nvar MAX_HWM = 0x800000;\nfunction computeNewHighWaterMark(n) {\n  if (n >= MAX_HWM) {\n    n = MAX_HWM;\n  } else {\n    // Get the next highest power of 2 to prevent increasing hwm excessively in\n    // tiny amounts\n    n--;\n    n |= n >>> 1;\n    n |= n >>> 2;\n    n |= n >>> 4;\n    n |= n >>> 8;\n    n |= n >>> 16;\n    n++;\n  }\n  return n;\n}\n\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction howMuchToRead(n, state) {\n  if (n <= 0 || state.length === 0 && state.ended) return 0;\n  if (state.objectMode) return 1;\n  if (n !== n) {\n    // Only flow one buffer at a time\n    if (state.flowing && state.length) return state.buffer.head.data.length;else return state.length;\n  }\n  // If we're asking for more than the current hwm, then raise the hwm.\n  if (n > state.highWaterMark) state.highWaterMark = computeNewHighWaterMark(n);\n  if (n <= state.length) return n;\n  // Don't have enough\n  if (!state.ended) {\n    state.needReadable = true;\n    return 0;\n  }\n  return state.length;\n}\n\n// you can override either this method, or the async _read(n) below.\nReadable.prototype.read = function (n) {\n  debug('read', n);\n  n = parseInt(n, 10);\n  var state = this._readableState;\n  var nOrig = n;\n\n  if (n !== 0) state.emittedReadable = false;\n\n  // if we're doing read(0) to trigger a readable event, but we\n  // already have a bunch of data in the buffer, then just trigger\n  // the 'readable' event and move on.\n  if (n === 0 && state.needReadable && (state.length >= state.highWaterMark || state.ended)) {\n    debug('read: emitReadable', state.length, state.ended);\n    if (state.length === 0 && state.ended) endReadable(this);else emitReadable(this);\n    return null;\n  }\n\n  n = howMuchToRead(n, state);\n\n  // if we've ended, and we're now clear, then finish it up.\n  if (n === 0 && state.ended) {\n    if (state.length === 0) endReadable(this);\n    return null;\n  }\n\n  // All the actual chunk generation logic needs to be\n  // *below* the call to _read.  The reason is that in certain\n  // synthetic stream cases, such as passthrough streams, _read\n  // may be a completely synchronous operation which may change\n  // the state of the read buffer, providing enough data when\n  // before there was *not* enough.\n  //\n  // So, the steps are:\n  // 1. Figure out what the state of things will be after we do\n  // a read from the buffer.\n  //\n  // 2. If that resulting state will trigger a _read, then call _read.\n  // Note that this may be asynchronous, or synchronous.  Yes, it is\n  // deeply ugly to write APIs this way, but that still doesn't mean\n  // that the Readable class should behave improperly, as streams are\n  // designed to be sync/async agnostic.\n  // Take note if the _read call is sync or async (ie, if the read call\n  // has returned yet), so that we know whether or not it's safe to emit\n  // 'readable' etc.\n  //\n  // 3. Actually pull the requested chunks out of the buffer and return.\n\n  // if we need a readable event, then we need to do some reading.\n  var doRead = state.needReadable;\n  debug('need readable', doRead);\n\n  // if we currently have less than the highWaterMark, then also read some\n  if (state.length === 0 || state.length - n < state.highWaterMark) {\n    doRead = true;\n    debug('length less than watermark', doRead);\n  }\n\n  // however, if we've ended, then there's no point, and if we're already\n  // reading, then it's unnecessary.\n  if (state.ended || state.reading) {\n    doRead = false;\n    debug('reading or ended', doRead);\n  } else if (doRead) {\n    debug('do read');\n    state.reading = true;\n    state.sync = true;\n    // if the length is currently zero, then we *need* a readable event.\n    if (state.length === 0) state.needReadable = true;\n    // call internal read method\n    this._read(state.highWaterMark);\n    state.sync = false;\n    // If _read pushed data synchronously, then `reading` will be false,\n    // and we need to re-evaluate how much data we can return to the user.\n    if (!state.reading) n = howMuchToRead(nOrig, state);\n  }\n\n  var ret;\n  if (n > 0) ret = fromList(n, state);else ret = null;\n\n  if (ret === null) {\n    state.needReadable = true;\n    n = 0;\n  } else {\n    state.length -= n;\n  }\n\n  if (state.length === 0) {\n    // If we have nothing in the buffer, then we want to know\n    // as soon as we *do* get something into the buffer.\n    if (!state.ended) state.needReadable = true;\n\n    // If we tried to read() past the EOF, then emit end on the next tick.\n    if (nOrig !== n && state.ended) endReadable(this);\n  }\n\n  if (ret !== null) this.emit('data', ret);\n\n  return ret;\n};\n\nfunction onEofChunk(stream, state) {\n  if (state.ended) return;\n  if (state.decoder) {\n    var chunk = state.decoder.end();\n    if (chunk && chunk.length) {\n      state.buffer.push(chunk);\n      state.length += state.objectMode ? 1 : chunk.length;\n    }\n  }\n  state.ended = true;\n\n  // emit 'readable' now to make sure it gets picked up.\n  emitReadable(stream);\n}\n\n// Don't emit readable right away in sync mode, because this can trigger\n// another read() call => stack overflow.  This way, it might trigger\n// a nextTick recursion warning, but that's not so bad.\nfunction emitReadable(stream) {\n  var state = stream._readableState;\n  state.needReadable = false;\n  if (!state.emittedReadable) {\n    debug('emitReadable', state.flowing);\n    state.emittedReadable = true;\n    if (state.sync) pna.nextTick(emitReadable_, stream);else emitReadable_(stream);\n  }\n}\n\nfunction emitReadable_(stream) {\n  debug('emit readable');\n  stream.emit('readable');\n  flow(stream);\n}\n\n// at this point, the user has presumably seen the 'readable' event,\n// and called read() to consume some data.  that may have triggered\n// in turn another _read(n) call, in which case reading = true if\n// it's in progress.\n// However, if we're not ended, or reading, and the length < hwm,\n// then go ahead and try to read some more preemptively.\nfunction maybeReadMore(stream, state) {\n  if (!state.readingMore) {\n    state.readingMore = true;\n    pna.nextTick(maybeReadMore_, stream, state);\n  }\n}\n\nfunction maybeReadMore_(stream, state) {\n  var len = state.length;\n  while (!state.reading && !state.flowing && !state.ended && state.length < state.highWaterMark) {\n    debug('maybeReadMore read 0');\n    stream.read(0);\n    if (len === state.length)\n      // didn't get any data, stop spinning.\n      break;else len = state.length;\n  }\n  state.readingMore = false;\n}\n\n// abstract method.  to be overridden in specific implementation classes.\n// call cb(er, data) where data is <= n in length.\n// for virtual (non-string, non-buffer) streams, \"length\" is somewhat\n// arbitrary, and perhaps not very meaningful.\nReadable.prototype._read = function (n) {\n  this.emit('error', new Error('_read() is not implemented'));\n};\n\nReadable.prototype.pipe = function (dest, pipeOpts) {\n  var src = this;\n  var state = this._readableState;\n\n  switch (state.pipesCount) {\n    case 0:\n      state.pipes = dest;\n      break;\n    case 1:\n      state.pipes = [state.pipes, dest];\n      break;\n    default:\n      state.pipes.push(dest);\n      break;\n  }\n  state.pipesCount += 1;\n  debug('pipe count=%d opts=%j', state.pipesCount, pipeOpts);\n\n  var doEnd = (!pipeOpts || pipeOpts.end !== false) && dest !== process.stdout && dest !== process.stderr;\n\n  var endFn = doEnd ? onend : unpipe;\n  if (state.endEmitted) pna.nextTick(endFn);else src.once('end', endFn);\n\n  dest.on('unpipe', onunpipe);\n  function onunpipe(readable, unpipeInfo) {\n    debug('onunpipe');\n    if (readable === src) {\n      if (unpipeInfo && unpipeInfo.hasUnpiped === false) {\n        unpipeInfo.hasUnpiped = true;\n        cleanup();\n      }\n    }\n  }\n\n  function onend() {\n    debug('onend');\n    dest.end();\n  }\n\n  // when the dest drains, it reduces the awaitDrain counter\n  // on the source.  This would be more elegant with a .once()\n  // handler in flow(), but adding and removing repeatedly is\n  // too slow.\n  var ondrain = pipeOnDrain(src);\n  dest.on('drain', ondrain);\n\n  var cleanedUp = false;\n  function cleanup() {\n    debug('cleanup');\n    // cleanup event handlers once the pipe is broken\n    dest.removeListener('close', onclose);\n    dest.removeListener('finish', onfinish);\n    dest.removeListener('drain', ondrain);\n    dest.removeListener('error', onerror);\n    dest.removeListener('unpipe', onunpipe);\n    src.removeListener('end', onend);\n    src.removeListener('end', unpipe);\n    src.removeListener('data', ondata);\n\n    cleanedUp = true;\n\n    // if the reader is waiting for a drain event from this\n    // specific writer, then it would cause it to never start\n    // flowing again.\n    // So, if this is awaiting a drain, then we just call it now.\n    // If we don't know, then assume that we are waiting for one.\n    if (state.awaitDrain && (!dest._writableState || dest._writableState.needDrain)) ondrain();\n  }\n\n  // If the user pushes more data while we're writing to dest then we'll end up\n  // in ondata again. However, we only want to increase awaitDrain once because\n  // dest will only emit one 'drain' event for the multiple writes.\n  // => Introduce a guard on increasing awaitDrain.\n  var increasedAwaitDrain = false;\n  src.on('data', ondata);\n  function ondata(chunk) {\n    debug('ondata');\n    increasedAwaitDrain = false;\n    var ret = dest.write(chunk);\n    if (false === ret && !increasedAwaitDrain) {\n      // If the user unpiped during `dest.write()`, it is possible\n      // to get stuck in a permanently paused state if that write\n      // also returned false.\n      // => Check whether `dest` is still a piping destination.\n      if ((state.pipesCount === 1 && state.pipes === dest || state.pipesCount > 1 && indexOf(state.pipes, dest) !== -1) && !cleanedUp) {\n        debug('false write response, pause', src._readableState.awaitDrain);\n        src._readableState.awaitDrain++;\n        increasedAwaitDrain = true;\n      }\n      src.pause();\n    }\n  }\n\n  // if the dest has an error, then stop piping into it.\n  // however, don't suppress the throwing behavior for this.\n  function onerror(er) {\n    debug('onerror', er);\n    unpipe();\n    dest.removeListener('error', onerror);\n    if (EElistenerCount(dest, 'error') === 0) dest.emit('error', er);\n  }\n\n  // Make sure our error handler is attached before userland ones.\n  prependListener(dest, 'error', onerror);\n\n  // Both close and finish should trigger unpipe, but only once.\n  function onclose() {\n    dest.removeListener('finish', onfinish);\n    unpipe();\n  }\n  dest.once('close', onclose);\n  function onfinish() {\n    debug('onfinish');\n    dest.removeListener('close', onclose);\n    unpipe();\n  }\n  dest.once('finish', onfinish);\n\n  function unpipe() {\n    debug('unpipe');\n    src.unpipe(dest);\n  }\n\n  // tell the dest that it's being piped to\n  dest.emit('pipe', src);\n\n  // start the flow if it hasn't been started already.\n  if (!state.flowing) {\n    debug('pipe resume');\n    src.resume();\n  }\n\n  return dest;\n};\n\nfunction pipeOnDrain(src) {\n  return function () {\n    var state = src._readableState;\n    debug('pipeOnDrain', state.awaitDrain);\n    if (state.awaitDrain) state.awaitDrain--;\n    if (state.awaitDrain === 0 && EElistenerCount(src, 'data')) {\n      state.flowing = true;\n      flow(src);\n    }\n  };\n}\n\nReadable.prototype.unpipe = function (dest) {\n  var state = this._readableState;\n  var unpipeInfo = { hasUnpiped: false };\n\n  // if we're not piping anywhere, then do nothing.\n  if (state.pipesCount === 0) return this;\n\n  // just one destination.  most common case.\n  if (state.pipesCount === 1) {\n    // passed in one, but it's not the right one.\n    if (dest && dest !== state.pipes) return this;\n\n    if (!dest) dest = state.pipes;\n\n    // got a match.\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n    if (dest) dest.emit('unpipe', this, unpipeInfo);\n    return this;\n  }\n\n  // slow case. multiple pipe destinations.\n\n  if (!dest) {\n    // remove all.\n    var dests = state.pipes;\n    var len = state.pipesCount;\n    state.pipes = null;\n    state.pipesCount = 0;\n    state.flowing = false;\n\n    for (var i = 0; i < len; i++) {\n      dests[i].emit('unpipe', this, unpipeInfo);\n    }return this;\n  }\n\n  // try to find the right one.\n  var index = indexOf(state.pipes, dest);\n  if (index === -1) return this;\n\n  state.pipes.splice(index, 1);\n  state.pipesCount -= 1;\n  if (state.pipesCount === 1) state.pipes = state.pipes[0];\n\n  dest.emit('unpipe', this, unpipeInfo);\n\n  return this;\n};\n\n// set up data events if they are asked for\n// Ensure readable listeners eventually get something\nReadable.prototype.on = function (ev, fn) {\n  var res = Stream.prototype.on.call(this, ev, fn);\n\n  if (ev === 'data') {\n    // Start flowing on next tick if stream isn't explicitly paused\n    if (this._readableState.flowing !== false) this.resume();\n  } else if (ev === 'readable') {\n    var state = this._readableState;\n    if (!state.endEmitted && !state.readableListening) {\n      state.readableListening = state.needReadable = true;\n      state.emittedReadable = false;\n      if (!state.reading) {\n        pna.nextTick(nReadingNextTick, this);\n      } else if (state.length) {\n        emitReadable(this);\n      }\n    }\n  }\n\n  return res;\n};\nReadable.prototype.addListener = Readable.prototype.on;\n\nfunction nReadingNextTick(self) {\n  debug('readable nexttick read 0');\n  self.read(0);\n}\n\n// pause() and resume() are remnants of the legacy readable stream API\n// If the user uses them, then switch into old mode.\nReadable.prototype.resume = function () {\n  var state = this._readableState;\n  if (!state.flowing) {\n    debug('resume');\n    state.flowing = true;\n    resume(this, state);\n  }\n  return this;\n};\n\nfunction resume(stream, state) {\n  if (!state.resumeScheduled) {\n    state.resumeScheduled = true;\n    pna.nextTick(resume_, stream, state);\n  }\n}\n\nfunction resume_(stream, state) {\n  if (!state.reading) {\n    debug('resume read 0');\n    stream.read(0);\n  }\n\n  state.resumeScheduled = false;\n  state.awaitDrain = 0;\n  stream.emit('resume');\n  flow(stream);\n  if (state.flowing && !state.reading) stream.read(0);\n}\n\nReadable.prototype.pause = function () {\n  debug('call pause flowing=%j', this._readableState.flowing);\n  if (false !== this._readableState.flowing) {\n    debug('pause');\n    this._readableState.flowing = false;\n    this.emit('pause');\n  }\n  return this;\n};\n\nfunction flow(stream) {\n  var state = stream._readableState;\n  debug('flow', state.flowing);\n  while (state.flowing && stream.read() !== null) {}\n}\n\n// wrap an old-style stream as the async data source.\n// This is *not* part of the readable stream interface.\n// It is an ugly unfortunate mess of history.\nReadable.prototype.wrap = function (stream) {\n  var _this = this;\n\n  var state = this._readableState;\n  var paused = false;\n\n  stream.on('end', function () {\n    debug('wrapped end');\n    if (state.decoder && !state.ended) {\n      var chunk = state.decoder.end();\n      if (chunk && chunk.length) _this.push(chunk);\n    }\n\n    _this.push(null);\n  });\n\n  stream.on('data', function (chunk) {\n    debug('wrapped data');\n    if (state.decoder) chunk = state.decoder.write(chunk);\n\n    // don't skip over falsy values in objectMode\n    if (state.objectMode && (chunk === null || chunk === undefined)) return;else if (!state.objectMode && (!chunk || !chunk.length)) return;\n\n    var ret = _this.push(chunk);\n    if (!ret) {\n      paused = true;\n      stream.pause();\n    }\n  });\n\n  // proxy all the other methods.\n  // important when wrapping filters and duplexes.\n  for (var i in stream) {\n    if (this[i] === undefined && typeof stream[i] === 'function') {\n      this[i] = function (method) {\n        return function () {\n          return stream[method].apply(stream, arguments);\n        };\n      }(i);\n    }\n  }\n\n  // proxy certain important events.\n  for (var n = 0; n < kProxyEvents.length; n++) {\n    stream.on(kProxyEvents[n], this.emit.bind(this, kProxyEvents[n]));\n  }\n\n  // when we try to consume some more bytes, simply unpause the\n  // underlying stream.\n  this._read = function (n) {\n    debug('wrapped _read', n);\n    if (paused) {\n      paused = false;\n      stream.resume();\n    }\n  };\n\n  return this;\n};\n\nObject.defineProperty(Readable.prototype, 'readableHighWaterMark', {\n  // making it explicit this property is not enumerable\n  // because otherwise some prototype manipulation in\n  // userland will fail\n  enumerable: false,\n  get: function () {\n    return this._readableState.highWaterMark;\n  }\n});\n\n// exposed for testing purposes only.\nReadable._fromList = fromList;\n\n// Pluck off n bytes from an array of buffers.\n// Length is the combined lengths of all the buffers in the list.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromList(n, state) {\n  // nothing buffered\n  if (state.length === 0) return null;\n\n  var ret;\n  if (state.objectMode) ret = state.buffer.shift();else if (!n || n >= state.length) {\n    // read it all, truncate the list\n    if (state.decoder) ret = state.buffer.join('');else if (state.buffer.length === 1) ret = state.buffer.head.data;else ret = state.buffer.concat(state.length);\n    state.buffer.clear();\n  } else {\n    // read part of list\n    ret = fromListPartial(n, state.buffer, state.decoder);\n  }\n\n  return ret;\n}\n\n// Extracts only enough buffered data to satisfy the amount requested.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction fromListPartial(n, list, hasStrings) {\n  var ret;\n  if (n < list.head.data.length) {\n    // slice is the same for buffers and strings\n    ret = list.head.data.slice(0, n);\n    list.head.data = list.head.data.slice(n);\n  } else if (n === list.head.data.length) {\n    // first chunk is a perfect match\n    ret = list.shift();\n  } else {\n    // result spans more than one buffer\n    ret = hasStrings ? copyFromBufferString(n, list) : copyFromBuffer(n, list);\n  }\n  return ret;\n}\n\n// Copies a specified amount of characters from the list of buffered data\n// chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBufferString(n, list) {\n  var p = list.head;\n  var c = 1;\n  var ret = p.data;\n  n -= ret.length;\n  while (p = p.next) {\n    var str = p.data;\n    var nb = n > str.length ? str.length : n;\n    if (nb === str.length) ret += str;else ret += str.slice(0, n);\n    n -= nb;\n    if (n === 0) {\n      if (nb === str.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = str.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\n// Copies a specified amount of bytes from the list of buffered data chunks.\n// This function is designed to be inlinable, so please take care when making\n// changes to the function body.\nfunction copyFromBuffer(n, list) {\n  var ret = Buffer.allocUnsafe(n);\n  var p = list.head;\n  var c = 1;\n  p.data.copy(ret);\n  n -= p.data.length;\n  while (p = p.next) {\n    var buf = p.data;\n    var nb = n > buf.length ? buf.length : n;\n    buf.copy(ret, ret.length - n, 0, nb);\n    n -= nb;\n    if (n === 0) {\n      if (nb === buf.length) {\n        ++c;\n        if (p.next) list.head = p.next;else list.head = list.tail = null;\n      } else {\n        list.head = p;\n        p.data = buf.slice(nb);\n      }\n      break;\n    }\n    ++c;\n  }\n  list.length -= c;\n  return ret;\n}\n\nfunction endReadable(stream) {\n  var state = stream._readableState;\n\n  // If we get here before consuming all the bytes, then that is a\n  // bug in node.  Should never happen.\n  if (state.length > 0) throw new Error('\"endReadable()\" called on non-empty stream');\n\n  if (!state.endEmitted) {\n    state.ended = true;\n    pna.nextTick(endReadableNT, state, stream);\n  }\n}\n\nfunction endReadableNT(state, stream) {\n  // Check that we didn't get one last unshift.\n  if (!state.endEmitted && state.length === 0) {\n    state.endEmitted = true;\n    stream.readable = false;\n    stream.emit('end');\n  }\n}\n\nfunction indexOf(xs, x) {\n  for (var i = 0, l = xs.length; i < l; i++) {\n    if (xs[i] === x) return i;\n  }\n  return -1;\n}","module.exports = require('events').EventEmitter;\n","'use strict';\n\n/*<replacement>*/\n\nvar pna = require('process-nextick-args');\n/*</replacement>*/\n\n// undocumented cb() API, needed for core, not for public API\nfunction destroy(err, cb) {\n  var _this = this;\n\n  var readableDestroyed = this._readableState && this._readableState.destroyed;\n  var writableDestroyed = this._writableState && this._writableState.destroyed;\n\n  if (readableDestroyed || writableDestroyed) {\n    if (cb) {\n      cb(err);\n    } else if (err && (!this._writableState || !this._writableState.errorEmitted)) {\n      pna.nextTick(emitErrorNT, this, err);\n    }\n    return this;\n  }\n\n  // we set destroyed to true before firing error callbacks in order\n  // to make it re-entrance safe in case destroy() is called within callbacks\n\n  if (this._readableState) {\n    this._readableState.destroyed = true;\n  }\n\n  // if this is a duplex stream mark the writable part as destroyed as well\n  if (this._writableState) {\n    this._writableState.destroyed = true;\n  }\n\n  this._destroy(err || null, function (err) {\n    if (!cb && err) {\n      pna.nextTick(emitErrorNT, _this, err);\n      if (_this._writableState) {\n        _this._writableState.errorEmitted = true;\n      }\n    } else if (cb) {\n      cb(err);\n    }\n  });\n\n  return this;\n}\n\nfunction undestroy() {\n  if (this._readableState) {\n    this._readableState.destroyed = false;\n    this._readableState.reading = false;\n    this._readableState.ended = false;\n    this._readableState.endEmitted = false;\n  }\n\n  if (this._writableState) {\n    this._writableState.destroyed = false;\n    this._writableState.ended = false;\n    this._writableState.ending = false;\n    this._writableState.finished = false;\n    this._writableState.errorEmitted = false;\n  }\n}\n\nfunction emitErrorNT(self, err) {\n  self.emit('error', err);\n}\n\nmodule.exports = {\n  destroy: destroy,\n  undestroy: undestroy\n};","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n/*<replacement>*/\n\nvar Buffer = require('safe-buffer').Buffer;\n/*</replacement>*/\n\nvar isEncoding = Buffer.isEncoding || function (encoding) {\n  encoding = '' + encoding;\n  switch (encoding && encoding.toLowerCase()) {\n    case 'hex':case 'utf8':case 'utf-8':case 'ascii':case 'binary':case 'base64':case 'ucs2':case 'ucs-2':case 'utf16le':case 'utf-16le':case 'raw':\n      return true;\n    default:\n      return false;\n  }\n};\n\nfunction _normalizeEncoding(enc) {\n  if (!enc) return 'utf8';\n  var retried;\n  while (true) {\n    switch (enc) {\n      case 'utf8':\n      case 'utf-8':\n        return 'utf8';\n      case 'ucs2':\n      case 'ucs-2':\n      case 'utf16le':\n      case 'utf-16le':\n        return 'utf16le';\n      case 'latin1':\n      case 'binary':\n        return 'latin1';\n      case 'base64':\n      case 'ascii':\n      case 'hex':\n        return enc;\n      default:\n        if (retried) return; // undefined\n        enc = ('' + enc).toLowerCase();\n        retried = true;\n    }\n  }\n};\n\n// Do not cache `Buffer.isEncoding` when checking encoding names as some\n// modules monkey-patch it to support additional encodings\nfunction normalizeEncoding(enc) {\n  var nenc = _normalizeEncoding(enc);\n  if (typeof nenc !== 'string' && (Buffer.isEncoding === isEncoding || !isEncoding(enc))) throw new Error('Unknown encoding: ' + enc);\n  return nenc || enc;\n}\n\n// StringDecoder provides an interface for efficiently splitting a series of\n// buffers into a series of JS strings without breaking apart multi-byte\n// characters.\nexports.StringDecoder = StringDecoder;\nfunction StringDecoder(encoding) {\n  this.encoding = normalizeEncoding(encoding);\n  var nb;\n  switch (this.encoding) {\n    case 'utf16le':\n      this.text = utf16Text;\n      this.end = utf16End;\n      nb = 4;\n      break;\n    case 'utf8':\n      this.fillLast = utf8FillLast;\n      nb = 4;\n      break;\n    case 'base64':\n      this.text = base64Text;\n      this.end = base64End;\n      nb = 3;\n      break;\n    default:\n      this.write = simpleWrite;\n      this.end = simpleEnd;\n      return;\n  }\n  this.lastNeed = 0;\n  this.lastTotal = 0;\n  this.lastChar = Buffer.allocUnsafe(nb);\n}\n\nStringDecoder.prototype.write = function (buf) {\n  if (buf.length === 0) return '';\n  var r;\n  var i;\n  if (this.lastNeed) {\n    r = this.fillLast(buf);\n    if (r === undefined) return '';\n    i = this.lastNeed;\n    this.lastNeed = 0;\n  } else {\n    i = 0;\n  }\n  if (i < buf.length) return r ? r + this.text(buf, i) : this.text(buf, i);\n  return r || '';\n};\n\nStringDecoder.prototype.end = utf8End;\n\n// Returns only complete characters in a Buffer\nStringDecoder.prototype.text = utf8Text;\n\n// Attempts to complete a partial non-UTF-8 character using bytes from a Buffer\nStringDecoder.prototype.fillLast = function (buf) {\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, this.lastTotal - this.lastNeed, 0, buf.length);\n  this.lastNeed -= buf.length;\n};\n\n// Checks the type of a UTF-8 byte, whether it's ASCII, a leading byte, or a\n// continuation byte. If an invalid byte is detected, -2 is returned.\nfunction utf8CheckByte(byte) {\n  if (byte <= 0x7F) return 0;else if (byte >> 5 === 0x06) return 2;else if (byte >> 4 === 0x0E) return 3;else if (byte >> 3 === 0x1E) return 4;\n  return byte >> 6 === 0x02 ? -1 : -2;\n}\n\n// Checks at most 3 bytes at the end of a Buffer in order to detect an\n// incomplete multi-byte UTF-8 character. The total number of bytes (2, 3, or 4)\n// needed to complete the UTF-8 character (if applicable) are returned.\nfunction utf8CheckIncomplete(self, buf, i) {\n  var j = buf.length - 1;\n  if (j < i) return 0;\n  var nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 1;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) self.lastNeed = nb - 2;\n    return nb;\n  }\n  if (--j < i || nb === -2) return 0;\n  nb = utf8CheckByte(buf[j]);\n  if (nb >= 0) {\n    if (nb > 0) {\n      if (nb === 2) nb = 0;else self.lastNeed = nb - 3;\n    }\n    return nb;\n  }\n  return 0;\n}\n\n// Validates as many continuation bytes for a multi-byte UTF-8 character as\n// needed or are available. If we see a non-continuation byte where we expect\n// one, we \"replace\" the validated continuation bytes we've seen so far with\n// a single UTF-8 replacement character ('\\ufffd'), to match v8's UTF-8 decoding\n// behavior. The continuation byte check is included three times in the case\n// where all of the continuation bytes for a character exist in the same buffer.\n// It is also done this way as a slight performance increase instead of using a\n// loop.\nfunction utf8CheckExtraBytes(self, buf, p) {\n  if ((buf[0] & 0xC0) !== 0x80) {\n    self.lastNeed = 0;\n    return '\\ufffd';\n  }\n  if (self.lastNeed > 1 && buf.length > 1) {\n    if ((buf[1] & 0xC0) !== 0x80) {\n      self.lastNeed = 1;\n      return '\\ufffd';\n    }\n    if (self.lastNeed > 2 && buf.length > 2) {\n      if ((buf[2] & 0xC0) !== 0x80) {\n        self.lastNeed = 2;\n        return '\\ufffd';\n      }\n    }\n  }\n}\n\n// Attempts to complete a multi-byte UTF-8 character using bytes from a Buffer.\nfunction utf8FillLast(buf) {\n  var p = this.lastTotal - this.lastNeed;\n  var r = utf8CheckExtraBytes(this, buf, p);\n  if (r !== undefined) return r;\n  if (this.lastNeed <= buf.length) {\n    buf.copy(this.lastChar, p, 0, this.lastNeed);\n    return this.lastChar.toString(this.encoding, 0, this.lastTotal);\n  }\n  buf.copy(this.lastChar, p, 0, buf.length);\n  this.lastNeed -= buf.length;\n}\n\n// Returns all complete UTF-8 characters in a Buffer. If the Buffer ended on a\n// partial character, the character's bytes are buffered until the required\n// number of bytes are available.\nfunction utf8Text(buf, i) {\n  var total = utf8CheckIncomplete(this, buf, i);\n  if (!this.lastNeed) return buf.toString('utf8', i);\n  this.lastTotal = total;\n  var end = buf.length - (total - this.lastNeed);\n  buf.copy(this.lastChar, 0, end);\n  return buf.toString('utf8', i, end);\n}\n\n// For UTF-8, a replacement character is added when ending on a partial\n// character.\nfunction utf8End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + '\\ufffd';\n  return r;\n}\n\n// UTF-16LE typically needs two bytes per character, but even if we have an even\n// number of bytes available, we need to check if we end on a leading/high\n// surrogate. In that case, we need to wait for the next two bytes in order to\n// decode the last character properly.\nfunction utf16Text(buf, i) {\n  if ((buf.length - i) % 2 === 0) {\n    var r = buf.toString('utf16le', i);\n    if (r) {\n      var c = r.charCodeAt(r.length - 1);\n      if (c >= 0xD800 && c <= 0xDBFF) {\n        this.lastNeed = 2;\n        this.lastTotal = 4;\n        this.lastChar[0] = buf[buf.length - 2];\n        this.lastChar[1] = buf[buf.length - 1];\n        return r.slice(0, -1);\n      }\n    }\n    return r;\n  }\n  this.lastNeed = 1;\n  this.lastTotal = 2;\n  this.lastChar[0] = buf[buf.length - 1];\n  return buf.toString('utf16le', i, buf.length - 1);\n}\n\n// For UTF-16LE we do not explicitly append special replacement characters if we\n// end on a partial character, we simply let v8 handle that.\nfunction utf16End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) {\n    var end = this.lastTotal - this.lastNeed;\n    return r + this.lastChar.toString('utf16le', 0, end);\n  }\n  return r;\n}\n\nfunction base64Text(buf, i) {\n  var n = (buf.length - i) % 3;\n  if (n === 0) return buf.toString('base64', i);\n  this.lastNeed = 3 - n;\n  this.lastTotal = 3;\n  if (n === 1) {\n    this.lastChar[0] = buf[buf.length - 1];\n  } else {\n    this.lastChar[0] = buf[buf.length - 2];\n    this.lastChar[1] = buf[buf.length - 1];\n  }\n  return buf.toString('base64', i, buf.length - n);\n}\n\nfunction base64End(buf) {\n  var r = buf && buf.length ? this.write(buf) : '';\n  if (this.lastNeed) return r + this.lastChar.toString('base64', 0, 3 - this.lastNeed);\n  return r;\n}\n\n// Pass bytes on through for single-byte encodings (e.g. ascii, latin1, hex)\nfunction simpleWrite(buf) {\n  return buf.toString(this.encoding);\n}\n\nfunction simpleEnd(buf) {\n  return buf && buf.length ? this.write(buf) : '';\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a transform stream is a readable/writable stream where you do\n// something with the data.  Sometimes it's called a \"filter\",\n// but that's not a great name for it, since that implies a thing where\n// some bits pass through, and others are simply ignored.  (That would\n// be a valid example of a transform, of course.)\n//\n// While the output is causally related to the input, it's not a\n// necessarily symmetric or synchronous transformation.  For example,\n// a zlib stream might take multiple plain-text writes(), and then\n// emit a single compressed chunk some time in the future.\n//\n// Here's how this works:\n//\n// The Transform stream has all the aspects of the readable and writable\n// stream classes.  When you write(chunk), that calls _write(chunk,cb)\n// internally, and returns false if there's a lot of pending writes\n// buffered up.  When you call read(), that calls _read(n) until\n// there's enough pending readable data buffered up.\n//\n// In a transform stream, the written data is placed in a buffer.  When\n// _read(n) is called, it transforms the queued up data, calling the\n// buffered _write cb's as it consumes chunks.  If consuming a single\n// written chunk would result in multiple output chunks, then the first\n// outputted bit calls the readcb, and subsequent chunks just go into\n// the read buffer, and will cause it to emit 'readable' if necessary.\n//\n// This way, back-pressure is actually determined by the reading side,\n// since _read has to be called to start processing a new chunk.  However,\n// a pathological inflate type of transform can cause excessive buffering\n// here.  For example, imagine a stream where every byte of input is\n// interpreted as an integer from 0-255, and then results in that many\n// bytes of output.  Writing the 4 bytes {ff,ff,ff,ff} would result in\n// 1kb of data being output.  In this case, you could write a very small\n// amount of input, and end up with a very large amount of output.  In\n// such a pathological inflating mechanism, there'd be no way to tell\n// the system to stop doing the transform.  A single 4MB write could\n// cause the system to run out of memory.\n//\n// However, even in such a pathological case, only a single written chunk\n// would be consumed, and then the rest would wait (un-transformed) until\n// the results of the previous transformed chunk were consumed.\n\n'use strict';\n\nmodule.exports = Transform;\n\nvar Duplex = require('./_stream_duplex');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(Transform, Duplex);\n\nfunction afterTransform(er, data) {\n  var ts = this._transformState;\n  ts.transforming = false;\n\n  var cb = ts.writecb;\n\n  if (!cb) {\n    return this.emit('error', new Error('write callback called multiple times'));\n  }\n\n  ts.writechunk = null;\n  ts.writecb = null;\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    this.push(data);\n\n  cb(er);\n\n  var rs = this._readableState;\n  rs.reading = false;\n  if (rs.needReadable || rs.length < rs.highWaterMark) {\n    this._read(rs.highWaterMark);\n  }\n}\n\nfunction Transform(options) {\n  if (!(this instanceof Transform)) return new Transform(options);\n\n  Duplex.call(this, options);\n\n  this._transformState = {\n    afterTransform: afterTransform.bind(this),\n    needTransform: false,\n    transforming: false,\n    writecb: null,\n    writechunk: null,\n    writeencoding: null\n  };\n\n  // start out asking for a readable event once data is transformed.\n  this._readableState.needReadable = true;\n\n  // we have implemented the _read method, and done the other things\n  // that Readable wants before the first _read call, so unset the\n  // sync guard flag.\n  this._readableState.sync = false;\n\n  if (options) {\n    if (typeof options.transform === 'function') this._transform = options.transform;\n\n    if (typeof options.flush === 'function') this._flush = options.flush;\n  }\n\n  // When the writable side finishes, then flush out anything remaining.\n  this.on('prefinish', prefinish);\n}\n\nfunction prefinish() {\n  var _this = this;\n\n  if (typeof this._flush === 'function') {\n    this._flush(function (er, data) {\n      done(_this, er, data);\n    });\n  } else {\n    done(this, null, null);\n  }\n}\n\nTransform.prototype.push = function (chunk, encoding) {\n  this._transformState.needTransform = false;\n  return Duplex.prototype.push.call(this, chunk, encoding);\n};\n\n// This is the part where you do stuff!\n// override this function in implementation classes.\n// 'chunk' is an input chunk.\n//\n// Call `push(newChunk)` to pass along transformed output\n// to the readable side.  You may call 'push' zero or more times.\n//\n// Call `cb(err)` when you are done with this chunk.  If you pass\n// an error, then that'll put the hurt on the whole operation.  If you\n// never call cb(), then you'll never get another chunk.\nTransform.prototype._transform = function (chunk, encoding, cb) {\n  throw new Error('_transform() is not implemented');\n};\n\nTransform.prototype._write = function (chunk, encoding, cb) {\n  var ts = this._transformState;\n  ts.writecb = cb;\n  ts.writechunk = chunk;\n  ts.writeencoding = encoding;\n  if (!ts.transforming) {\n    var rs = this._readableState;\n    if (ts.needTransform || rs.needReadable || rs.length < rs.highWaterMark) this._read(rs.highWaterMark);\n  }\n};\n\n// Doesn't matter what the args are here.\n// _transform does all the work.\n// That we got here means that the readable side wants more data.\nTransform.prototype._read = function (n) {\n  var ts = this._transformState;\n\n  if (ts.writechunk !== null && ts.writecb && !ts.transforming) {\n    ts.transforming = true;\n    this._transform(ts.writechunk, ts.writeencoding, ts.afterTransform);\n  } else {\n    // mark that we need a transform, so that any data that comes in\n    // will get processed, now that we've asked for it.\n    ts.needTransform = true;\n  }\n};\n\nTransform.prototype._destroy = function (err, cb) {\n  var _this2 = this;\n\n  Duplex.prototype._destroy.call(this, err, function (err2) {\n    cb(err2);\n    _this2.emit('close');\n  });\n};\n\nfunction done(stream, er, data) {\n  if (er) return stream.emit('error', er);\n\n  if (data != null) // single equals check for both `null` and `undefined`\n    stream.push(data);\n\n  // if there's nothing in the write buffer, then that means\n  // that nothing more will ever be provided\n  if (stream._writableState.length) throw new Error('Calling transform done when ws.length != 0');\n\n  if (stream._transformState.transforming) throw new Error('Calling transform done when still transforming');\n\n  return stream.push(null);\n}","import unsupportedIterableToArray from \"./unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o) {\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (o = unsupportedIterableToArray(o))) {\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var it,\n      normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","module.exports = function (given, base) {\n  var baseColon, baseScheme, baseSingle\n  var colon, lastSlash, path\n  var baseHash = base.indexOf('#')\n  if (baseHash > 0) {\n    base = base.slice(0, baseHash)\n  }\n  if (given.length === 0) {\n    return base\n  }\n  if (given.indexOf('#') === 0) {\n    return base + given\n  }\n  colon = given.indexOf(':')\n  if (colon >= 0) {\n    return given\n  }\n  baseColon = base.indexOf(':')\n  if (base.length === 0) {\n    return given\n  }\n  if (baseColon < 0) {\n    alert('Invalid base: ' + base + ' in join with given: ' + given)\n    return given\n  }\n  baseScheme = base.slice(0, +baseColon + 1 || 9e9)\n  if (given.indexOf('//') === 0) {\n    return baseScheme + given\n  }\n  if (base.indexOf('//', baseColon) === baseColon + 1) {\n    baseSingle = base.indexOf('/', baseColon + 3)\n    if (baseSingle < 0) {\n      if (base.length - baseColon - 3 > 0) {\n        return base + '/' + given\n      } else {\n        return baseScheme + given\n      }\n    }\n  } else {\n    baseSingle = base.indexOf('/', baseColon + 1)\n    if (baseSingle < 0) {\n      if (base.length - baseColon - 1 > 0) {\n        return base + '/' + given\n      } else {\n        return baseScheme + given\n      }\n    }\n  }\n  if (given.indexOf('/') === 0) {\n    return base.slice(0, baseSingle) + given\n  }\n  path = base.slice(baseSingle)\n  lastSlash = path.lastIndexOf('/')\n  if (lastSlash < 0) {\n    return baseScheme + given\n  }\n  if (lastSlash >= 0 && lastSlash < path.length - 1) {\n    path = path.slice(0, +lastSlash + 1 || 9e9)\n  }\n  path += given\n  while (path.match(/[^\\/]*\\/\\.\\.\\//)) {\n    path = path.replace(/[^\\/]*\\/\\.\\.\\//, '')\n  }\n  path = path.replace(/\\.\\//g, '')\n  path = path.replace(/\\/\\.$/, '/')\n  return base.slice(0, baseSingle) + path\n};\n","/*\n * DOM Level 2\n * Object DOMException\n * @see http://www.w3.org/TR/REC-DOM-Level-1/ecma-script-language-binding.html\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/ecma-script-binding.html\n */\n\nfunction copy(src,dest){\n\tfor(var p in src){\n\t\tdest[p] = src[p];\n\t}\n}\n/**\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*((?:.*\\{\\s*?[\\r\\n][\\s\\S]*?^})|\\S.*?(?=[;\\r\\n]));?\n^\\w+\\.prototype\\.([_\\w]+)\\s*=\\s*(\\S.*?(?=[;\\r\\n]));?\n */\nfunction _extends(Class,Super){\n\tvar pt = Class.prototype;\n\tif(Object.create){\n\t\tvar ppt = Object.create(Super.prototype)\n\t\tpt.__proto__ = ppt;\n\t}\n\tif(!(pt instanceof Super)){\n\t\tfunction t(){};\n\t\tt.prototype = Super.prototype;\n\t\tt = new t();\n\t\tcopy(pt,t);\n\t\tClass.prototype = pt = t;\n\t}\n\tif(pt.constructor != Class){\n\t\tif(typeof Class != 'function'){\n\t\t\tconsole.error(\"unknow Class:\"+Class)\n\t\t}\n\t\tpt.constructor = Class\n\t}\n}\nvar htmlns = 'http://www.w3.org/1999/xhtml' ;\n// Node Types\nvar NodeType = {}\nvar ELEMENT_NODE                = NodeType.ELEMENT_NODE                = 1;\nvar ATTRIBUTE_NODE              = NodeType.ATTRIBUTE_NODE              = 2;\nvar TEXT_NODE                   = NodeType.TEXT_NODE                   = 3;\nvar CDATA_SECTION_NODE          = NodeType.CDATA_SECTION_NODE          = 4;\nvar ENTITY_REFERENCE_NODE       = NodeType.ENTITY_REFERENCE_NODE       = 5;\nvar ENTITY_NODE                 = NodeType.ENTITY_NODE                 = 6;\nvar PROCESSING_INSTRUCTION_NODE = NodeType.PROCESSING_INSTRUCTION_NODE = 7;\nvar COMMENT_NODE                = NodeType.COMMENT_NODE                = 8;\nvar DOCUMENT_NODE               = NodeType.DOCUMENT_NODE               = 9;\nvar DOCUMENT_TYPE_NODE          = NodeType.DOCUMENT_TYPE_NODE          = 10;\nvar DOCUMENT_FRAGMENT_NODE      = NodeType.DOCUMENT_FRAGMENT_NODE      = 11;\nvar NOTATION_NODE               = NodeType.NOTATION_NODE               = 12;\n\n// ExceptionCode\nvar ExceptionCode = {}\nvar ExceptionMessage = {};\nvar INDEX_SIZE_ERR              = ExceptionCode.INDEX_SIZE_ERR              = ((ExceptionMessage[1]=\"Index size error\"),1);\nvar DOMSTRING_SIZE_ERR          = ExceptionCode.DOMSTRING_SIZE_ERR          = ((ExceptionMessage[2]=\"DOMString size error\"),2);\nvar HIERARCHY_REQUEST_ERR       = ExceptionCode.HIERARCHY_REQUEST_ERR       = ((ExceptionMessage[3]=\"Hierarchy request error\"),3);\nvar WRONG_DOCUMENT_ERR          = ExceptionCode.WRONG_DOCUMENT_ERR          = ((ExceptionMessage[4]=\"Wrong document\"),4);\nvar INVALID_CHARACTER_ERR       = ExceptionCode.INVALID_CHARACTER_ERR       = ((ExceptionMessage[5]=\"Invalid character\"),5);\nvar NO_DATA_ALLOWED_ERR         = ExceptionCode.NO_DATA_ALLOWED_ERR         = ((ExceptionMessage[6]=\"No data allowed\"),6);\nvar NO_MODIFICATION_ALLOWED_ERR = ExceptionCode.NO_MODIFICATION_ALLOWED_ERR = ((ExceptionMessage[7]=\"No modification allowed\"),7);\nvar NOT_FOUND_ERR               = ExceptionCode.NOT_FOUND_ERR               = ((ExceptionMessage[8]=\"Not found\"),8);\nvar NOT_SUPPORTED_ERR           = ExceptionCode.NOT_SUPPORTED_ERR           = ((ExceptionMessage[9]=\"Not supported\"),9);\nvar INUSE_ATTRIBUTE_ERR         = ExceptionCode.INUSE_ATTRIBUTE_ERR         = ((ExceptionMessage[10]=\"Attribute in use\"),10);\n//level2\nvar INVALID_STATE_ERR        \t= ExceptionCode.INVALID_STATE_ERR        \t= ((ExceptionMessage[11]=\"Invalid state\"),11);\nvar SYNTAX_ERR               \t= ExceptionCode.SYNTAX_ERR               \t= ((ExceptionMessage[12]=\"Syntax error\"),12);\nvar INVALID_MODIFICATION_ERR \t= ExceptionCode.INVALID_MODIFICATION_ERR \t= ((ExceptionMessage[13]=\"Invalid modification\"),13);\nvar NAMESPACE_ERR            \t= ExceptionCode.NAMESPACE_ERR           \t= ((ExceptionMessage[14]=\"Invalid namespace\"),14);\nvar INVALID_ACCESS_ERR       \t= ExceptionCode.INVALID_ACCESS_ERR      \t= ((ExceptionMessage[15]=\"Invalid access\"),15);\n\n\nfunction DOMException(code, message) {\n\tif(message instanceof Error){\n\t\tvar error = message;\n\t}else{\n\t\terror = this;\n\t\tError.call(this, ExceptionMessage[code]);\n\t\tthis.message = ExceptionMessage[code];\n\t\tif(Error.captureStackTrace) Error.captureStackTrace(this, DOMException);\n\t}\n\terror.code = code;\n\tif(message) this.message = this.message + \": \" + message;\n\treturn error;\n};\nDOMException.prototype = Error.prototype;\ncopy(ExceptionCode,DOMException)\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-536297177\n * The NodeList interface provides the abstraction of an ordered collection of nodes, without defining or constraining how this collection is implemented. NodeList objects in the DOM are live.\n * The items in the NodeList are accessible via an integral index, starting from 0.\n */\nfunction NodeList() {\n};\nNodeList.prototype = {\n\t/**\n\t * The number of nodes in the list. The range of valid child node indices is 0 to length-1 inclusive.\n\t * @standard level1\n\t */\n\tlength:0, \n\t/**\n\t * Returns the indexth item in the collection. If index is greater than or equal to the number of nodes in the list, this returns null.\n\t * @standard level1\n\t * @param index  unsigned long \n\t *   Index into the collection.\n\t * @return Node\n\t * \tThe node at the indexth position in the NodeList, or null if that is not a valid index. \n\t */\n\titem: function(index) {\n\t\treturn this[index] || null;\n\t},\n\ttoString:function(isHTML,nodeFilter){\n\t\tfor(var buf = [], i = 0;i<this.length;i++){\n\t\t\tserializeToString(this[i],buf,isHTML,nodeFilter);\n\t\t}\n\t\treturn buf.join('');\n\t}\n};\nfunction LiveNodeList(node,refresh){\n\tthis._node = node;\n\tthis._refresh = refresh\n\t_updateLiveList(this);\n}\nfunction _updateLiveList(list){\n\tvar inc = list._node._inc || list._node.ownerDocument._inc;\n\tif(list._inc != inc){\n\t\tvar ls = list._refresh(list._node);\n\t\t//console.log(ls.length)\n\t\t__set__(list,'length',ls.length);\n\t\tcopy(ls,list);\n\t\tlist._inc = inc;\n\t}\n}\nLiveNodeList.prototype.item = function(i){\n\t_updateLiveList(this);\n\treturn this[i];\n}\n\n_extends(LiveNodeList,NodeList);\n/**\n * \n * Objects implementing the NamedNodeMap interface are used to represent collections of nodes that can be accessed by name. Note that NamedNodeMap does not inherit from NodeList; NamedNodeMaps are not maintained in any particular order. Objects contained in an object implementing NamedNodeMap may also be accessed by an ordinal index, but this is simply to allow convenient enumeration of the contents of a NamedNodeMap, and does not imply that the DOM specifies an order to these Nodes.\n * NamedNodeMap objects in the DOM are live.\n * used for attributes or DocumentType entities \n */\nfunction NamedNodeMap() {\n};\n\nfunction _findNodeIndex(list,node){\n\tvar i = list.length;\n\twhile(i--){\n\t\tif(list[i] === node){return i}\n\t}\n}\n\nfunction _addNamedNode(el,list,newAttr,oldAttr){\n\tif(oldAttr){\n\t\tlist[_findNodeIndex(list,oldAttr)] = newAttr;\n\t}else{\n\t\tlist[list.length++] = newAttr;\n\t}\n\tif(el){\n\t\tnewAttr.ownerElement = el;\n\t\tvar doc = el.ownerDocument;\n\t\tif(doc){\n\t\t\toldAttr && _onRemoveAttribute(doc,el,oldAttr);\n\t\t\t_onAddAttribute(doc,el,newAttr);\n\t\t}\n\t}\n}\nfunction _removeNamedNode(el,list,attr){\n\t//console.log('remove attr:'+attr)\n\tvar i = _findNodeIndex(list,attr);\n\tif(i>=0){\n\t\tvar lastIndex = list.length-1\n\t\twhile(i<lastIndex){\n\t\t\tlist[i] = list[++i]\n\t\t}\n\t\tlist.length = lastIndex;\n\t\tif(el){\n\t\t\tvar doc = el.ownerDocument;\n\t\t\tif(doc){\n\t\t\t\t_onRemoveAttribute(doc,el,attr);\n\t\t\t\tattr.ownerElement = null;\n\t\t\t}\n\t\t}\n\t}else{\n\t\tthrow DOMException(NOT_FOUND_ERR,new Error(el.tagName+'@'+attr))\n\t}\n}\nNamedNodeMap.prototype = {\n\tlength:0,\n\titem:NodeList.prototype.item,\n\tgetNamedItem: function(key) {\n//\t\tif(key.indexOf(':')>0 || key == 'xmlns'){\n//\t\t\treturn null;\n//\t\t}\n\t\t//console.log()\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar attr = this[i];\n\t\t\t//console.log(attr.nodeName,key)\n\t\t\tif(attr.nodeName == key){\n\t\t\t\treturn attr;\n\t\t\t}\n\t\t}\n\t},\n\tsetNamedItem: function(attr) {\n\t\tvar el = attr.ownerElement;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\tvar oldAttr = this.getNamedItem(attr.nodeName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\t/* returns Node */\n\tsetNamedItemNS: function(attr) {// raises: WRONG_DOCUMENT_ERR,NO_MODIFICATION_ALLOWED_ERR,INUSE_ATTRIBUTE_ERR\n\t\tvar el = attr.ownerElement, oldAttr;\n\t\tif(el && el!=this._ownerElement){\n\t\t\tthrow new DOMException(INUSE_ATTRIBUTE_ERR);\n\t\t}\n\t\toldAttr = this.getNamedItemNS(attr.namespaceURI,attr.localName);\n\t\t_addNamedNode(this._ownerElement,this,attr,oldAttr);\n\t\treturn oldAttr;\n\t},\n\n\t/* returns Node */\n\tremoveNamedItem: function(key) {\n\t\tvar attr = this.getNamedItem(key);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t\t\n\t\t\n\t},// raises: NOT_FOUND_ERR,NO_MODIFICATION_ALLOWED_ERR\n\t\n\t//for level2\n\tremoveNamedItemNS:function(namespaceURI,localName){\n\t\tvar attr = this.getNamedItemNS(namespaceURI,localName);\n\t\t_removeNamedNode(this._ownerElement,this,attr);\n\t\treturn attr;\n\t},\n\tgetNamedItemNS: function(namespaceURI, localName) {\n\t\tvar i = this.length;\n\t\twhile(i--){\n\t\t\tvar node = this[i];\n\t\t\tif(node.localName == localName && node.namespaceURI == namespaceURI){\n\t\t\t\treturn node;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n};\n/**\n * @see http://www.w3.org/TR/REC-DOM-Level-1/level-one-core.html#ID-102161490\n */\nfunction DOMImplementation(/* Object */ features) {\n\tthis._features = {};\n\tif (features) {\n\t\tfor (var feature in features) {\n\t\t\t this._features = features[feature];\n\t\t}\n\t}\n};\n\nDOMImplementation.prototype = {\n\thasFeature: function(/* string */ feature, /* string */ version) {\n\t\tvar versions = this._features[feature.toLowerCase()];\n\t\tif (versions && (!version || version in versions)) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocument:function(namespaceURI,  qualifiedName, doctype){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR,WRONG_DOCUMENT_ERR\n\t\tvar doc = new Document();\n\t\tdoc.implementation = this;\n\t\tdoc.childNodes = new NodeList();\n\t\tdoc.doctype = doctype;\n\t\tif(doctype){\n\t\t\tdoc.appendChild(doctype);\n\t\t}\n\t\tif(qualifiedName){\n\t\t\tvar root = doc.createElementNS(namespaceURI,qualifiedName);\n\t\t\tdoc.appendChild(root);\n\t\t}\n\t\treturn doc;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateDocumentType:function(qualifiedName, publicId, systemId){// raises:INVALID_CHARACTER_ERR,NAMESPACE_ERR\n\t\tvar node = new DocumentType();\n\t\tnode.name = qualifiedName;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.publicId = publicId;\n\t\tnode.systemId = systemId;\n\t\t// Introduced in DOM Level 2:\n\t\t//readonly attribute DOMString        internalSubset;\n\t\t\n\t\t//TODO:..\n\t\t//  readonly attribute NamedNodeMap     entities;\n\t\t//  readonly attribute NamedNodeMap     notations;\n\t\treturn node;\n\t}\n};\n\n\n/**\n * @see http://www.w3.org/TR/2000/REC-DOM-Level-2-Core-20001113/core.html#ID-1950641247\n */\n\nfunction Node() {\n};\n\nNode.prototype = {\n\tfirstChild : null,\n\tlastChild : null,\n\tpreviousSibling : null,\n\tnextSibling : null,\n\tattributes : null,\n\tparentNode : null,\n\tchildNodes : null,\n\townerDocument : null,\n\tnodeValue : null,\n\tnamespaceURI : null,\n\tprefix : null,\n\tlocalName : null,\n\t// Modified in DOM Level 2:\n\tinsertBefore:function(newChild, refChild){//raises \n\t\treturn _insertBefore(this,newChild,refChild);\n\t},\n\treplaceChild:function(newChild, oldChild){//raises \n\t\tthis.insertBefore(newChild,oldChild);\n\t\tif(oldChild){\n\t\t\tthis.removeChild(oldChild);\n\t\t}\n\t},\n\tremoveChild:function(oldChild){\n\t\treturn _removeChild(this,oldChild);\n\t},\n\tappendChild:function(newChild){\n\t\treturn this.insertBefore(newChild,null);\n\t},\n\thasChildNodes:function(){\n\t\treturn this.firstChild != null;\n\t},\n\tcloneNode:function(deep){\n\t\treturn cloneNode(this.ownerDocument||this,this,deep);\n\t},\n\t// Modified in DOM Level 2:\n\tnormalize:function(){\n\t\tvar child = this.firstChild;\n\t\twhile(child){\n\t\t\tvar next = child.nextSibling;\n\t\t\tif(next && next.nodeType == TEXT_NODE && child.nodeType == TEXT_NODE){\n\t\t\t\tthis.removeChild(next);\n\t\t\t\tchild.appendData(next.data);\n\t\t\t}else{\n\t\t\t\tchild.normalize();\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t}\n\t},\n  \t// Introduced in DOM Level 2:\n\tisSupported:function(feature, version){\n\t\treturn this.ownerDocument.implementation.hasFeature(feature,version);\n\t},\n    // Introduced in DOM Level 2:\n    hasAttributes:function(){\n    \treturn this.attributes.length>0;\n    },\n    lookupPrefix:function(namespaceURI){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tfor(var n in map){\n    \t\t\t\tif(map[n] == namespaceURI){\n    \t\t\t\t\treturn n;\n    \t\t\t\t}\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    lookupNamespaceURI:function(prefix){\n    \tvar el = this;\n    \twhile(el){\n    \t\tvar map = el._nsMap;\n    \t\t//console.dir(map)\n    \t\tif(map){\n    \t\t\tif(prefix in map){\n    \t\t\t\treturn map[prefix] ;\n    \t\t\t}\n    \t\t}\n    \t\tel = el.nodeType == ATTRIBUTE_NODE?el.ownerDocument : el.parentNode;\n    \t}\n    \treturn null;\n    },\n    // Introduced in DOM Level 3:\n    isDefaultNamespace:function(namespaceURI){\n    \tvar prefix = this.lookupPrefix(namespaceURI);\n    \treturn prefix == null;\n    }\n};\n\n\nfunction _xmlEncoder(c){\n\treturn c == '<' && '&lt;' ||\n         c == '>' && '&gt;' ||\n         c == '&' && '&amp;' ||\n         c == '\"' && '&quot;' ||\n         '&#'+c.charCodeAt()+';'\n}\n\n\ncopy(NodeType,Node);\ncopy(NodeType,Node.prototype);\n\n/**\n * @param callback return true for continue,false for break\n * @return boolean true: break visit;\n */\nfunction _visitNode(node,callback){\n\tif(callback(node)){\n\t\treturn true;\n\t}\n\tif(node = node.firstChild){\n\t\tdo{\n\t\t\tif(_visitNode(node,callback)){return true}\n        }while(node=node.nextSibling)\n    }\n}\n\n\n\nfunction Document(){\n}\nfunction _onAddAttribute(doc,el,newAttr){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tel._nsMap[newAttr.prefix?newAttr.localName:''] = newAttr.value\n\t}\n}\nfunction _onRemoveAttribute(doc,el,newAttr,remove){\n\tdoc && doc._inc++;\n\tvar ns = newAttr.namespaceURI ;\n\tif(ns == 'http://www.w3.org/2000/xmlns/'){\n\t\t//update namespace\n\t\tdelete el._nsMap[newAttr.prefix?newAttr.localName:'']\n\t}\n}\nfunction _onUpdateChild(doc,el,newChild){\n\tif(doc && doc._inc){\n\t\tdoc._inc++;\n\t\t//update childNodes\n\t\tvar cs = el.childNodes;\n\t\tif(newChild){\n\t\t\tcs[cs.length++] = newChild;\n\t\t}else{\n\t\t\t//console.log(1)\n\t\t\tvar child = el.firstChild;\n\t\t\tvar i = 0;\n\t\t\twhile(child){\n\t\t\t\tcs[i++] = child;\n\t\t\t\tchild =child.nextSibling;\n\t\t\t}\n\t\t\tcs.length = i;\n\t\t}\n\t}\n}\n\n/**\n * attributes;\n * children;\n * \n * writeable properties:\n * nodeValue,Attr:value,CharacterData:data\n * prefix\n */\nfunction _removeChild(parentNode,child){\n\tvar previous = child.previousSibling;\n\tvar next = child.nextSibling;\n\tif(previous){\n\t\tprevious.nextSibling = next;\n\t}else{\n\t\tparentNode.firstChild = next\n\t}\n\tif(next){\n\t\tnext.previousSibling = previous;\n\t}else{\n\t\tparentNode.lastChild = previous;\n\t}\n\t_onUpdateChild(parentNode.ownerDocument,parentNode);\n\treturn child;\n}\n/**\n * preformance key(refChild == null)\n */\nfunction _insertBefore(parentNode,newChild,nextChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tcp.removeChild(newChild);//remove and update\n\t}\n\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\tvar newFirst = newChild.firstChild;\n\t\tif (newFirst == null) {\n\t\t\treturn newChild;\n\t\t}\n\t\tvar newLast = newChild.lastChild;\n\t}else{\n\t\tnewFirst = newLast = newChild;\n\t}\n\tvar pre = nextChild ? nextChild.previousSibling : parentNode.lastChild;\n\n\tnewFirst.previousSibling = pre;\n\tnewLast.nextSibling = nextChild;\n\t\n\t\n\tif(pre){\n\t\tpre.nextSibling = newFirst;\n\t}else{\n\t\tparentNode.firstChild = newFirst;\n\t}\n\tif(nextChild == null){\n\t\tparentNode.lastChild = newLast;\n\t}else{\n\t\tnextChild.previousSibling = newLast;\n\t}\n\tdo{\n\t\tnewFirst.parentNode = parentNode;\n\t}while(newFirst !== newLast && (newFirst= newFirst.nextSibling))\n\t_onUpdateChild(parentNode.ownerDocument||parentNode,parentNode);\n\t//console.log(parentNode.lastChild.nextSibling == null)\n\tif (newChild.nodeType == DOCUMENT_FRAGMENT_NODE) {\n\t\tnewChild.firstChild = newChild.lastChild = null;\n\t}\n\treturn newChild;\n}\nfunction _appendSingleChild(parentNode,newChild){\n\tvar cp = newChild.parentNode;\n\tif(cp){\n\t\tvar pre = parentNode.lastChild;\n\t\tcp.removeChild(newChild);//remove and update\n\t\tvar pre = parentNode.lastChild;\n\t}\n\tvar pre = parentNode.lastChild;\n\tnewChild.parentNode = parentNode;\n\tnewChild.previousSibling = pre;\n\tnewChild.nextSibling = null;\n\tif(pre){\n\t\tpre.nextSibling = newChild;\n\t}else{\n\t\tparentNode.firstChild = newChild;\n\t}\n\tparentNode.lastChild = newChild;\n\t_onUpdateChild(parentNode.ownerDocument,parentNode,newChild);\n\treturn newChild;\n\t//console.log(\"__aa\",parentNode.lastChild.nextSibling == null)\n}\nDocument.prototype = {\n\t//implementation : null,\n\tnodeName :  '#document',\n\tnodeType :  DOCUMENT_NODE,\n\tdoctype :  null,\n\tdocumentElement :  null,\n\t_inc : 1,\n\t\n\tinsertBefore :  function(newChild, refChild){//raises \n\t\tif(newChild.nodeType == DOCUMENT_FRAGMENT_NODE){\n\t\t\tvar child = newChild.firstChild;\n\t\t\twhile(child){\n\t\t\t\tvar next = child.nextSibling;\n\t\t\t\tthis.insertBefore(child,refChild);\n\t\t\t\tchild = next;\n\t\t\t}\n\t\t\treturn newChild;\n\t\t}\n\t\tif(this.documentElement == null && newChild.nodeType == ELEMENT_NODE){\n\t\t\tthis.documentElement = newChild;\n\t\t}\n\t\t\n\t\treturn _insertBefore(this,newChild,refChild),(newChild.ownerDocument = this),newChild;\n\t},\n\tremoveChild :  function(oldChild){\n\t\tif(this.documentElement == oldChild){\n\t\t\tthis.documentElement = null;\n\t\t}\n\t\treturn _removeChild(this,oldChild);\n\t},\n\t// Introduced in DOM Level 2:\n\timportNode : function(importedNode,deep){\n\t\treturn importNode(this,importedNode,deep);\n\t},\n\t// Introduced in DOM Level 2:\n\tgetElementById :\tfunction(id){\n\t\tvar rtv = null;\n\t\t_visitNode(this.documentElement,function(node){\n\t\t\tif(node.nodeType == ELEMENT_NODE){\n\t\t\t\tif(node.getAttribute('id') == id){\n\t\t\t\t\trtv = node;\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\treturn rtv;\n\t},\n\t\n\t//document factory method:\n\tcreateElement :\tfunction(tagName){\n\t\tvar node = new Element();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = tagName;\n\t\tnode.tagName = tagName;\n\t\tnode.childNodes = new NodeList();\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\tcreateDocumentFragment :\tfunction(){\n\t\tvar node = new DocumentFragment();\n\t\tnode.ownerDocument = this;\n\t\tnode.childNodes = new NodeList();\n\t\treturn node;\n\t},\n\tcreateTextNode :\tfunction(data){\n\t\tvar node = new Text();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateComment :\tfunction(data){\n\t\tvar node = new Comment();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateCDATASection :\tfunction(data){\n\t\tvar node = new CDATASection();\n\t\tnode.ownerDocument = this;\n\t\tnode.appendData(data)\n\t\treturn node;\n\t},\n\tcreateProcessingInstruction :\tfunction(target,data){\n\t\tvar node = new ProcessingInstruction();\n\t\tnode.ownerDocument = this;\n\t\tnode.tagName = node.target = target;\n\t\tnode.nodeValue= node.data = data;\n\t\treturn node;\n\t},\n\tcreateAttribute :\tfunction(name){\n\t\tvar node = new Attr();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.name = name;\n\t\tnode.nodeName\t= name;\n\t\tnode.localName = name;\n\t\tnode.specified = true;\n\t\treturn node;\n\t},\n\tcreateEntityReference :\tfunction(name){\n\t\tvar node = new EntityReference();\n\t\tnode.ownerDocument\t= this;\n\t\tnode.nodeName\t= name;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateElementNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Element();\n\t\tvar pl = qualifiedName.split(':');\n\t\tvar attrs\t= node.attributes = new NamedNodeMap();\n\t\tnode.childNodes = new NodeList();\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.tagName = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\tattrs._ownerElement = node;\n\t\treturn node;\n\t},\n\t// Introduced in DOM Level 2:\n\tcreateAttributeNS :\tfunction(namespaceURI,qualifiedName){\n\t\tvar node = new Attr();\n\t\tvar pl = qualifiedName.split(':');\n\t\tnode.ownerDocument = this;\n\t\tnode.nodeName = qualifiedName;\n\t\tnode.name = qualifiedName;\n\t\tnode.namespaceURI = namespaceURI;\n\t\tnode.specified = true;\n\t\tif(pl.length == 2){\n\t\t\tnode.prefix = pl[0];\n\t\t\tnode.localName = pl[1];\n\t\t}else{\n\t\t\t//el.prefix = null;\n\t\t\tnode.localName = qualifiedName;\n\t\t}\n\t\treturn node;\n\t}\n};\n_extends(Document,Node);\n\n\nfunction Element() {\n\tthis._nsMap = {};\n};\nElement.prototype = {\n\tnodeType : ELEMENT_NODE,\n\thasAttribute : function(name){\n\t\treturn this.getAttributeNode(name)!=null;\n\t},\n\tgetAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name);\n\t\treturn attr && attr.value || '';\n\t},\n\tgetAttributeNode : function(name){\n\t\treturn this.attributes.getNamedItem(name);\n\t},\n\tsetAttribute : function(name, value){\n\t\tvar attr = this.ownerDocument.createAttribute(name);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tremoveAttribute : function(name){\n\t\tvar attr = this.getAttributeNode(name)\n\t\tattr && this.removeAttributeNode(attr);\n\t},\n\t\n\t//four real opeartion method\n\tappendChild:function(newChild){\n\t\tif(newChild.nodeType === DOCUMENT_FRAGMENT_NODE){\n\t\t\treturn this.insertBefore(newChild,null);\n\t\t}else{\n\t\t\treturn _appendSingleChild(this,newChild);\n\t\t}\n\t},\n\tsetAttributeNode : function(newAttr){\n\t\treturn this.attributes.setNamedItem(newAttr);\n\t},\n\tsetAttributeNodeNS : function(newAttr){\n\t\treturn this.attributes.setNamedItemNS(newAttr);\n\t},\n\tremoveAttributeNode : function(oldAttr){\n\t\t//console.log(this == oldAttr.ownerElement)\n\t\treturn this.attributes.removeNamedItem(oldAttr.nodeName);\n\t},\n\t//get real attribute name,and remove it by removeAttributeNode\n\tremoveAttributeNS : function(namespaceURI, localName){\n\t\tvar old = this.getAttributeNodeNS(namespaceURI, localName);\n\t\told && this.removeAttributeNode(old);\n\t},\n\t\n\thasAttributeNS : function(namespaceURI, localName){\n\t\treturn this.getAttributeNodeNS(namespaceURI, localName)!=null;\n\t},\n\tgetAttributeNS : function(namespaceURI, localName){\n\t\tvar attr = this.getAttributeNodeNS(namespaceURI, localName);\n\t\treturn attr && attr.value || '';\n\t},\n\tsetAttributeNS : function(namespaceURI, qualifiedName, value){\n\t\tvar attr = this.ownerDocument.createAttributeNS(namespaceURI, qualifiedName);\n\t\tattr.value = attr.nodeValue = \"\" + value;\n\t\tthis.setAttributeNode(attr)\n\t},\n\tgetAttributeNodeNS : function(namespaceURI, localName){\n\t\treturn this.attributes.getNamedItemNS(namespaceURI, localName);\n\t},\n\t\n\tgetElementsByTagName : function(tagName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType == ELEMENT_NODE && (tagName === '*' || node.tagName == tagName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t});\n\t},\n\tgetElementsByTagNameNS : function(namespaceURI, localName){\n\t\treturn new LiveNodeList(this,function(base){\n\t\t\tvar ls = [];\n\t\t\t_visitNode(base,function(node){\n\t\t\t\tif(node !== base && node.nodeType === ELEMENT_NODE && (namespaceURI === '*' || node.namespaceURI === namespaceURI) && (localName === '*' || node.localName == localName)){\n\t\t\t\t\tls.push(node);\n\t\t\t\t}\n\t\t\t});\n\t\t\treturn ls;\n\t\t\t\n\t\t});\n\t}\n};\nDocument.prototype.getElementsByTagName = Element.prototype.getElementsByTagName;\nDocument.prototype.getElementsByTagNameNS = Element.prototype.getElementsByTagNameNS;\n\n\n_extends(Element,Node);\nfunction Attr() {\n};\nAttr.prototype.nodeType = ATTRIBUTE_NODE;\n_extends(Attr,Node);\n\n\nfunction CharacterData() {\n};\nCharacterData.prototype = {\n\tdata : '',\n\tsubstringData : function(offset, count) {\n\t\treturn this.data.substring(offset, offset+count);\n\t},\n\tappendData: function(text) {\n\t\ttext = this.data+text;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t},\n\tinsertData: function(offset,text) {\n\t\tthis.replaceData(offset,0,text);\n\t\n\t},\n\tappendChild:function(newChild){\n\t\tthrow new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])\n\t},\n\tdeleteData: function(offset, count) {\n\t\tthis.replaceData(offset,count,\"\");\n\t},\n\treplaceData: function(offset, count, text) {\n\t\tvar start = this.data.substring(0,offset);\n\t\tvar end = this.data.substring(offset+count);\n\t\ttext = start + text + end;\n\t\tthis.nodeValue = this.data = text;\n\t\tthis.length = text.length;\n\t}\n}\n_extends(CharacterData,Node);\nfunction Text() {\n};\nText.prototype = {\n\tnodeName : \"#text\",\n\tnodeType : TEXT_NODE,\n\tsplitText : function(offset) {\n\t\tvar text = this.data;\n\t\tvar newText = text.substring(offset);\n\t\ttext = text.substring(0, offset);\n\t\tthis.data = this.nodeValue = text;\n\t\tthis.length = text.length;\n\t\tvar newNode = this.ownerDocument.createTextNode(newText);\n\t\tif(this.parentNode){\n\t\t\tthis.parentNode.insertBefore(newNode, this.nextSibling);\n\t\t}\n\t\treturn newNode;\n\t}\n}\n_extends(Text,CharacterData);\nfunction Comment() {\n};\nComment.prototype = {\n\tnodeName : \"#comment\",\n\tnodeType : COMMENT_NODE\n}\n_extends(Comment,CharacterData);\n\nfunction CDATASection() {\n};\nCDATASection.prototype = {\n\tnodeName : \"#cdata-section\",\n\tnodeType : CDATA_SECTION_NODE\n}\n_extends(CDATASection,CharacterData);\n\n\nfunction DocumentType() {\n};\nDocumentType.prototype.nodeType = DOCUMENT_TYPE_NODE;\n_extends(DocumentType,Node);\n\nfunction Notation() {\n};\nNotation.prototype.nodeType = NOTATION_NODE;\n_extends(Notation,Node);\n\nfunction Entity() {\n};\nEntity.prototype.nodeType = ENTITY_NODE;\n_extends(Entity,Node);\n\nfunction EntityReference() {\n};\nEntityReference.prototype.nodeType = ENTITY_REFERENCE_NODE;\n_extends(EntityReference,Node);\n\nfunction DocumentFragment() {\n};\nDocumentFragment.prototype.nodeName =\t\"#document-fragment\";\nDocumentFragment.prototype.nodeType =\tDOCUMENT_FRAGMENT_NODE;\n_extends(DocumentFragment,Node);\n\n\nfunction ProcessingInstruction() {\n}\nProcessingInstruction.prototype.nodeType = PROCESSING_INSTRUCTION_NODE;\n_extends(ProcessingInstruction,Node);\nfunction XMLSerializer(){}\nXMLSerializer.prototype.serializeToString = function(node,isHtml,nodeFilter){\n\treturn nodeSerializeToString.call(node,isHtml,nodeFilter);\n}\nNode.prototype.toString = nodeSerializeToString;\nfunction nodeSerializeToString(isHtml,nodeFilter){\n\tvar buf = [];\n\tvar refNode = this.nodeType == 9?this.documentElement:this;\n\tvar prefix = refNode.prefix;\n\tvar uri = refNode.namespaceURI;\n\t\n\tif(uri && prefix == null){\n\t\t//console.log(prefix)\n\t\tvar prefix = refNode.lookupPrefix(uri);\n\t\tif(prefix == null){\n\t\t\t//isHTML = true;\n\t\t\tvar visibleNamespaces=[\n\t\t\t{namespace:uri,prefix:null}\n\t\t\t//{namespace:uri,prefix:''}\n\t\t\t]\n\t\t}\n\t}\n\tserializeToString(this,buf,isHtml,nodeFilter,visibleNamespaces);\n\t//console.log('###',this.nodeType,uri,prefix,buf.join(''))\n\treturn buf.join('');\n}\nfunction needNamespaceDefine(node,isHTML, visibleNamespaces) {\n\tvar prefix = node.prefix||'';\n\tvar uri = node.namespaceURI;\n\tif (!prefix && !uri){\n\t\treturn false;\n\t}\n\tif (prefix === \"xml\" && uri === \"http://www.w3.org/XML/1998/namespace\" \n\t\t|| uri == 'http://www.w3.org/2000/xmlns/'){\n\t\treturn false;\n\t}\n\t\n\tvar i = visibleNamespaces.length \n\t//console.log('@@@@',node.tagName,prefix,uri,visibleNamespaces)\n\twhile (i--) {\n\t\tvar ns = visibleNamespaces[i];\n\t\t// get namespace prefix\n\t\t//console.log(node.nodeType,node.tagName,ns.prefix,prefix)\n\t\tif (ns.prefix == prefix){\n\t\t\treturn ns.namespace != uri;\n\t\t}\n\t}\n\t//console.log(isHTML,uri,prefix=='')\n\t//if(isHTML && prefix ==null && uri == 'http://www.w3.org/1999/xhtml'){\n\t//\treturn false;\n\t//}\n\t//node.flag = '11111'\n\t//console.error(3,true,node.flag,node.prefix,node.namespaceURI)\n\treturn true;\n}\nfunction serializeToString(node,buf,isHTML,nodeFilter,visibleNamespaces){\n\tif(nodeFilter){\n\t\tnode = nodeFilter(node);\n\t\tif(node){\n\t\t\tif(typeof node == 'string'){\n\t\t\t\tbuf.push(node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}else{\n\t\t\treturn;\n\t\t}\n\t\t//buf.sort.apply(attrs, attributeSorter);\n\t}\n\tswitch(node.nodeType){\n\tcase ELEMENT_NODE:\n\t\tif (!visibleNamespaces) visibleNamespaces = [];\n\t\tvar startVisibleNamespaces = visibleNamespaces.length;\n\t\tvar attrs = node.attributes;\n\t\tvar len = attrs.length;\n\t\tvar child = node.firstChild;\n\t\tvar nodeName = node.tagName;\n\t\t\n\t\tisHTML =  (htmlns === node.namespaceURI) ||isHTML \n\t\tbuf.push('<',nodeName);\n\t\t\n\t\t\n\t\t\n\t\tfor(var i=0;i<len;i++){\n\t\t\t// add namespaces for attributes\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (attr.prefix == 'xmlns') {\n\t\t\t\tvisibleNamespaces.push({ prefix: attr.localName, namespace: attr.value });\n\t\t\t}else if(attr.nodeName == 'xmlns'){\n\t\t\t\tvisibleNamespaces.push({ prefix: '', namespace: attr.value });\n\t\t\t}\n\t\t}\n\t\tfor(var i=0;i<len;i++){\n\t\t\tvar attr = attrs.item(i);\n\t\t\tif (needNamespaceDefine(attr,isHTML, visibleNamespaces)) {\n\t\t\t\tvar prefix = attr.prefix||'';\n\t\t\t\tvar uri = attr.namespaceURI;\n\t\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t\t}\n\t\t\tserializeToString(attr,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t}\n\t\t// add namespace for current node\t\t\n\t\tif (needNamespaceDefine(node,isHTML, visibleNamespaces)) {\n\t\t\tvar prefix = node.prefix||'';\n\t\t\tvar uri = node.namespaceURI;\n\t\t\tvar ns = prefix ? ' xmlns:' + prefix : \" xmlns\";\n\t\t\tbuf.push(ns, '=\"' , uri , '\"');\n\t\t\tvisibleNamespaces.push({ prefix: prefix, namespace:uri });\n\t\t}\n\t\t\n\t\tif(child || isHTML && !/^(?:meta|link|img|br|hr|input)$/i.test(nodeName)){\n\t\t\tbuf.push('>');\n\t\t\t//if is cdata child node\n\t\t\tif(isHTML && /^script$/i.test(nodeName)){\n\t\t\t\twhile(child){\n\t\t\t\t\tif(child.data){\n\t\t\t\t\t\tbuf.push(child.data);\n\t\t\t\t\t}else{\n\t\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\t}\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}else\n\t\t\t{\n\t\t\t\twhile(child){\n\t\t\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\t\t\tchild = child.nextSibling;\n\t\t\t\t}\n\t\t\t}\n\t\t\tbuf.push('</',nodeName,'>');\n\t\t}else{\n\t\t\tbuf.push('/>');\n\t\t}\n\t\t// remove added visible namespaces\n\t\t//visibleNamespaces.length = startVisibleNamespaces;\n\t\treturn;\n\tcase DOCUMENT_NODE:\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tserializeToString(child,buf,isHTML,nodeFilter,visibleNamespaces);\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t\treturn;\n\tcase ATTRIBUTE_NODE:\n\t\treturn buf.push(' ',node.name,'=\"',node.value.replace(/[<&\"]/g,_xmlEncoder),'\"');\n\tcase TEXT_NODE:\n\t\treturn buf.push(node.data.replace(/[<&]/g,_xmlEncoder));\n\tcase CDATA_SECTION_NODE:\n\t\treturn buf.push( '<![CDATA[',node.data,']]>');\n\tcase COMMENT_NODE:\n\t\treturn buf.push( \"<!--\",node.data,\"-->\");\n\tcase DOCUMENT_TYPE_NODE:\n\t\tvar pubid = node.publicId;\n\t\tvar sysid = node.systemId;\n\t\tbuf.push('<!DOCTYPE ',node.name);\n\t\tif(pubid){\n\t\t\tbuf.push(' PUBLIC \"',pubid);\n\t\t\tif (sysid && sysid!='.') {\n\t\t\t\tbuf.push( '\" \"',sysid);\n\t\t\t}\n\t\t\tbuf.push('\">');\n\t\t}else if(sysid && sysid!='.'){\n\t\t\tbuf.push(' SYSTEM \"',sysid,'\">');\n\t\t}else{\n\t\t\tvar sub = node.internalSubset;\n\t\t\tif(sub){\n\t\t\t\tbuf.push(\" [\",sub,\"]\");\n\t\t\t}\n\t\t\tbuf.push(\">\");\n\t\t}\n\t\treturn;\n\tcase PROCESSING_INSTRUCTION_NODE:\n\t\treturn buf.push( \"<?\",node.target,\" \",node.data,\"?>\");\n\tcase ENTITY_REFERENCE_NODE:\n\t\treturn buf.push( '&',node.nodeName,';');\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE:\n\tdefault:\n\t\tbuf.push('??',node.nodeName);\n\t}\n}\nfunction importNode(doc,node,deep){\n\tvar node2;\n\tswitch (node.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tnode2 = node.cloneNode(false);\n\t\tnode2.ownerDocument = doc;\n\t\t//var attrs = node2.attributes;\n\t\t//var len = attrs.length;\n\t\t//for(var i=0;i<len;i++){\n\t\t\t//node2.setAttributeNodeNS(importNode(doc,attrs.item(i),deep));\n\t\t//}\n\tcase DOCUMENT_FRAGMENT_NODE:\n\t\tbreak;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t\tbreak;\n\t//case ENTITY_REFERENCE_NODE:\n\t//case PROCESSING_INSTRUCTION_NODE:\n\t////case TEXT_NODE:\n\t//case CDATA_SECTION_NODE:\n\t//case COMMENT_NODE:\n\t//\tdeep = false;\n\t//\tbreak;\n\t//case DOCUMENT_NODE:\n\t//case DOCUMENT_TYPE_NODE:\n\t//cannot be imported.\n\t//case ENTITY_NODE:\n\t//case NOTATION_NODE\n\t//can not hit in level3\n\t//default:throw e;\n\t}\n\tif(!node2){\n\t\tnode2 = node.cloneNode(false);//false\n\t}\n\tnode2.ownerDocument = doc;\n\tnode2.parentNode = null;\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(importNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n//\n//var _relationMap = {firstChild:1,lastChild:1,previousSibling:1,nextSibling:1,\n//\t\t\t\t\tattributes:1,childNodes:1,parentNode:1,documentElement:1,doctype,};\nfunction cloneNode(doc,node,deep){\n\tvar node2 = new node.constructor();\n\tfor(var n in node){\n\t\tvar v = node[n];\n\t\tif(typeof v != 'object' ){\n\t\t\tif(v != node2[n]){\n\t\t\t\tnode2[n] = v;\n\t\t\t}\n\t\t}\n\t}\n\tif(node.childNodes){\n\t\tnode2.childNodes = new NodeList();\n\t}\n\tnode2.ownerDocument = doc;\n\tswitch (node2.nodeType) {\n\tcase ELEMENT_NODE:\n\t\tvar attrs\t= node.attributes;\n\t\tvar attrs2\t= node2.attributes = new NamedNodeMap();\n\t\tvar len = attrs.length\n\t\tattrs2._ownerElement = node2;\n\t\tfor(var i=0;i<len;i++){\n\t\t\tnode2.setAttributeNode(cloneNode(doc,attrs.item(i),true));\n\t\t}\n\t\tbreak;;\n\tcase ATTRIBUTE_NODE:\n\t\tdeep = true;\n\t}\n\tif(deep){\n\t\tvar child = node.firstChild;\n\t\twhile(child){\n\t\t\tnode2.appendChild(cloneNode(doc,child,deep));\n\t\t\tchild = child.nextSibling;\n\t\t}\n\t}\n\treturn node2;\n}\n\nfunction __set__(object,key,value){\n\tobject[key] = value\n}\n//do dynamic\ntry{\n\tif(Object.defineProperty){\n\t\tObject.defineProperty(LiveNodeList.prototype,'length',{\n\t\t\tget:function(){\n\t\t\t\t_updateLiveList(this);\n\t\t\t\treturn this.$$length;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(Node.prototype,'textContent',{\n\t\t\tget:function(){\n\t\t\t\treturn getTextContent(this);\n\t\t\t},\n\t\t\tset:function(data){\n\t\t\t\tswitch(this.nodeType){\n\t\t\t\tcase ELEMENT_NODE:\n\t\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\t\twhile(this.firstChild){\n\t\t\t\t\t\tthis.removeChild(this.firstChild);\n\t\t\t\t\t}\n\t\t\t\t\tif(data || String(data)){\n\t\t\t\t\t\tthis.appendChild(this.ownerDocument.createTextNode(data));\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t//TODO:\n\t\t\t\t\tthis.data = data;\n\t\t\t\t\tthis.value = data;\n\t\t\t\t\tthis.nodeValue = data;\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t\n\t\tfunction getTextContent(node){\n\t\t\tswitch(node.nodeType){\n\t\t\tcase ELEMENT_NODE:\n\t\t\tcase DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tvar buf = [];\n\t\t\t\tnode = node.firstChild;\n\t\t\t\twhile(node){\n\t\t\t\t\tif(node.nodeType!==7 && node.nodeType !==8){\n\t\t\t\t\t\tbuf.push(getTextContent(node));\n\t\t\t\t\t}\n\t\t\t\t\tnode = node.nextSibling;\n\t\t\t\t}\n\t\t\t\treturn buf.join('');\n\t\t\tdefault:\n\t\t\t\treturn node.nodeValue;\n\t\t\t}\n\t\t}\n\t\t__set__ = function(object,key,value){\n\t\t\t//console.log(value)\n\t\t\tobject['$$'+key] = value\n\t\t}\n\t}\n}catch(e){//ie8\n}\n\n//if(typeof require == 'function'){\n\texports.DOMImplementation = DOMImplementation;\n\texports.XMLSerializer = XMLSerializer;\n//}\n","/*\n * Copyright (c) 2016-2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst AsyncAlgorithm = require('./AsyncAlgorithm');\nconst IdentifierIssuer = require('./IdentifierIssuer');\nconst MessageDigest = require('./MessageDigest');\nconst Permutator = require('./Permutator');\nconst NQuads = require('./NQuads');\nconst util = require('./util');\n\nconst POSITIONS = {subject: 's', object: 'o', graph: 'g'};\n\nmodule.exports = class URDNA2015 extends AsyncAlgorithm {\n  constructor(options) {\n    options = options || {};\n    super(options);\n    this.name = 'URDNA2015';\n    this.options = Object.assign({}, options);\n    this.blankNodeInfo = {};\n    this.hashToBlankNodes = {};\n    this.canonicalIssuer = new IdentifierIssuer('_:c14n');\n    this.hashAlgorithm = 'sha256';\n    this.quads;\n  }\n\n  // 4.4) Normalization Algorithm\n  main(dataset, callback) {\n    const self = this;\n    self.schedule.start = Date.now();\n    let result;\n    self.quads = dataset;\n\n    // 1) Create the normalization state.\n\n    // Note: Optimize by generating non-normalized blank node map concurrently.\n    const nonNormalized = {};\n\n    self.waterfall([\n      callback => {\n        // 2) For every quad in input dataset:\n        self.forEach(dataset, (quad, idx, callback) => {\n          // 2.1) For each blank node that occurs in the quad, add a reference\n          // to the quad using the blank node identifier in the blank node to\n          // quads map, creating a new entry if necessary.\n          self.forEachComponent(quad, component => {\n            if(component.termType !== 'BlankNode') {\n              return;\n            }\n            const id = component.value;\n            if(id in self.blankNodeInfo) {\n              self.blankNodeInfo[id].quads.push(quad);\n            } else {\n              nonNormalized[id] = true;\n              self.blankNodeInfo[id] = {quads: [quad]};\n            }\n          });\n\n          callback();\n        }, callback);\n      },\n      callback => {\n        // 3) Create a list of non-normalized blank node identifiers\n        // non-normalized identifiers and populate it using the keys from the\n        // blank node to quads map.\n        // Note: We use a map here and it was generated during step 2.\n\n        // 4) Initialize simple, a boolean flag, to true.\n        let simple = true;\n\n        // 5) While simple is true, issue canonical identifiers for blank nodes:\n        self.whilst(() => simple, callback => {\n          // 5.1) Set simple to false.\n          simple = false;\n\n          // 5.2) Clear hash to blank nodes map.\n          self.hashToBlankNodes = {};\n\n          self.waterfall([\n            callback => {\n              // 5.3) For each blank node identifier identifier in\n              // non-normalized identifiers:\n              self.forEach(nonNormalized, (value, id, callback) => {\n                // 5.3.1) Create a hash, hash, according to the Hash First\n                // Degree Quads algorithm.\n                self.hashFirstDegreeQuads(id, (err, hash) => {\n                  if(err) {\n                    return callback(err);\n                  }\n                  // 5.3.2) Add hash and identifier to hash to blank nodes map,\n                  // creating a new entry if necessary.\n                  if(hash in self.hashToBlankNodes) {\n                    self.hashToBlankNodes[hash].push(id);\n                  } else {\n                    self.hashToBlankNodes[hash] = [id];\n                  }\n                  callback();\n                });\n              }, callback);\n            },\n            callback => {\n              // 5.4) For each hash to identifier list mapping in hash to blank\n              // nodes map, lexicographically-sorted by hash:\n              const hashes = Object.keys(self.hashToBlankNodes).sort();\n              self.forEach(hashes, (hash, i, callback) => {\n                // 5.4.1) If the length of identifier list is greater than 1,\n                // continue to the next mapping.\n                const idList = self.hashToBlankNodes[hash];\n                if(idList.length > 1) {\n                  return callback();\n                }\n\n                // 5.4.2) Use the Issue Identifier algorithm, passing canonical\n                // issuer and the single blank node identifier in identifier\n                // list, identifier, to issue a canonical replacement identifier\n                // for identifier.\n                // TODO: consider changing `getId` to `issue`\n                const id = idList[0];\n                self.canonicalIssuer.getId(id);\n\n                // 5.4.3) Remove identifier from non-normalized identifiers.\n                delete nonNormalized[id];\n\n                // 5.4.4) Remove hash from the hash to blank nodes map.\n                delete self.hashToBlankNodes[hash];\n\n                // 5.4.5) Set simple to true.\n                simple = true;\n                callback();\n              }, callback);\n            }\n          ], callback);\n        }, callback);\n      },\n      callback => {\n        // 6) For each hash to identifier list mapping in hash to blank nodes\n        // map, lexicographically-sorted by hash:\n        const hashes = Object.keys(self.hashToBlankNodes).sort();\n        self.forEach(hashes, (hash, idx, callback) => {\n          // 6.1) Create hash path list where each item will be a result of\n          // running the Hash N-Degree Quads algorithm.\n          const hashPathList = [];\n\n          // 6.2) For each blank node identifier identifier in identifier list:\n          const idList = self.hashToBlankNodes[hash];\n          self.waterfall([\n            callback => {\n              self.forEach(idList, (id, idx, callback) => {\n                // 6.2.1) If a canonical identifier has already been issued for\n                // identifier, continue to the next identifier.\n                if(self.canonicalIssuer.hasId(id)) {\n                  return callback();\n                }\n\n                // 6.2.2) Create temporary issuer, an identifier issuer\n                // initialized with the prefix _:b.\n                const issuer = new IdentifierIssuer('_:b');\n\n                // 6.2.3) Use the Issue Identifier algorithm, passing temporary\n                // issuer and identifier, to issue a new temporary blank node\n                // identifier for identifier.\n                issuer.getId(id);\n\n                // 6.2.4) Run the Hash N-Degree Quads algorithm, passing\n                // temporary issuer, and append the result to the hash path\n                // list.\n                self.hashNDegreeQuads(id, issuer, (err, result) => {\n                  if(err) {\n                    return callback(err);\n                  }\n                  hashPathList.push(result);\n                  callback();\n                });\n              }, callback);\n            },\n            callback => {\n              // 6.3) For each result in the hash path list,\n              // lexicographically-sorted by the hash in result:\n              // TODO: use `String.localeCompare`?\n              hashPathList.sort((a, b) =>\n                (a.hash < b.hash) ? -1 : ((a.hash > b.hash) ? 1 : 0));\n              self.forEach(hashPathList, (result, idx, callback) => {\n                // 6.3.1) For each blank node identifier, existing identifier,\n                // that was issued a temporary identifier by identifier issuer\n                // in result, issue a canonical identifier, in the same order,\n                // using the Issue Identifier algorithm, passing canonical\n                // issuer and existing identifier.\n                for(const existing in result.issuer.existing) {\n                  self.canonicalIssuer.getId(existing);\n                }\n                callback();\n              }, callback);\n            }\n          ], callback);\n        }, callback);\n      }, callback => {\n        /* Note: At this point all blank nodes in the set of RDF quads have been\n        assigned canonical identifiers, which have been stored in the canonical\n        issuer. Here each quad is updated by assigning each of its blank nodes\n        its new identifier. */\n\n        // 7) For each quad, quad, in input dataset:\n        const normalized = [];\n        self.waterfall([\n          callback => {\n            self.forEach(self.quads, (quad, idx, callback) => {\n              // 7.1) Create a copy, quad copy, of quad and replace any existing\n              // blank node identifiers using the canonical identifiers\n              // previously issued by canonical issuer.\n              // Note: We optimize away the copy here.\n              self.forEachComponent(quad, component => {\n                if(component.termType === 'BlankNode' &&\n                  !component.value.startsWith(self.canonicalIssuer.prefix)) {\n                  component.value = self.canonicalIssuer.getId(component.value);\n                }\n              });\n              // 7.2) Add quad copy to the normalized dataset.\n              normalized.push(NQuads.serializeQuad(quad));\n              callback();\n            }, callback);\n          },\n          callback => {\n            // sort normalized output\n            normalized.sort();\n\n            // 8) Return the normalized dataset.\n            result = normalized.join('');\n            return callback();\n          }\n        ], callback);\n      }\n    ], err => callback(err, result));\n  }\n\n  // 4.6) Hash First Degree Quads\n  hashFirstDegreeQuads(id, callback) {\n    const self = this;\n\n    // return cached hash\n    const info = self.blankNodeInfo[id];\n    if('hash' in info) {\n      return callback(null, info.hash);\n    }\n\n    // 1) Initialize nquads to an empty list. It will be used to store quads in\n    // N-Quads format.\n    const nquads = [];\n\n    // 2) Get the list of quads quads associated with the reference blank node\n    // identifier in the blank node to quads map.\n    const quads = info.quads;\n\n    // 3) For each quad quad in quads:\n    self.forEach(quads, (quad, idx, callback) => {\n      // 3.1) Serialize the quad in N-Quads format with the following special\n      // rule:\n\n      // 3.1.1) If any component in quad is an blank node, then serialize it\n      // using a special identifier as follows:\n      const copy = {predicate: quad.predicate};\n      self.forEachComponent(quad, (component, key) => {\n        // 3.1.2) If the blank node's existing blank node identifier matches the\n        // reference blank node identifier then use the blank node identifier\n        // _:a, otherwise, use the blank node identifier _:z.\n        copy[key] = self.modifyFirstDegreeComponent(id, component, key);\n      });\n      nquads.push(NQuads.serializeQuad(copy));\n      callback();\n    }, err => {\n      if(err) {\n        return callback(err);\n      }\n      // 4) Sort nquads in lexicographical order.\n      nquads.sort();\n\n      // 5) Return the hash that results from passing the sorted, joined nquads\n      // through the hash algorithm.\n      const md = new MessageDigest(self.hashAlgorithm);\n      for(let i = 0; i < nquads.length; ++i) {\n        md.update(nquads[i]);\n      }\n      // TODO: represent as byte buffer instead to cut memory usage in half\n      info.hash = md.digest();\n      callback(null, info.hash);\n    });\n  }\n\n  // 4.7) Hash Related Blank Node\n  hashRelatedBlankNode(related, quad, issuer, position, callback) {\n    const self = this;\n\n    // 1) Set the identifier to use for related, preferring first the canonical\n    // identifier for related if issued, second the identifier issued by issuer\n    // if issued, and last, if necessary, the result of the Hash First Degree\n    // Quads algorithm, passing related.\n    let id;\n    self.waterfall([\n      callback => {\n        if(self.canonicalIssuer.hasId(related)) {\n          id = self.canonicalIssuer.getId(related);\n          return callback();\n        }\n        if(issuer.hasId(related)) {\n          id = issuer.getId(related);\n          return callback();\n        }\n        self.hashFirstDegreeQuads(related, (err, hash) => {\n          if(err) {\n            return callback(err);\n          }\n          id = hash;\n          callback();\n        });\n      }\n    ], err => {\n      if(err) {\n        return callback(err);\n      }\n\n      // 2) Initialize a string input to the value of position.\n      // Note: We use a hash object instead.\n      const md = new MessageDigest(self.hashAlgorithm);\n      md.update(position);\n\n      // 3) If position is not g, append <, the value of the predicate in quad,\n      // and > to input.\n      if(position !== 'g') {\n        md.update(self.getRelatedPredicate(quad));\n      }\n\n      // 4) Append identifier to input.\n      md.update(id);\n\n      // 5) Return the hash that results from passing input through the hash\n      // algorithm.\n      // TODO: represent as byte buffer instead to cut memory usage in half\n      return callback(null, md.digest());\n    });\n  }\n\n  // 4.8) Hash N-Degree Quads\n  hashNDegreeQuads(id, issuer, callback) {\n    const self = this;\n\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    // Note: 2) and 3) handled within `createHashToRelated`\n    let hashToRelated;\n    const md = new MessageDigest(self.hashAlgorithm);\n    self.waterfall([\n      callback => self.createHashToRelated(id, issuer, (err, result) => {\n        if(err) {\n          return callback(err);\n        }\n        hashToRelated = result;\n        callback();\n      }),\n      callback => {\n        // 4) Create an empty string, data to hash.\n        // Note: We created a hash object `md` above instead.\n\n        // 5) For each related hash to blank node list mapping in hash to\n        // related blank nodes map, sorted lexicographically by related hash:\n        const hashes = Object.keys(hashToRelated).sort();\n        self.forEach(hashes, (hash, idx, callback) => {\n          // 5.1) Append the related hash to the data to hash.\n          md.update(hash);\n\n          // 5.2) Create a string chosen path.\n          let chosenPath = '';\n\n          // 5.3) Create an unset chosen issuer variable.\n          let chosenIssuer;\n\n          // 5.4) For each permutation of blank node list:\n          const permutator = new Permutator(hashToRelated[hash]);\n          self.whilst(() => permutator.hasNext(), nextPermutation => {\n            const permutation = permutator.next();\n\n            // 5.4.1) Create a copy of issuer, issuer copy.\n            let issuerCopy = issuer.clone();\n\n            // 5.4.2) Create a string path.\n            let path = '';\n\n            // 5.4.3) Create a recursion list, to store blank node identifiers\n            // that must be recursively processed by this algorithm.\n            const recursionList = [];\n\n            self.waterfall([\n              callback => {\n                // 5.4.4) For each related in permutation:\n                self.forEach(permutation, (related, idx, callback) => {\n                  // 5.4.4.1) If a canonical identifier has been issued for\n                  // related, append it to path.\n                  if(self.canonicalIssuer.hasId(related)) {\n                    path += self.canonicalIssuer.getId(related);\n                  } else {\n                    // 5.4.4.2) Otherwise:\n                    // 5.4.4.2.1) If issuer copy has not issued an identifier\n                    // for related, append related to recursion list.\n                    if(!issuerCopy.hasId(related)) {\n                      recursionList.push(related);\n                    }\n                    // 5.4.4.2.2) Use the Issue Identifier algorithm, passing\n                    // issuer copy and related and append the result to path.\n                    path += issuerCopy.getId(related);\n                  }\n\n                  // 5.4.4.3) If chosen path is not empty and the length of path\n                  // is greater than or equal to the length of chosen path and\n                  // path is lexicographically greater than chosen path, then\n                  // skip to the next permutation.\n                  // Note: Comparing path length to chosen path length can be\n                  // optimized away; only compare lexicographically.\n                  if(chosenPath.length !== 0 && path > chosenPath) {\n                    // FIXME: may cause inaccurate total depth calculation\n                    return nextPermutation();\n                  }\n                  callback();\n                }, callback);\n              },\n              callback => {\n                // 5.4.5) For each related in recursion list:\n                self.forEach(recursionList, (related, idx, callback) => {\n                  // 5.4.5.1) Set result to the result of recursively executing\n                  // the Hash N-Degree Quads algorithm, passing related for\n                  // identifier and issuer copy for path identifier issuer.\n                  self.hashNDegreeQuads(related, issuerCopy, (err, result) => {\n                    if(err) {\n                      return callback(err);\n                    }\n\n                    // 5.4.5.2) Use the Issue Identifier algorithm, passing\n                    // issuer copy and related and append the result to path.\n                    path += issuerCopy.getId(related);\n\n                    // 5.4.5.3) Append <, the hash in result, and > to path.\n                    path += '<' + result.hash + '>';\n\n                    // 5.4.5.4) Set issuer copy to the identifier issuer in\n                    // result.\n                    issuerCopy = result.issuer;\n\n                    // 5.4.5.5) If chosen path is not empty and the length of\n                    // path is greater than or equal to the length of chosen\n                    // path and path is lexicographically greater than chosen\n                    // path, then skip to the next permutation.\n                    // Note: Comparing path length to chosen path length can be\n                    // optimized away; only compare lexicographically.\n                    if(chosenPath.length !== 0 && path > chosenPath) {\n                      // FIXME: may cause inaccurate total depth calculation\n                      return nextPermutation();\n                    }\n                    callback();\n                  });\n                }, callback);\n              },\n              callback => {\n                // 5.4.6) If chosen path is empty or path is lexicographically\n                // less than chosen path, set chosen path to path and chosen\n                // issuer to issuer copy.\n                if(chosenPath.length === 0 || path < chosenPath) {\n                  chosenPath = path;\n                  chosenIssuer = issuerCopy;\n                }\n                callback();\n              }\n            ], nextPermutation);\n          }, err => {\n            if(err) {\n              return callback(err);\n            }\n\n            // 5.5) Append chosen path to data to hash.\n            md.update(chosenPath);\n\n            // 5.6) Replace issuer, by reference, with chosen issuer.\n            issuer = chosenIssuer;\n            callback();\n          });\n        }, callback);\n      }\n    ], err => {\n      // 6) Return issuer and the hash that results from passing data to hash\n      // through the hash algorithm.\n      callback(err, {hash: md.digest(), issuer});\n    });\n  }\n\n  // helper for modifying component during Hash First Degree Quads\n  modifyFirstDegreeComponent(id, component) {\n    if(component.termType !== 'BlankNode') {\n      return component;\n    }\n    component = util.clone(component);\n    component.value = (component.value === id ? '_:a' : '_:z');\n    return component;\n  }\n\n  // helper for getting a related predicate\n  getRelatedPredicate(quad) {\n    return '<' + quad.predicate.value + '>';\n  }\n\n  // helper for creating hash to related blank nodes map\n  createHashToRelated(id, issuer, callback) {\n    const self = this;\n\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    const hashToRelated = {};\n\n    // 2) Get a reference, quads, to the list of quads in the blank node to\n    // quads map for the key identifier.\n    const quads = self.blankNodeInfo[id].quads;\n\n    // 3) For each quad in quads:\n    self.forEach(quads, (quad, idx, callback) => {\n      // 3.1) For each component in quad, if component is the subject, object,\n      // and graph name and it is a blank node that is not identified by\n      // identifier:\n      self.forEach(quad, (component, key, callback) => {\n        if(key === 'predicate' ||\n          !(component.termType === 'BlankNode' && component.value !== id)) {\n          return callback();\n        }\n        // 3.1.1) Set hash to the result of the Hash Related Blank Node\n        // algorithm, passing the blank node identifier for component as\n        // related, quad, path identifier issuer as issuer, and position as\n        // either s, o, or g based on whether component is a subject, object,\n        // graph name, respectively.\n        const related = component.value;\n        const position = POSITIONS[key];\n        self.hashRelatedBlankNode(\n          related, quad, issuer, position, (err, hash) => {\n          if(err) {\n            return callback(err);\n          }\n          // 3.1.2) Add a mapping of hash to the blank node identifier for\n          // component to hash to related blank nodes map, adding an entry as\n          // necessary.\n          if(hash in hashToRelated) {\n            hashToRelated[hash].push(related);\n          } else {\n            hashToRelated[hash] = [related];\n          }\n          callback();\n        });\n      }, callback);\n    }, err => callback(err, hashToRelated));\n  }\n\n  // helper that iterates over quad components (skips predicate)\n  forEachComponent(quad, op) {\n    for(const key in quad) {\n      // skip `predicate`\n      if(key === 'predicate') {\n        continue;\n      }\n      op(quad[key], key, quad);\n    }\n  }\n};\n","/*\n * Copyright (c) 2016-2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst forge = require('node-forge/lib/forge');\nrequire('node-forge/lib/md');\nrequire('node-forge/lib/sha1');\nrequire('node-forge/lib/sha256');\n\nmodule.exports = class MessageDigest {\n  /**\n   * Creates a new MessageDigest.\n   *\n   * @param algorithm the algorithm to use.\n   */\n  constructor(algorithm) {\n    this.md = forge.md[algorithm].create();\n  }\n\n  update(msg) {\n    this.md.update(msg, 'utf8');\n  }\n\n  digest() {\n    return this.md.digest().toHex();\n  }\n};\n","/**\n * Utility functions for web applications.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2018 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nvar baseN = require('./baseN');\n\n/* Utilities API */\nvar util = module.exports = forge.util = forge.util || {};\n\n// define setImmediate and nextTick\n(function() {\n  // use native nextTick (unless we're in webpack)\n  // webpack (or better node-libs-browser polyfill) sets process.browser.\n  // this way we can detect webpack properly\n  if(typeof process !== 'undefined' && process.nextTick && !process.browser) {\n    util.nextTick = process.nextTick;\n    if(typeof setImmediate === 'function') {\n      util.setImmediate = setImmediate;\n    } else {\n      // polyfill setImmediate with nextTick, older versions of node\n      // (those w/o setImmediate) won't totally starve IO\n      util.setImmediate = util.nextTick;\n    }\n    return;\n  }\n\n  // polyfill nextTick with native setImmediate\n  if(typeof setImmediate === 'function') {\n    util.setImmediate = function() { return setImmediate.apply(undefined, arguments); };\n    util.nextTick = function(callback) {\n      return setImmediate(callback);\n    };\n    return;\n  }\n\n  /* Note: A polyfill upgrade pattern is used here to allow combining\n  polyfills. For example, MutationObserver is fast, but blocks UI updates,\n  so it needs to allow UI updates periodically, so it falls back on\n  postMessage or setTimeout. */\n\n  // polyfill with setTimeout\n  util.setImmediate = function(callback) {\n    setTimeout(callback, 0);\n  };\n\n  // upgrade polyfill to use postMessage\n  if(typeof window !== 'undefined' &&\n    typeof window.postMessage === 'function') {\n    var msg = 'forge.setImmediate';\n    var callbacks = [];\n    util.setImmediate = function(callback) {\n      callbacks.push(callback);\n      // only send message when one hasn't been sent in\n      // the current turn of the event loop\n      if(callbacks.length === 1) {\n        window.postMessage(msg, '*');\n      }\n    };\n    function handler(event) {\n      if(event.source === window && event.data === msg) {\n        event.stopPropagation();\n        var copy = callbacks.slice();\n        callbacks.length = 0;\n        copy.forEach(function(callback) {\n          callback();\n        });\n      }\n    }\n    window.addEventListener('message', handler, true);\n  }\n\n  // upgrade polyfill to use MutationObserver\n  if(typeof MutationObserver !== 'undefined') {\n    // polyfill with MutationObserver\n    var now = Date.now();\n    var attr = true;\n    var div = document.createElement('div');\n    var callbacks = [];\n    new MutationObserver(function() {\n      var copy = callbacks.slice();\n      callbacks.length = 0;\n      copy.forEach(function(callback) {\n        callback();\n      });\n    }).observe(div, {attributes: true});\n    var oldSetImmediate = util.setImmediate;\n    util.setImmediate = function(callback) {\n      if(Date.now() - now > 15) {\n        now = Date.now();\n        oldSetImmediate(callback);\n      } else {\n        callbacks.push(callback);\n        // only trigger observer when it hasn't been triggered in\n        // the current turn of the event loop\n        if(callbacks.length === 1) {\n          div.setAttribute('a', attr = !attr);\n        }\n      }\n    };\n  }\n\n  util.nextTick = util.setImmediate;\n})();\n\n// check if running under Node.js\nutil.isNodejs =\n  typeof process !== 'undefined' && process.versions && process.versions.node;\n\n\n// 'self' will also work in Web Workers (instance of WorkerGlobalScope) while\n// it will point to `window` in the main thread.\n// To remain compatible with older browsers, we fall back to 'window' if 'self'\n// is not available.\nutil.globalScope = (function() {\n  if(util.isNodejs) {\n    return global;\n  }\n\n  return typeof self === 'undefined' ? window : self;\n})();\n\n// define isArray\nutil.isArray = Array.isArray || function(x) {\n  return Object.prototype.toString.call(x) === '[object Array]';\n};\n\n// define isArrayBuffer\nutil.isArrayBuffer = function(x) {\n  return typeof ArrayBuffer !== 'undefined' && x instanceof ArrayBuffer;\n};\n\n// define isArrayBufferView\nutil.isArrayBufferView = function(x) {\n  return x && util.isArrayBuffer(x.buffer) && x.byteLength !== undefined;\n};\n\n/**\n * Ensure a bits param is 8, 16, 24, or 32. Used to validate input for\n * algorithms where bit manipulation, JavaScript limitations, and/or algorithm\n * design only allow for byte operations of a limited size.\n *\n * @param n number of bits.\n *\n * Throw Error if n invalid.\n */\nfunction _checkBitsParam(n) {\n  if(!(n === 8 || n === 16 || n === 24 || n === 32)) {\n    throw new Error('Only 8, 16, 24, or 32 bits supported: ' + n);\n  }\n}\n\n// TODO: set ByteBuffer to best available backing\nutil.ByteBuffer = ByteStringBuffer;\n\n/** Buffer w/BinaryString backing */\n\n/**\n * Constructor for a binary string backed byte buffer.\n *\n * @param [b] the bytes to wrap (either encoded as string, one byte per\n *          character, or as an ArrayBuffer or Typed Array).\n */\nfunction ByteStringBuffer(b) {\n  // TODO: update to match DataBuffer API\n\n  // the data in this buffer\n  this.data = '';\n  // the pointer for reading from this buffer\n  this.read = 0;\n\n  if(typeof b === 'string') {\n    this.data = b;\n  } else if(util.isArrayBuffer(b) || util.isArrayBufferView(b)) {\n    if(typeof Buffer !== 'undefined' && b instanceof Buffer) {\n      this.data = b.toString('binary');\n    } else {\n      // convert native buffer to forge buffer\n      // FIXME: support native buffers internally instead\n      var arr = new Uint8Array(b);\n      try {\n        this.data = String.fromCharCode.apply(null, arr);\n      } catch(e) {\n        for(var i = 0; i < arr.length; ++i) {\n          this.putByte(arr[i]);\n        }\n      }\n    }\n  } else if(b instanceof ByteStringBuffer ||\n    (typeof b === 'object' && typeof b.data === 'string' &&\n    typeof b.read === 'number')) {\n    // copy existing buffer\n    this.data = b.data;\n    this.read = b.read;\n  }\n\n  // used for v8 optimization\n  this._constructedStringLength = 0;\n}\nutil.ByteStringBuffer = ByteStringBuffer;\n\n/* Note: This is an optimization for V8-based browsers. When V8 concatenates\n  a string, the strings are only joined logically using a \"cons string\" or\n  \"constructed/concatenated string\". These containers keep references to one\n  another and can result in very large memory usage. For example, if a 2MB\n  string is constructed by concatenating 4 bytes together at a time, the\n  memory usage will be ~44MB; so ~22x increase. The strings are only joined\n  together when an operation requiring their joining takes place, such as\n  substr(). This function is called when adding data to this buffer to ensure\n  these types of strings are periodically joined to reduce the memory\n  footprint. */\nvar _MAX_CONSTRUCTED_STRING_LENGTH = 4096;\nutil.ByteStringBuffer.prototype._optimizeConstructedString = function(x) {\n  this._constructedStringLength += x;\n  if(this._constructedStringLength > _MAX_CONSTRUCTED_STRING_LENGTH) {\n    // this substr() should cause the constructed string to join\n    this.data.substr(0, 1);\n    this._constructedStringLength = 0;\n  }\n};\n\n/**\n * Gets the number of bytes in this buffer.\n *\n * @return the number of bytes in this buffer.\n */\nutil.ByteStringBuffer.prototype.length = function() {\n  return this.data.length - this.read;\n};\n\n/**\n * Gets whether or not this buffer is empty.\n *\n * @return true if this buffer is empty, false if not.\n */\nutil.ByteStringBuffer.prototype.isEmpty = function() {\n  return this.length() <= 0;\n};\n\n/**\n * Puts a byte in this buffer.\n *\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putByte = function(b) {\n  return this.putBytes(String.fromCharCode(b));\n};\n\n/**\n * Puts a byte in this buffer N times.\n *\n * @param b the byte to put.\n * @param n the number of bytes of value b to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.fillWithByte = function(b, n) {\n  b = String.fromCharCode(b);\n  var d = this.data;\n  while(n > 0) {\n    if(n & 1) {\n      d += b;\n    }\n    n >>>= 1;\n    if(n > 0) {\n      b += b;\n    }\n  }\n  this.data = d;\n  this._optimizeConstructedString(n);\n  return this;\n};\n\n/**\n * Puts bytes in this buffer.\n *\n * @param bytes the bytes (as a binary encoded string) to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putBytes = function(bytes) {\n  this.data += bytes;\n  this._optimizeConstructedString(bytes.length);\n  return this;\n};\n\n/**\n * Puts a UTF-16 encoded string into this buffer.\n *\n * @param str the string to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putString = function(str) {\n  return this.putBytes(util.encodeUtf8(str));\n};\n\n/**\n * Puts a 16-bit integer in this buffer in big-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt16 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 24-bit integer in this buffer in big-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt24 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 32-bit integer in this buffer in big-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt32 = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i >> 24 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n/**\n * Puts a 16-bit integer in this buffer in little-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt16Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF));\n};\n\n/**\n * Puts a 24-bit integer in this buffer in little-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt24Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF));\n};\n\n/**\n * Puts a 32-bit integer in this buffer in little-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt32Le = function(i) {\n  return this.putBytes(\n    String.fromCharCode(i & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 24 & 0xFF));\n};\n\n/**\n * Puts an n-bit integer in this buffer in big-endian order.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putInt = function(i, n) {\n  _checkBitsParam(n);\n  var bytes = '';\n  do {\n    n -= 8;\n    bytes += String.fromCharCode((i >> n) & 0xFF);\n  } while(n > 0);\n  return this.putBytes(bytes);\n};\n\n/**\n * Puts a signed n-bit integer in this buffer in big-endian order. Two's\n * complement representation is used.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putSignedInt = function(i, n) {\n  // putInt checks n\n  if(i < 0) {\n    i += 2 << (n - 1);\n  }\n  return this.putInt(i, n);\n};\n\n/**\n * Puts the given buffer into this buffer.\n *\n * @param buffer the buffer to put into this one.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.putBuffer = function(buffer) {\n  return this.putBytes(buffer.getBytes());\n};\n\n/**\n * Gets a byte from this buffer and advances the read pointer by 1.\n *\n * @return the byte.\n */\nutil.ByteStringBuffer.prototype.getByte = function() {\n  return this.data.charCodeAt(this.read++);\n};\n\n/**\n * Gets a uint16 from this buffer in big-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.ByteStringBuffer.prototype.getInt16 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 8 ^\n    this.data.charCodeAt(this.read + 1));\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in big-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.ByteStringBuffer.prototype.getInt24 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 16 ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2));\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in big-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.ByteStringBuffer.prototype.getInt32 = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) << 24 ^\n    this.data.charCodeAt(this.read + 1) << 16 ^\n    this.data.charCodeAt(this.read + 2) << 8 ^\n    this.data.charCodeAt(this.read + 3));\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets a uint16 from this buffer in little-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.ByteStringBuffer.prototype.getInt16Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in little-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.ByteStringBuffer.prototype.getInt24Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2) << 16);\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in little-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.ByteStringBuffer.prototype.getInt32Le = function() {\n  var rval = (\n    this.data.charCodeAt(this.read) ^\n    this.data.charCodeAt(this.read + 1) << 8 ^\n    this.data.charCodeAt(this.read + 2) << 16 ^\n    this.data.charCodeAt(this.read + 3) << 24);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets an n-bit integer from this buffer in big-endian order and advances the\n * read pointer by ceil(n/8).\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.ByteStringBuffer.prototype.getInt = function(n) {\n  _checkBitsParam(n);\n  var rval = 0;\n  do {\n    // TODO: Use (rval * 0x100) if adding support for 33 to 53 bits.\n    rval = (rval << 8) + this.data.charCodeAt(this.read++);\n    n -= 8;\n  } while(n > 0);\n  return rval;\n};\n\n/**\n * Gets a signed n-bit integer from this buffer in big-endian order, using\n * two's complement, and advances the read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.ByteStringBuffer.prototype.getSignedInt = function(n) {\n  // getInt checks n\n  var x = this.getInt(n);\n  var max = 2 << (n - 2);\n  if(x >= max) {\n    x -= max << 1;\n  }\n  return x;\n};\n\n/**\n * Reads bytes out as a binary encoded string and clears them from the\n * buffer. Note that the resulting string is binary encoded (in node.js this\n * encoding is referred to as `binary`, it is *not* `utf8`).\n *\n * @param count the number of bytes to read, undefined or null for all.\n *\n * @return a binary encoded string of bytes.\n */\nutil.ByteStringBuffer.prototype.getBytes = function(count) {\n  var rval;\n  if(count) {\n    // read count bytes\n    count = Math.min(this.length(), count);\n    rval = this.data.slice(this.read, this.read + count);\n    this.read += count;\n  } else if(count === 0) {\n    rval = '';\n  } else {\n    // read all bytes, optimize to only copy when needed\n    rval = (this.read === 0) ? this.data : this.data.slice(this.read);\n    this.clear();\n  }\n  return rval;\n};\n\n/**\n * Gets a binary encoded string of the bytes from this buffer without\n * modifying the read pointer.\n *\n * @param count the number of bytes to get, omit to get all.\n *\n * @return a string full of binary encoded characters.\n */\nutil.ByteStringBuffer.prototype.bytes = function(count) {\n  return (typeof(count) === 'undefined' ?\n    this.data.slice(this.read) :\n    this.data.slice(this.read, this.read + count));\n};\n\n/**\n * Gets a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n *\n * @return the byte.\n */\nutil.ByteStringBuffer.prototype.at = function(i) {\n  return this.data.charCodeAt(this.read + i);\n};\n\n/**\n * Puts a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.setAt = function(i, b) {\n  this.data = this.data.substr(0, this.read + i) +\n    String.fromCharCode(b) +\n    this.data.substr(this.read + i + 1);\n  return this;\n};\n\n/**\n * Gets the last byte without modifying the read pointer.\n *\n * @return the last byte.\n */\nutil.ByteStringBuffer.prototype.last = function() {\n  return this.data.charCodeAt(this.data.length - 1);\n};\n\n/**\n * Creates a copy of this buffer.\n *\n * @return the copy.\n */\nutil.ByteStringBuffer.prototype.copy = function() {\n  var c = util.createBuffer(this.data);\n  c.read = this.read;\n  return c;\n};\n\n/**\n * Compacts this buffer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.compact = function() {\n  if(this.read > 0) {\n    this.data = this.data.slice(this.read);\n    this.read = 0;\n  }\n  return this;\n};\n\n/**\n * Clears this buffer.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.clear = function() {\n  this.data = '';\n  this.read = 0;\n  return this;\n};\n\n/**\n * Shortens this buffer by triming bytes off of the end of this buffer.\n *\n * @param count the number of bytes to trim off.\n *\n * @return this buffer.\n */\nutil.ByteStringBuffer.prototype.truncate = function(count) {\n  var len = Math.max(0, this.length() - count);\n  this.data = this.data.substr(this.read, len);\n  this.read = 0;\n  return this;\n};\n\n/**\n * Converts this buffer to a hexadecimal string.\n *\n * @return a hexadecimal string.\n */\nutil.ByteStringBuffer.prototype.toHex = function() {\n  var rval = '';\n  for(var i = this.read; i < this.data.length; ++i) {\n    var b = this.data.charCodeAt(i);\n    if(b < 16) {\n      rval += '0';\n    }\n    rval += b.toString(16);\n  }\n  return rval;\n};\n\n/**\n * Converts this buffer to a UTF-16 string (standard JavaScript string).\n *\n * @return a UTF-16 string.\n */\nutil.ByteStringBuffer.prototype.toString = function() {\n  return util.decodeUtf8(this.bytes());\n};\n\n/** End Buffer w/BinaryString backing */\n\n/** Buffer w/UInt8Array backing */\n\n/**\n * FIXME: Experimental. Do not use yet.\n *\n * Constructor for an ArrayBuffer-backed byte buffer.\n *\n * The buffer may be constructed from a string, an ArrayBuffer, DataView, or a\n * TypedArray.\n *\n * If a string is given, its encoding should be provided as an option,\n * otherwise it will default to 'binary'. A 'binary' string is encoded such\n * that each character is one byte in length and size.\n *\n * If an ArrayBuffer, DataView, or TypedArray is given, it will be used\n * *directly* without any copying. Note that, if a write to the buffer requires\n * more space, the buffer will allocate a new backing ArrayBuffer to\n * accommodate. The starting read and write offsets for the buffer may be\n * given as options.\n *\n * @param [b] the initial bytes for this buffer.\n * @param options the options to use:\n *          [readOffset] the starting read offset to use (default: 0).\n *          [writeOffset] the starting write offset to use (default: the\n *            length of the first parameter).\n *          [growSize] the minimum amount, in bytes, to grow the buffer by to\n *            accommodate writes (default: 1024).\n *          [encoding] the encoding ('binary', 'utf8', 'utf16', 'hex') for the\n *            first parameter, if it is a string (default: 'binary').\n */\nfunction DataBuffer(b, options) {\n  // default options\n  options = options || {};\n\n  // pointers for read from/write to buffer\n  this.read = options.readOffset || 0;\n  this.growSize = options.growSize || 1024;\n\n  var isArrayBuffer = util.isArrayBuffer(b);\n  var isArrayBufferView = util.isArrayBufferView(b);\n  if(isArrayBuffer || isArrayBufferView) {\n    // use ArrayBuffer directly\n    if(isArrayBuffer) {\n      this.data = new DataView(b);\n    } else {\n      // TODO: adjust read/write offset based on the type of view\n      // or specify that this must be done in the options ... that the\n      // offsets are byte-based\n      this.data = new DataView(b.buffer, b.byteOffset, b.byteLength);\n    }\n    this.write = ('writeOffset' in options ?\n      options.writeOffset : this.data.byteLength);\n    return;\n  }\n\n  // initialize to empty array buffer and add any given bytes using putBytes\n  this.data = new DataView(new ArrayBuffer(0));\n  this.write = 0;\n\n  if(b !== null && b !== undefined) {\n    this.putBytes(b);\n  }\n\n  if('writeOffset' in options) {\n    this.write = options.writeOffset;\n  }\n}\nutil.DataBuffer = DataBuffer;\n\n/**\n * Gets the number of bytes in this buffer.\n *\n * @return the number of bytes in this buffer.\n */\nutil.DataBuffer.prototype.length = function() {\n  return this.write - this.read;\n};\n\n/**\n * Gets whether or not this buffer is empty.\n *\n * @return true if this buffer is empty, false if not.\n */\nutil.DataBuffer.prototype.isEmpty = function() {\n  return this.length() <= 0;\n};\n\n/**\n * Ensures this buffer has enough empty space to accommodate the given number\n * of bytes. An optional parameter may be given that indicates a minimum\n * amount to grow the buffer if necessary. If the parameter is not given,\n * the buffer will be grown by some previously-specified default amount\n * or heuristic.\n *\n * @param amount the number of bytes to accommodate.\n * @param [growSize] the minimum amount, in bytes, to grow the buffer by if\n *          necessary.\n */\nutil.DataBuffer.prototype.accommodate = function(amount, growSize) {\n  if(this.length() >= amount) {\n    return this;\n  }\n  growSize = Math.max(growSize || this.growSize, amount);\n\n  // grow buffer\n  var src = new Uint8Array(\n    this.data.buffer, this.data.byteOffset, this.data.byteLength);\n  var dst = new Uint8Array(this.length() + growSize);\n  dst.set(src);\n  this.data = new DataView(dst.buffer);\n\n  return this;\n};\n\n/**\n * Puts a byte in this buffer.\n *\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putByte = function(b) {\n  this.accommodate(1);\n  this.data.setUint8(this.write++, b);\n  return this;\n};\n\n/**\n * Puts a byte in this buffer N times.\n *\n * @param b the byte to put.\n * @param n the number of bytes of value b to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.fillWithByte = function(b, n) {\n  this.accommodate(n);\n  for(var i = 0; i < n; ++i) {\n    this.data.setUint8(b);\n  }\n  return this;\n};\n\n/**\n * Puts bytes in this buffer. The bytes may be given as a string, an\n * ArrayBuffer, a DataView, or a TypedArray.\n *\n * @param bytes the bytes to put.\n * @param [encoding] the encoding for the first parameter ('binary', 'utf8',\n *          'utf16', 'hex'), if it is a string (default: 'binary').\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putBytes = function(bytes, encoding) {\n  if(util.isArrayBufferView(bytes)) {\n    var src = new Uint8Array(bytes.buffer, bytes.byteOffset, bytes.byteLength);\n    var len = src.byteLength - src.byteOffset;\n    this.accommodate(len);\n    var dst = new Uint8Array(this.data.buffer, this.write);\n    dst.set(src);\n    this.write += len;\n    return this;\n  }\n\n  if(util.isArrayBuffer(bytes)) {\n    var src = new Uint8Array(bytes);\n    this.accommodate(src.byteLength);\n    var dst = new Uint8Array(this.data.buffer);\n    dst.set(src, this.write);\n    this.write += src.byteLength;\n    return this;\n  }\n\n  // bytes is a util.DataBuffer or equivalent\n  if(bytes instanceof util.DataBuffer ||\n    (typeof bytes === 'object' &&\n    typeof bytes.read === 'number' && typeof bytes.write === 'number' &&\n    util.isArrayBufferView(bytes.data))) {\n    var src = new Uint8Array(bytes.data.byteLength, bytes.read, bytes.length());\n    this.accommodate(src.byteLength);\n    var dst = new Uint8Array(bytes.data.byteLength, this.write);\n    dst.set(src);\n    this.write += src.byteLength;\n    return this;\n  }\n\n  if(bytes instanceof util.ByteStringBuffer) {\n    // copy binary string and process as the same as a string parameter below\n    bytes = bytes.data;\n    encoding = 'binary';\n  }\n\n  // string conversion\n  encoding = encoding || 'binary';\n  if(typeof bytes === 'string') {\n    var view;\n\n    // decode from string\n    if(encoding === 'hex') {\n      this.accommodate(Math.ceil(bytes.length / 2));\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.hex.decode(bytes, view, this.write);\n      return this;\n    }\n    if(encoding === 'base64') {\n      this.accommodate(Math.ceil(bytes.length / 4) * 3);\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.base64.decode(bytes, view, this.write);\n      return this;\n    }\n\n    // encode text as UTF-8 bytes\n    if(encoding === 'utf8') {\n      // encode as UTF-8 then decode string as raw binary\n      bytes = util.encodeUtf8(bytes);\n      encoding = 'binary';\n    }\n\n    // decode string as raw binary\n    if(encoding === 'binary' || encoding === 'raw') {\n      // one byte per character\n      this.accommodate(bytes.length);\n      view = new Uint8Array(this.data.buffer, this.write);\n      this.write += util.binary.raw.decode(view);\n      return this;\n    }\n\n    // encode text as UTF-16 bytes\n    if(encoding === 'utf16') {\n      // two bytes per character\n      this.accommodate(bytes.length * 2);\n      view = new Uint16Array(this.data.buffer, this.write);\n      this.write += util.text.utf16.encode(view);\n      return this;\n    }\n\n    throw new Error('Invalid encoding: ' + encoding);\n  }\n\n  throw Error('Invalid parameter: ' + bytes);\n};\n\n/**\n * Puts the given buffer into this buffer.\n *\n * @param buffer the buffer to put into this one.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putBuffer = function(buffer) {\n  this.putBytes(buffer);\n  buffer.clear();\n  return this;\n};\n\n/**\n * Puts a string into this buffer.\n *\n * @param str the string to put.\n * @param [encoding] the encoding for the string (default: 'utf16').\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putString = function(str) {\n  return this.putBytes(str, 'utf16');\n};\n\n/**\n * Puts a 16-bit integer in this buffer in big-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt16 = function(i) {\n  this.accommodate(2);\n  this.data.setInt16(this.write, i);\n  this.write += 2;\n  return this;\n};\n\n/**\n * Puts a 24-bit integer in this buffer in big-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt24 = function(i) {\n  this.accommodate(3);\n  this.data.setInt16(this.write, i >> 8 & 0xFFFF);\n  this.data.setInt8(this.write, i >> 16 & 0xFF);\n  this.write += 3;\n  return this;\n};\n\n/**\n * Puts a 32-bit integer in this buffer in big-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt32 = function(i) {\n  this.accommodate(4);\n  this.data.setInt32(this.write, i);\n  this.write += 4;\n  return this;\n};\n\n/**\n * Puts a 16-bit integer in this buffer in little-endian order.\n *\n * @param i the 16-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt16Le = function(i) {\n  this.accommodate(2);\n  this.data.setInt16(this.write, i, true);\n  this.write += 2;\n  return this;\n};\n\n/**\n * Puts a 24-bit integer in this buffer in little-endian order.\n *\n * @param i the 24-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt24Le = function(i) {\n  this.accommodate(3);\n  this.data.setInt8(this.write, i >> 16 & 0xFF);\n  this.data.setInt16(this.write, i >> 8 & 0xFFFF, true);\n  this.write += 3;\n  return this;\n};\n\n/**\n * Puts a 32-bit integer in this buffer in little-endian order.\n *\n * @param i the 32-bit integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt32Le = function(i) {\n  this.accommodate(4);\n  this.data.setInt32(this.write, i, true);\n  this.write += 4;\n  return this;\n};\n\n/**\n * Puts an n-bit integer in this buffer in big-endian order.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putInt = function(i, n) {\n  _checkBitsParam(n);\n  this.accommodate(n / 8);\n  do {\n    n -= 8;\n    this.data.setInt8(this.write++, (i >> n) & 0xFF);\n  } while(n > 0);\n  return this;\n};\n\n/**\n * Puts a signed n-bit integer in this buffer in big-endian order. Two's\n * complement representation is used.\n *\n * @param i the n-bit integer.\n * @param n the number of bits in the integer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.putSignedInt = function(i, n) {\n  _checkBitsParam(n);\n  this.accommodate(n / 8);\n  if(i < 0) {\n    i += 2 << (n - 1);\n  }\n  return this.putInt(i, n);\n};\n\n/**\n * Gets a byte from this buffer and advances the read pointer by 1.\n *\n * @return the byte.\n */\nutil.DataBuffer.prototype.getByte = function() {\n  return this.data.getInt8(this.read++);\n};\n\n/**\n * Gets a uint16 from this buffer in big-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.DataBuffer.prototype.getInt16 = function() {\n  var rval = this.data.getInt16(this.read);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in big-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.DataBuffer.prototype.getInt24 = function() {\n  var rval = (\n    this.data.getInt16(this.read) << 8 ^\n    this.data.getInt8(this.read + 2));\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in big-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.DataBuffer.prototype.getInt32 = function() {\n  var rval = this.data.getInt32(this.read);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets a uint16 from this buffer in little-endian order and advances the read\n * pointer by 2.\n *\n * @return the uint16.\n */\nutil.DataBuffer.prototype.getInt16Le = function() {\n  var rval = this.data.getInt16(this.read, true);\n  this.read += 2;\n  return rval;\n};\n\n/**\n * Gets a uint24 from this buffer in little-endian order and advances the read\n * pointer by 3.\n *\n * @return the uint24.\n */\nutil.DataBuffer.prototype.getInt24Le = function() {\n  var rval = (\n    this.data.getInt8(this.read) ^\n    this.data.getInt16(this.read + 1, true) << 8);\n  this.read += 3;\n  return rval;\n};\n\n/**\n * Gets a uint32 from this buffer in little-endian order and advances the read\n * pointer by 4.\n *\n * @return the word.\n */\nutil.DataBuffer.prototype.getInt32Le = function() {\n  var rval = this.data.getInt32(this.read, true);\n  this.read += 4;\n  return rval;\n};\n\n/**\n * Gets an n-bit integer from this buffer in big-endian order and advances the\n * read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.DataBuffer.prototype.getInt = function(n) {\n  _checkBitsParam(n);\n  var rval = 0;\n  do {\n    // TODO: Use (rval * 0x100) if adding support for 33 to 53 bits.\n    rval = (rval << 8) + this.data.getInt8(this.read++);\n    n -= 8;\n  } while(n > 0);\n  return rval;\n};\n\n/**\n * Gets a signed n-bit integer from this buffer in big-endian order, using\n * two's complement, and advances the read pointer by n/8.\n *\n * @param n the number of bits in the integer (8, 16, 24, or 32).\n *\n * @return the integer.\n */\nutil.DataBuffer.prototype.getSignedInt = function(n) {\n  // getInt checks n\n  var x = this.getInt(n);\n  var max = 2 << (n - 2);\n  if(x >= max) {\n    x -= max << 1;\n  }\n  return x;\n};\n\n/**\n * Reads bytes out as a binary encoded string and clears them from the\n * buffer.\n *\n * @param count the number of bytes to read, undefined or null for all.\n *\n * @return a binary encoded string of bytes.\n */\nutil.DataBuffer.prototype.getBytes = function(count) {\n  // TODO: deprecate this method, it is poorly named and\n  // this.toString('binary') replaces it\n  // add a toTypedArray()/toArrayBuffer() function\n  var rval;\n  if(count) {\n    // read count bytes\n    count = Math.min(this.length(), count);\n    rval = this.data.slice(this.read, this.read + count);\n    this.read += count;\n  } else if(count === 0) {\n    rval = '';\n  } else {\n    // read all bytes, optimize to only copy when needed\n    rval = (this.read === 0) ? this.data : this.data.slice(this.read);\n    this.clear();\n  }\n  return rval;\n};\n\n/**\n * Gets a binary encoded string of the bytes from this buffer without\n * modifying the read pointer.\n *\n * @param count the number of bytes to get, omit to get all.\n *\n * @return a string full of binary encoded characters.\n */\nutil.DataBuffer.prototype.bytes = function(count) {\n  // TODO: deprecate this method, it is poorly named, add \"getString()\"\n  return (typeof(count) === 'undefined' ?\n    this.data.slice(this.read) :\n    this.data.slice(this.read, this.read + count));\n};\n\n/**\n * Gets a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n *\n * @return the byte.\n */\nutil.DataBuffer.prototype.at = function(i) {\n  return this.data.getUint8(this.read + i);\n};\n\n/**\n * Puts a byte at the given index without modifying the read pointer.\n *\n * @param i the byte index.\n * @param b the byte to put.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.setAt = function(i, b) {\n  this.data.setUint8(i, b);\n  return this;\n};\n\n/**\n * Gets the last byte without modifying the read pointer.\n *\n * @return the last byte.\n */\nutil.DataBuffer.prototype.last = function() {\n  return this.data.getUint8(this.write - 1);\n};\n\n/**\n * Creates a copy of this buffer.\n *\n * @return the copy.\n */\nutil.DataBuffer.prototype.copy = function() {\n  return new util.DataBuffer(this);\n};\n\n/**\n * Compacts this buffer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.compact = function() {\n  if(this.read > 0) {\n    var src = new Uint8Array(this.data.buffer, this.read);\n    var dst = new Uint8Array(src.byteLength);\n    dst.set(src);\n    this.data = new DataView(dst);\n    this.write -= this.read;\n    this.read = 0;\n  }\n  return this;\n};\n\n/**\n * Clears this buffer.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.clear = function() {\n  this.data = new DataView(new ArrayBuffer(0));\n  this.read = this.write = 0;\n  return this;\n};\n\n/**\n * Shortens this buffer by triming bytes off of the end of this buffer.\n *\n * @param count the number of bytes to trim off.\n *\n * @return this buffer.\n */\nutil.DataBuffer.prototype.truncate = function(count) {\n  this.write = Math.max(0, this.length() - count);\n  this.read = Math.min(this.read, this.write);\n  return this;\n};\n\n/**\n * Converts this buffer to a hexadecimal string.\n *\n * @return a hexadecimal string.\n */\nutil.DataBuffer.prototype.toHex = function() {\n  var rval = '';\n  for(var i = this.read; i < this.data.byteLength; ++i) {\n    var b = this.data.getUint8(i);\n    if(b < 16) {\n      rval += '0';\n    }\n    rval += b.toString(16);\n  }\n  return rval;\n};\n\n/**\n * Converts this buffer to a string, using the given encoding. If no\n * encoding is given, 'utf8' (UTF-8) is used.\n *\n * @param [encoding] the encoding to use: 'binary', 'utf8', 'utf16', 'hex',\n *          'base64' (default: 'utf8').\n *\n * @return a string representation of the bytes in this buffer.\n */\nutil.DataBuffer.prototype.toString = function(encoding) {\n  var view = new Uint8Array(this.data, this.read, this.length());\n  encoding = encoding || 'utf8';\n\n  // encode to string\n  if(encoding === 'binary' || encoding === 'raw') {\n    return util.binary.raw.encode(view);\n  }\n  if(encoding === 'hex') {\n    return util.binary.hex.encode(view);\n  }\n  if(encoding === 'base64') {\n    return util.binary.base64.encode(view);\n  }\n\n  // decode to text\n  if(encoding === 'utf8') {\n    return util.text.utf8.decode(view);\n  }\n  if(encoding === 'utf16') {\n    return util.text.utf16.decode(view);\n  }\n\n  throw new Error('Invalid encoding: ' + encoding);\n};\n\n/** End Buffer w/UInt8Array backing */\n\n/**\n * Creates a buffer that stores bytes. A value may be given to populate the\n * buffer with data. This value can either be string of encoded bytes or a\n * regular string of characters. When passing a string of binary encoded\n * bytes, the encoding `raw` should be given. This is also the default. When\n * passing a string of characters, the encoding `utf8` should be given.\n *\n * @param [input] a string with encoded bytes to store in the buffer.\n * @param [encoding] (default: 'raw', other: 'utf8').\n */\nutil.createBuffer = function(input, encoding) {\n  // TODO: deprecate, use new ByteBuffer() instead\n  encoding = encoding || 'raw';\n  if(input !== undefined && encoding === 'utf8') {\n    input = util.encodeUtf8(input);\n  }\n  return new util.ByteBuffer(input);\n};\n\n/**\n * Fills a string with a particular value. If you want the string to be a byte\n * string, pass in String.fromCharCode(theByte).\n *\n * @param c the character to fill the string with, use String.fromCharCode\n *          to fill the string with a byte value.\n * @param n the number of characters of value c to fill with.\n *\n * @return the filled string.\n */\nutil.fillString = function(c, n) {\n  var s = '';\n  while(n > 0) {\n    if(n & 1) {\n      s += c;\n    }\n    n >>>= 1;\n    if(n > 0) {\n      c += c;\n    }\n  }\n  return s;\n};\n\n/**\n * Performs a per byte XOR between two byte strings and returns the result as a\n * string of bytes.\n *\n * @param s1 first string of bytes.\n * @param s2 second string of bytes.\n * @param n the number of bytes to XOR.\n *\n * @return the XOR'd result.\n */\nutil.xorBytes = function(s1, s2, n) {\n  var s3 = '';\n  var b = '';\n  var t = '';\n  var i = 0;\n  var c = 0;\n  for(; n > 0; --n, ++i) {\n    b = s1.charCodeAt(i) ^ s2.charCodeAt(i);\n    if(c >= 10) {\n      s3 += t;\n      t = '';\n      c = 0;\n    }\n    t += String.fromCharCode(b);\n    ++c;\n  }\n  s3 += t;\n  return s3;\n};\n\n/**\n * Converts a hex string into a 'binary' encoded string of bytes.\n *\n * @param hex the hexadecimal string to convert.\n *\n * @return the binary-encoded string of bytes.\n */\nutil.hexToBytes = function(hex) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.hex.decode instead.\"\n  var rval = '';\n  var i = 0;\n  if(hex.length & 1 == 1) {\n    // odd number of characters, convert first character alone\n    i = 1;\n    rval += String.fromCharCode(parseInt(hex[0], 16));\n  }\n  // convert 2 characters (1 byte) at a time\n  for(; i < hex.length; i += 2) {\n    rval += String.fromCharCode(parseInt(hex.substr(i, 2), 16));\n  }\n  return rval;\n};\n\n/**\n * Converts a 'binary' encoded string of bytes to hex.\n *\n * @param bytes the byte string to convert.\n *\n * @return the string of hexadecimal characters.\n */\nutil.bytesToHex = function(bytes) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.hex.encode instead.\"\n  return util.createBuffer(bytes).toHex();\n};\n\n/**\n * Converts an 32-bit integer to 4-big-endian byte string.\n *\n * @param i the integer.\n *\n * @return the byte string.\n */\nutil.int32ToBytes = function(i) {\n  return (\n    String.fromCharCode(i >> 24 & 0xFF) +\n    String.fromCharCode(i >> 16 & 0xFF) +\n    String.fromCharCode(i >> 8 & 0xFF) +\n    String.fromCharCode(i & 0xFF));\n};\n\n// base64 characters, reverse mapping\nvar _base64 =\n  'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\nvar _base64Idx = [\n/*43 -43 = 0*/\n/*'+',  1,  2,  3,'/' */\n   62, -1, -1, -1, 63,\n\n/*'0','1','2','3','4','5','6','7','8','9' */\n   52, 53, 54, 55, 56, 57, 58, 59, 60, 61,\n\n/*15, 16, 17,'=', 19, 20, 21 */\n  -1, -1, -1, 64, -1, -1, -1,\n\n/*65 - 43 = 22*/\n/*'A','B','C','D','E','F','G','H','I','J','K','L','M', */\n   0,  1,  2,  3,  4,  5,  6,  7,  8,  9, 10, 11, 12,\n\n/*'N','O','P','Q','R','S','T','U','V','W','X','Y','Z' */\n   13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25,\n\n/*91 - 43 = 48 */\n/*48, 49, 50, 51, 52, 53 */\n  -1, -1, -1, -1, -1, -1,\n\n/*97 - 43 = 54*/\n/*'a','b','c','d','e','f','g','h','i','j','k','l','m' */\n   26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38,\n\n/*'n','o','p','q','r','s','t','u','v','w','x','y','z' */\n   39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51\n];\n\n// base58 characters (Bitcoin alphabet)\nvar _base58 = '123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz';\n\n/**\n * Base64 encodes a 'binary' encoded string of bytes.\n *\n * @param input the binary encoded string of bytes to base64-encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the base64-encoded output.\n */\nutil.encode64 = function(input, maxline) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.base64.encode instead.\"\n  var line = '';\n  var output = '';\n  var chr1, chr2, chr3;\n  var i = 0;\n  while(i < input.length) {\n    chr1 = input.charCodeAt(i++);\n    chr2 = input.charCodeAt(i++);\n    chr3 = input.charCodeAt(i++);\n\n    // encode 4 character group\n    line += _base64.charAt(chr1 >> 2);\n    line += _base64.charAt(((chr1 & 3) << 4) | (chr2 >> 4));\n    if(isNaN(chr2)) {\n      line += '==';\n    } else {\n      line += _base64.charAt(((chr2 & 15) << 2) | (chr3 >> 6));\n      line += isNaN(chr3) ? '=' : _base64.charAt(chr3 & 63);\n    }\n\n    if(maxline && line.length > maxline) {\n      output += line.substr(0, maxline) + '\\r\\n';\n      line = line.substr(maxline);\n    }\n  }\n  output += line;\n  return output;\n};\n\n/**\n * Base64 decodes a string into a 'binary' encoded string of bytes.\n *\n * @param input the base64-encoded input.\n *\n * @return the binary encoded string.\n */\nutil.decode64 = function(input) {\n  // TODO: deprecate: \"Deprecated. Use util.binary.base64.decode instead.\"\n\n  // remove all non-base64 characters\n  input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n  var output = '';\n  var enc1, enc2, enc3, enc4;\n  var i = 0;\n\n  while(i < input.length) {\n    enc1 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc2 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc3 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc4 = _base64Idx[input.charCodeAt(i++) - 43];\n\n    output += String.fromCharCode((enc1 << 2) | (enc2 >> 4));\n    if(enc3 !== 64) {\n      // decoded at least 2 bytes\n      output += String.fromCharCode(((enc2 & 15) << 4) | (enc3 >> 2));\n      if(enc4 !== 64) {\n        // decoded 3 bytes\n        output += String.fromCharCode(((enc3 & 3) << 6) | enc4);\n      }\n    }\n  }\n\n  return output;\n};\n\n/**\n * Encodes the given string of characters (a standard JavaScript\n * string) as a binary encoded string where the bytes represent\n * a UTF-8 encoded string of characters. Non-ASCII characters will be\n * encoded as multiple bytes according to UTF-8.\n *\n * @param str a standard string of characters to encode.\n *\n * @return the binary encoded string.\n */\nutil.encodeUtf8 = function(str) {\n  return unescape(encodeURIComponent(str));\n};\n\n/**\n * Decodes a binary encoded string that contains bytes that\n * represent a UTF-8 encoded string of characters -- into a\n * string of characters (a standard JavaScript string).\n *\n * @param str the binary encoded string to decode.\n *\n * @return the resulting standard string of characters.\n */\nutil.decodeUtf8 = function(str) {\n  return decodeURIComponent(escape(str));\n};\n\n// binary encoding/decoding tools\n// FIXME: Experimental. Do not use yet.\nutil.binary = {\n  raw: {},\n  hex: {},\n  base64: {},\n  base58: {},\n  baseN : {\n    encode: baseN.encode,\n    decode: baseN.decode\n  }\n};\n\n/**\n * Encodes a Uint8Array as a binary-encoded string. This encoding uses\n * a value between 0 and 255 for each character.\n *\n * @param bytes the Uint8Array to encode.\n *\n * @return the binary-encoded string.\n */\nutil.binary.raw.encode = function(bytes) {\n  return String.fromCharCode.apply(null, bytes);\n};\n\n/**\n * Decodes a binary-encoded string to a Uint8Array. This encoding uses\n * a value between 0 and 255 for each character.\n *\n * @param str the binary-encoded string to decode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.raw.decode = function(str, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length);\n  }\n  offset = offset || 0;\n  var j = offset;\n  for(var i = 0; i < str.length; ++i) {\n    out[j++] = str.charCodeAt(i);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Encodes a 'binary' string, ArrayBuffer, DataView, TypedArray, or\n * ByteBuffer as a string of hexadecimal characters.\n *\n * @param bytes the bytes to convert.\n *\n * @return the string of hexadecimal characters.\n */\nutil.binary.hex.encode = util.bytesToHex;\n\n/**\n * Decodes a hex-encoded string to a Uint8Array.\n *\n * @param hex the hexadecimal string to convert.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.hex.decode = function(hex, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(Math.ceil(hex.length / 2));\n  }\n  offset = offset || 0;\n  var i = 0, j = offset;\n  if(hex.length & 1) {\n    // odd number of characters, convert first character alone\n    i = 1;\n    out[j++] = parseInt(hex[0], 16);\n  }\n  // convert 2 characters (1 byte) at a time\n  for(; i < hex.length; i += 2) {\n    out[j++] = parseInt(hex.substr(i, 2), 16);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Base64-encodes a Uint8Array.\n *\n * @param input the Uint8Array to encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the base64-encoded output string.\n */\nutil.binary.base64.encode = function(input, maxline) {\n  var line = '';\n  var output = '';\n  var chr1, chr2, chr3;\n  var i = 0;\n  while(i < input.byteLength) {\n    chr1 = input[i++];\n    chr2 = input[i++];\n    chr3 = input[i++];\n\n    // encode 4 character group\n    line += _base64.charAt(chr1 >> 2);\n    line += _base64.charAt(((chr1 & 3) << 4) | (chr2 >> 4));\n    if(isNaN(chr2)) {\n      line += '==';\n    } else {\n      line += _base64.charAt(((chr2 & 15) << 2) | (chr3 >> 6));\n      line += isNaN(chr3) ? '=' : _base64.charAt(chr3 & 63);\n    }\n\n    if(maxline && line.length > maxline) {\n      output += line.substr(0, maxline) + '\\r\\n';\n      line = line.substr(maxline);\n    }\n  }\n  output += line;\n  return output;\n};\n\n/**\n * Decodes a base64-encoded string to a Uint8Array.\n *\n * @param input the base64-encoded input string.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.binary.base64.decode = function(input, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(Math.ceil(input.length / 4) * 3);\n  }\n\n  // remove all non-base64 characters\n  input = input.replace(/[^A-Za-z0-9\\+\\/\\=]/g, '');\n\n  offset = offset || 0;\n  var enc1, enc2, enc3, enc4;\n  var i = 0, j = offset;\n\n  while(i < input.length) {\n    enc1 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc2 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc3 = _base64Idx[input.charCodeAt(i++) - 43];\n    enc4 = _base64Idx[input.charCodeAt(i++) - 43];\n\n    out[j++] = (enc1 << 2) | (enc2 >> 4);\n    if(enc3 !== 64) {\n      // decoded at least 2 bytes\n      out[j++] = ((enc2 & 15) << 4) | (enc3 >> 2);\n      if(enc4 !== 64) {\n        // decoded 3 bytes\n        out[j++] = ((enc3 & 3) << 6) | enc4;\n      }\n    }\n  }\n\n  // make sure result is the exact decoded length\n  return output ? (j - offset) : out.subarray(0, j);\n};\n\n// add support for base58 encoding/decoding with Bitcoin alphabet\nutil.binary.base58.encode = function(input, maxline) {\n  return util.binary.baseN.encode(input, _base58, maxline);\n};\nutil.binary.base58.decode = function(input, maxline) {\n  return util.binary.baseN.decode(input, _base58, maxline);\n};\n\n// text encoding/decoding tools\n// FIXME: Experimental. Do not use yet.\nutil.text = {\n  utf8: {},\n  utf16: {}\n};\n\n/**\n * Encodes the given string as UTF-8 in a Uint8Array.\n *\n * @param str the string to encode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.text.utf8.encode = function(str, output, offset) {\n  str = util.encodeUtf8(str);\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length);\n  }\n  offset = offset || 0;\n  var j = offset;\n  for(var i = 0; i < str.length; ++i) {\n    out[j++] = str.charCodeAt(i);\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Decodes the UTF-8 contents from a Uint8Array.\n *\n * @param bytes the Uint8Array to decode.\n *\n * @return the resulting string.\n */\nutil.text.utf8.decode = function(bytes) {\n  return util.decodeUtf8(String.fromCharCode.apply(null, bytes));\n};\n\n/**\n * Encodes the given string as UTF-16 in a Uint8Array.\n *\n * @param str the string to encode.\n * @param [output] an optional Uint8Array to write the output to; if it\n *          is too small, an exception will be thrown.\n * @param [offset] the start offset for writing to the output (default: 0).\n *\n * @return the Uint8Array or the number of bytes written if output was given.\n */\nutil.text.utf16.encode = function(str, output, offset) {\n  var out = output;\n  if(!out) {\n    out = new Uint8Array(str.length * 2);\n  }\n  var view = new Uint16Array(out.buffer);\n  offset = offset || 0;\n  var j = offset;\n  var k = offset;\n  for(var i = 0; i < str.length; ++i) {\n    view[k++] = str.charCodeAt(i);\n    j += 2;\n  }\n  return output ? (j - offset) : out;\n};\n\n/**\n * Decodes the UTF-16 contents from a Uint8Array.\n *\n * @param bytes the Uint8Array to decode.\n *\n * @return the resulting string.\n */\nutil.text.utf16.decode = function(bytes) {\n  return String.fromCharCode.apply(null, new Uint16Array(bytes.buffer));\n};\n\n/**\n * Deflates the given data using a flash interface.\n *\n * @param api the flash interface.\n * @param bytes the data.\n * @param raw true to return only raw deflate data, false to include zlib\n *          header and trailer.\n *\n * @return the deflated data as a string.\n */\nutil.deflate = function(api, bytes, raw) {\n  bytes = util.decode64(api.deflate(util.encode64(bytes)).rval);\n\n  // strip zlib header and trailer if necessary\n  if(raw) {\n    // zlib header is 2 bytes (CMF,FLG) where FLG indicates that\n    // there is a 4-byte DICT (alder-32) block before the data if\n    // its 5th bit is set\n    var start = 2;\n    var flg = bytes.charCodeAt(1);\n    if(flg & 0x20) {\n      start = 6;\n    }\n    // zlib trailer is 4 bytes of adler-32\n    bytes = bytes.substring(start, bytes.length - 4);\n  }\n\n  return bytes;\n};\n\n/**\n * Inflates the given data using a flash interface.\n *\n * @param api the flash interface.\n * @param bytes the data.\n * @param raw true if the incoming data has no zlib header or trailer and is\n *          raw DEFLATE data.\n *\n * @return the inflated data as a string, null on error.\n */\nutil.inflate = function(api, bytes, raw) {\n  // TODO: add zlib header and trailer if necessary/possible\n  var rval = api.inflate(util.encode64(bytes)).rval;\n  return (rval === null) ? null : util.decode64(rval);\n};\n\n/**\n * Sets a storage object.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param obj the storage object, null to remove.\n */\nvar _setStorageObject = function(api, id, obj) {\n  if(!api) {\n    throw new Error('WebStorage not available.');\n  }\n\n  var rval;\n  if(obj === null) {\n    rval = api.removeItem(id);\n  } else {\n    // json-encode and base64-encode object\n    obj = util.encode64(JSON.stringify(obj));\n    rval = api.setItem(id, obj);\n  }\n\n  // handle potential flash error\n  if(typeof(rval) !== 'undefined' && rval.rval !== true) {\n    var error = new Error(rval.error.message);\n    error.id = rval.error.id;\n    error.name = rval.error.name;\n    throw error;\n  }\n};\n\n/**\n * Gets a storage object.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n *\n * @return the storage object entry or null if none exists.\n */\nvar _getStorageObject = function(api, id) {\n  if(!api) {\n    throw new Error('WebStorage not available.');\n  }\n\n  // get the existing entry\n  var rval = api.getItem(id);\n\n  /* Note: We check api.init because we can't do (api == localStorage)\n    on IE because of \"Class doesn't support Automation\" exception. Only\n    the flash api has an init method so this works too, but we need a\n    better solution in the future. */\n\n  // flash returns item wrapped in an object, handle special case\n  if(api.init) {\n    if(rval.rval === null) {\n      if(rval.error) {\n        var error = new Error(rval.error.message);\n        error.id = rval.error.id;\n        error.name = rval.error.name;\n        throw error;\n      }\n      // no error, but also no item\n      rval = null;\n    } else {\n      rval = rval.rval;\n    }\n  }\n\n  // handle decoding\n  if(rval !== null) {\n    // base64-decode and json-decode data\n    rval = JSON.parse(util.decode64(rval));\n  }\n\n  return rval;\n};\n\n/**\n * Stores an item in local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param data the data for the item (any javascript object/primitive).\n */\nvar _setItem = function(api, id, key, data) {\n  // get storage object\n  var obj = _getStorageObject(api, id);\n  if(obj === null) {\n    // create a new storage object\n    obj = {};\n  }\n  // update key\n  obj[key] = data;\n\n  // set storage object\n  _setStorageObject(api, id, obj);\n};\n\n/**\n * Gets an item from local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n *\n * @return the item.\n */\nvar _getItem = function(api, id, key) {\n  // get storage object\n  var rval = _getStorageObject(api, id);\n  if(rval !== null) {\n    // return data at key\n    rval = (key in rval) ? rval[key] : null;\n  }\n\n  return rval;\n};\n\n/**\n * Removes an item from local storage.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n */\nvar _removeItem = function(api, id, key) {\n  // get storage object\n  var obj = _getStorageObject(api, id);\n  if(obj !== null && key in obj) {\n    // remove key\n    delete obj[key];\n\n    // see if entry has no keys remaining\n    var empty = true;\n    for(var prop in obj) {\n      empty = false;\n      break;\n    }\n    if(empty) {\n      // remove entry entirely if no keys are left\n      obj = null;\n    }\n\n    // set storage object\n    _setStorageObject(api, id, obj);\n  }\n};\n\n/**\n * Clears the local disk storage identified by the given ID.\n *\n * @param api the storage interface.\n * @param id the storage ID to use.\n */\nvar _clearItems = function(api, id) {\n  _setStorageObject(api, id, null);\n};\n\n/**\n * Calls a storage function.\n *\n * @param func the function to call.\n * @param args the arguments for the function.\n * @param location the location argument.\n *\n * @return the return value from the function.\n */\nvar _callStorageFunction = function(func, args, location) {\n  var rval = null;\n\n  // default storage types\n  if(typeof(location) === 'undefined') {\n    location = ['web', 'flash'];\n  }\n\n  // apply storage types in order of preference\n  var type;\n  var done = false;\n  var exception = null;\n  for(var idx in location) {\n    type = location[idx];\n    try {\n      if(type === 'flash' || type === 'both') {\n        if(args[0] === null) {\n          throw new Error('Flash local storage not available.');\n        }\n        rval = func.apply(this, args);\n        done = (type === 'flash');\n      }\n      if(type === 'web' || type === 'both') {\n        args[0] = localStorage;\n        rval = func.apply(this, args);\n        done = true;\n      }\n    } catch(ex) {\n      exception = ex;\n    }\n    if(done) {\n      break;\n    }\n  }\n\n  if(!done) {\n    throw exception;\n  }\n\n  return rval;\n};\n\n/**\n * Stores an item on local disk.\n *\n * The available types of local storage include 'flash', 'web', and 'both'.\n *\n * The type 'flash' refers to flash local storage (SharedObject). In order\n * to use flash local storage, the 'api' parameter must be valid. The type\n * 'web' refers to WebStorage, if supported by the browser. The type 'both'\n * refers to storing using both 'flash' and 'web', not just one or the\n * other.\n *\n * The location array should list the storage types to use in order of\n * preference:\n *\n * ['flash']: flash only storage\n * ['web']: web only storage\n * ['both']: try to store in both\n * ['flash','web']: store in flash first, but if not available, 'web'\n * ['web','flash']: store in web first, but if not available, 'flash'\n *\n * The location array defaults to: ['web', 'flash']\n *\n * @param api the flash interface, null to use only WebStorage.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param data the data for the item (any javascript object/primitive).\n * @param location an array with the preferred types of storage to use.\n */\nutil.setItem = function(api, id, key, data, location) {\n  _callStorageFunction(_setItem, arguments, location);\n};\n\n/**\n * Gets an item on local disk.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface, null to use only WebStorage.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param location an array with the preferred types of storage to use.\n *\n * @return the item.\n */\nutil.getItem = function(api, id, key, location) {\n  return _callStorageFunction(_getItem, arguments, location);\n};\n\n/**\n * Removes an item on local disk.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface.\n * @param id the storage ID to use.\n * @param key the key for the item.\n * @param location an array with the preferred types of storage to use.\n */\nutil.removeItem = function(api, id, key, location) {\n  _callStorageFunction(_removeItem, arguments, location);\n};\n\n/**\n * Clears the local disk storage identified by the given ID.\n *\n * Set setItem() for details on storage types.\n *\n * @param api the flash interface if flash is available.\n * @param id the storage ID to use.\n * @param location an array with the preferred types of storage to use.\n */\nutil.clearItems = function(api, id, location) {\n  _callStorageFunction(_clearItems, arguments, location);\n};\n\n/**\n * Parses the scheme, host, and port from an http(s) url.\n *\n * @param str the url string.\n *\n * @return the parsed url object or null if the url is invalid.\n */\nutil.parseUrl = function(str) {\n  // FIXME: this regex looks a bit broken\n  var regex = /^(https?):\\/\\/([^:&^\\/]*):?(\\d*)(.*)$/g;\n  regex.lastIndex = 0;\n  var m = regex.exec(str);\n  var url = (m === null) ? null : {\n    full: str,\n    scheme: m[1],\n    host: m[2],\n    port: m[3],\n    path: m[4]\n  };\n  if(url) {\n    url.fullHost = url.host;\n    if(url.port) {\n      if(url.port !== 80 && url.scheme === 'http') {\n        url.fullHost += ':' + url.port;\n      } else if(url.port !== 443 && url.scheme === 'https') {\n        url.fullHost += ':' + url.port;\n      }\n    } else if(url.scheme === 'http') {\n      url.port = 80;\n    } else if(url.scheme === 'https') {\n      url.port = 443;\n    }\n    url.full = url.scheme + '://' + url.fullHost;\n  }\n  return url;\n};\n\n/* Storage for query variables */\nvar _queryVariables = null;\n\n/**\n * Returns the window location query variables. Query is parsed on the first\n * call and the same object is returned on subsequent calls. The mapping\n * is from keys to an array of values. Parameters without values will have\n * an object key set but no value added to the value array. Values are\n * unescaped.\n *\n * ...?k1=v1&k2=v2:\n * {\n *   \"k1\": [\"v1\"],\n *   \"k2\": [\"v2\"]\n * }\n *\n * ...?k1=v1&k1=v2:\n * {\n *   \"k1\": [\"v1\", \"v2\"]\n * }\n *\n * ...?k1=v1&k2:\n * {\n *   \"k1\": [\"v1\"],\n *   \"k2\": []\n * }\n *\n * ...?k1=v1&k1:\n * {\n *   \"k1\": [\"v1\"]\n * }\n *\n * ...?k1&k1:\n * {\n *   \"k1\": []\n * }\n *\n * @param query the query string to parse (optional, default to cached\n *          results from parsing window location search query).\n *\n * @return object mapping keys to variables.\n */\nutil.getQueryVariables = function(query) {\n  var parse = function(q) {\n    var rval = {};\n    var kvpairs = q.split('&');\n    for(var i = 0; i < kvpairs.length; i++) {\n      var pos = kvpairs[i].indexOf('=');\n      var key;\n      var val;\n      if(pos > 0) {\n        key = kvpairs[i].substring(0, pos);\n        val = kvpairs[i].substring(pos + 1);\n      } else {\n        key = kvpairs[i];\n        val = null;\n      }\n      if(!(key in rval)) {\n        rval[key] = [];\n      }\n      // disallow overriding object prototype keys\n      if(!(key in Object.prototype) && val !== null) {\n        rval[key].push(unescape(val));\n      }\n    }\n    return rval;\n  };\n\n   var rval;\n   if(typeof(query) === 'undefined') {\n     // set cached variables if needed\n     if(_queryVariables === null) {\n       if(typeof(window) !== 'undefined' && window.location && window.location.search) {\n          // parse window search query\n          _queryVariables = parse(window.location.search.substring(1));\n       } else {\n          // no query variables available\n          _queryVariables = {};\n       }\n     }\n     rval = _queryVariables;\n   } else {\n     // parse given query\n     rval = parse(query);\n   }\n   return rval;\n};\n\n/**\n * Parses a fragment into a path and query. This method will take a URI\n * fragment and break it up as if it were the main URI. For example:\n *    /bar/baz?a=1&b=2\n * results in:\n *    {\n *       path: [\"bar\", \"baz\"],\n *       query: {\"k1\": [\"v1\"], \"k2\": [\"v2\"]}\n *    }\n *\n * @return object with a path array and query object.\n */\nutil.parseFragment = function(fragment) {\n  // default to whole fragment\n  var fp = fragment;\n  var fq = '';\n  // split into path and query if possible at the first '?'\n  var pos = fragment.indexOf('?');\n  if(pos > 0) {\n    fp = fragment.substring(0, pos);\n    fq = fragment.substring(pos + 1);\n  }\n  // split path based on '/' and ignore first element if empty\n  var path = fp.split('/');\n  if(path.length > 0 && path[0] === '') {\n    path.shift();\n  }\n  // convert query into object\n  var query = (fq === '') ? {} : util.getQueryVariables(fq);\n\n  return {\n    pathString: fp,\n    queryString: fq,\n    path: path,\n    query: query\n  };\n};\n\n/**\n * Makes a request out of a URI-like request string. This is intended to\n * be used where a fragment id (after a URI '#') is parsed as a URI with\n * path and query parts. The string should have a path beginning and\n * delimited by '/' and optional query parameters following a '?'. The\n * query should be a standard URL set of key value pairs delimited by\n * '&'. For backwards compatibility the initial '/' on the path is not\n * required. The request object has the following API, (fully described\n * in the method code):\n *    {\n *       path: <the path string part>.\n *       query: <the query string part>,\n *       getPath(i): get part or all of the split path array,\n *       getQuery(k, i): get part or all of a query key array,\n *       getQueryLast(k, _default): get last element of a query key array.\n *    }\n *\n * @return object with request parameters.\n */\nutil.makeRequest = function(reqString) {\n  var frag = util.parseFragment(reqString);\n  var req = {\n    // full path string\n    path: frag.pathString,\n    // full query string\n    query: frag.queryString,\n    /**\n     * Get path or element in path.\n     *\n     * @param i optional path index.\n     *\n     * @return path or part of path if i provided.\n     */\n    getPath: function(i) {\n      return (typeof(i) === 'undefined') ? frag.path : frag.path[i];\n    },\n    /**\n     * Get query, values for a key, or value for a key index.\n     *\n     * @param k optional query key.\n     * @param i optional query key index.\n     *\n     * @return query, values for a key, or value for a key index.\n     */\n    getQuery: function(k, i) {\n      var rval;\n      if(typeof(k) === 'undefined') {\n        rval = frag.query;\n      } else {\n        rval = frag.query[k];\n        if(rval && typeof(i) !== 'undefined') {\n           rval = rval[i];\n        }\n      }\n      return rval;\n    },\n    getQueryLast: function(k, _default) {\n      var rval;\n      var vals = req.getQuery(k);\n      if(vals) {\n        rval = vals[vals.length - 1];\n      } else {\n        rval = _default;\n      }\n      return rval;\n    }\n  };\n  return req;\n};\n\n/**\n * Makes a URI out of a path, an object with query parameters, and a\n * fragment. Uses jQuery.param() internally for query string creation.\n * If the path is an array, it will be joined with '/'.\n *\n * @param path string path or array of strings.\n * @param query object with query parameters. (optional)\n * @param fragment fragment string. (optional)\n *\n * @return string object with request parameters.\n */\nutil.makeLink = function(path, query, fragment) {\n  // join path parts if needed\n  path = jQuery.isArray(path) ? path.join('/') : path;\n\n  var qstr = jQuery.param(query || {});\n  fragment = fragment || '';\n  return path +\n    ((qstr.length > 0) ? ('?' + qstr) : '') +\n    ((fragment.length > 0) ? ('#' + fragment) : '');\n};\n\n/**\n * Follows a path of keys deep into an object hierarchy and set a value.\n * If a key does not exist or it's value is not an object, create an\n * object in it's place. This can be destructive to a object tree if\n * leaf nodes are given as non-final path keys.\n * Used to avoid exceptions from missing parts of the path.\n *\n * @param object the starting object.\n * @param keys an array of string keys.\n * @param value the value to set.\n */\nutil.setPath = function(object, keys, value) {\n  // need to start at an object\n  if(typeof(object) === 'object' && object !== null) {\n    var i = 0;\n    var len = keys.length;\n    while(i < len) {\n      var next = keys[i++];\n      if(i == len) {\n        // last\n        object[next] = value;\n      } else {\n        // more\n        var hasNext = (next in object);\n        if(!hasNext ||\n          (hasNext && typeof(object[next]) !== 'object') ||\n          (hasNext && object[next] === null)) {\n          object[next] = {};\n        }\n        object = object[next];\n      }\n    }\n  }\n};\n\n/**\n * Follows a path of keys deep into an object hierarchy and return a value.\n * If a key does not exist, create an object in it's place.\n * Used to avoid exceptions from missing parts of the path.\n *\n * @param object the starting object.\n * @param keys an array of string keys.\n * @param _default value to return if path not found.\n *\n * @return the value at the path if found, else default if given, else\n *         undefined.\n */\nutil.getPath = function(object, keys, _default) {\n  var i = 0;\n  var len = keys.length;\n  var hasNext = true;\n  while(hasNext && i < len &&\n    typeof(object) === 'object' && object !== null) {\n    var next = keys[i++];\n    hasNext = next in object;\n    if(hasNext) {\n      object = object[next];\n    }\n  }\n  return (hasNext ? object : _default);\n};\n\n/**\n * Follow a path of keys deep into an object hierarchy and delete the\n * last one. If a key does not exist, do nothing.\n * Used to avoid exceptions from missing parts of the path.\n *\n * @param object the starting object.\n * @param keys an array of string keys.\n */\nutil.deletePath = function(object, keys) {\n  // need to start at an object\n  if(typeof(object) === 'object' && object !== null) {\n    var i = 0;\n    var len = keys.length;\n    while(i < len) {\n      var next = keys[i++];\n      if(i == len) {\n        // last\n        delete object[next];\n      } else {\n        // more\n        if(!(next in object) ||\n          (typeof(object[next]) !== 'object') ||\n          (object[next] === null)) {\n           break;\n        }\n        object = object[next];\n      }\n    }\n  }\n};\n\n/**\n * Check if an object is empty.\n *\n * Taken from:\n * http://stackoverflow.com/questions/679915/how-do-i-test-for-an-empty-javascript-object-from-json/679937#679937\n *\n * @param object the object to check.\n */\nutil.isEmpty = function(obj) {\n  for(var prop in obj) {\n    if(obj.hasOwnProperty(prop)) {\n      return false;\n    }\n  }\n  return true;\n};\n\n/**\n * Format with simple printf-style interpolation.\n *\n * %%: literal '%'\n * %s,%o: convert next argument into a string.\n *\n * @param format the string to format.\n * @param ... arguments to interpolate into the format string.\n */\nutil.format = function(format) {\n  var re = /%./g;\n  // current match\n  var match;\n  // current part\n  var part;\n  // current arg index\n  var argi = 0;\n  // collected parts to recombine later\n  var parts = [];\n  // last index found\n  var last = 0;\n  // loop while matches remain\n  while((match = re.exec(format))) {\n    part = format.substring(last, re.lastIndex - 2);\n    // don't add empty strings (ie, parts between %s%s)\n    if(part.length > 0) {\n      parts.push(part);\n    }\n    last = re.lastIndex;\n    // switch on % code\n    var code = match[0][1];\n    switch(code) {\n    case 's':\n    case 'o':\n      // check if enough arguments were given\n      if(argi < arguments.length) {\n        parts.push(arguments[argi++ + 1]);\n      } else {\n        parts.push('<?>');\n      }\n      break;\n    // FIXME: do proper formating for numbers, etc\n    //case 'f':\n    //case 'd':\n    case '%':\n      parts.push('%');\n      break;\n    default:\n      parts.push('<%' + code + '?>');\n    }\n  }\n  // add trailing part of format string\n  parts.push(format.substring(last));\n  return parts.join('');\n};\n\n/**\n * Formats a number.\n *\n * http://snipplr.com/view/5945/javascript-numberformat--ported-from-php/\n */\nutil.formatNumber = function(number, decimals, dec_point, thousands_sep) {\n  // http://kevin.vanzonneveld.net\n  // +   original by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)\n  // +   improved by: Kevin van Zonneveld (http://kevin.vanzonneveld.net)\n  // +     bugfix by: Michael White (http://crestidg.com)\n  // +     bugfix by: Benjamin Lupton\n  // +     bugfix by: Allan Jensen (http://www.winternet.no)\n  // +    revised by: Jonas Raoni Soares Silva (http://www.jsfromhell.com)\n  // *     example 1: number_format(1234.5678, 2, '.', '');\n  // *     returns 1: 1234.57\n\n  var n = number, c = isNaN(decimals = Math.abs(decimals)) ? 2 : decimals;\n  var d = dec_point === undefined ? ',' : dec_point;\n  var t = thousands_sep === undefined ?\n   '.' : thousands_sep, s = n < 0 ? '-' : '';\n  var i = parseInt((n = Math.abs(+n || 0).toFixed(c)), 10) + '';\n  var j = (i.length > 3) ? i.length % 3 : 0;\n  return s + (j ? i.substr(0, j) + t : '') +\n    i.substr(j).replace(/(\\d{3})(?=\\d)/g, '$1' + t) +\n    (c ? d + Math.abs(n - i).toFixed(c).slice(2) : '');\n};\n\n/**\n * Formats a byte size.\n *\n * http://snipplr.com/view/5949/format-humanize-file-byte-size-presentation-in-javascript/\n */\nutil.formatSize = function(size) {\n  if(size >= 1073741824) {\n    size = util.formatNumber(size / 1073741824, 2, '.', '') + ' GiB';\n  } else if(size >= 1048576) {\n    size = util.formatNumber(size / 1048576, 2, '.', '') + ' MiB';\n  } else if(size >= 1024) {\n    size = util.formatNumber(size / 1024, 0) + ' KiB';\n  } else {\n    size = util.formatNumber(size, 0) + ' bytes';\n  }\n  return size;\n};\n\n/**\n * Converts an IPv4 or IPv6 string representation into bytes (in network order).\n *\n * @param ip the IPv4 or IPv6 address to convert.\n *\n * @return the 4-byte IPv6 or 16-byte IPv6 address or null if the address can't\n *         be parsed.\n */\nutil.bytesFromIP = function(ip) {\n  if(ip.indexOf('.') !== -1) {\n    return util.bytesFromIPv4(ip);\n  }\n  if(ip.indexOf(':') !== -1) {\n    return util.bytesFromIPv6(ip);\n  }\n  return null;\n};\n\n/**\n * Converts an IPv4 string representation into bytes (in network order).\n *\n * @param ip the IPv4 address to convert.\n *\n * @return the 4-byte address or null if the address can't be parsed.\n */\nutil.bytesFromIPv4 = function(ip) {\n  ip = ip.split('.');\n  if(ip.length !== 4) {\n    return null;\n  }\n  var b = util.createBuffer();\n  for(var i = 0; i < ip.length; ++i) {\n    var num = parseInt(ip[i], 10);\n    if(isNaN(num)) {\n      return null;\n    }\n    b.putByte(num);\n  }\n  return b.getBytes();\n};\n\n/**\n * Converts an IPv6 string representation into bytes (in network order).\n *\n * @param ip the IPv6 address to convert.\n *\n * @return the 16-byte address or null if the address can't be parsed.\n */\nutil.bytesFromIPv6 = function(ip) {\n  var blanks = 0;\n  ip = ip.split(':').filter(function(e) {\n    if(e.length === 0) ++blanks;\n    return true;\n  });\n  var zeros = (8 - ip.length + blanks) * 2;\n  var b = util.createBuffer();\n  for(var i = 0; i < 8; ++i) {\n    if(!ip[i] || ip[i].length === 0) {\n      b.fillWithByte(0, zeros);\n      zeros = 0;\n      continue;\n    }\n    var bytes = util.hexToBytes(ip[i]);\n    if(bytes.length < 2) {\n      b.putByte(0);\n    }\n    b.putBytes(bytes);\n  }\n  return b.getBytes();\n};\n\n/**\n * Converts 4-bytes into an IPv4 string representation or 16-bytes into\n * an IPv6 string representation. The bytes must be in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv4 or IPv6 string representation if 4 or 16 bytes,\n *         respectively, are given, otherwise null.\n */\nutil.bytesToIP = function(bytes) {\n  if(bytes.length === 4) {\n    return util.bytesToIPv4(bytes);\n  }\n  if(bytes.length === 16) {\n    return util.bytesToIPv6(bytes);\n  }\n  return null;\n};\n\n/**\n * Converts 4-bytes into an IPv4 string representation. The bytes must be\n * in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv4 string representation or null for an invalid # of bytes.\n */\nutil.bytesToIPv4 = function(bytes) {\n  if(bytes.length !== 4) {\n    return null;\n  }\n  var ip = [];\n  for(var i = 0; i < bytes.length; ++i) {\n    ip.push(bytes.charCodeAt(i));\n  }\n  return ip.join('.');\n};\n\n/**\n * Converts 16-bytes into an IPv16 string representation. The bytes must be\n * in network order.\n *\n * @param bytes the bytes to convert.\n *\n * @return the IPv16 string representation or null for an invalid # of bytes.\n */\nutil.bytesToIPv6 = function(bytes) {\n  if(bytes.length !== 16) {\n    return null;\n  }\n  var ip = [];\n  var zeroGroups = [];\n  var zeroMaxGroup = 0;\n  for(var i = 0; i < bytes.length; i += 2) {\n    var hex = util.bytesToHex(bytes[i] + bytes[i + 1]);\n    // canonicalize zero representation\n    while(hex[0] === '0' && hex !== '0') {\n      hex = hex.substr(1);\n    }\n    if(hex === '0') {\n      var last = zeroGroups[zeroGroups.length - 1];\n      var idx = ip.length;\n      if(!last || idx !== last.end + 1) {\n        zeroGroups.push({start: idx, end: idx});\n      } else {\n        last.end = idx;\n        if((last.end - last.start) >\n          (zeroGroups[zeroMaxGroup].end - zeroGroups[zeroMaxGroup].start)) {\n          zeroMaxGroup = zeroGroups.length - 1;\n        }\n      }\n    }\n    ip.push(hex);\n  }\n  if(zeroGroups.length > 0) {\n    var group = zeroGroups[zeroMaxGroup];\n    // only shorten group of length > 0\n    if(group.end - group.start > 0) {\n      ip.splice(group.start, group.end - group.start + 1, '');\n      if(group.start === 0) {\n        ip.unshift('');\n      }\n      if(group.end === 7) {\n        ip.push('');\n      }\n    }\n  }\n  return ip.join(':');\n};\n\n/**\n * Estimates the number of processes that can be run concurrently. If\n * creating Web Workers, keep in mind that the main JavaScript process needs\n * its own core.\n *\n * @param options the options to use:\n *          update true to force an update (not use the cached value).\n * @param callback(err, max) called once the operation completes.\n */\nutil.estimateCores = function(options, callback) {\n  if(typeof options === 'function') {\n    callback = options;\n    options = {};\n  }\n  options = options || {};\n  if('cores' in util && !options.update) {\n    return callback(null, util.cores);\n  }\n  if(typeof navigator !== 'undefined' &&\n    'hardwareConcurrency' in navigator &&\n    navigator.hardwareConcurrency > 0) {\n    util.cores = navigator.hardwareConcurrency;\n    return callback(null, util.cores);\n  }\n  if(typeof Worker === 'undefined') {\n    // workers not available\n    util.cores = 1;\n    return callback(null, util.cores);\n  }\n  if(typeof Blob === 'undefined') {\n    // can't estimate, default to 2\n    util.cores = 2;\n    return callback(null, util.cores);\n  }\n\n  // create worker concurrency estimation code as blob\n  var blobUrl = URL.createObjectURL(new Blob(['(',\n    function() {\n      self.addEventListener('message', function(e) {\n        // run worker for 4 ms\n        var st = Date.now();\n        var et = st + 4;\n        while(Date.now() < et);\n        self.postMessage({st: st, et: et});\n      });\n    }.toString(),\n  ')()'], {type: 'application/javascript'}));\n\n  // take 5 samples using 16 workers\n  sample([], 5, 16);\n\n  function sample(max, samples, numWorkers) {\n    if(samples === 0) {\n      // get overlap average\n      var avg = Math.floor(max.reduce(function(avg, x) {\n        return avg + x;\n      }, 0) / max.length);\n      util.cores = Math.max(1, avg);\n      URL.revokeObjectURL(blobUrl);\n      return callback(null, util.cores);\n    }\n    map(numWorkers, function(err, results) {\n      max.push(reduce(numWorkers, results));\n      sample(max, samples - 1, numWorkers);\n    });\n  }\n\n  function map(numWorkers, callback) {\n    var workers = [];\n    var results = [];\n    for(var i = 0; i < numWorkers; ++i) {\n      var worker = new Worker(blobUrl);\n      worker.addEventListener('message', function(e) {\n        results.push(e.data);\n        if(results.length === numWorkers) {\n          for(var i = 0; i < numWorkers; ++i) {\n            workers[i].terminate();\n          }\n          callback(null, results);\n        }\n      });\n      workers.push(worker);\n    }\n    for(var i = 0; i < numWorkers; ++i) {\n      workers[i].postMessage(i);\n    }\n  }\n\n  function reduce(numWorkers, results) {\n    // find overlapping time windows\n    var overlaps = [];\n    for(var n = 0; n < numWorkers; ++n) {\n      var r1 = results[n];\n      var overlap = overlaps[n] = [];\n      for(var i = 0; i < numWorkers; ++i) {\n        if(n === i) {\n          continue;\n        }\n        var r2 = results[i];\n        if((r1.st > r2.st && r1.st < r2.et) ||\n          (r2.st > r1.st && r2.st < r1.et)) {\n          overlap.push(i);\n        }\n      }\n    }\n    // get maximum overlaps ... don't include overlapping worker itself\n    // as the main JS process was also being scheduled during the work and\n    // would have to be subtracted from the estimate anyway\n    return overlaps.reduce(function(max, overlap) {\n      return Math.max(max, overlap.length);\n    }, 0);\n  }\n};\n","/*\n * Copyright (c) 2016-2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\n// TODO: convert to ES6 iterable\n\nmodule.exports = class Permutator {\n  /**\n   * A Permutator iterates over all possible permutations of the given array\n   * of elements.\n   *\n   * @param list the array of elements to iterate over.\n   */\n  constructor(list) {\n    // original array\n    this.list = list.sort();\n    // indicates whether there are more permutations\n    this.done = false;\n    // directional info for permutation algorithm\n    this.left = {};\n    for(let i = 0; i < list.length; ++i) {\n      this.left[list[i]] = true;\n    }\n  }\n\n  /**\n   * Returns true if there is another permutation.\n   *\n   * @return true if there is another permutation, false if not.\n   */\n  hasNext() {\n    return !this.done;\n  }\n\n  /**\n   * Gets the next permutation. Call hasNext() to ensure there is another one\n   * first.\n   *\n   * @return the next permutation.\n   */\n  next() {\n    // copy current permutation\n    const rval = this.list.slice();\n\n    /* Calculate the next permutation using the Steinhaus-Johnson-Trotter\n     permutation algorithm. */\n\n    // get largest mobile element k\n    // (mobile: element is greater than the one it is looking at)\n    let k = null;\n    let pos = 0;\n    const length = this.list.length;\n    for(let i = 0; i < length; ++i) {\n      const element = this.list[i];\n      const left = this.left[element];\n      if((k === null || element > k) &&\n        ((left && i > 0 && element > this.list[i - 1]) ||\n        (!left && i < (length - 1) && element > this.list[i + 1]))) {\n        k = element;\n        pos = i;\n      }\n    }\n\n    // no more permutations\n    if(k === null) {\n      this.done = true;\n    } else {\n      // swap k and the element it is looking at\n      const swap = this.left[k] ? pos - 1 : pos + 1;\n      this.list[pos] = this.list[swap];\n      this.list[swap] = k;\n\n      // reverse the direction of all elements larger than k\n      for(let i = 0; i < length; ++i) {\n        if(this.list[i] > k) {\n          this.left[this.list[i]] = !this.left[this.list[i]];\n        }\n      }\n    }\n\n    return rval;\n  }\n};\n\n","/*\n * Copyright (c) 2016 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst IdentifierIssuer = require('./IdentifierIssuer');\nconst MessageDigest = require('./MessageDigest');\nconst Permutator = require('./Permutator');\nconst NQuads = require('./NQuads');\nconst util = require('./util');\n\nconst POSITIONS = {subject: 's', object: 'o', graph: 'g'};\n\nmodule.exports = class URDNA2015Sync {\n  constructor() {\n    this.name = 'URDNA2015';\n    this.blankNodeInfo = {};\n    this.hashToBlankNodes = {};\n    this.canonicalIssuer = new IdentifierIssuer('_:c14n');\n    this.hashAlgorithm = 'sha256';\n    this.quads;\n  }\n\n  // 4.4) Normalization Algorithm\n  main(dataset) {\n    const self = this;\n    self.quads = dataset;\n\n    // 1) Create the normalization state.\n\n    // Note: Optimize by generating non-normalized blank node map concurrently.\n    const nonNormalized = {};\n\n    // 2) For every quad in input dataset:\n    for(const quad of dataset) {\n      // 2.1) For each blank node that occurs in the quad, add a reference\n      // to the quad using the blank node identifier in the blank node to\n      // quads map, creating a new entry if necessary.\n      self.forEachComponent(quad, component => {\n        if(component.termType !== 'BlankNode') {\n          return;\n        }\n        const id = component.value;\n        if(id in self.blankNodeInfo) {\n          self.blankNodeInfo[id].quads.push(quad);\n        } else {\n          nonNormalized[id] = true;\n          self.blankNodeInfo[id] = {quads: [quad]};\n        }\n      });\n    }\n\n    // 3) Create a list of non-normalized blank node identifiers\n    // non-normalized identifiers and populate it using the keys from the\n    // blank node to quads map.\n    // Note: We use a map here and it was generated during step 2.\n\n    // 4) Initialize simple, a boolean flag, to true.\n    let simple = true;\n\n    // 5) While simple is true, issue canonical identifiers for blank nodes:\n    while(simple) {\n      // 5.1) Set simple to false.\n      simple = false;\n\n      // 5.2) Clear hash to blank nodes map.\n      self.hashToBlankNodes = {};\n\n      // 5.3) For each blank node identifier identifier in non-normalized\n      // identifiers:\n      for(const id in nonNormalized) {\n        // 5.3.1) Create a hash, hash, according to the Hash First Degree\n        // Quads algorithm.\n        const hash = self.hashFirstDegreeQuads(id);\n\n        // 5.3.2) Add hash and identifier to hash to blank nodes map,\n        // creating a new entry if necessary.\n        if(hash in self.hashToBlankNodes) {\n          self.hashToBlankNodes[hash].push(id);\n        } else {\n          self.hashToBlankNodes[hash] = [id];\n        }\n      }\n\n      // 5.4) For each hash to identifier list mapping in hash to blank\n      // nodes map, lexicographically-sorted by hash:\n      const hashes = Object.keys(self.hashToBlankNodes).sort();\n      for(let i = 0; i < hashes.length; ++i) {\n        // 5.4.1) If the length of identifier list is greater than 1,\n        // continue to the next mapping.\n        const hash = hashes[i];\n        const idList = self.hashToBlankNodes[hash];\n        if(idList.length > 1) {\n          continue;\n        }\n\n        // 5.4.2) Use the Issue Identifier algorithm, passing canonical\n        // issuer and the single blank node identifier in identifier\n        // list, identifier, to issue a canonical replacement identifier\n        // for identifier.\n        // TODO: consider changing `getId` to `issue`\n        const id = idList[0];\n        self.canonicalIssuer.getId(id);\n\n        // 5.4.3) Remove identifier from non-normalized identifiers.\n        delete nonNormalized[id];\n\n        // 5.4.4) Remove hash from the hash to blank nodes map.\n        delete self.hashToBlankNodes[hash];\n\n        // 5.4.5) Set simple to true.\n        simple = true;\n      }\n    }\n\n    // 6) For each hash to identifier list mapping in hash to blank nodes map,\n    // lexicographically-sorted by hash:\n    const hashes = Object.keys(self.hashToBlankNodes).sort();\n    for(let i = 0; i < hashes.length; ++i) {\n      // 6.1) Create hash path list where each item will be a result of\n      // running the Hash N-Degree Quads algorithm.\n      const hashPathList = [];\n\n      // 6.2) For each blank node identifier identifier in identifier list:\n      const hash = hashes[i];\n      const idList = self.hashToBlankNodes[hash];\n      for(let j = 0; j < idList.length; ++j) {\n        // 6.2.1) If a canonical identifier has already been issued for\n        // identifier, continue to the next identifier.\n        const id = idList[j];\n        if(self.canonicalIssuer.hasId(id)) {\n          continue;\n        }\n\n        // 6.2.2) Create temporary issuer, an identifier issuer\n        // initialized with the prefix _:b.\n        const issuer = new IdentifierIssuer('_:b');\n\n        // 6.2.3) Use the Issue Identifier algorithm, passing temporary\n        // issuer and identifier, to issue a new temporary blank node\n        // identifier for identifier.\n        issuer.getId(id);\n\n        // 6.2.4) Run the Hash N-Degree Quads algorithm, passing\n        // temporary issuer, and append the result to the hash path list.\n        const result = self.hashNDegreeQuads(id, issuer);\n        hashPathList.push(result);\n      }\n\n      // 6.3) For each result in the hash path list,\n      // lexicographically-sorted by the hash in result:\n      // TODO: use `String.localeCompare`?\n      hashPathList.sort((a, b) =>\n        (a.hash < b.hash) ? -1 : ((a.hash > b.hash) ? 1 : 0));\n      for(let j = 0; j < hashPathList.length; ++j) {\n        // 6.3.1) For each blank node identifier, existing identifier,\n        // that was issued a temporary identifier by identifier issuer\n        // in result, issue a canonical identifier, in the same order,\n        // using the Issue Identifier algorithm, passing canonical\n        // issuer and existing identifier.\n        const result = hashPathList[j];\n        for(const existing in result.issuer.existing) {\n          self.canonicalIssuer.getId(existing);\n        }\n      }\n    }\n\n    /* Note: At this point all blank nodes in the set of RDF quads have been\n    assigned canonical identifiers, which have been stored in the canonical\n    issuer. Here each quad is updated by assigning each of its blank nodes\n    its new identifier. */\n\n    // 7) For each quad, quad, in input dataset:\n    const normalized = [];\n    for(let i = 0; i < self.quads.length; ++i) {\n      // 7.1) Create a copy, quad copy, of quad and replace any existing\n      // blank node identifiers using the canonical identifiers\n      // previously issued by canonical issuer.\n      // Note: We optimize away the copy here.\n      const quad = self.quads[i];\n      self.forEachComponent(quad, component => {\n        if(component.termType === 'BlankNode' &&\n          !component.value.startsWith(self.canonicalIssuer.prefix)) {\n          component.value = self.canonicalIssuer.getId(component.value);\n        }\n      });\n      // 7.2) Add quad copy to the normalized dataset.\n      normalized.push(NQuads.serializeQuad(quad));\n    }\n\n    // sort normalized output\n    normalized.sort();\n\n    // 8) Return the normalized dataset.\n    return normalized.join('');\n  }\n\n  // 4.6) Hash First Degree Quads\n  hashFirstDegreeQuads(id) {\n    const self = this;\n\n    // return cached hash\n    const info = self.blankNodeInfo[id];\n    if('hash' in info) {\n      return info.hash;\n    }\n\n    // 1) Initialize nquads to an empty list. It will be used to store quads in\n    // N-Quads format.\n    const nquads = [];\n\n    // 2) Get the list of quads `quads` associated with the reference blank node\n    // identifier in the blank node to quads map.\n    const quads = info.quads;\n\n    // 3) For each quad `quad` in `quads`:\n    for(let i = 0; i < quads.length; ++i) {\n      const quad = quads[i];\n\n      // 3.1) Serialize the quad in N-Quads format with the following special\n      // rule:\n\n      // 3.1.1) If any component in quad is an blank node, then serialize it\n      // using a special identifier as follows:\n      const copy = {predicate: quad.predicate};\n      self.forEachComponent(quad, (component, key) => {\n        // 3.1.2) If the blank node's existing blank node identifier matches\n        // the reference blank node identifier then use the blank node\n        // identifier _:a, otherwise, use the blank node identifier _:z.\n        copy[key] = self.modifyFirstDegreeComponent(id, component, key);\n      });\n      nquads.push(NQuads.serializeQuad(copy));\n    }\n\n    // 4) Sort nquads in lexicographical order.\n    nquads.sort();\n\n    // 5) Return the hash that results from passing the sorted, joined nquads\n    // through the hash algorithm.\n    const md = new MessageDigest(self.hashAlgorithm);\n    for(let i = 0; i < nquads.length; ++i) {\n      md.update(nquads[i]);\n    }\n    // TODO: represent as byte buffer instead to cut memory usage in half\n    info.hash = md.digest();\n    return info.hash;\n  }\n\n  // 4.7) Hash Related Blank Node\n  hashRelatedBlankNode(related, quad, issuer, position) {\n    const self = this;\n\n    // 1) Set the identifier to use for related, preferring first the canonical\n    // identifier for related if issued, second the identifier issued by issuer\n    // if issued, and last, if necessary, the result of the Hash First Degree\n    // Quads algorithm, passing related.\n    let id;\n    if(self.canonicalIssuer.hasId(related)) {\n      id = self.canonicalIssuer.getId(related);\n    } else if(issuer.hasId(related)) {\n      id = issuer.getId(related);\n    } else {\n      id = self.hashFirstDegreeQuads(related);\n    }\n\n    // 2) Initialize a string input to the value of position.\n    // Note: We use a hash object instead.\n    const md = new MessageDigest(self.hashAlgorithm);\n    md.update(position);\n\n    // 3) If position is not g, append <, the value of the predicate in quad,\n    // and > to input.\n    if(position !== 'g') {\n      md.update(self.getRelatedPredicate(quad));\n    }\n\n    // 4) Append identifier to input.\n    md.update(id);\n\n    // 5) Return the hash that results from passing input through the hash\n    // algorithm.\n    // TODO: represent as byte buffer instead to cut memory usage in half\n    return md.digest();\n  }\n\n  // 4.8) Hash N-Degree Quads\n  hashNDegreeQuads(id, issuer) {\n    const self = this;\n\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    // Note: 2) and 3) handled within `createHashToRelated`\n    const md = new MessageDigest(self.hashAlgorithm);\n    const hashToRelated = self.createHashToRelated(id, issuer);\n\n    // 4) Create an empty string, data to hash.\n    // Note: We created a hash object `md` above instead.\n\n    // 5) For each related hash to blank node list mapping in hash to related\n    // blank nodes map, sorted lexicographically by related hash:\n    const hashes = Object.keys(hashToRelated).sort();\n    for(let i = 0; i < hashes.length; ++i) {\n      // 5.1) Append the related hash to the data to hash.\n      const hash = hashes[i];\n      md.update(hash);\n\n      // 5.2) Create a string chosen path.\n      let chosenPath = '';\n\n      // 5.3) Create an unset chosen issuer variable.\n      let chosenIssuer;\n\n      // 5.4) For each permutation of blank node list:\n      const permutator = new Permutator(hashToRelated[hash]);\n      while(permutator.hasNext()) {\n        const permutation = permutator.next();\n\n        // 5.4.1) Create a copy of issuer, issuer copy.\n        let issuerCopy = issuer.clone();\n\n        // 5.4.2) Create a string path.\n        let path = '';\n\n        // 5.4.3) Create a recursion list, to store blank node identifiers\n        // that must be recursively processed by this algorithm.\n        const recursionList = [];\n\n        // 5.4.4) For each related in permutation:\n        let nextPermutation = false;\n        for(let j = 0; j < permutation.length; ++j) {\n          // 5.4.4.1) If a canonical identifier has been issued for\n          // related, append it to path.\n          const related = permutation[j];\n          if(self.canonicalIssuer.hasId(related)) {\n            path += self.canonicalIssuer.getId(related);\n          } else {\n            // 5.4.4.2) Otherwise:\n            // 5.4.4.2.1) If issuer copy has not issued an identifier for\n            // related, append related to recursion list.\n            if(!issuerCopy.hasId(related)) {\n              recursionList.push(related);\n            }\n            // 5.4.4.2.2) Use the Issue Identifier algorithm, passing\n            // issuer copy and related and append the result to path.\n            path += issuerCopy.getId(related);\n          }\n\n          // 5.4.4.3) If chosen path is not empty and the length of path\n          // is greater than or equal to the length of chosen path and\n          // path is lexicographically greater than chosen path, then\n          // skip to the next permutation.\n          // Note: Comparing path length to chosen path length can be optimized\n          // away; only compare lexicographically.\n          if(chosenPath.length !== 0 && path > chosenPath) {\n            nextPermutation = true;\n            break;\n          }\n        }\n\n        if(nextPermutation) {\n          continue;\n        }\n\n        // 5.4.5) For each related in recursion list:\n        for(let j = 0; j < recursionList.length; ++j) {\n          // 5.4.5.1) Set result to the result of recursively executing\n          // the Hash N-Degree Quads algorithm, passing related for\n          // identifier and issuer copy for path identifier issuer.\n          const related = recursionList[j];\n          const result = self.hashNDegreeQuads(related, issuerCopy);\n\n          // 5.4.5.2) Use the Issue Identifier algorithm, passing issuer\n          // copy and related and append the result to path.\n          path += issuerCopy.getId(related);\n\n          // 5.4.5.3) Append <, the hash in result, and > to path.\n          path += '<' + result.hash + '>';\n\n          // 5.4.5.4) Set issuer copy to the identifier issuer in\n          // result.\n          issuerCopy = result.issuer;\n\n          // 5.4.5.5) If chosen path is not empty and the length of path\n          // is greater than or equal to the length of chosen path and\n          // path is lexicographically greater than chosen path, then\n          // skip to the next permutation.\n          // Note: Comparing path length to chosen path length can be optimized\n          // away; only compare lexicographically.\n          if(chosenPath.length !== 0 && path > chosenPath) {\n            nextPermutation = true;\n            break;\n          }\n        }\n\n        if(nextPermutation) {\n          continue;\n        }\n\n        // 5.4.6) If chosen path is empty or path is lexicographically\n        // less than chosen path, set chosen path to path and chosen\n        // issuer to issuer copy.\n        if(chosenPath.length === 0 || path < chosenPath) {\n          chosenPath = path;\n          chosenIssuer = issuerCopy;\n        }\n      }\n\n      // 5.5) Append chosen path to data to hash.\n      md.update(chosenPath);\n\n      // 5.6) Replace issuer, by reference, with chosen issuer.\n      issuer = chosenIssuer;\n    }\n\n    // 6) Return issuer and the hash that results from passing data to hash\n    // through the hash algorithm.\n    return {hash: md.digest(), issuer};\n  }\n\n  // helper for modifying component during Hash First Degree Quads\n  modifyFirstDegreeComponent(id, component) {\n    if(component.termType !== 'BlankNode') {\n      return component;\n    }\n    component = util.clone(component);\n    component.value = (component.value === id ? '_:a' : '_:z');\n    return component;\n  }\n\n  // helper for getting a related predicate\n  getRelatedPredicate(quad) {\n    return '<' + quad.predicate.value + '>';\n  }\n\n  // helper for creating hash to related blank nodes map\n  createHashToRelated(id, issuer) {\n    const self = this;\n\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    const hashToRelated = {};\n\n    // 2) Get a reference, quads, to the list of quads in the blank node to\n    // quads map for the key identifier.\n    const quads = self.blankNodeInfo[id].quads;\n\n    // 3) For each quad in quads:\n    for(let i = 0; i < quads.length; ++i) {\n      // 3.1) For each component in quad, if component is the subject, object,\n      // and graph name and it is a blank node that is not identified by\n      // identifier:\n      const quad = quads[i];\n      for(const key in quad) {\n        const component = quad[key];\n        if(key === 'predicate' ||\n          !(component.termType === 'BlankNode' && component.value !== id)) {\n          continue;\n        }\n        // 3.1.1) Set hash to the result of the Hash Related Blank Node\n        // algorithm, passing the blank node identifier for component as\n        // related, quad, path identifier issuer as issuer, and position as\n        // either s, o, or g based on whether component is a subject, object,\n        // graph name, respectively.\n        const related = component.value;\n        const position = POSITIONS[key];\n        const hash = self.hashRelatedBlankNode(related, quad, issuer, position);\n\n        // 3.1.2) Add a mapping of hash to the blank node identifier for\n        // component to hash to related blank nodes map, adding an entry as\n        // necessary.\n        if(hash in hashToRelated) {\n          hashToRelated[hash].push(related);\n        } else {\n          hashToRelated[hash] = [related];\n        }\n      }\n    }\n\n    return hashToRelated;\n  }\n\n  // helper that iterates over quad components (skips predicate)\n  forEachComponent(quad, op) {\n    for(const key in quad) {\n      // skip `predicate`\n      if(key === 'predicate') {\n        continue;\n      }\n      op(quad[key], key, quad);\n    }\n  }\n};\n","function DefaultGraph () {\n  this.value = ''\n}\n\nDefaultGraph.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType\n}\n\nDefaultGraph.prototype.termType = 'DefaultGraph'\n\nmodule.exports = DefaultGraph\n","function NamedNode (iri) {\n  this.value = iri\n}\n\nNamedNode.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nNamedNode.prototype.termType = 'NamedNode'\n\nmodule.exports = NamedNode\n","/*eslint-disable no-cond-assign */\nmodule.exports = parse;\nmodule.exports.parse = parse;\nmodule.exports.stringify = stringify;\n\nvar numberRegexp = /[-+]?([0-9]*\\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/;\n// Matches sequences like '100 100' or '100 100 100'.\nvar tuples = new RegExp('^' + numberRegexp.source + '(\\\\s' + numberRegexp.source + '){1,}');\n\n/*\n * Parse WKT and return GeoJSON.\n *\n * @param {string} _ A WKT geometry\n * @return {?Object} A GeoJSON geometry object\n */\nfunction parse (input) {\n  var parts = input.split(';');\n  var _ = parts.pop();\n  var srid = (parts.shift() || '').split('=').pop();\n\n  var i = 0;\n\n  function $ (re) {\n    var match = _.substring(i).match(re);\n    if (!match) return null;\n    else {\n      i += match[0].length;\n      return match[0];\n    }\n  }\n\n  function crs (obj) {\n    if (obj && srid.match(/\\d+/)) {\n      obj.crs = {\n        type: 'name',\n        properties: {\n          name: 'urn:ogc:def:crs:EPSG::' + srid\n        }\n      };\n    }\n\n    return obj;\n  }\n\n  function white () { $(/^\\s*/); }\n\n  function multicoords () {\n    white();\n    var depth = 0;\n    var rings = [];\n    var stack = [rings];\n    var pointer = rings;\n    var elem;\n\n    while (elem =\n           $(/^(\\()/) ||\n             $(/^(\\))/) ||\n               $(/^(,)/) ||\n                 $(tuples)) {\n      if (elem === '(') {\n        stack.push(pointer);\n        pointer = [];\n        stack[stack.length - 1].push(pointer);\n        depth++;\n      } else if (elem === ')') {\n        // For the case: Polygon(), ...\n        if (pointer.length === 0) return null;\n\n        pointer = stack.pop();\n        // the stack was empty, input was malformed\n        if (!pointer) return null;\n        depth--;\n        if (depth === 0) break;\n      } else if (elem === ',') {\n        pointer = [];\n        stack[stack.length - 1].push(pointer);\n      } else if (!elem.split(/\\s/g).some(isNaN)) {\n        Array.prototype.push.apply(pointer, elem.split(/\\s/g).map(parseFloat));\n      } else {\n        return null;\n      }\n      white();\n    }\n\n    if (depth !== 0) return null;\n\n    return rings;\n  }\n\n  function coords () {\n    var list = [];\n    var item;\n    var pt;\n    while (pt =\n           $(tuples) ||\n             $(/^(,)/)) {\n      if (pt === ',') {\n        list.push(item);\n        item = [];\n      } else if (!pt.split(/\\s/g).some(isNaN)) {\n        if (!item) item = [];\n        Array.prototype.push.apply(item, pt.split(/\\s/g).map(parseFloat));\n      }\n      white();\n    }\n\n    if (item) list.push(item);\n    else return null;\n\n    return list.length ? list : null;\n  }\n\n  function point () {\n    if (!$(/^(point(\\sz)?)/i)) return null;\n    white();\n    if (!$(/^(\\()/)) return null;\n    var c = coords();\n    if (!c) return null;\n    white();\n    if (!$(/^(\\))/)) return null;\n    return {\n      type: 'Point',\n      coordinates: c[0]\n    };\n  }\n\n  function multipoint () {\n    if (!$(/^(multipoint)/i)) return null;\n    white();\n    var newCoordsFormat = _\n      .substring(_.indexOf('(') + 1, _.length - 1)\n      .replace(/\\(/g, '')\n      .replace(/\\)/g, '');\n    _ = 'MULTIPOINT (' + newCoordsFormat + ')';\n    var c = multicoords();\n    if (!c) return null;\n    white();\n    return {\n      type: 'MultiPoint',\n      coordinates: c\n    };\n  }\n\n  function multilinestring () {\n    if (!$(/^(multilinestring)/i)) return null;\n    white();\n    var c = multicoords();\n    if (!c) return null;\n    white();\n    return {\n      type: 'MultiLineString',\n      coordinates: c\n    };\n  }\n\n  function linestring () {\n    if (!$(/^(linestring(\\sz)?)/i)) return null;\n    white();\n    if (!$(/^(\\()/)) return null;\n    var c = coords();\n    if (!c) return null;\n    if (!$(/^(\\))/)) return null;\n    return {\n      type: 'LineString',\n      coordinates: c\n    };\n  }\n\n  function polygon () {\n    if (!$(/^(polygon(\\sz)?)/i)) return null;\n    white();\n    var c = multicoords();\n    if (!c) return null;\n    return {\n      type: 'Polygon',\n      coordinates: c\n    };\n  }\n\n  function multipolygon () {\n    if (!$(/^(multipolygon)/i)) return null;\n    white();\n    var c = multicoords();\n    if (!c) return null;\n    return {\n      type: 'MultiPolygon',\n      coordinates: c\n    };\n  }\n\n  function geometrycollection () {\n    var geometries = [];\n    var geometry;\n\n    if (!$(/^(geometrycollection)/i)) return null;\n    white();\n\n    if (!$(/^(\\()/)) return null;\n    while (geometry = root()) {\n      geometries.push(geometry);\n      white();\n      $(/^(,)/);\n      white();\n    }\n    if (!$(/^(\\))/)) return null;\n\n    return {\n      type: 'GeometryCollection',\n      geometries: geometries\n    };\n  }\n\n  function root () {\n    return point() ||\n      linestring() ||\n      polygon() ||\n      multipoint() ||\n      multilinestring() ||\n      multipolygon() ||\n      geometrycollection();\n  }\n\n  return crs(root());\n}\n\n/**\n * Stringifies a GeoJSON object into WKT\n */\nfunction stringify (gj) {\n  if (gj.type === 'Feature') {\n    gj = gj.geometry;\n  }\n\n  function pairWKT (c) {\n    return c.join(' ');\n  }\n\n  function ringWKT (r) {\n    return r.map(pairWKT).join(', ');\n  }\n\n  function ringsWKT (r) {\n    return r.map(ringWKT).map(wrapParens).join(', ');\n  }\n\n  function multiRingsWKT (r) {\n    return r.map(ringsWKT).map(wrapParens).join(', ');\n  }\n\n  function wrapParens (s) { return '(' + s + ')'; }\n\n  switch (gj.type) {\n    case 'Point':\n      return 'POINT (' + pairWKT(gj.coordinates) + ')';\n    case 'LineString':\n      return 'LINESTRING (' + ringWKT(gj.coordinates) + ')';\n    case 'Polygon':\n      return 'POLYGON (' + ringsWKT(gj.coordinates) + ')';\n    case 'MultiPoint':\n      return 'MULTIPOINT (' + ringWKT(gj.coordinates) + ')';\n    case 'MultiPolygon':\n      return 'MULTIPOLYGON (' + multiRingsWKT(gj.coordinates) + ')';\n    case 'MultiLineString':\n      return 'MULTILINESTRING (' + ringsWKT(gj.coordinates) + ')';\n    case 'GeometryCollection':\n      return 'GEOMETRYCOLLECTION (' + gj.geometries.map(stringify).join(', ') + ')';\n    default:\n      throw new Error('stringify requires a valid GeoJSON Feature or geometry object as input');\n  }\n}\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"isomorphic-fetch\");\nrequire(\"reflect-metadata\");\nconst tiles_in_bbox_1 = __importDefault(require(\"tiles-in-bbox\"));\nconst default_1 = __importDefault(require(\"../../configs/default\"));\nconst RoutableTileRegistry_1 = __importDefault(require(\"../../entities/tiles/RoutableTileRegistry\"));\nconst TileCoordinate_1 = __importDefault(require(\"../../entities/tiles/TileCoordinate\"));\nconst RoutingPhase_1 = __importDefault(require(\"../../enums/RoutingPhase\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst Tiles_1 = require(\"../../util/Tiles\");\nconst visualize_1 = require(\"./visualize\");\nclass IsochroneGenerator {\n    constructor(point, container = default_1.default) {\n        this.tileProvider = container.getTagged(types_1.default.RoutableTileProvider, \"phase\", RoutingPhase_1.default.Base);\n        this.pathfinderProvider = container.get(types_1.default.PathfinderProvider);\n        this.registry = RoutableTileRegistry_1.default.getInstance();\n        this.profileProvider = container.get(types_1.default.ProfileProvider);\n        this.eventBus = EventBus_1.default.getInstance();\n        this.reachedTiles = new Set();\n        this.startPoint = point;\n        this.showIncremental = false;\n        this.showDebugLogs = false;\n        this.embedded = false;\n        this.setProfileID(\"http://hdelva.be/profile/car\");\n    }\n    enableIncrementalResults() {\n        this.showIncremental = true;\n    }\n    enableDebugLogs() {\n        this.showDebugLogs = true;\n    }\n    async setDevelopmentProfile(blob) {\n        const id = await this.profileProvider.parseDevelopmentProfile(blob);\n        this.setProfileID(id);\n    }\n    async setProfileID(profileID) {\n        this.activeProfile = this.profileProvider.getProfile(profileID);\n        this.embedded = false;\n    }\n    async getIsochrone(maxDuration, reset = true) {\n        if (this.showDebugLogs) {\n            console.time(Geo_1.default.getId(this.startPoint));\n            console.log(`Generating the ${maxDuration / 1000}s isochrone ` +\n                `from ${this.startPoint.latitude}, ${this.startPoint.longitude}`);\n        }\n        if (!this.embedded) {\n            await this.embedBeginPoint(this.startPoint);\n            this.embedded = true;\n        }\n        await this.loaded;\n        const profile = await this.activeProfile;\n        if (this.showDebugLogs) {\n            console.log(`Using the ${profile.getID()} profile`);\n        }\n        const pathfinder = this.pathfinderProvider.getShortestPathTreeAlgorithm(profile);\n        // wait for all data to arrive\n        await this.tileProvider.wait();\n        let pathTree;\n        pathfinder.setUseWeightedCost(false); // we want the raw durations\n        if (reset) {\n            pathTree = await pathfinder.start(Geo_1.default.getId(this.startPoint), maxDuration);\n        }\n        else {\n            pathTree = await pathfinder.continue(maxDuration);\n        }\n        if (this.showDebugLogs) {\n            console.log(`Path tree computed using ${this.reachedTiles.size} tiles.`);\n            console.timeEnd(Geo_1.default.getId(this.startPoint));\n            console.time(Geo_1.default.getId(this.startPoint));\n        }\n        const result = await visualize_1.visualizeConcaveIsochrone(pathTree, maxDuration, this.registry);\n        if (this.showDebugLogs) {\n            console.timeEnd(Geo_1.default.getId(this.startPoint));\n        }\n        return result;\n    }\n    async fetchTile(coordinate) {\n        const tileId = this.tileProvider.getIdForTileCoords(coordinate);\n        if (!this.reachedTiles.has(tileId)) {\n            this.eventBus.emit(EventType_1.default.ReachableTile, coordinate);\n            const profile = await this.activeProfile;\n            const pathfinder = this.pathfinderProvider.getShortestPathTreeAlgorithm(profile);\n            const tile = await this.tileProvider.getByTileCoords(coordinate);\n            this.reachedTiles.add(tileId);\n            const boundaryNodes = new Set();\n            for (const nodeId of tile.getNodes()) {\n                pathfinder.removeBreakPoint(nodeId);\n                const node = this.registry.getNode(nodeId);\n                if (!tile.contains(node)) {\n                    boundaryNodes.add(nodeId);\n                }\n                if (this.showIncremental) {\n                    pathfinder.setBreakPoint(nodeId, async (on) => {\n                        const innerNode = self.registry.getNode(on);\n                        if (innerNode) {\n                            self.eventBus.emit(EventType_1.default.ReachableLocation, innerNode);\n                        }\n                    });\n                }\n            }\n            const self = this;\n            for (const nodeId of boundaryNodes) {\n                const node = self.registry.getNode(nodeId);\n                const boundaryTileCoordinate = Tiles_1.toTileCoordinate(node.latitude, node.longitude);\n                pathfinder.setBreakPoint(nodeId, async (on) => {\n                    await self.fetchTile(boundaryTileCoordinate);\n                });\n            }\n        }\n    }\n    async embedBeginPoint(from) {\n        const zoom = 14;\n        const padding = 0.005;\n        const fromBBox = {\n            top: from.latitude + padding,\n            bottom: from.latitude - padding,\n            left: from.longitude - padding,\n            right: from.longitude + padding,\n        };\n        const fromTileCoords = tiles_in_bbox_1.default.tilesInBbox(fromBBox, zoom).map((obj) => {\n            const coordinate = new TileCoordinate_1.default(zoom, obj.x, obj.y);\n            this.fetchTile(coordinate);\n            return coordinate;\n        });\n        // this won't download anything new\n        // but we need the tile data to embed the starting location\n        const fromTileset = await this.tileProvider.getMultipleByTileCoords(fromTileCoords);\n        await this.pathfinderProvider.embedLocation(from, fromTileset);\n    }\n}\nexports.default = IsochroneGenerator;\n//# sourceMappingURL=main.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Footpath {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new Footpath(id);\n    }\n}\nexports.Footpath = Footpath;\n//# sourceMappingURL=footpath.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst DijkstraInstance_1 = require(\"./DijkstraInstance\");\nlet Dijkstra = class Dijkstra {\n    createInstance(graph) {\n        return new DijkstraInstance_1.DijkstraInstance(graph);\n    }\n};\nDijkstra = __decorate([\n    inversify_1.injectable()\n], Dijkstra);\nexports.Dijkstra = Dijkstra;\n//# sourceMappingURL=Dijkstra.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst tinyqueue_1 = __importDefault(require(\"tinyqueue\"));\nconst graph_1 = __importDefault(require(\"../graph\"));\nconst POSITION = 0;\nconst DISTANCE = 1;\nconst DURATION = 2;\nconst COST = 3;\n/*\ninterface IState {\n    position: number;\n    distance: DistanceM;\n    duration: DurationMs;\n    cost: number;\n}duration\n*/\nlet DijkstraInstance = class DijkstraInstance {\n    constructor(graph) {\n        this.useWeightedCost = true;\n        this.graph = graph;\n        this.costs = new Float32Array();\n        this.previousNodes = new Float32Array();\n    }\n    setUseWeightedCost(useWeightedCost) {\n        this.useWeightedCost = useWeightedCost;\n    }\n    setBreakPoint(on, callback) {\n        this.graph.setBreakPoint(on, callback);\n    }\n    removeBreakPoint(on) {\n        this.graph.removeBreakPoint(on);\n    }\n    async queryPath(from, to, maxDistance = Infinity) {\n        let queue;\n        if (this.useWeightedCost) {\n            queue = new tinyqueue_1.default([], (a, b) => a[COST] - b[COST]);\n        }\n        else {\n            queue = new tinyqueue_1.default([], (a, b) => a[DURATION] - b[DURATION]);\n        }\n        this.costs = this.costs.fill(Infinity);\n        this.previousNodes = this.previousNodes.fill(undefined);\n        const fromIndex = this.graph.getNodeIndex(from);\n        this.setCost(fromIndex, 0);\n        const state = new Float32Array(4);\n        state[COST] = 0;\n        state[POSITION] = fromIndex;\n        state[DISTANCE] = 0;\n        state[DURATION] = 0;\n        queue.push(state);\n        const toIndex = this.graph.getNodeIndex(to);\n        while (queue.length) {\n            const [position, distance, duration, cost] = queue.pop();\n            if (distance > maxDistance) {\n                // avoid hopeless searches\n                break;\n            }\n            if (position === toIndex) {\n                // it is done, break the loop and start reconstructing the path\n                break;\n            }\n            if (cost > this.getCost(position)) {\n                // we have already found a better way\n                continue;\n            }\n            if (this.graph.getBreakPoint(position)) {\n                await this.graph.getBreakPoint(position)(this.graph.getLabel(position));\n            }\n            for (const edge of this.graph.getAdjacencyList()[position]) {\n                const next = new Float32Array(4);\n                next[COST] = cost + edge.cost;\n                next[POSITION] = edge.node;\n                next[DISTANCE] = distance + edge.distance;\n                next[DURATION] = duration + edge.duration;\n                /*const next = {\n                    distance: distance + edge.distance,\n                    duration: duration + edge.duration,\n                    cost: Math.fround(cost + edge.cost),\n                    position: edge.node,\n                };*/\n                if (next[COST] < this.getCost(next[POSITION])) {\n                    this.setCost(next[POSITION], next[COST]);\n                    this.previousNodes[next[POSITION]] = position;\n                    queue.push(next);\n                }\n            }\n        }\n        let currentPosition = toIndex;\n        const steps = [];\n        // reconstruct the path\n        while (!isNaN(this.previousNodes[currentPosition])) {\n            let nextEdge;\n            let nextPositionCost = Infinity;\n            let way;\n            for (const edge of this.graph.getReverseAdjacencyList()[currentPosition]) {\n                if (this.getCost(edge.node) < nextPositionCost) {\n                    nextPositionCost = this.getCost(edge.node);\n                    nextEdge = edge;\n                    way = edge.through;\n                }\n            }\n            if (!nextEdge) {\n                break;\n            }\n            steps.push({\n                from: this.graph.getLabel(nextEdge.node),\n                to: this.graph.getLabel(currentPosition),\n                distance: nextEdge.distance,\n                duration: nextEdge.duration,\n                through: way,\n            });\n            currentPosition = nextEdge.node;\n        }\n        return steps.reverse();\n    }\n    setCost(position, cost) {\n        if (position >= this.costs.length) {\n            const newCosts = new Float32Array(this.graph.getAdjacencyList().length)\n                .fill(Infinity, this.costs.length);\n            newCosts.set(this.costs);\n            this.costs = newCosts;\n            const newPrevious = new Float32Array(this.graph.getAdjacencyList().length)\n                .fill(undefined, this.previousNodes.length);\n            newPrevious.set(this.previousNodes);\n            this.previousNodes = newPrevious;\n        }\n        this.costs[position] = cost;\n    }\n    getCost(position) {\n        if (position >= this.costs.length) {\n            const newCosts = new Float32Array(this.graph.getAdjacencyList().length)\n                .fill(Infinity, this.costs.length);\n            newCosts.set(this.costs);\n            this.costs = newCosts;\n            const newPrevious = new Float32Array(this.graph.getAdjacencyList().length)\n                .fill(undefined, this.previousNodes.length);\n            newPrevious.set(this.previousNodes);\n            this.previousNodes = newPrevious;\n        }\n        return this.costs[position];\n    }\n};\nDijkstraInstance = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [graph_1.default])\n], DijkstraInstance);\nexports.DijkstraInstance = DijkstraInstance;\n//# sourceMappingURL=DijkstraInstance.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Leg_1 = __importDefault(require(\"../Leg\"));\nconst Path_1 = __importDefault(require(\"../Path\"));\nconst Step_1 = __importDefault(require(\"../Step\"));\nlet JourneyExtractorEarliestArrival = class JourneyExtractorEarliestArrival {\n    constructor(locationResolver) {\n        this.locationResolver = locationResolver;\n    }\n    async extractJourneys(profilesByStop, query) {\n        const path = Path_1.default.create();\n        const departureStopId = query.from[0].id;\n        let currentStopId = query.to[0].id;\n        while (currentStopId !== departureStopId &&\n            profilesByStop[currentStopId] &&\n            profilesByStop[currentStopId].exitConnection) {\n            const currentProfile = profilesByStop[currentStopId];\n            const { enterConnection, exitConnection } = currentProfile;\n            const promises = [\n                this.locationResolver.resolve(enterConnection.departureStop),\n                this.locationResolver.resolve(exitConnection.arrivalStop),\n            ];\n            const [enterLocation, exitLocation] = await Promise.all(promises);\n            const arrivalTime = exitConnection.arrivalTime;\n            const departureTime = enterConnection.departureTime;\n            const duration = arrivalTime.getTime() - departureTime.getTime();\n            const step = new Step_1.default(enterLocation, exitLocation, { average: duration }, departureTime, arrivalTime, undefined, enterConnection.id, exitConnection.id);\n            const leg = new Leg_1.default(exitConnection.travelMode, [step]);\n            path.prependLeg(leg);\n            currentStopId = enterConnection.departureStop;\n        }\n        if (!path.legs.length) {\n            return new asynciterator_1.EmptyIterator();\n        }\n        return new asynciterator_1.SingletonIterator(path);\n    }\n};\nJourneyExtractorEarliestArrival = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LocationResolver)),\n    __metadata(\"design:paramtypes\", [Object])\n], JourneyExtractorEarliestArrival);\nexports.default = JourneyExtractorEarliestArrival;\n//# sourceMappingURL=JourneyExtractorEarliestArrival.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DropOffType_1 = __importDefault(require(\"../../../../enums/DropOffType\"));\n/**\n * Utility functions that can be used on the CSA profiles [[IProfilesByStop]].\n */\nclass ProfileUtil {\n    static filterInfinity(profilesByStop) {\n        const result = {};\n        for (const stop in profilesByStop) {\n            if (profilesByStop.hasOwnProperty(stop)) {\n                result[stop] = profilesByStop[stop].filter((profile) => profile.departureTime !== Infinity);\n                if (result[stop].length === 0) {\n                    delete result[stop];\n                }\n            }\n        }\n        return result;\n    }\n    static getTransferTimes(profilesByStop, connection, maxLegs, minimumTransferDuration, maximumTransferDuration) {\n        const { arrivalStop, arrivalTime } = connection;\n        const trip = connection.tripId;\n        if (connection.dropOffType !== DropOffType_1.default.NotAvailable) {\n            let profileIndex = profilesByStop[arrivalStop].length - 1;\n            while (profileIndex >= 0) {\n                const departure = profilesByStop[arrivalStop][profileIndex].departureTime;\n                const arrival = arrivalTime.getTime();\n                const transferDuration = departure - arrival;\n                if (transferDuration >= minimumTransferDuration && transferDuration <= maximumTransferDuration) {\n                    const arrivalTimeByTransfers = profilesByStop[arrivalStop][profileIndex].getArrivalTimeByTransfers(trip);\n                    return arrivalTimeByTransfers.slice();\n                }\n                profileIndex--;\n            }\n        }\n        return Array(maxLegs + 1).fill({\n            arrivalTime: Infinity,\n            tripId: trip,\n        });\n    }\n}\nexports.default = ProfileUtil;\n//# sourceMappingURL=ProfileUtil.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Utility class with functions to operate on AsyncIterator instances\n */\nclass Iterators {\n    /**\n     * Returns an array representation of an AsyncIterator.\n     * Assumes the iterator will end sometime\n     */\n    static toArray(iterator) {\n        const array = [];\n        iterator.each((item) => array.push(item));\n        return new Promise((resolve) => {\n            iterator.on(\"end\", () => resolve(array));\n        });\n    }\n    /**\n     * Returns the first element of an AsyncIterator.\n     */\n    static getFirst(iterator) {\n        return new Promise((resolve) => {\n            iterator.on(\"readable\", () => {\n                resolve(iterator.read());\n            });\n        });\n    }\n    /**\n     * Iterates over elements of an AsyncIterator, returning the first element predicate returns truthy for.\n     */\n    static find(iterator, predicate) {\n        return new Promise((resolve, reject) => {\n            iterator.on(\"readable\", () => {\n                let element = iterator.read();\n                while (element && !predicate(element)) {\n                    element = iterator.read();\n                }\n                if (element) {\n                    resolve(element);\n                }\n            });\n            iterator.on(\"end\", () => resolve(null));\n        });\n    }\n}\nexports.default = Iterators;\n//# sourceMappingURL=Iterators.js.map","\"use strict\";\nfunction __export(m) {\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\n}\nObject.defineProperty(exports, \"__esModule\", { value: true });\n__export(require(\"./lib/PromiseProxyIterator\"));\n//# sourceMappingURL=index.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Units_1 = __importDefault(require(\"./util/Units\"));\n/**\n * This class holds the default [[IQuery]]/[[IResolvedQuery]] parameters\n */\nclass Defaults {\n}\nexports.default = Defaults;\nDefaults.defaultMinimumWalkingSpeed = 3;\nDefaults.defaultMaximumWalkingSpeed = 6;\nDefaults.defaultWalkingDuration = Units_1.default.fromMinutes(10);\nDefaults.defaultMinimumTransferDuration = Units_1.default.fromMinutes(1);\nDefaults.defaultMaximumTransferDuration = Units_1.default.fromMinutes(25);\nDefaults.defaultMaximumTransfers = 4;\n//# sourceMappingURL=Defaults.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst EventType_1 = __importDefault(require(\"../events/EventType\"));\nclass InvalidQueryError extends Error {\n    constructor() {\n        super(...arguments);\n        this.eventType = EventType_1.default.InvalidQuery;\n    }\n}\nexports.default = InvalidQueryError;\n//# sourceMappingURL=InvalidQueryError.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass LocationResolverError extends Error {\n}\nexports.default = LocationResolverError;\n//# sourceMappingURL=LocationResolverError.js.map","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar robustSum = require(\"robust-sum\")\nvar robustScale = require(\"robust-scale\")\nvar robustSubtract = require(\"robust-subtract\")\n\nvar NUM_EXPAND = 5\n\nvar EPSILON     = 1.1102230246251565e-16\nvar ERRBOUND3   = (3.0 + 16.0 * EPSILON) * EPSILON\nvar ERRBOUND4   = (7.0 + 56.0 * EPSILON) * EPSILON\n\nfunction cofactor(m, c) {\n  var result = new Array(m.length-1)\n  for(var i=1; i<m.length; ++i) {\n    var r = result[i-1] = new Array(m.length-1)\n    for(var j=0,k=0; j<m.length; ++j) {\n      if(j === c) {\n        continue\n      }\n      r[k++] = m[i][j]\n    }\n  }\n  return result\n}\n\nfunction matrix(n) {\n  var result = new Array(n)\n  for(var i=0; i<n; ++i) {\n    result[i] = new Array(n)\n    for(var j=0; j<n; ++j) {\n      result[i][j] = [\"m\", j, \"[\", (n-i-1), \"]\"].join(\"\")\n    }\n  }\n  return result\n}\n\nfunction sign(n) {\n  if(n & 1) {\n    return \"-\"\n  }\n  return \"\"\n}\n\nfunction generateSum(expr) {\n  if(expr.length === 1) {\n    return expr[0]\n  } else if(expr.length === 2) {\n    return [\"sum(\", expr[0], \",\", expr[1], \")\"].join(\"\")\n  } else {\n    var m = expr.length>>1\n    return [\"sum(\", generateSum(expr.slice(0, m)), \",\", generateSum(expr.slice(m)), \")\"].join(\"\")\n  }\n}\n\nfunction determinant(m) {\n  if(m.length === 2) {\n    return [[\"sum(prod(\", m[0][0], \",\", m[1][1], \"),prod(-\", m[0][1], \",\", m[1][0], \"))\"].join(\"\")]\n  } else {\n    var expr = []\n    for(var i=0; i<m.length; ++i) {\n      expr.push([\"scale(\", generateSum(determinant(cofactor(m, i))), \",\", sign(i), m[0][i], \")\"].join(\"\"))\n    }\n    return expr\n  }\n}\n\nfunction orientation(n) {\n  var pos = []\n  var neg = []\n  var m = matrix(n)\n  var args = []\n  for(var i=0; i<n; ++i) {\n    if((i&1)===0) {\n      pos.push.apply(pos, determinant(cofactor(m, i)))\n    } else {\n      neg.push.apply(neg, determinant(cofactor(m, i)))\n    }\n    args.push(\"m\" + i)\n  }\n  var posExpr = generateSum(pos)\n  var negExpr = generateSum(neg)\n  var funcName = \"orientation\" + n + \"Exact\"\n  var code = [\"function \", funcName, \"(\", args.join(), \"){var p=\", posExpr, \",n=\", negExpr, \",d=sub(p,n);\\\nreturn d[d.length-1];};return \", funcName].join(\"\")\n  var proc = new Function(\"sum\", \"prod\", \"scale\", \"sub\", code)\n  return proc(robustSum, twoProduct, robustScale, robustSubtract)\n}\n\nvar orientation3Exact = orientation(3)\nvar orientation4Exact = orientation(4)\n\nvar CACHED = [\n  function orientation0() { return 0 },\n  function orientation1() { return 0 },\n  function orientation2(a, b) { \n    return b[0] - a[0]\n  },\n  function orientation3(a, b, c) {\n    var l = (a[1] - c[1]) * (b[0] - c[0])\n    var r = (a[0] - c[0]) * (b[1] - c[1])\n    var det = l - r\n    var s\n    if(l > 0) {\n      if(r <= 0) {\n        return det\n      } else {\n        s = l + r\n      }\n    } else if(l < 0) {\n      if(r >= 0) {\n        return det\n      } else {\n        s = -(l + r)\n      }\n    } else {\n      return det\n    }\n    var tol = ERRBOUND3 * s\n    if(det >= tol || det <= -tol) {\n      return det\n    }\n    return orientation3Exact(a, b, c)\n  },\n  function orientation4(a,b,c,d) {\n    var adx = a[0] - d[0]\n    var bdx = b[0] - d[0]\n    var cdx = c[0] - d[0]\n    var ady = a[1] - d[1]\n    var bdy = b[1] - d[1]\n    var cdy = c[1] - d[1]\n    var adz = a[2] - d[2]\n    var bdz = b[2] - d[2]\n    var cdz = c[2] - d[2]\n    var bdxcdy = bdx * cdy\n    var cdxbdy = cdx * bdy\n    var cdxady = cdx * ady\n    var adxcdy = adx * cdy\n    var adxbdy = adx * bdy\n    var bdxady = bdx * ady\n    var det = adz * (bdxcdy - cdxbdy) \n            + bdz * (cdxady - adxcdy)\n            + cdz * (adxbdy - bdxady)\n    var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz)\n                  + (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz)\n                  + (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz)\n    var tol = ERRBOUND4 * permanent\n    if ((det > tol) || (-det > tol)) {\n      return det\n    }\n    return orientation4Exact(a,b,c,d)\n  }\n]\n\nfunction slowOrient(args) {\n  var proc = CACHED[args.length]\n  if(!proc) {\n    proc = CACHED[args.length] = orientation(args.length)\n  }\n  return proc.apply(undefined, args)\n}\n\nfunction generateOrientationProc() {\n  while(CACHED.length <= NUM_EXPAND) {\n    CACHED.push(orientation(CACHED.length))\n  }\n  var args = []\n  var procArgs = [\"slow\"]\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    args.push(\"a\" + i)\n    procArgs.push(\"o\" + i)\n  }\n  var code = [\n    \"function getOrientation(\", args.join(), \"){switch(arguments.length){case 0:case 1:return 0;\"\n  ]\n  for(var i=2; i<=NUM_EXPAND; ++i) {\n    code.push(\"case \", i, \":return o\", i, \"(\", args.slice(0, i).join(), \");\")\n  }\n  code.push(\"}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation\")\n  procArgs.push(code.join(\"\"))\n\n  var proc = Function.apply(undefined, procArgs)\n  module.exports = proc.apply(undefined, [slowOrient].concat(CACHED))\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    module.exports[i] = CACHED[i]\n  }\n}\n\ngenerateOrientationProc()","\"use strict\"\n\nmodule.exports = twoProduct\n\nvar SPLITTER = +(Math.pow(2, 27) + 1.0)\n\nfunction twoProduct(a, b, result) {\n  var x = a * b\n\n  var c = SPLITTER * a\n  var abig = c - a\n  var ahi = c - abig\n  var alo = a - ahi\n\n  var d = SPLITTER * b\n  var bbig = d - b\n  var bhi = d - bbig\n  var blo = b - bhi\n\n  var err1 = x - (ahi * bhi)\n  var err2 = err1 - (alo * bhi)\n  var err3 = err2 - (ahi * blo)\n\n  var y = alo * blo - err3\n\n  if(result) {\n    result[0] = y\n    result[1] = x\n    return result\n  }\n\n  return [ y, x ]\n}","\"use strict\";\nvar __await = (this && this.__await) || function (v) { return this instanceof __await ? (this.v = v, this) : new __await(v); }\nvar __asyncGenerator = (this && this.__asyncGenerator) || function (thisArg, _arguments, generator) {\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n    function fulfill(value) { resume(\"next\", value); }\n    function reject(value) { resume(\"throw\", value); }\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"isomorphic-fetch\");\nrequire(\"reflect-metadata\");\nconst tiles_in_bbox_1 = __importDefault(require(\"tiles-in-bbox\"));\nconst default_1 = __importDefault(require(\"../../configs/default\"));\nconst RoutableTileRegistry_1 = __importDefault(require(\"../../entities/tiles/RoutableTileRegistry\"));\nconst TileCoordinate_1 = __importDefault(require(\"../../entities/tiles/TileCoordinate\"));\nconst RoutingPhase_1 = __importDefault(require(\"../../enums/RoutingPhase\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst Tiles_1 = require(\"../../util/Tiles\");\nclass TrafficEstimator {\n    constructor(point, container = default_1.default) {\n        this.baseTileProvider = container.getTagged(types_1.default.RoutableTileProvider, \"phase\", RoutingPhase_1.default.Base);\n        this.transitTileProvider = container.getTagged(types_1.default.RoutableTileProvider, \"phase\", RoutingPhase_1.default.Transit);\n        this.pathfinderProvider = container.get(types_1.default.PathfinderProvider);\n        this.registry = RoutableTileRegistry_1.default.getInstance();\n        this.profileProvider = container.get(types_1.default.ProfileProvider);\n        this.eventBus = EventBus_1.default.getInstance();\n        this.reachedTiles = new Set();\n        this.startPoint = point;\n        this.showIncremental = false;\n        this.embedded = false;\n        this.setProfileID(\"http://hdelva.be/profile/car\");\n    }\n    enableIncrementalResults() {\n        this.showIncremental = true;\n    }\n    async setDevelopmentProfile(blob) {\n        const id = await this.profileProvider.parseDevelopmentProfile(blob);\n        this.setProfileID(id);\n    }\n    async setProfileID(profileID) {\n        this.activeProfile = this.profileProvider.getProfile(profileID);\n        this.embedded = false;\n    }\n    startSimulation(nodes, timeM) {\n        return __asyncGenerator(this, arguments, function* startSimulation_1() {\n            const data = Array.from(nodes);\n            const profile = yield __await(this.activeProfile);\n            console.log(`Using the ${profile.getID()} profile`);\n            const pathfinder = this.pathfinderProvider.getShortestPathAlgorithm(profile);\n            while (true) {\n                const index1 = data[Math.floor(Math.random() * data.length)];\n                /*\n                const pathfinder = this.pathfinderProvider.getShortestPathTreeAlgorithm(profile);\n    \n                const pathTree: IPathTree = await pathfinder.start(index1, timeM * 60 * 1000);\n                yield this.pruneTree(pathTree);\n                */\n                const index2 = data[Math.floor(Math.random() * data.length)];\n                if (index1 !== index2) {\n                    const path = yield __await(pathfinder.queryPath(index1, index2, 90 * 1000 / 60 * timeM));\n                    yield yield __await(path);\n                }\n            }\n        });\n    }\n    getAreaTree(maxDuration, steps) {\n        return __asyncGenerator(this, arguments, function* getAreaTree_1() {\n            if (!this.embedded) {\n                yield __await(this.embedBeginPoint(this.startPoint));\n                this.embedded = true;\n            }\n            yield __await(this.loaded);\n            const profile = yield __await(this.activeProfile);\n            console.log(`Using the ${profile.getID()} profile`);\n            const pathfinder = this.pathfinderProvider.getShortestPathTreeAlgorithm(profile);\n            let pathTree = yield __await(pathfinder.start(Geo_1.default.getId(this.startPoint), maxDuration / steps));\n            yield yield __await(this.pruneTree(pathTree));\n            for (let i = 1; i <= steps; i++) {\n                console.log(maxDuration / steps * i);\n                pathTree = yield __await(pathfinder.continue(maxDuration / steps * i));\n                yield yield __await(this.pruneTree(pathTree));\n            }\n        });\n    }\n    pruneTree(tree) {\n        const result = {};\n        for (const [id, branch] of Object.entries(tree)) {\n            if (branch.previousNode) {\n                result[id] = branch;\n            }\n        }\n        return result;\n    }\n    async embedBeginPoint(from) {\n        const zoom = 14;\n        const padding = 0.005;\n        const fromBBox = {\n            top: from.latitude + padding,\n            bottom: from.latitude - padding,\n            left: from.longitude - padding,\n            right: from.longitude + padding,\n        };\n        const fromTileCoords = tiles_in_bbox_1.default.tilesInBbox(fromBBox, zoom).map((obj) => {\n            const coordinate = new TileCoordinate_1.default(zoom, obj.x, obj.y);\n            this.fetchTile(coordinate, true);\n            return coordinate;\n        });\n        // this won't download anything new\n        // but we need the tile data to embed the starting location\n        const fromTileset = await this.baseTileProvider.getMultipleByTileCoords(fromTileCoords);\n        await this.pathfinderProvider.embedLocation(from, fromTileset);\n    }\n    async fetchTile(coordinate, base) {\n        let tileId;\n        if (base) {\n            tileId = this.baseTileProvider.getIdForTileCoords(coordinate);\n        }\n        else {\n            tileId = this.transitTileProvider.getIdForTileCoords(coordinate);\n        }\n        if (!this.reachedTiles.has(tileId)) {\n            this.eventBus.emit(EventType_1.default.ReachableTile, coordinate);\n            const profile = await this.activeProfile;\n            const pathfinder = this.pathfinderProvider.getShortestPathTreeAlgorithm(profile);\n            let tile;\n            if (base) {\n                tile = await this.baseTileProvider.getByTileCoords(coordinate);\n            }\n            else {\n                tile = await this.transitTileProvider.getByTileCoords(coordinate);\n            }\n            this.reachedTiles.add(tileId);\n            const boundaryNodes = new Set();\n            for (const nodeId of tile.getNodes()) {\n                pathfinder.removeBreakPoint(nodeId);\n                const node = this.registry.getNode(nodeId);\n                if (!tile.contains(node)) {\n                    boundaryNodes.add(nodeId);\n                }\n                if (this.showIncremental) {\n                    pathfinder.setBreakPoint(nodeId, async (on) => {\n                        const innerNode = self.registry.getNode(on);\n                        if (innerNode) {\n                            self.eventBus.emit(EventType_1.default.ReachableLocation, innerNode);\n                        }\n                    });\n                }\n            }\n            const self = this;\n            for (const nodeId of boundaryNodes) {\n                const node = self.registry.getNode(nodeId);\n                const boundaryTileCoordinate = Tiles_1.toTileCoordinate(node.latitude, node.longitude);\n                pathfinder.setBreakPoint(nodeId, async (on) => {\n                    await self.fetchTile(boundaryTileCoordinate, false);\n                });\n            }\n        }\n    }\n}\nexports.default = TrafficEstimator;\n//# sourceMappingURL=main.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst _1 = require(\".\");\nconst FlexibleRoadPlanner_1 = __importDefault(require(\"./planner/configurations/FlexibleRoadPlanner\"));\n/*\n * Factory method for Planner configurations\n * Picks the most appropriate configuration for the given data sources / query mode\n *\n * !! Due to hypermedia issues none of the tiled data sources are configurable right now\n */\nfunction createPlanner(sources, queryMode) {\n    const connectionSources = [];\n    const stopSources = [];\n    const reducedTileSources = [];\n    const footpathSources = [];\n    for (const source of sources) {\n        if (source.datatype === _1.DataType.Connections) {\n            connectionSources.push(source);\n        }\n        else if (source.datatype === _1.DataType.Stops) {\n            stopSources.push(source);\n        }\n        else if (source.datatype === _1.DataType.ReducedRoutableTile) {\n            reducedTileSources.push(source);\n        }\n        else if (source.datatype === _1.DataType.Footpath) {\n            footpathSources.push(source);\n        }\n    }\n    let planner;\n    if (queryMode === _1.QueryMode.Dijkstra) {\n        if (reducedTileSources.length > 0) {\n            planner = new _1.ReducedCarPlanner();\n        }\n        else {\n            planner = new FlexibleRoadPlanner_1.default();\n        }\n    }\n    else {\n        if (queryMode === _1.QueryMode.CSAEarliestArrival) {\n            if (footpathSources.length > 0) {\n                planner = new _1.TriangleTransitPlanner();\n            }\n            else {\n                planner = new _1.FlexibleTransitPlanner();\n            }\n        }\n        else {\n            planner = new _1.FlexibleProfileTransitPlanner();\n        }\n        for (const connectionSource of connectionSources) {\n            planner.addConnectionSource(connectionSource.accessUrl);\n        }\n        for (const stopSource of stopSources) {\n            planner.addStopSource(stopSource.accessUrl);\n        }\n    }\n    return planner;\n}\nexports.default = createPlanner;\n//# sourceMappingURL=create.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst constants_1 = require(\"../uri/constants\");\nconst uri_1 = __importDefault(require(\"../uri/uri\"));\nconst Datatypes_1 = __importDefault(require(\"./Datatypes\"));\nasync function classifyDataSource(accessUrl) {\n    let datatype;\n    if (accessUrl.indexOf(\"tiles\") >= 0) {\n        if (accessUrl.indexOf(\"hdelva.be/\") >= 0) {\n            datatype = Datatypes_1.default.ReducedRoutableTile;\n        }\n        else {\n            datatype = Datatypes_1.default.RoutableTile;\n        }\n    }\n    else if (accessUrl.indexOf(\"hdelva.be/stops/distances/\") >= 0) {\n        datatype = Datatypes_1.default.Footpath;\n    }\n    else {\n        const fetcher = new LDFetch_1.default();\n        const response = await fetcher.get(accessUrl);\n        const triples = response.triples;\n        const usedPredicates = new Set();\n        for (const t of triples) {\n            const { predicate } = t;\n            usedPredicates.add(predicate.value);\n        }\n        if (usedPredicates.has(uri_1.default.inNS(constants_1.LC, \"departureStop\"))) {\n            datatype = Datatypes_1.default.Connections;\n        }\n        else if (usedPredicates.has(uri_1.default.inNS(constants_1.GEO, \"lat\"))) {\n            datatype = Datatypes_1.default.Stops;\n        }\n        else if (usedPredicates.has(uri_1.default.inNS(constants_1.PROFILE, \"hasAccessRules\"))) {\n            datatype = Datatypes_1.default.Profile;\n        }\n        else {\n            datatype = Datatypes_1.default.Unknown;\n        }\n    }\n    return {\n        accessUrl,\n        datatype,\n    };\n}\nexports.default = classifyDataSource;\n//# sourceMappingURL=classify.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar QueryMode;\n(function (QueryMode) {\n    QueryMode[QueryMode[\"CSAEarliestArrival\"] = 0] = \"CSAEarliestArrival\";\n    QueryMode[QueryMode[\"CSAProfile\"] = 1] = \"CSAProfile\";\n    QueryMode[QueryMode[\"Dijkstra\"] = 2] = \"Dijkstra\";\n})(QueryMode || (QueryMode = {}));\nexports.default = QueryMode;\n//# sourceMappingURL=QueryMode.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst dissect_1 = __importDefault(require(\"../../configs/dissect\"));\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst Planner_1 = __importDefault(require(\"./Planner\"));\nclass DissectPlanner extends Planner_1.default {\n    constructor() {\n        super(dissect_1.default);\n        this.addConnectionSource(\"https://graph.irail.be/sncb/connections\", TravelMode_1.default.Train);\n        this.addConnectionSource(\"https://openplanner.ilabt.imec.be/delijn/Oost-Vlaanderen/connections\", TravelMode_1.default.Bus);\n        this.addConnectionSource(\"https://openplanner.ilabt.imec.be/mivb/connections\", TravelMode_1.default.Bus);\n        this.addStopSource(\"https://irail.be/stations/NMBS\");\n        this.addStopSource(\"https://openplanner.ilabt.imec.be/delijn/Oost-Vlaanderen/stops\");\n        this.addStopSource(\"https://openplanner.ilabt.imec.be/mivb/stops\");\n    }\n}\nexports.default = DissectPlanner;\n//# sourceMappingURL=DissectPlanner.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst tinyqueue_1 = __importDefault(require(\"tinyqueue\"));\nconst graph_1 = __importDefault(require(\"../graph\"));\nvar StepResultKind;\n(function (StepResultKind) {\n    StepResultKind[StepResultKind[\"Continue\"] = 0] = \"Continue\";\n    StepResultKind[StepResultKind[\"Break\"] = 1] = \"Break\";\n    StepResultKind[StepResultKind[\"NodeHandled\"] = 2] = \"NodeHandled\";\n})(StepResultKind || (StepResultKind = {}));\nlet BidirDijkstraInstance = class BidirDijkstraInstance {\n    constructor(graph) {\n        this.useWeightedCost = true;\n        this.graph = graph;\n        this.forwardCosts = [];\n        this.forwardParents = [];\n        this.backwardCosts = [];\n        this.backwardParents = [];\n    }\n    setUseWeightedCost(useWeightedCost) {\n        this.useWeightedCost = useWeightedCost;\n    }\n    setBreakPoint(on, callback) {\n        this.graph.setBreakPoint(on, callback);\n    }\n    removeBreakPoint(on) {\n        this.graph.removeBreakPoint(on);\n    }\n    async queryPath(from, to, maxDistance = Infinity) {\n        let forwardQueue;\n        let backwardQueue;\n        if (this.useWeightedCost) {\n            forwardQueue = new tinyqueue_1.default([], (a, b) => a.cost - b.cost);\n            backwardQueue = new tinyqueue_1.default([], (a, b) => a.cost - b.cost);\n        }\n        else {\n            forwardQueue = new tinyqueue_1.default([], (a, b) => a.duration - b.duration);\n            backwardQueue = new tinyqueue_1.default([], (a, b) => a.duration - b.duration);\n        }\n        this.forwardCosts = this.forwardCosts.fill(Infinity);\n        this.forwardParents = this.forwardParents.fill(undefined);\n        this.backwardCosts = this.backwardCosts.fill(Infinity);\n        this.backwardParents = this.backwardParents.fill(undefined);\n        const fromIndex = this.graph.getNodeIndex(from);\n        const toIndex = this.graph.getNodeIndex(to);\n        this.setForwardCost(fromIndex, 0);\n        this.setBackwardCost(toIndex, 0);\n        forwardQueue.push({ distance: 0, duration: 0, cost: 0, position: fromIndex });\n        backwardQueue.push({ distance: 0, duration: 0, cost: 0, position: toIndex });\n        while (forwardQueue.length && backwardQueue.length) {\n            const [forwardResult, backwardResult] = await Promise.all([\n                this.forwardStep(forwardQueue, toIndex, maxDistance),\n                this.backwardStep(backwardQueue, fromIndex, maxDistance),\n            ]);\n            if (forwardResult.kind === StepResultKind.Break || backwardResult.kind === StepResultKind.Break) {\n                // failed to find a path\n                return [];\n            }\n            if (forwardResult.kind === StepResultKind.NodeHandled) {\n                if (this.backwardCosts[forwardResult.nodeId] < Infinity) {\n                    // shortest path has been found\n                    // note that it doesn't necessarily contain the handled node\n                    return this.constructPath(forwardResult.nodeId);\n                }\n            }\n            if (backwardResult.kind === StepResultKind.NodeHandled) {\n                if (this.forwardCosts[backwardResult.nodeId] < Infinity) {\n                    return this.constructPath(backwardResult.nodeId);\n                }\n            }\n        }\n        // no path found\n        return [];\n    }\n    constructPath(toIndex) {\n        let currentPosition = toIndex;\n        const forwardSteps = [];\n        const backwardSteps = [];\n        // reconstruct forward part of the path\n        while (this.backwardParents[currentPosition] !== undefined) {\n            let nextEdge;\n            let nextPositionCost = Infinity;\n            let way;\n            for (const edge of this.graph.getAdjacencyList()[currentPosition]) {\n                if (this.getBackwardCost(edge.node) < nextPositionCost) {\n                    nextPositionCost = this.getBackwardCost(edge.node);\n                    nextEdge = edge;\n                    way = edge.through;\n                }\n            }\n            if (!nextEdge) {\n                break;\n            }\n            backwardSteps.push({\n                from: this.graph.getLabel(currentPosition),\n                to: this.graph.getLabel(nextEdge.node),\n                through: way,\n                distance: nextEdge.distance,\n                duration: nextEdge.duration,\n            });\n            currentPosition = nextEdge.node;\n        }\n        currentPosition = toIndex;\n        while (this.forwardParents[currentPosition] !== undefined) {\n            let nextEdge;\n            let nextPositionCost = Infinity;\n            let way;\n            for (const edge of this.graph.getReverseAdjacencyList()[currentPosition]) {\n                if (this.getForwardCost(edge.node) < nextPositionCost) {\n                    nextPositionCost = this.getForwardCost(edge.node);\n                    nextEdge = edge;\n                    way = edge.through;\n                }\n            }\n            if (!nextEdge) {\n                break;\n            }\n            forwardSteps.push({\n                from: this.graph.getLabel(nextEdge.node),\n                to: this.graph.getLabel(currentPosition),\n                through: way,\n                distance: nextEdge.distance,\n                duration: nextEdge.duration,\n            });\n            currentPosition = nextEdge.node;\n        }\n        return forwardSteps.reverse().concat(backwardSteps);\n    }\n    async forwardStep(queue, toIndex, maxDistance) {\n        if (!queue.length) {\n            return { kind: StepResultKind.Break };\n        }\n        const { duration, distance, cost, position } = queue.pop();\n        if (distance > maxDistance) {\n            // avoid hopeless searches\n            return { kind: StepResultKind.Break };\n        }\n        if (position === toIndex) {\n            // it is done, break the loop and start reconstructing the path\n            return { kind: StepResultKind.Break };\n        }\n        if (cost > this.getForwardCost(position)) {\n            // we have already found a better way\n            return { kind: StepResultKind.Continue };\n        }\n        if (this.graph.getBreakPoint(position)) {\n            await this.graph.getBreakPoint(position)(this.graph.getLabel(position));\n        }\n        for (const edge of this.graph.getAdjacencyList()[position]) {\n            const next = {\n                distance: distance + edge.distance,\n                duration: duration + edge.duration,\n                cost: cost + edge.cost,\n                position: edge.node,\n            };\n            if (next.cost < this.getForwardCost(next.position)) {\n                this.setForwardCost(next.position, next.cost);\n                this.forwardParents[next.position] = position;\n                queue.push(next);\n            }\n        }\n        return {\n            kind: StepResultKind.NodeHandled,\n            nodeId: position,\n        };\n    }\n    async backwardStep(queue, toIndex, maxDistance) {\n        if (!queue.length) {\n            return { kind: StepResultKind.Break };\n        }\n        const { duration, distance, cost, position } = queue.pop();\n        if (distance > maxDistance) {\n            // avoid hopeless searches\n            return { kind: StepResultKind.Break };\n        }\n        if (position === toIndex) {\n            // it is done, break the loop and start reconstructing the path\n            return { kind: StepResultKind.Break };\n        }\n        if (cost > this.getBackwardCost(position)) {\n            // we have already found a better way\n            return { kind: StepResultKind.Continue };\n        }\n        if (this.graph.getBreakPoint(position)) {\n            await this.graph.getBreakPoint(position)(this.graph.getLabel(position));\n        }\n        for (const edge of this.graph.getReverseAdjacencyList()[position]) {\n            const next = {\n                distance: distance + edge.distance,\n                duration: duration + edge.duration,\n                cost: cost + edge.cost,\n                position: edge.node,\n            };\n            if (next.cost < this.getBackwardCost(next.position)) {\n                this.setBackwardCost(next.position, next.cost);\n                this.backwardParents[next.position] = position;\n                queue.push(next);\n            }\n        }\n        return {\n            kind: StepResultKind.NodeHandled,\n            nodeId: position,\n        };\n    }\n    setForwardCost(position, cost) {\n        if (position >= this.forwardCosts.length) {\n            const missingCosts = this.graph.getAdjacencyList().length - this.forwardCosts.length;\n            this.forwardCosts = this.forwardCosts.concat([...Array(missingCosts)].fill(Infinity));\n            this.forwardParents = this.forwardParents.concat([...Array(missingCosts)].fill(undefined));\n        }\n        this.forwardCosts[position] = cost;\n    }\n    getForwardCost(position) {\n        if (position >= this.forwardCosts.length) {\n            const missingCosts = this.graph.getAdjacencyList().length - this.forwardCosts.length;\n            this.forwardCosts = this.forwardCosts.concat([...Array(missingCosts)].fill(Infinity));\n            this.forwardParents = this.forwardParents.concat([...Array(missingCosts)].fill(undefined));\n        }\n        return this.forwardCosts[position];\n    }\n    setBackwardCost(position, cost) {\n        if (position >= this.backwardCosts.length) {\n            const missingCosts = this.graph.getAdjacencyList().length - this.backwardCosts.length;\n            this.backwardCosts = this.backwardCosts.concat([...Array(missingCosts)].fill(Infinity));\n            this.backwardParents = this.backwardParents.concat([...Array(missingCosts)].fill(undefined));\n        }\n        this.backwardCosts[position] = cost;\n    }\n    getBackwardCost(position) {\n        if (position >= this.backwardCosts.length) {\n            const missingCosts = this.graph.getAdjacencyList().length - this.backwardCosts.length;\n            this.backwardCosts = this.backwardCosts.concat([...Array(missingCosts)].fill(Infinity));\n            this.backwardParents = this.backwardParents.concat([...Array(missingCosts)].fill(undefined));\n        }\n        return this.backwardCosts[position];\n    }\n};\nBidirDijkstraInstance = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [graph_1.default])\n], BidirDijkstraInstance);\nexports.BidirDijkstraInstance = BidirDijkstraInstance;\n//# sourceMappingURL=BidirDijkstraInstance.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst flexible_profile_transit_1 = __importDefault(require(\"../../configs/flexible_profile_transit\"));\nconst Planner_1 = __importDefault(require(\"./Planner\"));\nclass FlexibleProfileTransitPlanner extends Planner_1.default {\n    constructor() {\n        super(flexible_profile_transit_1.default);\n    }\n}\nexports.default = FlexibleProfileTransitPlanner;\n//# sourceMappingURL=FlexibleProfileTransitPlanner.js.map","\"use strict\";\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst turf = __importStar(require(\"@turf/turf\"));\nclass GeometryValue {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new GeometryValue(id);\n    }\n    contains(location) {\n        const pt = turf.point([location.longitude, location.latitude]); // x, y format\n        return turf.booleanPointInPolygon(pt, this.area);\n    }\n}\nexports.default = GeometryValue;\n//# sourceMappingURL=geometry.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst flexible_transit_1 = __importDefault(require(\"../../configs/flexible_transit\"));\nconst Planner_1 = __importDefault(require(\"./Planner\"));\nclass FlexibleTransitPlanner extends Planner_1.default {\n    constructor() {\n        super(flexible_transit_1.default);\n    }\n}\nexports.default = FlexibleTransitPlanner;\n//# sourceMappingURL=FlexibleTransitPlanner.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst geospatial_fragment_1 = __importDefault(require(\"../../configs/geospatial_fragment\"));\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Planner_1 = __importDefault(require(\"./Planner\"));\nclass GeospatialFragmentedPlanner extends Planner_1.default {\n    constructor() {\n        super(geospatial_fragment_1.default);\n        this.treeProvider = geospatial_fragment_1.default.get(types_1.default.HypermediaTreeProvider);\n    }\n    addConnectionSource(accessUrl, travelMode = TravelMode_1.default.Train) {\n        super.addConnectionSource(accessUrl, travelMode);\n        this.treeProvider.addTreeSource(accessUrl);\n    }\n}\nexports.default = GeospatialFragmentedPlanner;\n//# sourceMappingURL=GeospatialFragmentedPlanner.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst reduced_car_1 = __importDefault(require(\"../../configs/reduced_car\"));\nconst Planner_1 = __importDefault(require(\"./Planner\"));\nclass TransitCarPlanner extends Planner_1.default {\n    constructor() {\n        super(reduced_car_1.default);\n        this.setProfileID(\"http://hdelva.be/profile/car\");\n    }\n    query(query) {\n        query.roadNetworkOnly = true;\n        return super.query(query);\n    }\n    async completePath(path) {\n        return path;\n    }\n}\nexports.default = TransitCarPlanner;\n//# sourceMappingURL=ReducedCarPlanner.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst triangle_transit_1 = __importDefault(require(\"../../configs/triangle_transit\"));\nconst Planner_1 = __importDefault(require(\"./Planner\"));\nclass TriangleTransitPlanner extends Planner_1.default {\n    constructor() {\n        super(triangle_transit_1.default);\n    }\n}\nexports.default = TriangleTransitPlanner;\n//# sourceMappingURL=TriangleTransitPlanner.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst zoi_demo_planner_1 = __importDefault(require(\"../../configs/zoi_demo_planner\"));\nconst Planner_1 = __importDefault(require(\"./Planner\"));\nclass ZoiDemoPlanner extends Planner_1.default {\n    constructor() {\n        super(zoi_demo_planner_1.default);\n    }\n    query(query) {\n        query.roadNetworkOnly = true;\n        return super.query(query);\n    }\n    async completePath(path) {\n        return path;\n    }\n}\nexports.default = ZoiDemoPlanner;\n//# sourceMappingURL=ZoiDemoPlanner.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uri_1 = __importDefault(require(\"./uri\"));\nclass JSONLDContext {\n    constructor(blob) {\n        this.rawData = {};\n        this.aliases = {};\n        if (Array.isArray(blob)) {\n            this.processArray(blob);\n        }\n        else {\n            this.rawData = blob;\n            this.processObject(blob);\n        }\n    }\n    resolveIdentifier(name) {\n        if (name.indexOf(\"://\") > 0) {\n            // absolute URI\n            return name;\n        }\n        if (this.aliases[name]) {\n            return this.aliases[name];\n        }\n        if (name.indexOf(\":\") > 0) {\n            this.aliases[name] = this.expandURI(name);\n            return this.aliases[name];\n        }\n        return name;\n    }\n    processObject(blob) {\n        for (const [name, data] of Object.entries(blob)) {\n            if (name.indexOf(\":\") >= 0) {\n                this.aliases[name] = this.expandURI(name);\n            }\n            if (typeof (data) === \"object\") {\n                if (data[\"@id\"]) {\n                    const rawId = data[\"@id\"];\n                    this.aliases[name] = this.expandURI(rawId);\n                }\n            }\n            else if (typeof (data) === \"string\") {\n                this.aliases[name] = this.expandURI(data);\n            }\n        }\n    }\n    expandURI(name) {\n        if (name.indexOf(\"://\") > 0) {\n            // absolute URI\n            return name;\n        }\n        if (name.indexOf(\":\") < 0) {\n            return name;\n        }\n        const [prefix, rest] = name.split(\":\");\n        const namespace = this.rawData[prefix];\n        if (namespace) {\n            return uri_1.default.inNS(namespace, rest);\n        }\n        else {\n            return name;\n        }\n    }\n    processArray(blobs) {\n        for (const blob of blobs) {\n            this.rawData = Object.assign(this.rawData, blob);\n            this.processObject(blob);\n        }\n    }\n}\nexports.default = JSONLDContext;\n//# sourceMappingURL=JSONLDContext.js.map","\nconst EPSILON = Math.pow(2, -52);\n\nexport default class Delaunator {\n\n    static from(points, getX, getY) {\n        if (!getX) getX = defaultGetX;\n        if (!getY) getY = defaultGetY;\n\n        const n = points.length;\n        const coords = new Float64Array(n * 2);\n\n        for (let i = 0; i < n; i++) {\n            const p = points[i];\n            coords[2 * i] = getX(p);\n            coords[2 * i + 1] = getY(p);\n        }\n\n        return new Delaunator(coords);\n    }\n\n    constructor(coords) {\n        let minX = Infinity;\n        let minY = Infinity;\n        let maxX = -Infinity;\n        let maxY = -Infinity;\n\n        const n = coords.length >> 1;\n        const ids = this.ids = new Uint32Array(n);\n\n        if (n > 0 && typeof coords[0] !== 'number') throw new Error('Expected coords to contain numbers.');\n\n        this.coords = coords;\n\n        for (let i = 0; i < n; i++) {\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n            ids[i] = i;\n        }\n\n        const cx = (minX + maxX) / 2;\n        const cy = (minY + maxY) / 2;\n\n        let minDist = Infinity;\n        let i0, i1, i2;\n\n        // pick a seed point close to the centroid\n        for (let i = 0; i < n; i++) {\n            const d = dist(cx, cy, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist) {\n                i0 = i;\n                minDist = d;\n            }\n        }\n        const i0x = coords[2 * i0];\n        const i0y = coords[2 * i0 + 1];\n\n        minDist = Infinity;\n\n        // find the point closest to the seed\n        for (let i = 0; i < n; i++) {\n            if (i === i0) continue;\n            const d = dist(i0x, i0y, coords[2 * i], coords[2 * i + 1]);\n            if (d < minDist && d > 0) {\n                i1 = i;\n                minDist = d;\n            }\n        }\n        let i1x = coords[2 * i1];\n        let i1y = coords[2 * i1 + 1];\n\n        let minRadius = Infinity;\n\n        // find the third point which forms the smallest circumcircle with the first two\n        for (let i = 0; i < n; i++) {\n            if (i === i0 || i === i1) continue;\n            const r = circumradius(i0x, i0y, i1x, i1y, coords[2 * i], coords[2 * i + 1]);\n            if (r < minRadius) {\n                i2 = i;\n                minRadius = r;\n            }\n        }\n        let i2x = coords[2 * i2];\n        let i2y = coords[2 * i2 + 1];\n\n        if (minRadius === Infinity) {\n            throw new Error('No Delaunay triangulation exists for this input.');\n        }\n\n        // swap the order of the seed points for counter-clockwise orientation\n        if (orient(i0x, i0y, i1x, i1y, i2x, i2y)) {\n            const i = i1;\n            const x = i1x;\n            const y = i1y;\n            i1 = i2;\n            i1x = i2x;\n            i1y = i2y;\n            i2 = i;\n            i2x = x;\n            i2y = y;\n        }\n\n        const center = circumcenter(i0x, i0y, i1x, i1y, i2x, i2y);\n        this._cx = center.x;\n        this._cy = center.y;\n\n        // sort the points by distance from the seed triangle circumcenter\n        quicksort(ids, coords, 0, ids.length - 1, center.x, center.y);\n\n        // initialize a hash table for storing edges of the advancing convex hull\n        this._hashSize = Math.ceil(Math.sqrt(n));\n        this._hash = new Array(this._hashSize);\n\n        // initialize a circular doubly-linked list that will hold an advancing convex hull\n        let e = this.hull = insertNode(coords, i0);\n        this._hashEdge(e);\n        e.t = 0;\n        e = insertNode(coords, i1, e);\n        this._hashEdge(e);\n        e.t = 1;\n        e = insertNode(coords, i2, e);\n        this._hashEdge(e);\n        e.t = 2;\n\n        const maxTriangles = 2 * n - 5;\n        const triangles = this.triangles = new Uint32Array(maxTriangles * 3);\n        const halfedges = this.halfedges = new Int32Array(maxTriangles * 3);\n\n        this.trianglesLen = 0;\n\n        this._addTriangle(i0, i1, i2, -1, -1, -1);\n\n        for (let k = 0, xp, yp; k < ids.length; k++) {\n            const i = ids[k];\n            const x = coords[2 * i];\n            const y = coords[2 * i + 1];\n\n            // skip near-duplicate points\n            if (k > 0 && Math.abs(x - xp) <= EPSILON && Math.abs(y - yp) <= EPSILON) continue;\n            xp = x;\n            yp = y;\n\n            // skip seed triangle points\n            if (i === i0 || i === i1 || i === i2) continue;\n\n            // find a visible edge on the convex hull using edge hash\n            const startKey = this._hashKey(x, y);\n            let key = startKey;\n            let start;\n            do {\n                start = this._hash[key];\n                key = (key + 1) % this._hashSize;\n            } while ((!start || start.removed) && key !== startKey);\n\n            start = start.prev;\n            e = start;\n            while (!orient(x, y, e.x, e.y, e.next.x, e.next.y)) {\n                e = e.next;\n                if (e === start) {\n                    e = null;\n                    break;\n                }\n            }\n            // likely a near-duplicate point; skip it\n            if (!e) continue;\n\n            const walkBack = e === start;\n\n            // add the first triangle from the point\n            let t = this._addTriangle(e.i, i, e.next.i, -1, -1, e.t);\n\n            e.t = t; // keep track of boundary triangles on the hull\n            e = insertNode(coords, i, e);\n\n            // recursively flip triangles from the point until they satisfy the Delaunay condition\n            e.t = this._legalize(t + 2);\n\n            // walk forward through the hull, adding more triangles and flipping recursively\n            let q = e.next;\n            while (orient(x, y, q.x, q.y, q.next.x, q.next.y)) {\n                t = this._addTriangle(q.i, i, q.next.i, q.prev.t, -1, q.t);\n                q.prev.t = this._legalize(t + 2);\n                this.hull = removeNode(q);\n                q = q.next;\n            }\n\n            if (walkBack) {\n                // walk backward from the other side, adding more triangles and flipping\n                q = e.prev;\n                while (orient(x, y, q.prev.x, q.prev.y, q.x, q.y)) {\n                    t = this._addTriangle(q.prev.i, i, q.i, -1, q.t, q.prev.t);\n                    this._legalize(t + 2);\n                    q.prev.t = t;\n                    this.hull = removeNode(q);\n                    q = q.prev;\n                }\n            }\n\n            // save the two new edges in the hash table\n            this._hashEdge(e);\n            this._hashEdge(e.prev);\n        }\n\n        // trim typed triangle mesh arrays\n        this.triangles = triangles.subarray(0, this.trianglesLen);\n        this.halfedges = halfedges.subarray(0, this.trianglesLen);\n    }\n\n    _hashEdge(e) {\n        this._hash[this._hashKey(e.x, e.y)] = e;\n    }\n\n    _hashKey(x, y) {\n        return Math.floor(pseudoAngle(x - this._cx, y - this._cy) * this._hashSize) % this._hashSize;\n    }\n\n    _legalize(a) {\n        const {triangles, coords, halfedges} = this;\n\n        const b = halfedges[a];\n\n        /* if the pair of triangles doesn't satisfy the Delaunay condition\n         * (p1 is inside the circumcircle of [p0, pl, pr]), flip them,\n         * then do the same check/flip recursively for the new pair of triangles\n         *\n         *           pl                    pl\n         *          /||\\                  /  \\\n         *       al/ || \\bl            al/    \\a\n         *        /  ||  \\              /      \\\n         *       /  a||b  \\    flip    /___ar___\\\n         *     p0\\   ||   /p1   =>   p0\\---bl---/p1\n         *        \\  ||  /              \\      /\n         *       ar\\ || /br             b\\    /br\n         *          \\||/                  \\  /\n         *           pr                    pr\n         */\n        const a0 = a - a % 3;\n        const b0 = b - b % 3;\n\n        const al = a0 + (a + 1) % 3;\n        const ar = a0 + (a + 2) % 3;\n        const bl = b0 + (b + 2) % 3;\n\n        if (b === -1) return ar;\n\n        const p0 = triangles[ar];\n        const pr = triangles[a];\n        const pl = triangles[al];\n        const p1 = triangles[bl];\n\n        const illegal = inCircle(\n            coords[2 * p0], coords[2 * p0 + 1],\n            coords[2 * pr], coords[2 * pr + 1],\n            coords[2 * pl], coords[2 * pl + 1],\n            coords[2 * p1], coords[2 * p1 + 1]);\n\n        if (illegal) {\n            triangles[a] = p1;\n            triangles[b] = p0;\n\n            const hbl = halfedges[bl];\n\n            // edge swapped on the other side of the hull (rare); fix the halfedge reference\n            if (hbl === -1) {\n                let e = this.hull;\n                do {\n                    if (e.t === bl) {\n                        e.t = a;\n                        break;\n                    }\n                    e = e.next;\n                } while (e !== this.hull);\n            }\n            this._link(a, hbl);\n            this._link(b, halfedges[ar]);\n            this._link(ar, bl);\n\n            const br = b0 + (b + 1) % 3;\n\n            this._legalize(a);\n            return this._legalize(br);\n        }\n\n        return ar;\n    }\n\n    _link(a, b) {\n        this.halfedges[a] = b;\n        if (b !== -1) this.halfedges[b] = a;\n    }\n\n    // add a new triangle given vertex indices and adjacent half-edge ids\n    _addTriangle(i0, i1, i2, a, b, c) {\n        const t = this.trianglesLen;\n\n        this.triangles[t] = i0;\n        this.triangles[t + 1] = i1;\n        this.triangles[t + 2] = i2;\n\n        this._link(t, a);\n        this._link(t + 1, b);\n        this._link(t + 2, c);\n\n        this.trianglesLen += 3;\n\n        return t;\n    }\n}\n\n// monotonically increases with real angle, but doesn't need expensive trigonometry\nfunction pseudoAngle(dx, dy) {\n    const p = dx / (Math.abs(dx) + Math.abs(dy));\n    return (dy > 0 ? 3 - p : 1 + p) / 4; // [0..1]\n}\n\nfunction dist(ax, ay, bx, by) {\n    const dx = ax - bx;\n    const dy = ay - by;\n    return dx * dx + dy * dy;\n}\n\nfunction orient(px, py, qx, qy, rx, ry) {\n    return (qy - py) * (rx - qx) - (qx - px) * (ry - qy) < 0;\n}\n\nfunction inCircle(ax, ay, bx, by, cx, cy, px, py) {\n    const dx = ax - px;\n    const dy = ay - py;\n    const ex = bx - px;\n    const ey = by - py;\n    const fx = cx - px;\n    const fy = cy - py;\n\n    const ap = dx * dx + dy * dy;\n    const bp = ex * ex + ey * ey;\n    const cp = fx * fx + fy * fy;\n\n    return dx * (ey * cp - bp * fy) -\n           dy * (ex * cp - bp * fx) +\n           ap * (ex * fy - ey * fx) < 0;\n}\n\nfunction circumradius(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = dx * ey - dy * ex;\n\n    const x = (ey * bl - dy * cl) * 0.5 / d;\n    const y = (dx * cl - ex * bl) * 0.5 / d;\n\n    return bl && cl && d && (x * x + y * y) || Infinity;\n}\n\nfunction circumcenter(ax, ay, bx, by, cx, cy) {\n    const dx = bx - ax;\n    const dy = by - ay;\n    const ex = cx - ax;\n    const ey = cy - ay;\n\n    const bl = dx * dx + dy * dy;\n    const cl = ex * ex + ey * ey;\n    const d = dx * ey - dy * ex;\n\n    const x = ax + (ey * bl - dy * cl) * 0.5 / d;\n    const y = ay + (dx * cl - ex * bl) * 0.5 / d;\n\n    return {x, y};\n}\n\n// create a new node in a doubly linked list\nfunction insertNode(coords, i, prev) {\n    const node = {\n        i,\n        x: coords[2 * i],\n        y: coords[2 * i + 1],\n        t: 0,\n        prev: null,\n        next: null,\n        removed: false\n    };\n\n    if (!prev) {\n        node.prev = node;\n        node.next = node;\n\n    } else {\n        node.next = prev.next;\n        node.prev = prev;\n        prev.next.prev = node;\n        prev.next = node;\n    }\n    return node;\n}\n\nfunction removeNode(node) {\n    node.prev.next = node.next;\n    node.next.prev = node.prev;\n    node.removed = true;\n    return node.prev;\n}\n\nfunction quicksort(ids, coords, left, right, cx, cy) {\n    let i, j, temp;\n\n    if (right - left <= 20) {\n        for (i = left + 1; i <= right; i++) {\n            temp = ids[i];\n            j = i - 1;\n            while (j >= left && compare(coords, ids[j], temp, cx, cy) > 0) ids[j + 1] = ids[j--];\n            ids[j + 1] = temp;\n        }\n    } else {\n        const median = (left + right) >> 1;\n        i = left + 1;\n        j = right;\n        swap(ids, median, i);\n        if (compare(coords, ids[left], ids[right], cx, cy) > 0) swap(ids, left, right);\n        if (compare(coords, ids[i], ids[right], cx, cy) > 0) swap(ids, i, right);\n        if (compare(coords, ids[left], ids[i], cx, cy) > 0) swap(ids, left, i);\n\n        temp = ids[i];\n        while (true) {\n            do i++; while (compare(coords, ids[i], temp, cx, cy) < 0);\n            do j--; while (compare(coords, ids[j], temp, cx, cy) > 0);\n            if (j < i) break;\n            swap(ids, i, j);\n        }\n        ids[left + 1] = ids[j];\n        ids[j] = temp;\n\n        if (right - i + 1 >= j - left) {\n            quicksort(ids, coords, i, right, cx, cy);\n            quicksort(ids, coords, left, j - 1, cx, cy);\n        } else {\n            quicksort(ids, coords, left, j - 1, cx, cy);\n            quicksort(ids, coords, i, right, cx, cy);\n        }\n    }\n}\n\nfunction compare(coords, i, j, cx, cy) {\n    const d1 = dist(coords[2 * i], coords[2 * i + 1], cx, cy);\n    const d2 = dist(coords[2 * j], coords[2 * j + 1], cx, cy);\n    return (d1 - d2) || (coords[2 * i] - coords[2 * j]) || (coords[2 * i + 1] - coords[2 * j + 1]);\n}\n\nfunction swap(arr, i, j) {\n    const tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultGetX(p) {\n    return p[0];\n}\nfunction defaultGetY(p) {\n    return p[1];\n}\n","const epsilon = 1e-6;\n\nexport default class Path {\n  constructor() {\n    this._x0 = this._y0 = // start of current subpath\n    this._x1 = this._y1 = null; // end of current subpath\n    this._ = \"\";\n  }\n  moveTo(x, y) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}`;\n  }\n  closePath() {\n    if (this._x1 !== null) {\n      this._x1 = this._x0, this._y1 = this._y0;\n      this._ += \"Z\";\n    }\n  }\n  lineTo(x, y) {\n    this._ += `L${this._x1 = +x},${this._y1 = +y}`;\n  }\n  arc(x, y, r) {\n    x = +x, y = +y, r = +r;\n    const x0 = x + r;\n    const y0 = y;\n    if (r < 0) throw new Error(\"negative radius\");\n    if (this._x1 === null) this._ += `M${x0},${y0}`;\n    else if (Math.abs(this._x1 - x0) > epsilon || Math.abs(this._y1 - y0) > epsilon) this._ += \"L\" + x0 + \",\" + y0;\n    if (!r) return;\n    this._ += `A${r},${r},0,1,1,${x - r},${y}A${r},${r},0,1,1,${this._x1 = x0},${this._y1 = y0}`;\n  }\n  rect(x, y, w, h) {\n    this._ += `M${this._x0 = this._x1 = +x},${this._y0 = this._y1 = +y}h${+w}v${+h}h${-w}Z`;\n  }\n  value() {\n    return this._ || null;\n  }\n}\n","export default class Polygon {\n  constructor() {\n    this._ = [];\n  }\n  moveTo(x, y) {\n    this._.push([x, y]);\n  }\n  closePath() {\n    this._.push(this._[0].slice());\n  }\n  lineTo(x, y) {\n    this._.push([x, y]);\n  }\n  value() {\n    return this._.length ? this._ : null;\n  }\n}\n","import Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\n\nexport default class Voronoi {\n  constructor(delaunay, [xmin, ymin, xmax, ymax] = [0, 0, 960, 500]) {\n    if (!((xmax = +xmax) >= (xmin = +xmin)) || !((ymax = +ymax) >= (ymin = +ymin))) throw new Error(\"invalid bounds\");\n    const {points, hull, triangles} = this.delaunay = delaunay;\n    const circumcenters = this.circumcenters = new Float64Array(triangles.length / 3 * 2);\n    const vectors = this.vectors = new Float64Array(points.length * 2);\n    this.xmax = xmax, this.xmin = xmin;\n    this.ymax = ymax, this.ymin = ymin;\n\n    // Compute circumcenters.\n    for (let i = 0, j = 0, n = triangles.length; i < n; i += 3, j += 2) {\n      const t1 = triangles[i] * 2;\n      const t2 = triangles[i + 1] * 2;\n      const t3 = triangles[i + 2] * 2;\n      const x1 = points[t1];\n      const y1 = points[t1 + 1];\n      const x2 = points[t2];\n      const y2 = points[t2 + 1];\n      const x3 = points[t3];\n      const y3 = points[t3 + 1];\n      const a2 = x1 - x2;\n      const a3 = x1 - x3;\n      const b2 = y1 - y2;\n      const b3 = y1 - y3;\n      const d1 = x1 * x1 + y1 * y1;\n      const d2 = d1 - x2 * x2 - y2 * y2;\n      const d3 = d1 - x3 * x3 - y3 * y3;\n      const ab = (a3 * b2 - a2 * b3) * 2;\n      circumcenters[j] = (b2 * d3 - b3 * d2) / ab;\n      circumcenters[j + 1] = (a3 * d2 - a2 * d3) / ab;\n    }\n\n    // Compute exterior cell rays.\n    let node = hull;\n    let p0, p1 = node.i * 4;\n    let x0, x1 = node.x;\n    let y0, y1 = node.y;\n    do {\n      node = node.next, p0 = p1, x0 = x1, y0 = y1, p1 = node.i * 4, x1 = node.x, y1 = node.y;\n      vectors[p0 + 2] = vectors[p1] = y0 - y1;\n      vectors[p0 + 3] = vectors[p1 + 1] = x1 - x0;\n    } while (node !== hull);\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {delaunay: {halfedges, hull}, circumcenters, vectors} = this;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = Math.floor(i / 3) * 2;\n      const tj = Math.floor(j / 3) * 2;\n      const xi = circumcenters[ti];\n      const yi = circumcenters[ti + 1];\n      const xj = circumcenters[tj];\n      const yj = circumcenters[tj + 1];\n      this._renderSegment(xi, yi, xj, yj, context);\n    }\n    let node = hull;\n    do {\n      node = node.next;\n      const t = Math.floor(node.t / 3) * 2;\n      const x = circumcenters[t];\n      const y = circumcenters[t + 1];\n      const v = node.i * 4;\n      const p = this._project(x, y, vectors[v + 2], vectors[v + 3]);\n      if (p) this._renderSegment(x, y, p[0], p[1], context);\n    } while (node !== hull);\n    return buffer && buffer.value();\n  }\n  renderBounds(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    context.rect(this.xmin, this.ymin, this.xmax - this.xmin, this.ymax - this.ymin);\n    return buffer && buffer.value();\n  }\n  renderCell(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const points = this._clip(i);\n    if (points === null) return;\n    context.moveTo(points[0], points[1]);\n    for (let i = 2, n = points.length; i < n; i += 2) {\n      context.lineTo(points[i], points[i + 1]);\n    }\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *cellPolygons() {\n    const {delaunay: {points}} = this;\n    for (let i = 0, n = points.length / 2; i < n; ++i) {\n      const cell = this.cellPolygon(i);\n      if (cell) yield cell;\n    }\n  }\n  cellPolygon(i) {\n    const polygon = new Polygon;\n    this.renderCell(i, polygon);\n    return polygon.value();\n  }\n  _renderSegment(x0, y0, x1, y1, context) {\n    let S;\n    const c0 = this._regioncode(x0, y0);\n    const c1 = this._regioncode(x1, y1);\n    if (c0 === 0 && c1 === 0) {\n      context.moveTo(x0, y0);\n      context.lineTo(x1, y1);\n    } else if (S = this._clipSegment(x0, y0, x1, y1, c0, c1)) {\n      context.moveTo(S[0], S[1]);\n      context.lineTo(S[2], S[3]);\n    }\n  }\n  contains(i, x, y) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return false;\n    return this.delaunay._step(i, x, y) === i;\n  }\n  _cell(i) {\n    const {circumcenters, delaunay: {inedges, halfedges, triangles}} = this;\n    const e0 = inedges[i];\n    if (e0 === -1) return null; // coincident point\n    const points = [];\n    let e = e0;\n    do {\n      const t = Math.floor(e / 3);\n      points.push(circumcenters[t * 2], circumcenters[t * 2 + 1]);\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) break; // bad triangulation\n      e = halfedges[e];\n    } while (e !== e0 && e !== -1);\n    return points;\n  }\n  _clip(i) {\n    const points = this._cell(i);\n    if (points === null) return null;\n    const {vectors: V} = this;\n    const v = i * 4;\n    return V[v] || V[v + 1]\n        ? this._clipInfinite(i, points, V[v], V[v + 1], V[v + 2], V[v + 3])\n        : this._clipFinite(i, points);\n  }\n  _clipFinite(i, points) {\n    const n = points.length;\n    let P = null;\n    let x0, y0, x1 = points[n - 2], y1 = points[n - 1];\n    let c0, c1 = this._regioncode(x1, y1);\n    let e0, e1;\n    for (let j = 0; j < n; j += 2) {\n      x0 = x1, y0 = y1, x1 = points[j], y1 = points[j + 1];\n      c0 = c1, c1 = this._regioncode(x1, y1);\n      if (c0 === 0 && c1 === 0) {\n        e0 = e1, e1 = 0;\n        if (P) P.push(x1, y1);\n        else P = [x1, y1];\n      } else {\n        let S, sx0, sy0, sx1, sy1;\n        if (c0 === 0) {\n          if ((S = this._clipSegment(x0, y0, x1, y1, c0, c1)) === null) continue;\n          [sx0, sy0, sx1, sy1] = S;\n        } else {\n          if ((S = this._clipSegment(x1, y1, x0, y0, c1, c0)) === null) continue;\n          [sx1, sy1, sx0, sy0] = S;\n          e0 = e1, e1 = this._edgecode(sx0, sy0);\n          if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n          if (P) P.push(sx0, sy0);\n          else P = [sx0, sy0];\n        }\n        e0 = e1, e1 = this._edgecode(sx1, sy1);\n        if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n        if (P) P.push(sx1, sy1);\n        else P = [sx1, sy1];\n      }\n    }\n    if (P) {\n      e0 = e1, e1 = this._edgecode(P[0], P[1]);\n      if (e0 && e1) this._edge(i, e0, e1, P, P.length);\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      return [this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax, this.xmin, this.ymin];\n    }\n    return P;\n  }\n  _clipSegment(x0, y0, x1, y1, c0, c1) {\n    while (true) {\n      if (c0 === 0 && c1 === 0) return [x0, y0, x1, y1];\n      if (c0 & c1) return null;\n      let x, y, c = c0 || c1;\n      if (c & 0b1000) x = x0 + (x1 - x0) * (this.ymax - y0) / (y1 - y0), y = this.ymax;\n      else if (c & 0b0100) x = x0 + (x1 - x0) * (this.ymin - y0) / (y1 - y0), y = this.ymin;\n      else if (c & 0b0010) y = y0 + (y1 - y0) * (this.xmax - x0) / (x1 - x0), x = this.xmax;\n      else y = y0 + (y1 - y0) * (this.xmin - x0) / (x1 - x0), x = this.xmin;\n      if (c0) x0 = x, y0 = y, c0 = this._regioncode(x0, y0);\n      else x1 = x, y1 = y, c1 = this._regioncode(x1, y1);\n    }\n  }\n  _clipInfinite(i, points, vx0, vy0, vxn, vyn) {\n    let P = Array.from(points), p;\n    if (p = this._project(P[0], P[1], vx0, vy0)) P.unshift(p[0], p[1]);\n    if (p = this._project(P[P.length - 2], P[P.length - 1], vxn, vyn)) P.push(p[0], p[1]);\n    if (P = this._clipFinite(i, P)) {\n      for (let j = 0, n = P.length, c0, c1 = this._edgecode(P[n - 2], P[n - 1]); j < n; j += 2) {\n        c0 = c1, c1 = this._edgecode(P[j], P[j + 1]);\n        if (c0 && c1) j = this._edge(i, c0, c1, P, j), n = P.length;\n      }\n    } else if (this.contains(i, (this.xmin + this.xmax) / 2, (this.ymin + this.ymax) / 2)) {\n      P = [this.xmin, this.ymin, this.xmax, this.ymin, this.xmax, this.ymax, this.xmin, this.ymax];\n    }\n    return P;\n  }\n  _edge(i, e0, e1, P, j) {\n    while (e0 !== e1) {\n      let x, y;\n      switch (e0) {\n        case 0b0101: e0 = 0b0100; continue; // top-left\n        case 0b0100: e0 = 0b0110, x = this.xmax, y = this.ymin; break; // top\n        case 0b0110: e0 = 0b0010; continue; // top-right\n        case 0b0010: e0 = 0b1010, x = this.xmax, y = this.ymax; break; // right\n        case 0b1010: e0 = 0b1000; continue; // bottom-right\n        case 0b1000: e0 = 0b1001, x = this.xmin, y = this.ymax; break; // bottom\n        case 0b1001: e0 = 0b0001; continue; // bottom-left\n        case 0b0001: e0 = 0b0101, x = this.xmin, y = this.ymin; break; // left\n      }\n      if ((P[j] !== x || P[j + 1] !== y) && this.contains(i, x, y)) {\n        P.splice(j, 0, x, y), j += 2;\n      }\n    }\n    return j;\n  }\n  _project(x0, y0, vx, vy) {\n    let t = Infinity, c, x, y;\n    if (vy < 0) { // top\n      if (y0 <= this.ymin) return null;\n      if ((c = (this.ymin - y0) / vy) < t) y = this.ymin, x = x0 + (t = c) * vx;\n    } else if (vy > 0) { // bottom\n      if (y0 >= this.ymax) return null;\n      if ((c = (this.ymax - y0) / vy) < t) y = this.ymax, x = x0 + (t = c) * vx;\n    }\n    if (vx > 0) { // right\n      if (x0 >= this.xmax) return null;\n      if ((c = (this.xmax - x0) / vx) < t) x = this.xmax, y = y0 + (t = c) * vy;\n    } else if (vx < 0) { // left\n      if (x0 <= this.xmin) return null;\n      if ((c = (this.xmin - x0) / vx) < t) x = this.xmin, y = y0 + (t = c) * vy;\n    }\n    return [x, y];\n  }\n  _edgecode(x, y) {\n    return (x === this.xmin ? 0b0001\n        : x === this.xmax ? 0b0010 : 0b0000)\n        | (y === this.ymin ? 0b0100\n        : y === this.ymax ? 0b1000 : 0b0000);\n  }\n  _regioncode(x, y) {\n    return (x < this.xmin ? 0b0001\n        : x > this.xmax ? 0b0010 : 0b0000)\n        | (y < this.ymin ? 0b0100\n        : y > this.ymax ? 0b1000 : 0b0000);\n  }\n}\n","import Delaunator from \"delaunator\";\nimport Path from \"./path.js\";\nimport Polygon from \"./polygon.js\";\nimport Voronoi from \"./voronoi.js\";\n\nconst tau = 2 * Math.PI;\n\nfunction pointX(p) {\n  return p[0];\n}\n\nfunction pointY(p) {\n  return p[1];\n}\n\nexport default class Delaunay {\n  constructor(points) {\n    const {halfedges, hull, triangles} = new Delaunator(points);\n    this.points = points;\n    this.halfedges = halfedges;\n    this.hull = hull;\n    this.triangles = triangles;\n    const inedges = this.inedges = new Int32Array(points.length / 2).fill(-1);\n    const outedges = this.outedges = new Int32Array(points.length / 2).fill(-1);\n\n    // Compute an index from each point to an (arbitrary) incoming halfedge.\n    for (let e = 0, n = halfedges.length; e < n; ++e) {\n      inedges[triangles[e % 3 === 2 ? e - 2 : e + 1]] = e;\n    }\n\n    // For points on the hull, index both the incoming and outgoing halfedges.\n    let node0, node1 = hull;\n    do {\n      node0 = node1, node1 = node1.next;\n      inedges[node1.i] = node0.t;\n      outedges[node0.i] = node1.t;\n    } while (node1 !== hull);\n  }\n  voronoi(bounds) {\n    return new Voronoi(this, bounds);\n  }\n  *neighbors(i) {\n    const {inedges, outedges, halfedges, triangles} = this;\n    const e0 = inedges[i];\n    if (e0 === -1) return; // coincident point\n    let e = e0;\n    do {\n      yield triangles[e];\n      e = e % 3 === 2 ? e - 2 : e + 1;\n      if (triangles[e] !== i) return; // bad triangulation\n      e = halfedges[e];\n      if (e === -1) return yield triangles[outedges[i]];\n    } while (e !== e0);\n  }\n  find(x, y, i = 0) {\n    if ((x = +x, x !== x) || (y = +y, y !== y)) return -1;\n    let c;\n    while ((c = this._step(i, x, y)) >= 0 && c !== i) i = c;\n    return c;\n  }\n  _step(i, x, y) {\n    const {inedges, points} = this;\n    if (inedges[i] === -1) return -1; // coincident point\n    let c = i;\n    let dc = (x - points[i * 2]) ** 2 + (y - points[i * 2 + 1]) ** 2;\n    for (const t of this.neighbors(i)) {\n      const dt = (x - points[t * 2]) ** 2 + (y - points[t * 2 + 1]) ** 2;\n      if (dt < dc) dc = dt, c = t;\n    }\n    return c;\n  }\n  render(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, halfedges, triangles} = this;\n    for (let i = 0, n = halfedges.length; i < n; ++i) {\n      const j = halfedges[i];\n      if (j < i) continue;\n      const ti = triangles[i] * 2;\n      const tj = triangles[j] * 2;\n      context.moveTo(points[ti], points[ti + 1]);\n      context.lineTo(points[tj], points[tj + 1]);\n    }\n    this.renderHull(context);\n    return buffer && buffer.value();\n  }\n  renderPoints(context, r = 2) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points} = this;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i], y = points[i + 1];\n      context.moveTo(x + r, y);\n      context.arc(x, y, r, 0, tau);\n    }\n    return buffer && buffer.value();\n  }\n  renderHull(context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {hull} = this;\n    let node = hull;\n    context.moveTo(node.x, node.y);\n    while (node = node.next, node !== hull) context.lineTo(node.x, node.y);\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  hullPolygon() {\n    const polygon = new Polygon;\n    this.renderHull(polygon);\n    return polygon.value();\n  }\n  renderTriangle(i, context) {\n    const buffer = context == null ? context = new Path : undefined;\n    const {points, triangles} = this;\n    const t0 = triangles[i *= 3] * 2;\n    const t1 = triangles[i + 1] * 2;\n    const t2 = triangles[i + 2] * 2;\n    context.moveTo(points[t0], points[t0 + 1]);\n    context.lineTo(points[t1], points[t1 + 1]);\n    context.lineTo(points[t2], points[t2 + 1]);\n    context.closePath();\n    return buffer && buffer.value();\n  }\n  *trianglePolygons() {\n    const {triangles} = this;\n    for (let i = 0, n = triangles.length / 3; i < n; ++i) {\n      yield this.trianglePolygon(i);\n    }\n  }\n  trianglePolygon(i) {\n    const polygon = new Polygon;\n    this.renderTriangle(i, polygon);\n    return polygon.value();\n  }\n}\n\nDelaunay.from = function(points, fx = pointX, fy = pointY, that) {\n  return new Delaunay(\"length\" in points\n      ? flatArray(points, fx, fy, that)\n      : Float64Array.from(flatIterable(points, fx, fy, that)));\n};\n\nfunction flatArray(points, fx, fy, that) {\n  const n = points.length;\n  const array = new Float64Array(n * 2);\n  for (let i = 0; i < n; ++i) {\n    const p = points[i];\n    array[i * 2] = fx.call(that, p, i, points);\n    array[i * 2 + 1] = fy.call(that, p, i, points);\n  }\n  return array;\n}\n\nfunction* flatIterable(points, fx, fy, that) {\n  let i = 0;\n  for (const p of points) {\n    yield fx.call(that, p, i, points);\n    yield fy.call(that, p, i, points);\n    ++i;\n  }\n}\n","export default function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}","import _typeof from \"../../helpers/esm/typeof\";\nimport assertThisInitialized from \"./assertThisInitialized\";\nexport default function _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = y[op[0] & 2 ? \"return\" : op[0] ? \"throw\" : \"next\"]) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [0, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_1 = require(\"../bindings/binding\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_reader_1 = require(\"../planning/metadata_reader\");\nvar planner_1 = require(\"../planning/planner\");\nvar resolver_1 = require(\"../resolution/resolver\");\nvar binding_to_syntax_1 = require(\"../syntax/binding_to_syntax\");\nvar id_1 = require(\"../utils/id\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar container_snapshot_1 = require(\"./container_snapshot\");\nvar lookup_1 = require(\"./lookup\");\nvar Container = (function () {\n    function Container(containerOptions) {\n        var options = containerOptions || {};\n        if (typeof options !== \"object\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_MUST_BE_AN_OBJECT);\n        }\n        if (options.defaultScope === undefined) {\n            options.defaultScope = literal_types_1.BindingScopeEnum.Transient;\n        }\n        else if (options.defaultScope !== literal_types_1.BindingScopeEnum.Singleton &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Transient &&\n            options.defaultScope !== literal_types_1.BindingScopeEnum.Request) {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_DEFAULT_SCOPE);\n        }\n        if (options.autoBindInjectable === undefined) {\n            options.autoBindInjectable = false;\n        }\n        else if (typeof options.autoBindInjectable !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_AUTO_BIND_INJECTABLE);\n        }\n        if (options.skipBaseClassChecks === undefined) {\n            options.skipBaseClassChecks = false;\n        }\n        else if (typeof options.skipBaseClassChecks !== \"boolean\") {\n            throw new Error(\"\" + ERROR_MSGS.CONTAINER_OPTIONS_INVALID_SKIP_BASE_CHECK);\n        }\n        this.options = {\n            autoBindInjectable: options.autoBindInjectable,\n            defaultScope: options.defaultScope,\n            skipBaseClassChecks: options.skipBaseClassChecks\n        };\n        this.id = id_1.id();\n        this._bindingDictionary = new lookup_1.Lookup();\n        this._snapshots = [];\n        this._middleware = null;\n        this.parent = null;\n        this._metadataReader = new metadata_reader_1.MetadataReader();\n    }\n    Container.merge = function (container1, container2) {\n        var container = new Container();\n        var bindingDictionary = planner_1.getBindingDictionary(container);\n        var bindingDictionary1 = planner_1.getBindingDictionary(container1);\n        var bindingDictionary2 = planner_1.getBindingDictionary(container2);\n        function copyDictionary(origin, destination) {\n            origin.traverse(function (key, value) {\n                value.forEach(function (binding) {\n                    destination.add(binding.serviceIdentifier, binding.clone());\n                });\n            });\n        }\n        copyDictionary(bindingDictionary1, bindingDictionary);\n        copyDictionary(bindingDictionary2, bindingDictionary);\n        return container;\n    };\n    Container.prototype.load = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var getHelpers = this._getContainerModuleHelpersFactory();\n        for (var _a = 0, modules_1 = modules; _a < modules_1.length; _a++) {\n            var currentModule = modules_1[_a];\n            var containerModuleHelpers = getHelpers(currentModule.id);\n            currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction);\n        }\n    };\n    Container.prototype.loadAsync = function () {\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        return __awaiter(this, void 0, void 0, function () {\n            var getHelpers, _a, modules_2, currentModule, containerModuleHelpers;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        getHelpers = this._getContainerModuleHelpersFactory();\n                        _a = 0, modules_2 = modules;\n                        _b.label = 1;\n                    case 1:\n                        if (!(_a < modules_2.length)) return [3, 4];\n                        currentModule = modules_2[_a];\n                        containerModuleHelpers = getHelpers(currentModule.id);\n                        return [4, currentModule.registry(containerModuleHelpers.bindFunction, containerModuleHelpers.unbindFunction, containerModuleHelpers.isboundFunction, containerModuleHelpers.rebindFunction)];\n                    case 2:\n                        _b.sent();\n                        _b.label = 3;\n                    case 3:\n                        _a++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.unload = function () {\n        var _this = this;\n        var modules = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            modules[_i] = arguments[_i];\n        }\n        var conditionFactory = function (expected) { return function (item) {\n            return item.moduleId === expected;\n        }; };\n        modules.forEach(function (module) {\n            var condition = conditionFactory(module.id);\n            _this._bindingDictionary.removeByCondition(condition);\n        });\n    };\n    Container.prototype.bind = function (serviceIdentifier) {\n        var scope = this.options.defaultScope || literal_types_1.BindingScopeEnum.Transient;\n        var binding = new binding_1.Binding(serviceIdentifier, scope);\n        this._bindingDictionary.add(serviceIdentifier, binding);\n        return new binding_to_syntax_1.BindingToSyntax(binding);\n    };\n    Container.prototype.rebind = function (serviceIdentifier) {\n        this.unbind(serviceIdentifier);\n        return this.bind(serviceIdentifier);\n    };\n    Container.prototype.unbind = function (serviceIdentifier) {\n        try {\n            this._bindingDictionary.remove(serviceIdentifier);\n        }\n        catch (e) {\n            throw new Error(ERROR_MSGS.CANNOT_UNBIND + \" \" + serialization_1.getServiceIdentifierAsString(serviceIdentifier));\n        }\n    };\n    Container.prototype.unbindAll = function () {\n        this._bindingDictionary = new lookup_1.Lookup();\n    };\n    Container.prototype.isBound = function (serviceIdentifier) {\n        var bound = this._bindingDictionary.hasKey(serviceIdentifier);\n        if (!bound && this.parent) {\n            bound = this.parent.isBound(serviceIdentifier);\n        }\n        return bound;\n    };\n    Container.prototype.isBoundNamed = function (serviceIdentifier, named) {\n        return this.isBoundTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.isBoundTagged = function (serviceIdentifier, key, value) {\n        var bound = false;\n        if (this._bindingDictionary.hasKey(serviceIdentifier)) {\n            var bindings = this._bindingDictionary.get(serviceIdentifier);\n            var request_1 = planner_1.createMockRequest(this, serviceIdentifier, key, value);\n            bound = bindings.some(function (b) { return b.constraint(request_1); });\n        }\n        if (!bound && this.parent) {\n            bound = this.parent.isBoundTagged(serviceIdentifier, key, value);\n        }\n        return bound;\n    };\n    Container.prototype.snapshot = function () {\n        this._snapshots.push(container_snapshot_1.ContainerSnapshot.of(this._bindingDictionary.clone(), this._middleware));\n    };\n    Container.prototype.restore = function () {\n        var snapshot = this._snapshots.pop();\n        if (snapshot === undefined) {\n            throw new Error(ERROR_MSGS.NO_MORE_SNAPSHOTS_AVAILABLE);\n        }\n        this._bindingDictionary = snapshot.bindings;\n        this._middleware = snapshot.middleware;\n    };\n    Container.prototype.createChild = function (containerOptions) {\n        var child = new Container(containerOptions || this.options);\n        child.parent = this;\n        return child;\n    };\n    Container.prototype.applyMiddleware = function () {\n        var middlewares = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            middlewares[_i] = arguments[_i];\n        }\n        var initial = (this._middleware) ? this._middleware : this._planAndResolve();\n        this._middleware = middlewares.reduce(function (prev, curr) { return curr(prev); }, initial);\n    };\n    Container.prototype.applyCustomMetadataReader = function (metadataReader) {\n        this._metadataReader = metadataReader;\n    };\n    Container.prototype.get = function (serviceIdentifier) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, false, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getNamed = function (serviceIdentifier, named) {\n        return this.getTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.getAll = function (serviceIdentifier) {\n        return this._get(true, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier);\n    };\n    Container.prototype.getAllTagged = function (serviceIdentifier, key, value) {\n        return this._get(false, true, literal_types_1.TargetTypeEnum.Variable, serviceIdentifier, key, value);\n    };\n    Container.prototype.getAllNamed = function (serviceIdentifier, named) {\n        return this.getAllTagged(serviceIdentifier, METADATA_KEY.NAMED_TAG, named);\n    };\n    Container.prototype.resolve = function (constructorFunction) {\n        var tempContainer = this.createChild();\n        tempContainer.bind(constructorFunction).toSelf();\n        return tempContainer.get(constructorFunction);\n    };\n    Container.prototype._getContainerModuleHelpersFactory = function () {\n        var _this = this;\n        var setModuleId = function (bindingToSyntax, moduleId) {\n            bindingToSyntax._binding.moduleId = moduleId;\n        };\n        var getBindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _bind = _this.bind.bind(_this);\n                var bindingToSyntax = _bind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        var getUnbindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _unbind = _this.unbind.bind(_this);\n                _unbind(serviceIdentifier);\n            };\n        };\n        var getIsboundFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _isBound = _this.isBound.bind(_this);\n                return _isBound(serviceIdentifier);\n            };\n        };\n        var getRebindFunction = function (moduleId) {\n            return function (serviceIdentifier) {\n                var _rebind = _this.rebind.bind(_this);\n                var bindingToSyntax = _rebind(serviceIdentifier);\n                setModuleId(bindingToSyntax, moduleId);\n                return bindingToSyntax;\n            };\n        };\n        return function (mId) { return ({\n            bindFunction: getBindFunction(mId),\n            isboundFunction: getIsboundFunction(mId),\n            rebindFunction: getRebindFunction(mId),\n            unbindFunction: getUnbindFunction(mId)\n        }); };\n    };\n    Container.prototype._get = function (avoidConstraints, isMultiInject, targetType, serviceIdentifier, key, value) {\n        var result = null;\n        var defaultArgs = {\n            avoidConstraints: avoidConstraints,\n            contextInterceptor: function (context) { return context; },\n            isMultiInject: isMultiInject,\n            key: key,\n            serviceIdentifier: serviceIdentifier,\n            targetType: targetType,\n            value: value\n        };\n        if (this._middleware) {\n            result = this._middleware(defaultArgs);\n            if (result === undefined || result === null) {\n                throw new Error(ERROR_MSGS.INVALID_MIDDLEWARE_RETURN);\n            }\n        }\n        else {\n            result = this._planAndResolve()(defaultArgs);\n        }\n        return result;\n    };\n    Container.prototype._planAndResolve = function () {\n        var _this = this;\n        return function (args) {\n            var context = planner_1.plan(_this._metadataReader, _this, args.isMultiInject, args.targetType, args.serviceIdentifier, args.key, args.value, args.avoidConstraints);\n            context = args.contextInterceptor(context);\n            var result = resolver_1.resolve(context);\n            return result;\n        };\n    };\n    return Container;\n}());\nexports.Container = Container;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar id_1 = require(\"../utils/id\");\nvar Binding = (function () {\n    function Binding(serviceIdentifier, scope) {\n        this.id = id_1.id();\n        this.activated = false;\n        this.serviceIdentifier = serviceIdentifier;\n        this.scope = scope;\n        this.type = literal_types_1.BindingTypeEnum.Invalid;\n        this.constraint = function (request) { return true; };\n        this.implementationType = null;\n        this.cache = null;\n        this.factory = null;\n        this.provider = null;\n        this.onActivation = null;\n        this.dynamicValue = null;\n    }\n    Binding.prototype.clone = function () {\n        var clone = new Binding(this.serviceIdentifier, this.scope);\n        clone.activated = false;\n        clone.implementationType = this.implementationType;\n        clone.dynamicValue = this.dynamicValue;\n        clone.scope = this.scope;\n        clone.type = this.type;\n        clone.factory = this.factory;\n        clone.provider = this.provider;\n        clone.constraint = this.constraint;\n        clone.onActivation = this.onActivation;\n        clone.cache = this.cache;\n        return clone;\n    };\n    return Binding;\n}());\nexports.Binding = Binding;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_count_1 = require(\"../bindings/binding_count\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar context_1 = require(\"./context\");\nvar metadata_1 = require(\"./metadata\");\nvar plan_1 = require(\"./plan\");\nvar reflection_utils_1 = require(\"./reflection_utils\");\nvar request_1 = require(\"./request\");\nvar target_1 = require(\"./target\");\nfunction getBindingDictionary(cntnr) {\n    return cntnr._bindingDictionary;\n}\nexports.getBindingDictionary = getBindingDictionary;\nfunction _createTarget(isMultiInject, targetType, serviceIdentifier, name, key, value) {\n    var metadataKey = isMultiInject ? METADATA_KEY.MULTI_INJECT_TAG : METADATA_KEY.INJECT_TAG;\n    var injectMetadata = new metadata_1.Metadata(metadataKey, serviceIdentifier);\n    var target = new target_1.Target(targetType, name, serviceIdentifier, injectMetadata);\n    if (key !== undefined) {\n        var tagMetadata = new metadata_1.Metadata(key, value);\n        target.metadata.push(tagMetadata);\n    }\n    return target;\n}\nfunction _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target) {\n    var bindings = getBindings(context.container, target.serviceIdentifier);\n    var activeBindings = [];\n    if (bindings.length === binding_count_1.BindingCount.NoBindingsAvailable &&\n        context.container.options.autoBindInjectable &&\n        typeof target.serviceIdentifier === \"function\" &&\n        metadataReader.getConstructorMetadata(target.serviceIdentifier).compilerGeneratedMetadata) {\n        context.container.bind(target.serviceIdentifier).toSelf();\n        bindings = getBindings(context.container, target.serviceIdentifier);\n    }\n    if (!avoidConstraints) {\n        activeBindings = bindings.filter(function (binding) {\n            var request = new request_1.Request(binding.serviceIdentifier, context, parentRequest, binding, target);\n            return binding.constraint(request);\n        });\n    }\n    else {\n        activeBindings = bindings;\n    }\n    _validateActiveBindingCount(target.serviceIdentifier, activeBindings, target, context.container);\n    return activeBindings;\n}\nfunction _validateActiveBindingCount(serviceIdentifier, bindings, target, container) {\n    switch (bindings.length) {\n        case binding_count_1.BindingCount.NoBindingsAvailable:\n            if (target.isOptional()) {\n                return bindings;\n            }\n            else {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.NOT_REGISTERED;\n                msg += serialization_1.listMetadataForTarget(serviceIdentifierString, target);\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n        case binding_count_1.BindingCount.OnlyOneBindingAvailable:\n            if (!target.isArray()) {\n                return bindings;\n            }\n        case binding_count_1.BindingCount.MultipleBindingsAvailable:\n        default:\n            if (!target.isArray()) {\n                var serviceIdentifierString = serialization_1.getServiceIdentifierAsString(serviceIdentifier);\n                var msg = ERROR_MSGS.AMBIGUOUS_MATCH + \" \" + serviceIdentifierString;\n                msg += serialization_1.listRegisteredBindingsForServiceIdentifier(container, serviceIdentifierString, getBindings);\n                throw new Error(msg);\n            }\n            else {\n                return bindings;\n            }\n    }\n}\nfunction _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, parentRequest, target) {\n    var activeBindings;\n    var childRequest;\n    if (parentRequest === null) {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, null, target);\n        childRequest = new request_1.Request(serviceIdentifier, context, null, activeBindings, target);\n        var thePlan = new plan_1.Plan(context, childRequest);\n        context.addPlan(thePlan);\n    }\n    else {\n        activeBindings = _getActiveBindings(metadataReader, avoidConstraints, context, parentRequest, target);\n        childRequest = parentRequest.addChildRequest(target.serviceIdentifier, activeBindings, target);\n    }\n    activeBindings.forEach(function (binding) {\n        var subChildRequest = null;\n        if (target.isArray()) {\n            subChildRequest = childRequest.addChildRequest(binding.serviceIdentifier, binding, target);\n        }\n        else {\n            if (binding.cache) {\n                return;\n            }\n            subChildRequest = childRequest;\n        }\n        if (binding.type === literal_types_1.BindingTypeEnum.Instance && binding.implementationType !== null) {\n            var dependencies = reflection_utils_1.getDependencies(metadataReader, binding.implementationType);\n            if (!context.container.options.skipBaseClassChecks) {\n                var baseClassDependencyCount = reflection_utils_1.getBaseClassDependencyCount(metadataReader, binding.implementationType);\n                if (dependencies.length < baseClassDependencyCount) {\n                    var error = ERROR_MSGS.ARGUMENTS_LENGTH_MISMATCH(reflection_utils_1.getFunctionName(binding.implementationType));\n                    throw new Error(error);\n                }\n            }\n            dependencies.forEach(function (dependency) {\n                _createSubRequests(metadataReader, false, dependency.serviceIdentifier, context, subChildRequest, dependency);\n            });\n        }\n    });\n}\nfunction getBindings(container, serviceIdentifier) {\n    var bindings = [];\n    var bindingDictionary = getBindingDictionary(container);\n    if (bindingDictionary.hasKey(serviceIdentifier)) {\n        bindings = bindingDictionary.get(serviceIdentifier);\n    }\n    else if (container.parent !== null) {\n        bindings = getBindings(container.parent, serviceIdentifier);\n    }\n    return bindings;\n}\nfunction plan(metadataReader, container, isMultiInject, targetType, serviceIdentifier, key, value, avoidConstraints) {\n    if (avoidConstraints === void 0) { avoidConstraints = false; }\n    var context = new context_1.Context(container);\n    var target = _createTarget(isMultiInject, targetType, serviceIdentifier, \"\", key, value);\n    try {\n        _createSubRequests(metadataReader, avoidConstraints, serviceIdentifier, context, null, target);\n        return context;\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            if (context.plan) {\n                serialization_1.circularDependencyToException(context.plan.rootRequest);\n            }\n        }\n        throw error;\n    }\n}\nexports.plan = plan;\nfunction createMockRequest(container, serviceIdentifier, key, value) {\n    var target = new target_1.Target(literal_types_1.TargetTypeEnum.Variable, \"\", serviceIdentifier, new metadata_1.Metadata(key, value));\n    var context = new context_1.Context(container);\n    var request = new request_1.Request(serviceIdentifier, context, null, [], target);\n    return request;\n}\nexports.createMockRequest = createMockRequest;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar BindingCount = {\n    MultipleBindingsAvailable: 2,\n    NoBindingsAvailable: 0,\n    OnlyOneBindingAvailable: 1\n};\nexports.BindingCount = BindingCount;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar id_1 = require(\"../utils/id\");\nvar Context = (function () {\n    function Context(container) {\n        this.id = id_1.id();\n        this.container = container;\n    }\n    Context.prototype.addPlan = function (plan) {\n        this.plan = plan;\n    };\n    Context.prototype.setCurrentRequest = function (currentRequest) {\n        this.currentRequest = currentRequest;\n    };\n    return Context;\n}());\nexports.Context = Context;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Plan = (function () {\n    function Plan(parentContext, rootRequest) {\n        this.parentContext = parentContext;\n        this.rootRequest = rootRequest;\n    }\n    return Plan;\n}());\nexports.Plan = Plan;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar inject_1 = require(\"../annotation/inject\");\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar serialization_1 = require(\"../utils/serialization\");\nexports.getFunctionName = serialization_1.getFunctionName;\nvar target_1 = require(\"./target\");\nfunction getDependencies(metadataReader, func) {\n    var constructorName = serialization_1.getFunctionName(func);\n    var targets = getTargets(metadataReader, constructorName, func, false);\n    return targets;\n}\nexports.getDependencies = getDependencies;\nfunction getTargets(metadataReader, constructorName, func, isBaseClass) {\n    var metadata = metadataReader.getConstructorMetadata(func);\n    var serviceIdentifiers = metadata.compilerGeneratedMetadata;\n    if (serviceIdentifiers === undefined) {\n        var msg = ERROR_MSGS.MISSING_INJECTABLE_ANNOTATION + \" \" + constructorName + \".\";\n        throw new Error(msg);\n    }\n    var constructorArgsMetadata = metadata.userGeneratedMetadata;\n    var keys = Object.keys(constructorArgsMetadata);\n    var hasUserDeclaredUnknownInjections = (func.length === 0 && keys.length > 0);\n    var iterations = (hasUserDeclaredUnknownInjections) ? keys.length : func.length;\n    var constructorTargets = getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations);\n    var propertyTargets = getClassPropsAsTargets(metadataReader, func);\n    var targets = constructorTargets.concat(propertyTargets);\n    return targets;\n}\nfunction getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata) {\n    var targetMetadata = constructorArgsMetadata[index.toString()] || [];\n    var metadata = formatTargetMetadata(targetMetadata);\n    var isManaged = metadata.unmanaged !== true;\n    var serviceIdentifier = serviceIdentifiers[index];\n    var injectIdentifier = (metadata.inject || metadata.multiInject);\n    serviceIdentifier = (injectIdentifier) ? (injectIdentifier) : serviceIdentifier;\n    if (serviceIdentifier instanceof inject_1.LazyServiceIdentifer) {\n        serviceIdentifier = serviceIdentifier.unwrap();\n    }\n    if (isManaged) {\n        var isObject = serviceIdentifier === Object;\n        var isFunction = serviceIdentifier === Function;\n        var isUndefined = serviceIdentifier === undefined;\n        var isUnknownType = (isObject || isFunction || isUndefined);\n        if (!isBaseClass && isUnknownType) {\n            var msg = ERROR_MSGS.MISSING_INJECT_ANNOTATION + \" argument \" + index + \" in class \" + constructorName + \".\";\n            throw new Error(msg);\n        }\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ConstructorArgument, metadata.targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        return target;\n    }\n    return null;\n}\nfunction getConstructorArgsAsTargets(isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata, iterations) {\n    var targets = [];\n    for (var i = 0; i < iterations; i++) {\n        var index = i;\n        var target = getConstructorArgsAsTarget(index, isBaseClass, constructorName, serviceIdentifiers, constructorArgsMetadata);\n        if (target !== null) {\n            targets.push(target);\n        }\n    }\n    return targets;\n}\nfunction getClassPropsAsTargets(metadataReader, constructorFunc) {\n    var classPropsMetadata = metadataReader.getPropertiesMetadata(constructorFunc);\n    var targets = [];\n    var keys = Object.keys(classPropsMetadata);\n    for (var _i = 0, keys_1 = keys; _i < keys_1.length; _i++) {\n        var key = keys_1[_i];\n        var targetMetadata = classPropsMetadata[key];\n        var metadata = formatTargetMetadata(classPropsMetadata[key]);\n        var targetName = metadata.targetName || key;\n        var serviceIdentifier = (metadata.inject || metadata.multiInject);\n        var target = new target_1.Target(literal_types_1.TargetTypeEnum.ClassProperty, targetName, serviceIdentifier);\n        target.metadata = targetMetadata;\n        targets.push(target);\n    }\n    var baseConstructor = Object.getPrototypeOf(constructorFunc.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseTargets = getClassPropsAsTargets(metadataReader, baseConstructor);\n        targets = targets.concat(baseTargets);\n    }\n    return targets;\n}\nfunction getBaseClassDependencyCount(metadataReader, func) {\n    var baseConstructor = Object.getPrototypeOf(func.prototype).constructor;\n    if (baseConstructor !== Object) {\n        var baseConstructorName = serialization_1.getFunctionName(baseConstructor);\n        var targets = getTargets(metadataReader, baseConstructorName, baseConstructor, true);\n        var metadata = targets.map(function (t) {\n            return t.metadata.filter(function (m) {\n                return m.key === METADATA_KEY.UNMANAGED_TAG;\n            });\n        });\n        var unmanagedCount = [].concat.apply([], metadata).length;\n        var dependencyCount = targets.length - unmanagedCount;\n        if (dependencyCount > 0) {\n            return dependencyCount;\n        }\n        else {\n            return getBaseClassDependencyCount(metadataReader, baseConstructor);\n        }\n    }\n    else {\n        return 0;\n    }\n}\nexports.getBaseClassDependencyCount = getBaseClassDependencyCount;\nfunction formatTargetMetadata(targetMetadata) {\n    var targetMetadataMap = {};\n    targetMetadata.forEach(function (m) {\n        targetMetadataMap[m.key.toString()] = m.value;\n    });\n    return {\n        inject: targetMetadataMap[METADATA_KEY.INJECT_TAG],\n        multiInject: targetMetadataMap[METADATA_KEY.MULTI_INJECT_TAG],\n        targetName: targetMetadataMap[METADATA_KEY.NAME_TAG],\n        unmanaged: targetMetadataMap[METADATA_KEY.UNMANAGED_TAG]\n    };\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar QueryableString = (function () {\n    function QueryableString(str) {\n        this.str = str;\n    }\n    QueryableString.prototype.startsWith = function (searchString) {\n        return this.str.indexOf(searchString) === 0;\n    };\n    QueryableString.prototype.endsWith = function (searchString) {\n        var reverseString = \"\";\n        var reverseSearchString = searchString.split(\"\").reverse().join(\"\");\n        reverseString = this.str.split(\"\").reverse().join(\"\");\n        return this.startsWith.call({ str: reverseString }, reverseSearchString);\n    };\n    QueryableString.prototype.contains = function (searchString) {\n        return (this.str.indexOf(searchString) !== -1);\n    };\n    QueryableString.prototype.equals = function (compareString) {\n        return this.str === compareString;\n    };\n    QueryableString.prototype.value = function () {\n        return this.str;\n    };\n    return QueryableString;\n}());\nexports.QueryableString = QueryableString;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar id_1 = require(\"../utils/id\");\nvar Request = (function () {\n    function Request(serviceIdentifier, parentContext, parentRequest, bindings, target) {\n        this.id = id_1.id();\n        this.serviceIdentifier = serviceIdentifier;\n        this.parentContext = parentContext;\n        this.parentRequest = parentRequest;\n        this.target = target;\n        this.childRequests = [];\n        this.bindings = (Array.isArray(bindings) ? bindings : [bindings]);\n        this.requestScope = parentRequest === null\n            ? new Map()\n            : null;\n    }\n    Request.prototype.addChildRequest = function (serviceIdentifier, bindings, target) {\n        var child = new Request(serviceIdentifier, this.parentContext, this, bindings, target);\n        this.childRequests.push(child);\n        return child;\n    };\n    return Request;\n}());\nexports.Request = Request;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar exceptions_1 = require(\"../utils/exceptions\");\nvar serialization_1 = require(\"../utils/serialization\");\nvar instantiation_1 = require(\"./instantiation\");\nvar invokeFactory = function (factoryType, serviceIdentifier, fn) {\n    try {\n        return fn();\n    }\n    catch (error) {\n        if (exceptions_1.isStackOverflowExeption(error)) {\n            throw new Error(ERROR_MSGS.CIRCULAR_DEPENDENCY_IN_FACTORY(factoryType, serviceIdentifier.toString()));\n        }\n        else {\n            throw error;\n        }\n    }\n};\nvar _resolveRequest = function (requestScope) {\n    return function (request) {\n        request.parentContext.setCurrentRequest(request);\n        var bindings = request.bindings;\n        var childRequests = request.childRequests;\n        var targetIsAnArray = request.target && request.target.isArray();\n        var targetParentIsNotAnArray = !request.parentRequest ||\n            !request.parentRequest.target ||\n            !request.target ||\n            !request.parentRequest.target.matchesArray(request.target.serviceIdentifier);\n        if (targetIsAnArray && targetParentIsNotAnArray) {\n            return childRequests.map(function (childRequest) {\n                var _f = _resolveRequest(requestScope);\n                return _f(childRequest);\n            });\n        }\n        else {\n            var result = null;\n            if (request.target.isOptional() && bindings.length === 0) {\n                return undefined;\n            }\n            var binding_1 = bindings[0];\n            var isSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Singleton;\n            var isRequestSingleton = binding_1.scope === literal_types_1.BindingScopeEnum.Request;\n            if (isSingleton && binding_1.activated) {\n                return binding_1.cache;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                requestScope.has(binding_1.id)) {\n                return requestScope.get(binding_1.id);\n            }\n            if (binding_1.type === literal_types_1.BindingTypeEnum.ConstantValue) {\n                result = binding_1.cache;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Function) {\n                result = binding_1.cache;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Constructor) {\n                result = binding_1.implementationType;\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.DynamicValue && binding_1.dynamicValue !== null) {\n                result = invokeFactory(\"toDynamicValue\", binding_1.serviceIdentifier, function () { return binding_1.dynamicValue(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Factory && binding_1.factory !== null) {\n                result = invokeFactory(\"toFactory\", binding_1.serviceIdentifier, function () { return binding_1.factory(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Provider && binding_1.provider !== null) {\n                result = invokeFactory(\"toProvider\", binding_1.serviceIdentifier, function () { return binding_1.provider(request.parentContext); });\n            }\n            else if (binding_1.type === literal_types_1.BindingTypeEnum.Instance && binding_1.implementationType !== null) {\n                result = instantiation_1.resolveInstance(binding_1.implementationType, childRequests, _resolveRequest(requestScope));\n            }\n            else {\n                var serviceIdentifier = serialization_1.getServiceIdentifierAsString(request.serviceIdentifier);\n                throw new Error(ERROR_MSGS.INVALID_BINDING_TYPE + \" \" + serviceIdentifier);\n            }\n            if (typeof binding_1.onActivation === \"function\") {\n                result = binding_1.onActivation(request.parentContext, result);\n            }\n            if (isSingleton) {\n                binding_1.cache = result;\n                binding_1.activated = true;\n            }\n            if (isRequestSingleton &&\n                requestScope !== null &&\n                !requestScope.has(binding_1.id)) {\n                requestScope.set(binding_1.id, result);\n            }\n            return result;\n        }\n    };\n};\nfunction resolve(context) {\n    var _f = _resolveRequest(context.plan.rootRequest.requestScope);\n    return _f(context.plan.rootRequest);\n}\nexports.resolve = resolve;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar error_msgs_1 = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction _injectProperties(instance, childRequests, resolveRequest) {\n    var propertyInjectionsRequests = childRequests.filter(function (childRequest) {\n        return (childRequest.target !== null &&\n            childRequest.target.type === literal_types_1.TargetTypeEnum.ClassProperty);\n    });\n    var propertyInjections = propertyInjectionsRequests.map(resolveRequest);\n    propertyInjectionsRequests.forEach(function (r, index) {\n        var propertyName = \"\";\n        propertyName = r.target.name.value();\n        var injection = propertyInjections[index];\n        instance[propertyName] = injection;\n    });\n    return instance;\n}\nfunction _createInstance(Func, injections) {\n    return new (Func.bind.apply(Func, [void 0].concat(injections)))();\n}\nfunction _postConstruct(constr, result) {\n    if (Reflect.hasMetadata(METADATA_KEY.POST_CONSTRUCT, constr)) {\n        var data = Reflect.getMetadata(METADATA_KEY.POST_CONSTRUCT, constr);\n        try {\n            result[data.value]();\n        }\n        catch (e) {\n            throw new Error(error_msgs_1.POST_CONSTRUCT_ERROR(constr.name, e.message));\n        }\n    }\n}\nfunction resolveInstance(constr, childRequests, resolveRequest) {\n    var result = null;\n    if (childRequests.length > 0) {\n        var constructorInjectionsRequests = childRequests.filter(function (childRequest) {\n            return (childRequest.target !== null && childRequest.target.type === literal_types_1.TargetTypeEnum.ConstructorArgument);\n        });\n        var constructorInjections = constructorInjectionsRequests.map(resolveRequest);\n        result = _createInstance(constr, constructorInjections);\n        result = _injectProperties(result, childRequests, resolveRequest);\n    }\n    else {\n        result = new constr();\n    }\n    _postConstruct(constr, result);\n    return result;\n}\nexports.resolveInstance = resolveInstance;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_in_when_on_syntax_1 = require(\"./binding_in_when_on_syntax\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingToSyntax = (function () {\n    function BindingToSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingToSyntax.prototype.to = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Instance;\n        this._binding.implementationType = constructor;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toSelf = function () {\n        if (typeof this._binding.serviceIdentifier !== \"function\") {\n            throw new Error(\"\" + ERROR_MSGS.INVALID_TO_SELF_VALUE);\n        }\n        var self = this._binding.serviceIdentifier;\n        return this.to(self);\n    };\n    BindingToSyntax.prototype.toConstantValue = function (value) {\n        this._binding.type = literal_types_1.BindingTypeEnum.ConstantValue;\n        this._binding.cache = value;\n        this._binding.dynamicValue = null;\n        this._binding.implementationType = null;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toDynamicValue = function (func) {\n        this._binding.type = literal_types_1.BindingTypeEnum.DynamicValue;\n        this._binding.cache = null;\n        this._binding.dynamicValue = func;\n        this._binding.implementationType = null;\n        return new binding_in_when_on_syntax_1.BindingInWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toConstructor = function (constructor) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Constructor;\n        this._binding.implementationType = constructor;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFactory = function (factory) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = factory;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toFunction = function (func) {\n        if (typeof func !== \"function\") {\n            throw new Error(ERROR_MSGS.INVALID_FUNCTION_BINDING);\n        }\n        var bindingWhenOnSyntax = this.toConstantValue(func);\n        this._binding.type = literal_types_1.BindingTypeEnum.Function;\n        return bindingWhenOnSyntax;\n    };\n    BindingToSyntax.prototype.toAutoFactory = function (serviceIdentifier) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Factory;\n        this._binding.factory = function (context) {\n            var autofactory = function () { return context.container.get(serviceIdentifier); };\n            return autofactory;\n        };\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toProvider = function (provider) {\n        this._binding.type = literal_types_1.BindingTypeEnum.Provider;\n        this._binding.provider = provider;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingToSyntax.prototype.toService = function (service) {\n        this.toDynamicValue(function (context) { return context.container.get(service); });\n    };\n    return BindingToSyntax;\n}());\nexports.BindingToSyntax = BindingToSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar binding_in_syntax_1 = require(\"./binding_in_syntax\");\nvar binding_on_syntax_1 = require(\"./binding_on_syntax\");\nvar binding_when_syntax_1 = require(\"./binding_when_syntax\");\nvar BindingInWhenOnSyntax = (function () {\n    function BindingInWhenOnSyntax(binding) {\n        this._binding = binding;\n        this._bindingWhenSyntax = new binding_when_syntax_1.BindingWhenSyntax(this._binding);\n        this._bindingOnSyntax = new binding_on_syntax_1.BindingOnSyntax(this._binding);\n        this._bindingInSyntax = new binding_in_syntax_1.BindingInSyntax(binding);\n    }\n    BindingInWhenOnSyntax.prototype.inRequestScope = function () {\n        return this._bindingInSyntax.inRequestScope();\n    };\n    BindingInWhenOnSyntax.prototype.inSingletonScope = function () {\n        return this._bindingInSyntax.inSingletonScope();\n    };\n    BindingInWhenOnSyntax.prototype.inTransientScope = function () {\n        return this._bindingInSyntax.inTransientScope();\n    };\n    BindingInWhenOnSyntax.prototype.when = function (constraint) {\n        return this._bindingWhenSyntax.when(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetNamed = function (name) {\n        return this._bindingWhenSyntax.whenTargetNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetIsDefault = function () {\n        return this._bindingWhenSyntax.whenTargetIsDefault();\n    };\n    BindingInWhenOnSyntax.prototype.whenTargetTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenTargetTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenInjectedInto = function (parent) {\n        return this._bindingWhenSyntax.whenInjectedInto(parent);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentNamed = function (name) {\n        return this._bindingWhenSyntax.whenParentNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenParentTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenParentTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenAnyAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorIs = function (ancestor) {\n        return this._bindingWhenSyntax.whenNoAncestorIs(ancestor);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenAnyAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenAnyAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorNamed = function (name) {\n        return this._bindingWhenSyntax.whenNoAncestorNamed(name);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorTagged = function (tag, value) {\n        return this._bindingWhenSyntax.whenNoAncestorTagged(tag, value);\n    };\n    BindingInWhenOnSyntax.prototype.whenAnyAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenAnyAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.whenNoAncestorMatches = function (constraint) {\n        return this._bindingWhenSyntax.whenNoAncestorMatches(constraint);\n    };\n    BindingInWhenOnSyntax.prototype.onActivation = function (handler) {\n        return this._bindingOnSyntax.onActivation(handler);\n    };\n    return BindingInWhenOnSyntax;\n}());\nexports.BindingInWhenOnSyntax = BindingInWhenOnSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar literal_types_1 = require(\"../constants/literal_types\");\nvar binding_when_on_syntax_1 = require(\"./binding_when_on_syntax\");\nvar BindingInSyntax = (function () {\n    function BindingInSyntax(binding) {\n        this._binding = binding;\n    }\n    BindingInSyntax.prototype.inRequestScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Request;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inSingletonScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Singleton;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    BindingInSyntax.prototype.inTransientScope = function () {\n        this._binding.scope = literal_types_1.BindingScopeEnum.Transient;\n        return new binding_when_on_syntax_1.BindingWhenOnSyntax(this._binding);\n    };\n    return BindingInSyntax;\n}());\nexports.BindingInSyntax = BindingInSyntax;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ContainerSnapshot = (function () {\n    function ContainerSnapshot() {\n    }\n    ContainerSnapshot.of = function (bindings, middleware) {\n        var snapshot = new ContainerSnapshot();\n        snapshot.bindings = bindings;\n        snapshot.middleware = middleware;\n        return snapshot;\n    };\n    return ContainerSnapshot;\n}());\nexports.ContainerSnapshot = ContainerSnapshot;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERROR_MSGS = require(\"../constants/error_msgs\");\nvar Lookup = (function () {\n    function Lookup() {\n        this._map = new Map();\n    }\n    Lookup.prototype.getMap = function () {\n        return this._map;\n    };\n    Lookup.prototype.add = function (serviceIdentifier, value) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (value === null || value === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            entry.push(value);\n            this._map.set(serviceIdentifier, entry);\n        }\n        else {\n            this._map.set(serviceIdentifier, [value]);\n        }\n    };\n    Lookup.prototype.get = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        var entry = this._map.get(serviceIdentifier);\n        if (entry !== undefined) {\n            return entry;\n        }\n        else {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.remove = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        if (!this._map.delete(serviceIdentifier)) {\n            throw new Error(ERROR_MSGS.KEY_NOT_FOUND);\n        }\n    };\n    Lookup.prototype.removeByCondition = function (condition) {\n        var _this = this;\n        this._map.forEach(function (entries, key) {\n            var updatedEntries = entries.filter(function (entry) { return !condition(entry); });\n            if (updatedEntries.length > 0) {\n                _this._map.set(key, updatedEntries);\n            }\n            else {\n                _this._map.delete(key);\n            }\n        });\n    };\n    Lookup.prototype.hasKey = function (serviceIdentifier) {\n        if (serviceIdentifier === null || serviceIdentifier === undefined) {\n            throw new Error(ERROR_MSGS.NULL_ARGUMENT);\n        }\n        return this._map.has(serviceIdentifier);\n    };\n    Lookup.prototype.clone = function () {\n        var copy = new Lookup();\n        this._map.forEach(function (value, key) {\n            value.forEach(function (b) { return copy.add(key, b.clone()); });\n        });\n        return copy;\n    };\n    Lookup.prototype.traverse = function (func) {\n        this._map.forEach(function (value, key) {\n            func(key, value);\n        });\n    };\n    return Lookup;\n}());\nexports.Lookup = Lookup;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar id_1 = require(\"../utils/id\");\nvar ContainerModule = (function () {\n    function ContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return ContainerModule;\n}());\nexports.ContainerModule = ContainerModule;\nvar AsyncContainerModule = (function () {\n    function AsyncContainerModule(registry) {\n        this.id = id_1.id();\n        this.registry = registry;\n    }\n    return AsyncContainerModule;\n}());\nexports.AsyncContainerModule = AsyncContainerModule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nfunction injectable() {\n    return function (target) {\n        if (Reflect.hasOwnMetadata(METADATA_KEY.PARAM_TYPES, target)) {\n            throw new Error(ERRORS_MSGS.DUPLICATED_INJECTABLE_DECORATOR);\n        }\n        var types = Reflect.getMetadata(METADATA_KEY.DESIGN_PARAM_TYPES, target) || [];\n        Reflect.defineMetadata(METADATA_KEY.PARAM_TYPES, types, target);\n        return target;\n    };\n}\nexports.injectable = injectable;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction tagged(metadataKey, metadataValue) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(metadataKey, metadataValue);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.tagged = tagged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction named(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAMED_TAG, name);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.named = named;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction optional() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.OPTIONAL_TAG, true);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.optional = optional;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction unmanaged() {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.UNMANAGED_TAG, true);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.unmanaged = unmanaged;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction multiInject(serviceIdentifier) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.MULTI_INJECT_TAG, serviceIdentifier);\n        if (typeof index === \"number\") {\n            decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n        }\n        else {\n            decorator_utils_1.tagProperty(target, targetKey, metadata);\n        }\n    };\n}\nexports.multiInject = multiInject;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nvar decorator_utils_1 = require(\"./decorator_utils\");\nfunction targetName(name) {\n    return function (target, targetKey, index) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.NAME_TAG, name);\n        decorator_utils_1.tagParameter(target, targetKey, index, metadata);\n    };\n}\nexports.targetName = targetName;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ERRORS_MSGS = require(\"../constants/error_msgs\");\nvar METADATA_KEY = require(\"../constants/metadata_keys\");\nvar metadata_1 = require(\"../planning/metadata\");\nfunction postConstruct() {\n    return function (target, propertyKey, descriptor) {\n        var metadata = new metadata_1.Metadata(METADATA_KEY.POST_CONSTRUCT, propertyKey);\n        if (Reflect.hasOwnMetadata(METADATA_KEY.POST_CONSTRUCT, target.constructor)) {\n            throw new Error(ERRORS_MSGS.MULTIPLE_POST_CONSTRUCT_METHODS);\n        }\n        Reflect.defineMetadata(METADATA_KEY.POST_CONSTRUCT, metadata, target.constructor);\n    };\n}\nexports.postConstruct = postConstruct;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiBindToService = function (container) {\n    return function (service) {\n        return function () {\n            var types = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                types[_i] = arguments[_i];\n            }\n            return types.forEach(function (t) { return container.bind(t).toService(service); });\n        };\n    };\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst RoutableTile_1 = require(\"./RoutableTile\");\nclass RoutableTileSet extends RoutableTile_1.RoutableTile {\n    constructor(tiles, id) {\n        let nodes = new Array();\n        let ways = new Array();\n        for (const tile of tiles) {\n            nodes = nodes.concat(...tile.getNodes());\n            ways = ways.concat(...tile.getWays());\n        }\n        super(id, new Set(nodes), new Set(ways));\n        this.tiles = tiles;\n    }\n}\nexports.RoutableTileSet = RoutableTileSet;\n//# sourceMappingURL=RoutableTileSet.js.map","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var _typeof = require(\"../helpers/typeof\");\n\nvar assertThisInitialized = require(\"./assertThisInitialized\");\n\nfunction _possibleConstructorReturn(self, call) {\n  if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) {\n    return call;\n  }\n\n  return assertThisInitialized(self);\n}\n\nmodule.exports = _possibleConstructorReturn;","function _typeof(obj) {\n  \"@babel/helpers - typeof\";\n\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return typeof obj;\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;","function _assertThisInitialized(self) {\n  if (self === void 0) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return self;\n}\n\nmodule.exports = _assertThisInitialized;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","var haversine = (function () {\n  var RADII = {\n    km:    6371,\n    mile:  3960,\n    meter: 6371000,\n    nmi:   3440\n  }\n\n  // convert to radians\n  var toRad = function (num) {\n    return num * Math.PI / 180\n  }\n\n  // convert coordinates to standard format based on the passed format option\n  var convertCoordinates = function (format, coordinates) {\n    switch (format) {\n    case '[lat,lon]':\n      return { latitude: coordinates[0], longitude: coordinates[1] }\n    case '[lon,lat]':\n      return { latitude: coordinates[1], longitude: coordinates[0] }\n    case '{lon,lat}':\n      return { latitude: coordinates.lat, longitude: coordinates.lon }\n    case '{lat,lng}':\n      return { latitude: coordinates.lat, longitude: coordinates.lng }\n    case 'geojson':\n      return { latitude: coordinates.geometry.coordinates[1], longitude: coordinates.geometry.coordinates[0] }\n    default:\n      return coordinates\n    }\n  }\n\n  return function haversine (startCoordinates, endCoordinates, options) {\n    options   = options || {}\n\n    var R = options.unit in RADII\n      ? RADII[options.unit]\n      : RADII.km\n\n    var start = convertCoordinates(options.format, startCoordinates)\n    var end = convertCoordinates(options.format, endCoordinates)\n\n    var dLat = toRad(end.latitude - start.latitude)\n    var dLon = toRad(end.longitude - start.longitude)\n    var lat1 = toRad(start.latitude)\n    var lat2 = toRad(end.latitude)\n\n    var a = Math.sin(dLat/2) * Math.sin(dLat/2) +\n            Math.sin(dLon/2) * Math.sin(dLon/2) * Math.cos(lat1) * Math.cos(lat2)\n    var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1-a))\n\n    if (options.threshold) {\n      return options.threshold > (R * c)\n    }\n\n    return R * c\n  }\n\n})()\n\nif (typeof module !== 'undefined' && module.exports) {\n  module.exports = haversine\n}\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","(function (global, undefined) {\n    \"use strict\";\n\n    if (global.setImmediate) {\n        return;\n    }\n\n    var nextHandle = 1; // Spec says greater than zero\n    var tasksByHandle = {};\n    var currentlyRunningATask = false;\n    var doc = global.document;\n    var registerImmediate;\n\n    function setImmediate(callback) {\n      // Callback can either be a function or a string\n      if (typeof callback !== \"function\") {\n        callback = new Function(\"\" + callback);\n      }\n      // Copy function arguments\n      var args = new Array(arguments.length - 1);\n      for (var i = 0; i < args.length; i++) {\n          args[i] = arguments[i + 1];\n      }\n      // Store and register the task\n      var task = { callback: callback, args: args };\n      tasksByHandle[nextHandle] = task;\n      registerImmediate(nextHandle);\n      return nextHandle++;\n    }\n\n    function clearImmediate(handle) {\n        delete tasksByHandle[handle];\n    }\n\n    function run(task) {\n        var callback = task.callback;\n        var args = task.args;\n        switch (args.length) {\n        case 0:\n            callback();\n            break;\n        case 1:\n            callback(args[0]);\n            break;\n        case 2:\n            callback(args[0], args[1]);\n            break;\n        case 3:\n            callback(args[0], args[1], args[2]);\n            break;\n        default:\n            callback.apply(undefined, args);\n            break;\n        }\n    }\n\n    function runIfPresent(handle) {\n        // From the spec: \"Wait until any invocations of this algorithm started before this one have completed.\"\n        // So if we're currently running a task, we'll need to delay this invocation.\n        if (currentlyRunningATask) {\n            // Delay by doing a setTimeout. setImmediate was tried instead, but in Firefox 7 it generated a\n            // \"too much recursion\" error.\n            setTimeout(runIfPresent, 0, handle);\n        } else {\n            var task = tasksByHandle[handle];\n            if (task) {\n                currentlyRunningATask = true;\n                try {\n                    run(task);\n                } finally {\n                    clearImmediate(handle);\n                    currentlyRunningATask = false;\n                }\n            }\n        }\n    }\n\n    function installNextTickImplementation() {\n        registerImmediate = function(handle) {\n            process.nextTick(function () { runIfPresent(handle); });\n        };\n    }\n\n    function canUsePostMessage() {\n        // The test against `importScripts` prevents this implementation from being installed inside a web worker,\n        // where `global.postMessage` means something completely different and can't be used for this purpose.\n        if (global.postMessage && !global.importScripts) {\n            var postMessageIsAsynchronous = true;\n            var oldOnMessage = global.onmessage;\n            global.onmessage = function() {\n                postMessageIsAsynchronous = false;\n            };\n            global.postMessage(\"\", \"*\");\n            global.onmessage = oldOnMessage;\n            return postMessageIsAsynchronous;\n        }\n    }\n\n    function installPostMessageImplementation() {\n        // Installs an event handler on `global` for the `message` event: see\n        // * https://developer.mozilla.org/en/DOM/window.postMessage\n        // * http://www.whatwg.org/specs/web-apps/current-work/multipage/comms.html#crossDocumentMessages\n\n        var messagePrefix = \"setImmediate$\" + Math.random() + \"$\";\n        var onGlobalMessage = function(event) {\n            if (event.source === global &&\n                typeof event.data === \"string\" &&\n                event.data.indexOf(messagePrefix) === 0) {\n                runIfPresent(+event.data.slice(messagePrefix.length));\n            }\n        };\n\n        if (global.addEventListener) {\n            global.addEventListener(\"message\", onGlobalMessage, false);\n        } else {\n            global.attachEvent(\"onmessage\", onGlobalMessage);\n        }\n\n        registerImmediate = function(handle) {\n            global.postMessage(messagePrefix + handle, \"*\");\n        };\n    }\n\n    function installMessageChannelImplementation() {\n        var channel = new MessageChannel();\n        channel.port1.onmessage = function(event) {\n            var handle = event.data;\n            runIfPresent(handle);\n        };\n\n        registerImmediate = function(handle) {\n            channel.port2.postMessage(handle);\n        };\n    }\n\n    function installReadyStateChangeImplementation() {\n        var html = doc.documentElement;\n        registerImmediate = function(handle) {\n            // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n            // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n            var script = doc.createElement(\"script\");\n            script.onreadystatechange = function () {\n                runIfPresent(handle);\n                script.onreadystatechange = null;\n                html.removeChild(script);\n                script = null;\n            };\n            html.appendChild(script);\n        };\n    }\n\n    function installSetTimeoutImplementation() {\n        registerImmediate = function(handle) {\n            setTimeout(runIfPresent, 0, handle);\n        };\n    }\n\n    // If supported, we should attach to the prototype of global, since that is where setTimeout et al. live.\n    var attachTo = Object.getPrototypeOf && Object.getPrototypeOf(global);\n    attachTo = attachTo && attachTo.setTimeout ? attachTo : global;\n\n    // Don't get fooled by e.g. browserify environments.\n    if ({}.toString.call(global.process) === \"[object process]\") {\n        // For Node.js before 0.9\n        installNextTickImplementation();\n\n    } else if (canUsePostMessage()) {\n        // For non-IE10 modern browsers\n        installPostMessageImplementation();\n\n    } else if (global.MessageChannel) {\n        // For web workers, where supported\n        installMessageChannelImplementation();\n\n    } else if (doc && \"onreadystatechange\" in doc.createElement(\"script\")) {\n        // For IE 68\n        installReadyStateChangeImplementation();\n\n    } else {\n        // For older browsers\n        installSetTimeoutImplementation();\n    }\n\n    attachTo.setImmediate = setImmediate;\n    attachTo.clearImmediate = clearImmediate;\n}(typeof self === \"undefined\" ? typeof global === \"undefined\" ? this : global : self));\n","/*! @license 2013 Ruben Verborgh, 2016 Pieter Colpaert - Data Science Lab / iMinds / Ghent University */\n/** A HttpFetcher downloads documents through HTTP. This is the browser implementation */\n\nvar q = require('q'),\n  http = require('http'),\n  https = require('https'),\n  util = require('util'),\n  URLParser = require('url'),\n  EventEmitter = require('events');\n\n// Creates a new HttpFetcher - maxParallel is handled by the browser, so we'll ignore it\nfunction HttpFetcher(accept, customHeaders) {\n  EventEmitter.call(this);\n  this._accept = accept || 'application/ld+json;q=1.0';\n  this._customHeaders = customHeaders || {};\n}\n\nutil.inherits(HttpFetcher, EventEmitter);\n\n// Returns a promise for the HTTP GET request's result\nHttpFetcher.prototype.get = function (url) {\n  return this.request(url, 'GET');\n};\n\n// Returns a promise for the HTTP request's result\nHttpFetcher.prototype.request = function (url, methodName) {\n  this.emit('request', url);\n  var method = methodName || 'GET', requestId = methodName + url;\n\n  var self = this, deferred = q.defer();\n  var parsedUrl = URLParser.parse(url);\n  var headers = { 'Accept': this._accept };\n  if (Object.keys(self._customHeaders).length > 0) {\n    for (let [k, v] of Object.entries(self._customHeaders)) {\n      headers[k] = v;\n    }\n  }\n  var settings = { hostname: parsedUrl.hostname, port: parsedUrl.port, path: parsedUrl.path, headers: headers, withCredentials: false, method: method };\n\n  var executionResponse = function (res) {\n    var responseStream = res;\n    var responseBody = '';\n    var chunks = [];\n    var totalBytes = 0;\n    responseStream.on('data', function (chunk) {\n      totalBytes += chunk.length;\n      chunks.push(chunk);\n    });\n    res.on('error', function (error) {\n      onResponse(error);\n    });\n    responseStream.on('end', function () {\n      //TODO: this count is after extraction from e.g., gzip...\n      self.emit('downloaded', { url: url, totalBytes: totalBytes });\n      onResponse(null, res, chunks.join(''));\n    })\n  };\n  var request = {};\n  if (parsedUrl.protocol === 'https:') {\n    request = https.request(settings, executionResponse);\n  } else if (parsedUrl.protocol === 'http:') {\n    request = http.request(settings, executionResponse);\n  } else {\n    console.error('Only http or https supported. Not ' + parsedUrl.protocol);\n  }\n  request.on('error', function (e) {\n    deferred.reject(e);\n  });\n  request.end(null);\n\n  // Response callback\n  function onResponse(error, response, body) {\n    // Hack to get the in browser response URL after redirects\n    // Different responses with 2 different modes: fetch and xhr\n    // See also: https://github.com/jhiesey/stream-http/issues/39\n    var responseUrl;\n    if (request._xhr) {\n      responseUrl = request._xhr.responseURL;\n    } else {\n      responseUrl = request._fetchResponse.url;\n    }\n    self.emit('response', responseUrl);\n    // Return result through the deferred\n    if (error) {\n      return deferred.reject(new Error(error));\n    }\n    if (response.statusCode >= 500) {\n      return deferred.reject(new Error('Request failed: ' + url));\n    }\n    var contentType = /^[^;]+/.exec(response.headers['content-type'] || 'text/html')[0];\n    // for the url, take the last redirect url that can be found if there was a redirect\n    deferred.resolve({ url: responseUrl, type: contentType, body: body, status: response.statusCode });\n  }\n  return deferred.promise;\n};\n\n// Cancels all pending requests\nHttpFetcher.prototype.cancelAll = function () {\n};\n\nmodule.exports = HttpFetcher;\n","var capability = require('./capability')\nvar inherits = require('inherits')\nvar response = require('./response')\nvar stream = require('readable-stream')\nvar toArrayBuffer = require('to-arraybuffer')\n\nvar IncomingMessage = response.IncomingMessage\nvar rStates = response.readyStates\n\nfunction decideMode (preferBinary, useFetch) {\n\tif (capability.fetch && useFetch) {\n\t\treturn 'fetch'\n\t} else if (capability.mozchunkedarraybuffer) {\n\t\treturn 'moz-chunked-arraybuffer'\n\t} else if (capability.msstream) {\n\t\treturn 'ms-stream'\n\t} else if (capability.arraybuffer && preferBinary) {\n\t\treturn 'arraybuffer'\n\t} else if (capability.vbArray && preferBinary) {\n\t\treturn 'text:vbarray'\n\t} else {\n\t\treturn 'text'\n\t}\n}\n\nvar ClientRequest = module.exports = function (opts) {\n\tvar self = this\n\tstream.Writable.call(self)\n\n\tself._opts = opts\n\tself._body = []\n\tself._headers = {}\n\tif (opts.auth)\n\t\tself.setHeader('Authorization', 'Basic ' + new Buffer(opts.auth).toString('base64'))\n\tObject.keys(opts.headers).forEach(function (name) {\n\t\tself.setHeader(name, opts.headers[name])\n\t})\n\n\tvar preferBinary\n\tvar useFetch = true\n\tif (opts.mode === 'disable-fetch' || ('requestTimeout' in opts && !capability.abortController)) {\n\t\t// If the use of XHR should be preferred. Not typically needed.\n\t\tuseFetch = false\n\t\tpreferBinary = true\n\t} else if (opts.mode === 'prefer-streaming') {\n\t\t// If streaming is a high priority but binary compatibility and\n\t\t// the accuracy of the 'content-type' header aren't\n\t\tpreferBinary = false\n\t} else if (opts.mode === 'allow-wrong-content-type') {\n\t\t// If streaming is more important than preserving the 'content-type' header\n\t\tpreferBinary = !capability.overrideMimeType\n\t} else if (!opts.mode || opts.mode === 'default' || opts.mode === 'prefer-fast') {\n\t\t// Use binary if text streaming may corrupt data or the content-type header, or for speed\n\t\tpreferBinary = true\n\t} else {\n\t\tthrow new Error('Invalid value for opts.mode')\n\t}\n\tself._mode = decideMode(preferBinary, useFetch)\n\tself._fetchTimer = null\n\n\tself.on('finish', function () {\n\t\tself._onFinish()\n\t})\n}\n\ninherits(ClientRequest, stream.Writable)\n\nClientRequest.prototype.setHeader = function (name, value) {\n\tvar self = this\n\tvar lowerName = name.toLowerCase()\n\t// This check is not necessary, but it prevents warnings from browsers about setting unsafe\n\t// headers. To be honest I'm not entirely sure hiding these warnings is a good thing, but\n\t// http-browserify did it, so I will too.\n\tif (unsafeHeaders.indexOf(lowerName) !== -1)\n\t\treturn\n\n\tself._headers[lowerName] = {\n\t\tname: name,\n\t\tvalue: value\n\t}\n}\n\nClientRequest.prototype.getHeader = function (name) {\n\tvar header = this._headers[name.toLowerCase()]\n\tif (header)\n\t\treturn header.value\n\treturn null\n}\n\nClientRequest.prototype.removeHeader = function (name) {\n\tvar self = this\n\tdelete self._headers[name.toLowerCase()]\n}\n\nClientRequest.prototype._onFinish = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\tvar opts = self._opts\n\n\tvar headersObj = self._headers\n\tvar body = null\n\tif (opts.method !== 'GET' && opts.method !== 'HEAD') {\n\t\tif (capability.arraybuffer) {\n\t\t\tbody = toArrayBuffer(Buffer.concat(self._body))\n\t\t} else if (capability.blobConstructor) {\n\t\t\tbody = new global.Blob(self._body.map(function (buffer) {\n\t\t\t\treturn toArrayBuffer(buffer)\n\t\t\t}), {\n\t\t\t\ttype: (headersObj['content-type'] || {}).value || ''\n\t\t\t})\n\t\t} else {\n\t\t\t// get utf8 string\n\t\t\tbody = Buffer.concat(self._body).toString()\n\t\t}\n\t}\n\n\t// create flattened list of headers\n\tvar headersList = []\n\tObject.keys(headersObj).forEach(function (keyName) {\n\t\tvar name = headersObj[keyName].name\n\t\tvar value = headersObj[keyName].value\n\t\tif (Array.isArray(value)) {\n\t\t\tvalue.forEach(function (v) {\n\t\t\t\theadersList.push([name, v])\n\t\t\t})\n\t\t} else {\n\t\t\theadersList.push([name, value])\n\t\t}\n\t})\n\n\tif (self._mode === 'fetch') {\n\t\tvar signal = null\n\t\tvar fetchTimer = null\n\t\tif (capability.abortController) {\n\t\t\tvar controller = new AbortController()\n\t\t\tsignal = controller.signal\n\t\t\tself._fetchAbortController = controller\n\n\t\t\tif ('requestTimeout' in opts && opts.requestTimeout !== 0) {\n\t\t\t\tself._fetchTimer = global.setTimeout(function () {\n\t\t\t\t\tself.emit('requestTimeout')\n\t\t\t\t\tif (self._fetchAbortController)\n\t\t\t\t\t\tself._fetchAbortController.abort()\n\t\t\t\t}, opts.requestTimeout)\n\t\t\t}\n\t\t}\n\n\t\tglobal.fetch(self._opts.url, {\n\t\t\tmethod: self._opts.method,\n\t\t\theaders: headersList,\n\t\t\tbody: body || undefined,\n\t\t\tmode: 'cors',\n\t\t\tcredentials: opts.withCredentials ? 'include' : 'same-origin',\n\t\t\tsignal: signal\n\t\t}).then(function (response) {\n\t\t\tself._fetchResponse = response\n\t\t\tself._connect()\n\t\t}, function (reason) {\n\t\t\tglobal.clearTimeout(self._fetchTimer)\n\t\t\tif (!self._destroyed)\n\t\t\t\tself.emit('error', reason)\n\t\t})\n\t} else {\n\t\tvar xhr = self._xhr = new global.XMLHttpRequest()\n\t\ttry {\n\t\t\txhr.open(self._opts.method, self._opts.url, true)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\n\t\t// Can't set responseType on really old browsers\n\t\tif ('responseType' in xhr)\n\t\t\txhr.responseType = self._mode.split(':')[0]\n\n\t\tif ('withCredentials' in xhr)\n\t\t\txhr.withCredentials = !!opts.withCredentials\n\n\t\tif (self._mode === 'text' && 'overrideMimeType' in xhr)\n\t\t\txhr.overrideMimeType('text/plain; charset=x-user-defined')\n\n\t\tif ('requestTimeout' in opts) {\n\t\t\txhr.timeout = opts.requestTimeout\n\t\t\txhr.ontimeout = function () {\n\t\t\t\tself.emit('requestTimeout')\n\t\t\t}\n\t\t}\n\n\t\theadersList.forEach(function (header) {\n\t\t\txhr.setRequestHeader(header[0], header[1])\n\t\t})\n\n\t\tself._response = null\n\t\txhr.onreadystatechange = function () {\n\t\t\tswitch (xhr.readyState) {\n\t\t\t\tcase rStates.LOADING:\n\t\t\t\tcase rStates.DONE:\n\t\t\t\t\tself._onXHRProgress()\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t\t// Necessary for streaming in Firefox, since xhr.response is ONLY defined\n\t\t// in onprogress, not in onreadystatechange with xhr.readyState = 3\n\t\tif (self._mode === 'moz-chunked-arraybuffer') {\n\t\t\txhr.onprogress = function () {\n\t\t\t\tself._onXHRProgress()\n\t\t\t}\n\t\t}\n\n\t\txhr.onerror = function () {\n\t\t\tif (self._destroyed)\n\t\t\t\treturn\n\t\t\tself.emit('error', new Error('XHR error'))\n\t\t}\n\n\t\ttry {\n\t\t\txhr.send(body)\n\t\t} catch (err) {\n\t\t\tprocess.nextTick(function () {\n\t\t\t\tself.emit('error', err)\n\t\t\t})\n\t\t\treturn\n\t\t}\n\t}\n}\n\n/**\n * Checks if xhr.status is readable and non-zero, indicating no error.\n * Even though the spec says it should be available in readyState 3,\n * accessing it throws an exception in IE8\n */\nfunction statusValid (xhr) {\n\ttry {\n\t\tvar status = xhr.status\n\t\treturn (status !== null && status !== 0)\n\t} catch (e) {\n\t\treturn false\n\t}\n}\n\nClientRequest.prototype._onXHRProgress = function () {\n\tvar self = this\n\n\tif (!statusValid(self._xhr) || self._destroyed)\n\t\treturn\n\n\tif (!self._response)\n\t\tself._connect()\n\n\tself._response._onXHRProgress()\n}\n\nClientRequest.prototype._connect = function () {\n\tvar self = this\n\n\tif (self._destroyed)\n\t\treturn\n\n\tself._response = new IncomingMessage(self._xhr, self._fetchResponse, self._mode, self._fetchTimer)\n\tself._response.on('error', function(err) {\n\t\tself.emit('error', err)\n\t})\n\n\tself.emit('response', self._response)\n}\n\nClientRequest.prototype._write = function (chunk, encoding, cb) {\n\tvar self = this\n\n\tself._body.push(chunk)\n\tcb()\n}\n\nClientRequest.prototype.abort = ClientRequest.prototype.destroy = function () {\n\tvar self = this\n\tself._destroyed = true\n\tglobal.clearTimeout(self._fetchTimer)\n\tif (self._response)\n\t\tself._response._destroyed = true\n\tif (self._xhr)\n\t\tself._xhr.abort()\n\telse if (self._fetchAbortController)\n\t\tself._fetchAbortController.abort()\n}\n\nClientRequest.prototype.end = function (data, encoding, cb) {\n\tvar self = this\n\tif (typeof data === 'function') {\n\t\tcb = data\n\t\tdata = undefined\n\t}\n\n\tstream.Writable.prototype.end.call(self, data, encoding, cb)\n}\n\nClientRequest.prototype.flushHeaders = function () {}\nClientRequest.prototype.setTimeout = function () {}\nClientRequest.prototype.setNoDelay = function () {}\nClientRequest.prototype.setSocketKeepAlive = function () {}\n\n// Taken from http://www.w3.org/TR/XMLHttpRequest/#the-setrequestheader%28%29-method\nvar unsafeHeaders = [\n\t'accept-charset',\n\t'accept-encoding',\n\t'access-control-request-headers',\n\t'access-control-request-method',\n\t'connection',\n\t'content-length',\n\t'cookie',\n\t'cookie2',\n\t'date',\n\t'dnt',\n\t'expect',\n\t'host',\n\t'keep-alive',\n\t'origin',\n\t'referer',\n\t'te',\n\t'trailer',\n\t'transfer-encoding',\n\t'upgrade',\n\t'via'\n]\n","'use strict'\n\nexports.byteLength = byteLength\nexports.toByteArray = toByteArray\nexports.fromByteArray = fromByteArray\n\nvar lookup = []\nvar revLookup = []\nvar Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array\n\nvar code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i]\n  revLookup[code.charCodeAt(i)] = i\n}\n\n// Support decoding URL-safe base64 strings, as Node.js does.\n// See: https://en.wikipedia.org/wiki/Base64#URL_applications\nrevLookup['-'.charCodeAt(0)] = 62\nrevLookup['_'.charCodeAt(0)] = 63\n\nfunction getLens (b64) {\n  var len = b64.length\n\n  if (len % 4 > 0) {\n    throw new Error('Invalid string. Length must be a multiple of 4')\n  }\n\n  // Trim off extra bytes after placeholder bytes are found\n  // See: https://github.com/beatgammit/base64-js/issues/42\n  var validLen = b64.indexOf('=')\n  if (validLen === -1) validLen = len\n\n  var placeHoldersLen = validLen === len\n    ? 0\n    : 4 - (validLen % 4)\n\n  return [validLen, placeHoldersLen]\n}\n\n// base64 is 4/3 + up to two characters of the original data\nfunction byteLength (b64) {\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction _byteLength (b64, validLen, placeHoldersLen) {\n  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen\n}\n\nfunction toByteArray (b64) {\n  var tmp\n  var lens = getLens(b64)\n  var validLen = lens[0]\n  var placeHoldersLen = lens[1]\n\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))\n\n  var curByte = 0\n\n  // if there are placeholders, only get up to the last complete 4 chars\n  var len = placeHoldersLen > 0\n    ? validLen - 4\n    : validLen\n\n  var i\n  for (i = 0; i < len; i += 4) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 18) |\n      (revLookup[b64.charCodeAt(i + 1)] << 12) |\n      (revLookup[b64.charCodeAt(i + 2)] << 6) |\n      revLookup[b64.charCodeAt(i + 3)]\n    arr[curByte++] = (tmp >> 16) & 0xFF\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 2) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 2) |\n      (revLookup[b64.charCodeAt(i + 1)] >> 4)\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  if (placeHoldersLen === 1) {\n    tmp =\n      (revLookup[b64.charCodeAt(i)] << 10) |\n      (revLookup[b64.charCodeAt(i + 1)] << 4) |\n      (revLookup[b64.charCodeAt(i + 2)] >> 2)\n    arr[curByte++] = (tmp >> 8) & 0xFF\n    arr[curByte++] = tmp & 0xFF\n  }\n\n  return arr\n}\n\nfunction tripletToBase64 (num) {\n  return lookup[num >> 18 & 0x3F] +\n    lookup[num >> 12 & 0x3F] +\n    lookup[num >> 6 & 0x3F] +\n    lookup[num & 0x3F]\n}\n\nfunction encodeChunk (uint8, start, end) {\n  var tmp\n  var output = []\n  for (var i = start; i < end; i += 3) {\n    tmp =\n      ((uint8[i] << 16) & 0xFF0000) +\n      ((uint8[i + 1] << 8) & 0xFF00) +\n      (uint8[i + 2] & 0xFF)\n    output.push(tripletToBase64(tmp))\n  }\n  return output.join('')\n}\n\nfunction fromByteArray (uint8) {\n  var tmp\n  var len = uint8.length\n  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes\n  var parts = []\n  var maxChunkLength = 16383 // must be multiple of 3\n\n  // go through the array every three bytes, we'll deal with trailing stuff later\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(\n      uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)\n    ))\n  }\n\n  // pad the end with zeros, but make sure to not forget the extra bytes\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 2] +\n      lookup[(tmp << 4) & 0x3F] +\n      '=='\n    )\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1]\n    parts.push(\n      lookup[tmp >> 10] +\n      lookup[(tmp >> 4) & 0x3F] +\n      lookup[(tmp << 2) & 0x3F] +\n      '='\n    )\n  }\n\n  return parts.join('')\n}\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = (nBytes * 8) - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = ((value * c) - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","'use strict';\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar Buffer = require('safe-buffer').Buffer;\nvar util = require('util');\n\nfunction copyBuffer(src, target, offset) {\n  src.copy(target, offset);\n}\n\nmodule.exports = function () {\n  function BufferList() {\n    _classCallCheck(this, BufferList);\n\n    this.head = null;\n    this.tail = null;\n    this.length = 0;\n  }\n\n  BufferList.prototype.push = function push(v) {\n    var entry = { data: v, next: null };\n    if (this.length > 0) this.tail.next = entry;else this.head = entry;\n    this.tail = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.unshift = function unshift(v) {\n    var entry = { data: v, next: this.head };\n    if (this.length === 0) this.tail = entry;\n    this.head = entry;\n    ++this.length;\n  };\n\n  BufferList.prototype.shift = function shift() {\n    if (this.length === 0) return;\n    var ret = this.head.data;\n    if (this.length === 1) this.head = this.tail = null;else this.head = this.head.next;\n    --this.length;\n    return ret;\n  };\n\n  BufferList.prototype.clear = function clear() {\n    this.head = this.tail = null;\n    this.length = 0;\n  };\n\n  BufferList.prototype.join = function join(s) {\n    if (this.length === 0) return '';\n    var p = this.head;\n    var ret = '' + p.data;\n    while (p = p.next) {\n      ret += s + p.data;\n    }return ret;\n  };\n\n  BufferList.prototype.concat = function concat(n) {\n    if (this.length === 0) return Buffer.alloc(0);\n    if (this.length === 1) return this.head.data;\n    var ret = Buffer.allocUnsafe(n >>> 0);\n    var p = this.head;\n    var i = 0;\n    while (p) {\n      copyBuffer(p.data, ret, i);\n      i += p.data.length;\n      p = p.next;\n    }\n    return ret;\n  };\n\n  return BufferList;\n}();\n\nif (util && util.inspect && util.inspect.custom) {\n  module.exports.prototype[util.inspect.custom] = function () {\n    var obj = util.inspect({ length: this.length });\n    return this.constructor.name + ' ' + obj;\n  };\n}","\n/**\n * Module exports.\n */\n\nmodule.exports = deprecate;\n\n/**\n * Mark that a method should not be used.\n * Returns a modified function which warns once by default.\n *\n * If `localStorage.noDeprecation = true` is set, then it is a no-op.\n *\n * If `localStorage.throwDeprecation = true` is set, then deprecated functions\n * will throw an Error when invoked.\n *\n * If `localStorage.traceDeprecation = true` is set, then deprecated functions\n * will invoke `console.trace()` instead of `console.error()`.\n *\n * @param {Function} fn - the function to deprecate\n * @param {String} msg - the string to print to the console when `fn` is invoked\n * @returns {Function} a new \"deprecated\" version of `fn`\n * @api public\n */\n\nfunction deprecate (fn, msg) {\n  if (config('noDeprecation')) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (config('throwDeprecation')) {\n        throw new Error(msg);\n      } else if (config('traceDeprecation')) {\n        console.trace(msg);\n      } else {\n        console.warn(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n}\n\n/**\n * Checks `localStorage` for boolean values for the given `name`.\n *\n * @param {String} name\n * @returns {Boolean}\n * @api private\n */\n\nfunction config (name) {\n  // accessing global.localStorage can trigger a DOMException in sandboxed iframes\n  try {\n    if (!global.localStorage) return false;\n  } catch (_) {\n    return false;\n  }\n  var val = global.localStorage[name];\n  if (null == val) return false;\n  return String(val).toLowerCase() === 'true';\n}\n","/* eslint-disable node/no-deprecated-api */\nvar buffer = require('buffer')\nvar Buffer = buffer.Buffer\n\n// alternative to using Object.keys for old browsers\nfunction copyProps (src, dst) {\n  for (var key in src) {\n    dst[key] = src[key]\n  }\n}\nif (Buffer.from && Buffer.alloc && Buffer.allocUnsafe && Buffer.allocUnsafeSlow) {\n  module.exports = buffer\n} else {\n  // Copy properties from require('buffer')\n  copyProps(buffer, exports)\n  exports.Buffer = SafeBuffer\n}\n\nfunction SafeBuffer (arg, encodingOrOffset, length) {\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.prototype = Object.create(Buffer.prototype)\n\n// Copy static methods from Buffer\ncopyProps(Buffer, SafeBuffer)\n\nSafeBuffer.from = function (arg, encodingOrOffset, length) {\n  if (typeof arg === 'number') {\n    throw new TypeError('Argument must not be a number')\n  }\n  return Buffer(arg, encodingOrOffset, length)\n}\n\nSafeBuffer.alloc = function (size, fill, encoding) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  var buf = Buffer(size)\n  if (fill !== undefined) {\n    if (typeof encoding === 'string') {\n      buf.fill(fill, encoding)\n    } else {\n      buf.fill(fill)\n    }\n  } else {\n    buf.fill(0)\n  }\n  return buf\n}\n\nSafeBuffer.allocUnsafe = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return Buffer(size)\n}\n\nSafeBuffer.allocUnsafeSlow = function (size) {\n  if (typeof size !== 'number') {\n    throw new TypeError('Argument must be a number')\n  }\n  return buffer.SlowBuffer(size)\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n// a passthrough stream.\n// basically just the most minimal sort of Transform stream.\n// Every written chunk gets output as-is.\n\n'use strict';\n\nmodule.exports = PassThrough;\n\nvar Transform = require('./_stream_transform');\n\n/*<replacement>*/\nvar util = Object.create(require('core-util-is'));\nutil.inherits = require('inherits');\n/*</replacement>*/\n\nutil.inherits(PassThrough, Transform);\n\nfunction PassThrough(options) {\n  if (!(this instanceof PassThrough)) return new PassThrough(options);\n\n  Transform.call(this, options);\n}\n\nPassThrough.prototype._transform = function (chunk, encoding, cb) {\n  cb(null, chunk);\n};","var Buffer = require('buffer').Buffer\n\nmodule.exports = function (buf) {\n\t// If the buffer is backed by a Uint8Array, a faster version will work\n\tif (buf instanceof Uint8Array) {\n\t\t// If the buffer isn't a subarray, return the underlying ArrayBuffer\n\t\tif (buf.byteOffset === 0 && buf.byteLength === buf.buffer.byteLength) {\n\t\t\treturn buf.buffer\n\t\t} else if (typeof buf.buffer.slice === 'function') {\n\t\t\t// Otherwise we need to get a proper copy\n\t\t\treturn buf.buffer.slice(buf.byteOffset, buf.byteOffset + buf.byteLength)\n\t\t}\n\t}\n\n\tif (Buffer.isBuffer(buf)) {\n\t\t// This is the slow version that will work with any Buffer\n\t\t// implementation (even in old browsers)\n\t\tvar arrayCopy = new Uint8Array(buf.length)\n\t\tvar len = buf.length\n\t\tfor (var i = 0; i < len; i++) {\n\t\t\tarrayCopy[i] = buf[i]\n\t\t}\n\t\treturn arrayCopy.buffer\n\t} else {\n\t\tthrow new Error('Argument must be a Buffer')\n\t}\n}\n","module.exports = extend\n\nvar hasOwnProperty = Object.prototype.hasOwnProperty;\n\nfunction extend() {\n    var target = {}\n\n    for (var i = 0; i < arguments.length; i++) {\n        var source = arguments[i]\n\n        for (var key in source) {\n            if (hasOwnProperty.call(source, key)) {\n                target[key] = source[key]\n            }\n        }\n    }\n\n    return target\n}\n","module.exports = {\n  \"100\": \"Continue\",\n  \"101\": \"Switching Protocols\",\n  \"102\": \"Processing\",\n  \"200\": \"OK\",\n  \"201\": \"Created\",\n  \"202\": \"Accepted\",\n  \"203\": \"Non-Authoritative Information\",\n  \"204\": \"No Content\",\n  \"205\": \"Reset Content\",\n  \"206\": \"Partial Content\",\n  \"207\": \"Multi-Status\",\n  \"208\": \"Already Reported\",\n  \"226\": \"IM Used\",\n  \"300\": \"Multiple Choices\",\n  \"301\": \"Moved Permanently\",\n  \"302\": \"Found\",\n  \"303\": \"See Other\",\n  \"304\": \"Not Modified\",\n  \"305\": \"Use Proxy\",\n  \"307\": \"Temporary Redirect\",\n  \"308\": \"Permanent Redirect\",\n  \"400\": \"Bad Request\",\n  \"401\": \"Unauthorized\",\n  \"402\": \"Payment Required\",\n  \"403\": \"Forbidden\",\n  \"404\": \"Not Found\",\n  \"405\": \"Method Not Allowed\",\n  \"406\": \"Not Acceptable\",\n  \"407\": \"Proxy Authentication Required\",\n  \"408\": \"Request Timeout\",\n  \"409\": \"Conflict\",\n  \"410\": \"Gone\",\n  \"411\": \"Length Required\",\n  \"412\": \"Precondition Failed\",\n  \"413\": \"Payload Too Large\",\n  \"414\": \"URI Too Long\",\n  \"415\": \"Unsupported Media Type\",\n  \"416\": \"Range Not Satisfiable\",\n  \"417\": \"Expectation Failed\",\n  \"418\": \"I'm a teapot\",\n  \"421\": \"Misdirected Request\",\n  \"422\": \"Unprocessable Entity\",\n  \"423\": \"Locked\",\n  \"424\": \"Failed Dependency\",\n  \"425\": \"Unordered Collection\",\n  \"426\": \"Upgrade Required\",\n  \"428\": \"Precondition Required\",\n  \"429\": \"Too Many Requests\",\n  \"431\": \"Request Header Fields Too Large\",\n  \"451\": \"Unavailable For Legal Reasons\",\n  \"500\": \"Internal Server Error\",\n  \"501\": \"Not Implemented\",\n  \"502\": \"Bad Gateway\",\n  \"503\": \"Service Unavailable\",\n  \"504\": \"Gateway Timeout\",\n  \"505\": \"HTTP Version Not Supported\",\n  \"506\": \"Variant Also Negotiates\",\n  \"507\": \"Insufficient Storage\",\n  \"508\": \"Loop Detected\",\n  \"509\": \"Bandwidth Limit Exceeded\",\n  \"510\": \"Not Extended\",\n  \"511\": \"Network Authentication Required\"\n}\n","/*! https://mths.be/punycode v1.4.1 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow new RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * https://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.4.1',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) {\n\t\t\t// in Node.js, io.js, or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else {\n\t\t\t// in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else {\n\t\t// in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","var http = require('http')\nvar url = require('url')\n\nvar https = module.exports\n\nfor (var key in http) {\n  if (http.hasOwnProperty(key)) https[key] = http[key]\n}\n\nhttps.request = function (params, cb) {\n  params = validateParams(params)\n  return http.request.call(this, params, cb)\n}\n\nhttps.get = function (params, cb) {\n  params = validateParams(params)\n  return http.get.call(this, params, cb)\n}\n\nfunction validateParams (params) {\n  if (typeof params === 'string') {\n    params = url.parse(params)\n  }\n  if (!params.protocol) {\n    params.protocol = 'https:'\n  }\n  if (params.protocol !== 'https:') {\n    throw new Error('Protocol \"' + params.protocol + '\" not supported. Expected \"https:\"')\n  }\n  return params\n}\n","module.exports = require('./lib/_stream_writable.js');\n","module.exports = require('./lib/_stream_duplex.js');\n","module.exports = require('./readable').Transform\n","module.exports = require('./readable').PassThrough\n","/**\n * @fileoverview\n *  RDF/XML PARSER\n *\n * Version 0.1\n *  Parser believed to be in full positive RDF/XML parsing compliance\n *  with the possible exception of handling deprecated RDF attributes\n *  appropriately. Parser is believed to comply fully with other W3C\n *  and industry standards where appropriate (DOM, ECMAScript, &c.)\n *\n *  Author: David Sheets <dsheets@mit.edu>\n *\n * W3C SOFTWARE NOTICE AND LICENSE\n * http://www.w3.org/Consortium/Legal/2002/copyright-software-20021231\n * This work (and included software, documentation such as READMEs, or\n * other related items) is being provided by the copyright holders under\n * the following license. By obtaining, using and/or copying this work,\n * you (the licensee) agree that you have read, understood, and will\n * comply with the following terms and conditions.\n *\n * Permission to copy, modify, and distribute this software and its\n * documentation, with or without modification, for any purpose and\n * without fee or royalty is hereby granted, provided that you include\n * the following on ALL copies of the software and documentation or\n * portions thereof, including modifications:\n *\n * 1. The full text of this NOTICE in a location viewable to users of\n * the redistributed or derivative work.\n * 2. Any pre-existing intellectual property disclaimers, notices, or terms and\n * conditions. If none exist, the W3C Software Short Notice should be\n * included (hypertext is preferred, text is permitted) within the body\n * of any redistributed or derivative code.\n * 3. Notice of any changes or modifications to the files, including the\n * date changes were made. (We recommend you provide URIs to the location\n * from which the code is derived.)\n *\n * THIS SOFTWARE AND DOCUMENTATION IS PROVIDED \"AS IS,\" AND COPYRIGHT\n * HOLDERS MAKE NO REPRESENTATIONS OR WARRANTIES, EXPRESS OR IMPLIED,\n * INCLUDING BUT NOT LIMITED TO, WARRANTIES OF MERCHANTABILITY OR FITNESS\n * FOR ANY PARTICULAR PURPOSE OR THAT THE USE OF THE SOFTWARE OR\n * DOCUMENTATION WILL NOT INFRINGE ANY THIRD PARTY PATENTS, COPYRIGHTS,\n * TRADEMARKS OR OTHER RIGHTS.\n *\n * COPYRIGHT HOLDERS WILL NOT BE LIABLE FOR ANY DIRECT, INDIRECT, SPECIAL\n * OR CONSEQUENTIAL DAMAGES ARISING OUT OF ANY USE OF THE SOFTWARE OR\n * DOCUMENTATION.\n *\n * The name and trademarks of copyright holders may NOT be used in\n * advertising or publicity pertaining to the software without specific,\n * written prior permission. Title to copyright in this software and any\n * associated documentation will at all times remain with copyright\n * holders.\n */\n\n/**\n * @class Class defining an RDFParser resource object tied to an RDFStore\n *\n * @author David Sheets <dsheets@mit.edu>\n * @version 0.1\n *\n */\n\nconst uriUtil = {\n  join : require('./uri-join.js')\n};\n\nconst Frame = require('./Frame.js');\nconst DataFactory = require('n3').DataFactory;\n\nclass RDFXMLProcessor {\n\n  /**\n   *\n   * @constructor\n   * @param {RDFJS.DataFactory} factory An RDFJS Factory object that creates the right objects\n   */\n  constructor (factory) {\n    if (factory) {\n      this.factory = factory;\n    } else {\n      this.factory = DataFactory;\n    }\n    \n    /** \n     * Standard namespaces that we know how to handle @final\n     */\n    this.ns = {'RDF': 'http://www.w3.org/1999/02/22-rdf-syntax-ns#', 'RDFS': 'http://www.w3.org/2000/01/rdf-schema#'}\n    \n    /** DOM Level 2 node type magic numbers @final\n     *  @member RDFXMLProcessor\n     */\n    this.nodeType = {'ELEMENT': 1, 'ATTRIBUTE': 2, 'TEXT': 3,\n                     'CDATA_SECTION': 4, 'ENTITY_REFERENCE': 5,\n                     'ENTITY': 6, 'PROCESSING_INSTRUCTION': 7,\n                     'COMMENT': 8, 'DOCUMENT': 9, 'DOCUMENT_TYPE': 10,\n                     'DOCUMENT_FRAGMENT': 11, 'NOTATION': 12}\n    \n    /** Our triple store reference @private */\n    this.bnodes = {} /** A context for context-aware stores @private */\n    this.why = null /** Reification flag */\n    this.reify = false\n  }\n\n  // from the OpenLayers source .. needed to get around IE problems.\n  getAttributeNodeNS (node, uri, name) {\n    var attributeNode = null\n    if (node.getAttributeNodeNS) {\n      attributeNode = node.getAttributeNodeNS(uri, name)\n    } else {\n      var attributes = node.attributes\n      var potentialNode, fullName\n      for (var i = 0;i < attributes.length; ++i) {\n        potentialNode = attributes[i]\n        if (potentialNode.namespaceURI === uri) {\n          fullName = (potentialNode.prefix) ? (potentialNode.prefix + ':' + name) : name\n          if (fullName === potentialNode.nodeName) {\n            attributeNode = potentialNode\n            break\n          }\n        }\n      }\n    }\n    return attributeNode\n  }\n\n  /**\n   * Build our initial scope frame and parse the DOM into triples\n   * @param {DOMTree} document The DOM to parse\n   * @param {String} base The base URL to use\n   * @param {Object} why The context to which this resource belongs\n   * @param {Function} writeTriple The callback to write a triple to the end-user\n   */\n  parse (document, base, graph, writeTriple) {\n    if (!writeTriple) {\n      writeTriple = graph\n      graph = this.factory.defaultGraph()\n    } else {\n      //Make named node of why\n      graph = this.factory.namedNode(graph);\n    }\n    this.writeTriple = (s,p,o,g) => {\n      writeTriple(this.factory.quad(s,p,o,g))\n    }\n    this.finalize = () => {\n      //finalize by sending a null\n      writeTriple(null);\n    }\n    var children = document.childNodes // clean up for the next run\n    this.cleanParser() // figure out the root element\n    var root\n    if (document.nodeType === this.nodeType.DOCUMENT) {\n      for (var c = 0;c < children.length;c++) {\n        if (children[c].nodeType === this.nodeType.ELEMENT) {\n          root = children[c]\n          break\n        }\n      }\n    } else if (document.nodeType === this.nodeType.ELEMENT) {\n      root = document\n    } else {\n      throw new Error(\"RDFXMLProcessor: can't find root in \" + base + '. Halting. ')\n    // return false\n    }\n    this.why = graph // our topmost frame\n    var f = new Frame(this)\n    this.base = base\n    f.base = base\n    f.lang = null // was '' but can't have langs like that 2015 (!)\n    this.parseDOM(this.buildFrame(f, root))\n  }\n\n  parseDOM (frame) {\n    // a DOM utility function used in parsing\n    var rdfid\n    var elementURI = function (el) {\n      var result = ''\n      if (el.namespaceURI == null) {\n        throw new Error('RDF/XML syntax error: No namespace for ' + el.localName + ' in ' + this.base)\n      }\n      if (el.namespaceURI) {\n        result = result + el.namespaceURI\n      }\n      if (el.localName) {\n        result = result + el.localName\n      } else if (el.nodeName) {\n        if (el.nodeName.indexOf(':') >= 0)result = result + el.nodeName.split(':')[1]\n        else result = result + el.nodeName\n      }\n      return result\n    }.bind(this)\n    var dig = true // if we'll dig down in the tree on the next iter\n    while (frame.parent) {\n      var dom = frame.element\n      var attrs = dom.attributes\n      if (dom.nodeType === this.nodeType.TEXT || dom.nodeType === this.nodeType.CDATA_SECTION) {\n        // we have a literal\n        if (frame.parent.nodeType === frame.NODE) {\n          // must have had attributes, store as rdf:value\n          frame.addArc(this.ns.RDF + 'value')\n          frame = this.buildFrame(frame)\n        }\n        frame.addLiteral(dom.nodeValue)\n      } else if (elementURI(dom) !== this.ns.RDF + 'RDF') {\n        // not root\n        if (frame.parent && frame.parent.collection) {\n          // we're a collection element\n          frame.addCollectionArc()\n          frame = this.buildFrame(frame, frame.element)\n          frame.parent.element = null\n        }\n        if (!frame.parent || !frame.parent.nodeType || frame.parent.nodeType === frame.ARC) {\n          // we need a node\n          var about = this.getAttributeNodeNS(dom, this.ns.RDF, 'about')\n          rdfid = this.getAttributeNodeNS(dom, this.ns.RDF, 'ID')\n          if (about && rdfid) {\n            throw new Error('RDFXMLProcessor: ' + dom.nodeName + ' has both rdf:id and rdf:about.' +\n              ' Halting. Only one of these' + ' properties may be specified on a' + ' node.')\n          }\n          if (!about && rdfid) {\n            frame.addNode('#' + rdfid.nodeValue)\n            dom.removeAttributeNode(rdfid)\n          } else if (about == null && rdfid == null) {\n            var bnid = this.getAttributeNodeNS(dom, this.ns.RDF, 'nodeID')\n            if (bnid) {\n              frame.addBNode(bnid.nodeValue)\n              dom.removeAttributeNode(bnid)\n            } else {\n              frame.addBNode()\n            }\n          } else {\n            frame.addNode(about.nodeValue)\n            dom.removeAttributeNode(about)\n          }\n          // Typed nodes\n          var rdftype = this.getAttributeNodeNS(dom, this.ns.RDF, 'type')\n          if (this.ns.RDF + 'Description' !== elementURI(dom)) {\n            rdftype = {'nodeValue': elementURI(dom)}\n          }\n          if (rdftype != null) {\n            this.writeTriple(frame.node, this.factory.namedNode(this.ns.RDF + 'type'), this.factory.namedNode(uriUtil.join(rdftype.nodeValue, frame.base)), this.why)\n            if (rdftype.nodeName) {\n              dom.removeAttributeNode(rdftype)\n            }\n          }\n          // Property Attributes\n          for (var x = attrs.length - 1; x >= 0; x--) {\n            this.writeTriple(frame.node, this.factory.namedNode(elementURI(attrs[x])), this.factory.literal(attrs[x].nodeValue, frame.lang), this.why)\n          }\n        } else {\n          // we should add an arc (or implicit bnode+arc)\n          frame.addArc(elementURI(dom)) // save the arc's rdf:ID if it has one\n          if (this.reify) {\n            rdfid = this.getAttributeNodeNS(dom, this.ns.RDF, 'ID')\n            if (rdfid) {\n              frame.rdfid = rdfid.nodeValue\n              dom.removeAttributeNode(rdfid)\n            }\n          }\n          var parsetype = this.getAttributeNodeNS(dom, this.ns.RDF, 'parseType')\n          var datatype = this.getAttributeNodeNS(dom, this.ns.RDF, 'datatype')\n          if (datatype) {\n            frame.datatype = datatype.nodeValue\n            dom.removeAttributeNode(datatype)\n          }\n          if (parsetype) {\n            var nv = parsetype.nodeValue\n            if (nv === 'Literal') {\n              frame.datatype = this.ns.RDF + 'XMLLiteral' \n              frame = this.buildFrame(frame)\n              // Don't include the literal node, only its children\n              frame.addLiteral(dom.childNodes)\n              dig = false\n            } else if (nv === 'Resource') {\n              frame = this.buildFrame(frame, frame.element)\n              frame.parent.element = null\n              frame.addBNode()\n            } else if (nv === 'Collection') {\n              frame = this.buildFrame(frame, frame.element)\n              frame.parent.element = null\n              frame.addCollection()\n            }\n            dom.removeAttributeNode(parsetype)\n          }\n          if (attrs.length !== 0) {\n            var resource = this.getAttributeNodeNS(dom, this.ns.RDF, 'resource')\n            var bnid2 = this.getAttributeNodeNS(dom, this.ns.RDF, 'nodeID')\n            frame = this.buildFrame(frame)\n            if (resource) {\n              frame.addNode(resource.nodeValue)\n              dom.removeAttributeNode(resource)\n            } else {\n              if (bnid2) {\n                frame.addBNode(bnid2.nodeValue)\n                dom.removeAttributeNode(bnid2)\n              } else {\n                frame.addBNode()\n              }\n            }\n            for (var x1 = attrs.length - 1; x1 >= 0; x1--) {\n              var f = this.buildFrame(frame)\n              f.addArc(elementURI(attrs[x1]))\n              if (elementURI(attrs[x1]) === this.ns.RDF + 'type') {\n                (this.buildFrame(f)).addNode(attrs[x1].nodeValue)\n              } else {\n                (this.buildFrame(f)).addLiteral(attrs[x1].nodeValue)\n              }\n            }\n          } else if (dom.childNodes.length === 0) {\n            (this.buildFrame(frame)).addLiteral('')\n          }\n        }\n      } // rdf:RDF\n      // dig dug\n      dom = frame.element\n      while (frame.parent) {\n        var pframe = frame\n        while (dom == null) {\n          frame = frame.parent\n          dom = frame.element\n        }\n        var candidate = dom.childNodes && dom.childNodes[frame.lastChild]\n        if (!candidate || !dig) {\n          frame.terminateFrame()\n          if (!(frame = frame.parent)) {\n            break\n          } // done\n          dom = frame.element\n          dig = true\n        } else if ((candidate.nodeType !== this.nodeType.ELEMENT &&\n          candidate.nodeType !== this.nodeType.TEXT &&\n          candidate.nodeType !== this.nodeType.CDATA_SECTION) ||\n          ((candidate.nodeType === this.nodeType.TEXT ||\n          candidate.nodeType === this.nodeType.CDATA_SECTION) &&\n          dom.childNodes.length !== 1)) {\n          frame.lastChild++\n        } else {\n          // not a leaf\n          frame.lastChild++\n          frame = this.buildFrame(pframe, dom.childNodes[frame.lastChild - 1])\n          break\n        }\n      }\n    } // while\n    //finalize the output\n    this.finalize();\n  }\n\n  /**\n   * Cleans out state from a previous parse run\n   * @private\n   */\n  cleanParser () {\n    this.bnodes = {}\n    this.why = null\n  }\n\n  /**\n   * Builds scope frame\n   * @private\n   */\n  buildFrame (parent, element) {\n    var frame = new Frame(this, parent, element)\n    if (parent) {\n      frame.base = parent.base\n      frame.lang = parent.lang\n    }\n    if (!element || element.nodeType === this.nodeType.TEXT ||\n      element.nodeType === this.nodeType.CDATA_SECTION) {\n      return frame\n    }\n    var attrs = element.attributes\n    var base = element.getAttributeNode('xml:base')\n    if (base != null) {\n      frame.base = base.nodeValue\n      element.removeAttribute('xml:base')\n    }\n    var lang = element.getAttributeNode('xml:lang')\n    if (lang != null) {\n      frame.lang = lang.nodeValue\n      element.removeAttribute('xml:lang')\n    }\n    // remove all extraneous xml and xmlns attributes\n    for (var x = attrs.length - 1;x >= 0;x--) {\n      if (attrs[x].nodeName.substr(0, 3) === 'xml') {\n        if (attrs[x].name.slice(0, 6) === 'xmlns:') {\n          var uri = attrs[x].nodeValue\n          if (this.base) uri = uriUtil.join(uri, this.base)\n          //Do we need this for something?\n          //this.store.setPrefixForURI(attrs[x].name.slice(6), uri)\n        }\n        element.removeAttributeNode(attrs[x])\n      }\n    }\n    return frame\n  }\n}\n\nmodule.exports = RDFXMLProcessor\n","const uriUtil = {\n  join : require('./uri-join.js')\n};\n\nmodule.exports = class {\n\n  constructor (parser, parent, element) {\n    this.ns = parser.ns\n    this.NODE = 1\n    this.ARC = 2\n    this.parent = parent\n    this.parser = parser\n    this.factory = parser.factory\n    this.element = element\n    this.lastChild = 0\n    this.base = null\n    this.lang = null\n    this.node = null\n    this.nodeType = null\n    this.listIndex = 1\n    this.rdfid = null\n    this.datatype = null\n    this.collection = false\n    this.restTriple = null\n  }\n  \n  /** Terminate the frame and notify the store that we're done */\n  terminateFrame () {\n    //Close the collection if needed with an rdf:nil\n    if (this.collection) {\n      this.parser.writeTriple(this.parser.restTriple.s, this.parser.restTriple.p, this.ns.RDF + 'nil', this.parser.restTriple.g);\n    }\n  }\n\n  /** Add a symbol of a certain type to the this frame */\n  addSymbol (type, uri) {\n    uri = uriUtil.join(uri, this.base)\n    this.node = this.factory.namedNode(uri)\n    this.nodeType = type\n  }\n\n  /** Load any constructed triples into the store */\n  loadTriple () {\n    if (this.parent.parent.collection) {\n      //On the second element, there will be a restTriple\n      if (this.parser.restTriple) {\n        //If theres a previous element, we need to link it to the current blanknode\n        this.parser.writeTriple(this.parser.restTriple.s, this.parser.restTriple.p, this.parser.restTriple.o, this.parser.restTriple.g);\n        //and print the next one as well\n      }\n      \n      this.parser.writeTriple(this.parent.parent.node, this.ns.RDF + 'first', this.node, this.parser.why)\n      \n      //create new blankNode for the next element - this  will create a blanknode too many though\n      var next = this.factory.blankNode()\n      this.parser.restTriple = { s: this.parent.parent.node, p: this.ns.RDF + 'rest', o: next, g: this.parser.why}\n      this.parent.parent.node = next\n    } else {\n      this.parser.writeTriple(this.parent.parent.node, this.parent.node, this.node, this.parser.why)\n    }\n    if (this.parent.rdfid != null) {\n      // reify\n      var triple = this.factory.namedNode(uriUtil.join('#' + this.parent.rdfid, this.base))\n      this.parser.writeTriple(triple, this.factory.namedNode(this.ns.RDF + 'type'), this.factory.namedNode(this.ns.RDF + 'Statement'), this.parser.why)\n      this.parser.writeTriple(triple, this.factory.namedNode(this.ns.RDF + 'subject'), this.parent.parent.node, this.parser.why)\n      this.parser.writeTriple(triple, this.factory.namedNode(this.ns.RDF + 'predicate'), this.parent.node, this.parser.why)\n      \n      this.parser.writeTriple(triple, this.factory.namedNode(this.ns.RDF + 'object'), this.node, this.parser.why)\n    }\n  }\n\n  /** Check if it's OK to load a triple */\n  isTripleToLoad () {\n    return (this.parent != null && this.parent.parent != null && this.nodeType === this.NODE && this.parent.nodeType === this.ARC && this.parent.parent.nodeType === this.NODE) \n  }\n\n  /** Add a symbolic node to this frame */\n  addNode (uri) {\n    this.addSymbol(this.NODE, uri)\n    if (this.isTripleToLoad()) {\n      this.loadTriple()\n    }\n  }\n\n  /** Add a collection node to this frame */\n  addCollection () {\n    this.nodeType = this.NODE\n    //this.node = this.store.collection()\n    this.node = this.factory.blankNode()\n    this.collection = true\n    if (this.isTripleToLoad()) {\n      this.loadTriple()\n    }\n  }\n\n  /** Add a collection arc to this frame */\n  addCollectionArc () {\n    this.nodeType = this.ARC\n  }\n\n  /** Add a bnode to this frame */\n  addBNode (id) {\n    if (id != null) {\n      if (this.parser.bnodes[id] != null) {\n        this.node = this.parser.bnodes[id]\n      } else {\n        this.node = this.parser.bnodes[id] = this.factory.blankNode()\n      }\n    } else {\n      this.node = this.factory.blankNode()\n    }\n    this.nodeType = this.NODE\n    if (this.isTripleToLoad()) {\n      this.loadTriple()\n    }\n  }\n\n  /** Add an arc or property to this frame */\n  addArc (uri) {\n    if (uri === this.ns.RDF + 'li') {\n      uri = this.ns.RDF + '_' + this.parent.listIndex\n      this.parent.listIndex++\n    }\n    \n    this.addSymbol(this.ARC, uri)\n  }\n\n  /** Add a literal to this frame */\n  addLiteral (value) {\n    if (this.parent.datatype) {\n      this.node = this.factory.literal(value, '', this.parent.datatype)\n    } else {\n      this.node = this.factory.literal(value, this.lang)\n    }\n    this.nodeType = this.NODE\n    if (this.isTripleToLoad()) {\n      this.loadTriple()\n    }\n  }\n}\n","function DOMParser(options){\r\n\tthis.options = options ||{locator:{}};\r\n\t\r\n}\r\nDOMParser.prototype.parseFromString = function(source,mimeType){\r\n\tvar options = this.options;\r\n\tvar sax =  new XMLReader();\r\n\tvar domBuilder = options.domBuilder || new DOMHandler();//contentHandler and LexicalHandler\r\n\tvar errorHandler = options.errorHandler;\r\n\tvar locator = options.locator;\r\n\tvar defaultNSMap = options.xmlns||{};\r\n\tvar entityMap = {'lt':'<','gt':'>','amp':'&','quot':'\"','apos':\"'\"}\r\n\tif(locator){\r\n\t\tdomBuilder.setDocumentLocator(locator)\r\n\t}\r\n\t\r\n\tsax.errorHandler = buildErrorHandler(errorHandler,domBuilder,locator);\r\n\tsax.domBuilder = options.domBuilder || domBuilder;\r\n\tif(/\\/x?html?$/.test(mimeType)){\r\n\t\tentityMap.nbsp = '\\xa0';\r\n\t\tentityMap.copy = '\\xa9';\r\n\t\tdefaultNSMap['']= 'http://www.w3.org/1999/xhtml';\r\n\t}\r\n\tdefaultNSMap.xml = defaultNSMap.xml || 'http://www.w3.org/XML/1998/namespace';\r\n\tif(source){\r\n\t\tsax.parse(source,defaultNSMap,entityMap);\r\n\t}else{\r\n\t\tsax.errorHandler.error(\"invalid doc source\");\r\n\t}\r\n\treturn domBuilder.doc;\r\n}\r\nfunction buildErrorHandler(errorImpl,domBuilder,locator){\r\n\tif(!errorImpl){\r\n\t\tif(domBuilder instanceof DOMHandler){\r\n\t\t\treturn domBuilder;\r\n\t\t}\r\n\t\terrorImpl = domBuilder ;\r\n\t}\r\n\tvar errorHandler = {}\r\n\tvar isCallback = errorImpl instanceof Function;\r\n\tlocator = locator||{}\r\n\tfunction build(key){\r\n\t\tvar fn = errorImpl[key];\r\n\t\tif(!fn && isCallback){\r\n\t\t\tfn = errorImpl.length == 2?function(msg){errorImpl(key,msg)}:errorImpl;\r\n\t\t}\r\n\t\terrorHandler[key] = fn && function(msg){\r\n\t\t\tfn('[xmldom '+key+']\\t'+msg+_locator(locator));\r\n\t\t}||function(){};\r\n\t}\r\n\tbuild('warning');\r\n\tbuild('error');\r\n\tbuild('fatalError');\r\n\treturn errorHandler;\r\n}\r\n\r\n//console.log('#\\n\\n\\n\\n\\n\\n\\n####')\r\n/**\r\n * +ContentHandler+ErrorHandler\r\n * +LexicalHandler+EntityResolver2\r\n * -DeclHandler-DTDHandler \r\n * \r\n * DefaultHandler:EntityResolver, DTDHandler, ContentHandler, ErrorHandler\r\n * DefaultHandler2:DefaultHandler,LexicalHandler, DeclHandler, EntityResolver2\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/helpers/DefaultHandler.html\r\n */\r\nfunction DOMHandler() {\r\n    this.cdata = false;\r\n}\r\nfunction position(locator,node){\r\n\tnode.lineNumber = locator.lineNumber;\r\n\tnode.columnNumber = locator.columnNumber;\r\n}\r\n/**\r\n * @see org.xml.sax.ContentHandler#startDocument\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ContentHandler.html\r\n */ \r\nDOMHandler.prototype = {\r\n\tstartDocument : function() {\r\n    \tthis.doc = new DOMImplementation().createDocument(null, null, null);\r\n    \tif (this.locator) {\r\n        \tthis.doc.documentURI = this.locator.systemId;\r\n    \t}\r\n\t},\r\n\tstartElement:function(namespaceURI, localName, qName, attrs) {\r\n\t\tvar doc = this.doc;\r\n\t    var el = doc.createElementNS(namespaceURI, qName||localName);\r\n\t    var len = attrs.length;\r\n\t    appendElement(this, el);\r\n\t    this.currentElement = el;\r\n\t    \r\n\t\tthis.locator && position(this.locator,el)\r\n\t    for (var i = 0 ; i < len; i++) {\r\n\t        var namespaceURI = attrs.getURI(i);\r\n\t        var value = attrs.getValue(i);\r\n\t        var qName = attrs.getQName(i);\r\n\t\t\tvar attr = doc.createAttributeNS(namespaceURI, qName);\r\n\t\t\tthis.locator &&position(attrs.getLocator(i),attr);\r\n\t\t\tattr.value = attr.nodeValue = value;\r\n\t\t\tel.setAttributeNode(attr)\r\n\t    }\r\n\t},\r\n\tendElement:function(namespaceURI, localName, qName) {\r\n\t\tvar current = this.currentElement\r\n\t\tvar tagName = current.tagName;\r\n\t\tthis.currentElement = current.parentNode;\r\n\t},\r\n\tstartPrefixMapping:function(prefix, uri) {\r\n\t},\r\n\tendPrefixMapping:function(prefix) {\r\n\t},\r\n\tprocessingInstruction:function(target, data) {\r\n\t    var ins = this.doc.createProcessingInstruction(target, data);\r\n\t    this.locator && position(this.locator,ins)\r\n\t    appendElement(this, ins);\r\n\t},\r\n\tignorableWhitespace:function(ch, start, length) {\r\n\t},\r\n\tcharacters:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t\t//console.log(chars)\r\n\t\tif(chars){\r\n\t\t\tif (this.cdata) {\r\n\t\t\t\tvar charNode = this.doc.createCDATASection(chars);\r\n\t\t\t} else {\r\n\t\t\t\tvar charNode = this.doc.createTextNode(chars);\r\n\t\t\t}\r\n\t\t\tif(this.currentElement){\r\n\t\t\t\tthis.currentElement.appendChild(charNode);\r\n\t\t\t}else if(/^\\s*$/.test(chars)){\r\n\t\t\t\tthis.doc.appendChild(charNode);\r\n\t\t\t\t//process xml\r\n\t\t\t}\r\n\t\t\tthis.locator && position(this.locator,charNode)\r\n\t\t}\r\n\t},\r\n\tskippedEntity:function(name) {\r\n\t},\r\n\tendDocument:function() {\r\n\t\tthis.doc.normalize();\r\n\t},\r\n\tsetDocumentLocator:function (locator) {\r\n\t    if(this.locator = locator){// && !('lineNumber' in locator)){\r\n\t    \tlocator.lineNumber = 0;\r\n\t    }\r\n\t},\r\n\t//LexicalHandler\r\n\tcomment:function(chars, start, length) {\r\n\t\tchars = _toString.apply(this,arguments)\r\n\t    var comm = this.doc.createComment(chars);\r\n\t    this.locator && position(this.locator,comm)\r\n\t    appendElement(this, comm);\r\n\t},\r\n\t\r\n\tstartCDATA:function() {\r\n\t    //used in characters() methods\r\n\t    this.cdata = true;\r\n\t},\r\n\tendCDATA:function() {\r\n\t    this.cdata = false;\r\n\t},\r\n\t\r\n\tstartDTD:function(name, publicId, systemId) {\r\n\t\tvar impl = this.doc.implementation;\r\n\t    if (impl && impl.createDocumentType) {\r\n\t        var dt = impl.createDocumentType(name, publicId, systemId);\r\n\t        this.locator && position(this.locator,dt)\r\n\t        appendElement(this, dt);\r\n\t    }\r\n\t},\r\n\t/**\r\n\t * @see org.xml.sax.ErrorHandler\r\n\t * @link http://www.saxproject.org/apidoc/org/xml/sax/ErrorHandler.html\r\n\t */\r\n\twarning:function(error) {\r\n\t\tconsole.warn('[xmldom warning]\\t'+error,_locator(this.locator));\r\n\t},\r\n\terror:function(error) {\r\n\t\tconsole.error('[xmldom error]\\t'+error,_locator(this.locator));\r\n\t},\r\n\tfatalError:function(error) {\r\n\t\tconsole.error('[xmldom fatalError]\\t'+error,_locator(this.locator));\r\n\t    throw error;\r\n\t}\r\n}\r\nfunction _locator(l){\r\n\tif(l){\r\n\t\treturn '\\n@'+(l.systemId ||'')+'#[line:'+l.lineNumber+',col:'+l.columnNumber+']'\r\n\t}\r\n}\r\nfunction _toString(chars,start,length){\r\n\tif(typeof chars == 'string'){\r\n\t\treturn chars.substr(start,length)\r\n\t}else{//java sax connect width xmldom on rhino(what about: \"? && !(chars instanceof String)\")\r\n\t\tif(chars.length >= start+length || start){\r\n\t\t\treturn new java.lang.String(chars,start,length)+'';\r\n\t\t}\r\n\t\treturn chars;\r\n\t}\r\n}\r\n\r\n/*\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/LexicalHandler.html\r\n * used method of org.xml.sax.ext.LexicalHandler:\r\n *  #comment(chars, start, length)\r\n *  #startCDATA()\r\n *  #endCDATA()\r\n *  #startDTD(name, publicId, systemId)\r\n *\r\n *\r\n * IGNORED method of org.xml.sax.ext.LexicalHandler:\r\n *  #endDTD()\r\n *  #startEntity(name)\r\n *  #endEntity(name)\r\n *\r\n *\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/DeclHandler.html\r\n * IGNORED method of org.xml.sax.ext.DeclHandler\r\n * \t#attributeDecl(eName, aName, type, mode, value)\r\n *  #elementDecl(name, model)\r\n *  #externalEntityDecl(name, publicId, systemId)\r\n *  #internalEntityDecl(name, value)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/ext/EntityResolver2.html\r\n * IGNORED method of org.xml.sax.EntityResolver2\r\n *  #resolveEntity(String name,String publicId,String baseURI,String systemId)\r\n *  #resolveEntity(publicId, systemId)\r\n *  #getExternalSubset(name, baseURI)\r\n * @link http://www.saxproject.org/apidoc/org/xml/sax/DTDHandler.html\r\n * IGNORED method of org.xml.sax.DTDHandler\r\n *  #notationDecl(name, publicId, systemId) {};\r\n *  #unparsedEntityDecl(name, publicId, systemId, notationName) {};\r\n */\r\n\"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl\".replace(/\\w+/g,function(key){\r\n\tDOMHandler.prototype[key] = function(){return null}\r\n})\r\n\r\n/* Private static helpers treated below as private instance methods, so don't need to add these to the public API; we might use a Relator to also get rid of non-standard public properties */\r\nfunction appendElement (hander,node) {\r\n    if (!hander.currentElement) {\r\n        hander.doc.appendChild(node);\r\n    } else {\r\n        hander.currentElement.appendChild(node);\r\n    }\r\n}//appendChild and setAttributeNS are preformance key\r\n\r\n//if(typeof require == 'function'){\r\n\tvar XMLReader = require('./sax').XMLReader;\r\n\tvar DOMImplementation = exports.DOMImplementation = require('./dom').DOMImplementation;\r\n\texports.XMLSerializer = require('./dom').XMLSerializer ;\r\n\texports.DOMParser = DOMParser;\r\n//}\r\n","//[4]   \tNameStartChar\t   ::=   \t\":\" | [A-Z] | \"_\" | [a-z] | [#xC0-#xD6] | [#xD8-#xF6] | [#xF8-#x2FF] | [#x370-#x37D] | [#x37F-#x1FFF] | [#x200C-#x200D] | [#x2070-#x218F] | [#x2C00-#x2FEF] | [#x3001-#xD7FF] | [#xF900-#xFDCF] | [#xFDF0-#xFFFD] | [#x10000-#xEFFFF]\r\n//[4a]   \tNameChar\t   ::=   \tNameStartChar | \"-\" | \".\" | [0-9] | #xB7 | [#x0300-#x036F] | [#x203F-#x2040]\r\n//[5]   \tName\t   ::=   \tNameStartChar (NameChar)*\r\nvar nameStartChar = /[A-Z_a-z\\xC0-\\xD6\\xD8-\\xF6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD]///\\u10000-\\uEFFFF\r\nvar nameChar = new RegExp(\"[\\\\-\\\\.0-9\"+nameStartChar.source.slice(1,-1)+\"\\\\u00B7\\\\u0300-\\\\u036F\\\\u203F-\\\\u2040]\");\r\nvar tagNamePattern = new RegExp('^'+nameStartChar.source+nameChar.source+'*(?:\\:'+nameStartChar.source+nameChar.source+'*)?$');\r\n//var tagNamePattern = /^[a-zA-Z_][\\w\\-\\.]*(?:\\:[a-zA-Z_][\\w\\-\\.]*)?$/\r\n//var handlers = 'resolveEntity,getExternalSubset,characters,endDocument,endElement,endPrefixMapping,ignorableWhitespace,processingInstruction,setDocumentLocator,skippedEntity,startDocument,startElement,startPrefixMapping,notationDecl,unparsedEntityDecl,error,fatalError,warning,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,comment,endCDATA,endDTD,endEntity,startCDATA,startDTD,startEntity'.split(',')\r\n\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\nvar S_TAG = 0;//tag name offerring\r\nvar S_ATTR = 1;//attr name offerring \r\nvar S_ATTR_SPACE=2;//attr name end and space offer\r\nvar S_EQ = 3;//=space?\r\nvar S_ATTR_NOQUOT_VALUE = 4;//attr value(no quot value only)\r\nvar S_ATTR_END = 5;//attr value end and no space(quot end)\r\nvar S_TAG_SPACE = 6;//(attr value end || tag end ) && (space offer)\r\nvar S_TAG_CLOSE = 7;//closed el<el />\r\n\r\nfunction XMLReader(){\r\n\t\r\n}\r\n\r\nXMLReader.prototype = {\r\n\tparse:function(source,defaultNSMap,entityMap){\r\n\t\tvar domBuilder = this.domBuilder;\r\n\t\tdomBuilder.startDocument();\r\n\t\t_copy(defaultNSMap ,defaultNSMap = {})\r\n\t\tparse(source,defaultNSMap,entityMap,\r\n\t\t\t\tdomBuilder,this.errorHandler);\r\n\t\tdomBuilder.endDocument();\r\n\t}\r\n}\r\nfunction parse(source,defaultNSMapCopy,entityMap,domBuilder,errorHandler){\r\n\tfunction fixedFromCharCode(code) {\r\n\t\t// String.prototype.fromCharCode does not supports\r\n\t\t// > 2 bytes unicode chars directly\r\n\t\tif (code > 0xffff) {\r\n\t\t\tcode -= 0x10000;\r\n\t\t\tvar surrogate1 = 0xd800 + (code >> 10)\r\n\t\t\t\t, surrogate2 = 0xdc00 + (code & 0x3ff);\r\n\r\n\t\t\treturn String.fromCharCode(surrogate1, surrogate2);\r\n\t\t} else {\r\n\t\t\treturn String.fromCharCode(code);\r\n\t\t}\r\n\t}\r\n\tfunction entityReplacer(a){\r\n\t\tvar k = a.slice(1,-1);\r\n\t\tif(k in entityMap){\r\n\t\t\treturn entityMap[k]; \r\n\t\t}else if(k.charAt(0) === '#'){\r\n\t\t\treturn fixedFromCharCode(parseInt(k.substr(1).replace('x','0x')))\r\n\t\t}else{\r\n\t\t\terrorHandler.error('entity not found:'+a);\r\n\t\t\treturn a;\r\n\t\t}\r\n\t}\r\n\tfunction appendText(end){//has some bugs\r\n\t\tif(end>start){\r\n\t\t\tvar xt = source.substring(start,end).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\tlocator&&position(start);\r\n\t\t\tdomBuilder.characters(xt,0,end-start);\r\n\t\t\tstart = end\r\n\t\t}\r\n\t}\r\n\tfunction position(p,m){\r\n\t\twhile(p>=lineEnd && (m = linePattern.exec(source))){\r\n\t\t\tlineStart = m.index;\r\n\t\t\tlineEnd = lineStart + m[0].length;\r\n\t\t\tlocator.lineNumber++;\r\n\t\t\t//console.log('line++:',locator,startPos,endPos)\r\n\t\t}\r\n\t\tlocator.columnNumber = p-lineStart+1;\r\n\t}\r\n\tvar lineStart = 0;\r\n\tvar lineEnd = 0;\r\n\tvar linePattern = /.*(?:\\r\\n?|\\n)|.*$/g\r\n\tvar locator = domBuilder.locator;\r\n\t\r\n\tvar parseStack = [{currentNSMap:defaultNSMapCopy}]\r\n\tvar closeMap = {};\r\n\tvar start = 0;\r\n\twhile(true){\r\n\t\ttry{\r\n\t\t\tvar tagStart = source.indexOf('<',start);\r\n\t\t\tif(tagStart<0){\r\n\t\t\t\tif(!source.substr(start).match(/^\\s*$/)){\r\n\t\t\t\t\tvar doc = domBuilder.doc;\r\n\t    \t\t\tvar text = doc.createTextNode(source.substr(start));\r\n\t    \t\t\tdoc.appendChild(text);\r\n\t    \t\t\tdomBuilder.currentElement = text;\r\n\t\t\t\t}\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tif(tagStart>start){\r\n\t\t\t\tappendText(tagStart);\r\n\t\t\t}\r\n\t\t\tswitch(source.charAt(tagStart+1)){\r\n\t\t\tcase '/':\r\n\t\t\t\tvar end = source.indexOf('>',tagStart+3);\r\n\t\t\t\tvar tagName = source.substring(tagStart+2,end);\r\n\t\t\t\tvar config = parseStack.pop();\r\n\t\t\t\tif(end<0){\r\n\t\t\t\t\t\r\n\t        \t\ttagName = source.substring(tagStart+2).replace(/[\\s<].*/,'');\r\n\t        \t\t//console.error('#@@@@@@'+tagName)\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' is not complete:'+config.tagName);\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t        \t}else if(tagName.match(/\\s</)){\r\n\t        \t\ttagName = tagName.replace(/[\\s<].*/,'');\r\n\t        \t\terrorHandler.error(\"end tag name: \"+tagName+' maybe not complete');\r\n\t        \t\tend = tagStart+1+tagName.length;\r\n\t\t\t\t}\r\n\t\t\t\t//console.error(parseStack.length,parseStack)\r\n\t\t\t\t//console.error(config);\r\n\t\t\t\tvar localNSMap = config.localNSMap;\r\n\t\t\t\tvar endMatch = config.tagName == tagName;\r\n\t\t\t\tvar endIgnoreCaseMach = endMatch || config.tagName&&config.tagName.toLowerCase() == tagName.toLowerCase()\r\n\t\t        if(endIgnoreCaseMach){\r\n\t\t        \tdomBuilder.endElement(config.uri,config.localName,tagName);\r\n\t\t\t\t\tif(localNSMap){\r\n\t\t\t\t\t\tfor(var prefix in localNSMap){\r\n\t\t\t\t\t\t\tdomBuilder.endPrefixMapping(prefix) ;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(!endMatch){\r\n\t\t            \terrorHandler.fatalError(\"end tag name: \"+tagName+' is not match the current start tagName:'+config.tagName );\r\n\t\t\t\t\t}\r\n\t\t        }else{\r\n\t\t        \tparseStack.push(config)\r\n\t\t        }\r\n\t\t\t\t\r\n\t\t\t\tend++;\r\n\t\t\t\tbreak;\r\n\t\t\t\t// end elment\r\n\t\t\tcase '?':// <?...?>\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseInstruction(source,tagStart,domBuilder);\r\n\t\t\t\tbreak;\r\n\t\t\tcase '!':// <!doctype,<![CDATA,<!--\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tend = parseDCC(source,tagStart,domBuilder,errorHandler);\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlocator&&position(tagStart);\r\n\t\t\t\tvar el = new ElementAttributes();\r\n\t\t\t\tvar currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\t\t\t\t//elStartEnd\r\n\t\t\t\tvar end = parseElementStartPart(source,tagStart,el,currentNSMap,entityReplacer,errorHandler);\r\n\t\t\t\tvar len = el.length;\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(!el.closed && fixSelfClosed(source,end,el.tagName,closeMap)){\r\n\t\t\t\t\tel.closed = true;\r\n\t\t\t\t\tif(!entityMap.nbsp){\r\n\t\t\t\t\t\terrorHandler.warning('unclosed xml attribute');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tif(locator && len){\r\n\t\t\t\t\tvar locator2 = copyLocator(locator,{});\r\n\t\t\t\t\t//try{//attribute position fixed\r\n\t\t\t\t\tfor(var i = 0;i<len;i++){\r\n\t\t\t\t\t\tvar a = el[i];\r\n\t\t\t\t\t\tposition(a.offset);\r\n\t\t\t\t\t\ta.locator = copyLocator(locator,{});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//}catch(e){console.error('@@@@@'+e)}\r\n\t\t\t\t\tdomBuilder.locator = locator2\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdomBuilder.locator = locator;\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(appendElement(el,domBuilder,currentNSMap)){\r\n\t\t\t\t\t\tparseStack.push(el)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\tif(el.uri === 'http://www.w3.org/1999/xhtml' && !el.closed){\r\n\t\t\t\t\tend = parseHtmlSpecialContent(source,end,el.tagName,entityReplacer,domBuilder)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tend++;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}catch(e){\r\n\t\t\terrorHandler.error('element parse error: '+e)\r\n\t\t\t//errorHandler.error('element parse error: '+e);\r\n\t\t\tend = -1;\r\n\t\t\t//throw e;\r\n\t\t}\r\n\t\tif(end>start){\r\n\t\t\tstart = end;\r\n\t\t}else{\r\n\t\t\t//TODO: sax\r\n\t\t\tappendText(Math.max(tagStart,start)+1);\r\n\t\t}\r\n\t}\r\n}\r\nfunction copyLocator(f,t){\r\n\tt.lineNumber = f.lineNumber;\r\n\tt.columnNumber = f.columnNumber;\r\n\treturn t;\r\n}\r\n\r\n/**\r\n * @see #appendElement(source,elStartEnd,el,selfClosed,entityReplacer,domBuilder,parseStack);\r\n * @return end of the elementStartPart(end of elementEndPart for selfClosed el)\r\n */\r\nfunction parseElementStartPart(source,start,el,currentNSMap,entityReplacer,errorHandler){\r\n\tvar attrName;\r\n\tvar value;\r\n\tvar p = ++start;\r\n\tvar s = S_TAG;//status\r\n\twhile(true){\r\n\t\tvar c = source.charAt(p);\r\n\t\tswitch(c){\r\n\t\tcase '=':\r\n\t\t\tif(s === S_ATTR){//attrName\r\n\t\t\t\tattrName = source.slice(start,p);\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else if(s === S_ATTR_SPACE){\r\n\t\t\t\ts = S_EQ;\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: equal must after attrName or space after attrName\r\n\t\t\t\tthrow new Error('attribute equal must after attrName');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '\\'':\r\n\t\tcase '\"':\r\n\t\t\tif(s === S_EQ || s === S_ATTR //|| s == S_ATTR_SPACE\r\n\t\t\t\t){//equal\r\n\t\t\t\tif(s === S_ATTR){\r\n\t\t\t\t\terrorHandler.warning('attribute value must after \"=\"')\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t}\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\tp = source.indexOf(c,start)\r\n\t\t\t\tif(p>0){\r\n\t\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\tel.add(attrName,value,start-1);\r\n\t\t\t\t\ts = S_ATTR_END;\r\n\t\t\t\t}else{\r\n\t\t\t\t\t//fatalError: no end quot match\r\n\t\t\t\t\tthrow new Error('attribute value no end \\''+c+'\\' match');\r\n\t\t\t\t}\r\n\t\t\t}else if(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\tvalue = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t//console.log(attrName,value,start,p)\r\n\t\t\t\tel.add(attrName,value,start);\r\n\t\t\t\t//console.dir(el)\r\n\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed start quot('+c+')!!');\r\n\t\t\t\tstart = p+1;\r\n\t\t\t\ts = S_ATTR_END\r\n\t\t\t}else{\r\n\t\t\t\t//fatalError: no equal before\r\n\t\t\t\tthrow new Error('attribute value must after \"=\"');\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase '/':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\ts =S_TAG_CLOSE;\r\n\t\t\t\tel.closed = true;\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\tcase S_ATTR:\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tbreak;\r\n\t\t\t//case S_EQ:\r\n\t\t\tdefault:\r\n\t\t\t\tthrow new Error(\"attribute invalid close char('/')\")\r\n\t\t\t}\r\n\t\t\tbreak;\r\n\t\tcase ''://end document\r\n\t\t\t//throw new Error('unexpected end of input')\r\n\t\t\terrorHandler.error('unexpected end of input');\r\n\t\t\tif(s == S_TAG){\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\t}\r\n\t\t\treturn p;\r\n\t\tcase '>':\r\n\t\t\tswitch(s){\r\n\t\t\tcase S_TAG:\r\n\t\t\t\tel.setTagName(source.slice(start,p));\r\n\t\t\tcase S_ATTR_END:\r\n\t\t\tcase S_TAG_SPACE:\r\n\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\tbreak;//normal\r\n\t\t\tcase S_ATTR_NOQUOT_VALUE://Compatible state\r\n\t\t\tcase S_ATTR:\r\n\t\t\t\tvalue = source.slice(start,p);\r\n\t\t\t\tif(value.slice(-1) === '/'){\r\n\t\t\t\t\tel.closed  = true;\r\n\t\t\t\t\tvalue = value.slice(0,-1)\r\n\t\t\t\t}\r\n\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\tif(s === S_ATTR_SPACE){\r\n\t\t\t\t\tvalue = attrName;\r\n\t\t\t\t}\r\n\t\t\t\tif(s == S_ATTR_NOQUOT_VALUE){\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value.replace(/&#?\\w+;/g,entityReplacer),start)\r\n\t\t\t\t}else{\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !value.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed value!! \"'+value+'\" instead!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(value,value,start)\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase S_EQ:\r\n\t\t\t\tthrow new Error('attribute value missed!!');\r\n\t\t\t}\r\n//\t\t\tconsole.log(tagName,tagNamePattern,tagNamePattern.test(tagName))\r\n\t\t\treturn p;\r\n\t\t/*xml space '\\x20' | #x9 | #xD | #xA; */\r\n\t\tcase '\\u0080':\r\n\t\t\tc = ' ';\r\n\t\tdefault:\r\n\t\t\tif(c<= ' '){//space\r\n\t\t\t\tswitch(s){\r\n\t\t\t\tcase S_TAG:\r\n\t\t\t\t\tel.setTagName(source.slice(start,p));//tagName\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR:\r\n\t\t\t\t\tattrName = source.slice(start,p)\r\n\t\t\t\t\ts = S_ATTR_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_NOQUOT_VALUE:\r\n\t\t\t\t\tvar value = source.slice(start,p).replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\t\terrorHandler.warning('attribute \"'+value+'\" missed quot(\")!!');\r\n\t\t\t\t\tel.add(attrName,value,start)\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\ts = S_TAG_SPACE;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t//case S_TAG_SPACE:\r\n\t\t\t\t//case S_EQ:\r\n\t\t\t\t//case S_ATTR_SPACE:\r\n\t\t\t\t//\tvoid();break;\r\n\t\t\t\t//case S_TAG_CLOSE:\r\n\t\t\t\t\t//ignore warning\r\n\t\t\t\t}\r\n\t\t\t}else{//not space\r\n//S_TAG,\tS_ATTR,\tS_EQ,\tS_ATTR_NOQUOT_VALUE\r\n//S_ATTR_SPACE,\tS_ATTR_END,\tS_TAG_SPACE, S_TAG_CLOSE\r\n\t\t\t\tswitch(s){\r\n\t\t\t\t//case S_TAG:void();break;\r\n\t\t\t\t//case S_ATTR:void();break;\r\n\t\t\t\t//case S_ATTR_NOQUOT_VALUE:void();break;\r\n\t\t\t\tcase S_ATTR_SPACE:\r\n\t\t\t\t\tvar tagName =  el.tagName;\r\n\t\t\t\t\tif(currentNSMap[''] !== 'http://www.w3.org/1999/xhtml' || !attrName.match(/^(?:disabled|checked|selected)$/i)){\r\n\t\t\t\t\t\terrorHandler.warning('attribute \"'+attrName+'\" missed value!! \"'+attrName+'\" instead2!!')\r\n\t\t\t\t\t}\r\n\t\t\t\t\tel.add(attrName,attrName,start);\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_ATTR_END:\r\n\t\t\t\t\terrorHandler.warning('attribute space is required\"'+attrName+'\"!!')\r\n\t\t\t\tcase S_TAG_SPACE:\r\n\t\t\t\t\ts = S_ATTR;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_EQ:\r\n\t\t\t\t\ts = S_ATTR_NOQUOT_VALUE;\r\n\t\t\t\t\tstart = p;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase S_TAG_CLOSE:\r\n\t\t\t\t\tthrow new Error(\"elements closed character '/' and '>' must be connected to\");\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}//end outer switch\r\n\t\t//console.log('p++',p)\r\n\t\tp++;\r\n\t}\r\n}\r\n/**\r\n * @return true if has new namespace define\r\n */\r\nfunction appendElement(el,domBuilder,currentNSMap){\r\n\tvar tagName = el.tagName;\r\n\tvar localNSMap = null;\r\n\t//var currentNSMap = parseStack[parseStack.length-1].currentNSMap;\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\tvar a = el[i];\r\n\t\tvar qName = a.qName;\r\n\t\tvar value = a.value;\r\n\t\tvar nsp = qName.indexOf(':');\r\n\t\tif(nsp>0){\r\n\t\t\tvar prefix = a.prefix = qName.slice(0,nsp);\r\n\t\t\tvar localName = qName.slice(nsp+1);\r\n\t\t\tvar nsPrefix = prefix === 'xmlns' && localName\r\n\t\t}else{\r\n\t\t\tlocalName = qName;\r\n\t\t\tprefix = null\r\n\t\t\tnsPrefix = qName === 'xmlns' && ''\r\n\t\t}\r\n\t\t//can not set prefix,because prefix !== ''\r\n\t\ta.localName = localName ;\r\n\t\t//prefix == null for no ns prefix attribute \r\n\t\tif(nsPrefix !== false){//hack!!\r\n\t\t\tif(localNSMap == null){\r\n\t\t\t\tlocalNSMap = {}\r\n\t\t\t\t//console.log(currentNSMap,0)\r\n\t\t\t\t_copy(currentNSMap,currentNSMap={})\r\n\t\t\t\t//console.log(currentNSMap,1)\r\n\t\t\t}\r\n\t\t\tcurrentNSMap[nsPrefix] = localNSMap[nsPrefix] = value;\r\n\t\t\ta.uri = 'http://www.w3.org/2000/xmlns/'\r\n\t\t\tdomBuilder.startPrefixMapping(nsPrefix, value) \r\n\t\t}\r\n\t}\r\n\tvar i = el.length;\r\n\twhile(i--){\r\n\t\ta = el[i];\r\n\t\tvar prefix = a.prefix;\r\n\t\tif(prefix){//no prefix attribute has no namespace\r\n\t\t\tif(prefix === 'xml'){\r\n\t\t\t\ta.uri = 'http://www.w3.org/XML/1998/namespace';\r\n\t\t\t}if(prefix !== 'xmlns'){\r\n\t\t\t\ta.uri = currentNSMap[prefix || '']\r\n\t\t\t\t\r\n\t\t\t\t//{console.log('###'+a.qName,domBuilder.locator.systemId+'',currentNSMap,a.uri)}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\tvar nsp = tagName.indexOf(':');\r\n\tif(nsp>0){\r\n\t\tprefix = el.prefix = tagName.slice(0,nsp);\r\n\t\tlocalName = el.localName = tagName.slice(nsp+1);\r\n\t}else{\r\n\t\tprefix = null;//important!!\r\n\t\tlocalName = el.localName = tagName;\r\n\t}\r\n\t//no prefix element has default namespace\r\n\tvar ns = el.uri = currentNSMap[prefix || ''];\r\n\tdomBuilder.startElement(ns,localName,tagName,el);\r\n\t//endPrefixMapping and startPrefixMapping have not any help for dom builder\r\n\t//localNSMap = null\r\n\tif(el.closed){\r\n\t\tdomBuilder.endElement(ns,localName,tagName);\r\n\t\tif(localNSMap){\r\n\t\t\tfor(prefix in localNSMap){\r\n\t\t\t\tdomBuilder.endPrefixMapping(prefix) \r\n\t\t\t}\r\n\t\t}\r\n\t}else{\r\n\t\tel.currentNSMap = currentNSMap;\r\n\t\tel.localNSMap = localNSMap;\r\n\t\t//parseStack.push(el);\r\n\t\treturn true;\r\n\t}\r\n}\r\nfunction parseHtmlSpecialContent(source,elStartEnd,tagName,entityReplacer,domBuilder){\r\n\tif(/^(?:script|textarea)$/i.test(tagName)){\r\n\t\tvar elEndStart =  source.indexOf('</'+tagName+'>',elStartEnd);\r\n\t\tvar text = source.substring(elStartEnd+1,elEndStart);\r\n\t\tif(/[&<]/.test(text)){\r\n\t\t\tif(/^script$/i.test(tagName)){\r\n\t\t\t\t//if(!/\\]\\]>/.test(text)){\r\n\t\t\t\t\t//lexHandler.startCDATA();\r\n\t\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\t\t//lexHandler.endCDATA();\r\n\t\t\t\t\treturn elEndStart;\r\n\t\t\t\t//}\r\n\t\t\t}//}else{//text area\r\n\t\t\t\ttext = text.replace(/&#?\\w+;/g,entityReplacer);\r\n\t\t\t\tdomBuilder.characters(text,0,text.length);\r\n\t\t\t\treturn elEndStart;\r\n\t\t\t//}\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n\treturn elStartEnd+1;\r\n}\r\nfunction fixSelfClosed(source,elStartEnd,tagName,closeMap){\r\n\t//if(tagName in closeMap){\r\n\tvar pos = closeMap[tagName];\r\n\tif(pos == null){\r\n\t\t//console.log(tagName)\r\n\t\tpos =  source.lastIndexOf('</'+tagName+'>')\r\n\t\tif(pos<elStartEnd){//\r\n\t\t\tpos = source.lastIndexOf('</'+tagName)\r\n\t\t}\r\n\t\tcloseMap[tagName] =pos\r\n\t}\r\n\treturn pos<elStartEnd;\r\n\t//} \r\n}\r\nfunction _copy(source,target){\r\n\tfor(var n in source){target[n] = source[n]}\r\n}\r\nfunction parseDCC(source,start,domBuilder,errorHandler){//sure start with '<!'\r\n\tvar next= source.charAt(start+2)\r\n\tswitch(next){\r\n\tcase '-':\r\n\t\tif(source.charAt(start + 3) === '-'){\r\n\t\t\tvar end = source.indexOf('-->',start+4);\r\n\t\t\t//append comment source.substring(4,end)//<!--\r\n\t\t\tif(end>start){\r\n\t\t\t\tdomBuilder.comment(source,start+4,end-start-4);\r\n\t\t\t\treturn end+3;\r\n\t\t\t}else{\r\n\t\t\t\terrorHandler.error(\"Unclosed comment\");\r\n\t\t\t\treturn -1;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\tdefault:\r\n\t\tif(source.substr(start+3,6) == 'CDATA['){\r\n\t\t\tvar end = source.indexOf(']]>',start+9);\r\n\t\t\tdomBuilder.startCDATA();\r\n\t\t\tdomBuilder.characters(source,start+9,end-start-9);\r\n\t\t\tdomBuilder.endCDATA() \r\n\t\t\treturn end+3;\r\n\t\t}\r\n\t\t//<!DOCTYPE\r\n\t\t//startDTD(java.lang.String name, java.lang.String publicId, java.lang.String systemId) \r\n\t\tvar matchs = split(source,start);\r\n\t\tvar len = matchs.length;\r\n\t\tif(len>1 && /!doctype/i.test(matchs[0][0])){\r\n\t\t\tvar name = matchs[1][0];\r\n\t\t\tvar pubid = len>3 && /^public$/i.test(matchs[2][0]) && matchs[3][0]\r\n\t\t\tvar sysid = len>4 && matchs[4][0];\r\n\t\t\tvar lastMatch = matchs[len-1]\r\n\t\t\tdomBuilder.startDTD(name,pubid && pubid.replace(/^(['\"])(.*?)\\1$/,'$2'),\r\n\t\t\t\t\tsysid && sysid.replace(/^(['\"])(.*?)\\1$/,'$2'));\r\n\t\t\tdomBuilder.endDTD();\r\n\t\t\t\r\n\t\t\treturn lastMatch.index+lastMatch[0].length\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n\r\n\r\nfunction parseInstruction(source,start,domBuilder){\r\n\tvar end = source.indexOf('?>',start);\r\n\tif(end){\r\n\t\tvar match = source.substring(start,end).match(/^<\\?(\\S*)\\s*([\\s\\S]*?)\\s*$/);\r\n\t\tif(match){\r\n\t\t\tvar len = match[0].length;\r\n\t\t\tdomBuilder.processingInstruction(match[1], match[2]) ;\r\n\t\t\treturn end+2;\r\n\t\t}else{//error\r\n\t\t\treturn -1;\r\n\t\t}\r\n\t}\r\n\treturn -1;\r\n}\r\n\r\n/**\r\n * @param source\r\n */\r\nfunction ElementAttributes(source){\r\n\t\r\n}\r\nElementAttributes.prototype = {\r\n\tsetTagName:function(tagName){\r\n\t\tif(!tagNamePattern.test(tagName)){\r\n\t\t\tthrow new Error('invalid tagName:'+tagName)\r\n\t\t}\r\n\t\tthis.tagName = tagName\r\n\t},\r\n\tadd:function(qName,value,offset){\r\n\t\tif(!tagNamePattern.test(qName)){\r\n\t\t\tthrow new Error('invalid attribute:'+qName)\r\n\t\t}\r\n\t\tthis[this.length++] = {qName:qName,value:value,offset:offset}\r\n\t},\r\n\tlength:0,\r\n\tgetLocalName:function(i){return this[i].localName},\r\n\tgetLocator:function(i){return this[i].locator},\r\n\tgetQName:function(i){return this[i].qName},\r\n\tgetURI:function(i){return this[i].uri},\r\n\tgetValue:function(i){return this[i].value}\r\n//\t,getIndex:function(uri, localName)){\r\n//\t\tif(localName){\r\n//\t\t\t\r\n//\t\t}else{\r\n//\t\t\tvar qName = uri\r\n//\t\t}\r\n//\t},\r\n//\tgetValue:function(){return this.getValue(this.getIndex.apply(this,arguments))},\r\n//\tgetType:function(uri,localName){}\r\n//\tgetType:function(i){},\r\n}\r\n\r\n\r\n\r\n\r\nfunction _set_proto_(thiz,parent){\r\n\tthiz.__proto__ = parent;\r\n\treturn thiz;\r\n}\r\nif(!(_set_proto_({},_set_proto_.prototype) instanceof _set_proto_)){\r\n\t_set_proto_ = function(thiz,parent){\r\n\t\tfunction p(){};\r\n\t\tp.prototype = parent;\r\n\t\tp = new p();\r\n\t\tfor(parent in thiz){\r\n\t\t\tp[parent] = thiz[parent];\r\n\t\t}\r\n\t\treturn p;\r\n\t}\r\n}\r\n\r\nfunction split(source,start){\r\n\tvar match;\r\n\tvar buf = [];\r\n\tvar reg = /'[^']+'|\"[^\"]+\"|[^\\s<>\\/=]+=?|(\\/?\\s*>|<)/g;\r\n\treg.lastIndex = start;\r\n\treg.exec(source);//skip <\r\n\twhile(match = reg.exec(source)){\r\n\t\tbuf.push(match);\r\n\t\tif(match[1])return buf;\r\n\t}\r\n}\r\n\r\nexports.XMLReader = XMLReader;\r\n\r\n","const jsonld = require('jsonld');\nconst DataFactory = require('@rdfjs/data-model')\n\nmodule.exports = class {\n\n  constructor (options) {\n    this.documentIRI = options.documentIRI;\n    this.factory = options.factory || DataFactory;\n  }\n  \n  term (plainTerm) {\n    switch (plainTerm.termType) {\n      case 'NamedNode':\n        return DataFactory.namedNode(plainTerm.value)\n      case 'BlankNode':\n        return DataFactory.blankNode(plainTerm.value.substr(2))\n      case 'Literal':\n        return DataFactory.literal(plainTerm.value, plainTerm.language || DataFactory.namedNode(plainTerm.datatype.value))\n      case 'DefaultGraph':\n        return DataFactory.defaultGraph()\n      default:\n        throw Error('unknown termType: ' + plainTerm.termType)\n    }\n  }\n  \n  addEqualsMethodToQuad (quad) {\n    quad.subject = this.term(quad.subject);\n    quad.predicate = this.term(quad.predicate);\n    quad.object = this.term(quad.object);\n    quad.graph = this.term(quad.graph);\n    return quad;\n  }\n\n  parse (document, callback) {\n    jsonld.toRDF(JSON.parse(document), {base: this.documentIRI}, (error, quads) => {\n      for (var index in quads) {\n        var quad = quads[index];\n        \n        callback(null, this.addEqualsMethodToQuad(quad));\n        if (index == quads.length-1 ) {\n          //This is the end\n          callback(null, null);\n        }\n      }\n      if (error) {\n        callback(error);\n      }\n    });\n  }\n}\n","var objectWithoutPropertiesLoose = require(\"./objectWithoutPropertiesLoose\");\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutProperties;","function _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;","/**\n * Copyright (c) 2016-2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst util = require('./util');\n\nmodule.exports = class AsyncAlgorithm {\n  constructor({\n    maxCallStackDepth = 500,\n    maxTotalCallStackDepth = 0xFFFFFFFF,\n    // milliseconds\n    timeSlice = 10\n  } = {}) {\n    this.schedule = {};\n    this.schedule.MAX_DEPTH = maxCallStackDepth;\n    this.schedule.MAX_TOTAL_DEPTH = maxTotalCallStackDepth;\n    this.schedule.depth = 0;\n    this.schedule.totalDepth = 0;\n    this.schedule.timeSlice = timeSlice;\n  }\n\n  // do some work in a time slice, but in serial\n  doWork(fn, callback) {\n    const schedule = this.schedule;\n\n    if(schedule.totalDepth >= schedule.MAX_TOTAL_DEPTH) {\n      return callback(new Error(\n        'Maximum total call stack depth exceeded; canonicalization aborting.'));\n    }\n\n    (function work() {\n      if(schedule.depth === schedule.MAX_DEPTH) {\n        // stack too deep, run on next tick\n        schedule.depth = 0;\n        schedule.running = false;\n        return util.nextTick(work);\n      }\n\n      // if not yet running, force run\n      const now = Date.now();\n      if(!schedule.running) {\n        schedule.start = Date.now();\n        schedule.deadline = schedule.start + schedule.timeSlice;\n      }\n\n      // TODO: should also include an estimate of expectedWorkTime\n      if(now < schedule.deadline) {\n        schedule.running = true;\n        schedule.depth++;\n        schedule.totalDepth++;\n        return fn((err, result) => {\n          schedule.depth--;\n          schedule.totalDepth--;\n          callback(err, result);\n        });\n      }\n\n      // not enough time left in this slice, run after letting browser\n      // do some other things\n      schedule.depth = 0;\n      schedule.running = false;\n      util.setImmediate(work);\n    })();\n  }\n\n  // asynchronously loop\n  forEach(iterable, fn, callback) {\n    const self = this;\n    let iterator;\n    let idx = 0;\n    let length;\n    if(Array.isArray(iterable)) {\n      length = iterable.length;\n      iterator = () => {\n        if(idx === length) {\n          return false;\n        }\n        iterator.value = iterable[idx++];\n        iterator.key = idx;\n        return true;\n      };\n    } else {\n      const keys = Object.keys(iterable);\n      length = keys.length;\n      iterator = () => {\n        if(idx === length) {\n          return false;\n        }\n        iterator.key = keys[idx++];\n        iterator.value = iterable[iterator.key];\n        return true;\n      };\n    }\n\n    (function iterate(err) {\n      if(err) {\n        return callback(err);\n      }\n      if(iterator()) {\n        return self.doWork(() => fn(iterator.value, iterator.key, iterate));\n      }\n      callback();\n    })();\n  }\n\n  // asynchronous waterfall\n  waterfall(fns, callback) {\n    const self = this;\n    self.forEach(\n      fns, (fn, idx, callback) => self.doWork(fn, callback), callback);\n  }\n\n  // asynchronous while\n  whilst(condition, fn, callback) {\n    const self = this;\n    (function loop(err) {\n      if(err) {\n        return callback(err);\n      }\n      if(!condition()) {\n        return callback();\n      }\n      self.doWork(fn, loop);\n    })();\n  }\n};\n","/**\n * Secure Hash Algorithm with 160-bit digest (SHA-1) implementation.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2015 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./md');\nrequire('./util');\n\nvar sha1 = module.exports = forge.sha1 = forge.sha1 || {};\nforge.md.sha1 = forge.md.algorithms.sha1 = sha1;\n\n/**\n * Creates a SHA-1 message digest object.\n *\n * @return a message digest object.\n */\nsha1.create = function() {\n  // do initialization as necessary\n  if(!_initialized) {\n    _init();\n  }\n\n  // SHA-1 state contains five 32-bit integers\n  var _state = null;\n\n  // input buffer\n  var _input = forge.util.createBuffer();\n\n  // used for word storage\n  var _w = new Array(80);\n\n  // message digest object\n  var md = {\n    algorithm: 'sha1',\n    blockLength: 64,\n    digestLength: 20,\n    // 56-bit length of message so far (does not including padding)\n    messageLength: 0,\n    // true message length\n    fullMessageLength: null,\n    // size of message length in bytes\n    messageLengthSize: 8\n  };\n\n  /**\n   * Starts the digest.\n   *\n   * @return this digest object.\n   */\n  md.start = function() {\n    // up to 56-bit message length for convenience\n    md.messageLength = 0;\n\n    // full message length (set md.messageLength64 for backwards-compatibility)\n    md.fullMessageLength = md.messageLength64 = [];\n    var int32s = md.messageLengthSize / 4;\n    for(var i = 0; i < int32s; ++i) {\n      md.fullMessageLength.push(0);\n    }\n    _input = forge.util.createBuffer();\n    _state = {\n      h0: 0x67452301,\n      h1: 0xEFCDAB89,\n      h2: 0x98BADCFE,\n      h3: 0x10325476,\n      h4: 0xC3D2E1F0\n    };\n    return md;\n  };\n  // start digest automatically for first time\n  md.start();\n\n  /**\n   * Updates the digest with the given message input. The given input can\n   * treated as raw input (no encoding will be applied) or an encoding of\n   * 'utf8' maybe given to encode the input using UTF-8.\n   *\n   * @param msg the message input to update with.\n   * @param encoding the encoding to use (default: 'raw', other: 'utf8').\n   *\n   * @return this digest object.\n   */\n  md.update = function(msg, encoding) {\n    if(encoding === 'utf8') {\n      msg = forge.util.encodeUtf8(msg);\n    }\n\n    // update message length\n    var len = msg.length;\n    md.messageLength += len;\n    len = [(len / 0x100000000) >>> 0, len >>> 0];\n    for(var i = md.fullMessageLength.length - 1; i >= 0; --i) {\n      md.fullMessageLength[i] += len[1];\n      len[1] = len[0] + ((md.fullMessageLength[i] / 0x100000000) >>> 0);\n      md.fullMessageLength[i] = md.fullMessageLength[i] >>> 0;\n      len[0] = ((len[1] / 0x100000000) >>> 0);\n    }\n\n    // add bytes to input buffer\n    _input.putBytes(msg);\n\n    // process bytes\n    _update(_state, _w, _input);\n\n    // compact input buffer every 2K or if empty\n    if(_input.read > 2048 || _input.length() === 0) {\n      _input.compact();\n    }\n\n    return md;\n  };\n\n  /**\n   * Produces the digest.\n   *\n   * @return a byte buffer containing the digest value.\n   */\n  md.digest = function() {\n    /* Note: Here we copy the remaining bytes in the input buffer and\n    add the appropriate SHA-1 padding. Then we do the final update\n    on a copy of the state so that if the user wants to get\n    intermediate digests they can do so. */\n\n    /* Determine the number of bytes that must be added to the message\n    to ensure its length is congruent to 448 mod 512. In other words,\n    the data to be digested must be a multiple of 512 bits (or 128 bytes).\n    This data includes the message, some padding, and the length of the\n    message. Since the length of the message will be encoded as 8 bytes (64\n    bits), that means that the last segment of the data must have 56 bytes\n    (448 bits) of message and padding. Therefore, the length of the message\n    plus the padding must be congruent to 448 mod 512 because\n    512 - 128 = 448.\n\n    In order to fill up the message length it must be filled with\n    padding that begins with 1 bit followed by all 0 bits. Padding\n    must *always* be present, so if the message length is already\n    congruent to 448 mod 512, then 512 padding bits must be added. */\n\n    var finalBlock = forge.util.createBuffer();\n    finalBlock.putBytes(_input.bytes());\n\n    // compute remaining size to be digested (include message length size)\n    var remaining = (\n      md.fullMessageLength[md.fullMessageLength.length - 1] +\n      md.messageLengthSize);\n\n    // add padding for overflow blockSize - overflow\n    // _padding starts with 1 byte with first bit is set (byte value 128), then\n    // there may be up to (blockSize - 1) other pad bytes\n    var overflow = remaining & (md.blockLength - 1);\n    finalBlock.putBytes(_padding.substr(0, md.blockLength - overflow));\n\n    // serialize message length in bits in big-endian order; since length\n    // is stored in bytes we multiply by 8 and add carry from next int\n    var next, carry;\n    var bits = md.fullMessageLength[0] * 8;\n    for(var i = 0; i < md.fullMessageLength.length - 1; ++i) {\n      next = md.fullMessageLength[i + 1] * 8;\n      carry = (next / 0x100000000) >>> 0;\n      bits += carry;\n      finalBlock.putInt32(bits >>> 0);\n      bits = next >>> 0;\n    }\n    finalBlock.putInt32(bits);\n\n    var s2 = {\n      h0: _state.h0,\n      h1: _state.h1,\n      h2: _state.h2,\n      h3: _state.h3,\n      h4: _state.h4\n    };\n    _update(s2, _w, finalBlock);\n    var rval = forge.util.createBuffer();\n    rval.putInt32(s2.h0);\n    rval.putInt32(s2.h1);\n    rval.putInt32(s2.h2);\n    rval.putInt32(s2.h3);\n    rval.putInt32(s2.h4);\n    return rval;\n  };\n\n  return md;\n};\n\n// sha-1 padding bytes not initialized yet\nvar _padding = null;\nvar _initialized = false;\n\n/**\n * Initializes the constant tables.\n */\nfunction _init() {\n  // create padding\n  _padding = String.fromCharCode(128);\n  _padding += forge.util.fillString(String.fromCharCode(0x00), 64);\n\n  // now initialized\n  _initialized = true;\n}\n\n/**\n * Updates a SHA-1 state with the given byte buffer.\n *\n * @param s the SHA-1 state to update.\n * @param w the array to use to store words.\n * @param bytes the byte buffer to update with.\n */\nfunction _update(s, w, bytes) {\n  // consume 512 bit (64 byte) chunks\n  var t, a, b, c, d, e, f, i;\n  var len = bytes.length();\n  while(len >= 64) {\n    // the w array will be populated with sixteen 32-bit big-endian words\n    // and then extended into 80 32-bit words according to SHA-1 algorithm\n    // and for 32-79 using Max Locktyukhin's optimization\n\n    // initialize hash value for this chunk\n    a = s.h0;\n    b = s.h1;\n    c = s.h2;\n    d = s.h3;\n    e = s.h4;\n\n    // round 1\n    for(i = 0; i < 16; ++i) {\n      t = bytes.getInt32();\n      w[i] = t;\n      f = d ^ (b & (c ^ d));\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x5A827999 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    for(; i < 20; ++i) {\n      t = (w[i - 3] ^ w[i - 8] ^ w[i - 14] ^ w[i - 16]);\n      t = (t << 1) | (t >>> 31);\n      w[i] = t;\n      f = d ^ (b & (c ^ d));\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x5A827999 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    // round 2\n    for(; i < 32; ++i) {\n      t = (w[i - 3] ^ w[i - 8] ^ w[i - 14] ^ w[i - 16]);\n      t = (t << 1) | (t >>> 31);\n      w[i] = t;\n      f = b ^ c ^ d;\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x6ED9EBA1 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    for(; i < 40; ++i) {\n      t = (w[i - 6] ^ w[i - 16] ^ w[i - 28] ^ w[i - 32]);\n      t = (t << 2) | (t >>> 30);\n      w[i] = t;\n      f = b ^ c ^ d;\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x6ED9EBA1 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    // round 3\n    for(; i < 60; ++i) {\n      t = (w[i - 6] ^ w[i - 16] ^ w[i - 28] ^ w[i - 32]);\n      t = (t << 2) | (t >>> 30);\n      w[i] = t;\n      f = (b & c) | (d & (b ^ c));\n      t = ((a << 5) | (a >>> 27)) + f + e + 0x8F1BBCDC + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n    // round 4\n    for(; i < 80; ++i) {\n      t = (w[i - 6] ^ w[i - 16] ^ w[i - 28] ^ w[i - 32]);\n      t = (t << 2) | (t >>> 30);\n      w[i] = t;\n      f = b ^ c ^ d;\n      t = ((a << 5) | (a >>> 27)) + f + e + 0xCA62C1D6 + t;\n      e = d;\n      d = c;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      c = ((b << 30) | (b >>> 2)) >>> 0;\n      b = a;\n      a = t;\n    }\n\n    // update hash state\n    s.h0 = (s.h0 + a) | 0;\n    s.h1 = (s.h1 + b) | 0;\n    s.h2 = (s.h2 + c) | 0;\n    s.h3 = (s.h3 + d) | 0;\n    s.h4 = (s.h4 + e) | 0;\n\n    len -= 64;\n  }\n}\n","/**\n * Base-N/Base-X encoding/decoding functions.\n *\n * Original implementation from base-x:\n * https://github.com/cryptocoinjs/base-x\n *\n * Which is MIT licensed:\n *\n * The MIT License (MIT)\n *\n * Copyright base-x contributors (c) 2016\n *\n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING\n * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER\n * DEALINGS IN THE SOFTWARE.\n */\nvar api = {};\nmodule.exports = api;\n\n// baseN alphabet indexes\nvar _reverseAlphabets = {};\n\n/**\n * BaseN-encodes a Uint8Array using the given alphabet.\n *\n * @param input the Uint8Array to encode.\n * @param maxline the maximum number of encoded characters per line to use,\n *          defaults to none.\n *\n * @return the baseN-encoded output string.\n */\napi.encode = function(input, alphabet, maxline) {\n  if(typeof alphabet !== 'string') {\n    throw new TypeError('\"alphabet\" must be a string.');\n  }\n  if(maxline !== undefined && typeof maxline !== 'number') {\n    throw new TypeError('\"maxline\" must be a number.');\n  }\n\n  var output = '';\n\n  if(!(input instanceof Uint8Array)) {\n    // assume forge byte buffer\n    output = _encodeWithByteBuffer(input, alphabet);\n  } else {\n    var i = 0;\n    var base = alphabet.length;\n    var first = alphabet.charAt(0);\n    var digits = [0];\n    for(i = 0; i < input.length; ++i) {\n      for(var j = 0, carry = input[i]; j < digits.length; ++j) {\n        carry += digits[j] << 8;\n        digits[j] = carry % base;\n        carry = (carry / base) | 0;\n      }\n\n      while(carry > 0) {\n        digits.push(carry % base);\n        carry = (carry / base) | 0;\n      }\n    }\n\n    // deal with leading zeros\n    for(i = 0; input[i] === 0 && i < input.length - 1; ++i) {\n      output += first;\n    }\n    // convert digits to a string\n    for(i = digits.length - 1; i >= 0; --i) {\n      output += alphabet[digits[i]];\n    }\n  }\n\n  if(maxline) {\n    var regex = new RegExp('.{1,' + maxline + '}', 'g');\n    output = output.match(regex).join('\\r\\n');\n  }\n\n  return output;\n};\n\n/**\n * Decodes a baseN-encoded (using the given alphabet) string to a\n * Uint8Array.\n *\n * @param input the baseN-encoded input string.\n *\n * @return the Uint8Array.\n */\napi.decode = function(input, alphabet) {\n  if(typeof input !== 'string') {\n    throw new TypeError('\"input\" must be a string.');\n  }\n  if(typeof alphabet !== 'string') {\n    throw new TypeError('\"alphabet\" must be a string.');\n  }\n\n  var table = _reverseAlphabets[alphabet];\n  if(!table) {\n    // compute reverse alphabet\n    table = _reverseAlphabets[alphabet] = [];\n    for(var i = 0; i < alphabet.length; ++i) {\n      table[alphabet.charCodeAt(i)] = i;\n    }\n  }\n\n  // remove whitespace characters\n  input = input.replace(/\\s/g, '');\n\n  var base = alphabet.length;\n  var first = alphabet.charAt(0);\n  var bytes = [0];\n  for(var i = 0; i < input.length; i++) {\n    var value = table[input.charCodeAt(i)];\n    if(value === undefined) {\n      return;\n    }\n\n    for(var j = 0, carry = value; j < bytes.length; ++j) {\n      carry += bytes[j] * base;\n      bytes[j] = carry & 0xff;\n      carry >>= 8;\n    }\n\n    while(carry > 0) {\n      bytes.push(carry & 0xff);\n      carry >>= 8;\n    }\n  }\n\n  // deal with leading zeros\n  for(var k = 0; input[k] === first && k < input.length - 1; ++k) {\n    bytes.push(0);\n  }\n\n  if(typeof Buffer !== 'undefined') {\n    return Buffer.from(bytes.reverse());\n  }\n\n  return new Uint8Array(bytes.reverse());\n};\n\nfunction _encodeWithByteBuffer(input, alphabet) {\n  var i = 0;\n  var base = alphabet.length;\n  var first = alphabet.charAt(0);\n  var digits = [0];\n  for(i = 0; i < input.length(); ++i) {\n    for(var j = 0, carry = input.at(i); j < digits.length; ++j) {\n      carry += digits[j] << 8;\n      digits[j] = carry % base;\n      carry = (carry / base) | 0;\n    }\n\n    while(carry > 0) {\n      digits.push(carry % base);\n      carry = (carry / base) | 0;\n    }\n  }\n\n  var output = '';\n\n  // deal with leading zeros\n  for(i = 0; input.at(i) === 0 && i < input.length() - 1; ++i) {\n    output += first;\n  }\n  // convert digits to a string\n  for(i = digits.length - 1; i >= 0; --i) {\n    output += alphabet[digits[i]];\n  }\n\n  return output;\n}\n","/**\n * Secure Hash Algorithm with 256-bit digest (SHA-256) implementation.\n *\n * See FIPS 180-2 for details.\n *\n * @author Dave Longley\n *\n * Copyright (c) 2010-2015 Digital Bazaar, Inc.\n */\nvar forge = require('./forge');\nrequire('./md');\nrequire('./util');\n\nvar sha256 = module.exports = forge.sha256 = forge.sha256 || {};\nforge.md.sha256 = forge.md.algorithms.sha256 = sha256;\n\n/**\n * Creates a SHA-256 message digest object.\n *\n * @return a message digest object.\n */\nsha256.create = function() {\n  // do initialization as necessary\n  if(!_initialized) {\n    _init();\n  }\n\n  // SHA-256 state contains eight 32-bit integers\n  var _state = null;\n\n  // input buffer\n  var _input = forge.util.createBuffer();\n\n  // used for word storage\n  var _w = new Array(64);\n\n  // message digest object\n  var md = {\n    algorithm: 'sha256',\n    blockLength: 64,\n    digestLength: 32,\n    // 56-bit length of message so far (does not including padding)\n    messageLength: 0,\n    // true message length\n    fullMessageLength: null,\n    // size of message length in bytes\n    messageLengthSize: 8\n  };\n\n  /**\n   * Starts the digest.\n   *\n   * @return this digest object.\n   */\n  md.start = function() {\n    // up to 56-bit message length for convenience\n    md.messageLength = 0;\n\n    // full message length (set md.messageLength64 for backwards-compatibility)\n    md.fullMessageLength = md.messageLength64 = [];\n    var int32s = md.messageLengthSize / 4;\n    for(var i = 0; i < int32s; ++i) {\n      md.fullMessageLength.push(0);\n    }\n    _input = forge.util.createBuffer();\n    _state = {\n      h0: 0x6A09E667,\n      h1: 0xBB67AE85,\n      h2: 0x3C6EF372,\n      h3: 0xA54FF53A,\n      h4: 0x510E527F,\n      h5: 0x9B05688C,\n      h6: 0x1F83D9AB,\n      h7: 0x5BE0CD19\n    };\n    return md;\n  };\n  // start digest automatically for first time\n  md.start();\n\n  /**\n   * Updates the digest with the given message input. The given input can\n   * treated as raw input (no encoding will be applied) or an encoding of\n   * 'utf8' maybe given to encode the input using UTF-8.\n   *\n   * @param msg the message input to update with.\n   * @param encoding the encoding to use (default: 'raw', other: 'utf8').\n   *\n   * @return this digest object.\n   */\n  md.update = function(msg, encoding) {\n    if(encoding === 'utf8') {\n      msg = forge.util.encodeUtf8(msg);\n    }\n\n    // update message length\n    var len = msg.length;\n    md.messageLength += len;\n    len = [(len / 0x100000000) >>> 0, len >>> 0];\n    for(var i = md.fullMessageLength.length - 1; i >= 0; --i) {\n      md.fullMessageLength[i] += len[1];\n      len[1] = len[0] + ((md.fullMessageLength[i] / 0x100000000) >>> 0);\n      md.fullMessageLength[i] = md.fullMessageLength[i] >>> 0;\n      len[0] = ((len[1] / 0x100000000) >>> 0);\n    }\n\n    // add bytes to input buffer\n    _input.putBytes(msg);\n\n    // process bytes\n    _update(_state, _w, _input);\n\n    // compact input buffer every 2K or if empty\n    if(_input.read > 2048 || _input.length() === 0) {\n      _input.compact();\n    }\n\n    return md;\n  };\n\n  /**\n   * Produces the digest.\n   *\n   * @return a byte buffer containing the digest value.\n   */\n  md.digest = function() {\n    /* Note: Here we copy the remaining bytes in the input buffer and\n    add the appropriate SHA-256 padding. Then we do the final update\n    on a copy of the state so that if the user wants to get\n    intermediate digests they can do so. */\n\n    /* Determine the number of bytes that must be added to the message\n    to ensure its length is congruent to 448 mod 512. In other words,\n    the data to be digested must be a multiple of 512 bits (or 128 bytes).\n    This data includes the message, some padding, and the length of the\n    message. Since the length of the message will be encoded as 8 bytes (64\n    bits), that means that the last segment of the data must have 56 bytes\n    (448 bits) of message and padding. Therefore, the length of the message\n    plus the padding must be congruent to 448 mod 512 because\n    512 - 128 = 448.\n\n    In order to fill up the message length it must be filled with\n    padding that begins with 1 bit followed by all 0 bits. Padding\n    must *always* be present, so if the message length is already\n    congruent to 448 mod 512, then 512 padding bits must be added. */\n\n    var finalBlock = forge.util.createBuffer();\n    finalBlock.putBytes(_input.bytes());\n\n    // compute remaining size to be digested (include message length size)\n    var remaining = (\n      md.fullMessageLength[md.fullMessageLength.length - 1] +\n      md.messageLengthSize);\n\n    // add padding for overflow blockSize - overflow\n    // _padding starts with 1 byte with first bit is set (byte value 128), then\n    // there may be up to (blockSize - 1) other pad bytes\n    var overflow = remaining & (md.blockLength - 1);\n    finalBlock.putBytes(_padding.substr(0, md.blockLength - overflow));\n\n    // serialize message length in bits in big-endian order; since length\n    // is stored in bytes we multiply by 8 and add carry from next int\n    var next, carry;\n    var bits = md.fullMessageLength[0] * 8;\n    for(var i = 0; i < md.fullMessageLength.length - 1; ++i) {\n      next = md.fullMessageLength[i + 1] * 8;\n      carry = (next / 0x100000000) >>> 0;\n      bits += carry;\n      finalBlock.putInt32(bits >>> 0);\n      bits = next >>> 0;\n    }\n    finalBlock.putInt32(bits);\n\n    var s2 = {\n      h0: _state.h0,\n      h1: _state.h1,\n      h2: _state.h2,\n      h3: _state.h3,\n      h4: _state.h4,\n      h5: _state.h5,\n      h6: _state.h6,\n      h7: _state.h7\n    };\n    _update(s2, _w, finalBlock);\n    var rval = forge.util.createBuffer();\n    rval.putInt32(s2.h0);\n    rval.putInt32(s2.h1);\n    rval.putInt32(s2.h2);\n    rval.putInt32(s2.h3);\n    rval.putInt32(s2.h4);\n    rval.putInt32(s2.h5);\n    rval.putInt32(s2.h6);\n    rval.putInt32(s2.h7);\n    return rval;\n  };\n\n  return md;\n};\n\n// sha-256 padding bytes not initialized yet\nvar _padding = null;\nvar _initialized = false;\n\n// table of constants\nvar _k = null;\n\n/**\n * Initializes the constant tables.\n */\nfunction _init() {\n  // create padding\n  _padding = String.fromCharCode(128);\n  _padding += forge.util.fillString(String.fromCharCode(0x00), 64);\n\n  // create K table for SHA-256\n  _k = [\n    0x428a2f98, 0x71374491, 0xb5c0fbcf, 0xe9b5dba5,\n    0x3956c25b, 0x59f111f1, 0x923f82a4, 0xab1c5ed5,\n    0xd807aa98, 0x12835b01, 0x243185be, 0x550c7dc3,\n    0x72be5d74, 0x80deb1fe, 0x9bdc06a7, 0xc19bf174,\n    0xe49b69c1, 0xefbe4786, 0x0fc19dc6, 0x240ca1cc,\n    0x2de92c6f, 0x4a7484aa, 0x5cb0a9dc, 0x76f988da,\n    0x983e5152, 0xa831c66d, 0xb00327c8, 0xbf597fc7,\n    0xc6e00bf3, 0xd5a79147, 0x06ca6351, 0x14292967,\n    0x27b70a85, 0x2e1b2138, 0x4d2c6dfc, 0x53380d13,\n    0x650a7354, 0x766a0abb, 0x81c2c92e, 0x92722c85,\n    0xa2bfe8a1, 0xa81a664b, 0xc24b8b70, 0xc76c51a3,\n    0xd192e819, 0xd6990624, 0xf40e3585, 0x106aa070,\n    0x19a4c116, 0x1e376c08, 0x2748774c, 0x34b0bcb5,\n    0x391c0cb3, 0x4ed8aa4a, 0x5b9cca4f, 0x682e6ff3,\n    0x748f82ee, 0x78a5636f, 0x84c87814, 0x8cc70208,\n    0x90befffa, 0xa4506ceb, 0xbef9a3f7, 0xc67178f2];\n\n  // now initialized\n  _initialized = true;\n}\n\n/**\n * Updates a SHA-256 state with the given byte buffer.\n *\n * @param s the SHA-256 state to update.\n * @param w the array to use to store words.\n * @param bytes the byte buffer to update with.\n */\nfunction _update(s, w, bytes) {\n  // consume 512 bit (64 byte) chunks\n  var t1, t2, s0, s1, ch, maj, i, a, b, c, d, e, f, g, h;\n  var len = bytes.length();\n  while(len >= 64) {\n    // the w array will be populated with sixteen 32-bit big-endian words\n    // and then extended into 64 32-bit words according to SHA-256\n    for(i = 0; i < 16; ++i) {\n      w[i] = bytes.getInt32();\n    }\n    for(; i < 64; ++i) {\n      // XOR word 2 words ago rot right 17, rot right 19, shft right 10\n      t1 = w[i - 2];\n      t1 =\n        ((t1 >>> 17) | (t1 << 15)) ^\n        ((t1 >>> 19) | (t1 << 13)) ^\n        (t1 >>> 10);\n      // XOR word 15 words ago rot right 7, rot right 18, shft right 3\n      t2 = w[i - 15];\n      t2 =\n        ((t2 >>> 7) | (t2 << 25)) ^\n        ((t2 >>> 18) | (t2 << 14)) ^\n        (t2 >>> 3);\n      // sum(t1, word 7 ago, t2, word 16 ago) modulo 2^32\n      w[i] = (t1 + w[i - 7] + t2 + w[i - 16]) | 0;\n    }\n\n    // initialize hash value for this chunk\n    a = s.h0;\n    b = s.h1;\n    c = s.h2;\n    d = s.h3;\n    e = s.h4;\n    f = s.h5;\n    g = s.h6;\n    h = s.h7;\n\n    // round function\n    for(i = 0; i < 64; ++i) {\n      // Sum1(e)\n      s1 =\n        ((e >>> 6) | (e << 26)) ^\n        ((e >>> 11) | (e << 21)) ^\n        ((e >>> 25) | (e << 7));\n      // Ch(e, f, g) (optimized the same way as SHA-1)\n      ch = g ^ (e & (f ^ g));\n      // Sum0(a)\n      s0 =\n        ((a >>> 2) | (a << 30)) ^\n        ((a >>> 13) | (a << 19)) ^\n        ((a >>> 22) | (a << 10));\n      // Maj(a, b, c) (optimized the same way as SHA-1)\n      maj = (a & b) | (c & (a ^ b));\n\n      // main algorithm\n      t1 = h + s1 + ch + _k[i] + w[i];\n      t2 = s0 + maj;\n      h = g;\n      g = f;\n      f = e;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      // can't truncate with `| 0`\n      e = (d + t1) >>> 0;\n      d = c;\n      c = b;\n      b = a;\n      // `>>> 0` necessary to avoid iOS/Safari 10 optimization bug\n      // can't truncate with `| 0`\n      a = (t1 + t2) >>> 0;\n    }\n\n    // update hash state\n    s.h0 = (s.h0 + a) | 0;\n    s.h1 = (s.h1 + b) | 0;\n    s.h2 = (s.h2 + c) | 0;\n    s.h3 = (s.h3 + d) | 0;\n    s.h4 = (s.h4 + e) | 0;\n    s.h5 = (s.h5 + f) | 0;\n    s.h6 = (s.h6 + g) | 0;\n    s.h7 = (s.h7 + h) | 0;\n    len -= 64;\n  }\n}\n","/*\n * Copyright (c) 2016-2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst URDNA2015 = require('./URDNA2015');\nconst util = require('./util');\n\nmodule.exports = class URDNA2012 extends URDNA2015 {\n  constructor(options) {\n    super(options);\n    this.name = 'URGNA2012';\n    this.hashAlgorithm = 'sha1';\n  }\n\n  // helper for modifying component during Hash First Degree Quads\n  modifyFirstDegreeComponent(id, component, key) {\n    if(component.termType !== 'BlankNode') {\n      return component;\n    }\n    component = util.clone(component);\n    if(key === 'name') {\n      component.value = '_:g';\n    } else {\n      component.value = (component.value === id ? '_:a' : '_:z');\n    }\n    return component;\n  }\n\n  // helper for getting a related predicate\n  getRelatedPredicate(quad) {\n    return quad.predicate.value;\n  }\n\n  // helper for creating hash to related blank nodes map\n  createHashToRelated(id, issuer, callback) {\n    const self = this;\n\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    const hashToRelated = {};\n\n    // 2) Get a reference, quads, to the list of quads in the blank node to\n    // quads map for the key identifier.\n    const quads = self.blankNodeInfo[id].quads;\n\n    // 3) For each quad in quads:\n    self.forEach(quads, (quad, idx, callback) => {\n      // 3.1) If the quad's subject is a blank node that does not match\n      // identifier, set hash to the result of the Hash Related Blank Node\n      // algorithm, passing the blank node identifier for subject as related,\n      // quad, path identifier issuer as issuer, and p as position.\n      let position;\n      let related;\n      if(quad.subject.termType === 'BlankNode' && quad.subject.value !== id) {\n        related = quad.subject.value;\n        position = 'p';\n      } else if(\n        quad.object.termType === 'BlankNode' && quad.object.value !== id) {\n        // 3.2) Otherwise, if quad's object is a blank node that does not match\n        // identifier, to the result of the Hash Related Blank Node algorithm,\n        // passing the blank node identifier for object as related, quad, path\n        // identifier issuer as issuer, and r as position.\n        related = quad.object.value;\n        position = 'r';\n      } else {\n        // 3.3) Otherwise, continue to the next quad.\n        return callback();\n      }\n      // 3.4) Add a mapping of hash to the blank node identifier for the\n      // component that matched (subject or object) to hash to related blank\n      // nodes map, adding an entry as necessary.\n      self.hashRelatedBlankNode(\n        related, quad, issuer, position, (err, hash) => {\n        if(err) {\n          return callback(err);\n        }\n        if(hash in hashToRelated) {\n          hashToRelated[hash].push(related);\n        } else {\n          hashToRelated[hash] = [related];\n        }\n        callback();\n      });\n    }, err => callback(err, hashToRelated));\n  }\n};\n","/*\n * Copyright (c) 2016 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst URDNA2015Sync = require('./URDNA2015Sync');\nconst util = require('./util');\n\nmodule.exports = class URDNA2012Sync extends URDNA2015Sync {\n  constructor() {\n    super();\n    this.name = 'URGNA2012';\n    this.hashAlgorithm = 'sha1';\n  }\n\n  // helper for modifying component during Hash First Degree Quads\n  modifyFirstDegreeComponent(id, component, key) {\n    if(component.termType !== 'BlankNode') {\n      return component;\n    }\n    component = util.clone(component);\n    if(key === 'name') {\n      component.value = '_:g';\n    } else {\n      component.value = (component.value === id ? '_:a' : '_:z');\n    }\n    return component;\n  }\n\n  // helper for getting a related predicate\n  getRelatedPredicate(quad) {\n    return quad.predicate.value;\n  }\n\n  // helper for creating hash to related blank nodes map\n  createHashToRelated(id, issuer) {\n    const self = this;\n\n    // 1) Create a hash to related blank nodes map for storing hashes that\n    // identify related blank nodes.\n    const hashToRelated = {};\n\n    // 2) Get a reference, quads, to the list of quads in the blank node to\n    // quads map for the key identifier.\n    const quads = self.blankNodeInfo[id].quads;\n\n    // 3) For each quad in quads:\n    for(let i = 0; i < quads.length; ++i) {\n      // 3.1) If the quad's subject is a blank node that does not match\n      // identifier, set hash to the result of the Hash Related Blank Node\n      // algorithm, passing the blank node identifier for subject as related,\n      // quad, path identifier issuer as issuer, and p as position.\n      const quad = quads[i];\n      let position;\n      let related;\n      if(quad.subject.termType === 'BlankNode' && quad.subject.value !== id) {\n        related = quad.subject.value;\n        position = 'p';\n      } else if(\n        quad.object.termType === 'BlankNode' && quad.object.value !== id) {\n        // 3.2) Otherwise, if quad's object is a blank node that does not match\n        // identifier, to the result of the Hash Related Blank Node algorithm,\n        // passing the blank node identifier for object as related, quad, path\n        // identifier issuer as issuer, and r as position.\n        related = quad.object.value;\n        position = 'r';\n      } else {\n        // 3.3) Otherwise, continue to the next quad.\n        continue;\n      }\n      // 3.4) Add a mapping of hash to the blank node identifier for the\n      // component that matched (subject or object) to hash to related blank\n      // nodes map, adding an entry as necessary.\n      const hash = self.hashRelatedBlankNode(related, quad, issuer, position);\n      if(hash in hashToRelated) {\n        hashToRelated[hash].push(related);\n      } else {\n        hashToRelated[hash] = [related];\n      }\n    }\n\n    return hashToRelated;\n  }\n};\n","function _isNativeFunction(fn) {\n  return Function.toString.call(fn).indexOf(\"[native code]\") !== -1;\n}\n\nmodule.exports = _isNativeFunction;","var setPrototypeOf = require(\"./setPrototypeOf\");\n\nvar isNativeReflectConstruct = require(\"./isNativeReflectConstruct\");\n\nfunction _construct(Parent, args, Class) {\n  if (isNativeReflectConstruct()) {\n    module.exports = _construct = Reflect.construct;\n  } else {\n    module.exports = _construct = function _construct(Parent, args, Class) {\n      var a = [null];\n      a.push.apply(a, args);\n      var Constructor = Function.bind.apply(Parent, a);\n      var instance = new Constructor();\n      if (Class) setPrototypeOf(instance, Class.prototype);\n      return instance;\n    };\n  }\n\n  return _construct.apply(null, arguments);\n}\n\nmodule.exports = _construct;","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\n// TODO: move `NQuads` to its own package\nmodule.exports = require('rdf-canonize').NQuads;\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n/* global Node, XMLSerializer */\n'use strict';\n\nconst {\n  RDF_LANGSTRING,\n  RDF_PLAIN_LITERAL,\n  RDF_OBJECT,\n  RDF_XML_LITERAL,\n  XSD_STRING,\n} = require('./constants');\n\nlet _Node;\nif(typeof Node !== 'undefined') {\n  _Node = Node;\n} else {\n  _Node = {\n    ELEMENT_NODE: 1,\n    ATTRIBUTE_NODE: 2,\n    TEXT_NODE: 3,\n    CDATA_SECTION_NODE: 4,\n    ENTITY_REFERENCE_NODE: 5,\n    ENTITY_NODE: 6,\n    PROCESSING_INSTRUCTION_NODE: 7,\n    COMMENT_NODE: 8,\n    DOCUMENT_NODE: 9,\n    DOCUMENT_TYPE_NODE: 10,\n    DOCUMENT_FRAGMENT_NODE: 11,\n    NOTATION_NODE: 12\n  };\n}\n\nmodule.exports = class Rdfa {\n  /**\n   * Parses the RDF dataset found via the data object from the RDFa API.\n   *\n   * @param data the RDFa API data object.\n   *\n   * @return the RDF dataset.\n   */\n  parse(data) {\n    const dataset = {};\n    dataset['@default'] = [];\n\n    const subjects = data.getSubjects();\n    for(let si = 0; si < subjects.length; ++si) {\n      const subject = subjects[si];\n      if(subject === null) {\n        continue;\n      }\n\n      // get all related triples\n      const triples = data.getSubjectTriples(subject);\n      if(triples === null) {\n        continue;\n      }\n      const predicates = triples.predicates;\n      for(const predicate in predicates) {\n        // iterate over objects\n        const objects = predicates[predicate].objects;\n        for(let oi = 0; oi < objects.length; ++oi) {\n          const object = objects[oi];\n\n          // create RDF triple\n          const triple = {};\n\n          // add subject\n          if(subject.indexOf('_:') === 0) {\n            triple.subject = {type: 'blank node', value: subject};\n          } else {\n            triple.subject = {type: 'IRI', value: subject};\n          }\n\n          // add predicate\n          if(predicate.indexOf('_:') === 0) {\n            triple.predicate = {type: 'blank node', value: predicate};\n          } else {\n            triple.predicate = {type: 'IRI', value: predicate};\n          }\n\n          // serialize XML literal\n          let value = object.value;\n          if(object.type === RDF_XML_LITERAL) {\n            // initialize XMLSerializer\n            const XMLSerializer = getXMLSerializerClass();\n            const serializer = new XMLSerializer();\n            value = '';\n            for(let x = 0; x < object.value.length; x++) {\n              if(object.value[x].nodeType === _Node.ELEMENT_NODE) {\n                value += serializer.serializeToString(object.value[x]);\n              } else if(object.value[x].nodeType === _Node.TEXT_NODE) {\n                value += object.value[x].nodeValue;\n              }\n            }\n          }\n\n          // add object\n          triple.object = {};\n\n          // object is an IRI\n          if(object.type === RDF_OBJECT) {\n            if(object.value.indexOf('_:') === 0) {\n              triple.object.type = 'blank node';\n            } else {\n              triple.object.type = 'IRI';\n            }\n          } else {\n            // object is a literal\n            triple.object.type = 'literal';\n            if(object.type === RDF_PLAIN_LITERAL) {\n              if(object.language) {\n                triple.object.datatype = RDF_LANGSTRING;\n                triple.object.language = object.language;\n              } else {\n                triple.object.datatype = XSD_STRING;\n              }\n            } else {\n              triple.object.datatype = object.type;\n            }\n          }\n          triple.object.value = value;\n\n          // add triple to dataset in default graph\n          dataset['@default'].push(triple);\n        }\n      }\n    }\n\n    return dataset;\n  }\n};\n\nfunction getXMLSerializerClass() {\n  if(typeof XMLSerializer === 'undefined') {\n    return require('xmldom').XMLSerializer;\n  }\n  return XMLSerializer;\n}\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst JsonLdError = require('./JsonLdError');\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isEmptyObject: _isEmptyObject,\n  isString: _isString,\n  isUndefined: _isUndefined\n} = require('./types');\n\nconst {\n  isList: _isList,\n  isValue: _isValue,\n  isGraph: _isGraph\n} = require('./graphTypes');\n\nconst {\n  expandIri: _expandIri,\n  getContextValue: _getContextValue,\n  isKeyword: _isKeyword,\n  process: _processContext,\n  processingMode: _processingMode\n} = require('./context');\n\nconst {\n  isAbsolute: _isAbsoluteIri\n} = require('./url');\n\nconst {\n  addValue: _addValue,\n  asArray: _asArray,\n  getValues: _getValues,\n  validateTypeValue: _validateTypeValue\n} = require('./util');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Recursively expands an element using the given context. Any context in\n * the element will be removed. All context URLs must have been retrieved\n * before calling this method.\n *\n * @param activeCtx the context to use.\n * @param activeProperty the property for the element, null for none.\n * @param element the element to expand.\n * @param options the expansion options.\n * @param insideList true if the element is a list, false if not.\n * @param insideIndex true if the element is inside an index container,\n *          false if not.\n * @param typeScopedContext an optional type-scoped active context for\n *          expanding values of nodes that were expressed according to\n *          a type-scoped context.\n * @param expansionMap(info) a function that can be used to custom map\n *          unmappable values (or to throw an error when they are detected);\n *          if this function returns `undefined` then the default behavior\n *          will be used.\n *\n * @return a Promise that resolves to the expanded value.\n */\napi.expand = ({\n  activeCtx,\n  activeProperty = null,\n  element,\n  options = {},\n  insideList = false,\n  insideIndex = false,\n  typeScopedContext = null,\n  expansionMap = () => undefined\n}) => {\n  // nothing to expand\n  if(element === null || element === undefined) {\n    return null;\n  }\n\n  // disable framing if activeProperty is @default\n  if(activeProperty === '@default') {\n    options = Object.assign({}, options, {isFrame: false});\n  }\n\n  if(!_isArray(element) && !_isObject(element)) {\n    // drop free-floating scalars that are not in lists unless custom mapped\n    if(!insideList && (activeProperty === null ||\n      _expandIri(activeCtx, activeProperty, {vocab: true},\n        options) === '@graph')) {\n      // TODO: use `await` to support async\n      const mapped = expansionMap({\n        unmappedValue: element,\n        activeCtx,\n        activeProperty,\n        options,\n        insideList\n      });\n      if(mapped === undefined) {\n        return null;\n      }\n      return mapped;\n    }\n\n    // expand element according to value expansion rules\n    return _expandValue({activeCtx, activeProperty, value: element, options});\n  }\n\n  // recursively expand array\n  if(_isArray(element)) {\n    let rval = [];\n    const container = _getContextValue(\n      activeCtx, activeProperty, '@container') || [];\n    insideList = insideList || container.includes('@list');\n    for(let i = 0; i < element.length; ++i) {\n      // expand element\n      let e = api.expand({\n        activeCtx,\n        activeProperty,\n        element: element[i],\n        options,\n        expansionMap,\n        insideIndex,\n        typeScopedContext\n      });\n      if(insideList && _isArray(e)) {\n        e = {'@list': e};\n      }\n\n      if(e === null) {\n        // TODO: add `await` for async support\n        e = expansionMap({\n          unmappedValue: element[i],\n          activeCtx,\n          activeProperty,\n          parent: element,\n          index: i,\n          options,\n          expandedParent: rval,\n          insideList\n        });\n        if(e === undefined) {\n          continue;\n        }\n      }\n\n      if(_isArray(e)) {\n        rval = rval.concat(e);\n      } else {\n        rval.push(e);\n      }\n    }\n    return rval;\n  }\n\n  // recursively expand object:\n\n  // first, expand the active property\n  const expandedActiveProperty = _expandIri(\n    activeCtx, activeProperty, {vocab: true}, options);\n\n  // second, determine if any type-scoped context should be reverted; it\n  // should only be reverted when the following are all true:\n  // 1. `element` is not a value or subject reference\n  // 2. `insideIndex` is false\n  typeScopedContext = typeScopedContext ||\n    (activeCtx.previousContext ? activeCtx : null);\n  let keys = Object.keys(element).sort();\n  let mustRevert = !insideIndex;\n  if(mustRevert && typeScopedContext && keys.length <= 2 &&\n    !keys.includes('@context')) {\n    for(const key of keys) {\n      const expandedProperty = _expandIri(\n        typeScopedContext, key, {vocab: true}, options);\n      if(expandedProperty === '@value') {\n        // value found, ensure type-scoped context is used to expand it\n        mustRevert = false;\n        activeCtx = typeScopedContext;\n        break;\n      }\n      if(expandedProperty === '@id' && keys.length === 1) {\n        // subject reference found, do not revert\n        mustRevert = false;\n        break;\n      }\n    }\n  }\n\n  if(mustRevert) {\n    // revert type scoped context\n    activeCtx = activeCtx.revertTypeScopedContext();\n  }\n\n  // if element has a context, process it\n  if('@context' in element) {\n    activeCtx = _processContext(\n      {activeCtx, localCtx: element['@context'], options});\n  }\n\n  // look for scoped contexts on `@type`\n  for(const key of keys) {\n    const expandedProperty = _expandIri(activeCtx, key, {vocab: true}, options);\n    if(expandedProperty === '@type') {\n      // set scoped contexts from @type\n      // avoid sorting if possible\n      const value = element[key];\n      const types =\n        Array.isArray(value) ?\n          (value.length > 1 ? value.slice().sort() : value) : [value];\n      for(const type of types) {\n        const ctx = _getContextValue(\n          activeCtx.previousContext || activeCtx, type, '@context');\n        if(!_isUndefined(ctx)) {\n          activeCtx = _processContext({\n            activeCtx,\n            localCtx: ctx,\n            options,\n            isTypeScopedContext: true\n          });\n        }\n      }\n    }\n  }\n\n  // process each key and value in element, ignoring @nest content\n  let rval = {};\n  _expandObject({\n    activeCtx,\n    activeProperty,\n    expandedActiveProperty,\n    element,\n    expandedParent: rval,\n    options,\n    insideList,\n    typeScopedContext,\n    expansionMap});\n\n  // get property count on expanded output\n  keys = Object.keys(rval);\n  let count = keys.length;\n\n  if('@value' in rval) {\n    // @value must only have @language or @type\n    if('@type' in rval && '@language' in rval) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; an element containing \"@value\" may not ' +\n        'contain both \"@type\" and \"@language\".',\n        'jsonld.SyntaxError', {code: 'invalid value object', element: rval});\n    }\n    let validCount = count - 1;\n    if('@type' in rval) {\n      validCount -= 1;\n    }\n    if('@index' in rval) {\n      validCount -= 1;\n    }\n    if('@language' in rval) {\n      validCount -= 1;\n    }\n    if(validCount !== 0) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; an element containing \"@value\" may only ' +\n        'have an \"@index\" property and at most one other property ' +\n        'which can be \"@type\" or \"@language\".',\n        'jsonld.SyntaxError', {code: 'invalid value object', element: rval});\n    }\n    const values = rval['@value'] === null ? [] : _asArray(rval['@value']);\n    const types = _getValues(rval, '@type');\n\n    // drop null @values unless custom mapped\n    if(values.length === 0) {\n      // TODO: use `await` to support async\n      const mapped = expansionMap({\n        unmappedValue: rval,\n        activeCtx,\n        activeProperty,\n        element,\n        options,\n        insideList\n      });\n      if(mapped !== undefined) {\n        rval = mapped;\n      } else {\n        rval = null;\n      }\n    } else if(!values.every(v => (_isString(v) || _isEmptyObject(v))) &&\n      '@language' in rval) {\n      // if @language is present, @value must be a string\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; only strings may be language-tagged.',\n        'jsonld.SyntaxError',\n        {code: 'invalid language-tagged value', element: rval});\n    } else if(_processingMode(activeCtx, 1.1) && types.includes('@json') &&\n      types.length === 1) {\n      // Any value of @value is okay if @type: @json\n    } else if(!types.every(t =>\n      (_isAbsoluteIri(t) && !(_isString(t) && t.indexOf('_:') === 0) ||\n      _isEmptyObject(t)))) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; an element containing \"@value\" and \"@type\" ' +\n        'must have an absolute IRI for the value of \"@type\".',\n        'jsonld.SyntaxError', {code: 'invalid typed value', element: rval});\n    }\n  } else if('@type' in rval && !_isArray(rval['@type'])) {\n    // convert @type to an array\n    rval['@type'] = [rval['@type']];\n  } else if('@set' in rval || '@list' in rval) {\n    // handle @set and @list\n    if(count > 1 && !(count === 2 && '@index' in rval)) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; if an element has the property \"@set\" ' +\n        'or \"@list\", then it can have at most one other property that is ' +\n        '\"@index\".', 'jsonld.SyntaxError',\n        {code: 'invalid set or list object', element: rval});\n    }\n    // optimize away @set\n    if('@set' in rval) {\n      rval = rval['@set'];\n      keys = Object.keys(rval);\n      count = keys.length;\n    }\n  } else if(count === 1 && '@language' in rval) {\n    // drop objects with only @language unless custom mapped\n    // TODO: use `await` to support async\n    const mapped = expansionMap(rval, {\n      unmappedValue: rval,\n      activeCtx,\n      activeProperty,\n      element,\n      options,\n      insideList\n    });\n    if(mapped !== undefined) {\n      rval = mapped;\n    } else {\n      rval = null;\n    }\n  }\n\n  // drop certain top-level objects that do not occur in lists, unless custom\n  // mapped\n  if(_isObject(rval) &&\n    !options.keepFreeFloatingNodes && !insideList &&\n    (activeProperty === null || expandedActiveProperty === '@graph')) {\n    // drop empty object, top-level @value/@list, or object with only @id\n    if(count === 0 || '@value' in rval || '@list' in rval ||\n      (count === 1 && '@id' in rval)) {\n      // TODO: use `await` to support async\n      const mapped = expansionMap({\n        unmappedValue: rval,\n        activeCtx,\n        activeProperty,\n        element,\n        options,\n        insideList\n      });\n      if(mapped !== undefined) {\n        rval = mapped;\n      } else {\n        rval = null;\n      }\n    }\n  }\n\n  return rval;\n};\n\n/**\n * Expand each key and value of element adding to result\n *\n * @param activeCtx the context to use.\n * @param activeProperty the property for the element.\n * @param expandedActiveProperty the expansion of activeProperty\n * @param element the element to expand.\n * @param expandedParent the expanded result into which to add values.\n * @param options the expansion options.\n * @param insideList true if the element is a list, false if not.\n * @param expansionMap(info) a function that can be used to custom map\n *          unmappable values (or to throw an error when they are detected);\n *          if this function returns `undefined` then the default behavior\n *          will be used.\n */\nfunction _expandObject({\n  activeCtx,\n  activeProperty,\n  expandedActiveProperty,\n  element,\n  expandedParent,\n  options = {},\n  insideList,\n  expansionMap\n}) {\n  const keys = Object.keys(element).sort();\n  const nests = [];\n  for(const key of keys) {\n    let value = element[key];\n    let expandedValue;\n\n    // skip @context\n    if(key === '@context') {\n      continue;\n    }\n\n    // expand property\n    let expandedProperty = _expandIri(activeCtx, key, {vocab: true}, options);\n\n    // drop non-absolute IRI keys that aren't keywords unless custom mapped\n    if(expandedProperty === null ||\n      !(_isAbsoluteIri(expandedProperty) || _isKeyword(expandedProperty))) {\n      // TODO: use `await` to support async\n      expandedProperty = expansionMap({\n        unmappedProperty: key,\n        activeCtx,\n        activeProperty,\n        parent: element,\n        options,\n        insideList,\n        value,\n        expandedParent\n      });\n      if(expandedProperty === undefined) {\n        continue;\n      }\n    }\n\n    if(_isKeyword(expandedProperty)) {\n      if(expandedActiveProperty === '@reverse') {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; a keyword cannot be used as a @reverse ' +\n          'property.', 'jsonld.SyntaxError',\n          {code: 'invalid reverse property map', value});\n      }\n      if(expandedProperty in expandedParent) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; colliding keywords detected.',\n          'jsonld.SyntaxError',\n          {code: 'colliding keywords', keyword: expandedProperty});\n      }\n    }\n\n    // syntax error if @id is not a string\n    if(expandedProperty === '@id') {\n      if(!_isString(value)) {\n        if(!options.isFrame) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; \"@id\" value must a string.',\n            'jsonld.SyntaxError', {code: 'invalid @id value', value});\n        }\n        if(_isObject(value)) {\n          // empty object is a wildcard\n          if(!_isEmptyObject(value)) {\n            throw new JsonLdError(\n              'Invalid JSON-LD syntax; \"@id\" value an empty object or array ' +\n              'of strings, if framing',\n              'jsonld.SyntaxError', {code: 'invalid @id value', value});\n          }\n        } else if(_isArray(value)) {\n          if(!value.every(v => _isString(v))) {\n            throw new JsonLdError(\n              'Invalid JSON-LD syntax; \"@id\" value an empty object or array ' +\n              'of strings, if framing',\n              'jsonld.SyntaxError', {code: 'invalid @id value', value});\n          }\n        } else {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; \"@id\" value an empty object or array ' +\n            'of strings, if framing',\n            'jsonld.SyntaxError', {code: 'invalid @id value', value});\n        }\n      }\n\n      _addValue(\n        expandedParent, '@id',\n        _asArray(value).map(v =>\n          _isString(v) ? _expandIri(activeCtx, v, {base: true}, options) : v),\n        {propertyIsArray: options.isFrame});\n      continue;\n    }\n\n    if(expandedProperty === '@type') {\n      _validateTypeValue(value);\n      _addValue(\n        expandedParent, '@type',\n        _asArray(value).map(v =>\n          _isString(v) ?\n            _expandIri(activeCtx.previousContext || activeCtx, v,\n              {base: true, vocab: true}, options) : v),\n        {propertyIsArray: options.isFrame});\n      continue;\n    }\n\n    // @graph must be an array or an object\n    if(expandedProperty === '@graph' &&\n      !(_isObject(value) || _isArray(value))) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; \"@graph\" value must not be an ' +\n        'object or an array.',\n        'jsonld.SyntaxError', {code: 'invalid @graph value', value});\n    }\n\n    if(expandedProperty === '@value') {\n      _addValue(\n        expandedParent, '@value', value, {propertyIsArray: options.isFrame});\n      continue;\n    }\n\n    // @language must be a string\n    if(expandedProperty === '@language') {\n      if(value === null) {\n        // drop null @language values, they expand as if they didn't exist\n        continue;\n      }\n      if(!_isString(value) && !options.isFrame) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; \"@language\" value must be a string.',\n          'jsonld.SyntaxError',\n          {code: 'invalid language-tagged string', value});\n      }\n      // ensure language value is lowercase\n      value = _asArray(value).map(v => _isString(v) ? v.toLowerCase() : v);\n\n      _addValue(\n        expandedParent, '@language', value, {propertyIsArray: options.isFrame});\n      continue;\n    }\n\n    // @index must be a string\n    if(expandedProperty === '@index') {\n      if(!_isString(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; \"@index\" value must be a string.',\n          'jsonld.SyntaxError',\n          {code: 'invalid @index value', value});\n      }\n      _addValue(expandedParent, '@index', value);\n      continue;\n    }\n\n    // @reverse must be an object\n    if(expandedProperty === '@reverse') {\n      if(!_isObject(value)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; \"@reverse\" value must be an object.',\n          'jsonld.SyntaxError', {code: 'invalid @reverse value', value});\n      }\n\n      expandedValue = api.expand({\n        activeCtx,\n        activeProperty:\n        '@reverse',\n        element: value,\n        options,\n        expansionMap\n      });\n      // properties double-reversed\n      if('@reverse' in expandedValue) {\n        for(const property in expandedValue['@reverse']) {\n          _addValue(\n            expandedParent, property, expandedValue['@reverse'][property],\n            {propertyIsArray: true});\n        }\n      }\n\n      // FIXME: can this be merged with code below to simplify?\n      // merge in all reversed properties\n      let reverseMap = expandedParent['@reverse'] || null;\n      for(const property in expandedValue) {\n        if(property === '@reverse') {\n          continue;\n        }\n        if(reverseMap === null) {\n          reverseMap = expandedParent['@reverse'] = {};\n        }\n        _addValue(reverseMap, property, [], {propertyIsArray: true});\n        const items = expandedValue[property];\n        for(let ii = 0; ii < items.length; ++ii) {\n          const item = items[ii];\n          if(_isValue(item) || _isList(item)) {\n            throw new JsonLdError(\n              'Invalid JSON-LD syntax; \"@reverse\" value must not be a ' +\n              '@value or an @list.', 'jsonld.SyntaxError',\n              {code: 'invalid reverse property value', value: expandedValue});\n          }\n          _addValue(reverseMap, property, item, {propertyIsArray: true});\n        }\n      }\n\n      continue;\n    }\n\n    // nested keys\n    if(expandedProperty === '@nest') {\n      nests.push(key);\n      continue;\n    }\n\n    // use potential scoped context for key\n    let termCtx = activeCtx;\n    const ctx = _getContextValue(activeCtx, key, '@context');\n    if(!_isUndefined(ctx)) {\n      // Note: spec's `from term` var is named `isPropertyTermScopedContext`\n      termCtx = _processContext({\n        activeCtx,\n        localCtx: ctx,\n        isPropertyTermScopedContext: true,\n        options\n      });\n    }\n\n    const container = _getContextValue(termCtx, key, '@container') || [];\n\n    if(container.includes('@language') && _isObject(value)) {\n      // handle language map container (skip if value is not an object)\n      expandedValue = _expandLanguageMap(termCtx, value, options);\n    } else if(container.includes('@index') && _isObject(value)) {\n      // handle index container (skip if value is not an object)\n      const asGraph = container.includes('@graph');\n      expandedValue = _expandIndexMap({\n        activeCtx: termCtx,\n        options,\n        activeProperty: key,\n        value,\n        expansionMap,\n        asGraph,\n        indexKey: '@index'\n      });\n    } else if(container.includes('@id') && _isObject(value)) {\n      // handle id container (skip if value is not an object)\n      const asGraph = container.includes('@graph');\n      expandedValue = _expandIndexMap({\n        activeCtx: termCtx,\n        options,\n        activeProperty: key,\n        value,\n        expansionMap,\n        asGraph,\n        indexKey: '@id'\n      });\n    } else if(container.includes('@type') && _isObject(value)) {\n      // handle type container (skip if value is not an object)\n      expandedValue = _expandIndexMap({\n        // since container is `@type`, revert type scoped context when expanding\n        activeCtx: termCtx.revertTypeScopedContext(),\n        options,\n        activeProperty: key,\n        value,\n        expansionMap,\n        asGraph: false,\n        indexKey: '@type'\n      });\n    } else {\n      // recurse into @list or @set\n      const isList = (expandedProperty === '@list');\n      if(isList || expandedProperty === '@set') {\n        let nextActiveProperty = activeProperty;\n        if(isList && expandedActiveProperty === '@graph') {\n          nextActiveProperty = null;\n        }\n        expandedValue = api.expand({\n          activeCtx: termCtx,\n          activeProperty: nextActiveProperty,\n          element: value,\n          options,\n          insideList: isList,\n          expansionMap\n        });\n      } else if(\n        _getContextValue(activeCtx, key, '@type') === '@json') {\n        expandedValue = {\n          '@type': '@json',\n          '@value': value\n        };\n      } else {\n        // recursively expand value with key as new active property\n        expandedValue = api.expand({\n          activeCtx: termCtx,\n          activeProperty: key,\n          element: value,\n          options,\n          insideList: false,\n          expansionMap\n        });\n      }\n    }\n\n    // drop null values if property is not @value\n    if(expandedValue === null && expandedProperty !== '@value') {\n      // TODO: use `await` to support async\n      expandedValue = expansionMap({\n        unmappedValue: value,\n        expandedProperty,\n        activeCtx: termCtx,\n        activeProperty,\n        parent: element,\n        options,\n        insideList,\n        key,\n        expandedParent\n      });\n      if(expandedValue === undefined) {\n        continue;\n      }\n    }\n\n    // convert expanded value to @list if container specifies it\n    if(expandedProperty !== '@list' && !_isList(expandedValue) &&\n      container.includes('@list')) {\n      // ensure expanded value in @list is an array\n      expandedValue = {'@list': _asArray(expandedValue)};\n    }\n\n    // convert expanded value to @graph if container specifies it\n    // and value is not, itself, a graph\n    // index cases handled above\n    if(container.includes('@graph') &&\n      !container.some(key => key === '@id' || key === '@index')) {\n      // ensure expanded values are arrays\n      expandedValue = _asArray(expandedValue)\n        .map(v => _isGraph(v) ? v : {'@graph': _asArray(v)});\n    }\n\n    // FIXME: can this be merged with code above to simplify?\n    // merge in reverse properties\n    if(termCtx.mappings.has(key) && termCtx.mappings.get(key).reverse) {\n      const reverseMap =\n        expandedParent['@reverse'] = expandedParent['@reverse'] || {};\n      expandedValue = _asArray(expandedValue);\n      for(let ii = 0; ii < expandedValue.length; ++ii) {\n        const item = expandedValue[ii];\n        if(_isValue(item) || _isList(item)) {\n          throw new JsonLdError(\n            'Invalid JSON-LD syntax; \"@reverse\" value must not be a ' +\n            '@value or an @list.', 'jsonld.SyntaxError',\n            {code: 'invalid reverse property value', value: expandedValue});\n        }\n        _addValue(reverseMap, expandedProperty, item, {propertyIsArray: true});\n      }\n      continue;\n    }\n\n    // add value for property\n    // use an array except for certain keywords\n    const useArray =\n      !['@index', '@id', '@type', '@value', '@language']\n        .includes(expandedProperty);\n    _addValue(expandedParent, expandedProperty, expandedValue, {\n      propertyIsArray: useArray\n    });\n  }\n\n  // @value must not be an object or an array (unless framing) or if @type is\n  // @json\n  if('@value' in element) {\n    const value = element['@value'];\n    if(element['@type'] === '@json' && _processingMode(activeCtx, 1.1)) {\n      // allow any value, to be verified when the object is fully expanded and\n      // the @type is @json.\n    } else if((_isObject(value) || _isArray(value)) && !options.isFrame) {\n      throw new JsonLdError(\n        'Invalid JSON-LD syntax; \"@value\" value must not be an ' +\n        'object or an array.',\n        'jsonld.SyntaxError',\n        {code: 'invalid value object value', value});\n    }\n  }\n\n  // expand each nested key\n  for(const key of nests) {\n    const nestedValues = _isArray(element[key]) ? element[key] : [element[key]];\n    for(const nv of nestedValues) {\n      if(!_isObject(nv) || Object.keys(nv).some(k =>\n        _expandIri(activeCtx, k, {vocab: true}, options) === '@value')) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; nested value must be a node object.',\n          'jsonld.SyntaxError',\n          {code: 'invalid @nest value', value: nv});\n      }\n      _expandObject({\n        activeCtx,\n        activeProperty,\n        expandedActiveProperty,\n        element: nv,\n        expandedParent,\n        options,\n        insideList,\n        expansionMap});\n    }\n  }\n}\n\n/**\n * Expands the given value by using the coercion and keyword rules in the\n * given context.\n *\n * @param activeCtx the active context to use.\n * @param activeProperty the active property the value is associated with.\n * @param value the value to expand.\n * @param {Object} [options] - processing options.\n *\n * @return the expanded value.\n */\nfunction _expandValue({activeCtx, activeProperty, value, options}) {\n  // nothing to expand\n  if(value === null || value === undefined) {\n    return null;\n  }\n\n  // special-case expand @id and @type (skips '@id' expansion)\n  const expandedProperty = _expandIri(\n    activeCtx, activeProperty, {vocab: true}, options);\n  if(expandedProperty === '@id') {\n    return _expandIri(activeCtx, value, {base: true}, options);\n  } else if(expandedProperty === '@type') {\n    return _expandIri(activeCtx, value, {vocab: true, base: true}, options);\n  }\n\n  // get type definition from context\n  const type = _getContextValue(activeCtx, activeProperty, '@type');\n\n  // do @id expansion (automatic for @graph)\n  if((type === '@id' || expandedProperty === '@graph') && _isString(value)) {\n    return {'@id': _expandIri(activeCtx, value, {base: true}, options)};\n  }\n  // do @id expansion w/vocab\n  if(type === '@vocab' && _isString(value)) {\n    return {\n      '@id': _expandIri(activeCtx, value, {vocab: true, base: true}, options)\n    };\n  }\n\n  // do not expand keyword values\n  if(_isKeyword(expandedProperty)) {\n    return value;\n  }\n\n  const rval = {};\n\n  if(type && !['@id', '@vocab'].includes(type)) {\n    // other type\n    rval['@type'] = type;\n  } else if(_isString(value)) {\n    // check for language tagging for strings\n    const language = _getContextValue(activeCtx, activeProperty, '@language');\n    if(language !== null) {\n      rval['@language'] = language;\n    }\n  }\n  // do conversion of values that aren't basic JSON types to strings\n  if(!['boolean', 'number', 'string'].includes(typeof value)) {\n    value = value.toString();\n  }\n  rval['@value'] = value;\n\n  return rval;\n}\n\n/**\n * Expands a language map.\n *\n * @param activeCtx the active context to use.\n * @param languageMap the language map to expand.\n * @param {Object} [options] - processing options.\n *\n * @return the expanded language map.\n */\nfunction _expandLanguageMap(activeCtx, languageMap, options) {\n  const rval = [];\n  const keys = Object.keys(languageMap).sort();\n  for(const key of keys) {\n    const expandedKey = _expandIri(activeCtx, key, {vocab: true}, options);\n    let val = languageMap[key];\n    if(!_isArray(val)) {\n      val = [val];\n    }\n    for(const item of val) {\n      if(item === null) {\n        // null values are allowed (8.5) but ignored (3.1)\n        continue;\n      }\n      if(!_isString(item)) {\n        throw new JsonLdError(\n          'Invalid JSON-LD syntax; language map values must be strings.',\n          'jsonld.SyntaxError',\n          {code: 'invalid language map value', languageMap});\n      }\n      const val = {'@value': item};\n      if(expandedKey !== '@none') {\n        val['@language'] = key.toLowerCase();\n      }\n      rval.push(val);\n    }\n  }\n  return rval;\n}\n\nfunction _expandIndexMap(\n  {activeCtx, options, activeProperty, value, expansionMap, asGraph,\n    indexKey}) {\n  const rval = [];\n  const keys = Object.keys(value).sort();\n  const isTypeIndex = indexKey === '@type';\n  for(let key of keys) {\n    // if indexKey is @type, there may be a context defined for it\n    if(isTypeIndex) {\n      const ctx = _getContextValue(activeCtx, key, '@context');\n      if(!_isUndefined(ctx)) {\n        activeCtx = _processContext({\n          activeCtx,\n          localCtx: ctx,\n          isTypeScopedContext: true,\n          options\n        });\n      }\n    }\n\n    let val = value[key];\n    if(!_isArray(val)) {\n      val = [val];\n    }\n\n    // expand for @type, but also for @none\n    const expandedKey = _expandIri(activeCtx, key, {vocab: true}, options);\n    if(indexKey === '@id') {\n      // expand document relative\n      key = _expandIri(activeCtx, key, {base: true}, options);\n    } else if(isTypeIndex) {\n      key = expandedKey;\n    }\n\n    val = api.expand({\n      activeCtx,\n      activeProperty,\n      element: val,\n      options,\n      insideList: false,\n      insideIndex: true,\n      expansionMap\n    });\n    for(let item of val) {\n      // If this is also a @graph container, turn items into graphs\n      if(asGraph && !_isGraph(item)) {\n        item = {'@graph': [item]};\n      }\n      if(indexKey === '@type') {\n        if(expandedKey === '@none') {\n          // ignore @none\n        } else if(item['@type']) {\n          item['@type'] = [key].concat(item['@type']);\n        } else {\n          item['@type'] = [key];\n        }\n      } else if(expandedKey !== '@none' && !(indexKey in item)) {\n        item[indexKey] = key;\n      }\n      rval.push(item);\n    }\n  }\n  return rval;\n}\n","/*\n * Copyright (c) 2017-2018 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {clone} = require('./util');\n\nmodule.exports = class ActiveContextCache {\n  /**\n   * Creates an active context cache.\n   *\n   * @param size the maximum size of the cache.\n   */\n  constructor(size = 100) {\n    this.order = [];\n    this.cache = new Map();\n    this.size = size;\n  }\n\n  get(activeCtx, localCtx) {\n    const level1 = this.cache.get(activeCtx);\n    if(level1) {\n      const key = JSON.stringify(localCtx);\n      const result = level1.get(key);\n      return result || null;\n    }\n    return null;\n  }\n\n  set(activeCtx, localCtx, result) {\n    if(this.order.length === this.size) {\n      const entry = this.order.shift();\n      this.cache.get(entry.activeCtx).delete(entry.localCtx);\n    }\n    const key = JSON.stringify(localCtx);\n    this.order.push({activeCtx, localCtx: key});\n    let level1 = this.cache.get(activeCtx);\n    if(!level1) {\n      level1 = new Map();\n      this.cache.set(activeCtx, level1);\n    }\n    level1.set(key, clone(result));\n  }\n};\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {\n  isSubjectReference: _isSubjectReference\n} = require('./graphTypes');\n\nconst {\n  createMergedNodeMap: _createMergedNodeMap\n} = require('./nodeMap');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Performs JSON-LD flattening.\n *\n * @param input the expanded JSON-LD to flatten.\n *\n * @return the flattened output.\n */\napi.flatten = input => {\n  const defaultGraph = _createMergedNodeMap(input);\n\n  // produce flattened output\n  const flattened = [];\n  const keys = Object.keys(defaultGraph).sort();\n  for(let ki = 0; ki < keys.length; ++ki) {\n    const node = defaultGraph[keys[ki]];\n    // only add full subjects to top-level\n    if(!_isSubjectReference(node)) {\n      flattened.push(node);\n    }\n  }\n  return flattened;\n};\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst JsonLdError = require('./JsonLdError');\nconst graphTypes = require('./graphTypes');\nconst types = require('./types');\nconst util = require('./util');\n\n// constants\nconst {\n  // RDF,\n  RDF_LIST,\n  RDF_FIRST,\n  RDF_REST,\n  RDF_NIL,\n  RDF_TYPE,\n  // RDF_PLAIN_LITERAL,\n  // RDF_XML_LITERAL,\n  RDF_JSON_LITERAL,\n  // RDF_OBJECT,\n  // RDF_LANGSTRING,\n\n  // XSD,\n  XSD_BOOLEAN,\n  XSD_DOUBLE,\n  XSD_INTEGER,\n  XSD_STRING,\n} = require('./constants');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Converts an RDF dataset to JSON-LD.\n *\n * @param dataset the RDF dataset.\n * @param options the RDF serialization options.\n *\n * @return a Promise that resolves to the JSON-LD output.\n */\napi.fromRDF = async (\n  dataset, {useRdfType = false, useNativeTypes = false}) => {\n  const defaultGraph = {};\n  const graphMap = {'@default': defaultGraph};\n  const referencedOnce = {};\n\n  for(const quad of dataset) {\n    // TODO: change 'name' to 'graph'\n    const name = (quad.graph.termType === 'DefaultGraph') ?\n      '@default' : quad.graph.value;\n    if(!(name in graphMap)) {\n      graphMap[name] = {};\n    }\n    if(name !== '@default' && !(name in defaultGraph)) {\n      defaultGraph[name] = {'@id': name};\n    }\n\n    const nodeMap = graphMap[name];\n\n    // get subject, predicate, object\n    const s = quad.subject.value;\n    const p = quad.predicate.value;\n    const o = quad.object;\n\n    if(!(s in nodeMap)) {\n      nodeMap[s] = {'@id': s};\n    }\n    const node = nodeMap[s];\n\n    const objectIsNode = o.termType.endsWith('Node');\n    if(objectIsNode && !(o.value in nodeMap)) {\n      nodeMap[o.value] = {'@id': o.value};\n    }\n\n    if(p === RDF_TYPE && !useRdfType && objectIsNode) {\n      util.addValue(node, '@type', o.value, {propertyIsArray: true});\n      continue;\n    }\n\n    const value = _RDFToObject(o, useNativeTypes);\n    util.addValue(node, p, value, {propertyIsArray: true});\n\n    // object may be an RDF list/partial list node but we can't know easily\n    // until all triples are read\n    if(objectIsNode) {\n      if(o.value === RDF_NIL) {\n        // track rdf:nil uniquely per graph\n        const object = nodeMap[o.value];\n        if(!('usages' in object)) {\n          object.usages = [];\n        }\n        object.usages.push({\n          node,\n          property: p,\n          value\n        });\n      } else if(o.value in referencedOnce) {\n        // object referenced more than once\n        referencedOnce[o.value] = false;\n      } else {\n        // keep track of single reference\n        referencedOnce[o.value] = {\n          node,\n          property: p,\n          value\n        };\n      }\n    }\n  }\n\n  /*\n  for(let name in dataset) {\n    const graph = dataset[name];\n    if(!(name in graphMap)) {\n      graphMap[name] = {};\n    }\n    if(name !== '@default' && !(name in defaultGraph)) {\n      defaultGraph[name] = {'@id': name};\n    }\n    const nodeMap = graphMap[name];\n    for(let ti = 0; ti < graph.length; ++ti) {\n      const triple = graph[ti];\n\n      // get subject, predicate, object\n      const s = triple.subject.value;\n      const p = triple.predicate.value;\n      const o = triple.object;\n\n      if(!(s in nodeMap)) {\n        nodeMap[s] = {'@id': s};\n      }\n      const node = nodeMap[s];\n\n      const objectIsId = (o.type === 'IRI' || o.type === 'blank node');\n      if(objectIsId && !(o.value in nodeMap)) {\n        nodeMap[o.value] = {'@id': o.value};\n      }\n\n      if(p === RDF_TYPE && !useRdfType && objectIsId) {\n        util.addValue(node, '@type', o.value, {propertyIsArray: true});\n        continue;\n      }\n\n      const value = _RDFToObject(o, useNativeTypes);\n      util.addValue(node, p, value, {propertyIsArray: true});\n\n      // object may be an RDF list/partial list node but we can't know easily\n      // until all triples are read\n      if(objectIsId) {\n        if(o.value === RDF_NIL) {\n          // track rdf:nil uniquely per graph\n          const object = nodeMap[o.value];\n          if(!('usages' in object)) {\n            object.usages = [];\n          }\n          object.usages.push({\n            node: node,\n            property: p,\n            value: value\n          });\n        } else if(o.value in referencedOnce) {\n          // object referenced more than once\n          referencedOnce[o.value] = false;\n        } else {\n          // keep track of single reference\n          referencedOnce[o.value] = {\n            node: node,\n            property: p,\n            value: value\n          };\n        }\n      }\n    }\n  }*/\n\n  // convert linked lists to @list arrays\n  for(const name in graphMap) {\n    const graphObject = graphMap[name];\n\n    // no @lists to be converted, continue\n    if(!(RDF_NIL in graphObject)) {\n      continue;\n    }\n\n    // iterate backwards through each RDF list\n    const nil = graphObject[RDF_NIL];\n    if(!nil.usages) {\n      continue;\n    }\n    for(let usage of nil.usages) {\n      let node = usage.node;\n      let property = usage.property;\n      let head = usage.value;\n      const list = [];\n      const listNodes = [];\n\n      // ensure node is a well-formed list node; it must:\n      // 1. Be referenced only once.\n      // 2. Have an array for rdf:first that has 1 item.\n      // 3. Have an array for rdf:rest that has 1 item.\n      // 4. Have no keys other than: @id, rdf:first, rdf:rest, and,\n      //   optionally, @type where the value is rdf:List.\n      let nodeKeyCount = Object.keys(node).length;\n      while(property === RDF_REST &&\n        types.isObject(referencedOnce[node['@id']]) &&\n        types.isArray(node[RDF_FIRST]) && node[RDF_FIRST].length === 1 &&\n        types.isArray(node[RDF_REST]) && node[RDF_REST].length === 1 &&\n        (nodeKeyCount === 3 ||\n          (nodeKeyCount === 4 && types.isArray(node['@type']) &&\n          node['@type'].length === 1 && node['@type'][0] === RDF_LIST))) {\n        list.push(node[RDF_FIRST][0]);\n        listNodes.push(node['@id']);\n\n        // get next node, moving backwards through list\n        usage = referencedOnce[node['@id']];\n        node = usage.node;\n        property = usage.property;\n        head = usage.value;\n        nodeKeyCount = Object.keys(node).length;\n\n        // if node is not a blank node, then list head found\n        if(!graphTypes.isBlankNode(node)) {\n          break;\n        }\n      }\n\n      // transform list into @list object\n      delete head['@id'];\n      head['@list'] = list.reverse();\n      for(const listNode of listNodes) {\n        delete graphObject[listNode];\n      }\n    }\n\n    delete nil.usages;\n  }\n\n  const result = [];\n  const subjects = Object.keys(defaultGraph).sort();\n  for(const subject of subjects) {\n    const node = defaultGraph[subject];\n    if(subject in graphMap) {\n      const graph = node['@graph'] = [];\n      const graphObject = graphMap[subject];\n      const graphSubjects = Object.keys(graphObject).sort();\n      for(const graphSubject of graphSubjects) {\n        const node = graphObject[graphSubject];\n        // only add full subjects to top-level\n        if(!graphTypes.isSubjectReference(node)) {\n          graph.push(node);\n        }\n      }\n    }\n    // only add full subjects to top-level\n    if(!graphTypes.isSubjectReference(node)) {\n      result.push(node);\n    }\n  }\n\n  return result;\n};\n\n/**\n * Converts an RDF triple object to a JSON-LD object.\n *\n * @param o the RDF triple object to convert.\n * @param useNativeTypes true to output native types, false not to.\n *\n * @return the JSON-LD object.\n */\nfunction _RDFToObject(o, useNativeTypes) {\n  // convert NamedNode/BlankNode object to JSON-LD\n  if(o.termType.endsWith('Node')) {\n    return {'@id': o.value};\n  }\n\n  // convert literal to JSON-LD\n  const rval = {'@value': o.value};\n\n  // add language\n  if(o.language) {\n    rval['@language'] = o.language;\n  } else {\n    let type = o.datatype.value;\n    if(!type) {\n      type = XSD_STRING;\n    }\n    if(type === RDF_JSON_LITERAL) {\n      type = '@json';\n      try {\n        rval['@value'] = JSON.parse(rval['@value']);\n      } catch(e) {\n        throw new JsonLdError(\n          'JSON literal could not be parsed.',\n          'jsonld.InvalidJsonLiteral',\n          {code: 'invalid JSON literal', value: rval['@value'], cause: e});\n      }\n    }\n    // use native types for certain xsd types\n    if(useNativeTypes) {\n      if(type === XSD_BOOLEAN) {\n        if(rval['@value'] === 'true') {\n          rval['@value'] = true;\n        } else if(rval['@value'] === 'false') {\n          rval['@value'] = false;\n        }\n      } else if(types.isNumeric(rval['@value'])) {\n        if(type === XSD_INTEGER) {\n          const i = parseInt(rval['@value'], 10);\n          if(i.toFixed(0) === rval['@value']) {\n            rval['@value'] = i;\n          }\n        } else if(type === XSD_DOUBLE) {\n          rval['@value'] = parseFloat(rval['@value']);\n        }\n      }\n      // do not add native type\n      if(![XSD_BOOLEAN, XSD_INTEGER, XSD_DOUBLE, XSD_STRING].includes(type)) {\n        rval['@type'] = type;\n      }\n    } else if(type !== XSD_STRING) {\n      rval['@type'] = type;\n    }\n  }\n\n  return rval;\n}\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {createNodeMap} = require('./nodeMap');\nconst {isKeyword} = require('./context');\nconst graphTypes = require('./graphTypes');\nconst jsonCanonicalize = require('canonicalize');\nconst types = require('./types');\nconst util = require('./util');\n\nconst {\n  // RDF,\n  // RDF_LIST,\n  RDF_FIRST,\n  RDF_REST,\n  RDF_NIL,\n  RDF_TYPE,\n  // RDF_PLAIN_LITERAL,\n  // RDF_XML_LITERAL,\n  RDF_JSON_LITERAL,\n  // RDF_OBJECT,\n  RDF_LANGSTRING,\n\n  // XSD,\n  XSD_BOOLEAN,\n  XSD_DOUBLE,\n  XSD_INTEGER,\n  XSD_STRING,\n} = require('./constants');\n\nconst {\n  isAbsolute: _isAbsoluteIri\n} = require('./url');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Outputs an RDF dataset for the expanded JSON-LD input.\n *\n * @param input the expanded JSON-LD input.\n * @param options the RDF serialization options.\n *\n * @return the RDF dataset.\n */\napi.toRDF = (input, options) => {\n  // create node map for default graph (and any named graphs)\n  const issuer = new util.IdentifierIssuer('_:b');\n  const nodeMap = {'@default': {}};\n  createNodeMap(input, nodeMap, '@default', issuer);\n\n  const dataset = [];\n  const graphNames = Object.keys(nodeMap).sort();\n  for(const graphName of graphNames) {\n    let graphTerm;\n    if(graphName === '@default') {\n      graphTerm = {termType: 'DefaultGraph', value: ''};\n    } else if(_isAbsoluteIri(graphName)) {\n      if(graphName.startsWith('_:')) {\n        graphTerm = {termType: 'BlankNode'};\n      } else {\n        graphTerm = {termType: 'NamedNode'};\n      }\n      graphTerm.value = graphName;\n    } else {\n      // skip relative IRIs (not valid RDF)\n      continue;\n    }\n    _graphToRDF(dataset, nodeMap[graphName], graphTerm, issuer, options);\n  }\n\n  return dataset;\n};\n\n/**\n * Adds RDF quads for a particular graph to the given dataset.\n *\n * @param dataset the dataset to append RDF quads to.\n * @param graph the graph to create RDF quads for.\n * @param graphTerm the graph term for each quad.\n * @param issuer a IdentifierIssuer for assigning blank node names.\n * @param options the RDF serialization options.\n *\n * @return the array of RDF triples for the given graph.\n */\nfunction _graphToRDF(dataset, graph, graphTerm, issuer, options) {\n  const ids = Object.keys(graph).sort();\n  for(const id of ids) {\n    const node = graph[id];\n    const properties = Object.keys(node).sort();\n    for(let property of properties) {\n      const items = node[property];\n      if(property === '@type') {\n        property = RDF_TYPE;\n      } else if(isKeyword(property)) {\n        continue;\n      }\n\n      for(const item of items) {\n        // RDF subject\n        const subject = {\n          termType: id.startsWith('_:') ? 'BlankNode' : 'NamedNode',\n          value: id\n        };\n\n        // skip relative IRI subjects (not valid RDF)\n        if(!_isAbsoluteIri(id)) {\n          continue;\n        }\n\n        // RDF predicate\n        const predicate = {\n          termType: property.startsWith('_:') ? 'BlankNode' : 'NamedNode',\n          value: property\n        };\n\n        // skip relative IRI predicates (not valid RDF)\n        if(!_isAbsoluteIri(property)) {\n          continue;\n        }\n\n        // skip blank node predicates unless producing generalized RDF\n        if(predicate.termType === 'BlankNode' &&\n          !options.produceGeneralizedRdf) {\n          continue;\n        }\n\n        // convert list, value or node object to triple\n        const object = _objectToRDF(item, issuer, dataset, graphTerm);\n        // skip null objects (they are relative IRIs)\n        if(object) {\n          dataset.push({\n            subject,\n            predicate,\n            object,\n            graph: graphTerm\n          });\n        }\n      }\n    }\n  }\n}\n\n/**\n * Converts a @list value into linked list of blank node RDF quads\n * (an RDF collection).\n *\n * @param list the @list value.\n * @param issuer a IdentifierIssuer for assigning blank node names.\n * @param dataset the array of quads to append to.\n * @param graphTerm the graph term for each quad.\n *\n * @return the head of the list.\n */\nfunction _listToRDF(list, issuer, dataset, graphTerm) {\n  const first = {termType: 'NamedNode', value: RDF_FIRST};\n  const rest = {termType: 'NamedNode', value: RDF_REST};\n  const nil = {termType: 'NamedNode', value: RDF_NIL};\n\n  const last = list.pop();\n  // Result is the head of the list\n  const result = last ? {termType: 'BlankNode', value: issuer.getId()} : nil;\n  let subject = result;\n\n  for(const item of list) {\n    const object = _objectToRDF(item, issuer, dataset, graphTerm);\n    const next = {termType: 'BlankNode', value: issuer.getId()};\n    dataset.push({\n      subject,\n      predicate: first,\n      object,\n      graph: graphTerm\n    });\n    dataset.push({\n      subject,\n      predicate: rest,\n      object: next,\n      graph: graphTerm\n    });\n    subject = next;\n  }\n\n  // Tail of list\n  if(last) {\n    const object = _objectToRDF(last, issuer, dataset, graphTerm);\n    dataset.push({\n      subject,\n      predicate: first,\n      object,\n      graph: graphTerm\n    });\n    dataset.push({\n      subject,\n      predicate: rest,\n      object: nil,\n      graph: graphTerm\n    });\n  }\n\n  return result;\n}\n\n/**\n * Converts a JSON-LD value object to an RDF literal or a JSON-LD string,\n * node object to an RDF resource, or adds a list.\n *\n * @param item the JSON-LD value or node object.\n * @param issuer a IdentifierIssuer for assigning blank node names.\n * @param dataset the dataset to append RDF quads to.\n * @param graphTerm the graph term for each quad.\n *\n * @return the RDF literal or RDF resource.\n */\nfunction _objectToRDF(item, issuer, dataset, graphTerm) {\n  const object = {};\n\n  // convert value object to RDF\n  if(graphTypes.isValue(item)) {\n    object.termType = 'Literal';\n    object.value = undefined;\n    object.datatype = {\n      termType: 'NamedNode'\n    };\n    let value = item['@value'];\n    const datatype = item['@type'] || null;\n\n    // convert to XSD/JSON datatypes as appropriate\n    if(datatype === '@json') {\n      object.value = jsonCanonicalize(value);\n      object.datatype.value = RDF_JSON_LITERAL;\n    } else if(types.isBoolean(value)) {\n      object.value = value.toString();\n      object.datatype.value = datatype || XSD_BOOLEAN;\n    } else if(types.isDouble(value) || datatype === XSD_DOUBLE) {\n      if(!types.isDouble(value)) {\n        value = parseFloat(value);\n      }\n      // canonical double representation\n      object.value = value.toExponential(15).replace(/(\\d)0*e\\+?/, '$1E');\n      object.datatype.value = datatype || XSD_DOUBLE;\n    } else if(types.isNumber(value)) {\n      object.value = value.toFixed(0);\n      object.datatype.value = datatype || XSD_INTEGER;\n    } else if('@language' in item) {\n      object.value = value;\n      object.datatype.value = datatype || RDF_LANGSTRING;\n      object.language = item['@language'];\n    } else {\n      object.value = value;\n      object.datatype.value = datatype || XSD_STRING;\n    }\n  } else if(graphTypes.isList(item)) {\n    const _list = _listToRDF(item['@list'], issuer, dataset, graphTerm);\n    object.termType = _list.termType;\n    object.value = _list.value;\n  } else {\n    // convert string/node object to RDF\n    const id = types.isObject(item) ? item['@id'] : item;\n    object.termType = id.startsWith('_:') ? 'BlankNode' : 'NamedNode';\n    object.value = id;\n  }\n\n  // skip relative IRIs, not valid RDF\n  if(object.termType === 'NamedNode' && !_isAbsoluteIri(object.value)) {\n    return null;\n  }\n\n  return object;\n}\n","/* jshint esversion: 6 */\n/* jslint node: true */\n'use strict';\n\nmodule.exports = function (object) {\n  return serialize(object);\n\n  function serialize (object) {\n    if (object === null || typeof object !== 'object' || object.toJSON != null) {\n      return JSON.stringify(object);\n    }\n    if (Array.isArray(object) && object.length === 0) {\n      return '[]';\n    }\n    if (Array.isArray(object) && object.length === 1) {\n      return '[' + serialize(object[0]) + ']';\n    }\n    if (Array.isArray(object)) {\n      return '[' + object.reduce((t, cv, ci) => {\n        t = (ci === 1 ? serialize(t) : t);\n        return t + ',' + serialize(cv);\n      }) + ']';\n    }\n    const keys = Object.keys(object);\n    if (keys.length === 0) {\n      return '{}';\n    }\n    if (keys.length === 1) {\n      return '{' + serialize(keys[0]) + ':' + serialize(object[keys[0]]) + '}';\n    }\n    return '{' + keys.sort().reduce((t, cv, ci) => {\n      t = (ci === 1 ? serialize(t) + ':' + serialize(object[t]) : t);\n      return t + ',' + serialize(cv) + ':' + serialize(object[cv]);\n    }) + '}';\n  }\n};\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {isKeyword} = require('./context');\nconst graphTypes = require('./graphTypes');\nconst types = require('./types');\nconst util = require('./util');\nconst JsonLdError = require('./JsonLdError');\nconst {\n  createNodeMap: _createNodeMap,\n  mergeNodeMapGraphs: _mergeNodeMapGraphs\n} = require('./nodeMap');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Performs JSON-LD `merged` framing.\n *\n * @param input the expanded JSON-LD to frame.\n * @param frame the expanded JSON-LD frame to use.\n * @param options the framing options.\n *\n * @return the framed output.\n */\napi.frameMergedOrDefault = (input, frame, options) => {\n  // create framing state\n  const state = {\n    options,\n    graph: '@default',\n    graphMap: {'@default': {}},\n    graphStack: [],\n    subjectStack: [],\n    link: {},\n    bnodeMap: {}\n  };\n\n  // produce a map of all graphs and name each bnode\n  // FIXME: currently uses subjects from @merged graph only\n  const issuer = new util.IdentifierIssuer('_:b');\n  _createNodeMap(input, state.graphMap, '@default', issuer);\n  if(options.merged) {\n    state.graphMap['@merged'] = _mergeNodeMapGraphs(state.graphMap);\n    state.graph = '@merged';\n  }\n  state.subjects = state.graphMap[state.graph];\n\n  // frame the subjects\n  const framed = [];\n  api.frame(state, Object.keys(state.subjects).sort(), frame, framed);\n\n  // If pruning blank nodes, find those to prune\n  if(options.pruneBlankNodeIdentifiers) {\n    // remove all blank nodes appearing only once, done in compaction\n    options.bnodesToClear =\n      Object.keys(state.bnodeMap).filter(id => state.bnodeMap[id].length === 1);\n  }\n\n  return framed;\n};\n\n/**\n * Frames subjects according to the given frame.\n *\n * @param state the current framing state.\n * @param subjects the subjects to filter.\n * @param frame the frame.\n * @param parent the parent subject or top-level array.\n * @param property the parent property, initialized to null.\n */\napi.frame = (state, subjects, frame, parent, property = null) => {\n  // validate the frame\n  _validateFrame(frame);\n  frame = frame[0];\n\n  // get flags for current frame\n  const options = state.options;\n  const flags = {\n    embed: _getFrameFlag(frame, options, 'embed'),\n    explicit: _getFrameFlag(frame, options, 'explicit'),\n    requireAll: _getFrameFlag(frame, options, 'requireAll')\n  };\n\n  // filter out subjects that match the frame\n  const matches = _filterSubjects(state, subjects, frame, flags);\n\n  // add matches to output\n  const ids = Object.keys(matches).sort();\n  for(const id of ids) {\n    const subject = matches[id];\n\n    if(flags.embed === '@link' && id in state.link) {\n      // TODO: may want to also match an existing linked subject against\n      // the current frame ... so different frames could produce different\n      // subjects that are only shared in-memory when the frames are the same\n\n      // add existing linked subject\n      _addFrameOutput(parent, property, state.link[id]);\n      continue;\n    }\n\n    /* Note: In order to treat each top-level match as a compartmentalized\n    result, clear the unique embedded subjects map when the property is null,\n    which only occurs at the top-level. */\n    if(property === null) {\n      state.uniqueEmbeds = {[state.graph]: {}};\n    } else {\n      state.uniqueEmbeds[state.graph] = state.uniqueEmbeds[state.graph] || {};\n    }\n\n    // start output for subject\n    const output = {};\n    output['@id'] = id;\n    if(id.indexOf('_:') === 0) {\n      util.addValue(state.bnodeMap, id, output, {propertyIsArray: true});\n    }\n    state.link[id] = output;\n\n    // if embed is @never or if a circular reference would be created by an\n    // embed, the subject cannot be embedded, just add the reference;\n    // note that a circular reference won't occur when the embed flag is\n    // `@link` as the above check will short-circuit before reaching this point\n    if(flags.embed === '@never' ||\n      _createsCircularReference(subject, state.graph, state.subjectStack)) {\n      _addFrameOutput(parent, property, output);\n      continue;\n    }\n\n    // if only the last match should be embedded\n    if(flags.embed === '@last') {\n      // remove any existing embed\n      if(id in state.uniqueEmbeds[state.graph]) {\n        _removeEmbed(state, id);\n      }\n      state.uniqueEmbeds[state.graph][id] =\n        {parent, property};\n    }\n\n    // push matching subject onto stack to enable circular embed checks\n    state.subjectStack.push({subject, graph: state.graph});\n\n    // subject is also the name of a graph\n    if(id in state.graphMap) {\n      let recurse = false;\n      let subframe = null;\n      if(!('@graph' in frame)) {\n        recurse = state.graph !== '@merged';\n        subframe = {};\n      } else {\n        subframe = frame['@graph'][0];\n        if(!types.isObject(subframe)) {\n          subframe = {};\n        }\n        recurse = !(id === '@merged' || id === '@default');\n      }\n\n      if(recurse) {\n        state.graphStack.push(state.graph);\n        state.graph = id;\n        // recurse into graph\n        api.frame(\n          state,\n          Object.keys(state.graphMap[id]).sort(), [subframe], output, '@graph');\n        state.graph = state.graphStack.pop;\n      }\n    }\n\n    // iterate over subject properties\n    for(const prop of Object.keys(subject).sort()) {\n      // copy keywords to output\n      if(isKeyword(prop)) {\n        output[prop] = util.clone(subject[prop]);\n\n        if(prop === '@type') {\n          // count bnode values of @type\n          for(const type of subject['@type']) {\n            if(type.indexOf('_:') === 0) {\n              util.addValue(\n                state.bnodeMap, type, output, {propertyIsArray: true});\n            }\n          }\n        }\n        continue;\n      }\n\n      // explicit is on and property isn't in the frame, skip processing\n      if(flags.explicit && !(prop in frame)) {\n        continue;\n      }\n\n      // add objects\n      for(let o of subject[prop]) {\n        const subframe = (prop in frame ?\n          frame[prop] : _createImplicitFrame(flags));\n\n        // recurse into list\n        if(graphTypes.isList(o)) {\n          // add empty list\n          const list = {'@list': []};\n          _addFrameOutput(output, prop, list);\n\n          // add list objects\n          const src = o['@list'];\n          for(const n in src) {\n            o = src[n];\n            if(graphTypes.isSubjectReference(o)) {\n              const subframe = (prop in frame ?\n                frame[prop][0]['@list'] : _createImplicitFrame(flags));\n              // recurse into subject reference\n              api.frame(state, [o['@id']], subframe, list, '@list');\n            } else {\n              // include other values automatically\n              _addFrameOutput(list, '@list', util.clone(o));\n            }\n          }\n          continue;\n        }\n\n        if(graphTypes.isSubjectReference(o)) {\n          // recurse into subject reference\n          api.frame(state, [o['@id']], subframe, output, prop);\n        } else if(_valueMatch(subframe[0], o)) {\n          // include other values, if they match\n          _addFrameOutput(output, prop, util.clone(o));\n        }\n      }\n    }\n\n    // handle defaults\n    for(const prop of Object.keys(frame).sort()) {\n      // skip keywords\n      if(isKeyword(prop)) {\n        continue;\n      }\n\n      // if omit default is off, then include default values for properties\n      // that appear in the next frame but are not in the matching subject\n      const next = frame[prop][0] || {};\n      const omitDefaultOn = _getFrameFlag(next, options, 'omitDefault');\n      if(!omitDefaultOn && !(prop in output)) {\n        let preserve = '@null';\n        if('@default' in next) {\n          preserve = util.clone(next['@default']);\n        }\n        if(!types.isArray(preserve)) {\n          preserve = [preserve];\n        }\n        output[prop] = [{'@preserve': preserve}];\n      }\n    }\n\n    // if embed reverse values by finding nodes having this subject as a value\n    // of the associated property\n    if('@reverse' in frame) {\n      for(const reverseProp of Object.keys(frame['@reverse']).sort()) {\n        const subframe = frame['@reverse'][reverseProp];\n        for(const subject of Object.keys(state.subjects)) {\n          const nodeValues =\n            util.getValues(state.subjects[subject], reverseProp);\n          if(nodeValues.some(v => v['@id'] === id)) {\n            // node has property referencing this subject, recurse\n            output['@reverse'] = output['@reverse'] || {};\n            util.addValue(\n              output['@reverse'], reverseProp, [], {propertyIsArray: true});\n            api.frame(\n              state, [subject], subframe, output['@reverse'][reverseProp],\n              property);\n          }\n        }\n      }\n    }\n\n    // add output to parent\n    _addFrameOutput(parent, property, output);\n\n    // pop matching subject from circular ref-checking stack\n    state.subjectStack.pop();\n  }\n};\n\n/**\n * Creates an implicit frame when recursing through subject matches. If\n * a frame doesn't have an explicit frame for a particular property, then\n * a wildcard child frame will be created that uses the same flags that the\n * parent frame used.\n *\n * @param flags the current framing flags.\n *\n * @return the implicit frame.\n */\nfunction _createImplicitFrame(flags) {\n  const frame = {};\n  for(const key in flags) {\n    if(flags[key] !== undefined) {\n      frame['@' + key] = [flags[key]];\n    }\n  }\n  return [frame];\n}\n\n/**\n * Checks the current subject stack to see if embedding the given subject\n * would cause a circular reference.\n *\n * @param subjectToEmbed the subject to embed.\n * @param graph the graph the subject to embed is in.\n * @param subjectStack the current stack of subjects.\n *\n * @return true if a circular reference would be created, false if not.\n */\nfunction _createsCircularReference(subjectToEmbed, graph, subjectStack) {\n  for(let i = subjectStack.length - 1; i >= 0; --i) {\n    const subject = subjectStack[i];\n    if(subject.graph === graph &&\n      subject.subject['@id'] === subjectToEmbed['@id']) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * Gets the frame flag value for the given flag name.\n *\n * @param frame the frame.\n * @param options the framing options.\n * @param name the flag name.\n *\n * @return the flag value.\n */\nfunction _getFrameFlag(frame, options, name) {\n  const flag = '@' + name;\n  let rval = (flag in frame ? frame[flag][0] : options[name]);\n  if(name === 'embed') {\n    // default is \"@last\"\n    // backwards-compatibility support for \"embed\" maps:\n    // true => \"@last\"\n    // false => \"@never\"\n    if(rval === true) {\n      rval = '@last';\n    } else if(rval === false) {\n      rval = '@never';\n    } else if(rval !== '@always' && rval !== '@never' && rval !== '@link') {\n      rval = '@last';\n    }\n  }\n  return rval;\n}\n\n/**\n * Validates a JSON-LD frame, throwing an exception if the frame is invalid.\n *\n * @param frame the frame to validate.\n */\nfunction _validateFrame(frame) {\n  if(!types.isArray(frame) || frame.length !== 1 || !types.isObject(frame[0])) {\n    throw new JsonLdError(\n      'Invalid JSON-LD syntax; a JSON-LD frame must be a single object.',\n      'jsonld.SyntaxError', {frame});\n  }\n}\n\n/**\n * Returns a map of all of the subjects that match a parsed frame.\n *\n * @param state the current framing state.\n * @param subjects the set of subjects to filter.\n * @param frame the parsed frame.\n * @param flags the frame flags.\n *\n * @return all of the matched subjects.\n */\nfunction _filterSubjects(state, subjects, frame, flags) {\n  // filter subjects in @id order\n  const rval = {};\n  for(const id of subjects) {\n    const subject = state.graphMap[state.graph][id];\n    if(_filterSubject(state, subject, frame, flags)) {\n      rval[id] = subject;\n    }\n  }\n  return rval;\n}\n\n/**\n * Returns true if the given subject matches the given frame.\n *\n * Matches either based on explicit type inclusion where the node has any\n * type listed in the frame. If the frame has empty types defined matches\n * nodes not having a @type. If the frame has a type of {} defined matches\n * nodes having any type defined.\n *\n * Otherwise, does duck typing, where the node must have all of the\n * properties defined in the frame.\n *\n * @param state the current framing state.\n * @param subject the subject to check.\n * @param frame the frame to check.\n * @param flags the frame flags.\n *\n * @return true if the subject matches, false if not.\n */\nfunction _filterSubject(state, subject, frame, flags) {\n  // check ducktype\n  let wildcard = true;\n  let matchesSome = false;\n\n  for(const key in frame) {\n    let matchThis = false;\n    const nodeValues = util.getValues(subject, key);\n    const isEmpty = util.getValues(frame, key).length === 0;\n\n    if(isKeyword(key)) {\n      // skip non-@id and non-@type\n      if(key !== '@id' && key !== '@type') {\n        continue;\n      }\n      wildcard = false;\n\n      // check @id for a specific @id value\n      if(key === '@id') {\n        // if @id is not a wildcard and is not empty, then match or not on\n        // specific value\n        if(frame['@id'].length >= 0 && !types.isEmptyObject(frame['@id'][0])) {\n          return frame['@id'].includes(nodeValues[0]);\n        }\n        matchThis = true;\n        continue;\n      }\n\n      // check @type (object value means 'any' type, fall through to ducktyping)\n      if('@type' in frame) {\n        if(isEmpty) {\n          if(nodeValues.length > 0) {\n            // don't match on no @type\n            return false;\n          }\n          matchThis = true;\n        } else if(frame['@type'].length === 1 &&\n          types.isEmptyObject(frame['@type'][0])) {\n          // match on wildcard @type\n          matchThis = nodeValues.length > 0;\n        } else {\n          // match on a specific @type\n          for(const type of frame['@type']) {\n            if(nodeValues.some(tt => tt === type)) {\n              return true;\n            }\n          }\n          return false;\n        }\n      }\n    }\n\n    // Forc a copy of this frame entry so it can be manipulated\n    const thisFrame = util.getValues(frame, key)[0];\n    let hasDefault = false;\n    if(thisFrame) {\n      _validateFrame([thisFrame]);\n      hasDefault = '@default' in thisFrame;\n    }\n\n    // no longer a wildcard pattern if frame has any non-keyword properties\n    wildcard = false;\n\n    // skip, but allow match if node has no value for property, and frame has a\n    // default value\n    if(nodeValues.length === 0 && hasDefault) {\n      continue;\n    }\n\n    // if frame value is empty, don't match if subject has any value\n    if(nodeValues.length > 0 && isEmpty) {\n      return false;\n    }\n\n    if(thisFrame === undefined) {\n      // node does not match if values is not empty and the value of property\n      // in frame is match none.\n      if(nodeValues.length > 0) {\n        return false;\n      }\n      matchThis = true;\n    } else if(types.isObject(thisFrame)) {\n      // node matches if values is not empty and the value of property in frame\n      // is wildcard\n      matchThis = nodeValues.length > 0;\n    } else {\n      if(graphTypes.isValue(thisFrame)) {\n        // match on any matching value\n        matchThis = nodeValues.some(nv => _valueMatch(thisFrame, nv));\n      } else if(graphTypes.isSubject(thisFrame) ||\n        graphTypes.isSubjectReference(thisFrame)) {\n        matchThis =\n          nodeValues.some(nv => _nodeMatch(state, thisFrame, nv, flags));\n      } else if(graphTypes.isList(thisFrame)) {\n        const listValue = thisFrame['@list'][0];\n        if(graphTypes.isList(nodeValues[0])) {\n          const nodeListValues = nodeValues[0]['@list'];\n\n          if(graphTypes.isValue(listValue)) {\n            // match on any matching value\n            matchThis = nodeListValues.some(lv => _valueMatch(listValue, lv));\n          } else if(graphTypes.isSubject(listValue) ||\n            graphTypes.isSubjectReference(listValue)) {\n            matchThis = nodeListValues.some(lv => _nodeMatch(\n              state, listValue, lv, flags));\n          }\n        } else {\n          // value must be a list to match\n          matchThis = false;\n        }\n      }\n    }\n\n    // all non-defaulted values must match if requireAll is set\n    if(!matchThis && flags.requireAll) {\n      return false;\n    }\n\n    matchesSome = matchesSome || matchThis;\n  }\n\n  // return true if wildcard or subject matches some properties\n  return wildcard || matchesSome;\n}\n\n/**\n * Removes an existing embed.\n *\n * @param state the current framing state.\n * @param id the @id of the embed to remove.\n */\nfunction _removeEmbed(state, id) {\n  // get existing embed\n  const embeds = state.uniqueEmbeds[state.graph];\n  const embed = embeds[id];\n  const parent = embed.parent;\n  const property = embed.property;\n\n  // create reference to replace embed\n  const subject = {'@id': id};\n\n  // remove existing embed\n  if(types.isArray(parent)) {\n    // replace subject with reference\n    for(let i = 0; i < parent.length; ++i) {\n      if(util.compareValues(parent[i], subject)) {\n        parent[i] = subject;\n        break;\n      }\n    }\n  } else {\n    // replace subject with reference\n    const useArray = types.isArray(parent[property]);\n    util.removeValue(parent, property, subject, {propertyIsArray: useArray});\n    util.addValue(parent, property, subject, {propertyIsArray: useArray});\n  }\n\n  // recursively remove dependent dangling embeds\n  const removeDependents = id => {\n    // get embed keys as a separate array to enable deleting keys in map\n    const ids = Object.keys(embeds);\n    for(const next of ids) {\n      if(next in embeds && types.isObject(embeds[next].parent) &&\n        embeds[next].parent['@id'] === id) {\n        delete embeds[next];\n        removeDependents(next);\n      }\n    }\n  };\n  removeDependents(id);\n}\n\n/**\n * Adds framing output to the given parent.\n *\n * @param parent the parent to add to.\n * @param property the parent property.\n * @param output the output to add.\n */\nfunction _addFrameOutput(parent, property, output) {\n  if(types.isObject(parent)) {\n    util.addValue(parent, property, output, {propertyIsArray: true});\n  } else {\n    parent.push(output);\n  }\n}\n\n/**\n * Node matches if it is a node, and matches the pattern as a frame.\n *\n * @param state the current framing state.\n * @param pattern used to match value\n * @param value to check\n * @param flags the frame flags.\n */\nfunction _nodeMatch(state, pattern, value, flags) {\n  if(!('@id' in value)) {\n    return false;\n  }\n  const nodeObject = state.subjects[value['@id']];\n  return nodeObject && _filterSubject(state, nodeObject, pattern, flags);\n}\n\n/**\n * Value matches if it is a value and matches the value pattern\n *\n * * `pattern` is empty\n * * @values are the same, or `pattern[@value]` is a wildcard, and\n * * @types are the same or `value[@type]` is not null\n *   and `pattern[@type]` is `{}`, or `value[@type]` is null\n *   and `pattern[@type]` is null or `[]`, and\n * * @languages are the same or `value[@language]` is not null\n *   and `pattern[@language]` is `{}`, or `value[@language]` is null\n *   and `pattern[@language]` is null or `[]`.\n *\n * @param pattern used to match value\n * @param value to check\n */\nfunction _valueMatch(pattern, value) {\n  const v1 = value['@value'];\n  const t1 = value['@type'];\n  const l1 = value['@language'];\n  const v2 = pattern['@value'] ?\n    (types.isArray(pattern['@value']) ?\n      pattern['@value'] : [pattern['@value']]) :\n    [];\n  const t2 = pattern['@type'] ?\n    (types.isArray(pattern['@type']) ?\n      pattern['@type'] : [pattern['@type']]) :\n    [];\n  const l2 = pattern['@language'] ?\n    (types.isArray(pattern['@language']) ?\n      pattern['@language'] : [pattern['@language']]) :\n    [];\n\n  if(v2.length === 0 && t2.length === 0 && l2.length === 0) {\n    return true;\n  }\n  if(!(v2.includes(v1) || types.isEmptyObject(v2[0]))) {\n    return false;\n  }\n  if(!(!t1 && t2.length === 0 || t2.includes(t1) || t1 &&\n    types.isEmptyObject(t2[0]))) {\n    return false;\n  }\n  if(!(!l1 && l2.length === 0 || l2.includes(l1) || l1 &&\n    types.isEmptyObject(l2[0]))) {\n    return false;\n  }\n  return true;\n}\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst JsonLdError = require('./JsonLdError');\n\nconst {\n  isArray: _isArray,\n  isObject: _isObject,\n  isString: _isString,\n  isUndefined: _isUndefined\n} = require('./types');\n\nconst {\n  isList: _isList,\n  isValue: _isValue,\n  isGraph: _isGraph,\n  isSimpleGraph: _isSimpleGraph,\n  isSubjectReference: _isSubjectReference\n} = require('./graphTypes');\n\nconst {\n  expandIri: _expandIri,\n  getContextValue: _getContextValue,\n  isKeyword: _isKeyword,\n  process: _processContext\n} = require('./context');\n\nconst {\n  removeBase: _removeBase\n} = require('./url');\n\nconst {\n  addValue: _addValue,\n  asArray: _asArray,\n  compareShortestLeast: _compareShortestLeast\n} = require('./util');\n\nconst api = {};\nmodule.exports = api;\n\n/**\n * Recursively compacts an element using the given active context. All values\n * must be in expanded form before this method is called.\n *\n * @param activeCtx the active context to use.\n * @param activeProperty the compacted property associated with the element\n *          to compact, null for none.\n * @param element the element to compact.\n * @param options the compaction options.\n * @param compactionMap the compaction map to use.\n *\n * @return the compacted value.\n */\napi.compact = ({\n  activeCtx,\n  activeProperty = null,\n  element,\n  options = {},\n  compactionMap = () => undefined\n}) => {\n  // recursively compact array\n  if(_isArray(element)) {\n    let rval = [];\n    for(let i = 0; i < element.length; ++i) {\n      // compact, dropping any null values unless custom mapped\n      let compacted = api.compact({\n        activeCtx,\n        activeProperty,\n        element: element[i],\n        options,\n        compactionMap\n      });\n      if(compacted === null) {\n        // TODO: use `await` to support async\n        compacted = compactionMap({\n          unmappedValue: element[i],\n          activeCtx,\n          activeProperty,\n          parent: element,\n          index: i,\n          options\n        });\n        if(compacted === undefined) {\n          continue;\n        }\n      }\n      rval.push(compacted);\n    }\n    if(options.compactArrays && rval.length === 1) {\n      // use single element if no container is specified\n      const container = _getContextValue(\n        activeCtx, activeProperty, '@container') || [];\n      if(container.length === 0) {\n        rval = rval[0];\n      }\n    }\n    return rval;\n  }\n\n  // use any scoped context on activeProperty\n  const ctx = _getContextValue(activeCtx, activeProperty, '@context');\n  if(!_isUndefined(ctx)) {\n    // Note: spec's `from term` var is named `isPropertyTermScopedContext`\n    activeCtx = _processContext({\n      activeCtx,\n      localCtx: ctx,\n      isPropertyTermScopedContext: true,\n      options\n    });\n  }\n\n  // recursively compact object\n  if(_isObject(element)) {\n    if(options.link && '@id' in element &&\n      options.link.hasOwnProperty(element['@id'])) {\n      // check for a linked element to reuse\n      const linked = options.link[element['@id']];\n      for(let i = 0; i < linked.length; ++i) {\n        if(linked[i].expanded === element) {\n          return linked[i].compacted;\n        }\n      }\n    }\n\n    // do value compaction on @values and subject references\n    if(_isValue(element) || _isSubjectReference(element)) {\n      const rval =\n        api.compactValue({activeCtx, activeProperty, value: element, options});\n      if(options.link && _isSubjectReference(element)) {\n        // store linked element\n        if(!(options.link.hasOwnProperty(element['@id']))) {\n          options.link[element['@id']] = [];\n        }\n        options.link[element['@id']].push({expanded: element, compacted: rval});\n      }\n      return rval;\n    }\n\n    // if expanded property is @list and we're contained within a list\n    // container, recursively compact this item to an array\n    if(_isList(element)) {\n      const container = _getContextValue(\n        activeCtx, activeProperty, '@container') || [];\n      if(container.includes('@list')) {\n        return api.compact({\n          activeCtx,\n          activeProperty,\n          element: element['@list'],\n          options,\n          compactionMap\n        });\n      }\n    }\n\n    // FIXME: avoid misuse of active property as an expanded property?\n    const insideReverse = (activeProperty === '@reverse');\n\n    const rval = {};\n\n    // revert type scoped context\n    activeCtx = activeCtx.revertTypeScopedContext();\n\n    if(options.link && '@id' in element) {\n      // store linked element\n      if(!options.link.hasOwnProperty(element['@id'])) {\n        options.link[element['@id']] = [];\n      }\n      options.link[element['@id']].push({expanded: element, compacted: rval});\n    }\n\n    // apply any context defined on an alias of @type\n    // if key is @type and any compacted value is a term having a local\n    // context, overlay that context\n    let types = element['@type'] || [];\n    if(types.length > 1) {\n      types = Array.from(types).sort();\n    }\n    // find all type-scoped contexts based on current context, prior to\n    // updating it\n    const typeContext = activeCtx;\n    for(const type of types) {\n      const compactedType = api.compactIri(\n        {activeCtx: typeContext, iri: type, relativeTo: {vocab: true}});\n\n      // Use any type-scoped context defined on this value\n      const ctx = _getContextValue(typeContext, compactedType, '@context');\n      if(!_isUndefined(ctx)) {\n        activeCtx = _processContext({\n          activeCtx,\n          localCtx: ctx,\n          options,\n          isTypeScopedContext: true\n        });\n      }\n    }\n\n    // process element keys in order\n    const keys = Object.keys(element).sort();\n    for(const expandedProperty of keys) {\n      const expandedValue = element[expandedProperty];\n\n      // compact @id and @type(s)\n      if(expandedProperty === '@id' || expandedProperty === '@type') {\n        // if using a type-scoped context, resolve type values against previous\n        // context\n        const isType = expandedProperty === '@type';\n        const valueContext = isType ?\n          (activeCtx.previousContext || activeCtx) : activeCtx;\n        let compactedValue = _asArray(expandedValue).map(\n          expandedIri => api.compactIri({\n            activeCtx: valueContext,\n            iri: expandedIri,\n            relativeTo: {vocab: isType}\n          }));\n        if(compactedValue.length === 1) {\n          compactedValue = compactedValue[0];\n        }\n\n        // use keyword alias and add value\n        const alias = api.compactIri(\n          {activeCtx, iri: expandedProperty, relativeTo: {vocab: true}});\n        const isArray = _isArray(compactedValue) && expandedValue.length === 0;\n        _addValue(rval, alias, compactedValue, {propertyIsArray: isArray});\n        continue;\n      }\n\n      // handle @reverse\n      if(expandedProperty === '@reverse') {\n        // recursively compact expanded value\n        const compactedValue = api.compact({\n          activeCtx,\n          activeProperty: '@reverse',\n          element: expandedValue,\n          options,\n          compactionMap\n        });\n\n        // handle double-reversed properties\n        for(const compactedProperty in compactedValue) {\n          if(activeCtx.mappings.has(compactedProperty) &&\n            activeCtx.mappings.get(compactedProperty).reverse) {\n            const value = compactedValue[compactedProperty];\n            const container = _getContextValue(\n              activeCtx, compactedProperty, '@container') || [];\n            const useArray = (\n              container.includes('@set') || !options.compactArrays);\n            _addValue(\n              rval, compactedProperty, value, {propertyIsArray: useArray});\n            delete compactedValue[compactedProperty];\n          }\n        }\n\n        if(Object.keys(compactedValue).length > 0) {\n          // use keyword alias and add value\n          const alias = api.compactIri({\n            activeCtx,\n            iri: expandedProperty,\n            relativeTo: {vocab: true}\n          });\n          _addValue(rval, alias, compactedValue);\n        }\n\n        continue;\n      }\n\n      if(expandedProperty === '@preserve') {\n        // compact using activeProperty\n        const compactedValue = api.compact({\n          activeCtx,\n          activeProperty,\n          element: expandedValue,\n          options,\n          compactionMap});\n\n        if(!(_isArray(compactedValue) && compactedValue.length === 0)) {\n          _addValue(rval, expandedProperty, compactedValue);\n        }\n        continue;\n      }\n\n      // handle @index property\n      if(expandedProperty === '@index') {\n        // drop @index if inside an @index container\n        const container = _getContextValue(\n          activeCtx, activeProperty, '@container') || [];\n        if(container.includes('@index')) {\n          continue;\n        }\n\n        // use keyword alias and add value\n        const alias = api.compactIri({\n          activeCtx,\n          iri: expandedProperty,\n          relativeTo: {vocab: true}\n        });\n        _addValue(rval, alias, expandedValue);\n        continue;\n      }\n\n      // skip array processing for keywords that aren't @graph or @list\n      if(expandedProperty !== '@graph' && expandedProperty !== '@list' &&\n        _isKeyword(expandedProperty)) {\n        // use keyword alias and add value as is\n        const alias = api.compactIri({\n          activeCtx,\n          iri: expandedProperty,\n          relativeTo: {vocab: true}\n        });\n        _addValue(rval, alias, expandedValue);\n        continue;\n      }\n\n      // Note: expanded value must be an array due to expansion algorithm.\n      if(!_isArray(expandedValue)) {\n        throw new JsonLdError(\n          'JSON-LD expansion error; expanded value must be an array.',\n          'jsonld.SyntaxError');\n      }\n\n      // preserve empty arrays\n      if(expandedValue.length === 0) {\n        const itemActiveProperty = api.compactIri({\n          activeCtx,\n          iri: expandedProperty,\n          value: expandedValue,\n          relativeTo: {vocab: true},\n          reverse: insideReverse\n        });\n        const nestProperty = activeCtx.mappings.has(itemActiveProperty) ?\n          activeCtx.mappings.get(itemActiveProperty)['@nest'] : null;\n        let nestResult = rval;\n        if(nestProperty) {\n          _checkNestProperty(activeCtx, nestProperty, options);\n          if(!_isObject(rval[nestProperty])) {\n            rval[nestProperty] = {};\n          }\n          nestResult = rval[nestProperty];\n        }\n        _addValue(\n          nestResult, itemActiveProperty, expandedValue, {\n            propertyIsArray: true\n          });\n      }\n\n      // recusively process array values\n      for(const expandedItem of expandedValue) {\n        // compact property and get container type\n        const itemActiveProperty = api.compactIri({\n          activeCtx,\n          iri: expandedProperty,\n          value: expandedItem,\n          relativeTo: {vocab: true},\n          reverse: insideReverse\n        });\n\n        // if itemActiveProperty is a @nest property, add values to nestResult,\n        // otherwise rval\n        const nestProperty = activeCtx.mappings.has(itemActiveProperty) ?\n          activeCtx.mappings.get(itemActiveProperty)['@nest'] : null;\n        let nestResult = rval;\n        if(nestProperty) {\n          _checkNestProperty(activeCtx, nestProperty, options);\n          if(!_isObject(rval[nestProperty])) {\n            rval[nestProperty] = {};\n          }\n          nestResult = rval[nestProperty];\n        }\n\n        const container = _getContextValue(\n          activeCtx, itemActiveProperty, '@container') || [];\n\n        // get simple @graph or @list value if appropriate\n        const isGraph = _isGraph(expandedItem);\n        const isList = _isList(expandedItem);\n        let inner;\n        if(isList) {\n          inner = expandedItem['@list'];\n        } else if(isGraph) {\n          inner = expandedItem['@graph'];\n        }\n\n        // recursively compact expanded item\n        let compactedItem = api.compact({\n          activeCtx,\n          activeProperty: itemActiveProperty,\n          element: (isList || isGraph) ? inner : expandedItem,\n          options,\n          compactionMap\n        });\n\n        // handle @list\n        if(isList) {\n          // ensure @list value is an array\n          if(!_isArray(compactedItem)) {\n            compactedItem = [compactedItem];\n          }\n\n          if(!container.includes('@list')) {\n            // wrap using @list alias\n            compactedItem = {\n              [api.compactIri({\n                activeCtx,\n                iri: '@list',\n                relativeTo: {vocab: true}\n              })]: compactedItem\n            };\n\n            // include @index from expanded @list, if any\n            if('@index' in expandedItem) {\n              compactedItem[api.compactIri({\n                activeCtx,\n                iri: '@index',\n                relativeTo: {vocab: true}\n              })] = expandedItem['@index'];\n            }\n          } else {\n            _addValue(nestResult, itemActiveProperty, compactedItem, {\n              valueIsArray: true,\n              allowDuplicate: true\n            });\n            continue;\n          }\n        }\n\n        // Graph object compaction cases\n        if(isGraph) {\n          if(container.includes('@graph') && (container.includes('@id') ||\n            container.includes('@index') && _isSimpleGraph(expandedItem))) {\n            // get or create the map object\n            let mapObject;\n            if(nestResult.hasOwnProperty(itemActiveProperty)) {\n              mapObject = nestResult[itemActiveProperty];\n            } else {\n              nestResult[itemActiveProperty] = mapObject = {};\n            }\n\n            // index on @id or @index or alias of @none\n            const key = (container.includes('@id') ?\n              expandedItem['@id'] : expandedItem['@index']) ||\n              api.compactIri({activeCtx, iri: '@none', vocab: true});\n            // add compactedItem to map, using value of `@id` or a new blank\n            // node identifier\n\n            _addValue(\n              mapObject, key, compactedItem, {\n                propertyIsArray:\n                  (!options.compactArrays || container.includes('@set'))\n              });\n          } else if(container.includes('@graph') &&\n            _isSimpleGraph(expandedItem)) {\n            // container includes @graph but not @id or @index and value is a\n            // simple graph object add compact value\n            _addValue(\n              nestResult, itemActiveProperty, compactedItem, {\n                propertyIsArray:\n                  (!options.compactArrays || container.includes('@set'))\n              });\n          } else {\n            // wrap using @graph alias, remove array if only one item and\n            // compactArrays not set\n            if(_isArray(compactedItem) && compactedItem.length === 1 &&\n              options.compactArrays) {\n              compactedItem = compactedItem[0];\n            }\n            compactedItem = {\n              [api.compactIri({\n                activeCtx,\n                iri: '@graph',\n                relativeTo: {vocab: true}\n              })]: compactedItem\n            };\n\n            // include @id from expanded graph, if any\n            if('@id' in expandedItem) {\n              compactedItem[api.compactIri({\n                activeCtx,\n                iri: '@id',\n                relativeTo: {vocab: true}\n              })] = expandedItem['@id'];\n            }\n\n            // include @index from expanded graph, if any\n            if('@index' in expandedItem) {\n              compactedItem[api.compactIri({\n                activeCtx,\n                iri: '@index',\n                relativeTo: {vocab: true}\n              })] = expandedItem['@index'];\n            }\n            _addValue(\n              nestResult, itemActiveProperty, compactedItem, {\n                propertyIsArray:\n                  (!options.compactArrays || container.includes('@set'))\n              });\n          }\n        } else if(container.includes('@language') ||\n          container.includes('@index') || container.includes('@id') ||\n          container.includes('@type')) {\n          // handle language and index maps\n          // get or create the map object\n          let mapObject;\n          if(nestResult.hasOwnProperty(itemActiveProperty)) {\n            mapObject = nestResult[itemActiveProperty];\n          } else {\n            nestResult[itemActiveProperty] = mapObject = {};\n          }\n\n          let key;\n          if(container.includes('@language')) {\n          // if container is a language map, simplify compacted value to\n          // a simple string\n            if(_isValue(compactedItem)) {\n              compactedItem = compactedItem['@value'];\n            }\n            key = expandedItem['@language'];\n          } else if(container.includes('@index')) {\n            key = expandedItem['@index'];\n          } else if(container.includes('@id')) {\n            const idKey = api.compactIri({activeCtx, iri: '@id', vocab: true});\n            key = compactedItem[idKey];\n            delete compactedItem[idKey];\n          } else if(container.includes('@type')) {\n            const typeKey = api.compactIri({\n              activeCtx,\n              iri: '@type',\n              vocab: true\n            });\n            let types;\n            [key, ...types] = _asArray(compactedItem[typeKey] || []);\n            switch(types.length) {\n              case 0:\n                delete compactedItem[typeKey];\n                break;\n              case 1:\n                compactedItem[typeKey] = types[0];\n                break;\n              default:\n                compactedItem[typeKey] = types;\n                break;\n            }\n          }\n\n          // if compacting this value which has no key, index on @none\n          if(!key) {\n            key = api.compactIri({activeCtx, iri: '@none', vocab: true});\n          }\n          // add compact value to map object using key from expanded value\n          // based on the container type\n          _addValue(\n            mapObject, key, compactedItem, {\n              propertyIsArray: container.includes('@set')\n            });\n        } else {\n          // use an array if: compactArrays flag is false,\n          // @container is @set or @list , value is an empty\n          // array, or key is @graph\n          const isArray = (!options.compactArrays ||\n            container.includes('@set') || container.includes('@list') ||\n            (_isArray(compactedItem) && compactedItem.length === 0) ||\n            expandedProperty === '@list' || expandedProperty === '@graph');\n\n          // add compact value\n          _addValue(\n            nestResult, itemActiveProperty, compactedItem,\n            {propertyIsArray: isArray});\n        }\n      }\n    }\n\n    return rval;\n  }\n\n  // only primitives remain which are already compact\n  return element;\n};\n\n/**\n * Compacts an IRI or keyword into a term or prefix if it can be. If the\n * IRI has an associated value it may be passed.\n *\n * @param activeCtx the active context to use.\n * @param iri the IRI to compact.\n * @param value the value to check or null.\n * @param relativeTo options for how to compact IRIs:\n *          vocab: true to split after @vocab, false not to.\n * @param reverse true if a reverse property is being compacted, false if not.\n *\n * @return the compacted term, prefix, keyword alias, or the original IRI.\n */\napi.compactIri = ({\n  activeCtx,\n  iri,\n  value = null,\n  relativeTo = {vocab: false},\n  reverse = false\n}) => {\n  // can't compact null\n  if(iri === null) {\n    return iri;\n  }\n\n  // if context is from a property term scoped context composed with a\n  // type-scoped context, then use the previous context instead\n  if(activeCtx.isPropertyTermScoped && activeCtx.previousContext) {\n    activeCtx = activeCtx.previousContext;\n  }\n\n  const inverseCtx = activeCtx.getInverse();\n\n  // if term is a keyword, it may be compacted to a simple alias\n  if(_isKeyword(iri) &&\n    iri in inverseCtx &&\n    '@none' in inverseCtx[iri] &&\n    '@type' in inverseCtx[iri]['@none'] &&\n    '@none' in inverseCtx[iri]['@none']['@type']) {\n    return inverseCtx[iri]['@none']['@type']['@none'];\n  }\n\n  // use inverse context to pick a term if iri is relative to vocab\n  if(relativeTo.vocab && iri in inverseCtx) {\n    const defaultLanguage = activeCtx['@language'] || '@none';\n\n    // prefer @index if available in value\n    const containers = [];\n    if(_isObject(value) && '@index' in value && !('@graph' in value)) {\n      containers.push('@index', '@index@set');\n    }\n\n    // if value is a preserve object, use its value\n    if(_isObject(value) && '@preserve' in value) {\n      value = value['@preserve'][0];\n    }\n\n    // prefer most specific container including @graph, prefering @set\n    // variations\n    if(_isGraph(value)) {\n      // favor indexmap if the graph is indexed\n      if('@index' in value) {\n        containers.push(\n          '@graph@index', '@graph@index@set', '@index', '@index@set');\n      }\n      // favor idmap if the graph is has an @id\n      if('@id' in value) {\n        containers.push(\n          '@graph@id', '@graph@id@set');\n      }\n      containers.push('@graph', '@graph@set', '@set');\n      // allow indexmap if the graph is not indexed\n      if(!('@index' in value)) {\n        containers.push(\n          '@graph@index', '@graph@index@set', '@index', '@index@set');\n      }\n      // allow idmap if the graph does not have an @id\n      if(!('@id' in value)) {\n        containers.push('@graph@id', '@graph@id@set');\n      }\n    } else if(_isObject(value) && !_isValue(value)) {\n      containers.push('@id', '@id@set', '@type', '@set@type');\n    }\n\n    // defaults for term selection based on type/language\n    let typeOrLanguage = '@language';\n    let typeOrLanguageValue = '@null';\n\n    if(reverse) {\n      typeOrLanguage = '@type';\n      typeOrLanguageValue = '@reverse';\n      containers.push('@set');\n    } else if(_isList(value)) {\n      // choose the most specific term that works for all elements in @list\n      // only select @list containers if @index is NOT in value\n      if(!('@index' in value)) {\n        containers.push('@list');\n      }\n      const list = value['@list'];\n      if(list.length === 0) {\n        // any empty list can be matched against any term that uses the\n        // @list container regardless of @type or @language\n        typeOrLanguage = '@any';\n        typeOrLanguageValue = '@none';\n      } else {\n        let commonLanguage = (list.length === 0) ? defaultLanguage : null;\n        let commonType = null;\n        for(let i = 0; i < list.length; ++i) {\n          const item = list[i];\n          let itemLanguage = '@none';\n          let itemType = '@none';\n          if(_isValue(item)) {\n            if('@language' in item) {\n              itemLanguage = item['@language'];\n            } else if('@type' in item) {\n              itemType = item['@type'];\n            } else {\n              // plain literal\n              itemLanguage = '@null';\n            }\n          } else {\n            itemType = '@id';\n          }\n          if(commonLanguage === null) {\n            commonLanguage = itemLanguage;\n          } else if(itemLanguage !== commonLanguage && _isValue(item)) {\n            commonLanguage = '@none';\n          }\n          if(commonType === null) {\n            commonType = itemType;\n          } else if(itemType !== commonType) {\n            commonType = '@none';\n          }\n          // there are different languages and types in the list, so choose\n          // the most generic term, no need to keep iterating the list\n          if(commonLanguage === '@none' && commonType === '@none') {\n            break;\n          }\n        }\n        commonLanguage = commonLanguage || '@none';\n        commonType = commonType || '@none';\n        if(commonType !== '@none') {\n          typeOrLanguage = '@type';\n          typeOrLanguageValue = commonType;\n        } else {\n          typeOrLanguageValue = commonLanguage;\n        }\n      }\n    } else {\n      if(_isValue(value)) {\n        if('@language' in value && !('@index' in value)) {\n          containers.push('@language', '@language@set');\n          typeOrLanguageValue = value['@language'];\n        } else if('@type' in value) {\n          typeOrLanguage = '@type';\n          typeOrLanguageValue = value['@type'];\n        }\n      } else {\n        typeOrLanguage = '@type';\n        typeOrLanguageValue = '@id';\n      }\n      containers.push('@set');\n    }\n\n    // do term selection\n    containers.push('@none');\n\n    // an index map can be used to index values using @none, so add as a low\n    // priority\n    if(_isObject(value) && !('@index' in value)) {\n      // allow indexing even if no @index present\n      containers.push('@index', '@index@set');\n    }\n\n    // values without type or language can use @language map\n    if(_isValue(value) && Object.keys(value).length === 1) {\n      // allow indexing even if no @index present\n      containers.push('@language', '@language@set');\n    }\n\n    const term = _selectTerm(\n      activeCtx, iri, value, containers, typeOrLanguage, typeOrLanguageValue);\n    if(term !== null) {\n      return term;\n    }\n  }\n\n  // no term match, use @vocab if available\n  if(relativeTo.vocab) {\n    if('@vocab' in activeCtx) {\n      // determine if vocab is a prefix of the iri\n      const vocab = activeCtx['@vocab'];\n      if(iri.indexOf(vocab) === 0 && iri !== vocab) {\n        // use suffix as relative iri if it is not a term in the active context\n        const suffix = iri.substr(vocab.length);\n        if(!activeCtx.mappings.has(suffix)) {\n          return suffix;\n        }\n      }\n    }\n  }\n\n  // no term or @vocab match, check for possible CURIEs\n  let choice = null;\n  // TODO: make FastCurieMap a class with a method to do this lookup\n  const partialMatches = [];\n  let iriMap = activeCtx.fastCurieMap;\n  // check for partial matches of against `iri`, which means look until\n  // iri.length - 1, not full length\n  const maxPartialLength = iri.length - 1;\n  for(let i = 0; i < maxPartialLength && iri[i] in iriMap; ++i) {\n    iriMap = iriMap[iri[i]];\n    if('' in iriMap) {\n      partialMatches.push(iriMap[''][0]);\n    }\n  }\n  // check partial matches in reverse order to prefer longest ones first\n  for(let i = partialMatches.length - 1; i >= 0; --i) {\n    const entry = partialMatches[i];\n    const terms = entry.terms;\n    for(const term of terms) {\n      // a CURIE is usable if:\n      // 1. it has no mapping, OR\n      // 2. value is null, which means we're not compacting an @value, AND\n      //   the mapping matches the IRI\n      const curie = term + ':' + iri.substr(entry.iri.length);\n      const isUsableCurie = (activeCtx.mappings.get(term)._prefix &&\n        (!activeCtx.mappings.has(curie) ||\n        (value === null && activeCtx.mappings.get(curie)['@id'] === iri)));\n\n      // select curie if it is shorter or the same length but lexicographically\n      // less than the current choice\n      if(isUsableCurie && (choice === null ||\n        _compareShortestLeast(curie, choice) < 0)) {\n        choice = curie;\n      }\n    }\n  }\n\n  // return chosen curie\n  if(choice !== null) {\n    return choice;\n  }\n\n  // compact IRI relative to base\n  if(!relativeTo.vocab) {\n    return _removeBase(activeCtx['@base'], iri);\n  }\n\n  // return IRI as is\n  return iri;\n};\n\n/**\n * Performs value compaction on an object with '@value' or '@id' as the only\n * property.\n *\n * @param activeCtx the active context.\n * @param activeProperty the active property that points to the value.\n * @param value the value to compact.\n * @param {Object} [options] - processing options.\n *\n * @return the compaction result.\n */\napi.compactValue = ({activeCtx, activeProperty, value, options}) => {\n  // value is a @value\n  if(_isValue(value)) {\n    // get context rules\n    const type = _getContextValue(activeCtx, activeProperty, '@type');\n    const language = _getContextValue(activeCtx, activeProperty, '@language');\n    const container =\n      _getContextValue(activeCtx, activeProperty, '@container') || [];\n\n    // whether or not the value has an @index that must be preserved\n    const preserveIndex = '@index' in value && !container.includes('@index');\n\n    // if there's no @index to preserve ...\n    if(!preserveIndex) {\n      // matching @type or @language specified in context, compact value\n      if(value['@type'] === type || value['@language'] === language) {\n        return value['@value'];\n      }\n    }\n\n    // return just the value of @value if all are true:\n    // 1. @value is the only key or @index isn't being preserved\n    // 2. there is no default language or @value is not a string or\n    //   the key has a mapping with a null @language\n    const keyCount = Object.keys(value).length;\n    const isValueOnlyKey = (keyCount === 1 ||\n      (keyCount === 2 && '@index' in value && !preserveIndex));\n    const hasDefaultLanguage = ('@language' in activeCtx);\n    const isValueString = _isString(value['@value']);\n    const hasNullMapping = (activeCtx.mappings.has(activeProperty) &&\n      activeCtx.mappings.get(activeProperty)['@language'] === null);\n    if(isValueOnlyKey &&\n      (!hasDefaultLanguage || !isValueString || hasNullMapping)) {\n      return value['@value'];\n    }\n\n    const rval = {};\n\n    // preserve @index\n    if(preserveIndex) {\n      rval[api.compactIri({\n        activeCtx,\n        iri: '@index',\n        relativeTo: {vocab: true}\n      })] = value['@index'];\n    }\n\n    if('@type' in value) {\n      // compact @type IRI\n      rval[api.compactIri({\n        activeCtx,\n        iri: '@type',\n        relativeTo: {vocab: true}\n      })] = api.compactIri(\n        {activeCtx, iri: value['@type'], relativeTo: {vocab: true}});\n    } else if('@language' in value) {\n      // alias @language\n      rval[api.compactIri({\n        activeCtx,\n        iri: '@language',\n        relativeTo: {vocab: true}\n      })] = value['@language'];\n    }\n\n    // alias @value\n    rval[api.compactIri({\n      activeCtx,\n      iri: '@value',\n      relativeTo: {vocab: true}\n    })] = value['@value'];\n\n    return rval;\n  }\n\n  // value is a subject reference\n  const expandedProperty = _expandIri(activeCtx, activeProperty, {vocab: true},\n    options);\n  const type = _getContextValue(activeCtx, activeProperty, '@type');\n  const compacted = api.compactIri(\n    {activeCtx, iri: value['@id'], relativeTo: {vocab: type === '@vocab'}});\n\n  // compact to scalar\n  if(type === '@id' || type === '@vocab' || expandedProperty === '@graph') {\n    return compacted;\n  }\n\n  return {\n    [api.compactIri({\n      activeCtx,\n      iri: '@id',\n      relativeTo: {vocab: true}\n    })]: compacted\n  };\n};\n\n/**\n * Removes the @preserve keywords as the last step of the compaction\n * algorithm when it is running on framed output.\n *\n * @param ctx the active context used to compact the input.\n * @param input the framed, compacted output.\n * @param options the compaction options used.\n *\n * @return the resulting output.\n */\napi.removePreserve = (ctx, input, options) => {\n  // recurse through arrays\n  if(_isArray(input)) {\n    const output = [];\n    for(let i = 0; i < input.length; ++i) {\n      const result = api.removePreserve(ctx, input[i], options);\n      // drop nulls from arrays\n      if(result !== null) {\n        output.push(result);\n      }\n    }\n    input = output;\n  } else if(_isObject(input)) {\n    // remove @preserve\n    if('@preserve' in input) {\n      if(input['@preserve'] === '@null') {\n        return null;\n      }\n      return input['@preserve'];\n    }\n\n    // skip @values\n    if(_isValue(input)) {\n      return input;\n    }\n\n    // recurse through @lists\n    if(_isList(input)) {\n      input['@list'] = api.removePreserve(ctx, input['@list'], options);\n      return input;\n    }\n\n    // handle in-memory linked nodes\n    const idAlias = api.compactIri({\n      activeCtx: ctx,\n      iri: '@id',\n      relativeTo: {vocab: true}\n    });\n    if(input.hasOwnProperty(idAlias)) {\n      const id = input[idAlias];\n      if(options.link.hasOwnProperty(id)) {\n        const idx = options.link[id].indexOf(input);\n        if(idx !== -1) {\n          // already visited\n          return options.link[id][idx];\n        }\n        // prevent circular visitation\n        options.link[id].push(input);\n      } else {\n        // prevent circular visitation\n        options.link[id] = [input];\n      }\n    }\n\n    // recurse through properties\n    const graphAlias = api.compactIri({\n      activeCtx: ctx,\n      iri: '@graph',\n      relativeTo: {vocab: true}\n    });\n    for(const prop in input) {\n      // potentially remove the id, if it is an unreference bnode\n      if(prop === idAlias && options.bnodesToClear.includes(input[prop])) {\n        delete input[idAlias];\n        continue;\n      }\n\n      let result = api.removePreserve(ctx, input[prop], options);\n      const container = _getContextValue(ctx, prop, '@container') || [];\n      if(options.compactArrays && _isArray(result) && result.length === 1 &&\n        container.length === 0 && prop !== graphAlias) {\n        result = result[0];\n      }\n      input[prop] = result;\n    }\n  }\n  return input;\n};\n\n/**\n * Picks the preferred compaction term from the given inverse context entry.\n *\n * @param activeCtx the active context.\n * @param iri the IRI to pick the term for.\n * @param value the value to pick the term for.\n * @param containers the preferred containers.\n * @param typeOrLanguage either '@type' or '@language'.\n * @param typeOrLanguageValue the preferred value for '@type' or '@language'.\n *\n * @return the preferred term.\n */\nfunction _selectTerm(\n  activeCtx, iri, value, containers, typeOrLanguage, typeOrLanguageValue) {\n  if(typeOrLanguageValue === null) {\n    typeOrLanguageValue = '@null';\n  }\n\n  // preferences for the value of @type or @language\n  const prefs = [];\n\n  // determine prefs for @id based on whether or not value compacts to a term\n  if((typeOrLanguageValue === '@id' || typeOrLanguageValue === '@reverse') &&\n    _isSubjectReference(value)) {\n    // prefer @reverse first\n    if(typeOrLanguageValue === '@reverse') {\n      prefs.push('@reverse');\n    }\n    // try to compact value to a term\n    const term = api.compactIri(\n      {activeCtx, iri: value['@id'], relativeTo: {vocab: true}});\n    if(activeCtx.mappings.has(term) &&\n      activeCtx.mappings.get(term) &&\n      activeCtx.mappings.get(term)['@id'] === value['@id']) {\n      // prefer @vocab\n      prefs.push.apply(prefs, ['@vocab', '@id']);\n    } else {\n      // prefer @id\n      prefs.push.apply(prefs, ['@id', '@vocab']);\n    }\n  } else {\n    prefs.push(typeOrLanguageValue);\n  }\n  prefs.push('@none');\n\n  const containerMap = activeCtx.inverse[iri];\n  for(let ci = 0; ci < containers.length; ++ci) {\n    // if container not available in the map, continue\n    const container = containers[ci];\n    if(!(container in containerMap)) {\n      continue;\n    }\n\n    const typeOrLanguageValueMap = containerMap[container][typeOrLanguage];\n    for(let pi = 0; pi < prefs.length; ++pi) {\n      // if type/language option not available in the map, continue\n      const pref = prefs[pi];\n      if(!(pref in typeOrLanguageValueMap)) {\n        continue;\n      }\n\n      // select term\n      return typeOrLanguageValueMap[pref];\n    }\n  }\n\n  return null;\n}\n\n/**\n * The value of `@nest` in the term definition must either be `@nest`, or a term\n * which resolves to `@nest`.\n *\n * @param activeCtx the active context.\n * @param nestProperty a term in the active context or `@nest`.\n * @param {Object} [options] - processing options.\n */\nfunction _checkNestProperty(activeCtx, nestProperty, options) {\n  if(_expandIri(activeCtx, nestProperty, {vocab: true}, options) !== '@nest') {\n    throw new JsonLdError(\n      'JSON-LD compact error; nested property must have an @nest value ' +\n      'resolving to @nest.',\n      'jsonld.SyntaxError', {code: 'invalid @nest value'});\n  }\n}\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {parseLinkHeader, buildHeaders} = require('../util');\nconst {LINK_HEADER_REL} = require('../constants');\nconst JsonLdError = require('../JsonLdError');\nconst RequestQueue = require('../RequestQueue');\n\n/**\n * Creates a built-in node document loader.\n *\n * @param options the options to use:\n *          secure: require all URLs to use HTTPS.\n *          strictSSL: true to require SSL certificates to be valid,\n *            false not to (default: true).\n *          maxRedirects: the maximum number of redirects to permit, none by\n *            default.\n *          request: the object which will make the request, default is\n *            provided by `https://www.npmjs.com/package/request`.\n *          headers: an object (map) of headers which will be passed as request\n *            headers for the requested document. Accept is not allowed.\n *\n * @return the node document loader.\n */\nmodule.exports = ({\n  secure,\n  strictSSL = true,\n  maxRedirects = -1,\n  request,\n  headers = {}\n} = {strictSSL: true, maxRedirects: -1, headers: {}}) => {\n  headers = buildHeaders(headers);\n  // TODO: use `r2`\n  request = request || require('request');\n  const http = require('http');\n  // TODO: disable cache until HTTP caching implemented\n  //const cache = new DocumentCache();\n\n  const queue = new RequestQueue();\n  return queue.wrapLoader(function(url) {\n    return loadDocument(url, []);\n  });\n\n  async function loadDocument(url, redirects) {\n    if(url.indexOf('http:') !== 0 && url.indexOf('https:') !== 0) {\n      throw new JsonLdError(\n        'URL could not be dereferenced; only \"http\" and \"https\" URLs are ' +\n        'supported.',\n        'jsonld.InvalidUrl', {code: 'loading document failed', url});\n    }\n    if(secure && url.indexOf('https') !== 0) {\n      throw new JsonLdError(\n        'URL could not be dereferenced; secure mode is enabled and ' +\n        'the URL\\'s scheme is not \"https\".',\n        'jsonld.InvalidUrl', {code: 'loading document failed', url});\n    }\n    // TODO: disable cache until HTTP caching implemented\n    let doc = null;//cache.get(url);\n    if(doc !== null) {\n      return doc;\n    }\n\n    let result;\n    try {\n      result = await _request(request, {\n        url,\n        headers,\n        strictSSL,\n        followRedirect: false\n      });\n    } catch(e) {\n      throw new JsonLdError(\n        'URL could not be dereferenced, an error occurred.',\n        'jsonld.LoadDocumentError',\n        {code: 'loading document failed', url, cause: e});\n    }\n\n    const {res, body} = result;\n\n    doc = {contextUrl: null, documentUrl: url, document: body || null};\n\n    // handle error\n    const statusText = http.STATUS_CODES[res.statusCode];\n    if(res.statusCode >= 400) {\n      throw new JsonLdError(\n        'URL could not be dereferenced: ' + statusText,\n        'jsonld.InvalidUrl', {\n          code: 'loading document failed',\n          url,\n          httpStatusCode: res.statusCode\n        });\n    }\n\n    // handle Link Header\n    if(res.headers.link &&\n      res.headers['content-type'] !== 'application/ld+json') {\n      // only 1 related link header permitted\n      const linkHeader = parseLinkHeader(res.headers.link)[LINK_HEADER_REL];\n      if(Array.isArray(linkHeader)) {\n        throw new JsonLdError(\n          'URL could not be dereferenced, it has more than one associated ' +\n          'HTTP Link Header.',\n          'jsonld.InvalidUrl',\n          {code: 'multiple context link headers', url});\n      }\n      if(linkHeader) {\n        doc.contextUrl = linkHeader.target;\n      }\n    }\n\n    // handle redirect\n    if(res.statusCode >= 300 && res.statusCode < 400 && res.headers.location) {\n      if(redirects.length === maxRedirects) {\n        throw new JsonLdError(\n          'URL could not be dereferenced; there were too many redirects.',\n          'jsonld.TooManyRedirects', {\n            code: 'loading document failed',\n            url,\n            httpStatusCode: res.statusCode,\n            redirects\n          });\n      }\n      if(redirects.indexOf(url) !== -1) {\n        throw new JsonLdError(\n          'URL could not be dereferenced; infinite redirection was detected.',\n          'jsonld.InfiniteRedirectDetected', {\n            code: 'recursive context inclusion',\n            url,\n            httpStatusCode: res.statusCode,\n            redirects\n          });\n      }\n      redirects.push(url);\n      return loadDocument(res.headers.location, redirects);\n    }\n\n    // cache for each redirected URL\n    redirects.push(url);\n    // TODO: disable cache until HTTP caching implemented\n    /*\n    for(let i = 0; i < redirects.length; ++i) {\n      cache.set(\n        redirects[i],\n        {contextUrl: null, documentUrl: redirects[i], document: body});\n    }\n    */\n\n    return doc;\n  }\n};\n\nfunction _request(request, options) {\n  return new Promise((resolve, reject) => {\n    request(options, (err, res, body) => {\n      if(err) {\n        reject(err);\n      } else {\n        resolve({res, body});\n      }\n    });\n  });\n}\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nconst {parseLinkHeader, buildHeaders} = require('../util');\nconst {LINK_HEADER_REL} = require('../constants');\nconst JsonLdError = require('../JsonLdError');\nconst RequestQueue = require('../RequestQueue');\n\nconst REGEX_LINK_HEADER = /(^|(\\r\\n))link:/i;\n\n/**\n * Creates a built-in XMLHttpRequest document loader.\n *\n * @param options the options to use:\n *          secure: require all URLs to use HTTPS.\n *          headers: an object (map) of headers which will be passed as request\n *            headers for the requested document. Accept is not allowed.\n *          [xhr]: the XMLHttpRequest API to use.\n *\n * @return the XMLHttpRequest document loader.\n */\nmodule.exports = ({\n  secure,\n  headers = {},\n  xhr\n} = {headers: {}}) => {\n  headers = buildHeaders(headers);\n  const queue = new RequestQueue();\n  return queue.wrapLoader(loader);\n\n  async function loader(url) {\n    if(url.indexOf('http:') !== 0 && url.indexOf('https:') !== 0) {\n      throw new JsonLdError(\n        'URL could not be dereferenced; only \"http\" and \"https\" URLs are ' +\n        'supported.',\n        'jsonld.InvalidUrl', {code: 'loading document failed', url});\n    }\n    if(secure && url.indexOf('https') !== 0) {\n      throw new JsonLdError(\n        'URL could not be dereferenced; secure mode is enabled and ' +\n        'the URL\\'s scheme is not \"https\".',\n        'jsonld.InvalidUrl', {code: 'loading document failed', url});\n    }\n\n    let req;\n    try {\n      req = await _get(xhr, url, headers);\n    } catch(e) {\n      throw new JsonLdError(\n        'URL could not be dereferenced, an error occurred.',\n        'jsonld.LoadDocumentError',\n        {code: 'loading document failed', url, cause: e});\n    }\n\n    if(req.status >= 400) {\n      throw new JsonLdError(\n        'URL could not be dereferenced: ' + req.statusText,\n        'jsonld.LoadDocumentError', {\n          code: 'loading document failed',\n          url,\n          httpStatusCode: req.status\n        });\n    }\n\n    const doc = {contextUrl: null, documentUrl: url, document: req.response};\n\n    // handle Link Header (avoid unsafe header warning by existence testing)\n    const contentType = req.getResponseHeader('Content-Type');\n    let linkHeader;\n    if(REGEX_LINK_HEADER.test(req.getAllResponseHeaders())) {\n      linkHeader = req.getResponseHeader('Link');\n    }\n    if(linkHeader && contentType !== 'application/ld+json') {\n      // only 1 related link header permitted\n      linkHeader = parseLinkHeader(linkHeader)[LINK_HEADER_REL];\n      if(Array.isArray(linkHeader)) {\n        throw new JsonLdError(\n          'URL could not be dereferenced, it has more than one ' +\n          'associated HTTP Link Header.',\n          'jsonld.InvalidUrl',\n          {code: 'multiple context link headers', url});\n      }\n      if(linkHeader) {\n        doc.contextUrl = linkHeader.target;\n      }\n    }\n\n    return doc;\n  }\n};\n\nfunction _get(xhr, url, headers) {\n  xhr = xhr || XMLHttpRequest;\n  const req = new xhr();\n  return new Promise((resolve, reject) => {\n    req.onload = () => resolve(req);\n    req.onerror = err => reject(err);\n    req.open('GET', url, true);\n    for(const k in headers) {\n      req.setRequestHeader(k, headers[k]);\n    }\n    req.send();\n  });\n}\n","/*\n * Copyright (c) 2017 Digital Bazaar, Inc. All rights reserved.\n */\n'use strict';\n\nmodule.exports = jsonld => {\n  class JsonLdProcessor {\n    toString() {\n      return '[object JsonLdProcessor]';\n    }\n  }\n  Object.defineProperty(JsonLdProcessor, 'prototype', {\n    writable: false,\n    enumerable: false\n  });\n  Object.defineProperty(JsonLdProcessor.prototype, 'constructor', {\n    writable: true,\n    enumerable: false,\n    configurable: true,\n    value: JsonLdProcessor\n  });\n\n  // The Web IDL test harness will check the number of parameters defined in\n  // the functions below. The number of parameters must exactly match the\n  // required (non-optional) parameters of the JsonLdProcessor interface as\n  // defined here:\n  // https://www.w3.org/TR/json-ld-api/#the-jsonldprocessor-interface\n\n  JsonLdProcessor.compact = function(input, ctx) {\n    if(arguments.length < 2) {\n      return Promise.reject(\n        new TypeError('Could not compact, too few arguments.'));\n    }\n    return jsonld.compact(input, ctx);\n  };\n  JsonLdProcessor.expand = function(input) {\n    if(arguments.length < 1) {\n      return Promise.reject(\n        new TypeError('Could not expand, too few arguments.'));\n    }\n    return jsonld.expand(input);\n  };\n  JsonLdProcessor.flatten = function(input) {\n    if(arguments.length < 1) {\n      return Promise.reject(\n        new TypeError('Could not flatten, too few arguments.'));\n    }\n    return jsonld.flatten(input);\n  };\n\n  return JsonLdProcessor;\n};\n","var BlankNode = require('./blank-node')\nvar DefaultGraph = require('./default-graph')\nvar Literal = require('./literal')\nvar NamedNode = require('./named-node')\nvar Quad = require('./quad')\nvar Variable = require('./variable')\n\nfunction DataFactory () {}\n\nDataFactory.namedNode = function (value) {\n  return new NamedNode(value)\n}\n\nDataFactory.blankNode = function (value) {\n  return new BlankNode(value)\n}\n\nDataFactory.literal = function (value, languageOrDatatype) {\n  if (typeof languageOrDatatype === 'string') {\n    if (languageOrDatatype.indexOf(':') === -1) {\n      return new Literal(value, languageOrDatatype)\n    }\n\n    return new Literal(value, null, DataFactory.namedNode(languageOrDatatype))\n  }\n\n  return new Literal(value, null, languageOrDatatype)\n}\n\nDataFactory.defaultGraph = function () {\n  return DataFactory.defaultGraphInstance\n}\n\nDataFactory.variable = function (value) {\n  return new Variable(value)\n}\n\nDataFactory.triple = function (subject, predicate, object) {\n  return DataFactory.quad(subject, predicate, object)\n}\n\nDataFactory.quad = function (subject, predicate, object, graph) {\n  return new Quad(subject, predicate, object, graph || DataFactory.defaultGraphInstance)\n}\n\nDataFactory.defaultGraphInstance = new DefaultGraph()\n\nmodule.exports = DataFactory\n","function BlankNode (id) {\n  this.value = id || ('b' + (++BlankNode.nextId))\n}\n\nBlankNode.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nBlankNode.prototype.termType = 'BlankNode'\n\nBlankNode.nextId = 0\n\nmodule.exports = BlankNode\n","var NamedNode = require('./named-node')\n\nfunction Literal (value, language, datatype) {\n  this.value = value\n  this.datatype = Literal.stringDatatype\n  this.language = ''\n\n  if (language) {\n    this.language = language\n    this.datatype = Literal.langStringDatatype\n  } else if (datatype) {\n    this.datatype = datatype\n  }\n}\n\nLiteral.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value &&\n    other.language === this.language && other.datatype.equals(this.datatype)\n}\n\nLiteral.prototype.termType = 'Literal'\nLiteral.langStringDatatype = new NamedNode('http://www.w3.org/1999/02/22-rdf-syntax-ns#langString')\nLiteral.stringDatatype = new NamedNode('http://www.w3.org/2001/XMLSchema#string')\n\nmodule.exports = Literal\n","var DefaultGraph = require('./default-graph')\n\nfunction Quad (subject, predicate, object, graph) {\n  this.subject = subject\n  this.predicate = predicate\n  this.object = object\n\n  if (graph) {\n    this.graph = graph\n  } else {\n    this.graph = new DefaultGraph()\n  }\n}\n\nQuad.prototype.equals = function (other) {\n  return !!other && other.subject.equals(this.subject) && other.predicate.equals(this.predicate) &&\n    other.object.equals(this.object) && other.graph.equals(this.graph)\n}\n\nmodule.exports = Quad\n","function Variable (name) {\n  this.value = name\n}\n\nVariable.prototype.equals = function (other) {\n  return !!other && other.termType === this.termType && other.value === this.value\n}\n\nVariable.prototype.termType = 'Variable'\n\nmodule.exports = Variable\n","var RDFaProcessor = require('rdfa-processor').RDFaProcessor;\nconst DataFactory = require('@rdfjs/data-model')\nmodule.exports = class {\n\n  constructor (options) {\n    this.documentIRI = options.documentIRI;\n    this.factory = options.factory || DataFactory;\n  }\n  \n  parse (document, callback) {\n    try {\n      var processor = new RDFaProcessor(null, this.factory);\n      processor.onTriple = function (triple) {\n        callback(null, triple);\n      }\n      processor.process(document, {baseURI: this.documentIRI});\n    } catch (e) {\n      callback(e);\n    }\n\n  }\n}\n","module.exports = {\n  RDFaProcessor: require(\"./RDFaProcessor\")\n};\n","var URIResolver = require(\"./URI\");\nconst { DataFactory } = require('n3');\n\nclass RDFaProcessor {\n  \n  constructor (targetObject, factory) {\n    this.uriresolver = new URIResolver();\n    \n    if (!factory) {\n      this.factory = DataFactory;\n    } else {\n      this.factory = factory;\n    }\n    \n    this.XMLLiteralURI = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#XMLLiteral\"; \n    this.HTMLLiteralURI = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#HTML\"; \n    this.PlainLiteralURI = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#PlainLiteral\";\n    this.objectURI = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#object\";\n    this.typeURI = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#type\";\n\n    this.nameChar = '[-A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\u10000-\\uEFFFF\\.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]';\n    this.nameStartChar = '[\\u0041-\\u005A\\u0061-\\u007A\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u00FF\\u0100-\\u0131\\u0134-\\u013E\\u0141-\\u0148\\u014A-\\u017E\\u0180-\\u01C3\\u01CD-\\u01F0\\u01F4-\\u01F5\\u01FA-\\u0217\\u0250-\\u02A8\\u02BB-\\u02C1\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03CE\\u03D0-\\u03D6\\u03DA\\u03DC\\u03DE\\u03E0\\u03E2-\\u03F3\\u0401-\\u040C\\u040E-\\u044F\\u0451-\\u045C\\u045E-\\u0481\\u0490-\\u04C4\\u04C7-\\u04C8\\u04CB-\\u04CC\\u04D0-\\u04EB\\u04EE-\\u04F5\\u04F8-\\u04F9\\u0531-\\u0556\\u0559\\u0561-\\u0586\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0621-\\u063A\\u0641-\\u064A\\u0671-\\u06B7\\u06BA-\\u06BE\\u06C0-\\u06CE\\u06D0-\\u06D3\\u06D5\\u06E5-\\u06E6\\u0905-\\u0939\\u093D\\u0958-\\u0961\\u0985-\\u098C\\u098F-\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09DC-\\u09DD\\u09DF-\\u09E1\\u09F0-\\u09F1\\u0A05-\\u0A0A\\u0A0F-\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32-\\u0A33\\u0A35-\\u0A36\\u0A38-\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8B\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2-\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AE0\\u0B05-\\u0B0C\\u0B0F-\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32-\\u0B33\\u0B36-\\u0B39\\u0B3D\\u0B5C-\\u0B5D\\u0B5F-\\u0B61\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99-\\u0B9A\\u0B9C\\u0B9E-\\u0B9F\\u0BA3-\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB5\\u0BB7-\\u0BB9\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C33\\u0C35-\\u0C39\\u0C60-\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CDE\\u0CE0-\\u0CE1\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D28\\u0D2A-\\u0D39\\u0D60-\\u0D61\\u0E01-\\u0E2E\\u0E30\\u0E32-\\u0E33\\u0E40-\\u0E45\\u0E81-\\u0E82\\u0E84\\u0E87-\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA-\\u0EAB\\u0EAD-\\u0EAE\\u0EB0\\u0EB2-\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0F40-\\u0F47\\u0F49-\\u0F69\\u10A0-\\u10C5\\u10D0-\\u10F6\\u1100\\u1102-\\u1103\\u1105-\\u1107\\u1109\\u110B-\\u110C\\u110E-\\u1112\\u113C\\u113E\\u1140\\u114C\\u114E\\u1150\\u1154-\\u1155\\u1159\\u115F-\\u1161\\u1163\\u1165\\u1167\\u1169\\u116D-\\u116E\\u1172-\\u1173\\u1175\\u119E\\u11A8\\u11AB\\u11AE-\\u11AF\\u11B7-\\u11B8\\u11BA\\u11BC-\\u11C2\\u11EB\\u11F0\\u11F9\\u1E00-\\u1E9B\\u1EA0-\\u1EF9\\u1F00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2126\\u212A-\\u212B\\u212E\\u2180-\\u2182\\u3041-\\u3094\\u30A1-\\u30FA\\u3105-\\u312C\\uAC00-\\uD7A3\\u4E00-\\u9FA5\\u3007\\u3021-\\u3029_]';\n    this.NCNAME = new RegExp('^' + this.nameStartChar + this.nameChar + '*$');\n\n    \n    if (targetObject) {\n      this.target = targetObject;\n    } else {\n      this.target = {\n        graph: {\n          subjects: {},\n          prefixes: {},\n          terms: {}\n        }\n      };\n    }\n    this.theOne = \"_:\"+(new Date()).getTime();\n    this.language = null;\n    this.vocabulary = null;\n    this.blankCounter = 0;\n    this.langAttributes = [ { namespaceURI: \"http://www.w3.org/XML/1998/namespace\", localName: \"lang\" } ];\n    this.inXHTMLMode = false;\n    this.absURIRE = /[\\w\\_\\-]+:\\S+/;\n    this.finishedHandlers = [];\n    this.init();\n  }\n\n  newBlankNode () {\n    this.blankCounter++;\n    return \"_:\"+this.blankCounter;\n  }\n\n  trim (str) {\n    return str.replace(/^\\s\\s*/, '').replace(/\\s\\s*$/, '');\n  }\n\n  tokenize (str) {\n    return this.trim(str).split(/\\s+/);\n  }\n\n\n  parseSafeCURIEOrCURIEOrURI (value,prefixes,base) {\n    value = this.trim(value);\n    if (value.charAt(0)=='[' && value.charAt(value.length-1)==']') {\n      value = value.substring(1,value.length-1);\n      value = value.trim(value);\n      if (value.length==0) {\n        return null;\n      }\n      if (value==\"_:\") {\n        // the one node\n        return this.theOne;\n      }\n      return this.parseCURIE(value,prefixes,base);\n    } else {\n      return this.parseCURIEOrURI(value,prefixes,base);\n    }\n  }\n\n  parseCURIE (value,prefixes,base) {\n    var colon = value.indexOf(\":\");\n    if (colon>=0) {\n      var prefix = value.substring(0,colon);\n      if (prefix==\"\") {\n        // default prefix\n        var uri = prefixes[\"\"];\n        return uri ? uri+value.substring(colon+1) : null;\n      } else if (prefix==\"_\") {\n        // blank node\n        return \"_:\"+value.substring(colon+1);\n      } else if (this.NCNAME.test(prefix)) {\n        var uri = prefixes[prefix];\n        if (uri) {\n          return uri+value.substring(colon+1);\n        }\n      }\n    }\n    return null;\n  }\n\n  parseCURIEOrURI (value,prefixes,base) {\n    var curie = this.parseCURIE(value,prefixes,base);\n    if (curie) {\n      return curie;\n    }\n    return this.resolveAndNormalize(base,value);\n  }\n\n  parsePredicate (value,defaultVocabulary,terms,prefixes,base,ignoreTerms) {\n    if (value==\"\") {\n      return null;\n    }\n    var predicate = this.parseTermOrCURIEOrAbsURI(value,defaultVocabulary,ignoreTerms ? null : terms,prefixes,base);\n    if (predicate && predicate.indexOf(\"_:\")==0) {\n      return null;\n    }\n    return predicate;\n  }\n\n  parseTermOrCURIEOrURI (value,defaultVocabulary,terms,prefixes,base) {\n    //alert(\"Parsing \"+value+\" with default vocab \"+defaultVocabulary);\n    value = this.trim(value);\n    var curie = this.parseCURIE(value,prefixes,base);\n    if (curie) {\n      return curie;\n    } else {\n      var term = terms[value];\n      if (term) {\n        return term;\n      }\n      var lcvalue = value.toLowerCase();\n      term = terms[lcvalue];\n      if (term) {\n        return term;\n      }\n      if (defaultVocabulary && !this.absURIRE.exec(value)) {\n        return defaultVocabulary+value\n      }\n    }\n    return this.resolveAndNormalize(base,value);\n  }\n\n  parseTermOrCURIEOrAbsURI (value,defaultVocabulary,terms,prefixes,base) {\n    //alert(\"Parsing \"+value+\" with default vocab \"+defaultVocabulary);\n    value = this.trim(value);\n    var curie = this.parseCURIE(value,prefixes,base);\n    if (curie) {\n      return curie;\n    } else if (terms) {\n      if (defaultVocabulary && !this.absURIRE.exec(value)) {\n        return defaultVocabulary+value\n      }\n      var term = terms[value];\n      if (term) {\n        return term;\n      }\n      var lcvalue = value.toLowerCase();\n      term = terms[lcvalue];\n      if (term) {\n        return term;\n      }\n    }\n    if (this.absURIRE.exec(value)) {\n      return this.resolveAndNormalize(base,value);\n    }\n    return null;\n  }\n\n  resolveAndNormalize (base,href) {\n    var u = base.resolve(href);\n    var parsed = this.uriresolver.parseURI(u);\n    parsed.normalize();\n    return parsed.spec;\n  }\n\n  parsePrefixMappings (str,target) {\n    var values = this.tokenize(str);\n    var prefix = null;\n    var uri = null;\n    for (var i=0; i<values.length; i++) {\n      if (values[i][values[i].length-1]==':') {\n        prefix = values[i].substring(0,values[i].length-1);\n      } else if (prefix) {\n        target[prefix] = this.target.baseURI ? this.target.baseURI.resolve(values[i]) : values[i];\n        prefix = null;\n      }\n    }\n  }\n\n  copyMappings (mappings) {\n    var newMappings = {};\n    for (var k in mappings) {\n      newMappings[k] = mappings[k];\n    }\n    return newMappings;\n  }\n\n  ancestorPath (node) {\n    var path = \"\";\n    while (node && node.nodeType!=9/*Node.DOCUMENT_NODE*/) {\n      path = \"/\"+node.localName+path;\n      node = node.parentNode;\n    }\n    return path;\n  }\n\n  setContext (node) {\n    // We only recognized XHTML+RDFa 1.1 if the version is set propertyly\n    if (node.localName==\"html\" && node.getAttribute(\"version\")==\"XHTML+RDFa 1.1\") {\n      this.setXHTMLContext();\n    } else if (node.localName==\"html\" || node.namespaceURI==\"http://www.w3.org/1999/xhtml\") {\n      if (node.ownerDocument.doctype) {\n        var document = node.ownerDocument;\n        if (document.doctype.publicId==\"-//W3C//DTD XHTML+RDFa 1.0//EN\" && document.doctype.systemId==\"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-1.dtd\") {\n          //console.error(\"WARNING: RDF 1.0 is not supported. Defaulting to HTML5 mode.\");\n          this.setHTMLContext();\n        } else if (document.doctype.publicId==\"-//W3C//DTD XHTML+RDFa 1.1//EN\" && document.doctype.systemId==\"http://www.w3.org/MarkUp/DTD/xhtml-rdfa-2.dtd\") {\n          this.setXHTMLContext();\n        } else {\n          this.setHTMLContext();\n        }\n      } else {\n        this.setHTMLContext();\n      }\n    } else {\n      this.setXMLContext();\n    }\n\n  }\n\n  setInitialContext () {\n    this.vocabulary = null;\n    // By default, the prefixes are terms are loaded to the RDFa 1.1. standard within the graph constructor\n    this.langAttributes = [ { namespaceURI: \"http://www.w3.org/XML/1998/namespace\", localName: \"lang\" } ];\n\n    // From https://www.w3.org/2011/rdfa-context/rdfa-1.1\n    this.target.graph.prefixes[\"as\"] = \"https://www.w3.org/ns/activitystreams#\";\n    this.target.graph.prefixes[\"dqv\"] = \"http://www.w3.org/ns/dqv#\";\n    this.target.graph.prefixes[\"duv\"] = \"https://www.w3.org/TR/vocab-duv#\";\n    this.target.graph.prefixes[\"cat\"] = \"http://www.w3.org/ns/dcat#\";\n    this.target.graph.prefixes[\"qb\"] = \"http://purl.org/linked-data/cube#\";\n    this.target.graph.prefixes[\"grddl\"] = \"http://www.w3.org/2003/g/data-view#\";\n    this.target.graph.prefixes[\"ldp\"] = \"http://www.w3.org/ns/ldp#\";\n    this.target.graph.prefixes[\"oa\"] = \"http://www.w3.org/ns/oa#\";\n    this.target.graph.prefixes[\"ma\"] = \"http://www.w3.org/ns/ma-ont#\";\n    this.target.graph.prefixes[\"owl\"] = \"http://www.w3.org/2002/07/owl#\";\n    this.target.graph.prefixes[\"rdf\"] = \"http://www.w3.org/1999/02/22-rdf-syntax-ns#\";\n    this.target.graph.prefixes[\"rdfa\"] = \"http://www.w3.org/ns/rdfa#\";\n    this.target.graph.prefixes[\"rdfs\"] = \"http://www.w3.org/2000/01/rdf-schema#\";\n    this.target.graph.prefixes[\"rif\"] = \"http://www.w3.org/2007/rif#\";\n    this.target.graph.prefixes[\"rr\"] = \"http://www.w3.org/ns/r2rml#\";\n    this.target.graph.prefixes[\"skos\"] = \"http://www.w3.org/2004/02/skos/core#\";\n    this.target.graph.prefixes[\"skosxl\"] = \"http://www.w3.org/2008/05/skos-xl#\";\n    this.target.graph.prefixes[\"wdr\"] = \"http://www.w3.org/2007/05/powder#\";\n    this.target.graph.prefixes[\"void\"] = \"http://rdfs.org/ns/void#\";\n    this.target.graph.prefixes[\"wdrs\"] = \"http://www.w3.org/2007/05/powder-s#\";\n    this.target.graph.prefixes[\"xhv\"] = \"http://www.w3.org/1999/xhtml/vocab#\";\n    this.target.graph.prefixes[\"xml\"] = \"http://www.w3.org/XML/1998/namespace\";\n    this.target.graph.prefixes[\"xsd\"] = \"http://www.w3.org/2001/XMLSchema#\";\n    this.target.graph.prefixes[\"prov\"] = \"http://www.w3.org/ns/prov#\";\n    this.target.graph.prefixes[\"sd\"] = \"http://www.w3.org/ns/sparql-service-description#\";\n    this.target.graph.prefixes[\"org\"] = \"http://www.w3.org/ns/org#\";\n    this.target.graph.prefixes[\"gldp\"] = \"http://www.w3.org/ns/people#\";\n    this.target.graph.prefixes[\"cnt\"] = \"http://www.w3.org/2008/content#\";\n    this.target.graph.prefixes[\"dcat\"] = \"http://www.w3.org/ns/dcat#\";\n    this.target.graph.prefixes[\"earl\"] = \"http://www.w3.org/ns/earl#\";\n    this.target.graph.prefixes[\"ht\"] = \"http://www.w3.org/2006/http#\";\n    this.target.graph.prefixes[\"ptr\"] = \"http://www.w3.org/2009/pointers#\";\n    this.target.graph.prefixes[\"cc\"] = \"http://creativecommons.org/ns#\";\n    this.target.graph.prefixes[\"ctag\"] = \"http://commontag.org/ns#\";\n    this.target.graph.prefixes[\"dc\"] = \"http://purl.org/dc/terms/\";\n    this.target.graph.prefixes[\"dc11\"] = \"http://purl.org/dc/elements/1.1/\";\n    this.target.graph.prefixes[\"dcterms\"] = \"http://purl.org/dc/terms/\";\n    this.target.graph.prefixes[\"foaf\"] = \"http://xmlns.com/foaf/0.1/\";\n    this.target.graph.prefixes[\"gr\"] = \"http://purl.org/goodrelations/v1#\";\n    this.target.graph.prefixes[\"ical\"] = \"http://www.w3.org/2002/12/cal/icaltzd#\";\n    this.target.graph.prefixes[\"og\"] = \"http://ogp.me/ns#\";\n    this.target.graph.prefixes[\"rev\"] = \"http://purl.org/stuff/rev#\";\n    this.target.graph.prefixes[\"sioc\"] = \"http://rdfs.org/sioc/ns#\";\n    this.target.graph.prefixes[\"v\"] = \"http://rdf.data-vocabulary.org/#\";\n    this.target.graph.prefixes[\"vcard\"] = \"http://www.w3.org/2006/vcard/ns#\";\n    this.target.graph.prefixes[\"schema\"] = \"http://schema.org/\";\n    this.target.graph.prefixes[\"describedby\"] = \"http://www.w3.org/2007/05/powder-s#describedby\";\n    this.target.graph.prefixes[\"license\"] = \"http://www.w3.org/1999/xhtml/vocab#license\";\n    this.target.graph.prefixes[\"role\"] = \"http://www.w3.org/1999/xhtml/vocab#role\";\n    this.target.graph.prefixes[\"ssn\"] = \"http://www.w3.org/ns/ssn/\";\n    this.target.graph.prefixes[\"sosa\"] = \"http://www.w3.org/ns/sosa/\";\n    this.target.graph.prefixes[\"time\"] = \"http://www.w3.org/2006/time#\";\n  }\n\n  setXMLContext () {\n    this.setInitialContext();\n    this.inXHTMLMode = false;\n    this.inHTMLMode = false;\n  }\n\n  setHTMLContext () {\n    this.setInitialContext();\n    this.langAttributes = [ { namespaceURI: \"http://www.w3.org/XML/1998/namespace\", localName: \"lang\" },\n                            { namespaceURI: null, localName: \"lang\" }];\n    this.inXHTMLMode = false;\n    this.inHTMLMode = true;\n  }\n\n  setXHTMLContext () {\n\n    this.setInitialContext();\n    \n    this.inXHTMLMode = true;\n    this.inHTMLMode = false;\n    \n    this.langAttributes = [ { namespaceURI: \"http://www.w3.org/XML/1998/namespace\", localName: \"lang\" },\n                            { namespaceURI: null, localName: \"lang\" }];\n\n    // From http://www.w3.org/2011/rdfa-context/xhtml-rdfa-1.1\n    this.target.graph.terms[\"alternate\"] = \"http://www.w3.org/1999/xhtml/vocab#alternate\";\n    this.target.graph.terms[\"appendix\"] = \"http://www.w3.org/1999/xhtml/vocab#appendix\";\n    this.target.graph.terms[\"bookmark\"] = \"http://www.w3.org/1999/xhtml/vocab#bookmark\";\n    this.target.graph.terms[\"cite\"] = \"http://www.w3.org/1999/xhtml/vocab#cite\"\n    this.target.graph.terms[\"chapter\"] = \"http://www.w3.org/1999/xhtml/vocab#chapter\";\n    this.target.graph.terms[\"contents\"] = \"http://www.w3.org/1999/xhtml/vocab#contents\";\n    this.target.graph.terms[\"copyright\"] = \"http://www.w3.org/1999/xhtml/vocab#copyright\";\n    this.target.graph.terms[\"first\"] = \"http://www.w3.org/1999/xhtml/vocab#first\";\n    this.target.graph.terms[\"glossary\"] = \"http://www.w3.org/1999/xhtml/vocab#glossary\";\n    this.target.graph.terms[\"help\"] = \"http://www.w3.org/1999/xhtml/vocab#help\";\n    this.target.graph.terms[\"icon\"] = \"http://www.w3.org/1999/xhtml/vocab#icon\";\n    this.target.graph.terms[\"index\"] = \"http://www.w3.org/1999/xhtml/vocab#index\";\n    this.target.graph.terms[\"last\"] = \"http://www.w3.org/1999/xhtml/vocab#last\";\n    this.target.graph.terms[\"license\"] = \"http://www.w3.org/1999/xhtml/vocab#license\";\n    this.target.graph.terms[\"meta\"] = \"http://www.w3.org/1999/xhtml/vocab#meta\";\n    this.target.graph.terms[\"next\"] = \"http://www.w3.org/1999/xhtml/vocab#next\";\n    this.target.graph.terms[\"prev\"] = \"http://www.w3.org/1999/xhtml/vocab#prev\";\n    this.target.graph.terms[\"previous\"] = \"http://www.w3.org/1999/xhtml/vocab#previous\";\n    this.target.graph.terms[\"section\"] = \"http://www.w3.org/1999/xhtml/vocab#section\";\n    this.target.graph.terms[\"stylesheet\"] = \"http://www.w3.org/1999/xhtml/vocab#stylesheet\";\n    this.target.graph.terms[\"subsection\"] = \"http://www.w3.org/1999/xhtml/vocab#subsection\";\n    this.target.graph.terms[\"start\"] = \"http://www.w3.org/1999/xhtml/vocab#start\";\n    this.target.graph.terms[\"top\"] = \"http://www.w3.org/1999/xhtml/vocab#top\";\n    this.target.graph.terms[\"up\"] = \"http://www.w3.org/1999/xhtml/vocab#up\";\n    this.target.graph.terms[\"p3pv1\"] = \"http://www.w3.org/1999/xhtml/vocab#p3pv1\";\n\n    // other\n    this.target.graph.terms[\"related\"] = \"http://www.w3.org/1999/xhtml/vocab#related\";\n    this.target.graph.terms[\"role\"] = \"http://www.w3.org/1999/xhtml/vocab#role\";\n    this.target.graph.terms[\"transformation\"] = \"http://www.w3.org/1999/xhtml/vocab#transformation\";\n\n\n    this.dateTimeTypes = [\n      { pattern: /-?P(?:[0-9]+Y)?(?:[0-9]+M)?(?:[0-9]+D)?(?:T(?:[0-9]+H)?(?:[0-9]+M)?(?:[0-9]+(?:\\.[0-9]+)?S)?)?/,\n        type: \"http://www.w3.org/2001/XMLSchema#duration\" },\n      { pattern: /-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9]T(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\\.[0-9]+)?(?:Z|[+\\-][0-9][0-9]:[0-9][0-9])?/,\n        type: \"http://www.w3.org/2001/XMLSchema#dateTime\" },\n      { pattern: /-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]-[0-9][0-9](?:Z|[+\\-][0-9][0-9]:[0-9][0-9])?/,\n        type: \"http://www.w3.org/2001/XMLSchema#date\" },\n      { pattern: /(?:[0-1][0-9]|2[0-4]):[0-5][0-9]:[0-5][0-9](?:\\.[0-9]+)?(?:Z|[+\\-][0-9][0-9]:[0-9][0-9])?/,\n        type: \"http://www.w3.org/2001/XMLSchema#time\" },\n      { pattern: /-?(?:[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9])-[0-9][0-9]/,\n        type: \"http://www.w3.org/2001/XMLSchema#gYearMonth\" },\n      { pattern: /-?[1-9][0-9][0-9][0-9]|0[1-9][0-9][0-9]|00[1-9][0-9]|000[1-9]/,\n        type: \"http://www.w3.org/2001/XMLSchema#gYear\" }\n    ];\n  }\n\n  init () {\n  }\n\n  newSubjectOrigin (origin,subject) {\n  }\n\n  /**\n   * Will call onTriple for the RDF-JS compliant way -- override that function in your code, not this one\n   * This design pattern is not ideal: e.g., if you run process before overriding the function (as you might be used to with eventemitters), youre going to be debugging for a long time\n   */\n  addTriple (origin,subject,predicate,object) {\n    var graph = this.factory.namedNode(this.options.baseURI) || this.factory.defaultGraph();\n    if (subject.substr(0,2) === '_:') {\n      subject = this.factory.blankNode(subject.substr(2));\n    } else {\n      subject = this.factory.namedNode(subject);\n    }\n    if (predicate.substr(0,2) === '_:') {\n      predicate = this.factory.blankNode(predicate.substr(2));\n    } else {\n      predicate = this.factory.namedNode(predicate);\n    }\n    if (object.type === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#object') {\n      if (object.value.substr(0,2) === '_:') {\n        object = this.factory.blankNode(object.value.substr(2));\n      } else {\n        object = this.factory.namedNode(object.value);\n      }\n    } else {\n      if (object.language) \n        object = this.factory.literal(object.value, object.language);\n      else\n        object = this.factory.literal(object.value, this.factory.namedNode(object.type));\n    }\n    var quad = this.factory.quad(subject, predicate, object, graph);\n    //quad.origin = origin; // For now: dont include the origin\n    this.onTriple(quad);\n  }\n\n  onTriple(triple) {\n  }\n\n\n  deriveDateTimeType (value) {\n    for (var i=0; i<this.dateTimeTypes.length; i++) {\n      //console.log(\"Checking \"+value+\" against \"+this.dateTimeTypes[i].type);\n      var matched = this.dateTimeTypes[i].pattern.exec(value);\n      if (matched && matched[0].length==value.length) {\n        //console.log(\"Matched!\");\n        return this.dateTimeTypes[i].type;\n      }\n    }\n    return null;\n  }\n\n  process (node,options) {\n    this.options = options;\n    if (node.nodeType==9/*Node.DOCUMENT_NODE*/) {\n      node = node.documentElement;\n      this.setContext(node);\n    } else if (node.parentNode.nodeType==9/*Node.DOCUMENT_NODE*/) {\n      this.setContext(node);\n    } \n    var queue = [];\n    // Fix for Firefox that includes the hash in the base URI\n    var removeHash = function(baseURI) {\n      // Fix for undefined baseURI property\n      if (!baseURI && options && options.baseURI) {\n        return options.baseURI;\n      }\n\n      var hash = baseURI.indexOf(\"#\");\n      if (hash>=0) {\n        baseURI = baseURI.substring(0,hash);\n      }\n      if (options && options.baseURIMap) {\n        baseURI = options.baseURIMap(baseURI);\n      }\n      return baseURI;\n    }\n    queue.push({ current: node, context: this.push(null,removeHash(node.baseURI))});\n    while (queue.length>0) {\n      var item = queue.shift();\n      if (item.parent) {\n        // Sequence Step 14: list triple generation\n        if (item.context.parent && item.context.parent.listMapping==item.listMapping) {\n          // Skip a child context with exactly the same mapping\n          continue;\n        }\n        //console.log(\"Generating lists for \"+item.subject+\", tag \"+item.parent.localName);\n        for (var predicate in item.listMapping) {\n          var list = item.listMapping[predicate];\n          if (list.length==0) {\n            this.addTriple(item.parent,item.subject,predicate,{ type: this.objectURI, value: \"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil\" });\n            continue;\n          }\n          var bnodes = [];\n          for (var i=0; i<list.length; i++) {\n            bnodes.push(this.newBlankNode());\n            //this.newSubject(item.parent,bnodes[i]);\n          }\n          for (var i=0; i<bnodes.length; i++) {\n            this.addTriple(item.parent,bnodes[i],\"http://www.w3.org/1999/02/22-rdf-syntax-ns#first\",list[i]);\n            this.addTriple(item.parent,bnodes[i],\"http://www.w3.org/1999/02/22-rdf-syntax-ns#rest\",{ type: this.objectURI , value: (i+1)<bnodes.length ? bnodes[i+1] : \"http://www.w3.org/1999/02/22-rdf-syntax-ns#nil\" });\n          }\n          this.addTriple(item.parent,item.subject,predicate,{ type: this.objectURI, value: bnodes[0] });\n        }\n        continue;\n      }\n      var current = item.current;\n      var context = item.context;\n\n      //console.log(\"Tag: \"+current.localName+\", listMapping=\"+JSON.stringify(context.listMapping));\n\n      // Sequence Step 1\n      var skip = false;\n      var newSubject = null;\n      var currentObjectResource = null;\n      var typedResource = null;\n      var prefixes = context.prefixes;\n      var prefixesCopied = false;\n      var incomplete = [];\n      var listMapping = context.listMapping;\n      var listMappingDifferent = context.parent ? false : true;\n      var language = context.language;\n      var vocabulary = context.vocabulary;\n\n      // TODO: the \"base\" element may be used for HTML+RDFa 1.1\n      var base = this.uriresolver.parseURI(removeHash(current.baseURI));\n      current.item = null;\n\n      // Sequence Step 2: set the default vocabulary\n      var vocabAtt = current.getAttributeNode(\"vocab\");\n      if (vocabAtt) {\n        var value = this.trim(vocabAtt.value);\n        if (value.length>0) {\n          vocabulary = value;\n          var baseSubject = base.spec;\n          //this.newSubject(current,baseSubject);\n          this.addTriple(current,baseSubject,\"http://www.w3.org/ns/rdfa#usesVocabulary\", { type: this.objectURI, value: vocabulary});\n        } else {\n          vocabulary = this.vocabulary;\n        }\n      }\n\n      // Sequence Step 3: IRI mappings\n      // handle xmlns attributes\n      for (var i=0; i<current.attributes.length; i++) {\n        var att = current.attributes[i];\n        //if (att.namespaceURI==\"http://www.w3.org/2000/xmlns/\") {\n        if (att.nodeName.charAt(0)==\"x\" && att.nodeName.indexOf(\"xmlns:\")==0) {\n          if (!prefixesCopied) {\n            prefixes = this.copyMappings(prefixes);\n            prefixesCopied = true;\n          }\n          var prefix = att.nodeName.substring(6);\n          // TODO: resolve relative?\n          var ref = this.trim(att.value);\n          prefixes[prefix] = this.target.baseURI ? this.target.baseURI.resolve(ref) : ref;\n        }\n      }\n      // Handle prefix mappings (@prefix)\n      var prefixAtt = current.getAttributeNode(\"prefix\");\n      if (prefixAtt) {\n        if (!prefixesCopied) {\n          prefixes = this.copyMappings(prefixes);\n          prefixesCopied = true;\n        }\n        this.parsePrefixMappings(prefixAtt.value,prefixes);\n      }\n\n\n      // Sequence Step 4: language\n      var xmlLangAtt = null;\n      for (var i=0; !xmlLangAtt && i<this.langAttributes.length; i++) {\n        xmlLangAtt = current.getAttributeNodeNS(this.langAttributes[i].namespaceURI,this.langAttributes[i].localName);\n      }\n      if (xmlLangAtt) {\n        var value = this.trim(xmlLangAtt.value);\n        if (value.length>0) {\n          language = value;\n        } else {\n          language = null;\n        }\n      }\n\n      var relAtt = current.getAttributeNode(\"rel\");\n      var revAtt = current.getAttributeNode(\"rev\");\n      var typeofAtt = current.getAttributeNode(\"typeof\");\n      var propertyAtt = current.getAttributeNode(\"property\");\n      var datatypeAtt = current.getAttributeNode(\"datatype\");\n      var datetimeAtt = this.inHTMLMode ? current.getAttributeNode(\"datetime\") : null;\n      var contentAtt = current.getAttributeNode(\"content\");\n      var aboutAtt = current.getAttributeNode(\"about\");\n      var srcAtt = current.getAttributeNode(\"src\");\n      var resourceAtt = current.getAttributeNode(\"resource\");\n      var hrefAtt = current.getAttributeNode(\"href\");\n      var inlistAtt = current.getAttributeNode(\"inlist\");\n      \n      var relAttPredicates = [];\n      if (relAtt) {\n        var values = this.tokenize(relAtt.value);\n        for (var i=0; i<values.length; i++) {\n          var predicate = this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base,this.inHTMLMode && propertyAtt!=null);\n          if (predicate) {\n            relAttPredicates.push(predicate);\n          }\n        }\n      }\n      var revAttPredicates = [];\n      if (revAtt) {\n        var values = this.tokenize(revAtt.value);\n        for (var i=0; i<values.length; i++) {\n          var predicate = this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base,this.inHTMLMode && propertyAtt!=null);\n          if (predicate) {\n            revAttPredicates.push(predicate);\n          }\n        }\n      }\n      \n      // Section 3.1, bullet 7\n      if (this.inHTMLMode && (relAtt!=null || revAtt!=null) && propertyAtt!=null) {\n        if (relAttPredicates.length==0) {\n          relAtt = null;\n        }\n        if (revAttPredicates.length==0) {\n          revAtt = null;\n        }\n      }\n\n      if (relAtt || revAtt) {\n        // Sequence Step 6: establish new subject and value\n        if (aboutAtt) {\n          newSubject = this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base);\n        }\n        if (typeofAtt) {\n          typedResource = newSubject;\n        }\n        if (!newSubject) {\n          if (current.parentNode.nodeType==9/*Node.DOCUMENT_NODE*/) {\n            newSubject = removeHash(current.baseURI);\n          } else if (context.parentObject) {\n            // TODO: Verify: If the xml:base has been set and the parentObject is the baseURI of the parent, then the subject needs to be the new base URI\n            newSubject = removeHash(current.parentNode.baseURI)==context.parentObject ? removeHash(current.baseURI) : context.parentObject;\n          }\n        }\n        if (resourceAtt) {\n          currentObjectResource = this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base);\n        }\n        \n        if (!currentObjectResource) {\n          if (hrefAtt) {\n            currentObjectResource = this.resolveAndNormalize(base,encodeURI(hrefAtt.value));\n          } else if (srcAtt) {\n            currentObjectResource = this.resolveAndNormalize(base,encodeURI(srcAtt.value));\n          } else if (typeofAtt && !aboutAtt && !(this.inXHTMLMode && (current.localName==\"head\" || current.localName==\"body\"))) {\n            currentObjectResource = this.newBlankNode();\n          }\n        }\n        if (typeofAtt && !aboutAtt && this.inXHTMLMode && (current.localName==\"head\" || current.localName==\"body\")) {\n          typedResource = newSubject;\n        } else if (typeofAtt && !aboutAtt) {\n          typedResource = currentObjectResource;\n        }\n\n      } else if (propertyAtt && !contentAtt && !datatypeAtt) {\n        // Sequence Step 5.1: establish a new subject\n        if (aboutAtt) {\n          newSubject = this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base);\n          if (typeofAtt) {\n            typedResource = newSubject;\n          }\n        }\n        if (!newSubject && current.parentNode.nodeType==9/*Node.DOCUMENT_NODE*/) {\n          newSubject = removeHash(current.baseURI);\n          if (typeofAtt) {\n            typedResource = newSubject;\n          }\n        } else if (!newSubject && context.parentObject) {\n          // TODO: Verify: If the xml:base has been set and the parentObject is the baseURI of the parent, then the subject needs to be the new base URI\n          newSubject = removeHash(current.parentNode.baseURI)==context.parentObject ? removeHash(current.baseURI) : context.parentObject;\n        }\n        if (typeofAtt && !typedResource) {\n          if (resourceAtt) {\n            typedResource = this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base);\n          }\n          if (!typedResource &&hrefAtt) {\n            typedResource = this.resolveAndNormalize(base,encodeURI(hrefAtt.value));\n          }\n          if (!typedResource && srcAtt) {\n            typedResource = this.resolveAndNormalize(base,encodeURI(srcAtt.value));\n          }\n          if (!typedResource && (this.inXHTMLMode || this.inHTMLMode) && (current.localName==\"head\" || current.localName==\"body\")) {\n            typedResource = newSubject;\n          }\n          if (!typedResource) {\n            typedResource = this.newBlankNode();\n          }\n          currentObjectResource = typedResource;\n        }\n        //console.log(current.localName+\", newSubject=\"+newSubject+\", typedResource=\"+typedResource+\", currentObjectResource=\"+currentObjectResource);\n      } else {\n        // Sequence Step 5.2: establish a new subject\n        if (aboutAtt) {\n          newSubject = this.parseSafeCURIEOrCURIEOrURI(aboutAtt.value,prefixes,base);\n        }\n        if (!newSubject && resourceAtt) {\n          newSubject = this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base);\n        }\n        if (!newSubject && hrefAtt) {\n          newSubject = this.resolveAndNormalize(base,encodeURI(hrefAtt.value));\n        }\n        if (!newSubject && srcAtt) {\n          newSubject = this.resolveAndNormalize(base,encodeURI(srcAtt.value));\n        }\n        if (!newSubject) {\n          if (current.parentNode.nodeType==9/*Node.DOCUMENT_NODE*/) {\n            newSubject = removeHash(current.baseURI);\n          } else if ((this.inXHTMLMode || this.inHTMLMode) && (current.localName==\"head\" || current.localName==\"body\")) {\n            newSubject = removeHash(current.parentNode.baseURI)==context.parentObject ? removeHash(current.baseURI) : context.parentObject;\n          } else if (typeofAtt) {\n            newSubject = this.newBlankNode();\n          } else if (context.parentObject) {\n            // TODO: Verify: If the xml:base has been set and the parentObject is the baseURI of the parent, then the subject needs to be the new base URI\n            newSubject = removeHash(current.parentNode.baseURI)==context.parentObject ? removeHash(current.baseURI) : context.parentObject;\n            if (!propertyAtt) {\n              skip = true;\n            }\n          }\n        }\n        if (typeofAtt) {\n          typedResource = newSubject;\n        }\n      }\n\n      //console.log(current.tagName+\": newSubject=\"+newSubject+\", currentObjectResource=\"+currentObjectResource+\", typedResource=\"+typedResource+\", skip=\"+skip);\n\n      var rdfaData = null;\n      if (newSubject) {\n        //this.newSubject(current,newSubject);\n        if (aboutAtt || resourceAtt || typedResource) {\n          var id = newSubject;\n          if (typeofAtt && !aboutAtt && !resourceAtt && currentObjectResource) {\n            id = currentObjectResource;\n          }\n          //console.log(\"Setting data attribute for \"+current.localName+\" for subject \"+id);\n          this.newSubjectOrigin(current,id);\n        }\n      }\n      \n      // Sequence Step 7: generate type triple\n      if (typedResource) {\n        var values = this.tokenize(typeofAtt.value);\n        for (var i=0; i<values.length; i++) {\n          var object = this.parseTermOrCURIEOrAbsURI(values[i],vocabulary,context.terms,prefixes,base);\n          if (object) {\n            this.addTriple(current,typedResource,this.typeURI,{ type: this.objectURI , value: object});\n          }\n        }\n      }\n\n      // Sequence Step 8: new list mappings if there is a new subject\n      //console.log(\"Step 8: newSubject=\"+newSubject+\", context.parentObject=\"+context.parentObject);\n      if (newSubject && newSubject!=context.parentObject) {\n        //console.log(\"Generating new list mapping for \"+newSubject);\n        listMapping = {};\n        listMappingDifferent = true;\n      }\n\n      // Sequence Step 9: generate object triple\n      if (currentObjectResource) {\n        if (relAtt && inlistAtt) {\n          for (var i=0; i<relAttPredicates.length; i++) {\n            var list = listMapping[relAttPredicates[i]];\n            if (!list) {\n              list = [];\n              listMapping[relAttPredicates[i]] = list;\n            }\n            list.push({ type: this.objectURI, value: currentObjectResource });\n          }\n        } else if (relAtt) {\n          for (var i=0; i<relAttPredicates.length; i++) {\n            this.addTriple(current,newSubject,relAttPredicates[i],{ type: this.objectURI, value: currentObjectResource});\n          }\n        }\n        if (revAtt) {\n          for (var i=0; i<revAttPredicates.length; i++) {\n            this.addTriple(current,currentObjectResource, revAttPredicates[i], { type: this.objectURI, value: newSubject});\n          }\n        }\n      } else {\n        // Sequence Step 10: incomplete triples\n        if (newSubject && !currentObjectResource && (relAtt || revAtt)) {\n          currentObjectResource = this.newBlankNode();\n          //alert(current.tagName+\": generated blank node, newSubject=\"+newSubject+\" currentObjectResource=\"+currentObjectResource);\n        }\n        if (relAtt && inlistAtt) {\n          for (var i=0; i<relAttPredicates.length; i++) {\n            var list = listMapping[relAttPredicates[i]];\n            if (!list) {\n              list = [];\n              listMapping[predicate] = list;\n            }\n            //console.log(\"Adding incomplete list for \"+predicate);\n            incomplete.push({ predicate: relAttPredicates[i], list: list });\n          }\n        } else if (relAtt) {\n          for (var i=0; i<relAttPredicates.length; i++) {\n            incomplete.push({ predicate: relAttPredicates[i], forward: true });\n          }\n        }\n        if (revAtt) {\n          for (var i=0; i<revAttPredicates.length; i++) {\n            incomplete.push({ predicate: revAttPredicates[i], forward: false });\n          }\n        }\n      }\n\n      // Step 11: Current property values\n      if (propertyAtt) {\n        var datatype = null;\n        var content = null; \n        if (datatypeAtt) {\n          datatype = datatypeAtt.value==\"\" ? this.PlainLiteralURI : this.parseTermOrCURIEOrAbsURI(datatypeAtt.value,vocabulary,context.terms,prefixes,base);\n          if (datetimeAtt && !contentAtt) {\n            content = datetimeAtt.value;\n          } else {\n            content = datatype==this.XMLLiteralURI || datatype==this.HTMLLiteralURI ? null : (contentAtt ? contentAtt.value : current.textContent);\n          }\n        } else if (contentAtt) {\n          datatype = this.PlainLiteralURI;\n          content = contentAtt.value;\n        } else if (datetimeAtt) {\n          content = datetimeAtt.value;\n          datatype = this.deriveDateTimeType(content);\n          if (!datatype) {\n            datatype = this.PlainLiteralURI;\n          }\n        } else if (!relAtt && !revAtt) {\n          if (resourceAtt) {\n            content = this.parseSafeCURIEOrCURIEOrURI(resourceAtt.value,prefixes,base);\n          }\n          if (!content && hrefAtt) {\n            content = this.resolveAndNormalize(base,encodeURI(hrefAtt.value));\n          } else if (!content && srcAtt) {\n            content = this.resolveAndNormalize(base,encodeURI(srcAtt.value));\n          }\n          if (content) {\n            datatype = this.objectURI;\n          }\n        }\n        if (!datatype) {\n          if (typeofAtt && !aboutAtt) {\n            datatype = this.objectURI;\n            content = typedResource;\n          } else {\n            content = current.textContent;\n            if (this.inHTMLMode && current.localName==\"time\") {\n              datatype = this.deriveDateTimeType(content);\n            }\n            if (!datatype) {\n              datatype = this.PlainLiteralURI;\n            }\n          }\n        }\n        var values = this.tokenize(propertyAtt.value);\n        for (var i=0; i<values.length; i++) {\n          var predicate = this.parsePredicate(values[i],vocabulary,context.terms,prefixes,base);\n          if (predicate) {\n            if (inlistAtt) {\n              var list = listMapping[predicate];\n              if (!list) {\n                list = [];\n                listMapping[predicate] = list;\n              }\n              list.push((datatype==this.XMLLiteralURI || datatype==this.HTMLLiteralURI) ? { type: datatype, value: current.innerHTML} : { type: datatype ? datatype : this.PlainLiteralURI, value: content, language: language});\n            } else {\n              if (datatype==this.XMLLiteralURI || datatype==this.HTMLLiteralURI) {\n                this.addTriple(current,newSubject,predicate,{ type: datatype, value: current.innerHTML});\n              } else {\n                this.addTriple(current,newSubject,predicate,{ type: datatype ? datatype : this.PlainLiteralURI, value: content, language: language});\n                //console.log(newSubject+\" \"+predicate+\"=\"+content);\n              }\n            }\n          }\n        }\n      }\n\n      // Sequence Step 12: complete incomplete triples with new subject\n      if (newSubject && !skip) {\n        for (var i=0; i<context.incomplete.length; i++) {\n          if (context.incomplete[i].list) {\n            //console.log(\"Adding subject \"+newSubject+\" to list for \"+context.incomplete[i].predicate);\n            // TODO: it is unclear what to do here\n            context.incomplete[i].list.push({ type: this.objectURI, value: newSubject });\n          } else if (context.incomplete[i].forward) {\n            //console.log(current.tagName+\": completing forward triple \"+context.incomplete[i].predicate+\" with object=\"+newSubject);\n            this.addTriple(current,context.subject,context.incomplete[i].predicate, { type: this.objectURI, value: newSubject});\n          } else {\n            //console.log(current.tagName+\": completing reverse triple with object=\"+context.subject);\n            this.addTriple(current,newSubject,context.incomplete[i].predicate,{ type: this.objectURI, value: context.subject});\n          }\n        }\n      }\n\n      var childContext = null;\n      var listSubject = newSubject;\n      if (skip) {\n        // TODO: should subject be null?\n        childContext = this.push(context,context.subject);\n        // TODO: should the entObject be passed along?  If not, then intermediary children will keep properties from being associated with incomplete triples.\n        // TODO: Verify: if the current baseURI has changed and the parentObject is the parent's base URI, then the baseURI should change\n        childContext.parentObject = removeHash(current.parentNode.baseURI)==context.parentObject ? removeHash(current.baseURI) : context.parentObject;\n        childContext.incomplete = context.incomplete;\n        childContext.language = language;\n        childContext.prefixes = prefixes;\n        childContext.vocabulary = vocabulary;\n      } else {\n        childContext = this.push(context,newSubject);\n        childContext.parentObject = currentObjectResource ? currentObjectResource : (newSubject ? newSubject : context.subject);\n        childContext.prefixes = prefixes;\n        childContext.incomplete = incomplete;\n        if (currentObjectResource) {\n          //console.log(\"Generating new list mapping for \"+currentObjectResource);\n          listSubject = currentObjectResource;\n          listMapping = {};\n          listMappingDifferent = true;\n        }\n        childContext.listMapping = listMapping;\n        childContext.language = language;\n        childContext.vocabulary = vocabulary;\n      }\n      if (listMappingDifferent) {\n        //console.log(\"Pushing list parent \"+current.localName);\n        queue.unshift({ parent: current, context: context, subject: listSubject, listMapping: listMapping});\n      }\n      for (var child = current.lastChild; child; child = child.previousSibling) {\n        if (child.nodeType==1/*Node.ELEMENT_NODE*/) {\n          //console.log(\"Pushing child \"+child.localName);\n          queue.unshift({ current: child, context: childContext});\n        }\n      }\n    }\n    \n    if (this.inHTMLMode) {\n      this.copyProperties();\n    }\n\n    for (var i=0; i<this.finishedHandlers.length; i++) {\n      this.finishedHandlers[i](node);\n    }\n\n    //Pieter Colpaert: added writing a null triple to flag the end\n    this.onTriple(null);\n  }\n\n  copyProperties () {\n  }\n\n\n  push (parent,subject) {\n    return {\n      parent: parent,\n      subject: subject ? subject : (parent ? parent.subject : null),\n      parentObject: null,\n      incomplete: [],\n      listMapping: parent ? parent.listMapping : {},\n      language: parent ? parent.language : this.language,\n      prefixes: parent ? parent.prefixes : this.target.graph.prefixes,\n      terms: parent ? parent.terms : this.target.graph.terms,\n      vocabulary: parent ? parent.vocabulary : this.vocabulary\n    };\n  }\n}\nmodule.exports = RDFaProcessor;\n","const SCHEME = /^[A-Za-z][A-Za-z0-9\\+\\-\\.]*\\:/;\nclass URIResolver {\n  \n  parseURI (uri) {\n    var match = SCHEME.exec(uri);\n    if (!match) {\n      throw \"Bad URI value, no scheme: \"+uri;\n    }\n    var parsed = { spec: uri };\n    parsed.scheme = match[0].substring(0,match[0].length-1);\n    parsed.schemeSpecificPart = parsed.spec.substring(match[0].length);\n    if (parsed.schemeSpecificPart.charAt(0)=='/' && parsed.schemeSpecificPart.charAt(1)=='/') {\n      this.parseGeneric(parsed);\n    } else {\n      parsed.isGeneric = false;\n    }\n    parsed.normalize = function() {\n      if (!this.isGeneric) {\n        return;\n      }\n      if (this.segments.length==0) {\n        return;\n      }\n      // edge case of ending in \"/.\"\n      if (this.path.length>1 && this.path.substring(this.path.length-2)==\"/.\") {\n        this.path = this.path.substring(0,this.path.length-1);\n        this.segments.splice(this.segments.length-1,1);\n        this.schemeSpecificPart = \"//\"+this.authority+this.path;\n        if (typeof this.query != \"undefined\") {\n          this.schemeSpecificPart += \"?\" + this.query;\n        }\n        if (typeof this.fragment != \"undefined\") {\n          this.schemeSpecificPart += \"#\" + this.fragment;\n        }\n        this.spec = this.scheme+\":\"+this.schemeSpecificPart;\n        return;\n      }\n      var end = this.path.charAt(this.path.length-1);\n      if (end!=\"/\") {\n        end = \"\";\n      }\n      for (var i=0; i<this.segments.length; i++) {\n        if (i>0 && this.segments[i]==\"..\") {\n          this.segments.splice(i-1,2);\n          i -= 2;\n        }\n        if (this.segments[i]==\".\") {\n          this.segments.splice(i,1);\n          i--;\n        }\n      }\n      this.path = this.segments.length==0 ? \"/\" : \"/\"+this.segments.join(\"/\")+end;\n      this.schemeSpecificPart = \"//\"+this.authority+this.path;\n      if (typeof this.query != \"undefined\") {\n        this.schemeSpecificPart += \"?\" + this.query;\n      }\n      if (typeof this.fragment != \"undefined\") {\n        this.schemeSpecificPart += \"#\" + this.fragment;\n      }\n      this.spec = this.scheme+\":\"+this.schemeSpecificPart;\n    }\n    parsed.resolve = function(href) {\n      if (!href) {\n        return this.spec;\n      }\n      if (href.charAt(0)=='#') {\n        var lastHash = this.spec.lastIndexOf('#');\n        return lastHash<0 ? this.spec+href : this.spec.substring(0,lastHash)+href;\n      }\n      if (!this.isGeneric) {\n        throw \"Cannot resolve uri against non-generic URI: \"+this.spec;\n      }\n      var colon = href.indexOf(':');\n      if (href.charAt(0)=='/') {\n        return this.scheme+\"://\"+this.authority+href;\n      } else if (href.charAt(0)=='.' && href.charAt(1)=='/') {\n        if (this.path.charAt(this.path.length-1)=='/') {\n          return this.scheme+\"://\"+this.authority+this.path+href.substring(2);\n        } else {\n          var last = this.path.lastIndexOf('/');\n          return this.scheme+\"://\"+this.authority+this.path.substring(0,last)+href.substring(1);\n        }\n      } else if (SCHEME.test(href)) {\n        return href;\n      } else if (href.charAt(0)==\"?\") {\n        return this.scheme+\"://\"+this.authority+this.path+href;\n      } else {\n        if (this.path.charAt(this.path.length-1)=='/') {\n          return this.scheme+\"://\"+this.authority+this.path+href;\n        } else {\n          var last = this.path.lastIndexOf('/');\n          return this.scheme+\"://\"+this.authority+this.path.substring(0,last+1)+href;\n        }\n      }\n    };\n    parsed.relativeTo = function(otherURI) {\n      if (otherURI.scheme!=this.scheme) {\n        return this.spec;\n      }\n      if (!this.isGeneric) {\n        throw \"A non generic URI cannot be made relative: \"+this.spec;\n      }\n      if (!otherURI.isGeneric) {\n        throw \"Cannot make a relative URI against a non-generic URI: \"+otherURI.spec;\n      }\n      if (otherURI.authority!=this.authority) {\n        return this.spec;\n      }\n      var i=0;\n      for (; i<this.segments.length && i<otherURI.segments.length; i++) {\n        if (this.segments[i]!=otherURI.segments[i]) {\n          //alert(this.path+\" different from \"+otherURI.path+\" at '\"+this.segments[i]+\"' vs '\"+otherURI.segments[i]+\"'\");\n          var offset = otherURI.path.charAt(otherURI.path.length-1)=='/' ? 0 : -1;\n          var relative = \"\";\n          for (var j=i; j<otherURI.segments.length+offset; j++) {\n            relative += \"../\";\n          }\n          for (var j=i; j<this.segments.length; j++) {\n            relative += this.segments[j];\n            if ((j+1)<this.segments.length) {\n              relative += \"/\";\n            }\n          }\n          if (this.path.charAt(this.path.length-1)=='/') {\n            relative += \"/\";\n          }\n          return relative;\n        }\n      }\n      if (this.segments.length==otherURI.segments.length) {\n        return this.hash ? this.hash : (this.query ? this.query : \"\");\n      } else if (i<this.segments.length) {\n        var relative = \"\";\n        for (var j=i; j<this.segments.length; j++) {\n          relative += this.segments[j];\n          if ((j+1)<this.segments.length) {\n            relative += \"/\";\n          }\n        }\n        if (this.path.charAt(this.path.length-1)=='/') {\n          relative += \"/\";\n        }\n        return relative;\n      } else {\n        throw \"Cannot calculate a relative URI for \"+this.spec+\" against \"+otherURI.spec;\n      } \n    };\n    return parsed;\n  }\n\n  parseGeneric (parsed) {\n    if (parsed.schemeSpecificPart.charAt(0)!='/' || parsed.schemeSpecificPart.charAt(1)!='/') {\n      throw \"Generic URI values should start with '//':\"+parsed.spec;\n    }\n    \n    var work = parsed.schemeSpecificPart.substring(2);\n    var pathStart = work.indexOf(\"/\");\n    parsed.authority = pathStart<0 ? work : work.substring(0,pathStart);\n    parsed.path = pathStart<0 ? \"\" : work.substring(pathStart);\n    var hash = parsed.path.indexOf('#');\n    if (hash>=0) {\n      parsed.fragment = parsed.path.substring(hash+1);\n      parsed.path = parsed.path.substring(0,hash);\n    }\n    var questionMark = parsed.path.indexOf('?');\n    if (questionMark>=0) {\n      parsed.query = parsed.path.substring(questionMark+1);\n      parsed.path = parsed.path.substring(0,questionMark);\n    }\n    if (parsed.path==\"/\" || parsed.path==\"\") {\n      parsed.segments = [];\n    } else {\n      parsed.segments = parsed.path.split(/\\//);\n      if (parsed.segments.length>0 && parsed.segments[0]=='' && parsed.path.length>1 && parsed.path.charAt(1)!='/') {\n        // empty segment at the start, remove it\n        parsed.segments.shift();\n      }\n      if (parsed.segments.length>0 && parsed.path.length>0 && parsed.path.charAt(parsed.path.length-1)=='/' && parsed.segments[parsed.segments.length-1]=='') {\n        // we may have an empty the end\n        // check to see if it is legimate\n        if (parsed.path.length>1 && parsed.path.charAt(parsed.path.length-2)!='/') {\n          parsed.segments.pop();\n        }\n      }\n      // check for non-escaped characters\n      for (var i=0; i<parsed.segments.length; i++) {\n        var check = parsed.segments[i].split(/%[A-Za-z0-9][A-Za-z0-9]|[\\ud800-\\udfff][\\ud800-\\udfff]|[A-Za-z0-9\\-\\._~!$&'()*+,;=@:\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+/);\n\n        for (var j=0; j<check.length; j++) {\n          if (check[j].length>0) {\n            throw \"Unecaped character \"+check[j].charAt(0)+\" (\"+check[j].charCodeAt(0)+\") in URI \"+parsed.spec;\n          }\n        }\n      }\n    }\n    parsed.isGeneric = true;\n  }\n}\nmodule.exports = URIResolver;\n","module.exports = function (string, base) {\n  var parser = new DOMParser();\n  var doc = parser.parseFromString(string, \"text/html\");\n  doc.URL = base;\n  doc.documentURI = base;\n  return doc;\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Catalog {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new Catalog(id);\n    }\n}\nexports.Catalog = Catalog;\n//# sourceMappingURL=catalog.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Dataset {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new Dataset(id);\n    }\n}\nexports.Dataset = Dataset;\n//# sourceMappingURL=dataset.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass DatasetDistribution {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new DatasetDistribution(id);\n    }\n}\nexports.default = DatasetDistribution;\n//# sourceMappingURL=dataset_distribution.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass SingleThingViewResult {\n    addEntity(entity) {\n        this.contents = entity;\n    }\n    getContents() {\n        return this.contents;\n    }\n}\nexports.SingleThingViewResult = SingleThingViewResult;\n//# sourceMappingURL=single.js.map","var support = {\n  searchParams: 'URLSearchParams' in self,\n  iterable: 'Symbol' in self && 'iterator' in Symbol,\n  blob:\n    'FileReader' in self &&\n    'Blob' in self &&\n    (function() {\n      try {\n        new Blob()\n        return true\n      } catch (e) {\n        return false\n      }\n    })(),\n  formData: 'FormData' in self,\n  arrayBuffer: 'ArrayBuffer' in self\n}\n\nfunction isDataView(obj) {\n  return obj && DataView.prototype.isPrototypeOf(obj)\n}\n\nif (support.arrayBuffer) {\n  var viewClasses = [\n    '[object Int8Array]',\n    '[object Uint8Array]',\n    '[object Uint8ClampedArray]',\n    '[object Int16Array]',\n    '[object Uint16Array]',\n    '[object Int32Array]',\n    '[object Uint32Array]',\n    '[object Float32Array]',\n    '[object Float64Array]'\n  ]\n\n  var isArrayBufferView =\n    ArrayBuffer.isView ||\n    function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n}\n\nfunction normalizeName(name) {\n  if (typeof name !== 'string') {\n    name = String(name)\n  }\n  if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n    throw new TypeError('Invalid character in header field name')\n  }\n  return name.toLowerCase()\n}\n\nfunction normalizeValue(value) {\n  if (typeof value !== 'string') {\n    value = String(value)\n  }\n  return value\n}\n\n// Build a destructive iterator for the value list\nfunction iteratorFor(items) {\n  var iterator = {\n    next: function() {\n      var value = items.shift()\n      return {done: value === undefined, value: value}\n    }\n  }\n\n  if (support.iterable) {\n    iterator[Symbol.iterator] = function() {\n      return iterator\n    }\n  }\n\n  return iterator\n}\n\nexport function Headers(headers) {\n  this.map = {}\n\n  if (headers instanceof Headers) {\n    headers.forEach(function(value, name) {\n      this.append(name, value)\n    }, this)\n  } else if (Array.isArray(headers)) {\n    headers.forEach(function(header) {\n      this.append(header[0], header[1])\n    }, this)\n  } else if (headers) {\n    Object.getOwnPropertyNames(headers).forEach(function(name) {\n      this.append(name, headers[name])\n    }, this)\n  }\n}\n\nHeaders.prototype.append = function(name, value) {\n  name = normalizeName(name)\n  value = normalizeValue(value)\n  var oldValue = this.map[name]\n  this.map[name] = oldValue ? oldValue + ', ' + value : value\n}\n\nHeaders.prototype['delete'] = function(name) {\n  delete this.map[normalizeName(name)]\n}\n\nHeaders.prototype.get = function(name) {\n  name = normalizeName(name)\n  return this.has(name) ? this.map[name] : null\n}\n\nHeaders.prototype.has = function(name) {\n  return this.map.hasOwnProperty(normalizeName(name))\n}\n\nHeaders.prototype.set = function(name, value) {\n  this.map[normalizeName(name)] = normalizeValue(value)\n}\n\nHeaders.prototype.forEach = function(callback, thisArg) {\n  for (var name in this.map) {\n    if (this.map.hasOwnProperty(name)) {\n      callback.call(thisArg, this.map[name], name, this)\n    }\n  }\n}\n\nHeaders.prototype.keys = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push(name)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.values = function() {\n  var items = []\n  this.forEach(function(value) {\n    items.push(value)\n  })\n  return iteratorFor(items)\n}\n\nHeaders.prototype.entries = function() {\n  var items = []\n  this.forEach(function(value, name) {\n    items.push([name, value])\n  })\n  return iteratorFor(items)\n}\n\nif (support.iterable) {\n  Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n}\n\nfunction consumed(body) {\n  if (body.bodyUsed) {\n    return Promise.reject(new TypeError('Already read'))\n  }\n  body.bodyUsed = true\n}\n\nfunction fileReaderReady(reader) {\n  return new Promise(function(resolve, reject) {\n    reader.onload = function() {\n      resolve(reader.result)\n    }\n    reader.onerror = function() {\n      reject(reader.error)\n    }\n  })\n}\n\nfunction readBlobAsArrayBuffer(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsArrayBuffer(blob)\n  return promise\n}\n\nfunction readBlobAsText(blob) {\n  var reader = new FileReader()\n  var promise = fileReaderReady(reader)\n  reader.readAsText(blob)\n  return promise\n}\n\nfunction readArrayBufferAsText(buf) {\n  var view = new Uint8Array(buf)\n  var chars = new Array(view.length)\n\n  for (var i = 0; i < view.length; i++) {\n    chars[i] = String.fromCharCode(view[i])\n  }\n  return chars.join('')\n}\n\nfunction bufferClone(buf) {\n  if (buf.slice) {\n    return buf.slice(0)\n  } else {\n    var view = new Uint8Array(buf.byteLength)\n    view.set(new Uint8Array(buf))\n    return view.buffer\n  }\n}\n\nfunction Body() {\n  this.bodyUsed = false\n\n  this._initBody = function(body) {\n    this._bodyInit = body\n    if (!body) {\n      this._bodyText = ''\n    } else if (typeof body === 'string') {\n      this._bodyText = body\n    } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n      this._bodyBlob = body\n    } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n      this._bodyFormData = body\n    } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n      this._bodyText = body.toString()\n    } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n      this._bodyArrayBuffer = bufferClone(body.buffer)\n      // IE 10-11 can't handle a DataView body.\n      this._bodyInit = new Blob([this._bodyArrayBuffer])\n    } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n      this._bodyArrayBuffer = bufferClone(body)\n    } else {\n      this._bodyText = body = Object.prototype.toString.call(body)\n    }\n\n    if (!this.headers.get('content-type')) {\n      if (typeof body === 'string') {\n        this.headers.set('content-type', 'text/plain;charset=UTF-8')\n      } else if (this._bodyBlob && this._bodyBlob.type) {\n        this.headers.set('content-type', this._bodyBlob.type)\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n      }\n    }\n  }\n\n  if (support.blob) {\n    this.blob = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return Promise.resolve(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as blob')\n      } else {\n        return Promise.resolve(new Blob([this._bodyText]))\n      }\n    }\n\n    this.arrayBuffer = function() {\n      if (this._bodyArrayBuffer) {\n        return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n      } else {\n        return this.blob().then(readBlobAsArrayBuffer)\n      }\n    }\n  }\n\n  this.text = function() {\n    var rejected = consumed(this)\n    if (rejected) {\n      return rejected\n    }\n\n    if (this._bodyBlob) {\n      return readBlobAsText(this._bodyBlob)\n    } else if (this._bodyArrayBuffer) {\n      return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n    } else if (this._bodyFormData) {\n      throw new Error('could not read FormData body as text')\n    } else {\n      return Promise.resolve(this._bodyText)\n    }\n  }\n\n  if (support.formData) {\n    this.formData = function() {\n      return this.text().then(decode)\n    }\n  }\n\n  this.json = function() {\n    return this.text().then(JSON.parse)\n  }\n\n  return this\n}\n\n// HTTP methods whose capitalization should be normalized\nvar methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\nfunction normalizeMethod(method) {\n  var upcased = method.toUpperCase()\n  return methods.indexOf(upcased) > -1 ? upcased : method\n}\n\nexport function Request(input, options) {\n  options = options || {}\n  var body = options.body\n\n  if (input instanceof Request) {\n    if (input.bodyUsed) {\n      throw new TypeError('Already read')\n    }\n    this.url = input.url\n    this.credentials = input.credentials\n    if (!options.headers) {\n      this.headers = new Headers(input.headers)\n    }\n    this.method = input.method\n    this.mode = input.mode\n    this.signal = input.signal\n    if (!body && input._bodyInit != null) {\n      body = input._bodyInit\n      input.bodyUsed = true\n    }\n  } else {\n    this.url = String(input)\n  }\n\n  this.credentials = options.credentials || this.credentials || 'same-origin'\n  if (options.headers || !this.headers) {\n    this.headers = new Headers(options.headers)\n  }\n  this.method = normalizeMethod(options.method || this.method || 'GET')\n  this.mode = options.mode || this.mode || null\n  this.signal = options.signal || this.signal\n  this.referrer = null\n\n  if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n    throw new TypeError('Body not allowed for GET or HEAD requests')\n  }\n  this._initBody(body)\n}\n\nRequest.prototype.clone = function() {\n  return new Request(this, {body: this._bodyInit})\n}\n\nfunction decode(body) {\n  var form = new FormData()\n  body\n    .trim()\n    .split('&')\n    .forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n  return form\n}\n\nfunction parseHeaders(rawHeaders) {\n  var headers = new Headers()\n  // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n  // https://tools.ietf.org/html/rfc7230#section-3.2\n  var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ')\n  preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n    var parts = line.split(':')\n    var key = parts.shift().trim()\n    if (key) {\n      var value = parts.join(':').trim()\n      headers.append(key, value)\n    }\n  })\n  return headers\n}\n\nBody.call(Request.prototype)\n\nexport function Response(bodyInit, options) {\n  if (!options) {\n    options = {}\n  }\n\n  this.type = 'default'\n  this.status = options.status === undefined ? 200 : options.status\n  this.ok = this.status >= 200 && this.status < 300\n  this.statusText = 'statusText' in options ? options.statusText : 'OK'\n  this.headers = new Headers(options.headers)\n  this.url = options.url || ''\n  this._initBody(bodyInit)\n}\n\nBody.call(Response.prototype)\n\nResponse.prototype.clone = function() {\n  return new Response(this._bodyInit, {\n    status: this.status,\n    statusText: this.statusText,\n    headers: new Headers(this.headers),\n    url: this.url\n  })\n}\n\nResponse.error = function() {\n  var response = new Response(null, {status: 0, statusText: ''})\n  response.type = 'error'\n  return response\n}\n\nvar redirectStatuses = [301, 302, 303, 307, 308]\n\nResponse.redirect = function(url, status) {\n  if (redirectStatuses.indexOf(status) === -1) {\n    throw new RangeError('Invalid status code')\n  }\n\n  return new Response(null, {status: status, headers: {location: url}})\n}\n\nexport var DOMException = self.DOMException\ntry {\n  new DOMException()\n} catch (err) {\n  DOMException = function(message, name) {\n    this.message = message\n    this.name = name\n    var error = Error(message)\n    this.stack = error.stack\n  }\n  DOMException.prototype = Object.create(Error.prototype)\n  DOMException.prototype.constructor = DOMException\n}\n\nexport function fetch(input, init) {\n  return new Promise(function(resolve, reject) {\n    var request = new Request(input, init)\n\n    if (request.signal && request.signal.aborted) {\n      return reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    var xhr = new XMLHttpRequest()\n\n    function abortXhr() {\n      xhr.abort()\n    }\n\n    xhr.onload = function() {\n      var options = {\n        status: xhr.status,\n        statusText: xhr.statusText,\n        headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n      }\n      options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n      var body = 'response' in xhr ? xhr.response : xhr.responseText\n      resolve(new Response(body, options))\n    }\n\n    xhr.onerror = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.ontimeout = function() {\n      reject(new TypeError('Network request failed'))\n    }\n\n    xhr.onabort = function() {\n      reject(new DOMException('Aborted', 'AbortError'))\n    }\n\n    xhr.open(request.method, request.url, true)\n\n    if (request.credentials === 'include') {\n      xhr.withCredentials = true\n    } else if (request.credentials === 'omit') {\n      xhr.withCredentials = false\n    }\n\n    if ('responseType' in xhr && support.blob) {\n      xhr.responseType = 'blob'\n    }\n\n    request.headers.forEach(function(value, name) {\n      xhr.setRequestHeader(name, value)\n    })\n\n    if (request.signal) {\n      request.signal.addEventListener('abort', abortXhr)\n\n      xhr.onreadystatechange = function() {\n        // DONE (success or failure)\n        if (xhr.readyState === 4) {\n          request.signal.removeEventListener('abort', abortXhr)\n        }\n      }\n    }\n\n    xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n  })\n}\n\nfetch.polyfill = true\n\nif (!self.fetch) {\n  self.fetch = fetch\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n}\n","var getPrototypeOf = require(\"./getPrototypeOf\");\n\nfunction _superPropBase(object, property) {\n  while (!Object.prototype.hasOwnProperty.call(object, property)) {\n    object = getPrototypeOf(object);\n    if (object === null) break;\n  }\n\n  return object;\n}\n\nmodule.exports = _superPropBase;","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst __1 = require(\"../..\");\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst MergeIterator_1 = __importDefault(require(\"../../util/iterators/MergeIterator\"));\nconst BackwardConnectionIterator_1 = __importDefault(require(\"./BackwardConnectionIterator\"));\nconst ConnectionSelectors_1 = require(\"./ConnectionSelectors\");\nconst ForwardConnectionIterator_1 = __importDefault(require(\"./ForwardConnectionIterator\"));\nclass ConnectionsProviderSingle {\n    constructor(connectionsFetcherFactory, catalog, templateFetcher) {\n        this.pages = {};\n        const { accessUrl, travelMode } = catalog;\n        this.source = catalog;\n        this.fetcher = connectionsFetcherFactory(travelMode);\n        this.templateFetcher = templateFetcher;\n    }\n    addConnectionSource(source) {\n        throw new Error(\"Method not implemented.\");\n    }\n    getSources() {\n        return [this.source];\n    }\n    async getByUrl(url) {\n        if (!this.pages[url]) {\n            this.pages[url] = this.fetcher.get(url);\n        }\n        return await this.pages[url];\n    }\n    async getByTime(date, region) {\n        // TODO, look up in the index -- use lower/upper bounds of each page\n        const url = await this.getIdForTime(date, region);\n        return this.getByUrl(url);\n    }\n    async getIdForTime(date, region) {\n        const template = await this.getTemplate();\n        if (region) {\n            return template.fill({\n                \"http://www.opengis.net/ont/geosparql#hasGeometry\": region.id,\n                \"http://semweb.mmlab.be/ns/linkedconnections#departureTimeQuery\": date.toISOString(),\n            });\n        }\n        else {\n            return template.fill({\n                \"http://semweb.mmlab.be/ns/linkedconnections#departureTimeQuery\": date.toISOString(),\n            });\n        }\n    }\n    prefetchConnections(lowerBound, upperBound) {\n        this.createIterator({\n            upperBoundDate: upperBound,\n            lowerBoundDate: lowerBound,\n            region: null,\n        }).then((iterator) => {\n            iterator.on(\"readable\", () => {\n                while (iterator.read()) {\n                    //\n                }\n            });\n        });\n    }\n    async appendIterator(options, existingIterator) {\n        EventBus_1.default.getInstance().emit(__1.EventType.ConnectionIteratorView, {\n            lowerBound: options.lowerBoundDate,\n            upperBound: options.upperBoundDate,\n        });\n        const selector = options.backward ? ConnectionSelectors_1.backwardsConnectionsSelector : ConnectionSelectors_1.forwardsConnectionSelector;\n        let iterator;\n        if (options.backward) {\n            const beginTime = options.upperBoundDate;\n            const beginUrl = await this.getIdForTime(beginTime, options.region);\n            iterator = new BackwardConnectionIterator_1.default(this, options, beginUrl);\n        }\n        else {\n            const beginTime = options.lowerBoundDate;\n            const beginUrl = await this.getIdForTime(beginTime, options.region);\n            iterator = new ForwardConnectionIterator_1.default(this, options, beginUrl);\n        }\n        const dataListeners = existingIterator.listeners(\"data\");\n        const readListeners = existingIterator.listeners(\"readable\");\n        const endListeners = existingIterator.listeners(\"end\");\n        existingIterator.removeAllListeners();\n        const mergedIterator = new MergeIterator_1.default([iterator, existingIterator], selector, true);\n        for (const listener of dataListeners) {\n            mergedIterator.addListener(\"data\", listener);\n        }\n        for (const listener of readListeners) {\n            mergedIterator.addListener(\"readable\", listener);\n        }\n        for (const listener of endListeners) {\n            mergedIterator.addListener(\"end\", listener);\n        }\n        return mergedIterator;\n    }\n    async createIterator(options) {\n        EventBus_1.default.getInstance().emit(__1.EventType.ConnectionIteratorView, {\n            lowerBound: options.lowerBoundDate,\n            upperBound: options.upperBoundDate,\n        });\n        let iterator;\n        if (options.backward) {\n            const beginTime = options.upperBoundDate;\n            const beginUrl = await this.getIdForTime(beginTime, options.region);\n            iterator = new BackwardConnectionIterator_1.default(this, options, beginUrl);\n        }\n        else {\n            const beginTime = options.lowerBoundDate;\n            const beginUrl = await this.getIdForTime(beginTime, options.region);\n            iterator = new ForwardConnectionIterator_1.default(this, options, beginUrl);\n        }\n        return iterator.on(\"end\", () => {\n            EventBus_1.default.getInstance().emit(__1.EventType.ConnectionIteratorView, {\n                lowerBound: options.lowerBoundDate,\n                upperBound: options.upperBoundDate,\n                finished: true,\n            });\n        });\n    }\n    async getTemplate() {\n        if (!this.template) {\n            this.template = this.templateFetcher.get(this.source.accessUrl);\n        }\n        return this.template;\n    }\n}\nexports.default = ConnectionsProviderSingle;\n//# sourceMappingURL=ConnectionsProviderSingle.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nclass BackwardConnectionIterator extends asynciterator_1.AsyncIterator {\n    constructor(provider, options, beginUrl) {\n        super();\n        this.connectionsProvider = provider;\n        this.options = options;\n        this.waiting = false;\n        this.fetchPage(beginUrl);\n    }\n    async fetchPage(url) {\n        if (!this.waiting) {\n            // start fetching a page\n            this.readable = false;\n            this.waiting = true;\n            this.currentPage = null;\n            this.currentPage = await this.connectionsProvider.getByUrl(url);\n            this.waiting = false;\n            this.currentIndex = this.currentPage.getConnections().length - 1;\n            this.readable = true;\n            if (this.currentPage.getPreviousPageId()) {\n                // prefetch the next page to reduce IO\n                this.connectionsProvider.getByUrl(this.currentPage.getPreviousPageId());\n            }\n        }\n    }\n    read() {\n        if (this.closed) {\n            return undefined;\n        }\n        if (this.waiting) {\n            // waiting for the next page to be fetched\n            this.readable = false;\n            return undefined;\n        }\n        if (this.currentIndex < 0) {\n            // end of this page, fetch the next one\n            this.fetchPage(this.currentPage.getPreviousPageId());\n            return undefined;\n        }\n        const item = this.currentPage.getConnections()[this.currentIndex];\n        this.currentIndex -= 1;\n        if (this.options.lowerBoundDate && item.departureTime < this.options.lowerBoundDate) {\n            // no more relevant connections\n            this.close();\n        }\n        return item;\n    }\n}\nexports.default = BackwardConnectionIterator;\n//# sourceMappingURL=BackwardConnectionIterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nclass ForwardConnectionIterator extends asynciterator_1.AsyncIterator {\n    constructor(provider, options, beginUrl) {\n        super();\n        this.count = 0;\n        this.connectionsProvider = provider;\n        this.options = options;\n        this.waiting = false;\n        this.fetchPage(beginUrl);\n    }\n    async fetchPage(url) {\n        if (!this.waiting) {\n            // start fetching a page\n            this.readable = false;\n            this.waiting = true;\n            this.currentPage = null;\n            this.currentPage = await this.connectionsProvider.getByUrl(url);\n            this.count += 1;\n            this.waiting = false;\n            this.currentIndex = 0;\n            this.readable = true;\n            if (this.currentPage.getNextPageId()) {\n                // prefetch the next page to reduce IO\n                this.connectionsProvider.getByUrl(this.currentPage.getNextPageId());\n            }\n        }\n    }\n    read() {\n        if (this.closed) {\n            return undefined;\n        }\n        if (this.waiting) {\n            // waiting for the next page to be fetched\n            this.readable = false;\n            return undefined;\n        }\n        if (this.count > 25) {\n            this.close();\n            return null;\n        }\n        if (this.currentIndex >= this.currentPage.getConnections().length) {\n            // end of this page, fetch the next one\n            this.fetchPage(this.currentPage.getNextPageId());\n            return undefined;\n        }\n        const item = this.currentPage.getConnections()[this.currentIndex];\n        this.currentIndex += 1;\n        if (this.options.upperBoundDate && item.departureTime > this.options.upperBoundDate) {\n            // no more relevant connections\n            this.close();\n        }\n        return item;\n    }\n}\nexports.default = ForwardConnectionIterator;\n//# sourceMappingURL=ForwardConnectionIterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst results_1 = require(\"../results\");\nconst single_1 = require(\"./single\");\nclass IndexThingView extends single_1.ThingView {\n    createResultObject() {\n        return new results_1.IndexThingViewResult();\n    }\n}\nexports.IndexThingView = IndexThingView;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass IndexThingViewResult {\n    constructor() {\n        this.contents = {};\n    }\n    addEntity(entity) {\n        this.contents[entity.id] = entity;\n    }\n    getContents() {\n        return this.contents;\n    }\n}\nexports.IndexThingViewResult = IndexThingViewResult;\n//# sourceMappingURL=index.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass HydraTemplateMapping {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new HydraTemplateMapping(id);\n    }\n}\nexports.HydraTemplateMapping = HydraTemplateMapping;\n//# sourceMappingURL=mapping.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst uriTemplates = require(\"uri-templates\");\nclass HydraTemplate {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new HydraTemplate(id);\n    }\n    fill(values) {\n        const template = uriTemplates(this.template);\n        const params = {};\n        for (const mapping of this.mappings) {\n            if (values[mapping.property]) {\n                params[mapping.variable] = values[mapping.property];\n            }\n        }\n        return template.fill(params);\n    }\n}\nexports.HydraTemplate = HydraTemplate;\n//# sourceMappingURL=search.js.map","(function (global, factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\tdefine('uri-templates', [], factory);\n\t} else if (typeof module !== 'undefined' && module.exports){\n\t\tmodule.exports = factory();\n\t} else {\n\t\tglobal.UriTemplate = factory();\n\t}\n})(this, function () {\n\tvar uriTemplateGlobalModifiers = {\n\t\t\"+\": true,\n\t\t\"#\": true,\n\t\t\".\": true,\n\t\t\"/\": true,\n\t\t\";\": true,\n\t\t\"?\": true,\n\t\t\"&\": true\n\t};\n\tvar uriTemplateSuffices = {\n\t\t\"*\": true\n\t};\n\tvar urlEscapedChars = /[:/&?#]/;\n\n\tfunction notReallyPercentEncode(string) {\n\t\treturn encodeURI(string).replace(/%25[0-9][0-9]/g, function (doubleEncoded) {\n\t\t\treturn \"%\" + doubleEncoded.substring(3);\n\t\t});\n\t}\n\n\tfunction isPercentEncoded(string) {\n\t\tstring = string.replace(/%../g, '');\n\t\treturn encodeURIComponent(string) === string;\n\t}\n\n\tfunction uriTemplateSubstitution(spec) {\n\t\tvar modifier = \"\";\n\t\tif (uriTemplateGlobalModifiers[spec.charAt(0)]) {\n\t\t\tmodifier = spec.charAt(0);\n\t\t\tspec = spec.substring(1);\n\t\t}\n\t\tvar separator = \"\";\n\t\tvar prefix = \"\";\n\t\tvar shouldEscape = true;\n\t\tvar showVariables = false;\n\t\tvar trimEmptyString = false;\n\t\tif (modifier == '+') {\n\t\t\tshouldEscape = false;\n\t\t} else if (modifier == \".\") {\n\t\t\tprefix = \".\";\n\t\t\tseparator = \".\";\n\t\t} else if (modifier == \"/\") {\n\t\t\tprefix = \"/\";\n\t\t\tseparator = \"/\";\n\t\t} else if (modifier == '#') {\n\t\t\tprefix = \"#\";\n\t\t\tshouldEscape = false;\n\t\t} else if (modifier == ';') {\n\t\t\tprefix = \";\";\n\t\t\tseparator = \";\",\n\t\t\tshowVariables = true;\n\t\t\ttrimEmptyString = true;\n\t\t} else if (modifier == '?') {\n\t\t\tprefix = \"?\";\n\t\t\tseparator = \"&\",\n\t\t\tshowVariables = true;\n\t\t} else if (modifier == '&') {\n\t\t\tprefix = \"&\";\n\t\t\tseparator = \"&\",\n\t\t\tshowVariables = true;\n\t\t}\n\n\t\tvar varNames = [];\n\t\tvar varList = spec.split(\",\");\n\t\tvar varSpecs = [];\n\t\tvar varSpecMap = {};\n\t\tfor (var i = 0; i < varList.length; i++) {\n\t\t\tvar varName = varList[i];\n\t\t\tvar truncate = null;\n\t\t\tif (varName.indexOf(\":\") != -1) {\n\t\t\t\tvar parts = varName.split(\":\");\n\t\t\t\tvarName = parts[0];\n\t\t\t\ttruncate = parseInt(parts[1]);\n\t\t\t}\n\t\t\tvar suffices = {};\n\t\t\twhile (uriTemplateSuffices[varName.charAt(varName.length - 1)]) {\n\t\t\t\tsuffices[varName.charAt(varName.length - 1)] = true;\n\t\t\t\tvarName = varName.substring(0, varName.length - 1);\n\t\t\t}\n\t\t\tvar varSpec = {\n\t\t\t\ttruncate: truncate,\n\t\t\t\tname: varName,\n\t\t\t\tsuffices: suffices\n\t\t\t};\n\t\t\tvarSpecs.push(varSpec);\n\t\t\tvarSpecMap[varName] = varSpec;\n\t\t\tvarNames.push(varName);\n\t\t}\n\t\tvar subFunction = function (valueFunction) {\n\t\t\tvar result = \"\";\n\t\t\tvar startIndex = 0;\n\t\t\tfor (var i = 0; i < varSpecs.length; i++) {\n\t\t\t\tvar varSpec = varSpecs[i];\n\t\t\t\tvar value = valueFunction(varSpec.name);\n\t\t\t\tif (value == null || (Array.isArray(value) && value.length == 0) || (typeof value == 'object' && Object.keys(value).length == 0)) {\n\t\t\t\t\tstartIndex++;\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (i == startIndex) {\n\t\t\t\t\tresult += prefix;\n\t\t\t\t} else {\n\t\t\t\t\tresult += (separator || \",\");\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(value)) {\n\t\t\t\t\tif (showVariables) {\n\t\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t\t}\n\t\t\t\t\tfor (var j = 0; j < value.length; j++) {\n\t\t\t\t\t\tif (j > 0) {\n\t\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\n\t\t\t\t\t\t\tif (varSpec.suffices['*'] && showVariables) {\n\t\t\t\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[j]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[j]);\n\t\t\t\t\t}\n\t\t\t\t} else if (typeof value == \"object\") {\n\t\t\t\t\tif (showVariables && !varSpec.suffices['*']) {\n\t\t\t\t\t\tresult += varSpec.name + \"=\";\n\t\t\t\t\t}\n\t\t\t\t\tvar first = true;\n\t\t\t\t\tfor (var key in value) {\n\t\t\t\t\t\tif (!first) {\n\t\t\t\t\t\t\tresult += varSpec.suffices['*'] ? (separator || \",\") : \",\";\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfirst = false;\n\t\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(key).replace(/!/g, \"%21\") : notReallyPercentEncode(key);\n\t\t\t\t\t\tresult += varSpec.suffices['*'] ? '=' : \",\";\n\t\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value[key]).replace(/!/g, \"%21\") : notReallyPercentEncode(value[key]);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (showVariables) {\n\t\t\t\t\t\tresult += varSpec.name;\n\t\t\t\t\t\tif (!trimEmptyString || value != \"\") {\n\t\t\t\t\t\t\tresult += \"=\";\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (varSpec.truncate != null) {\n\t\t\t\t\t\tvalue = value.substring(0, varSpec.truncate);\n\t\t\t\t\t}\n\t\t\t\t\tresult += shouldEscape ? encodeURIComponent(value).replace(/!/g, \"%21\"): notReallyPercentEncode(value);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t\tvar guessFunction = function (stringValue, resultObj, strict) {\n\t\t\tif (prefix) {\n\t\t\t\tstringValue = stringValue.substring(prefix.length);\n\t\t\t}\n\t\t\tif (varSpecs.length == 1 && varSpecs[0].suffices['*']) {\n\t\t\t\tvar varSpec = varSpecs[0];\n\t\t\t\tvar varName = varSpec.name;\n\t\t\t\tvar arrayValue = varSpec.suffices['*'] ? stringValue.split(separator || \",\") : [stringValue];\n\t\t\t\tvar hasEquals = (shouldEscape && stringValue.indexOf('=') != -1);\t// There's otherwise no way to distinguish between \"{value*}\" for arrays and objects\n\t\t\t\tfor (var i = 1; i < arrayValue.length; i++) {\n\t\t\t\t\tvar stringValue = arrayValue[i];\n\t\t\t\t\tif (hasEquals && stringValue.indexOf('=') == -1) {\n\t\t\t\t\t\t// Bit of a hack - if we're expecting \"=\" for key/value pairs, and values can't contain \"=\", then assume a value has been accidentally split\n\t\t\t\t\t\tarrayValue[i - 1] += (separator || \",\") + stringValue;\n\t\t\t\t\t\tarrayValue.splice(i, 1);\n\t\t\t\t\t\ti--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < arrayValue.length; i++) {\n\t\t\t\t\tvar stringValue = arrayValue[i];\n\t\t\t\t\tif (shouldEscape && stringValue.indexOf('=') != -1) {\n\t\t\t\t\t\thasEquals = true;\n\t\t\t\t\t}\n\t\t\t\t\tvar innerArrayValue = stringValue.split(\",\");\n\t\t\t\t\tif (innerArrayValue.length == 1) {\n\t\t\t\t\t\tarrayValue[i] = innerArrayValue[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tarrayValue[i] = innerArrayValue;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (showVariables || hasEquals) {\n\t\t\t\t\tvar objectValue = resultObj[varName] || {};\n\t\t\t\t\tfor (var j = 0; j < arrayValue.length; j++) {\n\t\t\t\t\t\tvar innerValue = stringValue;\n\t\t\t\t\t\tif (showVariables && !innerValue) {\n\t\t\t\t\t\t\t// The empty string isn't a valid variable, so if our value is zero-length we have nothing\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof arrayValue[j] == \"string\") {\n\t\t\t\t\t\t\tvar stringValue = arrayValue[j];\n\t\t\t\t\t\t\tvar innerVarName = stringValue.split(\"=\", 1)[0];\n\t\t\t\t\t\t\tvar stringValue = stringValue.substring(innerVarName.length + 1);\n\t\t\t\t\t\t\tif (shouldEscape) {\n\t\t\t\t\t\t\t\tif (strict && !isPercentEncoded(stringValue)) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstringValue = decodeURIComponent(stringValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinnerValue = stringValue;\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvar stringValue = arrayValue[j][0];\n\t\t\t\t\t\t\tvar innerVarName = stringValue.split(\"=\", 1)[0];\n\t\t\t\t\t\t\tvar stringValue = stringValue.substring(innerVarName.length + 1);\n\t\t\t\t\t\t\tif (shouldEscape) {\n\t\t\t\t\t\t\t\tif (strict && !isPercentEncoded(stringValue)) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tstringValue = decodeURIComponent(stringValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tarrayValue[j][0] = stringValue;\n\t\t\t\t\t\t\tinnerValue = arrayValue[j];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (shouldEscape) {\n\t\t\t\t\t\t\tif (strict && !isPercentEncoded(innerVarName)) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinnerVarName = decodeURIComponent(innerVarName);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif (objectValue[innerVarName] !== undefined) {\n\t\t\t\t\t\t\tif (Array.isArray(objectValue[innerVarName])) {\n\t\t\t\t\t\t\t\tobjectValue[innerVarName].push(innerValue);\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tobjectValue[innerVarName] = [objectValue[innerVarName], innerValue];\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tobjectValue[innerVarName] = innerValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (Object.keys(objectValue).length == 1 && objectValue[varName] !== undefined) {\n\t\t\t\t\t\tresultObj[varName] = objectValue[varName];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tresultObj[varName] = objectValue;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (shouldEscape) {\n\t\t\t\t\t\tfor (var j = 0; j < arrayValue.length; j++) {\n\t\t\t\t\t\t\tvar innerArrayValue = arrayValue[j];\n\t\t\t\t\t\t\tif (Array.isArray(innerArrayValue)) {\n\t\t\t\t\t\t\t\tfor (var k = 0; k < innerArrayValue.length; k++) {\n\t\t\t\t\t\t\t\t\tif (strict && !isPercentEncoded(innerArrayValue[k])) {\n\t\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tinnerArrayValue[k] = decodeURIComponent(innerArrayValue[k]);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tif (strict && !isPercentEncoded(innerArrayValue)) {\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tarrayValue[j] = decodeURIComponent(innerArrayValue);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif (resultObj[varName] !== undefined) {\n\t\t\t\t\t\tif (Array.isArray(resultObj[varName])) {\n\t\t\t\t\t\t\tresultObj[varName] = resultObj[varName].concat(arrayValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresultObj[varName] = [resultObj[varName]].concat(arrayValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (arrayValue.length == 1 && !varSpec.suffices['*']) {\n\t\t\t\t\t\t\tresultObj[varName] = arrayValue[0];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresultObj[varName] = arrayValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tvar arrayValue = (varSpecs.length == 1) ? [stringValue] : stringValue.split(separator || \",\");\n\t\t\t\tvar specIndexMap = {};\n\t\t\t\tfor (var i = 0; i < arrayValue.length; i++) {\n\t\t\t\t\t// Try from beginning\n\t\t\t\t\tvar firstStarred = 0;\n\t\t\t\t\tfor (; firstStarred < varSpecs.length - 1 && firstStarred < i; firstStarred++) {\n\t\t\t\t\t\tif (varSpecs[firstStarred].suffices['*']) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (firstStarred == i) {\n\t\t\t\t\t\t// The first [i] of them have no \"*\" suffix\n\t\t\t\t\t\tspecIndexMap[i] = i;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// Try from the end\n\t\t\t\t\t\tfor (var lastStarred = varSpecs.length - 1; lastStarred > 0 && (varSpecs.length - lastStarred) < (arrayValue.length - i); lastStarred--) {\n\t\t\t\t\t\t\tif (varSpecs[lastStarred].suffices['*']) {\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif ((varSpecs.length - lastStarred) == (arrayValue.length - i)) {\n\t\t\t\t\t\t\t// The last [length - i] of them have no \"*\" suffix\n\t\t\t\t\t\t\tspecIndexMap[i] = lastStarred;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\t// Just give up and use the first one\n\t\t\t\t\tspecIndexMap[i] = firstStarred;\n\t\t\t\t}\n\t\t\t\tfor (var i = 0; i < arrayValue.length; i++) {\n\t\t\t\t\tvar stringValue = arrayValue[i];\n\t\t\t\t\tif (!stringValue && showVariables) {\n\t\t\t\t\t\t// The empty string isn't a valid variable, so if our value is zero-length we have nothing\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tvar innerArrayValue = stringValue.split(\",\");\n\t\t\t\t\tvar hasEquals = false;\n\n\t\t\t\t\tif (showVariables) {\n\t\t\t\t\t\tvar stringValue = innerArrayValue[0]; // using innerArrayValue\n\t\t\t\t\t\tvar varName = stringValue.split(\"=\", 1)[0];\n\t\t\t\t\t\tvar stringValue = stringValue.substring(varName.length + 1);\n\t\t\t\t\t\tinnerArrayValue[0] = stringValue;\n\t\t\t\t\t\tvar varSpec = varSpecMap[varName] || varSpecs[0];\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar varSpec = varSpecs[specIndexMap[i]];\n\t\t\t\t\t\tvar varName = varSpec.name;\n\t\t\t\t\t}\n\n\t\t\t\t\tfor (var j = 0; j < innerArrayValue.length; j++) {\n\t\t\t\t\t\tif (shouldEscape) {\n\t\t\t\t\t\t\tif (strict && !isPercentEncoded(innerArrayValue[j])) {\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tinnerArrayValue[j] = decodeURIComponent(innerArrayValue[j]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tif ((showVariables || varSpec.suffices['*'])&& resultObj[varName] !== undefined) {\n\t\t\t\t\t\tif (Array.isArray(resultObj[varName])) {\n\t\t\t\t\t\t\tresultObj[varName] = resultObj[varName].concat(innerArrayValue);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresultObj[varName] = [resultObj[varName]].concat(innerArrayValue);\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (innerArrayValue.length == 1 && !varSpec.suffices['*']) {\n\t\t\t\t\t\t\tresultObj[varName] = innerArrayValue[0];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresultObj[varName] = innerArrayValue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn 1;\n\t\t};\n\t\treturn {\n\t\t\tvarNames: varNames,\n\t\t\tprefix: prefix,\n\t\t\tsubstitution: subFunction,\n\t\t\tunSubstitution: guessFunction\n\t\t};\n\t}\n\n\tfunction UriTemplate(template) {\n\t\tif (!(this instanceof UriTemplate)) {\n\t\t\treturn new UriTemplate(template);\n\t\t}\n\t\tvar parts = template.split(\"{\");\n\t\tvar textParts = [parts.shift()];\n\t\tvar prefixes = [];\n\t\tvar substitutions = [];\n\t\tvar unSubstitutions = [];\n\t\tvar varNames = [];\n\t\twhile (parts.length > 0) {\n\t\t\tvar part = parts.shift();\n\t\t\tvar spec = part.split(\"}\")[0];\n\t\t\tvar remainder = part.substring(spec.length + 1);\n\t\t\tvar funcs = uriTemplateSubstitution(spec);\n\t\t\tsubstitutions.push(funcs.substitution);\n\t\t\tunSubstitutions.push(funcs.unSubstitution);\n\t\t\tprefixes.push(funcs.prefix);\n\t\t\ttextParts.push(remainder);\n\t\t\tvarNames = varNames.concat(funcs.varNames);\n\t\t}\n\t\tthis.fill = function (valueFunction) {\n\t\t\tif (valueFunction && typeof valueFunction !== 'function') {\n\t\t\t\tvar value = valueFunction;\n\t\t\t\tvalueFunction = function (varName) {\n\t\t\t\t\treturn value[varName];\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tvar result = textParts[0];\n\t\t\tfor (var i = 0; i < substitutions.length; i++) {\n\t\t\t\tvar substitution = substitutions[i];\n\t\t\t\tresult += substitution(valueFunction);\n\t\t\t\tresult += textParts[i + 1];\n\t\t\t}\n\t\t\treturn result;\n\t\t};\n\t\tthis.fromUri = function (substituted, options) {\n\t\t\toptions = options || {};\n\t\t\tvar result = {};\n\t\t\tfor (var i = 0; i < textParts.length; i++) {\n\t\t\t\tvar part = textParts[i];\n\t\t\t\tif (substituted.substring(0, part.length) !== part) {\n\t\t\t\t\treturn /*undefined*/;\n\t\t\t\t}\n\t\t\t\tsubstituted = substituted.substring(part.length);\n\t\t\t\tif (i >= textParts.length - 1) {\n\t\t\t\t\t// We've run out of input - is there any template left?\n\t\t\t\t\tif (substituted == \"\") {\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn /*undefined*/;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tvar prefix = prefixes[i];\n\t\t\t\tif (prefix && substituted.substring(0, prefix.length) !== prefix) {\n\t\t\t\t\t// All values are optional - if we have a prefix and it doesn't match, move along\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Find the next part to un-substitute\n\t\t\t\tvar nextPart = textParts[i + 1];\n\t\t\t\tvar offset = i;\n\t\t\t\twhile (true) {\n\t\t\t\t\tif (offset == textParts.length - 2) {\n\t\t\t\t\t\tvar endPart = substituted.substring(substituted.length - nextPart.length);\n\t\t\t\t\t\tif (endPart !== nextPart) {\n\t\t\t\t\t\t\treturn /*undefined*/;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar stringValue = substituted.substring(0, substituted.length - nextPart.length);\n\t\t\t\t\t\tsubstituted = endPart;\n\t\t\t\t\t} else if (nextPart) {\n\t\t\t\t\t\tvar nextPartPos = substituted.indexOf(nextPart);\n\t\t\t\t\t\tvar stringValue = substituted.substring(0, nextPartPos);\n\t\t\t\t\t\tsubstituted = substituted.substring(nextPartPos);\n\t\t\t\t\t} else if (prefixes[offset + 1]) {\n\t\t\t\t\t\tvar nextPartPos = substituted.indexOf(prefixes[offset + 1]);\n\t\t\t\t\t\tif (nextPartPos === -1) nextPartPos = substituted.length;\n\t\t\t\t\t\tvar stringValue = substituted.substring(0, nextPartPos);\n\t\t\t\t\t\tsubstituted = substituted.substring(nextPartPos);\n\t\t\t\t\t} else if (textParts.length > offset + 2) {\n\t\t\t\t\t\t// If the separator between this variable and the next is blank (with no prefix), continue onwards\n\t\t\t\t\t\toffset++;\n\t\t\t\t\t\tnextPart = textParts[offset + 1];\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvar stringValue = substituted;\n\t\t\t\t\t\tsubstituted = \"\";\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (!unSubstitutions[i](stringValue, result, options.strict)) {\n\t\t\t\t\treturn /*undefined*/;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn result;\n\t\t}\n\t\tthis.varNames = varNames;\n\t\tthis.template = template;\n\t}\n\tUriTemplate.prototype = {\n\t\ttoString: function () {\n\t\t\treturn this.template;\n\t\t},\n\t\tfillFromObject: function (obj) {\n\t\t\treturn this.fill(obj);\n\t\t},\n\t\ttest: function (uri, options) {\n\t\t\treturn !!this.fromUri(uri, options)\n\t\t}\n\t};\n\n\treturn UriTemplate;\n});\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst DynamicProfile_1 = __importDefault(require(\"./DynamicProfile\"));\nclass CharacteristicProfile extends DynamicProfile_1.default {\n    constructor(url) {\n        super(url);\n        this.accessCache = {};\n        this.onewayCache = {};\n        this.speedCache = {};\n        this.priorityCache = {};\n        this.id = url;\n    }\n    static create(url) {\n        return new CharacteristicProfile(url);\n    }\n    getID() {\n        return this.id;\n    }\n    isOneWay(way) {\n        const characteristic = this.getWayCharacteristic(way);\n        if (this.onewayCache[characteristic] !== undefined) {\n            return this.onewayCache[characteristic];\n        }\n        const result = super.isOneWay(way);\n        this.onewayCache[characteristic] = result;\n        return result;\n    }\n    hasAccess(way) {\n        const characteristic = this.getWayCharacteristic(way);\n        if (this.accessCache[characteristic] !== undefined) {\n            return this.accessCache[characteristic];\n        }\n        const result = super.hasAccess(way);\n        this.accessCache[characteristic] = result;\n        return result;\n    }\n    getSpeed(way) {\n        const characteristic = this.getWayCharacteristic(way);\n        if (this.speedCache[characteristic] !== undefined) {\n            return this.speedCache[characteristic];\n        }\n        const result = super.getSpeed(way);\n        this.speedCache[characteristic] = result;\n        return result;\n    }\n    getMultiplier(way) {\n        const characteristic = this.getWayCharacteristic(way);\n        if (this.priorityCache[characteristic] !== undefined) {\n            return this.priorityCache[characteristic];\n        }\n        const result = super.getMultiplier(way);\n        this.priorityCache[characteristic] = result;\n        return result;\n    }\n    getWayCharacteristic(way) {\n        return way.reachable + Object.values(way.definedTags).join();\n    }\n}\nexports.default = CharacteristicProfile;\n//# sourceMappingURL=CharacteresticProfile.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst Profile_1 = __importDefault(require(\"./Profile\"));\nclass DynamicProfile extends Profile_1.default {\n    constructor(url) {\n        super();\n        this.id = url;\n        this.accessRules = [];\n        this.onewayRules = [];\n        this.speedRules = [];\n        this.priorityRules = [];\n        this.obstacleRules = [];\n        this.obstacleTimeRules = [];\n        this.proximityRules = [];\n        this.maxSpeed = 10;\n        this.usePublicTransport = true;\n    }\n    static create(url) {\n        return new DynamicProfile(url);\n    }\n    getID() {\n        return this.id;\n    }\n    isOneWay(way) {\n        // todo, reversed order\n        for (const rule of this.onewayRules) {\n            if (rule.conclusion.isOneway !== undefined) {\n                // should always be the case, but just in case\n                if (rule.condition !== undefined) {\n                    if (way.definedTags[rule.condition.predicate] === rule.condition.object) {\n                        return rule.conclusion.isOneway;\n                    }\n                }\n                else {\n                    return rule.conclusion.isOneway;\n                }\n            }\n        }\n    }\n    hasAccess(way) {\n        for (const rule of this.accessRules) {\n            if (rule.conclusion.hasAccess !== undefined) {\n                // should always be the case, but just in case\n                if (rule.condition !== undefined) {\n                    if (way.definedTags[rule.condition.predicate] === rule.condition.object) {\n                        return rule.conclusion.hasAccess;\n                    }\n                }\n                else {\n                    return rule.conclusion.hasAccess;\n                }\n            }\n        }\n    }\n    getDefaultSpeed() {\n        return 5;\n    }\n    getMaxSpeed() {\n        return this.maxSpeed || 300;\n    }\n    getSpeed(way) {\n        const speedLimit = Math.min(way.maxSpeed || Infinity, this.getMaxSpeed());\n        for (const rule of this.speedRules) {\n            if (rule.conclusion.speed !== undefined) {\n                // should always be the case, but just in case\n                if (rule.condition !== undefined) {\n                    if (way.definedTags[rule.condition.predicate] === rule.condition.object) {\n                        if (typeof (rule.conclusion.speed) === \"number\") {\n                            return Math.min(rule.conclusion.speed, speedLimit);\n                        }\n                    }\n                    else {\n                        if (typeof (rule.conclusion.speed) === \"number\") {\n                            return Math.min(rule.conclusion.speed, speedLimit);\n                        }\n                    }\n                }\n            }\n        }\n        return Math.min(speedLimit, this.getDefaultSpeed());\n    }\n    getDistance(from, to, way) {\n        return Geo_1.default.getDistanceBetweenLocations(from, to);\n    }\n    getDuration(from, to, way) {\n        const distance = this.getDistance(from, to, way) / 1000; // km\n        const speed = this.getSpeed(way);\n        const time = distance / speed; // h\n        return time * 60 * 60 * 1000; // ms\n    }\n    getMultiplier(way) {\n        for (const rule of this.priorityRules) {\n            if (rule.conclusion.priority !== undefined) {\n                // should always be the case, but just in case\n                if (rule.condition !== undefined) {\n                    if (way.definedTags[rule.condition.predicate] === rule.condition.object) {\n                        return 1 - (rule.conclusion.priority - 1);\n                    }\n                }\n                else {\n                    return 1 - (rule.conclusion.priority - 1);\n                }\n            }\n        }\n    }\n    getCost(from, to, way) {\n        const toWeight = this.getNodeWeight(to);\n        const fromWeight = this.getNodeWeight(from);\n        const weight = Math.max(toWeight, fromWeight);\n        return weight * this.getMultiplier(way) * (this.getDuration(from, to, way) + this.getObstacleTime(to));\n    }\n    getNodeWeight(node) {\n        let count = 1;\n        let acc = 1;\n        if (node.proximity) {\n            for (const rule of this.proximityRules) {\n                if (rule.conclusion.priority !== undefined) {\n                    // should always be the case, but just in case\n                    if (rule.condition !== undefined) {\n                        if (node.proximity[rule.condition.object]) {\n                            const penalty = rule.conclusion.priority;\n                            count += node.proximity[rule.condition.object];\n                            acc += penalty * node.proximity[rule.condition.object];\n                        }\n                    }\n                }\n            }\n        }\n        return 1 / ((acc * acc) / (count * count));\n    }\n    isObstacle(node) {\n        if (!node.definedTags) {\n            // not a real OSM node, we're probably embedding a location onto the network\n            return false;\n        }\n        for (const rule of this.obstacleRules) {\n            if (rule.conclusion.isObstacle !== undefined) {\n                // should always be the case, but just in case\n                if (rule.condition !== undefined) {\n                    if (node.definedTags[rule.condition.predicate] === rule.condition.object) {\n                        return rule.conclusion.isObstacle;\n                    }\n                }\n                else {\n                    return rule.conclusion.isObstacle;\n                }\n            }\n        }\n    }\n    getObstacleTime(node) {\n        if (!node.definedTags) {\n            // not a real OSM node, we're probably embedding a location onto the network\n            return 0;\n        }\n        for (const rule of this.obstacleTimeRules) {\n            if (rule.conclusion.obstacleTime !== undefined) {\n                // should always be the case, but just in case\n                if (rule.condition !== undefined) {\n                    const field = rule.condition.predicate;\n                    if (node.definedTags[field] && rule.condition.object === undefined) {\n                        return rule.conclusion.obstacleTime * 1000;\n                    }\n                    if (node.definedTags[field] === rule.condition.object && rule.condition.object !== undefined) {\n                        return rule.conclusion.obstacleTime * 1000;\n                    }\n                }\n                else {\n                    return rule.conclusion.obstacleTime * 1000;\n                }\n            }\n        }\n        return 0;\n    }\n}\nexports.default = DynamicProfile;\n//# sourceMappingURL=DynamicProfile.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass Profile {\n}\nexports.default = Profile;\n//# sourceMappingURL=Profile.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ProfileConclusion {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new ProfileConclusion(id);\n    }\n    getID() {\n        return this.id;\n    }\n}\nexports.default = ProfileConclusion;\n//# sourceMappingURL=ProfileConclusion.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ProfileCondition {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new ProfileCondition(id);\n    }\n    getID() {\n        return this.id;\n    }\n}\nexports.default = ProfileCondition;\n//# sourceMappingURL=ProfileCondition.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ProfileRule {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new ProfileRule(id);\n    }\n    getID() {\n        return this.id;\n    }\n}\nexports.default = ProfileRule;\n//# sourceMappingURL=ProfileRule.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nvar _a;\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst ldfetch_1 = __importDefault(require(\"ldfetch\"));\nconst types_1 = __importDefault(require(\"../../../types\"));\nconst Rdf_1 = __importDefault(require(\"../../../util/Rdf\"));\nlet StopsFetcherLDFetch = class StopsFetcherLDFetch {\n    constructor(ldFetch) {\n        this.ldFetch = ldFetch;\n        // FIXME does this ever do something?\n        this.loadStops();\n    }\n    addStopSource(source) {\n        throw new Error(\"Method not implemented.\");\n    }\n    getSources() {\n        return [{ accessUrl: this.accessUrl }];\n    }\n    setAccessUrl(accessUrl) {\n        this.accessUrl = accessUrl;\n    }\n    prefetchStops() {\n        this.ensureStopsLoaded();\n    }\n    async getStopById(stopId) {\n        await this.ensureStopsLoaded();\n        return this.stops[stopId];\n    }\n    async getAllStops() {\n        await this.ensureStopsLoaded();\n        return Object.values(this.stops);\n    }\n    async ensureStopsLoaded() {\n        if (!this.loadPromise && !this.stops) {\n            this.loadStops();\n        }\n        if (this.loadPromise) {\n            await this.loadPromise;\n        }\n    }\n    loadStops() {\n        if (this.accessUrl) {\n            this.loadPromise = this.ldFetch\n                .get(this.accessUrl)\n                .then((response) => {\n                this.stops = this.parseTriples(response.triples);\n                this.loadPromise = null;\n            })\n                .catch((reason) => {\n                console.log(reason);\n            });\n        }\n    }\n    transformPredicate(triple) {\n        return Rdf_1.default.transformPredicate({\n            \"http://xmlns.com/foaf/0.1/name\": \"name\",\n            \"http://schema.org/name\": \"name\",\n            \"http://www.w3.org/2003/01/geo/wgs84_pos#lat\": \"latitude\",\n            \"http://www.w3.org/2003/01/geo/wgs84_pos#long\": \"longitude\",\n        }, triple);\n    }\n    parseTriples(triples) {\n        return triples.reduce((stopMap, triple) => {\n            triple = this.transformPredicate(triple);\n            const { subject: { value: subject }, predicate: { value: predicate }, object: { value: object } } = triple;\n            if (!(subject in stopMap)) {\n                stopMap[subject] = {\n                    id: subject,\n                };\n            }\n            if (predicate === \"longitude\" || predicate === \"latitude\") {\n                stopMap[subject][predicate] = parseFloat(object);\n            }\n            else {\n                stopMap[subject][predicate] = object;\n            }\n            return stopMap;\n        }, {});\n    }\n};\nStopsFetcherLDFetch = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.LDFetch)),\n    __metadata(\"design:paramtypes\", [typeof (_a = typeof ldfetch_1.default !== \"undefined\" && ldfetch_1.default) === \"function\" ? _a : Object])\n], StopsFetcherLDFetch);\nexports.default = StopsFetcherLDFetch;\n//# sourceMappingURL=StopsFetcherLDFetch.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Utility class with functions dealing with rdf triples\n */\nclass Rdf {\n    /**\n     * Creates a triple matcher callback function for use in e.g. an Array#filter() expression\n     *\n     * For example:\n     * ```\n     * tripleArray.filter(Rdf.matchesTriple('someSubject', null, null));\n     * ```\n     * @param subject can be null if not wanting to match by subject\n     * @param predicate can be null if not wanting to match by predicate\n     * @param object can be null if not wanting to match by object\n     */\n    static matchesTriple(subject, predicate, object) {\n        return (triple) => {\n            if (subject && triple.subject.value !== subject) {\n                return false;\n            }\n            if (predicate && triple.predicate.value !== predicate) {\n                return false;\n            }\n            if (object && triple.object.value !== object) {\n                return false;\n            }\n            return true;\n        };\n    }\n    /**\n     * Rename the predicate of a triple based on a map with original predicates as keys and\n     * replacement predicates as values\n     *\n     * For example:\n     * ```\n     * const transformedTriple = Rdf.transformPredicate({\n     *   \"oldPredicate1\": \"newPredicate1\",\n     *   \"oldPredicate2\": \"newPredicate2\",\n     * }, someTriple));\n     * ```\n     */\n    static transformPredicate(transformMap, triple) {\n        if (triple.predicate.value in transformMap) {\n            triple.predicate.value = transformMap[triple.predicate.value];\n        }\n        return triple;\n    }\n    /**\n     * Rename the object of a triple based on a map with original objects as keys and\n     * replacement objects as values\n     *\n     * For example:\n     * ```\n     * const transformedTriple = Rdf.transformObject({\n     *   \"oldObject1\": \"newObject1\",\n     *   \"oldObject2\": \"newObject2\",\n     * }, someTriple));\n     * ```\n     */\n    static transformObject(transformMap, triple) {\n        if (triple.object.value in transformMap) {\n            triple.object.value = transformMap[triple.object.value];\n        }\n        return triple;\n    }\n    /**\n     * Log an array of triples to the console as a table with three columns: subject, predicate and object\n     */\n    static logTripleTable(triples) {\n        console.table(triples.map((triple) => ({\n            subject: triple.subject.value,\n            predicate: triple.predicate.value,\n            object: triple.object.value,\n        })));\n    }\n}\nexports.default = Rdf;\n//# sourceMappingURL=Rdf.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass RoutableTileNode {\n    constructor(id) {\n        this.id = id;\n        this.definedTags = {};\n        this.freeformTags = [];\n        this.proximity = {};\n    }\n    static create(id) {\n        return new RoutableTileNode(id);\n    }\n}\nexports.RoutableTileNode = RoutableTileNode;\n//# sourceMappingURL=RoutableTileNode.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass RoutableTileWay {\n    constructor(id) {\n        this.id = id;\n        this.distances = [[]];\n        this.definedTags = {};\n        this.freeformTags = [];\n    }\n    static create(id) {\n        return new RoutableTileWay(id);\n    }\n    mergeDefinitions(other) {\n        const result = new RoutableTileWay(this.id);\n        // copy data fields\n        Object.assign(result, this);\n        Object.assign(result, other);\n        const definedTags = Object.assign({}, this.definedTags, other.definedTags);\n        result.definedTags = definedTags;\n        // special cases\n        if (this.reachable === false || other.reachable === false) {\n            result.reachable = false;\n        }\n        // do not modify the existing objects, copy the lists\n        result.segments = [];\n        result.segments = result.segments.concat(this.segments);\n        result.segments = result.segments.concat(other.segments);\n        result.distances = [];\n        result.distances = result.distances.concat(this.distances);\n        result.distances = result.distances.concat(other.distances);\n        result.freeformTags = [];\n        result.freeformTags = result.freeformTags.concat(this.freeformTags);\n        result.freeformTags = result.freeformTags.concat(other.freeformTags);\n        return result;\n    }\n    getParts() {\n        const result = [];\n        for (let index = 0; index < this.segments.length; index++) {\n            const distances = this.distances[index];\n            const segment = this.segments[index];\n            for (let i = 0; i < segment.length - 1; i++) {\n                result.push({ from: segment[i], to: segment[i + 1], distance: distances[i] });\n            }\n        }\n        return result;\n    }\n}\nexports.RoutableTileWay = RoutableTileWay;\n//# sourceMappingURL=RoutableTileWay.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst PathfinderProvider_1 = __importDefault(require(\"../../pathfinding/PathfinderProvider\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"./RoutableTileProviderDefault\"));\nlet RoutableTileProviderIntermediate = class RoutableTileProviderIntermediate extends RoutableTileProviderDefault_1.default {\n    constructor(pathfinderProvider, fetcher) {\n        super(pathfinderProvider, fetcher);\n    }\n    getIdForTileCoords(coordinate) {\n        return `https://hdelva.be/tiles/transit/${coordinate.zoom}/${coordinate.x}/${coordinate.y}`;\n    }\n};\nRoutableTileProviderIntermediate = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.PathfinderProvider)),\n    __param(1, inversify_1.inject(types_1.default.RoutableTileFetcher)),\n    __metadata(\"design:paramtypes\", [PathfinderProvider_1.default, Object])\n], RoutableTileProviderIntermediate);\nexports.default = RoutableTileProviderIntermediate;\n//# sourceMappingURL=RoutableTileProviderIntermediate.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst tinyqueue_1 = __importDefault(require(\"tinyqueue\"));\nconst graph_1 = __importDefault(require(\"../graph\"));\nlet DijkstraTreeInstance = class DijkstraTreeInstance {\n    constructor(graph) {\n        this.graph = graph;\n        this.useWeightedCost = true;\n    }\n    setUseWeightedCost(useWeightedCost) {\n        this.useWeightedCost = useWeightedCost;\n    }\n    setBreakPoint(on, callback) {\n        this.graph.setBreakPoint(on, callback);\n    }\n    removeBreakPoint(on) {\n        this.graph.removeBreakPoint(on);\n    }\n    async start(from, maxCost) {\n        this.costs = [...Array(this.graph.getAdjacencyList().length)].fill(Infinity);\n        this.previousNodes = [...Array(this.graph.getAdjacencyList().length)].fill(undefined);\n        const fromIndex = this.graph.getNodeIndex(from);\n        this.costs[fromIndex] = 0;\n        this.nextQueue = [{ distance: 0, duration: 0, cost: 0, position: fromIndex }];\n        return this.continue(maxCost);\n    }\n    async continue(maxCost) {\n        const queue = new tinyqueue_1.default(this.nextQueue, (a, b) => a.duration - b.duration);\n        this.nextQueue = [];\n        while (queue.length) {\n            const { position, distance, duration, cost } = queue.pop();\n            if (duration > this.getCost(position)) {\n                // we have already found a better way\n                continue;\n            }\n            if (this.graph.getBreakPoint(position)) {\n                await this.graph.getBreakPoint(position)(this.graph.getLabel(position));\n            }\n            if (cost > maxCost) {\n                // remember this state for subsequent calls\n                this.nextQueue.push({ duration, distance, cost, position });\n            }\n            else {\n                for (const edge of this.graph.getAdjacencyList()[position]) {\n                    const next = {\n                        distance: distance + edge.distance,\n                        duration: duration + edge.duration,\n                        cost: cost + edge.cost,\n                        position: edge.node,\n                        previousPosition: position,\n                    };\n                    if (next.duration < this.getCost(next.position)) {\n                        queue.push(next);\n                        this.costs[next.position] = next.duration;\n                        this.previousNodes[next.position] = position;\n                        if (this.graph.getBreakPoint(next.position)) {\n                            this.graph.getBreakPoint(next.position)(this.graph.getLabel(next.position));\n                        }\n                    }\n                }\n            }\n        }\n        const result = {};\n        for (const [position, cost] of this.costs.entries()) {\n            const label = this.graph.getLabel(position);\n            const previousLabel = this.graph.getLabel(this.previousNodes[position]);\n            result[label] = { duration: cost, previousNode: previousLabel };\n        }\n        return result;\n    }\n    getCost(position) {\n        if (position >= this.costs.length) {\n            const missingCosts = this.graph.getAdjacencyList().length - this.costs.length;\n            this.costs = this.costs.concat([...Array(missingCosts)].fill(Infinity));\n            this.previousNodes = this.previousNodes.concat([...Array(missingCosts)].fill(undefined));\n        }\n        return this.costs[position];\n    }\n};\nDijkstraTreeInstance = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [graph_1.default])\n], DijkstraTreeInstance);\nexports.default = DijkstraTreeInstance;\n//# sourceMappingURL=DijkstraTreeInstance.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\n/**\n * A {@link TransformIterator} that allows the source to be set through a lazy Promise.\n * The provided getter will only be called from the moment that this proxy iterator is being read.\n *\n * Rejections of the promise will be emitted as error event.\n */\nclass PromiseProxyIterator extends asynciterator_1.TransformIterator {\n    constructor(sourceGetter, options) {\n        super(options || { autoStart: false });\n        this.sourceGetter = sourceGetter;\n    }\n    async loadSource() {\n        if (!this.source) {\n            this.source = await this.sourceGetter();\n        }\n        return this.source;\n    }\n    _read(count, done) {\n        if (!this.source) {\n            this.loadSource().then((source) => {\n                super._read(count, done);\n            }).catch((error) => this.emit('error', error));\n        }\n        else {\n            super._read(count, done);\n        }\n    }\n}\nexports.PromiseProxyIterator = PromiseProxyIterator;\n//# sourceMappingURL=PromiseProxyIterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\n/**\n * An AsyncIterator that emits only the unique items emitted by a source iterator.\n *\n * Uniqueness is determined by a comparator callback function\n *\n * Note: All (unique) items get stored in an array internally\n */\nclass FilterUniqueIterator extends asynciterator_1.SimpleTransformIterator {\n    constructor(source, comparator) {\n        super(source, {\n            maxBufferSize: 1,\n            autoStart: false,\n        });\n        this.comparator = comparator;\n        this.store = [];\n    }\n    _filter(object) {\n        const isUnique = !this.store\n            .some((storedObject) => this.comparator(object, storedObject));\n        if (isUnique) {\n            this.store.push(object);\n        }\n        return isUnique;\n    }\n}\nexports.default = FilterUniqueIterator;\n//# sourceMappingURL=FilterUniqueIterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\n/**\n * This AsyncIterator maps every item of a query AsyncIterator to a result AsyncIterator by passing it through a\n * `run` function. All result AsyncIterator get concatenated to form the FlatMapIterator\n *\n * ```javascript\n *                  +-----+                     +-----+\n *   queryIterator  |0 & 9| +---+             + |1 & 8| +---+             + ...\n *                  +-----+     |               +-----+     |\n *                              v                           v\n *                  +-----------------------+   +-----------------------+\n * resultIterators  |01|02|04|05|06|07|08|09| + |11|12|13|14|15|16|17|18| + ...\n *                  +-----------------------+   +-----------------------+\n *\n *                  +-----------------------------------------------+\n * FlatMapIterator  |01|02|04|05|06|07|08|09|11|12|13|14|15|16|17|18| ...\n *                  +-----------------------------------------------+\n * ```\n */\nclass FlatMapIterator extends asynciterator_1.AsyncIterator {\n    constructor(queryIterator, run) {\n        super();\n        this.isLastResultIterator = false;\n        this.queryIterator = queryIterator;\n        this.callback = run;\n        this.queryIterator.once(\"end\", () => {\n            this.isLastResultIterator = true;\n        });\n        this.readable = true;\n    }\n    read() {\n        if (this.closed) {\n            return null;\n        }\n        if (!this.currentResultIterator) {\n            const query = this.queryIterator.read();\n            if (query) {\n                this.runQuery(query);\n            }\n            else {\n                this.readable = false;\n                this.queryIterator.once(\"readable\", () => {\n                    this.readable = true;\n                });\n            }\n        }\n        if (this.currentResultIterator) {\n            const item = this.currentResultIterator.read();\n            if (!item) {\n                this.readable = false;\n            }\n            return item;\n        }\n        return null;\n    }\n    runQuery(query) {\n        this.currentResultIterator = this.callback(query);\n        this.readable = this.currentResultIterator.readable;\n        this.currentResultIterator.on(\"readable\", () => {\n            this.readable = true;\n        });\n        this.currentResultIterator.on(\"end\", () => {\n            if (this.isLastResultIterator) {\n                this.close();\n            }\n            this.currentResultIterator = null;\n            this.readable = true;\n        });\n    }\n}\nexports.default = FlatMapIterator;\n//# sourceMappingURL=FlatMapIterator.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\n/**\n * This AsyncIterator emits [[IResolvedQuery]] instances with exponentially increasing `maximumArrivalTime`.\n * For each emitted query, the time frame gets doubled (x2).\n */\nclass ExponentialQueryIterator extends asynciterator_1.AsyncIterator {\n    constructor(baseQuery, initialTimespan) {\n        super();\n        this.baseQuery = baseQuery;\n        this.timespan = initialTimespan;\n        this.readable = true;\n    }\n    read() {\n        if (this.closed) {\n            return null;\n        }\n        const { minimumDepartureTime } = this.baseQuery;\n        const maximumArrivalTime = new Date(minimumDepartureTime.getTime() + this.timespan);\n        this.timespan *= 2;\n        if (this.timespan > 2 * 24 * 60 * 60 * 1000) {\n            this.close();\n        }\n        return Object.assign({}, this.baseQuery, { maximumArrivalTime });\n    }\n}\nexports.default = ExponentialQueryIterator;\n//# sourceMappingURL=ExponentialQueryIterator.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst RoutableTileRegistry_1 = __importDefault(require(\"../entities/tiles/RoutableTileRegistry\"));\nconst LocationResolverError_1 = __importDefault(require(\"../errors/LocationResolverError\"));\nconst types_1 = __importDefault(require(\"../types\"));\n/**\n * This default location resolver resolves [[ILocation]] instances by their `id` (`http(s)://...`)\n *\n * If only an `id` string is passed, it returns an [[ILocation]] with all available information.\n *\n * If an incomplete [[ILocation]] (but with an `id`) is passed, it gets supplemented as well.\n */\nlet LocationResolverDefault = class LocationResolverDefault {\n    constructor(stopsProvider) {\n        this.stopsProvider = stopsProvider;\n        this.tileRegistry = RoutableTileRegistry_1.default.getInstance();\n    }\n    async resolve(input) {\n        if (typeof input === \"string\") {\n            if (this.isId(input)) {\n                return this.resolveById(input);\n            }\n            return Promise.reject(new LocationResolverError_1.default(`Location \"${input}\" is a string, but not an ID`));\n        }\n        const location = input;\n        const hasId = \"id\" in location;\n        const hasCoords = \"latitude\" in location && \"longitude\" in location;\n        if (hasId) {\n            const resolvedLocation = await this.resolveById(location.id);\n            return Object.assign({}, location, resolvedLocation);\n        }\n        if (!hasCoords) {\n            return Promise.reject(new LocationResolverError_1.default(`Location \"${JSON.stringify(input)}\" should have latitude and longitude`));\n        }\n        if (typeof location.latitude !== \"number\") {\n            location.latitude = parseFloat(location.latitude);\n        }\n        if (typeof location.longitude !== \"number\") {\n            location.longitude = parseFloat(location.longitude);\n        }\n        return location;\n    }\n    async resolveById(id) {\n        const node = this.tileRegistry.getNode(id);\n        if (node) {\n            return node;\n        }\n        const stop = await this.stopsProvider.getStopById(id);\n        if (stop) {\n            return stop;\n        }\n        return Promise.reject(new LocationResolverError_1.default(`No fetcher for id ${id}`));\n    }\n    isId(testString) {\n        return testString.indexOf(\"http://\") === 0 || testString.indexOf(\"https://\") === 0;\n    }\n};\nLocationResolverDefault = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.StopsProvider)),\n    __metadata(\"design:paramtypes\", [Object])\n], LocationResolverDefault);\nexports.default = LocationResolverDefault;\n//# sourceMappingURL=LocationResolverDefault.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst concaveman = require(\"concaveman\");\nconst d3_delaunay_1 = require(\"d3-delaunay\");\nconst UnionFind_1 = __importDefault(require(\"../../util/UnionFind\"));\nasync function visualizeConcaveIsochrone(pathTree, maxCost, registry) {\n    const locations = [];\n    for (const node of registry.getNodes()) {\n        const branch = pathTree[node.id];\n        if (branch) {\n            const { duration } = branch;\n            if (duration < maxCost) {\n                locations.push([node.longitude, node.latitude]);\n            }\n        }\n    }\n    let isochrones = [];\n    if (locations.length > 0) {\n        const shell = concaveman(locations, 2);\n        isochrones = [[shell.map((point) => {\n                    return { longitude: point[0], latitude: point[1] };\n                })]];\n    }\n    return {\n        isochrones,\n    };\n}\nexports.visualizeConcaveIsochrone = visualizeConcaveIsochrone;\nfunction visualizeIsochrone(registry, pathTree, maxCost) {\n    /**\n     * Isochrones are generated by applying a delaunay triangulisation to the road network nodes,\n     * Union-Find (= disjoint set) is used to find clusters of external/internal nodes.\n     * Each cluster will form one ring in the isochrone.\n     */\n    const nodes = [];\n    const costs = {};\n    for (const [id, branch] of Object.entries(pathTree)) {\n        const { duration } = branch;\n        const node = registry.getNode(id);\n        if (node && duration !== Infinity) {\n            nodes.push(node);\n            costs[node.id] = duration;\n        }\n    }\n    nodes.push({ latitude: 90, longitude: 180, id: \"1\", definedTags: {}, freeformTags: [], proximity: {} });\n    nodes.push({ latitude: -90, longitude: 180, id: \"2\", definedTags: {}, freeformTags: [], proximity: {} });\n    nodes.push({ latitude: 90, longitude: -180, id: \"3\", definedTags: {}, freeformTags: [], proximity: {} });\n    nodes.push({ latitude: -90, longitude: -180, id: \"4\", definedTags: {}, freeformTags: [], proximity: {} });\n    costs[\"1\"] = Infinity;\n    costs[\"2\"] = Infinity;\n    costs[\"3\"] = Infinity;\n    costs[\"4\"] = Infinity;\n    const delaunay = createTriangulation(nodes);\n    const internalNodes = nodes.map((node) => costs[node.id] < maxCost);\n    const externalNodes = internalNodes.map((v) => !v);\n    const internalClusters = clusterNodes(nodes, internalNodes, delaunay);\n    const externalClusters = clusterNodes(nodes, externalNodes, delaunay);\n    const polygons = internalClusters\n        .filter((cluster) => cluster.size > 1)\n        .map((internalCluster) => createPolygon(costs, maxCost, nodes, internalCluster, externalClusters, delaunay));\n    return {\n        isochrones: polygons.filter((p) => p.length > 0),\n    };\n}\nexports.visualizeIsochrone = visualizeIsochrone;\nfunction createTriangulation(nodes) {\n    function getX(p) {\n        return p.longitude;\n    }\n    function getY(p) {\n        return p.latitude;\n    }\n    return d3_delaunay_1.Delaunay.from(nodes, getX, getY);\n}\nfunction clusterNodes(allNodes, relevantNodes, delaunay) {\n    /**\n     * Uses Union-Find to cluster the given (relevant) nodes based on the Delaunay triangulisation of all nodes.\n     * Returns an array of clusters.\n     */\n    const forest = new UnionFind_1.default(allNodes.length);\n    for (const nodeIndex of Array(allNodes.length).keys()) {\n        if (relevantNodes[nodeIndex]) {\n            const neighbors = delaunay.neighbors(nodeIndex);\n            for (const neighbor of neighbors) {\n                if (relevantNodes[neighbor]) {\n                    forest.union(nodeIndex, neighbor);\n                }\n            }\n        }\n    }\n    const clusters = forest.getClusters();\n    for (const key of Object.keys(clusters)) {\n        if (!relevantNodes[key]) {\n            delete clusters[key];\n        }\n    }\n    return Object.values(clusters);\n}\nfunction createPolygon(costs, maxCost, nodes, internalNodes, externalClusters, delaunay) {\n    /**\n     * Creates a polygon for the given cluster of nodes that lie in an isochrone.\n     */\n    const rings = [];\n    // each cluster of external nodes yields a single ring.\n    // there's exactly one on the outside of the internal nodes cluster (because union-find)\n    // the others will form holes\n    for (const externalNodes of externalClusters) {\n        const borderLocations = [];\n        const borderNodeIds = new Set();\n        for (const nodeIndex of Array(nodes.length).keys()) {\n            if (!externalNodes.has(nodeIndex) && internalNodes.has(nodeIndex)) {\n                for (const neighbor of delaunay.neighbors(nodeIndex)) {\n                    if (externalNodes.has(neighbor)) {\n                        const point = pointBetween(nodes[nodeIndex], nodes[neighbor], costs, maxCost);\n                        if (point) {\n                            borderLocations.push(point);\n                        }\n                    }\n                }\n            }\n        }\n        if (borderLocations.length > 0) {\n            const triangulation = createTriangulation(borderLocations);\n            const firstNode = triangulation.hull;\n            const ring = [borderLocations[firstNode.i]];\n            let currentNode = firstNode.next;\n            while (currentNode.i !== firstNode.i) {\n                ring.push(borderLocations[currentNode.i]);\n                currentNode = currentNode.next;\n            }\n            rings.push(ring);\n        }\n    }\n    // FIXME, the ring with the most nodes might not always be the outer ring\n    return rings\n        .filter((r) => r.length > 0)\n        .sort((a, b) => b.length - a.length);\n}\nfunction pointBetween(node1, node2, costs, maxCost) {\n    const nodeCost1 = costs[node1.id];\n    const nodeCost2 = costs[node2.id];\n    if (nodeCost1 === Infinity && nodeCost2 === Infinity) {\n        return null;\n    }\n    else if (nodeCost1 === Infinity) {\n        return node2;\n    }\n    else if (nodeCost2 === Infinity) {\n        return node1;\n    }\n    const costDifference1 = Math.abs(nodeCost1 - maxCost);\n    const costDifference2 = Math.abs(nodeCost2 - maxCost);\n    const relDifference1 = 1 - costDifference1 / (costDifference1 + costDifference2);\n    const relDifference2 = 1 - costDifference2 / (costDifference1 + costDifference2);\n    const weight = relDifference1 + relDifference2;\n    const latitude = (node1.latitude * relDifference1 + node2.latitude * relDifference2) / weight;\n    const longitude = (node1.longitude * relDifference1 + node2.longitude * relDifference2) / weight;\n    if (isNaN(latitude) || isNaN(longitude)) {\n        return null;\n    }\n    return { latitude, longitude };\n}\n//# sourceMappingURL=visualize.js.map","'use strict';\n\nvar rbush = require('rbush');\nvar convexHull = require('monotone-convex-hull-2d');\nvar Queue = require('tinyqueue');\nvar pointInPolygon = require('point-in-polygon');\nvar orient = require('robust-orientation')[3];\n\nmodule.exports = concaveman;\nmodule.exports.default = concaveman;\n\nfunction concaveman(points, concavity, lengthThreshold) {\n    // a relative measure of concavity; higher value means simpler hull\n    concavity = Math.max(0, concavity === undefined ? 2 : concavity);\n\n    // when a segment goes below this length threshold, it won't be drilled down further\n    lengthThreshold = lengthThreshold || 0;\n\n    // start with a convex hull of the points\n    var hull = fastConvexHull(points);\n\n    // index the points with an R-tree\n    var tree = rbush(16, ['[0]', '[1]', '[0]', '[1]']).load(points);\n\n    // turn the convex hull into a linked list and populate the initial edge queue with the nodes\n    var queue = [];\n    for (var i = 0, last; i < hull.length; i++) {\n        var p = hull[i];\n        tree.remove(p);\n        last = insertNode(p, last);\n        queue.push(last);\n    }\n\n    // index the segments with an R-tree (for intersection checks)\n    var segTree = rbush(16);\n    for (i = 0; i < queue.length; i++) segTree.insert(updateBBox(queue[i]));\n\n    var sqConcavity = concavity * concavity;\n    var sqLenThreshold = lengthThreshold * lengthThreshold;\n\n    // process edges one by one\n    while (queue.length) {\n        var node = queue.shift();\n        var a = node.p;\n        var b = node.next.p;\n\n        // skip the edge if it's already short enough\n        var sqLen = getSqDist(a, b);\n        if (sqLen < sqLenThreshold) continue;\n\n        var maxSqLen = sqLen / sqConcavity;\n\n        // find the best connection point for the current edge to flex inward to\n        p = findCandidate(tree, node.prev.p, a, b, node.next.next.p, maxSqLen, segTree);\n\n        // if we found a connection and it satisfies our concavity measure\n        if (p && Math.min(getSqDist(p, a), getSqDist(p, b)) <= maxSqLen) {\n            // connect the edge endpoints through this point and add 2 new edges to the queue\n            queue.push(node);\n            queue.push(insertNode(p, node));\n\n            // update point and segment indexes\n            tree.remove(p);\n            segTree.remove(node);\n            segTree.insert(updateBBox(node));\n            segTree.insert(updateBBox(node.next));\n        }\n    }\n\n    // convert the resulting hull linked list to an array of points\n    node = last;\n    var concave = [];\n    do {\n        concave.push(node.p);\n        node = node.next;\n    } while (node !== last);\n\n    concave.push(node.p);\n\n    return concave;\n}\n\nfunction findCandidate(tree, a, b, c, d, maxDist, segTree) {\n    var queue = new Queue(null, compareDist);\n    var node = tree.data;\n\n    // search through the point R-tree with a depth-first search using a priority queue\n    // in the order of distance to the edge (b, c)\n    while (node) {\n        for (var i = 0; i < node.children.length; i++) {\n            var child = node.children[i];\n\n            var dist = node.leaf ? sqSegDist(child, b, c) : sqSegBoxDist(b, c, child);\n            if (dist > maxDist) continue; // skip the node if it's farther than we ever need\n\n            queue.push({\n                node: child,\n                dist: dist\n            });\n        }\n\n        while (queue.length && !queue.peek().node.children) {\n            var item = queue.pop();\n            var p = item.node;\n\n            // skip all points that are as close to adjacent edges (a,b) and (c,d),\n            // and points that would introduce self-intersections when connected\n            var d0 = sqSegDist(p, a, b);\n            var d1 = sqSegDist(p, c, d);\n            if (item.dist < d0 && item.dist < d1 &&\n                noIntersections(b, p, segTree) &&\n                noIntersections(c, p, segTree)) return p;\n        }\n\n        node = queue.pop();\n        if (node) node = node.node;\n    }\n\n    return null;\n}\n\nfunction compareDist(a, b) {\n    return a.dist - b.dist;\n}\n\n// square distance from a segment bounding box to the given one\nfunction sqSegBoxDist(a, b, bbox) {\n    if (inside(a, bbox) || inside(b, bbox)) return 0;\n    var d1 = sqSegSegDist(a[0], a[1], b[0], b[1], bbox.minX, bbox.minY, bbox.maxX, bbox.minY);\n    if (d1 === 0) return 0;\n    var d2 = sqSegSegDist(a[0], a[1], b[0], b[1], bbox.minX, bbox.minY, bbox.minX, bbox.maxY);\n    if (d2 === 0) return 0;\n    var d3 = sqSegSegDist(a[0], a[1], b[0], b[1], bbox.maxX, bbox.minY, bbox.maxX, bbox.maxY);\n    if (d3 === 0) return 0;\n    var d4 = sqSegSegDist(a[0], a[1], b[0], b[1], bbox.minX, bbox.maxY, bbox.maxX, bbox.maxY);\n    if (d4 === 0) return 0;\n    return Math.min(d1, d2, d3, d4);\n}\n\nfunction inside(a, bbox) {\n    return a[0] >= bbox.minX &&\n           a[0] <= bbox.maxX &&\n           a[1] >= bbox.minY &&\n           a[1] <= bbox.maxY;\n}\n\n// check if the edge (a,b) doesn't intersect any other edges\nfunction noIntersections(a, b, segTree) {\n    var minX = Math.min(a[0], b[0]);\n    var minY = Math.min(a[1], b[1]);\n    var maxX = Math.max(a[0], b[0]);\n    var maxY = Math.max(a[1], b[1]);\n\n    var edges = segTree.search({minX: minX, minY: minY, maxX: maxX, maxY: maxY});\n    for (var i = 0; i < edges.length; i++) {\n        if (intersects(edges[i].p, edges[i].next.p, a, b)) return false;\n    }\n    return true;\n}\n\n// check if the edges (p1,q1) and (p2,q2) intersect\nfunction intersects(p1, q1, p2, q2) {\n    return p1 !== q2 && q1 !== p2 &&\n        orient(p1, q1, p2) > 0 !== orient(p1, q1, q2) > 0 &&\n        orient(p2, q2, p1) > 0 !== orient(p2, q2, q1) > 0;\n}\n\n// update the bounding box of a node's edge\nfunction updateBBox(node) {\n    var p1 = node.p;\n    var p2 = node.next.p;\n    node.minX = Math.min(p1[0], p2[0]);\n    node.minY = Math.min(p1[1], p2[1]);\n    node.maxX = Math.max(p1[0], p2[0]);\n    node.maxY = Math.max(p1[1], p2[1]);\n    return node;\n}\n\n// speed up convex hull by filtering out points inside quadrilateral formed by 4 extreme points\nfunction fastConvexHull(points) {\n    var left = points[0];\n    var top = points[0];\n    var right = points[0];\n    var bottom = points[0];\n\n    // find the leftmost, rightmost, topmost and bottommost points\n    for (var i = 0; i < points.length; i++) {\n        var p = points[i];\n        if (p[0] < left[0]) left = p;\n        if (p[0] > right[0]) right = p;\n        if (p[1] < top[1]) top = p;\n        if (p[1] > bottom[1]) bottom = p;\n    }\n\n    // filter out points that are inside the resulting quadrilateral\n    var cull = [left, top, right, bottom];\n    var filtered = cull.slice();\n    for (i = 0; i < points.length; i++) {\n        if (!pointInPolygon(points[i], cull)) filtered.push(points[i]);\n    }\n\n    // get convex hull around the filtered points\n    var indices = convexHull(filtered);\n\n    // return the hull as array of points (rather than indices)\n    var hull = [];\n    for (i = 0; i < indices.length; i++) hull.push(filtered[indices[i]]);\n    return hull;\n}\n\n// create a new node in a doubly linked list\nfunction insertNode(p, prev) {\n    var node = {\n        p: p,\n        prev: null,\n        next: null,\n        minX: 0,\n        minY: 0,\n        maxX: 0,\n        maxY: 0\n    };\n\n    if (!prev) {\n        node.prev = node;\n        node.next = node;\n\n    } else {\n        node.next = prev.next;\n        node.prev = prev;\n        prev.next.prev = node;\n        prev.next = node;\n    }\n    return node;\n}\n\n// square distance between 2 points\nfunction getSqDist(p1, p2) {\n\n    var dx = p1[0] - p2[0],\n        dy = p1[1] - p2[1];\n\n    return dx * dx + dy * dy;\n}\n\n// square distance from a point to a segment\nfunction sqSegDist(p, p1, p2) {\n\n    var x = p1[0],\n        y = p1[1],\n        dx = p2[0] - x,\n        dy = p2[1] - y;\n\n    if (dx !== 0 || dy !== 0) {\n\n        var t = ((p[0] - x) * dx + (p[1] - y) * dy) / (dx * dx + dy * dy);\n\n        if (t > 1) {\n            x = p2[0];\n            y = p2[1];\n\n        } else if (t > 0) {\n            x += dx * t;\n            y += dy * t;\n        }\n    }\n\n    dx = p[0] - x;\n    dy = p[1] - y;\n\n    return dx * dx + dy * dy;\n}\n\n// segment to segment distance, ported from http://geomalgorithms.com/a07-_distance.html by Dan Sunday\nfunction sqSegSegDist(x0, y0, x1, y1, x2, y2, x3, y3) {\n    var ux = x1 - x0;\n    var uy = y1 - y0;\n    var vx = x3 - x2;\n    var vy = y3 - y2;\n    var wx = x0 - x2;\n    var wy = y0 - y2;\n    var a = ux * ux + uy * uy;\n    var b = ux * vx + uy * vy;\n    var c = vx * vx + vy * vy;\n    var d = ux * wx + uy * wy;\n    var e = vx * wx + vy * wy;\n    var D = a * c - b * b;\n\n    var sc, sN, tc, tN;\n    var sD = D;\n    var tD = D;\n\n    if (D === 0) {\n        sN = 0;\n        sD = 1;\n        tN = e;\n        tD = c;\n    } else {\n        sN = b * e - c * d;\n        tN = a * e - b * d;\n        if (sN < 0) {\n            sN = 0;\n            tN = e;\n            tD = c;\n        } else if (sN > sD) {\n            sN = sD;\n            tN = e + b;\n            tD = c;\n        }\n    }\n\n    if (tN < 0.0) {\n        tN = 0.0;\n        if (-d < 0.0) sN = 0.0;\n        else if (-d > a) sN = sD;\n        else {\n            sN = -d;\n            sD = a;\n        }\n    } else if (tN > tD) {\n        tN = tD;\n        if ((-d + b) < 0.0) sN = 0;\n        else if (-d + b > a) sN = sD;\n        else {\n            sN = -d + b;\n            sD = a;\n        }\n    }\n\n    sc = sN === 0 ? 0 : sN / sD;\n    tc = tN === 0 ? 0 : tN / tD;\n\n    var cx = (1 - sc) * x0 + sc * x1;\n    var cy = (1 - sc) * y0 + sc * y1;\n    var cx2 = (1 - tc) * x2 + tc * x3;\n    var cy2 = (1 - tc) * y2 + tc * y3;\n    var dx = cx2 - cx;\n    var dy = cy2 - cy;\n\n    return dx * dx + dy * dy;\n}\n","'use strict';\n\nmodule.exports = rbush;\nmodule.exports.default = rbush;\n\nvar quickselect = require('quickselect');\n\nfunction rbush(maxEntries, format) {\n    if (!(this instanceof rbush)) return new rbush(maxEntries, format);\n\n    // max entries in a node is 9 by default; min node fill is 40% for best performance\n    this._maxEntries = Math.max(4, maxEntries || 9);\n    this._minEntries = Math.max(2, Math.ceil(this._maxEntries * 0.4));\n\n    if (format) {\n        this._initFormat(format);\n    }\n\n    this.clear();\n}\n\nrbush.prototype = {\n\n    all: function () {\n        return this._all(this.data, []);\n    },\n\n    search: function (bbox) {\n\n        var node = this.data,\n            result = [],\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return result;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf) result.push(child);\n                    else if (contains(bbox, childBBox)) this._all(child, result);\n                    else nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return result;\n    },\n\n    collides: function (bbox) {\n\n        var node = this.data,\n            toBBox = this.toBBox;\n\n        if (!intersects(bbox, node)) return false;\n\n        var nodesToSearch = [],\n            i, len, child, childBBox;\n\n        while (node) {\n            for (i = 0, len = node.children.length; i < len; i++) {\n\n                child = node.children[i];\n                childBBox = node.leaf ? toBBox(child) : child;\n\n                if (intersects(bbox, childBBox)) {\n                    if (node.leaf || contains(bbox, childBBox)) return true;\n                    nodesToSearch.push(child);\n                }\n            }\n            node = nodesToSearch.pop();\n        }\n\n        return false;\n    },\n\n    load: function (data) {\n        if (!(data && data.length)) return this;\n\n        if (data.length < this._minEntries) {\n            for (var i = 0, len = data.length; i < len; i++) {\n                this.insert(data[i]);\n            }\n            return this;\n        }\n\n        // recursively build the tree with the given data from scratch using OMT algorithm\n        var node = this._build(data.slice(), 0, data.length - 1, 0);\n\n        if (!this.data.children.length) {\n            // save as is if tree is empty\n            this.data = node;\n\n        } else if (this.data.height === node.height) {\n            // split root if trees have the same height\n            this._splitRoot(this.data, node);\n\n        } else {\n            if (this.data.height < node.height) {\n                // swap trees if inserted one is bigger\n                var tmpNode = this.data;\n                this.data = node;\n                node = tmpNode;\n            }\n\n            // insert the small tree into the large tree at appropriate level\n            this._insert(node, this.data.height - node.height - 1, true);\n        }\n\n        return this;\n    },\n\n    insert: function (item) {\n        if (item) this._insert(item, this.data.height - 1);\n        return this;\n    },\n\n    clear: function () {\n        this.data = createNode([]);\n        return this;\n    },\n\n    remove: function (item, equalsFn) {\n        if (!item) return this;\n\n        var node = this.data,\n            bbox = this.toBBox(item),\n            path = [],\n            indexes = [],\n            i, parent, index, goingUp;\n\n        // depth-first iterative tree traversal\n        while (node || path.length) {\n\n            if (!node) { // go up\n                node = path.pop();\n                parent = path[path.length - 1];\n                i = indexes.pop();\n                goingUp = true;\n            }\n\n            if (node.leaf) { // check current node\n                index = findItem(item, node.children, equalsFn);\n\n                if (index !== -1) {\n                    // item found, remove the item and condense tree upwards\n                    node.children.splice(index, 1);\n                    path.push(node);\n                    this._condense(path);\n                    return this;\n                }\n            }\n\n            if (!goingUp && !node.leaf && contains(node, bbox)) { // go down\n                path.push(node);\n                indexes.push(i);\n                i = 0;\n                parent = node;\n                node = node.children[0];\n\n            } else if (parent) { // go right\n                i++;\n                node = parent.children[i];\n                goingUp = false;\n\n            } else node = null; // nothing found\n        }\n\n        return this;\n    },\n\n    toBBox: function (item) { return item; },\n\n    compareMinX: compareNodeMinX,\n    compareMinY: compareNodeMinY,\n\n    toJSON: function () { return this.data; },\n\n    fromJSON: function (data) {\n        this.data = data;\n        return this;\n    },\n\n    _all: function (node, result) {\n        var nodesToSearch = [];\n        while (node) {\n            if (node.leaf) result.push.apply(result, node.children);\n            else nodesToSearch.push.apply(nodesToSearch, node.children);\n\n            node = nodesToSearch.pop();\n        }\n        return result;\n    },\n\n    _build: function (items, left, right, height) {\n\n        var N = right - left + 1,\n            M = this._maxEntries,\n            node;\n\n        if (N <= M) {\n            // reached leaf level; return leaf\n            node = createNode(items.slice(left, right + 1));\n            calcBBox(node, this.toBBox);\n            return node;\n        }\n\n        if (!height) {\n            // target height of the bulk-loaded tree\n            height = Math.ceil(Math.log(N) / Math.log(M));\n\n            // target number of root entries to maximize storage utilization\n            M = Math.ceil(N / Math.pow(M, height - 1));\n        }\n\n        node = createNode([]);\n        node.leaf = false;\n        node.height = height;\n\n        // split the items into M mostly square tiles\n\n        var N2 = Math.ceil(N / M),\n            N1 = N2 * Math.ceil(Math.sqrt(M)),\n            i, j, right2, right3;\n\n        multiSelect(items, left, right, N1, this.compareMinX);\n\n        for (i = left; i <= right; i += N1) {\n\n            right2 = Math.min(i + N1 - 1, right);\n\n            multiSelect(items, i, right2, N2, this.compareMinY);\n\n            for (j = i; j <= right2; j += N2) {\n\n                right3 = Math.min(j + N2 - 1, right2);\n\n                // pack each entry recursively\n                node.children.push(this._build(items, j, right3, height - 1));\n            }\n        }\n\n        calcBBox(node, this.toBBox);\n\n        return node;\n    },\n\n    _chooseSubtree: function (bbox, node, level, path) {\n\n        var i, len, child, targetNode, area, enlargement, minArea, minEnlargement;\n\n        while (true) {\n            path.push(node);\n\n            if (node.leaf || path.length - 1 === level) break;\n\n            minArea = minEnlargement = Infinity;\n\n            for (i = 0, len = node.children.length; i < len; i++) {\n                child = node.children[i];\n                area = bboxArea(child);\n                enlargement = enlargedArea(bbox, child) - area;\n\n                // choose entry with the least area enlargement\n                if (enlargement < minEnlargement) {\n                    minEnlargement = enlargement;\n                    minArea = area < minArea ? area : minArea;\n                    targetNode = child;\n\n                } else if (enlargement === minEnlargement) {\n                    // otherwise choose one with the smallest area\n                    if (area < minArea) {\n                        minArea = area;\n                        targetNode = child;\n                    }\n                }\n            }\n\n            node = targetNode || node.children[0];\n        }\n\n        return node;\n    },\n\n    _insert: function (item, level, isNode) {\n\n        var toBBox = this.toBBox,\n            bbox = isNode ? item : toBBox(item),\n            insertPath = [];\n\n        // find the best node for accommodating the item, saving all nodes along the path too\n        var node = this._chooseSubtree(bbox, this.data, level, insertPath);\n\n        // put the item into the node\n        node.children.push(item);\n        extend(node, bbox);\n\n        // split on node overflow; propagate upwards if necessary\n        while (level >= 0) {\n            if (insertPath[level].children.length > this._maxEntries) {\n                this._split(insertPath, level);\n                level--;\n            } else break;\n        }\n\n        // adjust bboxes along the insertion path\n        this._adjustParentBBoxes(bbox, insertPath, level);\n    },\n\n    // split overflowed node into two\n    _split: function (insertPath, level) {\n\n        var node = insertPath[level],\n            M = node.children.length,\n            m = this._minEntries;\n\n        this._chooseSplitAxis(node, m, M);\n\n        var splitIndex = this._chooseSplitIndex(node, m, M);\n\n        var newNode = createNode(node.children.splice(splitIndex, node.children.length - splitIndex));\n        newNode.height = node.height;\n        newNode.leaf = node.leaf;\n\n        calcBBox(node, this.toBBox);\n        calcBBox(newNode, this.toBBox);\n\n        if (level) insertPath[level - 1].children.push(newNode);\n        else this._splitRoot(node, newNode);\n    },\n\n    _splitRoot: function (node, newNode) {\n        // split root node\n        this.data = createNode([node, newNode]);\n        this.data.height = node.height + 1;\n        this.data.leaf = false;\n        calcBBox(this.data, this.toBBox);\n    },\n\n    _chooseSplitIndex: function (node, m, M) {\n\n        var i, bbox1, bbox2, overlap, area, minOverlap, minArea, index;\n\n        minOverlap = minArea = Infinity;\n\n        for (i = m; i <= M - m; i++) {\n            bbox1 = distBBox(node, 0, i, this.toBBox);\n            bbox2 = distBBox(node, i, M, this.toBBox);\n\n            overlap = intersectionArea(bbox1, bbox2);\n            area = bboxArea(bbox1) + bboxArea(bbox2);\n\n            // choose distribution with minimum overlap\n            if (overlap < minOverlap) {\n                minOverlap = overlap;\n                index = i;\n\n                minArea = area < minArea ? area : minArea;\n\n            } else if (overlap === minOverlap) {\n                // otherwise choose distribution with minimum area\n                if (area < minArea) {\n                    minArea = area;\n                    index = i;\n                }\n            }\n        }\n\n        return index;\n    },\n\n    // sorts node children by the best axis for split\n    _chooseSplitAxis: function (node, m, M) {\n\n        var compareMinX = node.leaf ? this.compareMinX : compareNodeMinX,\n            compareMinY = node.leaf ? this.compareMinY : compareNodeMinY,\n            xMargin = this._allDistMargin(node, m, M, compareMinX),\n            yMargin = this._allDistMargin(node, m, M, compareMinY);\n\n        // if total distributions margin value is minimal for x, sort by minX,\n        // otherwise it's already sorted by minY\n        if (xMargin < yMargin) node.children.sort(compareMinX);\n    },\n\n    // total margin of all possible split distributions where each node is at least m full\n    _allDistMargin: function (node, m, M, compare) {\n\n        node.children.sort(compare);\n\n        var toBBox = this.toBBox,\n            leftBBox = distBBox(node, 0, m, toBBox),\n            rightBBox = distBBox(node, M - m, M, toBBox),\n            margin = bboxMargin(leftBBox) + bboxMargin(rightBBox),\n            i, child;\n\n        for (i = m; i < M - m; i++) {\n            child = node.children[i];\n            extend(leftBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(leftBBox);\n        }\n\n        for (i = M - m - 1; i >= m; i--) {\n            child = node.children[i];\n            extend(rightBBox, node.leaf ? toBBox(child) : child);\n            margin += bboxMargin(rightBBox);\n        }\n\n        return margin;\n    },\n\n    _adjustParentBBoxes: function (bbox, path, level) {\n        // adjust bboxes along the given tree path\n        for (var i = level; i >= 0; i--) {\n            extend(path[i], bbox);\n        }\n    },\n\n    _condense: function (path) {\n        // go through the path, removing empty nodes and updating bboxes\n        for (var i = path.length - 1, siblings; i >= 0; i--) {\n            if (path[i].children.length === 0) {\n                if (i > 0) {\n                    siblings = path[i - 1].children;\n                    siblings.splice(siblings.indexOf(path[i]), 1);\n\n                } else this.clear();\n\n            } else calcBBox(path[i], this.toBBox);\n        }\n    },\n\n    _initFormat: function (format) {\n        // data format (minX, minY, maxX, maxY accessors)\n\n        // uses eval-type function compilation instead of just accepting a toBBox function\n        // because the algorithms are very sensitive to sorting functions performance,\n        // so they should be dead simple and without inner calls\n\n        var compareArr = ['return a', ' - b', ';'];\n\n        this.compareMinX = new Function('a', 'b', compareArr.join(format[0]));\n        this.compareMinY = new Function('a', 'b', compareArr.join(format[1]));\n\n        this.toBBox = new Function('a',\n            'return {minX: a' + format[0] +\n            ', minY: a' + format[1] +\n            ', maxX: a' + format[2] +\n            ', maxY: a' + format[3] + '};');\n    }\n};\n\nfunction findItem(item, items, equalsFn) {\n    if (!equalsFn) return items.indexOf(item);\n\n    for (var i = 0; i < items.length; i++) {\n        if (equalsFn(item, items[i])) return i;\n    }\n    return -1;\n}\n\n// calculate node's bbox from bboxes of its children\nfunction calcBBox(node, toBBox) {\n    distBBox(node, 0, node.children.length, toBBox, node);\n}\n\n// min bounding rectangle of node children from k to p-1\nfunction distBBox(node, k, p, toBBox, destNode) {\n    if (!destNode) destNode = createNode(null);\n    destNode.minX = Infinity;\n    destNode.minY = Infinity;\n    destNode.maxX = -Infinity;\n    destNode.maxY = -Infinity;\n\n    for (var i = k, child; i < p; i++) {\n        child = node.children[i];\n        extend(destNode, node.leaf ? toBBox(child) : child);\n    }\n\n    return destNode;\n}\n\nfunction extend(a, b) {\n    a.minX = Math.min(a.minX, b.minX);\n    a.minY = Math.min(a.minY, b.minY);\n    a.maxX = Math.max(a.maxX, b.maxX);\n    a.maxY = Math.max(a.maxY, b.maxY);\n    return a;\n}\n\nfunction compareNodeMinX(a, b) { return a.minX - b.minX; }\nfunction compareNodeMinY(a, b) { return a.minY - b.minY; }\n\nfunction bboxArea(a)   { return (a.maxX - a.minX) * (a.maxY - a.minY); }\nfunction bboxMargin(a) { return (a.maxX - a.minX) + (a.maxY - a.minY); }\n\nfunction enlargedArea(a, b) {\n    return (Math.max(b.maxX, a.maxX) - Math.min(b.minX, a.minX)) *\n           (Math.max(b.maxY, a.maxY) - Math.min(b.minY, a.minY));\n}\n\nfunction intersectionArea(a, b) {\n    var minX = Math.max(a.minX, b.minX),\n        minY = Math.max(a.minY, b.minY),\n        maxX = Math.min(a.maxX, b.maxX),\n        maxY = Math.min(a.maxY, b.maxY);\n\n    return Math.max(0, maxX - minX) *\n           Math.max(0, maxY - minY);\n}\n\nfunction contains(a, b) {\n    return a.minX <= b.minX &&\n           a.minY <= b.minY &&\n           b.maxX <= a.maxX &&\n           b.maxY <= a.maxY;\n}\n\nfunction intersects(a, b) {\n    return b.minX <= a.maxX &&\n           b.minY <= a.maxY &&\n           b.maxX >= a.minX &&\n           b.maxY >= a.minY;\n}\n\nfunction createNode(children) {\n    return {\n        children: children,\n        height: 1,\n        leaf: true,\n        minX: Infinity,\n        minY: Infinity,\n        maxX: -Infinity,\n        maxY: -Infinity\n    };\n}\n\n// sort an array so that items come in groups of n unsorted items, with groups sorted between each other;\n// combines selection algorithm with binary divide & conquer approach\n\nfunction multiSelect(arr, left, right, n, compare) {\n    var stack = [left, right],\n        mid;\n\n    while (stack.length) {\n        right = stack.pop();\n        left = stack.pop();\n\n        if (right - left <= n) continue;\n\n        mid = left + Math.ceil((right - left) / n / 2) * n;\n        quickselect(arr, mid, left, right, compare);\n\n        stack.push(left, mid, mid, right);\n    }\n}\n","(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n\ttypeof define === 'function' && define.amd ? define(factory) :\n\t(global.quickselect = factory());\n}(this, (function () { 'use strict';\n\nfunction quickselect(arr, k, left, right, compare) {\n    quickselectStep(arr, k, left || 0, right || (arr.length - 1), compare || defaultCompare);\n}\n\nfunction quickselectStep(arr, k, left, right, compare) {\n\n    while (right > left) {\n        if (right - left > 600) {\n            var n = right - left + 1;\n            var m = k - left + 1;\n            var z = Math.log(n);\n            var s = 0.5 * Math.exp(2 * z / 3);\n            var sd = 0.5 * Math.sqrt(z * s * (n - s) / n) * (m - n / 2 < 0 ? -1 : 1);\n            var newLeft = Math.max(left, Math.floor(k - m * s / n + sd));\n            var newRight = Math.min(right, Math.floor(k + (n - m) * s / n + sd));\n            quickselectStep(arr, k, newLeft, newRight, compare);\n        }\n\n        var t = arr[k];\n        var i = left;\n        var j = right;\n\n        swap(arr, left, k);\n        if (compare(arr[right], t) > 0) swap(arr, left, right);\n\n        while (i < j) {\n            swap(arr, i, j);\n            i++;\n            j--;\n            while (compare(arr[i], t) < 0) i++;\n            while (compare(arr[j], t) > 0) j--;\n        }\n\n        if (compare(arr[left], t) === 0) swap(arr, left, j);\n        else {\n            j++;\n            swap(arr, j, right);\n        }\n\n        if (j <= k) left = j + 1;\n        if (k <= j) right = j - 1;\n    }\n}\n\nfunction swap(arr, i, j) {\n    var tmp = arr[i];\n    arr[i] = arr[j];\n    arr[j] = tmp;\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nreturn quickselect;\n\n})));\n","'use strict'\n\nmodule.exports = monotoneConvexHull2D\n\nvar orient = require('robust-orientation')[3]\n\nfunction monotoneConvexHull2D(points) {\n  var n = points.length\n\n  if(n < 3) {\n    var result = new Array(n)\n    for(var i=0; i<n; ++i) {\n      result[i] = i\n    }\n\n    if(n === 2 &&\n       points[0][0] === points[1][0] &&\n       points[0][1] === points[1][1]) {\n      return [0]\n    }\n\n    return result\n  }\n\n  //Sort point indices along x-axis\n  var sorted = new Array(n)\n  for(var i=0; i<n; ++i) {\n    sorted[i] = i\n  }\n  sorted.sort(function(a,b) {\n    var d = points[a][0]-points[b][0]\n    if(d) {\n      return d\n    }\n    return points[a][1] - points[b][1]\n  })\n\n  //Construct upper and lower hulls\n  var lower = [sorted[0], sorted[1]]\n  var upper = [sorted[0], sorted[1]]\n\n  for(var i=2; i<n; ++i) {\n    var idx = sorted[i]\n    var p   = points[idx]\n\n    //Insert into lower list\n    var m = lower.length\n    while(m > 1 && orient(\n        points[lower[m-2]], \n        points[lower[m-1]], \n        p) <= 0) {\n      m -= 1\n      lower.pop()\n    }\n    lower.push(idx)\n\n    //Insert into upper list\n    m = upper.length\n    while(m > 1 && orient(\n        points[upper[m-2]], \n        points[upper[m-1]], \n        p) >= 0) {\n      m -= 1\n      upper.pop()\n    }\n    upper.push(idx)\n  }\n\n  //Merge lists together\n  var result = new Array(upper.length + lower.length - 2)\n  var ptr    = 0\n  for(var i=0, nl=lower.length; i<nl; ++i) {\n    result[ptr++] = lower[i]\n  }\n  for(var j=upper.length-2; j>0; --j) {\n    result[ptr++] = upper[j]\n  }\n\n  //Return result\n  return result\n}","\"use strict\"\n\nmodule.exports = linearExpansionSum\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction linearExpansionSum(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar twoSum = require(\"two-sum\")\n\nmodule.exports = scaleLinearExpansion\n\nfunction scaleLinearExpansion(e, scale) {\n  var n = e.length\n  if(n === 1) {\n    var ts = twoProduct(e[0], scale)\n    if(ts[0]) {\n      return ts\n    }\n    return [ ts[1] ]\n  }\n  var g = new Array(2 * n)\n  var q = [0.1, 0.1]\n  var t = [0.1, 0.1]\n  var count = 0\n  twoProduct(e[0], scale, q)\n  if(q[0]) {\n    g[count++] = q[0]\n  }\n  for(var i=1; i<n; ++i) {\n    twoProduct(e[i], scale, t)\n    var pq = q[1]\n    twoSum(pq, t[0], q)\n    if(q[0]) {\n      g[count++] = q[0]\n    }\n    var a = t[1]\n    var b = q[1]\n    var x = a + b\n    var bv = x - a\n    var y = b - bv\n    q[1] = x\n    if(y) {\n      g[count++] = y\n    }\n  }\n  if(q[1]) {\n    g[count++] = q[1]\n  }\n  if(count === 0) {\n    g[count++] = 0.0\n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = fastTwoSum\n\nfunction fastTwoSum(a, b, result) {\n\tvar x = a + b\n\tvar bv = x - a\n\tvar av = x - bv\n\tvar br = b - bv\n\tvar ar = a - av\n\tif(result) {\n\t\tresult[0] = ar + br\n\t\tresult[1] = x\n\t\treturn result\n\t}\n\treturn [ar+br, x]\n}","\"use strict\"\n\nmodule.exports = robustSubtract\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction robustSubtract(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], -f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = -f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = -f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","'use strict';\n\nmodule.exports = TinyQueue;\nmodule.exports.default = TinyQueue;\n\nfunction TinyQueue(data, compare) {\n    if (!(this instanceof TinyQueue)) return new TinyQueue(data, compare);\n\n    this.data = data || [];\n    this.length = this.data.length;\n    this.compare = compare || defaultCompare;\n\n    if (this.length > 0) {\n        for (var i = (this.length >> 1) - 1; i >= 0; i--) this._down(i);\n    }\n}\n\nfunction defaultCompare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n\nTinyQueue.prototype = {\n\n    push: function (item) {\n        this.data.push(item);\n        this.length++;\n        this._up(this.length - 1);\n    },\n\n    pop: function () {\n        if (this.length === 0) return undefined;\n\n        var top = this.data[0];\n        this.length--;\n\n        if (this.length > 0) {\n            this.data[0] = this.data[this.length];\n            this._down(0);\n        }\n        this.data.pop();\n\n        return top;\n    },\n\n    peek: function () {\n        return this.data[0];\n    },\n\n    _up: function (pos) {\n        var data = this.data;\n        var compare = this.compare;\n        var item = data[pos];\n\n        while (pos > 0) {\n            var parent = (pos - 1) >> 1;\n            var current = data[parent];\n            if (compare(item, current) >= 0) break;\n            data[pos] = current;\n            pos = parent;\n        }\n\n        data[pos] = item;\n    },\n\n    _down: function (pos) {\n        var data = this.data;\n        var compare = this.compare;\n        var halfLength = this.length >> 1;\n        var item = data[pos];\n\n        while (pos < halfLength) {\n            var left = (pos << 1) + 1;\n            var right = left + 1;\n            var best = data[left];\n\n            if (right < this.length && compare(data[right], best) < 0) {\n                left = right;\n                best = data[right];\n            }\n            if (compare(best, item) >= 0) break;\n\n            data[pos] = best;\n            pos = left;\n        }\n\n        data[pos] = item;\n    }\n};\n","module.exports = function (point, vs) {\n    // ray-casting algorithm based on\n    // http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html\n    \n    var x = point[0], y = point[1];\n    \n    var inside = false;\n    for (var i = 0, j = vs.length - 1; i < vs.length; j = i++) {\n        var xi = vs[i][0], yi = vs[i][1];\n        var xj = vs[j][0], yj = vs[j][1];\n        \n        var intersect = ((yi > y) != (yj > y))\n            && (x < (xj - xi) * (y - yi) / (yj - yi) + xi);\n        if (intersect) inside = !inside;\n    }\n    \n    return inside;\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass UnionFind {\n    constructor(size) {\n        this.connections = [...Array(size).keys()];\n        this.ranks = [...Array(size).keys()];\n    }\n    union(x, y) {\n        let xRoot = this.find(x);\n        let yRoot = this.find(y);\n        if (xRoot === yRoot) {\n            return;\n        }\n        if (this.ranks[xRoot] < this.ranks[yRoot]) {\n            [xRoot, yRoot] = [yRoot, xRoot];\n        }\n        this.connections[yRoot] = xRoot;\n        if (this.ranks[xRoot] === this.ranks[yRoot]) {\n            this.ranks[xRoot] += 1;\n        }\n    }\n    find(val) {\n        if (this.connections[val] !== val) {\n            this.connections[val] = this.find(this.connections[val]);\n        }\n        return this.connections[val];\n    }\n    getClusters() {\n        const result = {};\n        for (const [index, connection] of this.connections.entries()) {\n            if (index === connection) {\n                result[index] = new Set();\n            }\n        }\n        for (const index of this.connections.keys()) {\n            const cluster = this.find(index);\n            result[cluster].add(index);\n        }\n        return result;\n    }\n}\nexports.default = UnionFind;\n//# sourceMappingURL=UnionFind.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst CatalogFetcherDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogFetcherDefault\"));\nconst CatalogProviderDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogProviderDefault\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst FootpathsProviderRaw_1 = __importDefault(require(\"../fetcher/footpaths/FootpathsProviderRaw\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherRaw_1 = __importDefault(require(\"../fetcher/stops/StopsFetcherRaw\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderDefault\"));\nconst RoutableTileProviderTransit_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderTransit\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst MixedDijkstra_1 = __importDefault(require(\"../pathfinding/mixed-dijkstra/MixedDijkstra\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAEarliestArrival_1 = __importDefault(require(\"../planner/public-transport/CSAEarliestArrival\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfinding_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfinding\"));\nconst ReachableStopsFinderDelaunay_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderDelaunay\"));\nconst ReachableStopsFinderFootpaths_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderFootpaths\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst QueryRunnerDefault_1 = __importDefault(require(\"../query-runner/QueryRunnerDefault\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerDefault_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAEarliestArrival_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner)\n    .to(RoadPlannerPathfinding_1.default);\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(MixedDijkstra_1.default).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.FootpathsProvider).to(FootpathsProviderRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderFootpaths_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.CatalogFetcher).to(CatalogFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogProvider).to(CatalogProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherRaw_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderTransit_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=dissect.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst BidirDijkstraInstance_1 = require(\"../bidirdijkstra/BidirDijkstraInstance\");\nconst DijkstraInstance_1 = require(\"../dijkstra/DijkstraInstance\");\nconst graph_1 = __importDefault(require(\"../graph\"));\nlet MixedDijkstraInstance = class MixedDijkstraInstance {\n    constructor(graph, locationResolver) {\n        this.bidir = new BidirDijkstraInstance_1.BidirDijkstraInstance(graph);\n        this.classic = new DijkstraInstance_1.DijkstraInstance(graph);\n        this.locationResolver = locationResolver;\n    }\n    setUseWeightedCost(useWeightedCost) {\n        this.bidir.setUseWeightedCost(useWeightedCost);\n        this.classic.setUseWeightedCost(useWeightedCost);\n    }\n    setBreakPoint(on, callback) {\n        this.bidir.setBreakPoint(on, callback);\n        this.classic.setBreakPoint(on, callback);\n    }\n    removeBreakPoint(on) {\n        this.bidir.removeBreakPoint(on);\n        this.classic.removeBreakPoint(on);\n    }\n    async queryPath(from, to, maxDistance = Infinity) {\n        const promises = [this.locationResolver.resolve(from), this.locationResolver.resolve(to)];\n        const [fromLocation, toLocation] = await Promise.all(promises);\n        const distance = Geo_1.default.getDistanceBetweenLocations(fromLocation, toLocation);\n        if (distance < 1000) {\n            return this.classic.queryPath(from, to, maxDistance);\n        }\n        else {\n            return this.bidir.queryPath(from, to, maxDistance);\n        }\n    }\n};\nMixedDijkstraInstance = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [graph_1.default, Object])\n], MixedDijkstraInstance);\nexports.MixedDijkstraInstance = MixedDijkstraInstance;\n//# sourceMappingURL=MixedDijkstraInstance.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst CatalogFetcherDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogFetcherDefault\"));\nconst CatalogProviderDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogProviderDefault\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherRaw_1 = __importDefault(require(\"../fetcher/stops/StopsFetcherRaw\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderDefault\"));\nconst HypermediaTreeFetcherDefault_1 = __importDefault(require(\"../fetcher/tree/HypermediaTreeFetcherDefault\"));\nconst HypermediaTreeProviderDefault_1 = __importDefault(require(\"../fetcher/tree/HypermediaTreeProviderDefault\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst BidirDijkstra_1 = require(\"../pathfinding/bidirdijkstra/BidirDijkstra\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAProfile_1 = __importDefault(require(\"../planner/public-transport/CSAProfile\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfinding_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfinding\"));\nconst ReachableStopsFinderBirdsEyeCached_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderBirdsEyeCached\"));\nconst ReachableStopsFinderDelaunay_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderDelaunay\"));\nconst QueryRunnerExponential_1 = __importDefault(require(\"../query-runner/exponential/QueryRunnerExponential\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerExponential_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner)\n    .to(RoadPlannerPathfinding_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.HypermediaTreeFetcher).to(HypermediaTreeFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.HypermediaTreeProvider)\n    .to(HypermediaTreeProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(BidirDijkstra_1.BidirDijkstra).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogFetcher).to(CatalogFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogProvider).to(CatalogProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderBirdsEyeCached_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherRaw_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=flexible_profile_transit.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar RelationTypes;\n(function (RelationTypes) {\n    RelationTypes[\"GEOSPATIALLYC_CONTAINS\"] = \"https://w3id.org/tree#GeospatiallyContainsRelation\";\n})(RelationTypes || (RelationTypes = {}));\nclass HypermediaTreeRelation {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new HypermediaTreeRelation(id);\n    }\n}\nexports.default = HypermediaTreeRelation;\n//# sourceMappingURL=relation.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass HypermediaTree {\n    constructor(id) {\n        this.id = id;\n    }\n    static create(id) {\n        return new HypermediaTree(id);\n    }\n}\nexports.default = HypermediaTree;\n//# sourceMappingURL=tree.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst inversify_1 = require(\"inversify\");\nconst DropOffType_1 = __importDefault(require(\"../../enums/DropOffType\"));\nconst PickupType_1 = __importDefault(require(\"../../enums/PickupType\"));\nconst ReachableStopsFinderMode_1 = __importDefault(require(\"../../enums/ReachableStopsFinderMode\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../../enums/ReachableStopsSearchPhase\"));\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst ConnectionSelectors_1 = require(\"../../fetcher/connections/ConnectionSelectors\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst MergeIterator_1 = __importDefault(require(\"../../util/iterators/MergeIterator\"));\nconst Vectors_1 = __importDefault(require(\"../../util/Vectors\"));\nconst Profile_1 = __importDefault(require(\"./CSA/data-structure/stops/Profile\"));\nconst EarliestArrivalByTransfers_1 = __importDefault(require(\"./CSA/data-structure/trips/EarliestArrivalByTransfers\"));\nconst FootpathQueue_1 = __importDefault(require(\"./CSA/FootpathQueue\"));\nconst ProfileUtil_1 = __importDefault(require(\"./CSA/util/ProfileUtil\"));\n/**\n * An implementation of the Profile Connection Scan Algorithm.\n * The profile connection scan algorithm takes the amount of transfers and initial, transfer and final footpaths\n * into account.\n *\n * @implements [[IPublicTransportPlanner]]\n * @property profilesByStop Describes the CSA profiles for each scanned stop.\n * @property earliestArrivalByTrip Describes the earliest arrival time for each scanned trip.\n * @property durationToTargetByStop Describes the walking duration to the target stop for a scanned stop.\n * @property gtfsTripByConnection Stores the tripIDs a connection is part of. Used for splitting and joining.\n *\n * @returns multiple [[IPath]]s that consist of several [[IStep]]s.\n */\nlet CSAProfile = class CSAProfile {\n    constructor(connectionsProvider, locationResolver, initialReachableStopsFinder, transferReachableStopsFinder, finalReachableStopsFinder, journeyExtractor) {\n        this.connectionsProvider = connectionsProvider;\n        this.locationResolver = locationResolver;\n        this.initialReachableStopsFinder = initialReachableStopsFinder;\n        this.transferReachableStopsFinder = transferReachableStopsFinder;\n        this.finalReachableStopsFinder = finalReachableStopsFinder;\n        this.journeyExtractor = journeyExtractor;\n        this.eventBus = EventBus_1.default.getInstance();\n    }\n    async plan(query) {\n        const { minimumDepartureTime: lowerBoundDate, maximumArrivalTime: upperBoundDate, } = query;\n        const footpathQueue = new FootpathQueue_1.default(true);\n        const connectionsIterator = await this.connectionsProvider.createIterator({\n            backward: true,\n            upperBoundDate,\n            lowerBoundDate,\n            excludedModes: query.excludedTravelModes,\n            region: null,\n        });\n        const mergedIterator = new MergeIterator_1.default([connectionsIterator, footpathQueue], ConnectionSelectors_1.backwardsConnectionsSelector, true);\n        const queryState = {\n            query,\n            profilesByStop: {},\n            earliestArrivalByTrip: {},\n            durationToTargetByStop: {},\n            gtfsTripByConnection: {},\n            initialReachableStops: [],\n            footpathQueue,\n            connectionsIterator: mergedIterator,\n        };\n        const hasInitialReachableStops = await this.initDurationToTargetByStop(queryState);\n        const hasFinalReachableStops = await this.initInitialReachableStops(queryState);\n        if (!hasInitialReachableStops || !hasFinalReachableStops) {\n            return Promise.resolve(new asynciterator_1.ArrayIterator([]));\n        }\n        const self = this;\n        return new Promise((resolve, reject) => {\n            let isDone = false;\n            const done = () => {\n                if (!isDone) {\n                    queryState.connectionsIterator.close();\n                    self.journeyExtractor.extractJourneys(queryState.profilesByStop, queryState.query)\n                        .then((resultIterator) => {\n                        resolve(resultIterator);\n                    });\n                    isDone = true;\n                }\n            };\n            queryState.connectionsIterator.on(\"readable\", () => self.processNextConnection(queryState, done));\n            connectionsIterator.on(\"end\", () => done());\n            self.processNextConnection(queryState, done);\n        });\n    }\n    async processNextConnection(queryState, done) {\n        let connection = queryState.connectionsIterator.read();\n        while (connection) {\n            if (connection.departureTime < queryState.query.minimumDepartureTime) {\n                queryState.connectionsIterator.close();\n                done();\n                break;\n            }\n            if (connection.arrivalTime > queryState.query.maximumArrivalTime && !queryState.connectionsIterator.closed) {\n                connection = queryState.connectionsIterator.read();\n                continue;\n            }\n            if (this.eventBus) {\n                this.eventBus.emit(EventType_1.default.ConnectionScan, connection);\n            }\n            this.discoverConnection(queryState, connection);\n            const earliestArrivalTime = this.calculateEarliestArrivalTime(queryState, connection);\n            this.updateEarliestArrivalByTrip(queryState, connection, earliestArrivalTime);\n            if (!this.isDominated(queryState, connection, earliestArrivalTime) &&\n                this.hasValidRoute(queryState, earliestArrivalTime, connection.departureTime.getTime())) {\n                await this.getFootpathsForDepartureStop(queryState, connection, earliestArrivalTime);\n            }\n            if (!queryState.connectionsIterator.closed) {\n                connection = queryState.connectionsIterator.read();\n                continue;\n            }\n            connection = undefined;\n        }\n    }\n    hasValidRoute(queryState, arrivalTimeByTransfers, departureTime) {\n        if (!queryState.query.maximumTravelDuration) {\n            return true;\n        }\n        for (const arrival of arrivalTimeByTransfers) {\n            const isValid = arrival.arrivalTime - departureTime <= queryState.query.maximumTravelDuration;\n            if (isValid) {\n                return true;\n            }\n        }\n        return false;\n    }\n    discoverConnection(queryState, connection) {\n        queryState.gtfsTripByConnection[connection.id] = connection.tripId;\n        if (!queryState.profilesByStop[connection.departureStop]) {\n            queryState.profilesByStop[connection.departureStop] = [Profile_1.default.create(queryState.query.maximumTransfers)];\n        }\n        if (!queryState.profilesByStop[connection.arrivalStop]) {\n            queryState.profilesByStop[connection.arrivalStop] = [Profile_1.default.create(queryState.query.maximumTransfers)];\n        }\n        if (!queryState.earliestArrivalByTrip[connection.tripId]) {\n            queryState.earliestArrivalByTrip[connection.tripId] = EarliestArrivalByTransfers_1.default.create(queryState.query.maximumTransfers);\n        }\n    }\n    getTripIdsFromConnection(queryState, connection) {\n        const tripIds = [connection.tripId];\n        return tripIds;\n        /*\n        // nextConnection isn't useable yet\n        if (!connection.nextConnection) {\n          return tripIds;\n        }\n    \n        for (const connectionId of connection.nextConnection) {\n          const tripId: string = queryState.gtfsTripByConnection[connectionId];\n    \n          if (tripIds.indexOf(tripId) === -1 && tripId) {\n            tripIds.push(tripId);\n          }\n        }\n    \n        return tripIds;\n        */\n    }\n    calculateEarliestArrivalTime(queryState, connection) {\n        const remainSeatedTime = this.remainSeated(queryState, connection);\n        if (connection.dropOffType === DropOffType_1.default.NotAvailable) {\n            return remainSeatedTime;\n        }\n        const walkToTargetTime = this.walkToTarget(queryState, connection);\n        const takeTransferTime = this.takeTransfer(queryState, connection);\n        return Vectors_1.default.minVector((c) => c.arrivalTime, walkToTargetTime, remainSeatedTime, takeTransferTime);\n    }\n    async initDurationToTargetByStop(queryState) {\n        const arrivalStop = queryState.query.to[0];\n        const geoId = Geo_1.default.getId(queryState.query.to[0]);\n        if (!queryState.query.to[0].id) {\n            queryState.query.to[0].id = geoId;\n            queryState.query.to[0].name = \"Arrival location\";\n        }\n        const reachableStops = await this.finalReachableStopsFinder\n            .findReachableStops(arrivalStop, ReachableStopsFinderMode_1.default.Target, queryState.query.maximumWalkingDuration, queryState.query.minimumWalkingSpeed, queryState.query.profileID);\n        if (reachableStops.length < 1) {\n            if (this.eventBus) {\n                this.eventBus.emit(EventType_1.default.AbortQuery, \"No reachable stops at arrival location\");\n            }\n            return false;\n        }\n        if (this.eventBus) {\n            this.eventBus.emit(EventType_1.default.FinalReachableStops, reachableStops);\n        }\n        for (const reachableStop of reachableStops) {\n            if (reachableStop.duration === 0) {\n                queryState.query.to[0] = reachableStop.stop; // fixme: why is this here?\n            }\n            queryState.durationToTargetByStop[reachableStop.stop.id] = reachableStop.duration;\n        }\n        return true;\n    }\n    async initInitialReachableStops(queryState) {\n        const fromLocation = queryState.query.from[0];\n        const geoId = Geo_1.default.getId(queryState.query.from[0]);\n        if (!queryState.query.from[0].id) {\n            queryState.query.from[0].id = geoId;\n            queryState.query.from[0].name = \"Departure location\";\n        }\n        queryState.initialReachableStops = await this.initialReachableStopsFinder.findReachableStops(fromLocation, ReachableStopsFinderMode_1.default.Source, queryState.query.maximumWalkingDuration, queryState.query.minimumWalkingSpeed, queryState.query.profileID);\n        for (const reachableStop of queryState.initialReachableStops) {\n            if (reachableStop.duration === 0) {\n                // this.query.from[0] = reachableStop.stop; // wat\n            }\n        }\n        if (queryState.initialReachableStops.length < 1) {\n            if (this.eventBus) {\n                this.eventBus.emit(EventType_1.default.AbortQuery, \"No reachable stops at departure location\");\n            }\n            return false;\n        }\n        if (this.eventBus) {\n            this.eventBus.emit(EventType_1.default.InitialReachableStops, queryState.initialReachableStops);\n        }\n        return true;\n    }\n    walkToTarget(queryState, connection) {\n        const walkingTimeToTarget = queryState.durationToTargetByStop[connection.arrivalStop];\n        if (walkingTimeToTarget === undefined || connection.dropOffType === DropOffType_1.default.NotAvailable ||\n            connection.arrivalTime.getTime() + walkingTimeToTarget > queryState.query.maximumArrivalTime.getTime()) {\n            return Array(queryState.query.maximumTransfers + 1).fill({\n                arrivalTime: Infinity,\n                tripId: connection.tripId,\n            });\n        }\n        return Array(queryState.query.maximumTransfers + 1).fill({\n            arrivalTime: connection.arrivalTime.getTime() + walkingTimeToTarget,\n            tripId: connection.tripId,\n        });\n    }\n    remainSeated(queryState, connection) {\n        const tripIds = this.getTripIdsFromConnection(queryState, connection);\n        const earliestArrivalTimeByTransfers = [];\n        for (let amountOfTransfers = 0; amountOfTransfers < queryState.query.maximumTransfers + 1; amountOfTransfers++) {\n            const earliestArrivalTime = earliestArrivalTimeByTransfers[amountOfTransfers];\n            let minimumArrivalTime = earliestArrivalTime && earliestArrivalTime.arrivalTime;\n            for (const tripId of tripIds) {\n                const tripArrivalTime = queryState.earliestArrivalByTrip[tripId][amountOfTransfers].arrivalTime;\n                if (!minimumArrivalTime || tripArrivalTime < minimumArrivalTime) {\n                    earliestArrivalTimeByTransfers[amountOfTransfers] = {\n                        arrivalTime: tripArrivalTime,\n                        tripId,\n                    };\n                    minimumArrivalTime = tripArrivalTime;\n                }\n            }\n        }\n        return earliestArrivalTimeByTransfers;\n    }\n    takeTransfer(queryState, connection) {\n        const transferTimes = ProfileUtil_1.default.getTransferTimes(queryState.profilesByStop, connection, queryState.query.maximumTransfers, queryState.query.minimumTransferDuration, queryState.query.maximumTransferDuration);\n        if (connection.travelMode !== TravelMode_1.default.Walking) {\n            // still part of the previous transfer\n            return Vectors_1.default.shiftVector(transferTimes, { arrivalTime: Infinity, tripId: connection.tripId });\n        }\n        else {\n            return transferTimes;\n        }\n    }\n    updateEarliestArrivalByTrip(queryState, connection, arrivalTimeByTransfers) {\n        const tripIds = this.getTripIdsFromConnection(queryState, connection);\n        const earliestArrivalByTransfers = arrivalTimeByTransfers.map((arrivalTime, amountOfTransfers) => {\n            const tripId = arrivalTime.tripId;\n            return queryState.earliestArrivalByTrip[tripId][amountOfTransfers];\n        });\n        for (const tripId of tripIds) {\n            queryState.earliestArrivalByTrip[tripId] = EarliestArrivalByTransfers_1.default.createByConnection(earliestArrivalByTransfers, connection, arrivalTimeByTransfers);\n        }\n    }\n    isDominated(queryState, connection, arrivalTimeByTransfers) {\n        const departureProfile = queryState.profilesByStop[connection.departureStop];\n        const earliestProfileEntry = departureProfile[departureProfile.length - 1];\n        return earliestProfileEntry.isDominated(arrivalTimeByTransfers, connection.departureTime.getTime());\n    }\n    async getFootpathsForDepartureStop(queryState, connection, currentArrivalTimeByTransfers) {\n        const departureLocation = queryState.query.from[0];\n        const depProfile = queryState.profilesByStop[connection.departureStop];\n        const earliestProfileEntry = depProfile[depProfile.length - 1];\n        const earliestArrivalTimeByTransfers = Vectors_1.default.minVector((c) => c.arrivalTime, currentArrivalTimeByTransfers, earliestProfileEntry.getArrivalTimeByTransfers());\n        const initialReachableStop = queryState.initialReachableStops.find((reachable) => reachable.stop.id === connection.departureStop);\n        if (initialReachableStop) {\n            this.incorporateInProfile(queryState, connection, initialReachableStop.duration, departureLocation, earliestArrivalTimeByTransfers);\n        }\n        try {\n            const departureStop = await this.locationResolver.resolve(connection.departureStop);\n            const reachableStops = await this.transferReachableStopsFinder.findReachableStops(departureStop, ReachableStopsFinderMode_1.default.Target, queryState.query.maximumTransferDuration, queryState.query.minimumWalkingSpeed, queryState.query.profileID);\n            const changed = this.incorporateInProfile(queryState, connection, 0, departureStop, earliestArrivalTimeByTransfers);\n            if (changed) {\n                for (const reachableStop of reachableStops) {\n                    const { stop: stop, duration: duration } = reachableStop;\n                    if (duration && stop.id) {\n                        const newDepartureTime = new Date(connection.departureTime.getTime() - duration);\n                        if (newDepartureTime >= queryState.query.minimumDepartureTime) {\n                            // create a connection that resembles a footpath\n                            // TODO, ditch the IReachbleStop and IConnection interfaces and make these proper objects\n                            const transferConnection = {\n                                id: `TRANSFER_TO:${stop.id}`,\n                                tripId: `TRANSFER_TO:${stop.id}`,\n                                travelMode: TravelMode_1.default.Walking,\n                                departureTime: newDepartureTime,\n                                departureStop: stop.id,\n                                arrivalTime: connection.departureTime,\n                                arrivalStop: connection.departureStop,\n                                dropOffType: DropOffType_1.default.Regular,\n                                pickupType: PickupType_1.default.Regular,\n                                headsign: stop.id,\n                            };\n                            queryState.footpathQueue.write(transferConnection);\n                        }\n                    }\n                }\n            }\n        }\n        catch (e) {\n            if (this.eventBus) {\n                this.eventBus.emit(EventType_1.default.Warning, (e));\n            }\n        }\n    }\n    async emitTransferProfile(transferProfile, amountOfTransfers) {\n        try {\n            const departureStop = await this.locationResolver.resolve(transferProfile.enterConnection.departureStop);\n            const arrivalStop = await this.locationResolver.resolve(transferProfile.exitConnection.arrivalStop);\n            this.eventBus.emit(EventType_1.default.AddedNewTransferProfile, {\n                departureStop,\n                arrivalStop,\n                amountOfTransfers,\n            });\n        }\n        catch (e) {\n            this.eventBus.emit(EventType_1.default.Warning, (e));\n        }\n    }\n    incorporateInProfile(queryState, connection, duration, stop, arrivalTimeByTransfers) {\n        const departureTime = connection.departureTime.getTime() - duration;\n        const hasValidRoute = this.hasValidRoute(queryState, arrivalTimeByTransfers, departureTime);\n        if (departureTime < queryState.query.minimumDepartureTime.getTime() || !hasValidRoute) {\n            return;\n        }\n        let profilesByDepartureStop = queryState.profilesByStop[stop.id];\n        if (!profilesByDepartureStop) {\n            profilesByDepartureStop =\n                queryState.profilesByStop[stop.id] =\n                    [Profile_1.default.create(queryState.query.maximumTransfers)];\n        }\n        const earliestDepTimeProfile = profilesByDepartureStop[profilesByDepartureStop.length - 1];\n        // If arrival times for all numbers of legs are equal to the earliest entry, this\n        // entry is redundant\n        let useful = false;\n        if (!earliestDepTimeProfile.isDominated(arrivalTimeByTransfers, departureTime)) {\n            useful = true;\n            const currentTransferProfiles = earliestDepTimeProfile.transferProfiles;\n            const transferProfiles = [];\n            for (let amountOfTransfers = 0; amountOfTransfers < currentTransferProfiles.length; amountOfTransfers++) {\n                const transferProfile = currentTransferProfiles[amountOfTransfers];\n                const newTransferProfile = {\n                    exitConnection: undefined,\n                    enterConnection: undefined,\n                    arrivalTime: Infinity,\n                    departureTime: Infinity,\n                };\n                const possibleExitConnection = queryState.earliestArrivalByTrip[connection.tripId][amountOfTransfers].connection || connection;\n                if (arrivalTimeByTransfers[amountOfTransfers].arrivalTime < transferProfile.arrivalTime &&\n                    connection.pickupType !== PickupType_1.default.NotAvailable &&\n                    possibleExitConnection.dropOffType !== DropOffType_1.default.NotAvailable) {\n                    newTransferProfile.enterConnection = connection;\n                    newTransferProfile.exitConnection = possibleExitConnection;\n                    newTransferProfile.departureTime = departureTime;\n                    if (this.eventBus && this.eventBus.listenerCount(EventType_1.default.AddedNewTransferProfile) > 0) {\n                        this.emitTransferProfile(newTransferProfile, amountOfTransfers);\n                    }\n                }\n                else {\n                    newTransferProfile.enterConnection = transferProfile.enterConnection;\n                    newTransferProfile.exitConnection = transferProfile.exitConnection;\n                    newTransferProfile.departureTime = transferProfile.departureTime;\n                }\n                if (newTransferProfile.exitConnection && newTransferProfile.enterConnection) {\n                    newTransferProfile.arrivalTime = arrivalTimeByTransfers[amountOfTransfers].arrivalTime;\n                }\n                transferProfiles.push(newTransferProfile);\n            }\n            const profileIsValid = transferProfiles.reduce((memo, { arrivalTime }) => memo || (arrivalTime && arrivalTime !== Infinity), false);\n            if (!profileIsValid) {\n                return false;\n            }\n            const newProfile = Profile_1.default.createFromTransfers(departureTime, transferProfiles);\n            let profileIndex = profilesByDepartureStop.length - 1;\n            let earliestProfile = profilesByDepartureStop[profileIndex];\n            if (earliestProfile.departureTime === Infinity) {\n                profilesByDepartureStop[profileIndex] = newProfile;\n            }\n            else {\n                while (profileIndex > 0 && earliestProfile.departureTime < departureTime) {\n                    profilesByDepartureStop[profileIndex + 1] = earliestProfile;\n                    profileIndex--;\n                    earliestProfile = profilesByDepartureStop[profileIndex];\n                }\n                profilesByDepartureStop[profileIndex + 1] = newProfile;\n            }\n            return useful;\n        }\n    }\n};\nCSAProfile = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.ConnectionsProvider)),\n    __param(1, inversify_1.inject(types_1.default.LocationResolver)),\n    __param(2, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(2, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial)),\n    __param(3, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(3, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer)),\n    __param(4, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(4, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Final)),\n    __param(5, inversify_1.inject(types_1.default.JourneyExtractor)),\n    __metadata(\"design:paramtypes\", [Object, Object, Object, Object, Object, Object])\n], CSAProfile);\nexports.default = CSAProfile;\n//# sourceMappingURL=CSAProfile.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Helper class for vectors.\n */\nclass Vectors {\n    static shiftVector(vector, item) {\n        vector.unshift(item);\n        vector.pop();\n        return vector;\n    }\n    static minVector(keyExtractor, ...vectors) {\n        if (!vectors || !vectors[0]) {\n            return;\n        }\n        const resultVector = vectors[0];\n        for (let index = 0; index < vectors[0].length && vectors.length > 1; index++) {\n            let currentMinimum = keyExtractor(resultVector[index]);\n            for (let vectorIndex = 1; vectorIndex < vectors.length; vectorIndex++) {\n                const vector = vectors[vectorIndex];\n                const key = keyExtractor(vector[index]);\n                if (key < currentMinimum) {\n                    resultVector[index] = vector[index];\n                    currentMinimum = key;\n                }\n            }\n        }\n        return resultVector;\n    }\n}\nexports.default = Vectors;\n//# sourceMappingURL=Vectors.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A factory that create's an [[IProfile]] based on the maximum amount of transfers and/or [[ITransferProfile]]s.\n *\n * @implements [[IProfile]]\n */\nclass Profile {\n    constructor(amountOfTransfers, departureTime, transferProfiles) {\n        this.departureTime = departureTime || Infinity;\n        if (transferProfiles) {\n            this.transferProfiles = transferProfiles;\n        }\n        else {\n            this.transferProfiles = Array(amountOfTransfers + 1).fill({\n                exitConnection: undefined,\n                enterConnection: undefined,\n                arrivalTime: Infinity,\n            });\n        }\n    }\n    static create(amountOfTransfers) {\n        return new Profile(amountOfTransfers);\n    }\n    static createFromTransfers(departureTime, transferProfiles) {\n        return new Profile(transferProfiles.length, departureTime, transferProfiles);\n    }\n    isDominated(arrivalTimeByTransfers, departureTime) {\n        return this.transferProfiles.reduce((memo, transferProfile, amountOfTransfers) => memo && transferProfile.arrivalTime <= arrivalTimeByTransfers[amountOfTransfers].arrivalTime &&\n            (!transferProfile.departureTime || transferProfile.departureTime >= departureTime), true);\n    }\n    getArrivalTimeByTransfers(tripId) {\n        return this.transferProfiles.map((transfer) => ({\n            arrivalTime: transfer.arrivalTime,\n            tripId,\n        }));\n    }\n}\nexports.default = Profile;\n//# sourceMappingURL=Profile.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * A factory that create's an [[IEarliestArrival]] for each amount of maximum transfers that can be made.\n *\n * @implements [[IEarliestArrivalByTransfers]]\n */\nclass EarliestArrivalByTransfers extends Array {\n    static create(amountOfTransfers) {\n        return new EarliestArrivalByTransfers(amountOfTransfers);\n    }\n    static createByConnection(currentArrivalTimeByTransfers, connection, arrivalTimeByTransfers) {\n        return currentArrivalTimeByTransfers.map((earliestArrival, transfer) => {\n            if (arrivalTimeByTransfers[transfer].arrivalTime < earliestArrival.arrivalTime) {\n                return {\n                    connection,\n                    arrivalTime: arrivalTimeByTransfers[transfer].arrivalTime,\n                };\n            }\n            return earliestArrival;\n        });\n    }\n    constructor(maximumTransfers) {\n        super();\n        for (let amountOfTransfers = 0; amountOfTransfers < maximumTransfers + 1; amountOfTransfers++) {\n            this[amountOfTransfers] = {\n                arrivalTime: Infinity,\n                connection: undefined,\n            };\n        }\n    }\n}\nexports.default = EarliestArrivalByTransfers;\n//# sourceMappingURL=EarliestArrivalByTransfers.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst Units_1 = __importDefault(require(\"../../util/Units\"));\n/**\n * This [[IReachableStopsFinder]] determines its reachable stops based on the birds's-eye distance\n * to the source or target stop.\n */\nlet ReachableStopsFinderBirdsEye = class ReachableStopsFinderBirdsEye {\n    constructor(stopsProvider) {\n        this.stopsProvider = stopsProvider;\n    }\n    async findReachableStops(sourceOrTargetStop, mode, maximumDuration, minimumSpeed) {\n        // Mode can be ignored since birds eye view distance is identical\n        const reachableStops = [{ stop: sourceOrTargetStop, duration: 0 }];\n        const allStops = await this.stopsProvider.getAllStops();\n        allStops.forEach((possibleTarget) => {\n            if (Math.abs(sourceOrTargetStop.latitude - possibleTarget.latitude) < 0.05 &&\n                Math.abs(sourceOrTargetStop.longitude - possibleTarget.longitude) < 0.05) {\n                const distance = Geo_1.default.getDistanceBetweenStops(sourceOrTargetStop, possibleTarget);\n                const duration = Units_1.default.toDuration(distance, minimumSpeed);\n                if (duration >= 0 && duration <= maximumDuration) {\n                    reachableStops.push({ stop: possibleTarget, duration });\n                }\n            }\n        });\n        return reachableStops;\n    }\n};\nReachableStopsFinderBirdsEye = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.StopsProvider)),\n    __metadata(\"design:paramtypes\", [Object])\n], ReachableStopsFinderBirdsEye);\nexports.default = ReachableStopsFinderBirdsEye;\n//# sourceMappingURL=ReachableStopsFinderBirdsEye.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst CatalogFetcherDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogFetcherDefault\"));\nconst CatalogProviderDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogProviderDefault\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherRaw_1 = __importDefault(require(\"../fetcher/stops/StopsFetcherRaw\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderDefault\"));\nconst HypermediaTreeFetcherDefault_1 = __importDefault(require(\"../fetcher/tree/HypermediaTreeFetcherDefault\"));\nconst HypermediaTreeProviderDefault_1 = __importDefault(require(\"../fetcher/tree/HypermediaTreeProviderDefault\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst BidirDijkstra_1 = require(\"../pathfinding/bidirdijkstra/BidirDijkstra\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAEarliestArrival_1 = __importDefault(require(\"../planner/public-transport/CSAEarliestArrival\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfinding_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfinding\"));\nconst ReachableStopsFinderBirdsEyeCached_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderBirdsEyeCached\"));\nconst ReachableStopsFinderDelaunay_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderDelaunay\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst QueryRunnerDefault_1 = __importDefault(require(\"../query-runner/QueryRunnerDefault\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerDefault_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAEarliestArrival_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner)\n    .to(RoadPlannerPathfinding_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.HypermediaTreeFetcher).to(HypermediaTreeFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.HypermediaTreeProvider)\n    .to(HypermediaTreeProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(BidirDijkstra_1.BidirDijkstra).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderBirdsEyeCached_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.CatalogFetcher).to(CatalogFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogProvider).to(CatalogProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherRaw_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=flexible_transit.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst CatalogFetcherDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogFetcherDefault\"));\nconst CatalogProviderDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogProviderDefault\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherRaw_1 = __importDefault(require(\"../fetcher/stops/StopsFetcherRaw\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderDefault\"));\nconst HypermediaTreeFetcherDefault_1 = __importDefault(require(\"../fetcher/tree/HypermediaTreeFetcherDefault\"));\nconst HypermediaTreeProviderDefault_1 = __importDefault(require(\"../fetcher/tree/HypermediaTreeProviderDefault\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst BidirDijkstra_1 = require(\"../pathfinding/bidirdijkstra/BidirDijkstra\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAEarliestArrivalDynamic_1 = __importDefault(require(\"../planner/public-transport/CSAEarliestArrivalDynamic\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfinding_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfinding\"));\nconst ReachableStopsFinderBirdsEyeCached_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderBirdsEyeCached\"));\nconst ReachableStopsFinderOnlySelf_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderOnlySelf\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst QueryRunnerDefault_1 = __importDefault(require(\"../query-runner/QueryRunnerDefault\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst FootpathsProviderRaw_1 = __importDefault(require(\"../fetcher/footpaths/FootpathsProviderRaw\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerDefault_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.HypermediaTreeFetcher).to(HypermediaTreeFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.HypermediaTreeProvider)\n    .to(HypermediaTreeProviderDefault_1.default).inSingletonScope();\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAEarliestArrivalDynamic_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner)\n    .to(RoadPlannerPathfinding_1.default);\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(BidirDijkstra_1.BidirDijkstra).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.FootpathsProvider).to(FootpathsProviderRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderOnlySelf_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderBirdsEyeCached_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderOnlySelf_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.CatalogFetcher).to(CatalogFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogProvider).to(CatalogProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherRaw_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=geospatial_fragment.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst inversify_1 = require(\"inversify\");\nconst DropOffType_1 = __importDefault(require(\"../../enums/DropOffType\"));\nconst PickupType_1 = __importDefault(require(\"../../enums/PickupType\"));\nconst ReachableStopsFinderMode_1 = __importDefault(require(\"../../enums/ReachableStopsFinderMode\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../../enums/ReachableStopsSearchPhase\"));\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst ConnectionSelectors_1 = require(\"../../fetcher/connections/ConnectionSelectors\");\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst MergeIterator_1 = __importDefault(require(\"../../util/iterators/MergeIterator\"));\nconst FootpathQueue_1 = __importDefault(require(\"./CSA/FootpathQueue\"));\nconst JourneyExtractorEarliestArrival_1 = __importDefault(require(\"./JourneyExtractorEarliestArrival\"));\n// Implementation is as close as possible to the original paper: https://arxiv.org/pdf/1703.05997.pdf\nlet CSAEarliestArrivalDynamic = class CSAEarliestArrivalDynamic {\n    constructor(connectionsProvider, locationResolver, transferReachableStopsFinder, initialReachableStopsFinder, finalReachableStopsFinder, treeProvider, stopsProvider) {\n        this.reachedClusters = new Set();\n        this.treeProvider = treeProvider;\n        this.connectionsProvider = connectionsProvider;\n        this.locationResolver = locationResolver;\n        this.transferReachableStopsFinder = transferReachableStopsFinder;\n        this.initialReachableStopsFinder = initialReachableStopsFinder;\n        this.finalReachableStopsFinder = finalReachableStopsFinder;\n        this.eventBus = EventBus_1.default.getInstance();\n        this.journeyExtractor = new JourneyExtractorEarliestArrival_1.default(locationResolver);\n        this.stopsProvider = stopsProvider;\n    }\n    async plan(query) {\n        const { minimumDepartureTime: lowerBoundDate, maximumArrivalTime: upperBoundDate, } = query;\n        const trees = await this.treeProvider.getAllTrees();\n        const clusterStops = await this.clusterStops(trees);\n        const startLocation = clusterStops[Geo_1.default.getId(query.from[0])];\n        this.reachedClusters.add(startLocation.id);\n        const footpathsQueue = new FootpathQueue_1.default();\n        const connectionsIterator = await this.connectionsProvider.createIterator({\n            upperBoundDate,\n            lowerBoundDate,\n            excludedModes: query.excludedTravelModes,\n            region: startLocation,\n        });\n        const mergedQueue = new MergeIterator_1.default([connectionsIterator, footpathsQueue], ConnectionSelectors_1.forwardsConnectionSelector, true);\n        const queryState = {\n            finalReachableStops: {},\n            profilesByStop: {},\n            enterConnectionByTrip: {},\n            footpathsQueue,\n            connectionsIterator,\n            clusterStops,\n            mergedQueue,\n            lowerBoundDate,\n        };\n        const [hasInitialReachableStops, hasFinalReachableStops] = await Promise.all([\n            this.initInitialReachableStops(queryState, query),\n            this.initFinalReachableStops(queryState, query),\n        ]);\n        if (!hasInitialReachableStops || !hasFinalReachableStops) {\n            return Promise.resolve(new asynciterator_1.ArrayIterator([]));\n        }\n        const self = this;\n        return new Promise((resolve, reject) => {\n            let isDone = false;\n            const done = () => {\n                if (!isDone) {\n                    mergedQueue.close();\n                    self.extractJourneys(queryState, query)\n                        .then((resultIterator) => {\n                        resolve(resultIterator);\n                    });\n                    isDone = true;\n                }\n            };\n            connectionsIterator.on(\"readable\", () => self.processConnections(queryState, query, done));\n            connectionsIterator.on(\"end\", () => done());\n            // iterator may have become readable before the listener was attached\n            self.processConnections(queryState, query, done);\n        });\n    }\n    async clusterStops(trees) {\n        const stops = await this.stopsProvider.getAllStops();\n        const result = {};\n        for (const stop of stops) {\n            const cluster = this.placeLocation(stop, trees);\n            result[Geo_1.default.getId(stop)] = cluster;\n        }\n        return result;\n    }\n    placeLocation(location, trees) {\n        for (const tree of trees) {\n            for (const relation of tree.relations) {\n                if (relation.geoValue.contains(location)) {\n                    return relation.geoValue;\n                }\n            }\n        }\n    }\n    async updateProfile(state, query, connection) {\n        /*\n        Call this ONLY if the given connection is known to improve the arrival stop's profile\n        */\n        const tripId = connection.tripId;\n        const departureTime = connection.departureTime.getTime();\n        const arrivalTime = connection.arrivalTime.getTime();\n        // update profile of arrival stop\n        const arrivalProfile = {\n            departureTime,\n            arrivalTime,\n            exitConnection: connection,\n            enterConnection: state.enterConnectionByTrip[tripId],\n        };\n        state.profilesByStop[connection.arrivalStop] = arrivalProfile;\n        const cluster = state.clusterStops[connection.arrivalStop];\n        if (cluster && !this.reachedClusters.has(cluster.id)) {\n            const { maximumArrivalTime: upperBoundDate, } = query;\n            // console.log(\"REACHED\", cluster.id);\n            this.reachedClusters.add(cluster.id);\n            const newConnectionIterator = await this.connectionsProvider.appendIterator({\n                upperBoundDate,\n                lowerBoundDate: connection.departureTime,\n                excludedModes: query.excludedTravelModes,\n                region: cluster,\n            }, state.connectionsIterator);\n            state.connectionsIterator = newConnectionIterator;\n            state.mergedQueue = new MergeIterator_1.default([newConnectionIterator, state.footpathsQueue], ConnectionSelectors_1.forwardsConnectionSelector, true);\n        }\n    }\n    async extractJourneys(state, query) {\n        return this.journeyExtractor.extractJourneys(state.profilesByStop, query);\n    }\n    async processConnections(state, query, resolve) {\n        const { from, to, minimumDepartureTime } = query;\n        const departureStopId = from[0].id;\n        const arrivalStopId = to[0].id;\n        let connection = state.mergedQueue.read();\n        while (connection && !state.connectionsIterator.closed) {\n            if (connection.departureTime < state.lowerBoundDate && !state.connectionsIterator.closed) {\n                // starting criterion\n                // skip connections before the minimum departure time\n                connection = state.mergedQueue.read();\n                continue;\n            }\n            state.lowerBoundDate = connection.departureTime;\n            // console.log(connection.id, connection.departureTime)\n            if (this.getProfile(state, arrivalStopId).arrivalTime < connection.departureTime.getTime()) {\n                // stopping criterion\n                // we cannot improve the tentative arrival time anymore\n                return resolve();\n            }\n            const tripId = connection.tripId;\n            const departureTime = connection.departureTime.getTime();\n            const canRemainSeated = state.enterConnectionByTrip[tripId];\n            const canTakeTransfer = ((connection.departureStop === departureStopId ||\n                this.getProfile(state, connection.departureStop).arrivalTime <= departureTime) &&\n                connection.pickupType !== PickupType_1.default.NotAvailable);\n            if (canRemainSeated || canTakeTransfer) {\n                // enterConnectionByTrip should point to the first reachable connection\n                if (!state.enterConnectionByTrip[tripId]) {\n                    state.enterConnectionByTrip[tripId] = connection;\n                }\n                // limited walking optimization\n                const canImprove = connection.arrivalTime.getTime() <\n                    this.getProfile(state, connection.arrivalStop).arrivalTime;\n                const canLeave = connection.dropOffType !== DropOffType_1.default.NotAvailable;\n                if (canLeave && canImprove) {\n                    this.updateProfile(state, query, connection);\n                    await this.scheduleExtraConnections(state, query, connection);\n                }\n            }\n            if (!state.connectionsIterator.closed) {\n                connection = state.mergedQueue.read();\n                continue;\n            }\n            connection = undefined;\n        }\n    }\n    getProfile(state, stopId) {\n        if (!state.profilesByStop[stopId]) {\n            state.profilesByStop[stopId] = {\n                departureTime: Infinity,\n                arrivalTime: Infinity,\n            };\n        }\n        return state.profilesByStop[stopId];\n    }\n    async scheduleExtraConnections(state, query, sourceConnection) {\n        try {\n            const arrivalStop = await this.locationResolver.resolve(sourceConnection.arrivalStop);\n            const reachableStops = await this.transferReachableStopsFinder.findReachableStops(arrivalStop, ReachableStopsFinderMode_1.default.Source, query.maximumTransferDuration, query.minimumWalkingSpeed, query.profileID);\n            if (state.finalReachableStops[arrivalStop.id]) {\n                reachableStops.push(state.finalReachableStops[arrivalStop.id]);\n            }\n            for (const reachableStop of reachableStops) {\n                const { stop: stop, duration: duration } = reachableStop;\n                if (duration && stop.id) {\n                    const transferTentativeArrival = this.getProfile(state, stop.id).arrivalTime;\n                    const newArrivalTime = new Date(sourceConnection.arrivalTime.getTime() + duration);\n                    if (transferTentativeArrival > newArrivalTime.getTime()\n                        && newArrivalTime <= query.maximumArrivalTime) {\n                        const tripId = `TRANSFER_TO:${sourceConnection.arrivalStop}@${sourceConnection.arrivalTime.getTime()}`;\n                        // create a connection that resembles a footpath\n                        // TODO, ditch the IReachbleStop and IConnection interfaces and make these proper objects\n                        const transferConnection = {\n                            id: `${tripId}-${stop.id}`,\n                            tripId,\n                            travelMode: TravelMode_1.default.Walking,\n                            departureTime: sourceConnection.arrivalTime,\n                            departureStop: sourceConnection.arrivalStop,\n                            arrivalTime: new Date(sourceConnection.arrivalTime.getTime() + duration),\n                            arrivalStop: stop.id,\n                            dropOffType: DropOffType_1.default.Regular,\n                            pickupType: PickupType_1.default.Regular,\n                            headsign: stop.id,\n                        };\n                        state.footpathsQueue.write(transferConnection);\n                    }\n                }\n            }\n        }\n        catch (e) {\n            if (this.eventBus) {\n                this.eventBus.emit(EventType_1.default.Warning, (e));\n            }\n        }\n    }\n    async initInitialReachableStops(state, query) {\n        const fromLocation = query.from[0];\n        // Making sure the departure location has an id\n        const geoId = Geo_1.default.getId(fromLocation);\n        if (!fromLocation.id) {\n            query.from[0].id = geoId;\n            query.from[0].name = \"Departure location\";\n        }\n        const reachableStops = await this.initialReachableStopsFinder.findReachableStops(fromLocation, ReachableStopsFinderMode_1.default.Source, query.maximumWalkingDuration, query.minimumWalkingSpeed, query.profileID);\n        // Abort when we can't reach a single stop.\n        if (reachableStops.length === 0) {\n            this.eventBus.emit(EventType_1.default.AbortQuery, \"No reachable stops at departure location\");\n            return false;\n        }\n        if (this.eventBus) {\n            this.eventBus.emit(EventType_1.default.InitialReachableStops, reachableStops);\n        }\n        for (const reachableStop of reachableStops) {\n            const { stop: stop, duration: duration } = reachableStop;\n            if (duration) {\n                // create a connection that resembles a footpath\n                // TODO, ditch the IReachbleStop and IConnection interfaces and make these proper objects\n                const transferConnection = {\n                    id: `MOVE_TO:${stop.id}`,\n                    tripId: `MOVE_TO:${stop.id}`,\n                    travelMode: TravelMode_1.default.Walking,\n                    departureTime: query.minimumDepartureTime,\n                    departureStop: fromLocation.id,\n                    arrivalTime: new Date(query.minimumDepartureTime.getTime() + duration),\n                    arrivalStop: stop.id,\n                    dropOffType: DropOffType_1.default.Regular,\n                    pickupType: PickupType_1.default.Regular,\n                    headsign: stop.id,\n                };\n                state.footpathsQueue.write(transferConnection);\n            }\n        }\n        return true;\n    }\n    async initFinalReachableStops(state, query) {\n        const toLocation = query.to[0];\n        // Making sure the departure location has an id\n        const geoId = Geo_1.default.getId(toLocation);\n        if (!toLocation.id) {\n            query.to[0].id = geoId;\n            query.to[0].name = \"Arrival location\";\n        }\n        const reachableStops = await this.finalReachableStopsFinder.findReachableStops(toLocation, ReachableStopsFinderMode_1.default.Target, query.maximumWalkingDuration, query.minimumWalkingSpeed, query.profileID);\n        // Abort when we can't reach a single stop.\n        if (reachableStops.length === 0) {\n            this.eventBus.emit(EventType_1.default.AbortQuery, \"No reachable stops at arrival location\");\n            return false;\n        }\n        if (this.eventBus) {\n            this.eventBus.emit(EventType_1.default.FinalReachableStops, reachableStops);\n        }\n        for (const reachableStop of reachableStops) {\n            if (reachableStop.duration > 0) {\n                state.finalReachableStops[reachableStop.stop.id] = {\n                    stop: toLocation,\n                    duration: reachableStop.duration,\n                };\n            }\n        }\n        return true;\n    }\n};\nCSAEarliestArrivalDynamic = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.ConnectionsProvider)),\n    __param(1, inversify_1.inject(types_1.default.LocationResolver)),\n    __param(2, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(2, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer)),\n    __param(3, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(3, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial)),\n    __param(4, inversify_1.inject(types_1.default.ReachableStopsFinder)),\n    __param(4, inversify_1.tagged(\"phase\", ReachableStopsSearchPhase_1.default.Final)),\n    __param(5, inversify_1.inject(types_1.default.HypermediaTreeProvider)),\n    __param(6, inversify_1.inject(types_1.default.StopsProvider)),\n    __metadata(\"design:paramtypes\", [Object, Object, Object, Object, Object, Object, Object])\n], CSAEarliestArrivalDynamic);\nexports.default = CSAEarliestArrivalDynamic;\n//# sourceMappingURL=CSAEarliestArrivalDynamic.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst CatalogFetcherDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogFetcherDefault\"));\nconst CatalogProviderDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogProviderDefault\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst FootpathsProviderDefault_1 = __importDefault(require(\"../fetcher/footpaths/FootpathsProviderDefault\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherRaw_1 = __importDefault(require(\"../fetcher/stops/StopsFetcherRaw\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderDefault\"));\nconst RoutableTileProviderTransit_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderTransit\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst Dijkstra_1 = require(\"../pathfinding/dijkstra/Dijkstra\");\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAEarliestArrival_1 = __importDefault(require(\"../planner/public-transport/CSAEarliestArrival\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfindingExperimental_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfindingExperimental\"));\nconst ReachableStopsFinderDelaunay_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderDelaunay\"));\nconst ReachableStopsFinderOnlySelf_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderOnlySelf\"));\nconst QueryRunnerExponential_1 = __importDefault(require(\"../query-runner/exponential/QueryRunnerExponential\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerExponential_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAEarliestArrival_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner)\n    .to(RoadPlannerPathfindingExperimental_1.default);\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(Dijkstra_1.Dijkstra).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.FootpathsProvider).to(FootpathsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderOnlySelf_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.CatalogFetcher).to(CatalogFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogProvider).to(CatalogProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherRaw_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderTransit_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=reduced_car.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst asynciterator_1 = require(\"asynciterator\");\nconst inversify_1 = require(\"inversify\");\nconst tiles_in_bbox_1 = __importDefault(require(\"tiles-in-bbox\"));\nconst RoutableTileRegistry_1 = __importDefault(require(\"../../entities/tiles/RoutableTileRegistry\"));\nconst TileCoordinate_1 = __importDefault(require(\"../../entities/tiles/TileCoordinate\"));\nconst RoutingPhase_1 = __importDefault(require(\"../../enums/RoutingPhase\"));\nconst TravelMode_1 = __importDefault(require(\"../../enums/TravelMode\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../../pathfinding/PathfinderProvider\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst Geo_1 = __importDefault(require(\"../../util/Geo\"));\nconst Tiles_1 = require(\"../../util/Tiles\");\nconst Leg_1 = __importDefault(require(\"../Leg\"));\nconst Path_1 = __importDefault(require(\"../Path\"));\nlet RoadPlannerPathfindingExperimental = class RoadPlannerPathfindingExperimental {\n    constructor(baseTileProvider, transitTileProvider, pathfinderProvider, profileProvider, locationResolver) {\n        this.baseTileProvider = baseTileProvider;\n        this.transitTileProvider = transitTileProvider;\n        this.pathfinderProvider = pathfinderProvider;\n        this.profileProvider = profileProvider;\n        this.locationResolver = locationResolver;\n        this.registry = RoutableTileRegistry_1.default.getInstance();\n        this.eventBus = EventBus_1.default.getInstance();\n        this.reachedTiles = new Set();\n    }\n    async plan(query) {\n        const { from: fromLocations, to: toLocations, profileID, } = query;\n        const paths = [];\n        const profile = await this.profileProvider.getProfile(profileID);\n        if (fromLocations && toLocations && fromLocations.length && toLocations.length) {\n            for (const from of fromLocations) {\n                for (const to of toLocations) {\n                    const newPath = await this.getPathBetweenLocations(from, to, profile);\n                    if (newPath) {\n                        paths.push(newPath);\n                    }\n                }\n            }\n        }\n        return new asynciterator_1.ArrayIterator(paths);\n    }\n    async getPathBetweenLocations(from, to, profile) {\n        this.localTiles = [\n            Tiles_1.toTileCoordinate(from.latitude, from.longitude),\n            Tiles_1.toTileCoordinate(to.latitude, to.longitude),\n        ];\n        await Promise.all([\n            this.embedLocation(from),\n            this.embedLocation(to, true),\n        ]);\n        return this._innerPath(from, to, profile);\n    }\n    async _innerPath(start, stop, profile) {\n        const pathfinder = await this.pathfinderProvider.getShortestPathAlgorithm(profile);\n        const maxDistance = Geo_1.default.getDistanceBetweenLocations(start, stop) * 5;\n        const path = await pathfinder.queryPath(Geo_1.default.getId(start), Geo_1.default.getId(stop), maxDistance);\n        const steps = [];\n        for (const step of path) {\n            const to = await this.locationResolver.resolve(step.to);\n            const from = await this.locationResolver.resolve(step.from);\n            steps.push({\n                startLocation: from,\n                stopLocation: to,\n                duration: { average: step.duration },\n                distance: step.distance,\n            });\n        }\n        const leg = new Leg_1.default(TravelMode_1.default.Profile, steps);\n        return new Path_1.default([leg]);\n    }\n    pickTile(node) {\n        let coordinate;\n        for (let zoom = 8; zoom < 15; zoom++) {\n            coordinate = Tiles_1.toTileCoordinate(node.latitude, node.longitude, zoom);\n            let ok = true;\n            for (const localTile of this.localTiles) {\n                if (coordinate.contains(localTile)) {\n                    ok = false;\n                    break;\n                }\n            }\n            if (ok) {\n                return coordinate;\n            }\n        }\n        return coordinate;\n    }\n    async fetchTile(coordinate) {\n        let local = false;\n        for (const localTile of this.localTiles) {\n            if (coordinate.x === localTile.x && coordinate.y === localTile.y && coordinate.zoom === localTile.zoom) {\n                local = true;\n                break;\n            }\n        }\n        const baseTileId = this.baseTileProvider.getIdForTileCoords(coordinate);\n        const transitTileId = this.transitTileProvider.getIdForTileCoords(coordinate);\n        if (!this.reachedTiles.has(transitTileId) && !this.reachedTiles.has(baseTileId)) {\n            this.eventBus.emit(EventType_1.default.ReachableTile, coordinate);\n            let tile;\n            if (local) {\n                tile = await this.baseTileProvider.getByTileCoords(coordinate);\n                this.reachedTiles.add(baseTileId);\n                this.reachedTiles.add(transitTileId);\n            }\n            else {\n                tile = await this.transitTileProvider.getByTileCoords(coordinate);\n                this.reachedTiles.add(transitTileId);\n            }\n            const boundaryNodes = new Set();\n            for (const nodeId of tile.getNodes()) {\n                const node = this.registry.getNode(nodeId);\n                if (!tile.contains(node)) {\n                    boundaryNodes.add(nodeId);\n                }\n            }\n            const self = this;\n            for (const profile of await this.profileProvider.getProfiles()) {\n                const graph = this.pathfinderProvider.getGraphForProfile(profile);\n                for (const nodeId of boundaryNodes) {\n                    graph.setBreakPoint(nodeId, async (on) => {\n                        const node = self.registry.getNode(on);\n                        const boundaryTileCoordinate = this.pickTile(node);\n                        await self.fetchTile(boundaryTileCoordinate);\n                    });\n                }\n            }\n        }\n    }\n    async embedLocation(from, invert = false) {\n        const zoom = 14;\n        const padding = 0.005;\n        const fromBBox = {\n            top: from.latitude + padding,\n            bottom: from.latitude - padding,\n            left: from.longitude - padding,\n            right: from.longitude + padding,\n        };\n        const fromTileCoords = tiles_in_bbox_1.default.tilesInBbox(fromBBox, zoom).map((obj) => {\n            const coordinate = new TileCoordinate_1.default(zoom, obj.x, obj.y);\n            this.fetchTile(coordinate);\n            return coordinate;\n        });\n        // this won't download anything new\n        // but we need the tile data to embed the starting location\n        const fromTileset = await this.baseTileProvider.getMultipleByTileCoords(fromTileCoords);\n        await this.pathfinderProvider.embedLocation(from, fromTileset, invert);\n    }\n};\nRoadPlannerPathfindingExperimental = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.RoutableTileProvider)),\n    __param(0, inversify_1.tagged(\"phase\", RoutingPhase_1.default.Base)),\n    __param(1, inversify_1.inject(types_1.default.RoutableTileProvider)),\n    __param(1, inversify_1.tagged(\"phase\", RoutingPhase_1.default.Transit)),\n    __param(2, inversify_1.inject(types_1.default.PathfinderProvider)),\n    __param(3, inversify_1.inject(types_1.default.ProfileProvider)),\n    __param(4, inversify_1.inject(types_1.default.LocationResolver)),\n    __metadata(\"design:paramtypes\", [Object, Object, PathfinderProvider_1.default, Object, Object])\n], RoadPlannerPathfindingExperimental);\nexports.default = RoadPlannerPathfindingExperimental;\n//# sourceMappingURL=RoadPlannerPathfindingExperimental.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst FootpathsProviderRaw_1 = __importDefault(require(\"../fetcher/footpaths/FootpathsProviderRaw\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherRaw_1 = __importDefault(require(\"../fetcher/stops/StopsFetcherRaw\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderDefault\"));\nconst RoutableTileProviderTransit_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileProviderTransit\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst MixedDijkstra_1 = __importDefault(require(\"../pathfinding/mixed-dijkstra/MixedDijkstra\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAEarliestArrival_1 = __importDefault(require(\"../planner/public-transport/CSAEarliestArrival\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfinding_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfinding\"));\nconst ReachableStopsFinderDelaunay_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderDelaunay\"));\nconst ReachableStopsFinderFootpathsVerbose_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderFootpathsVerbose\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst QueryRunnerDefault_1 = __importDefault(require(\"../query-runner/QueryRunnerDefault\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerDefault_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAEarliestArrival_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner)\n    .to(RoadPlannerPathfinding_1.default);\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(MixedDijkstra_1.default).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.FootpathsProvider).to(FootpathsProviderRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderFootpathsVerbose_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherRaw_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderDefault_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(RoutableTileProviderTransit_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=triangle_transit.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst ReachableStopsFinderFootpaths_1 = __importDefault(require(\"./ReachableStopsFinderFootpaths\"));\nlet ReachableStopsFinderFootpathsVerbose = class ReachableStopsFinderFootpathsVerbose extends ReachableStopsFinderFootpaths_1.default {\n    constructor(stopsProvider, footpathsProvider) {\n        super(stopsProvider, footpathsProvider);\n        this.done = new Set();\n    }\n    async findReachableStops(sourceOrTargetStop, mode, maximumDuration, minimumSpeed) {\n        const result = await super.findReachableStops(sourceOrTargetStop, mode, maximumDuration, minimumSpeed);\n        if (!this.done.has(sourceOrTargetStop.id)) {\n            this.done.add(sourceOrTargetStop.id);\n            for (const reachableStop of result) {\n                EventBus_1.default.getInstance().emit(EventType_1.default.ReachableTransfer, {\n                    from: sourceOrTargetStop,\n                    to: reachableStop.stop,\n                });\n            }\n        }\n        return result;\n    }\n};\nReachableStopsFinderFootpathsVerbose = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.StopsProvider)),\n    __param(1, inversify_1.inject(types_1.default.FootpathsProvider)),\n    __metadata(\"design:paramtypes\", [Object, Object])\n], ReachableStopsFinderFootpathsVerbose);\nexports.default = ReachableStopsFinderFootpathsVerbose;\n//# sourceMappingURL=ReachableStopsFinderFootpathsVerbose.js.map","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst inversify_1 = require(\"inversify\");\nconst Context_1 = __importDefault(require(\"../Context\"));\nconst ReachableStopsSearchPhase_1 = __importDefault(require(\"../enums/ReachableStopsSearchPhase\"));\nconst RoutingPhase_1 = __importDefault(require(\"../enums/RoutingPhase\"));\nconst CatalogFetcherDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogFetcherDefault\"));\nconst CatalogProviderDefault_1 = __importDefault(require(\"../fetcher/catalog/CatalogProviderDefault\"));\nconst ConnectionsFetcherRaw_1 = __importDefault(require(\"../fetcher/connections/ConnectionsFetcherRaw\"));\nconst ConnectionsProviderDefault_1 = __importDefault(require(\"../fetcher/connections/ConnectionsProviderDefault\"));\nconst FootpathsProviderDefault_1 = __importDefault(require(\"../fetcher/footpaths/FootpathsProviderDefault\"));\nconst HydraTemplateFetcherDefault_1 = __importDefault(require(\"../fetcher/hydra/HydraTemplateFetcherDefault\"));\nconst LDFetch_1 = __importDefault(require(\"../fetcher/LDFetch\"));\nconst ProfileFetcherDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileFetcherDefault\"));\nconst ProfileProviderDefault_1 = __importDefault(require(\"../fetcher/profiles/ProfileProviderDefault\"));\nconst StopsFetcherRaw_1 = __importDefault(require(\"../fetcher/stops/StopsFetcherRaw\"));\nconst StopsProviderDefault_1 = __importDefault(require(\"../fetcher/stops/StopsProviderDefault\"));\nconst CompositeTileProvider_1 = __importDefault(require(\"../fetcher/tiles/CompositeTileProvider\"));\nconst RoutableTileFetcherRaw_1 = __importDefault(require(\"../fetcher/tiles/RoutableTileFetcherRaw\"));\nconst ldloader_1 = require(\"../loader/ldloader\");\nconst DijkstraTree_1 = __importDefault(require(\"../pathfinding/dijkstra-tree/DijkstraTree\"));\nconst MixedDijkstra_1 = __importDefault(require(\"../pathfinding/mixed-dijkstra/MixedDijkstra\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../pathfinding/PathfinderProvider\"));\nconst CSAEarliestArrival_1 = __importDefault(require(\"../planner/public-transport/CSAEarliestArrival\"));\nconst JourneyExtractorProfile_1 = __importDefault(require(\"../planner/public-transport/JourneyExtractorProfile\"));\nconst RoadPlannerPathfinding_1 = __importDefault(require(\"../planner/road/RoadPlannerPathfinding\"));\nconst ReachableStopsFinderDelaunay_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderDelaunay\"));\nconst ReachableStopsFinderOnlySelf_1 = __importDefault(require(\"../planner/stops/ReachableStopsFinderOnlySelf\"));\nconst QueryRunnerExponential_1 = __importDefault(require(\"../query-runner/exponential/QueryRunnerExponential\"));\nconst LocationResolverConvenience_1 = __importDefault(require(\"../query-runner/LocationResolverConvenience\"));\nconst types_1 = __importDefault(require(\"../types\"));\nconst container = new inversify_1.Container();\ncontainer.bind(types_1.default.Context).to(Context_1.default).inSingletonScope();\ncontainer.bind(types_1.default.QueryRunner).to(QueryRunnerExponential_1.default);\ncontainer.bind(types_1.default.LocationResolver).to(LocationResolverConvenience_1.default);\ncontainer.bind(types_1.default.HydraTemplateFetcher).to(HydraTemplateFetcherDefault_1.default).inSingletonScope();\n// TODO, make this a fixed property of the planner itself\ncontainer.bind(types_1.default.JourneyExtractor)\n    .to(JourneyExtractorProfile_1.default);\ncontainer.bind(types_1.default.PublicTransportPlanner)\n    .to(CSAEarliestArrival_1.default);\ncontainer.bind(types_1.default.PublicTransportPlannerFactory)\n    .toAutoFactory(types_1.default.PublicTransportPlanner);\ncontainer.bind(types_1.default.RoadPlanner).to(RoadPlannerPathfinding_1.default);\ncontainer.bind(types_1.default.ShortestPathTreeAlgorithm).to(DijkstraTree_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ShortestPathAlgorithm).to(MixedDijkstra_1.default).inSingletonScope();\ncontainer.bind(types_1.default.PathfinderProvider).to(PathfinderProvider_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileFetcher).to(ProfileFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ProfileProvider).to(ProfileProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.FootpathsProvider).to(FootpathsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Initial);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderOnlySelf_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Transfer);\ncontainer.bind(types_1.default.ReachableStopsFinder)\n    .to(ReachableStopsFinderDelaunay_1.default).whenTargetTagged(\"phase\", ReachableStopsSearchPhase_1.default.Final);\ncontainer.bind(types_1.default.CatalogFetcher).to(CatalogFetcherDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.CatalogProvider).to(CatalogProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsProvider).to(ConnectionsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.ConnectionsFetcher).to(ConnectionsFetcherRaw_1.default);\ncontainer.bind(types_1.default.ConnectionsFetcherFactory)\n    .toFactory((context) => (travelMode) => {\n    const fetcher = context.container.get(types_1.default.ConnectionsFetcher);\n    fetcher.setTravelMode(travelMode);\n    return fetcher;\n});\ncontainer.bind(types_1.default.StopsProvider).to(StopsProviderDefault_1.default).inSingletonScope();\ncontainer.bind(types_1.default.StopsFetcher).to(StopsFetcherRaw_1.default);\ncontainer.bind(types_1.default.StopsFetcherFactory)\n    .toFactory((context) => (accessUrl) => {\n    const fetcher = context.container.get(types_1.default.StopsFetcher);\n    fetcher.setAccessUrl(accessUrl);\n    return fetcher;\n});\ncontainer.bind(types_1.default.RoutableTileFetcher).to(RoutableTileFetcherRaw_1.default).inSingletonScope();\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(CompositeTileProvider_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Base);\ncontainer.bind(types_1.default.RoutableTileProvider)\n    .to(CompositeTileProvider_1.default).inSingletonScope().whenTargetTagged(\"phase\", RoutingPhase_1.default.Transit);\n// Init LDFetch\ncontainer.bind(types_1.default.LDFetch).to(LDFetch_1.default).inSingletonScope();\ncontainer.bind(types_1.default.LDLoader).to(ldloader_1.LDLoader);\nexports.default = container;\n//# sourceMappingURL=zoi_demo_planner.js.map","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\n    result[\"default\"] = mod;\n    return result;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst turf = __importStar(require(\"@turf/turf\"));\nconst inversify_1 = require(\"inversify\");\nconst rbush_1 = __importDefault(require(\"rbush\"));\nconst PathfinderProvider_1 = __importDefault(require(\"../../pathfinding/PathfinderProvider\"));\nconst types_1 = __importDefault(require(\"../../types\"));\nconst RoutableTileProviderDefault_1 = __importDefault(require(\"./RoutableTileProviderDefault\"));\nconst ZoiTileFetcherRaw_1 = __importDefault(require(\"./ZoiTileFetcherRaw\"));\nlet CompositeTileProvider = class CompositeTileProvider extends RoutableTileProviderDefault_1.default {\n    constructor(pathfinderProvider, fetcher) {\n        super(pathfinderProvider, fetcher);\n        this.tiles = {};\n        this.zoiFetcher = new ZoiTileFetcherRaw_1.default();\n    }\n    async getByTileCoords(coordinate) {\n        const url = this.getIdForTileCoords(coordinate);\n        const zoiUrl = this.getZoiIdForTileCoords(coordinate);\n        const tile = await this.getByUrl(url, zoiUrl);\n        tile.coordinate = coordinate; // todo, get these from server response\n        return tile;\n    }\n    getIdForTileCoords(coordinate) {\n        // only for pedestrians right now\n        return `https://hdelva.be/tiles/pedestrian/${coordinate.zoom}/${coordinate.x}/${coordinate.y}`;\n    }\n    async getByUrl(url, zoiUrl) {\n        if (!this.tiles[url]) {\n            this.tiles[url] = this.fetcher.get(url);\n            const [routableTile, zoiTile] = await Promise.all([\n                this.tiles[url], this.zoiFetcher.get(zoiUrl),\n            ]);\n            const tree = new rbush_1.default();\n            tree.load(zoiTile.getZones().map((zone) => {\n                const [minX, minY, maxX, maxY] = turf.bbox(zone.getBoundary().area);\n                return {\n                    minX, minY, maxX, maxY, zone,\n                };\n            }));\n            for (const nodeId of routableTile.getNodes()) {\n                const node = this.registry.getNode(nodeId);\n                const q = tree.search({\n                    minX: node.longitude, minY: node.latitude, maxX: node.longitude, maxY: node.latitude,\n                });\n                const sorted = q.sort((a, b) => b.zone.degree - a.zone.degree);\n                for (const match of sorted) {\n                    const zone = match.zone;\n                    let update = false;\n                    for (const tag of zone.getSubject().getValues()) {\n                        if (!node.proximity[tag] || node.proximity[tag] < zone.getDegree()) {\n                            update = true;\n                            break;\n                        }\n                    }\n                    if (update && zone.contains(node)) {\n                        for (const tag of zone.getSubject().getValues()) {\n                            if (!node.proximity[tag] || node.proximity[tag] < zone.getDegree()) {\n                                node.proximity[tag] = zone.getDegree();\n                            }\n                        }\n                    }\n                }\n            }\n            this.pathfinderProvider.registerEdges(routableTile.getWays());\n        }\n        return await this.tiles[url];\n    }\n    getZoiIdForTileCoords(coordinate) {\n        return `https://hdelva.be/zoi/${coordinate.zoom}/${coordinate.x}/${coordinate.y}`;\n    }\n};\nCompositeTileProvider = __decorate([\n    inversify_1.injectable(),\n    __param(0, inversify_1.inject(types_1.default.PathfinderProvider)),\n    __param(1, inversify_1.inject(types_1.default.RoutableTileFetcher)),\n    __metadata(\"design:paramtypes\", [PathfinderProvider_1.default, Object])\n], CompositeTileProvider);\nexports.default = CompositeTileProvider;\n//# sourceMappingURL=CompositeTileProvider.js.map","!function(t,i){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=i():\"function\"==typeof define&&define.amd?define(i):(t=t||self).RBush=i()}(this,function(){\"use strict\";function t(t,r,e,a,h){!function t(n,r,e,a,h){for(;a>e;){if(a-e>600){var o=a-e+1,s=r-e+1,l=Math.log(o),f=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*f*(o-f)/o)*(s-o/2<0?-1:1),m=Math.max(e,Math.floor(r-s*f/o+u)),c=Math.min(a,Math.floor(r+(o-s)*f/o+u));t(n,r,m,c,h)}var p=n[r],d=e,x=a;for(i(n,e,r),h(n[a],p)>0&&i(n,e,a);d<x;){for(i(n,d,x),d++,x--;h(n[d],p)<0;)d++;for(;h(n[x],p)>0;)x--}0===h(n[e],p)?i(n,e,x):i(n,++x,a),x<=r&&(e=x+1),r<=x&&(a=x-1)}}(t,r,e||0,a||t.length-1,h||n)}function i(t,i,n){var r=t[i];t[i]=t[n],t[n]=r}function n(t,i){return t<i?-1:t>i?1:0}var r=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function e(t,i,n){if(!n)return i.indexOf(t);for(var r=0;r<i.length;r++)if(n(t,i[r]))return r;return-1}function a(t,i){h(t,0,t.children.length,i,t)}function h(t,i,n,r,e){e||(e=p(null)),e.minX=1/0,e.minY=1/0,e.maxX=-1/0,e.maxY=-1/0;for(var a=i;a<n;a++){var h=t.children[a];o(e,t.leaf?r(h):h)}return e}function o(t,i){return t.minX=Math.min(t.minX,i.minX),t.minY=Math.min(t.minY,i.minY),t.maxX=Math.max(t.maxX,i.maxX),t.maxY=Math.max(t.maxY,i.maxY),t}function s(t,i){return t.minX-i.minX}function l(t,i){return t.minY-i.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function u(t){return t.maxX-t.minX+(t.maxY-t.minY)}function m(t,i){return t.minX<=i.minX&&t.minY<=i.minY&&i.maxX<=t.maxX&&i.maxY<=t.maxY}function c(t,i){return i.minX<=t.maxX&&i.minY<=t.maxY&&i.maxX>=t.minX&&i.maxY>=t.minY}function p(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,n,r,e,a){for(var h=[n,r];h.length;)if(!((r=h.pop())-(n=h.pop())<=e)){var o=n+Math.ceil((r-n)/e/2)*e;t(i,o,n,r,a),h.push(n,o,o,r)}}return r.prototype.all=function(){return this._all(this.data,[])},r.prototype.search=function(t){var i=this.data,n=[];if(!c(t,i))return n;for(var r=this.toBBox,e=[];i;){for(var a=0;a<i.children.length;a++){var h=i.children[a],o=i.leaf?r(h):h;c(t,o)&&(i.leaf?n.push(h):m(t,o)?this._all(h,n):e.push(h))}i=e.pop()}return n},r.prototype.collides=function(t){var i=this.data;if(!c(t,i))return!1;for(var n=[];i;){for(var r=0;r<i.children.length;r++){var e=i.children[r],a=i.leaf?this.toBBox(e):e;if(c(t,a)){if(i.leaf||m(t,a))return!0;n.push(e)}}i=n.pop()}return!1},r.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var i=0;i<t.length;i++)this.insert(t[i]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var r=this.data;this.data=n,n=r}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},r.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},r.prototype.clear=function(){return this.data=p([]),this},r.prototype.remove=function(t,i){if(!t)return this;for(var n,r,a,h=this.data,o=this.toBBox(t),s=[],l=[];h||s.length;){if(h||(h=s.pop(),r=s[s.length-1],n=l.pop(),a=!0),h.leaf){var f=e(t,h.children,i);if(-1!==f)return h.children.splice(f,1),s.push(h),this._condense(s),this}a||h.leaf||!m(h,o)?r?(n++,h=r.children[n],a=!1):h=null:(s.push(h),l.push(n),n=0,r=h,h=h.children[0])}return this},r.prototype.toBBox=function(t){return t},r.prototype.compareMinX=function(t,i){return t.minX-i.minX},r.prototype.compareMinY=function(t,i){return t.minY-i.minY},r.prototype.toJSON=function(){return this.data},r.prototype.fromJSON=function(t){return this.data=t,this},r.prototype._all=function(t,i){for(var n=[];t;)t.leaf?i.push.apply(i,t.children):n.push.apply(n,t.children),t=n.pop();return i},r.prototype._build=function(t,i,n,r){var e,h=n-i+1,o=this._maxEntries;if(h<=o)return a(e=p(t.slice(i,n+1)),this.toBBox),e;r||(r=Math.ceil(Math.log(h)/Math.log(o)),o=Math.ceil(h/Math.pow(o,r-1))),(e=p([])).leaf=!1,e.height=r;var s=Math.ceil(h/o),l=s*Math.ceil(Math.sqrt(o));d(t,i,n,l,this.compareMinX);for(var f=i;f<=n;f+=l){var u=Math.min(f+l-1,n);d(t,f,u,s,this.compareMinY);for(var m=f;m<=u;m+=s){var c=Math.min(m+s-1,u);e.children.push(this._build(t,m,c,r-1))}}return a(e,this.toBBox),e},r.prototype._chooseSubtree=function(t,i,n,r){for(;r.push(i),!i.leaf&&r.length-1!==n;){for(var e=1/0,a=1/0,h=void 0,o=0;o<i.children.length;o++){var s=i.children[o],l=f(s),u=(m=t,c=s,(Math.max(c.maxX,m.maxX)-Math.min(c.minX,m.minX))*(Math.max(c.maxY,m.maxY)-Math.min(c.minY,m.minY))-l);u<a?(a=u,e=l<e?l:e,h=s):u===a&&l<e&&(e=l,h=s)}i=h||i.children[0]}var m,c;return i},r.prototype._insert=function(t,i,n){var r=n?t:this.toBBox(t),e=[],a=this._chooseSubtree(r,this.data,i,e);for(a.children.push(t),o(a,r);i>=0&&e[i].children.length>this._maxEntries;)this._split(e,i),i--;this._adjustParentBBoxes(r,e,i)},r.prototype._split=function(t,i){var n=t[i],r=n.children.length,e=this._minEntries;this._chooseSplitAxis(n,e,r);var h=this._chooseSplitIndex(n,e,r),o=p(n.children.splice(h,n.children.length-h));o.height=n.height,o.leaf=n.leaf,a(n,this.toBBox),a(o,this.toBBox),i?t[i-1].children.push(o):this._splitRoot(n,o)},r.prototype._splitRoot=function(t,i){this.data=p([t,i]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},r.prototype._chooseSplitIndex=function(t,i,n){for(var r,e,a,o,s,l,u,m=1/0,c=1/0,p=i;p<=n-i;p++){var d=h(t,0,p,this.toBBox),x=h(t,p,n,this.toBBox),v=(e=d,a=x,o=void 0,s=void 0,l=void 0,u=void 0,o=Math.max(e.minX,a.minX),s=Math.max(e.minY,a.minY),l=Math.min(e.maxX,a.maxX),u=Math.min(e.maxY,a.maxY),Math.max(0,l-o)*Math.max(0,u-s)),M=f(d)+f(x);v<m?(m=v,r=p,c=M<c?M:c):v===m&&M<c&&(c=M,r=p)}return r||n-i},r.prototype._chooseSplitAxis=function(t,i,n){var r=t.leaf?this.compareMinX:s,e=t.leaf?this.compareMinY:l;this._allDistMargin(t,i,n,r)<this._allDistMargin(t,i,n,e)&&t.children.sort(r)},r.prototype._allDistMargin=function(t,i,n,r){t.children.sort(r);for(var e=this.toBBox,a=h(t,0,i,e),s=h(t,n-i,n,e),l=u(a)+u(s),f=i;f<n-i;f++){var m=t.children[f];o(a,t.leaf?e(m):m),l+=u(a)}for(var c=n-i-1;c>=i;c--){var p=t.children[c];o(s,t.leaf?e(p):p),l+=u(s)}return l},r.prototype._adjustParentBBoxes=function(t,i,n){for(var r=n;r>=0;r--)o(i[r],t)},r.prototype._condense=function(t){for(var i=t.length-1,n=void 0;i>=0;i--)0===t[i].children.length?i>0?(n=t[i-1].children).splice(n.indexOf(t[i]),1):this.clear():a(t[i],this.toBBox)},r});\n","\"use strict\";\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst cross_fetch_1 = __importDefault(require(\"cross-fetch\"));\nconst inversify_1 = require(\"inversify\");\nconst parse = require(\"wellknown\");\nconst __1 = require(\"../..\");\nconst ZoiSubject_1 = __importDefault(require(\"../../entities/tiles/ZoiSubject\"));\nconst ZoiTile_1 = require(\"../../entities/tiles/ZoiTile\");\nconst ZoiZone_1 = require(\"../../entities/tiles/ZoiZone\");\nconst geometry_1 = __importDefault(require(\"../../entities/tree/geometry\"));\nconst EventBus_1 = __importDefault(require(\"../../events/EventBus\"));\nconst EventType_1 = __importDefault(require(\"../../events/EventType\"));\nconst JSONLDContext_1 = __importDefault(require(\"../../uri/JSONLDContext\"));\nfunction parseWktLiteral(raw) {\n    const [reference, ...rest] = raw.split(\" \");\n    if (reference === \"<http://www.opengis.net/def/crs/OGC/1.3/CRS84>\") {\n        return parse(rest.join(\" \"));\n    }\n    return parse(raw);\n}\nlet ZoiTileFetcherRaw = class ZoiTileFetcherRaw {\n    constructor() {\n        this.eventBus = EventBus_1.default.getInstance();\n    }\n    async get(url) {\n        const beginTime = new Date();\n        const response = await cross_fetch_1.default(url);\n        const responseText = await response.text();\n        if (response.status !== 200) {\n            EventBus_1.default.getInstance().emit(EventType_1.default.Warning, `${url} responded with status code ${response.status}`);\n        }\n        if (response.status === 200 && responseText) {\n            const blob = JSON.parse(responseText);\n            const subjects = {};\n            const properties = {};\n            const zones = [];\n            const size = this.parseResponseLength(response);\n            const duration = (new Date()).getTime() - beginTime.getTime();\n            const context = new JSONLDContext_1.default(blob[\"@context\"]);\n            for (const entity of blob[\"@graph\"]) {\n                if (entity[\"@type\"] === \"owl:Restriction\") {\n                    const subject = this.createSubject(entity, context);\n                    subjects[subject.id] = subject;\n                }\n                else if (entity[\"rdfs:subPropertyOf\"] === \"dct:subject\") {\n                    const [property, degree] = this.createProperty(entity);\n                    properties[property] = degree;\n                }\n                else if (entity[\"geo:asWKT\"]) {\n                    const zone = this.createZone(entity, subjects, properties);\n                    this.eventBus.emit(EventType_1.default.ZoiZone, zone);\n                    zones.push(zone);\n                }\n            }\n            EventBus_1.default.getInstance().emit(EventType_1.default.ResourceFetch, {\n                DataType: __1.DataType.ZoiTile,\n                url,\n                duration,\n                size,\n            });\n            return new ZoiTile_1.ZoiTile(url, zones);\n        }\n        else {\n            return new ZoiTile_1.ZoiTile(url, []);\n        }\n    }\n    parseResponseLength(response) {\n        if (response.headers.get(\"content-length\")) {\n            return parseInt(response.headers.get(\"content-length\"), 10);\n        }\n        else {\n            try {\n                return response.body._outOffset;\n            }\n            catch (e) {\n                //\n            }\n        }\n    }\n    createSubject(blob, context) {\n        const id = blob[\"@id\"];\n        const property = blob[\"owl:onProperty\"];\n        const values = blob[\"owl:someValuesFrom\"].map((v) => context.resolveIdentifier(v));\n        const subject = new ZoiSubject_1.default(id, property, values);\n        return subject;\n    }\n    createProperty(blob) {\n        const id = blob[\"@id\"];\n        const degree = blob[\"truth:degree\"];\n        return [id, degree];\n    }\n    createZone(blob, subjects, properties) {\n        const id = blob[\"@id\"];\n        const area = new geometry_1.default(null);\n        area.area = parseWktLiteral(blob[\"geo:asWKT\"]);\n        for (const [property, value] of Object.entries(blob)) {\n            if (properties[property]) {\n                const degree = properties[property];\n                const subject = subjects[value];\n                return new ZoiZone_1.ZoiZone(id, area, subject, degree);\n            }\n        }\n    }\n};\nZoiTileFetcherRaw = __decorate([\n    inversify_1.injectable(),\n    __metadata(\"design:paramtypes\", [])\n], ZoiTileFetcherRaw);\nexports.default = ZoiTileFetcherRaw;\n//# sourceMappingURL=ZoiTileFetcherRaw.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ZoiSubject {\n    constructor(id, property, values) {\n        this.id = id;\n        this.property = property;\n        this.values = values;\n    }\n    getProperty() {\n        return this.property;\n    }\n    getValues() {\n        return this.values;\n    }\n}\nexports.default = ZoiSubject;\n//# sourceMappingURL=ZoiSubject.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ZoiTile {\n    constructor(id, zones) {\n        this.id = id;\n        this.zones = zones;\n    }\n    getZones() {\n        return this.zones;\n    }\n}\nexports.ZoiTile = ZoiTile;\n//# sourceMappingURL=ZoiTile.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass ZoiZone {\n    constructor(id, boundary, subject, degree = 1) {\n        this.id = id;\n        this.boundary = boundary;\n        this.subject = subject;\n        this.degree = degree;\n    }\n    getBoundary() {\n        return this.boundary;\n    }\n    getSubject() {\n        return this.subject;\n    }\n    getDegree() {\n        return this.degree;\n    }\n    contains(location) {\n        return this.boundary.contains(location);\n    }\n}\nexports.ZoiZone = ZoiZone;\n//# sourceMappingURL=ZoiZone.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass LinkedConnectionsPage {\n    constructor(id, connections, previousPageId, nextPageId) {\n        this.id = id;\n        this.previousPageId = previousPageId;\n        this.nextPageId = nextPageId;\n        this.connections = connections;\n    }\n    getConnections() {\n        return this.connections;\n    }\n    getPreviousPageId() {\n        return this.previousPageId;\n    }\n    getNextPageId() {\n        return this.nextPageId;\n    }\n    getLowerBound() {\n        return this.connections[0].departureTime;\n    }\n    getUpperBound() {\n        return this.connections[this.connections.length - 1].departureTime;\n    }\n}\nexports.LinkedConnectionsPage = LinkedConnectionsPage;\n//# sourceMappingURL=page.js.map","export default function(defs) {\n  defs('EPSG:4326', \"+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees\");\n  defs('EPSG:4269', \"+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees\");\n  defs('EPSG:3857', \"+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs\");\n\n  defs.WGS84 = defs['EPSG:4326'];\n  defs['EPSG:3785'] = defs['EPSG:3857']; // maintain backward compat, official code is 3857\n  defs.GOOGLE = defs['EPSG:3857'];\n  defs['EPSG:900913'] = defs['EPSG:3857'];\n  defs['EPSG:102113'] = defs['EPSG:3857'];\n}\n","export var PJD_3PARAM = 1;\nexport var PJD_7PARAM = 2;\nexport var PJD_WGS84 = 4; // WGS84 or equivalent\nexport var PJD_NODATUM = 5; // WGS84 or equivalent\nexport var SEC_TO_RAD = 4.84813681109535993589914102357e-6;\nexport var HALF_PI = Math.PI/2;\n// ellipoid pj_set_ell.c\nexport var SIXTH = 0.1666666666666666667;\n/* 1/6 */\nexport var RA4 = 0.04722222222222222222;\n/* 17/360 */\nexport var RA6 = 0.02215608465608465608;\nexport var EPSLN = 1.0e-10;\n// you'd think you could use Number.EPSILON above but that makes\n// Mollweide get into an infinate loop.\n\nexport var D2R = 0.01745329251994329577;\nexport var R2D = 57.29577951308232088;\nexport var FORTPI = Math.PI/4;\nexport var TWO_PI = Math.PI * 2;\n// SPI is slightly greater than Math.PI, so values that exceed the -180..180\n// degree range by a tiny amount don't get wrapped. This prevents points that\n// have drifted from their original location along the 180th meridian (due to\n// floating point error) from changing their sign.\nexport var SPI = 3.14159265359;\n","var exports = {};\nexport {exports as default};\n\nexports.greenwich = 0.0; //\"0dE\",\nexports.lisbon = -9.131906111111; //\"9d07'54.862\\\"W\",\nexports.paris = 2.337229166667; //\"2d20'14.025\\\"E\",\nexports.bogota = -74.080916666667; //\"74d04'51.3\\\"W\",\nexports.madrid = -3.687938888889; //\"3d41'16.58\\\"W\",\nexports.rome = 12.452333333333; //\"12d27'8.4\\\"E\",\nexports.bern = 7.439583333333; //\"7d26'22.5\\\"E\",\nexports.jakarta = 106.807719444444; //\"106d48'27.79\\\"E\",\nexports.ferro = -17.666666666667; //\"17d40'W\",\nexports.brussels = 4.367975; //\"4d22'4.71\\\"E\",\nexports.stockholm = 18.058277777778; //\"18d3'29.8\\\"E\",\nexports.athens = 23.7163375; //\"23d42'58.815\\\"E\",\nexports.oslo = 10.722916666667; //\"10d43'22.5\\\"E\"\n","export default {\n  ft: {to_meter: 0.3048},\n  'us-ft': {to_meter: 1200 / 3937}\n};\n","var ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nexport default function match(obj, key) {\n  if (obj[key]) {\n    return obj[key];\n  }\n  var keys = Object.keys(obj);\n  var lkey = key.toLowerCase().replace(ignoredChar, '');\n  var i = -1;\n  var testkey, processedKey;\n  while (++i < keys.length) {\n    testkey = keys[i];\n    processedKey = testkey.toLowerCase().replace(ignoredChar, '');\n    if (processedKey === lkey) {\n      return obj[testkey];\n    }\n  }\n}\n","import {D2R} from './constants/values';\nimport PrimeMeridian from './constants/PrimeMeridian';\nimport units from './constants/units';\nimport match from './match';\n\nexport default function(defData) {\n  var self = {};\n  var paramObj = defData.split('+').map(function(v) {\n    return v.trim();\n  }).filter(function(a) {\n    return a;\n  }).reduce(function(p, a) {\n    var split = a.split('=');\n    split.push(true);\n    p[split[0].toLowerCase()] = split[1];\n    return p;\n  }, {});\n  var paramName, paramVal, paramOutname;\n  var params = {\n    proj: 'projName',\n    datum: 'datumCode',\n    rf: function(v) {\n      self.rf = parseFloat(v);\n    },\n    lat_0: function(v) {\n      self.lat0 = v * D2R;\n    },\n    lat_1: function(v) {\n      self.lat1 = v * D2R;\n    },\n    lat_2: function(v) {\n      self.lat2 = v * D2R;\n    },\n    lat_ts: function(v) {\n      self.lat_ts = v * D2R;\n    },\n    lon_0: function(v) {\n      self.long0 = v * D2R;\n    },\n    lon_1: function(v) {\n      self.long1 = v * D2R;\n    },\n    lon_2: function(v) {\n      self.long2 = v * D2R;\n    },\n    alpha: function(v) {\n      self.alpha = parseFloat(v) * D2R;\n    },\n    lonc: function(v) {\n      self.longc = v * D2R;\n    },\n    x_0: function(v) {\n      self.x0 = parseFloat(v);\n    },\n    y_0: function(v) {\n      self.y0 = parseFloat(v);\n    },\n    k_0: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    k: function(v) {\n      self.k0 = parseFloat(v);\n    },\n    a: function(v) {\n      self.a = parseFloat(v);\n    },\n    b: function(v) {\n      self.b = parseFloat(v);\n    },\n    r_a: function() {\n      self.R_A = true;\n    },\n    zone: function(v) {\n      self.zone = parseInt(v, 10);\n    },\n    south: function() {\n      self.utmSouth = true;\n    },\n    towgs84: function(v) {\n      self.datum_params = v.split(\",\").map(function(a) {\n        return parseFloat(a);\n      });\n    },\n    to_meter: function(v) {\n      self.to_meter = parseFloat(v);\n    },\n    units: function(v) {\n      self.units = v;\n      var unit = match(units, v);\n      if (unit) {\n        self.to_meter = unit.to_meter;\n      }\n    },\n    from_greenwich: function(v) {\n      self.from_greenwich = v * D2R;\n    },\n    pm: function(v) {\n      var pm = match(PrimeMeridian, v);\n      self.from_greenwich = (pm ? pm : parseFloat(v)) * D2R;\n    },\n    nadgrids: function(v) {\n      if (v === '@null') {\n        self.datumCode = 'none';\n      }\n      else {\n        self.nadgrids = v;\n      }\n    },\n    axis: function(v) {\n      var legalAxis = \"ewnsud\";\n      if (v.length === 3 && legalAxis.indexOf(v.substr(0, 1)) !== -1 && legalAxis.indexOf(v.substr(1, 1)) !== -1 && legalAxis.indexOf(v.substr(2, 1)) !== -1) {\n        self.axis = v;\n      }\n    }\n  };\n  for (paramName in paramObj) {\n    paramVal = paramObj[paramName];\n    if (paramName in params) {\n      paramOutname = params[paramName];\n      if (typeof paramOutname === 'function') {\n        paramOutname(paramVal);\n      }\n      else {\n        self[paramOutname] = paramVal;\n      }\n    }\n    else {\n      self[paramName] = paramVal;\n    }\n  }\n  if(typeof self.datumCode === 'string' && self.datumCode !== \"WGS84\"){\n    self.datumCode = self.datumCode.toLowerCase();\n  }\n  return self;\n}\n","export default parseString;\n\nvar NEUTRAL = 1;\nvar KEYWORD = 2;\nvar NUMBER = 3;\nvar QUOTED = 4;\nvar AFTERQUOTE = 5;\nvar ENDED = -1;\nvar whitespace = /\\s/;\nvar latin = /[A-Za-z]/;\nvar keyword = /[A-Za-z84]/;\nvar endThings = /[,\\]]/;\nvar digets = /[\\d\\.E\\-\\+]/;\n// const ignoredChar = /[\\s_\\-\\/\\(\\)]/g;\nfunction Parser(text) {\n  if (typeof text !== 'string') {\n    throw new Error('not a string');\n  }\n  this.text = text.trim();\n  this.level = 0;\n  this.place = 0;\n  this.root = null;\n  this.stack = [];\n  this.currentObject = null;\n  this.state = NEUTRAL;\n}\nParser.prototype.readCharicter = function() {\n  var char = this.text[this.place++];\n  if (this.state !== QUOTED) {\n    while (whitespace.test(char)) {\n      if (this.place >= this.text.length) {\n        return;\n      }\n      char = this.text[this.place++];\n    }\n  }\n  switch (this.state) {\n    case NEUTRAL:\n      return this.neutral(char);\n    case KEYWORD:\n      return this.keyword(char)\n    case QUOTED:\n      return this.quoted(char);\n    case AFTERQUOTE:\n      return this.afterquote(char);\n    case NUMBER:\n      return this.number(char);\n    case ENDED:\n      return;\n  }\n};\nParser.prototype.afterquote = function(char) {\n  if (char === '\"') {\n    this.word += '\"';\n    this.state = QUOTED;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = this.word.trim();\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in afterquote yet, index ' + this.place);\n};\nParser.prototype.afterItem = function(char) {\n  if (char === ',') {\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n    }\n    this.word = null;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (char === ']') {\n    this.level--;\n    if (this.word !== null) {\n      this.currentObject.push(this.word);\n      this.word = null;\n    }\n    this.state = NEUTRAL;\n    this.currentObject = this.stack.pop();\n    if (!this.currentObject) {\n      this.state = ENDED;\n    }\n\n    return;\n  }\n};\nParser.prototype.number = function(char) {\n  if (digets.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.word = parseFloat(this.word);\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in number yet, index ' + this.place);\n};\nParser.prototype.quoted = function(char) {\n  if (char === '\"') {\n    this.state = AFTERQUOTE;\n    return;\n  }\n  this.word += char;\n  return;\n};\nParser.prototype.keyword = function(char) {\n  if (keyword.test(char)) {\n    this.word += char;\n    return;\n  }\n  if (char === '[') {\n    var newObjects = [];\n    newObjects.push(this.word);\n    this.level++;\n    if (this.root === null) {\n      this.root = newObjects;\n    } else {\n      this.currentObject.push(newObjects);\n    }\n    this.stack.push(this.currentObject);\n    this.currentObject = newObjects;\n    this.state = NEUTRAL;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in keyword yet, index ' + this.place);\n};\nParser.prototype.neutral = function(char) {\n  if (latin.test(char)) {\n    this.word = char;\n    this.state = KEYWORD;\n    return;\n  }\n  if (char === '\"') {\n    this.word = '';\n    this.state = QUOTED;\n    return;\n  }\n  if (digets.test(char)) {\n    this.word = char;\n    this.state = NUMBER;\n    return;\n  }\n  if (endThings.test(char)) {\n    this.afterItem(char);\n    return;\n  }\n  throw new Error('havn\\'t handled \"' +char + '\" in neutral yet, index ' + this.place);\n};\nParser.prototype.output = function() {\n  while (this.place < this.text.length) {\n    this.readCharicter();\n  }\n  if (this.state === ENDED) {\n    return this.root;\n  }\n  throw new Error('unable to parse string \"' +this.text + '\". State is ' + this.state);\n};\n\nfunction parseString(txt) {\n  var parser = new Parser(txt);\n  return parser.output();\n}\n","\n\nfunction mapit(obj, key, value) {\n  if (Array.isArray(key)) {\n    value.unshift(key);\n    key = null;\n  }\n  var thing = key ? {} : obj;\n\n  var out = value.reduce(function(newObj, item) {\n    sExpr(item, newObj);\n    return newObj\n  }, thing);\n  if (key) {\n    obj[key] = out;\n  }\n}\n\nexport function sExpr(v, obj) {\n  if (!Array.isArray(v)) {\n    obj[v] = true;\n    return;\n  }\n  var key = v.shift();\n  if (key === 'PARAMETER') {\n    key = v.shift();\n  }\n  if (v.length === 1) {\n    if (Array.isArray(v[0])) {\n      obj[key] = {};\n      sExpr(v[0], obj[key]);\n      return;\n    }\n    obj[key] = v[0];\n    return;\n  }\n  if (!v.length) {\n    obj[key] = true;\n    return;\n  }\n  if (key === 'TOWGS84') {\n    obj[key] = v;\n    return;\n  }\n  if (!Array.isArray(key)) {\n    obj[key] = {};\n  }\n\n  var i;\n  switch (key) {\n    case 'UNIT':\n    case 'PRIMEM':\n    case 'VERT_DATUM':\n      obj[key] = {\n        name: v[0].toLowerCase(),\n        convert: v[1]\n      };\n      if (v.length === 3) {\n        sExpr(v[2], obj[key]);\n      }\n      return;\n    case 'SPHEROID':\n    case 'ELLIPSOID':\n      obj[key] = {\n        name: v[0],\n        a: v[1],\n        rf: v[2]\n      };\n      if (v.length === 4) {\n        sExpr(v[3], obj[key]);\n      }\n      return;\n    case 'PROJECTEDCRS':\n    case 'PROJCRS':\n    case 'GEOGCS':\n    case 'GEOCCS':\n    case 'PROJCS':\n    case 'LOCAL_CS':\n    case 'GEODCRS':\n    case 'GEODETICCRS':\n    case 'GEODETICDATUM':\n    case 'EDATUM':\n    case 'ENGINEERINGDATUM':\n    case 'VERT_CS':\n    case 'VERTCRS':\n    case 'VERTICALCRS':\n    case 'COMPD_CS':\n    case 'COMPOUNDCRS':\n    case 'ENGINEERINGCRS':\n    case 'ENGCRS':\n    case 'FITTED_CS':\n    case 'LOCAL_DATUM':\n    case 'DATUM':\n      v[0] = ['name', v[0]];\n      mapit(obj, key, v);\n      return;\n    default:\n      i = -1;\n      while (++i < v.length) {\n        if (!Array.isArray(v[i])) {\n          return sExpr(v, obj[key]);\n        }\n      }\n      return mapit(obj, key, v);\n  }\n}\n","var D2R = 0.01745329251994329577;\nimport parser from './parser';\nimport {sExpr} from './process';\n\n\n\nfunction rename(obj, params) {\n  var outName = params[0];\n  var inName = params[1];\n  if (!(outName in obj) && (inName in obj)) {\n    obj[outName] = obj[inName];\n    if (params.length === 3) {\n      obj[outName] = params[2](obj[outName]);\n    }\n  }\n}\n\nfunction d2r(input) {\n  return input * D2R;\n}\n\nfunction cleanWKT(wkt) {\n  if (wkt.type === 'GEOGCS') {\n    wkt.projName = 'longlat';\n  } else if (wkt.type === 'LOCAL_CS') {\n    wkt.projName = 'identity';\n    wkt.local = true;\n  } else {\n    if (typeof wkt.PROJECTION === 'object') {\n      wkt.projName = Object.keys(wkt.PROJECTION)[0];\n    } else {\n      wkt.projName = wkt.PROJECTION;\n    }\n  }\n  if (wkt.UNIT) {\n    wkt.units = wkt.UNIT.name.toLowerCase();\n    if (wkt.units === 'metre') {\n      wkt.units = 'meter';\n    }\n    if (wkt.UNIT.convert) {\n      if (wkt.type === 'GEOGCS') {\n        if (wkt.DATUM && wkt.DATUM.SPHEROID) {\n          wkt.to_meter = wkt.UNIT.convert*wkt.DATUM.SPHEROID.a;\n        }\n      } else {\n        wkt.to_meter = wkt.UNIT.convert;\n      }\n    }\n  }\n  var geogcs = wkt.GEOGCS;\n  if (wkt.type === 'GEOGCS') {\n    geogcs = wkt;\n  }\n  if (geogcs) {\n    //if(wkt.GEOGCS.PRIMEM&&wkt.GEOGCS.PRIMEM.convert){\n    //  wkt.from_greenwich=wkt.GEOGCS.PRIMEM.convert*D2R;\n    //}\n    if (geogcs.DATUM) {\n      wkt.datumCode = geogcs.DATUM.name.toLowerCase();\n    } else {\n      wkt.datumCode = geogcs.name.toLowerCase();\n    }\n    if (wkt.datumCode.slice(0, 2) === 'd_') {\n      wkt.datumCode = wkt.datumCode.slice(2);\n    }\n    if (wkt.datumCode === 'new_zealand_geodetic_datum_1949' || wkt.datumCode === 'new_zealand_1949') {\n      wkt.datumCode = 'nzgd49';\n    }\n    if (wkt.datumCode === 'wgs_1984') {\n      if (wkt.PROJECTION === 'Mercator_Auxiliary_Sphere') {\n        wkt.sphere = true;\n      }\n      wkt.datumCode = 'wgs84';\n    }\n    if (wkt.datumCode.slice(-6) === '_ferro') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 6);\n    }\n    if (wkt.datumCode.slice(-8) === '_jakarta') {\n      wkt.datumCode = wkt.datumCode.slice(0, - 8);\n    }\n    if (~wkt.datumCode.indexOf('belge')) {\n      wkt.datumCode = 'rnb72';\n    }\n    if (geogcs.DATUM && geogcs.DATUM.SPHEROID) {\n      wkt.ellps = geogcs.DATUM.SPHEROID.name.replace('_19', '').replace(/[Cc]larke\\_18/, 'clrk');\n      if (wkt.ellps.toLowerCase().slice(0, 13) === 'international') {\n        wkt.ellps = 'intl';\n      }\n\n      wkt.a = geogcs.DATUM.SPHEROID.a;\n      wkt.rf = parseFloat(geogcs.DATUM.SPHEROID.rf, 10);\n    }\n\n    if (geogcs.DATUM && geogcs.DATUM.TOWGS84) {\n      wkt.datum_params = geogcs.DATUM.TOWGS84;\n    }\n    if (~wkt.datumCode.indexOf('osgb_1936')) {\n      wkt.datumCode = 'osgb36';\n    }\n    if (~wkt.datumCode.indexOf('osni_1952')) {\n      wkt.datumCode = 'osni52';\n    }\n    if (~wkt.datumCode.indexOf('tm65')\n      || ~wkt.datumCode.indexOf('geodetic_datum_of_1965')) {\n      wkt.datumCode = 'ire65';\n    }\n    if (wkt.datumCode === 'ch1903+') {\n      wkt.datumCode = 'ch1903';\n    }\n    if (~wkt.datumCode.indexOf('israel')) {\n      wkt.datumCode = 'isr93';\n    }\n  }\n  if (wkt.b && !isFinite(wkt.b)) {\n    wkt.b = wkt.a;\n  }\n\n  function toMeter(input) {\n    var ratio = wkt.to_meter || 1;\n    return input * ratio;\n  }\n  var renamer = function(a) {\n    return rename(wkt, a);\n  };\n  var list = [\n    ['standard_parallel_1', 'Standard_Parallel_1'],\n    ['standard_parallel_2', 'Standard_Parallel_2'],\n    ['false_easting', 'False_Easting'],\n    ['false_northing', 'False_Northing'],\n    ['central_meridian', 'Central_Meridian'],\n    ['latitude_of_origin', 'Latitude_Of_Origin'],\n    ['latitude_of_origin', 'Central_Parallel'],\n    ['scale_factor', 'Scale_Factor'],\n    ['k0', 'scale_factor'],\n    ['latitude_of_center', 'Latitude_Of_Center'],\n    ['latitude_of_center', 'Latitude_of_center'],\n    ['lat0', 'latitude_of_center', d2r],\n    ['longitude_of_center', 'Longitude_Of_Center'],\n    ['longitude_of_center', 'Longitude_of_center'],\n    ['longc', 'longitude_of_center', d2r],\n    ['x0', 'false_easting', toMeter],\n    ['y0', 'false_northing', toMeter],\n    ['long0', 'central_meridian', d2r],\n    ['lat0', 'latitude_of_origin', d2r],\n    ['lat0', 'standard_parallel_1', d2r],\n    ['lat1', 'standard_parallel_1', d2r],\n    ['lat2', 'standard_parallel_2', d2r],\n    ['azimuth', 'Azimuth'],\n    ['alpha', 'azimuth', d2r],\n    ['srsCode', 'name']\n  ];\n  list.forEach(renamer);\n  if (!wkt.long0 && wkt.longc && (wkt.projName === 'Albers_Conic_Equal_Area' || wkt.projName === 'Lambert_Azimuthal_Equal_Area')) {\n    wkt.long0 = wkt.longc;\n  }\n  if (!wkt.lat_ts && wkt.lat1 && (wkt.projName === 'Stereographic_South_Pole' || wkt.projName === 'Polar Stereographic (variant B)')) {\n    wkt.lat0 = d2r(wkt.lat1 > 0 ? 90 : -90);\n    wkt.lat_ts = wkt.lat1;\n  }\n}\nexport default function(wkt) {\n  var lisp = parser(wkt);\n  var type = lisp.shift();\n  var name = lisp.shift();\n  lisp.unshift(['name', name]);\n  lisp.unshift(['type', type]);\n  var obj = {};\n  sExpr(lisp, obj);\n  cleanWKT(obj);\n  return obj;\n}\n","import globals from './global';\nimport parseProj from './projString';\nimport wkt from 'wkt-parser';\n\nfunction defs(name) {\n  /*global console*/\n  var that = this;\n  if (arguments.length === 2) {\n    var def = arguments[1];\n    if (typeof def === 'string') {\n      if (def.charAt(0) === '+') {\n        defs[name] = parseProj(arguments[1]);\n      }\n      else {\n        defs[name] = wkt(arguments[1]);\n      }\n    } else {\n      defs[name] = def;\n    }\n  }\n  else if (arguments.length === 1) {\n    if (Array.isArray(name)) {\n      return name.map(function(v) {\n        if (Array.isArray(v)) {\n          defs.apply(that, v);\n        }\n        else {\n          defs(v);\n        }\n      });\n    }\n    else if (typeof name === 'string') {\n      if (name in defs) {\n        return defs[name];\n      }\n    }\n    else if ('EPSG' in name) {\n      defs['EPSG:' + name.EPSG] = name;\n    }\n    else if ('ESRI' in name) {\n      defs['ESRI:' + name.ESRI] = name;\n    }\n    else if ('IAU2000' in name) {\n      defs['IAU2000:' + name.IAU2000] = name;\n    }\n    else {\n      console.log(name);\n    }\n    return;\n  }\n\n\n}\nglobals(defs);\nexport default defs;\n","import defs from './defs';\nimport wkt from 'wkt-parser';\nimport projStr from './projString';\nimport match from './match';\nfunction testObj(code){\n  return typeof code === 'string';\n}\nfunction testDef(code){\n  return code in defs;\n}\n var codeWords = ['PROJECTEDCRS', 'PROJCRS', 'GEOGCS','GEOCCS','PROJCS','LOCAL_CS', 'GEODCRS', 'GEODETICCRS', 'GEODETICDATUM', 'ENGCRS', 'ENGINEERINGCRS'];\nfunction testWKT(code){\n  return codeWords.some(function (word) {\n    return code.indexOf(word) > -1;\n  });\n}\nvar codes = ['3857', '900913', '3785', '102113'];\nfunction checkMercator(item) {\n  var auth = match(item, 'authority');\n  if (!auth) {\n    return;\n  }\n  var code = match(auth, 'epsg');\n  return code && codes.indexOf(code) > -1;\n}\nfunction checkProjStr(item) {\n  var ext = match(item, 'extension');\n  if (!ext) {\n    return;\n  }\n  return match(ext, 'proj4');\n}\nfunction testProj(code){\n  return code[0] === '+';\n}\nfunction parse(code){\n  if (testObj(code)) {\n    //check to see if this is a WKT string\n    if (testDef(code)) {\n      return defs[code];\n    }\n    if (testWKT(code)) {\n      var out = wkt(code);\n      // test of spetial case, due to this being a very common and often malformed\n      if (checkMercator(out)) {\n        return defs['EPSG:3857'];\n      }\n      var maybeProjStr = checkProjStr(out);\n      if (maybeProjStr) {\n        return projStr(maybeProjStr);\n      }\n      return out;\n    }\n    if (testProj(code)) {\n      return projStr(code);\n    }\n  }else{\n    return code;\n  }\n}\n\nexport default parse;\n","export default function(destination, source) {\n  destination = destination || {};\n  var value, property;\n  if (!source) {\n    return destination;\n  }\n  for (property in source) {\n    value = source[property];\n    if (value !== undefined) {\n      destination[property] = value;\n    }\n  }\n  return destination;\n}\n","export default function(eccent, sinphi, cosphi) {\n  var con = eccent * sinphi;\n  return cosphi / (Math.sqrt(1 - con * con));\n}","export default function(x) {\n  return x<0 ? -1 : 1;\n}","\nimport {TWO_PI, SPI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) <= SPI) ? x : (x - (sign(x) * TWO_PI));\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, phi, sinphi) {\n  var con = eccent * sinphi;\n  var com = 0.5 * eccent;\n  con = Math.pow(((1 - con) / (1 + con)), com);\n  return (Math.tan(0.5 * (HALF_PI - phi)) / con);\n}\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, ts) {\n  var eccnth = 0.5 * eccent;\n  var con, dphi;\n  var phi = HALF_PI - 2 * Math.atan(ts);\n  for (var i = 0; i <= 15; i++) {\n    con = eccent * Math.sin(phi);\n    dphi = HALF_PI - 2 * Math.atan(ts * (Math.pow(((1 - con) / (1 + con)), eccnth))) - phi;\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n  //console.log(\"phi2z has NoConvergence\");\n  return -9999;\n}\n","export function init() {\n  //no-op for longlat\n}\n\nfunction identity(pt) {\n  return pt;\n}\nexport {identity as forward};\nexport {identity as inverse};\nexport var names = [\"longlat\", \"identity\"];\nexport default {\n  init: init,\n  forward: identity,\n  inverse: identity,\n  names: names\n};\n","import merc from \"./projections/merc\";\nimport longlat from \"./projections/longlat\";\nvar projs = [merc, longlat];\nvar names = {};\nvar projStore = [];\n\nfunction add(proj, i) {\n  var len = projStore.length;\n  if (!proj.names) {\n    console.log(i);\n    return true;\n  }\n  projStore[len] = proj;\n  proj.names.forEach(function(n) {\n    names[n.toLowerCase()] = len;\n  });\n  return this;\n}\n\nexport {add};\n\nexport function get(name) {\n  if (!name) {\n    return false;\n  }\n  var n = name.toLowerCase();\n  if (typeof names[n] !== 'undefined' && projStore[names[n]]) {\n    return projStore[names[n]];\n  }\n}\n\nexport function start() {\n  projs.forEach(add);\n}\nexport default {\n  start: start,\n  add: add,\n  get: get\n};\n","import msfnz from '../common/msfnz';\n\nimport adjust_lon from '../common/adjust_lon';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport {FORTPI, R2D, EPSLN, HALF_PI} from '../constants/values';\nexport function init() {\n  var con = this.b / this.a;\n  this.es = 1 - con * con;\n  if(!('x0' in this)){\n    this.x0 = 0;\n  }\n  if(!('y0' in this)){\n    this.y0 = 0;\n  }\n  this.e = Math.sqrt(this.es);\n  if (this.lat_ts) {\n    if (this.sphere) {\n      this.k0 = Math.cos(this.lat_ts);\n    }\n    else {\n      this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n    }\n  }\n  else {\n    if (!this.k0) {\n      if (this.k) {\n        this.k0 = this.k;\n      }\n      else {\n        this.k0 = 1;\n      }\n    }\n  }\n}\n\n/* Mercator forward equations--mapping lat,long to x,y\n  --------------------------------------------------*/\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  // convert to radians\n  if (lat * R2D > 90 && lat * R2D < -90 && lon * R2D > 180 && lon * R2D < -180) {\n    return null;\n  }\n\n  var x, y;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    return null;\n  }\n  else {\n    if (this.sphere) {\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 + this.a * this.k0 * Math.log(Math.tan(FORTPI + 0.5 * lat));\n    }\n    else {\n      var sinphi = Math.sin(lat);\n      var ts = tsfnz(this.e, lat, sinphi);\n      x = this.x0 + this.a * this.k0 * adjust_lon(lon - this.long0);\n      y = this.y0 - this.a * this.k0 * Math.log(ts);\n    }\n    p.x = x;\n    p.y = y;\n    return p;\n  }\n}\n\n/* Mercator inverse equations--mapping x,y to lat/long\n  --------------------------------------------------*/\nexport function inverse(p) {\n\n  var x = p.x - this.x0;\n  var y = p.y - this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lat = HALF_PI - 2 * Math.atan(Math.exp(-y / (this.a * this.k0)));\n  }\n  else {\n    var ts = Math.exp(-y / (this.a * this.k0));\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  lon = adjust_lon(this.long0 + x / (this.a * this.k0));\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mercator\", \"Popular Visualisation Pseudo Mercator\", \"Mercator_1SP\", \"Mercator_Auxiliary_Sphere\", \"merc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","var exports = {};\nexport {exports as default};\nexports.MERIT = {\n  a: 6378137.0,\n  rf: 298.257,\n  ellipseName: \"MERIT 1983\"\n};\n\nexports.SGS85 = {\n  a: 6378136.0,\n  rf: 298.257,\n  ellipseName: \"Soviet Geodetic System 85\"\n};\n\nexports.GRS80 = {\n  a: 6378137.0,\n  rf: 298.257222101,\n  ellipseName: \"GRS 1980(IUGG, 1980)\"\n};\n\nexports.IAU76 = {\n  a: 6378140.0,\n  rf: 298.257,\n  ellipseName: \"IAU 1976\"\n};\n\nexports.airy = {\n  a: 6377563.396,\n  b: 6356256.910,\n  ellipseName: \"Airy 1830\"\n};\n\nexports.APL4 = {\n  a: 6378137,\n  rf: 298.25,\n  ellipseName: \"Appl. Physics. 1965\"\n};\n\nexports.NWL9D = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"Naval Weapons Lab., 1965\"\n};\n\nexports.mod_airy = {\n  a: 6377340.189,\n  b: 6356034.446,\n  ellipseName: \"Modified Airy\"\n};\n\nexports.andrae = {\n  a: 6377104.43,\n  rf: 300.0,\n  ellipseName: \"Andrae 1876 (Den., Iclnd.)\"\n};\n\nexports.aust_SA = {\n  a: 6378160.0,\n  rf: 298.25,\n  ellipseName: \"Australian Natl & S. Amer. 1969\"\n};\n\nexports.GRS67 = {\n  a: 6378160.0,\n  rf: 298.2471674270,\n  ellipseName: \"GRS 67(IUGG 1967)\"\n};\n\nexports.bessel = {\n  a: 6377397.155,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841\"\n};\n\nexports.bess_nam = {\n  a: 6377483.865,\n  rf: 299.1528128,\n  ellipseName: \"Bessel 1841 (Namibia)\"\n};\n\nexports.clrk66 = {\n  a: 6378206.4,\n  b: 6356583.8,\n  ellipseName: \"Clarke 1866\"\n};\n\nexports.clrk80 = {\n  a: 6378249.145,\n  rf: 293.4663,\n  ellipseName: \"Clarke 1880 mod.\"\n};\n\nexports.clrk58 = {\n  a: 6378293.645208759,\n  rf: 294.2606763692654,\n  ellipseName: \"Clarke 1858\"\n};\n\nexports.CPM = {\n  a: 6375738.7,\n  rf: 334.29,\n  ellipseName: \"Comm. des Poids et Mesures 1799\"\n};\n\nexports.delmbr = {\n  a: 6376428.0,\n  rf: 311.5,\n  ellipseName: \"Delambre 1810 (Belgium)\"\n};\n\nexports.engelis = {\n  a: 6378136.05,\n  rf: 298.2566,\n  ellipseName: \"Engelis 1985\"\n};\n\nexports.evrst30 = {\n  a: 6377276.345,\n  rf: 300.8017,\n  ellipseName: \"Everest 1830\"\n};\n\nexports.evrst48 = {\n  a: 6377304.063,\n  rf: 300.8017,\n  ellipseName: \"Everest 1948\"\n};\n\nexports.evrst56 = {\n  a: 6377301.243,\n  rf: 300.8017,\n  ellipseName: \"Everest 1956\"\n};\n\nexports.evrst69 = {\n  a: 6377295.664,\n  rf: 300.8017,\n  ellipseName: \"Everest 1969\"\n};\n\nexports.evrstSS = {\n  a: 6377298.556,\n  rf: 300.8017,\n  ellipseName: \"Everest (Sabah & Sarawak)\"\n};\n\nexports.fschr60 = {\n  a: 6378166.0,\n  rf: 298.3,\n  ellipseName: \"Fischer (Mercury Datum) 1960\"\n};\n\nexports.fschr60m = {\n  a: 6378155.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1960\"\n};\n\nexports.fschr68 = {\n  a: 6378150.0,\n  rf: 298.3,\n  ellipseName: \"Fischer 1968\"\n};\n\nexports.helmert = {\n  a: 6378200.0,\n  rf: 298.3,\n  ellipseName: \"Helmert 1906\"\n};\n\nexports.hough = {\n  a: 6378270.0,\n  rf: 297.0,\n  ellipseName: \"Hough\"\n};\n\nexports.intl = {\n  a: 6378388.0,\n  rf: 297.0,\n  ellipseName: \"International 1909 (Hayford)\"\n};\n\nexports.kaula = {\n  a: 6378163.0,\n  rf: 298.24,\n  ellipseName: \"Kaula 1961\"\n};\n\nexports.lerch = {\n  a: 6378139.0,\n  rf: 298.257,\n  ellipseName: \"Lerch 1979\"\n};\n\nexports.mprts = {\n  a: 6397300.0,\n  rf: 191.0,\n  ellipseName: \"Maupertius 1738\"\n};\n\nexports.new_intl = {\n  a: 6378157.5,\n  b: 6356772.2,\n  ellipseName: \"New International 1967\"\n};\n\nexports.plessis = {\n  a: 6376523.0,\n  rf: 6355863.0,\n  ellipseName: \"Plessis 1817 (France)\"\n};\n\nexports.krass = {\n  a: 6378245.0,\n  rf: 298.3,\n  ellipseName: \"Krassovsky, 1942\"\n};\n\nexports.SEasia = {\n  a: 6378155.0,\n  b: 6356773.3205,\n  ellipseName: \"Southeast Asia\"\n};\n\nexports.walbeck = {\n  a: 6376896.0,\n  b: 6355834.8467,\n  ellipseName: \"Walbeck\"\n};\n\nexports.WGS60 = {\n  a: 6378165.0,\n  rf: 298.3,\n  ellipseName: \"WGS 60\"\n};\n\nexports.WGS66 = {\n  a: 6378145.0,\n  rf: 298.25,\n  ellipseName: \"WGS 66\"\n};\n\nexports.WGS7 = {\n  a: 6378135.0,\n  rf: 298.26,\n  ellipseName: \"WGS 72\"\n};\n\nexport var WGS84 = exports.WGS84 = {\n  a: 6378137.0,\n  rf: 298.257223563,\n  ellipseName: \"WGS 84\"\n};\n\nexports.sphere = {\n  a: 6370997.0,\n  b: 6370997.0,\n  ellipseName: \"Normal Sphere (r=6370997)\"\n};\n","var exports = {};\nexport {exports as default};\nexports.wgs84 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"WGS84\",\n  datumName: \"WGS84\"\n};\n\nexports.ch1903 = {\n  towgs84: \"674.374,15.056,405.346\",\n  ellipse: \"bessel\",\n  datumName: \"swiss\"\n};\n\nexports.ggrs87 = {\n  towgs84: \"-199.87,74.79,246.62\",\n  ellipse: \"GRS80\",\n  datumName: \"Greek_Geodetic_Reference_System_1987\"\n};\n\nexports.nad83 = {\n  towgs84: \"0,0,0\",\n  ellipse: \"GRS80\",\n  datumName: \"North_American_Datum_1983\"\n};\n\nexports.nad27 = {\n  nadgrids: \"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat\",\n  ellipse: \"clrk66\",\n  datumName: \"North_American_Datum_1927\"\n};\n\nexports.potsdam = {\n  towgs84: \"606.0,23.0,413.0\",\n  ellipse: \"bessel\",\n  datumName: \"Potsdam Rauenberg 1950 DHDN\"\n};\n\nexports.carthage = {\n  towgs84: \"-263.0,6.0,431.0\",\n  ellipse: \"clark80\",\n  datumName: \"Carthage 1934 Tunisia\"\n};\n\nexports.hermannskogel = {\n  towgs84: \"653.0,-212.0,449.0\",\n  ellipse: \"bessel\",\n  datumName: \"Hermannskogel\"\n};\n\nexports.osni52 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"airy\",\n  datumName: \"Irish National\"\n};\n\nexports.ire65 = {\n  towgs84: \"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15\",\n  ellipse: \"mod_airy\",\n  datumName: \"Ireland 1965\"\n};\n\nexports.rassadiran = {\n  towgs84: \"-133.63,-157.5,-158.62\",\n  ellipse: \"intl\",\n  datumName: \"Rassadiran\"\n};\n\nexports.nzgd49 = {\n  towgs84: \"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993\",\n  ellipse: \"intl\",\n  datumName: \"New Zealand Geodetic Datum 1949\"\n};\n\nexports.osgb36 = {\n  towgs84: \"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894\",\n  ellipse: \"airy\",\n  datumName: \"Airy 1830\"\n};\n\nexports.s_jtsk = {\n  towgs84: \"589,76,480\",\n  ellipse: 'bessel',\n  datumName: 'S-JTSK (Ferro)'\n};\n\nexports.beduaram = {\n  towgs84: '-106,-87,188',\n  ellipse: 'clrk80',\n  datumName: 'Beduaram'\n};\n\nexports.gunung_segara = {\n  towgs84: '-403,684,41',\n  ellipse: 'bessel',\n  datumName: 'Gunung Segara Jakarta'\n};\n\nexports.rnb72 = {\n  towgs84: \"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1\",\n  ellipse: \"intl\",\n  datumName: \"Reseau National Belge 1972\"\n};\n","import {PJD_3PARAM, PJD_7PARAM, PJD_WGS84, PJD_NODATUM, SEC_TO_RAD} from './constants/values';\n\nfunction datum(datumCode, datum_params, a, b, es, ep2) {\n  var out = {};\n\n  if (datumCode === undefined || datumCode === 'none') {\n    out.datum_type = PJD_NODATUM;\n  } else {\n    out.datum_type = PJD_WGS84;\n  }\n\n  if (datum_params) {\n    out.datum_params = datum_params.map(parseFloat);\n    if (out.datum_params[0] !== 0 || out.datum_params[1] !== 0 || out.datum_params[2] !== 0) {\n      out.datum_type = PJD_3PARAM;\n    }\n    if (out.datum_params.length > 3) {\n      if (out.datum_params[3] !== 0 || out.datum_params[4] !== 0 || out.datum_params[5] !== 0 || out.datum_params[6] !== 0) {\n        out.datum_type = PJD_7PARAM;\n        out.datum_params[3] *= SEC_TO_RAD;\n        out.datum_params[4] *= SEC_TO_RAD;\n        out.datum_params[5] *= SEC_TO_RAD;\n        out.datum_params[6] = (out.datum_params[6] / 1000000.0) + 1.0;\n      }\n    }\n  }\n\n  out.a = a; //datum object also uses these values\n  out.b = b;\n  out.es = es;\n  out.ep2 = ep2;\n  return out;\n}\n\nexport default datum;\n","import parseCode from './parseCode';\nimport extend from './extend';\nimport projections from './projections';\nimport {sphere as dc_sphere, eccentricity as dc_eccentricity} from './deriveConstants';\nimport Datum from './constants/Datum';\nimport datum from './datum';\nimport match from './match';\n\nfunction Projection(srsCode,callback) {\n  if (!(this instanceof Projection)) {\n    return new Projection(srsCode);\n  }\n  callback = callback || function(error){\n    if(error){\n      throw error;\n    }\n  };\n  var json = parseCode(srsCode);\n  if(typeof json !== 'object'){\n    callback(srsCode);\n    return;\n  }\n  var ourProj = Projection.projections.get(json.projName);\n  if(!ourProj){\n    callback(srsCode);\n    return;\n  }\n  if (json.datumCode && json.datumCode !== 'none') {\n    var datumDef = match(Datum, json.datumCode);\n    if (datumDef) {\n      json.datum_params = datumDef.towgs84 ? datumDef.towgs84.split(',') : null;\n      json.ellps = datumDef.ellipse;\n      json.datumName = datumDef.datumName ? datumDef.datumName : json.datumCode;\n    }\n  }\n  json.k0 = json.k0 || 1.0;\n  json.axis = json.axis || 'enu';\n  json.ellps = json.ellps || 'wgs84';\n  var sphere_ = dc_sphere(json.a, json.b, json.rf, json.ellps, json.sphere);\n  var ecc = dc_eccentricity(sphere_.a, sphere_.b, sphere_.rf, json.R_A);\n  var datumObj = json.datum || datum(json.datumCode, json.datum_params, sphere_.a, sphere_.b, ecc.es, ecc.ep2);\n\n  extend(this, json); // transfer everything over from the projection because we don't know what we'll need\n  extend(this, ourProj); // transfer all the methods from the projection\n\n  // copy the 4 things over we calulated in deriveConstants.sphere\n  this.a = sphere_.a;\n  this.b = sphere_.b;\n  this.rf = sphere_.rf;\n  this.sphere = sphere_.sphere;\n\n  // copy the 3 things we calculated in deriveConstants.eccentricity\n  this.es = ecc.es;\n  this.e = ecc.e;\n  this.ep2 = ecc.ep2;\n\n  // add in the datum object\n  this.datum = datumObj;\n\n  // init the projection\n  this.init();\n\n  // legecy callback from back in the day when it went to spatialreference.org\n  callback(null, this);\n\n}\nProjection.projections = projections;\nProjection.projections.start();\nexport default Projection;\n","import {SIXTH, RA4, RA6, EPSLN} from './constants/values';\nimport {default as Ellipsoid, WGS84} from './constants/Ellipsoid';\nimport match from './match';\n\nexport function eccentricity(a, b, rf, R_A) {\n  var a2 = a * a; // used in geocentric\n  var b2 = b * b; // used in geocentric\n  var es = (a2 - b2) / a2; // e ^ 2\n  var e = 0;\n  if (R_A) {\n    a *= 1 - es * (SIXTH + es * (RA4 + es * RA6));\n    a2 = a * a;\n    es = 0;\n  } else {\n    e = Math.sqrt(es); // eccentricity\n  }\n  var ep2 = (a2 - b2) / b2; // used in geocentric\n  return {\n    es: es,\n    e: e,\n    ep2: ep2\n  };\n}\nexport function sphere(a, b, rf, ellps, sphere) {\n  if (!a) { // do we have an ellipsoid?\n    var ellipse = match(Ellipsoid, ellps);\n    if (!ellipse) {\n      ellipse = WGS84;\n    }\n    a = ellipse.a;\n    b = ellipse.b;\n    rf = ellipse.rf;\n  }\n\n  if (rf && !b) {\n    b = (1.0 - 1.0 / rf) * a;\n  }\n  if (rf === 0 || Math.abs(a - b) < EPSLN) {\n    sphere = true;\n    b = a;\n  }\n  return {\n    a: a,\n    b: b,\n    rf: rf,\n    sphere: sphere\n  };\n}\n","'use strict';\nimport {PJD_3PARAM, PJD_7PARAM, HALF_PI} from './constants/values';\nexport function compareDatums(source, dest) {\n  if (source.datum_type !== dest.datum_type) {\n    return false; // false, datums are not equal\n  } else if (source.a !== dest.a || Math.abs(source.es - dest.es) > 0.000000000050) {\n    // the tolerance for es is to ensure that GRS80 and WGS84\n    // are considered identical\n    return false;\n  } else if (source.datum_type === PJD_3PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2]);\n  } else if (source.datum_type === PJD_7PARAM) {\n    return (source.datum_params[0] === dest.datum_params[0] && source.datum_params[1] === dest.datum_params[1] && source.datum_params[2] === dest.datum_params[2] && source.datum_params[3] === dest.datum_params[3] && source.datum_params[4] === dest.datum_params[4] && source.datum_params[5] === dest.datum_params[5] && source.datum_params[6] === dest.datum_params[6]);\n  } else {\n    return true; // datums are equal\n  }\n} // cs_compare_datums()\n\n/*\n * The function Convert_Geodetic_To_Geocentric converts geodetic coordinates\n * (latitude, longitude, and height) to geocentric coordinates (X, Y, Z),\n * according to the current ellipsoid parameters.\n *\n *    Latitude  : Geodetic latitude in radians                     (input)\n *    Longitude : Geodetic longitude in radians                    (input)\n *    Height    : Geodetic height, in meters                       (input)\n *    X         : Calculated Geocentric X coordinate, in meters    (output)\n *    Y         : Calculated Geocentric Y coordinate, in meters    (output)\n *    Z         : Calculated Geocentric Z coordinate, in meters    (output)\n *\n */\nexport function geodeticToGeocentric(p, es, a) {\n  var Longitude = p.x;\n  var Latitude = p.y;\n  var Height = p.z ? p.z : 0; //Z value not always supplied\n\n  var Rn; /*  Earth radius at location  */\n  var Sin_Lat; /*  Math.sin(Latitude)  */\n  var Sin2_Lat; /*  Square of Math.sin(Latitude)  */\n  var Cos_Lat; /*  Math.cos(Latitude)  */\n\n  /*\n   ** Don't blow up if Latitude is just a little out of the value\n   ** range as it may just be a rounding issue.  Also removed longitude\n   ** test, it should be wrapped by Math.cos() and Math.sin().  NFW for PROJ.4, Sep/2001.\n   */\n  if (Latitude < -HALF_PI && Latitude > -1.001 * HALF_PI) {\n    Latitude = -HALF_PI;\n  } else if (Latitude > HALF_PI && Latitude < 1.001 * HALF_PI) {\n    Latitude = HALF_PI;\n  } else if (Latitude < -HALF_PI) {\n    /* Latitude out of range */\n    //..reportError('geocent:lat out of range:' + Latitude);\n    return { x: -Infinity, y: -Infinity, z: p.z };\n  } else if (Latitude > HALF_PI) {\n    /* Latitude out of range */\n    return { x: Infinity, y: Infinity, z: p.z };\n  }\n\n  if (Longitude > Math.PI) {\n    Longitude -= (2 * Math.PI);\n  }\n  Sin_Lat = Math.sin(Latitude);\n  Cos_Lat = Math.cos(Latitude);\n  Sin2_Lat = Sin_Lat * Sin_Lat;\n  Rn = a / (Math.sqrt(1.0e0 - es * Sin2_Lat));\n  return {\n    x: (Rn + Height) * Cos_Lat * Math.cos(Longitude),\n    y: (Rn + Height) * Cos_Lat * Math.sin(Longitude),\n    z: ((Rn * (1 - es)) + Height) * Sin_Lat\n  };\n} // cs_geodetic_to_geocentric()\n\nexport function geocentricToGeodetic(p, es, a, b) {\n  /* local defintions and variables */\n  /* end-criterium of loop, accuracy of sin(Latitude) */\n  var genau = 1e-12;\n  var genau2 = (genau * genau);\n  var maxiter = 30;\n\n  var P; /* distance between semi-minor axis and location */\n  var RR; /* distance between center and location */\n  var CT; /* sin of geocentric latitude */\n  var ST; /* cos of geocentric latitude */\n  var RX;\n  var RK;\n  var RN; /* Earth radius at location */\n  var CPHI0; /* cos of start or old geodetic latitude in iterations */\n  var SPHI0; /* sin of start or old geodetic latitude in iterations */\n  var CPHI; /* cos of searched geodetic latitude */\n  var SPHI; /* sin of searched geodetic latitude */\n  var SDPHI; /* end-criterium: addition-theorem of sin(Latitude(iter)-Latitude(iter-1)) */\n  var iter; /* # of continous iteration, max. 30 is always enough (s.a.) */\n\n  var X = p.x;\n  var Y = p.y;\n  var Z = p.z ? p.z : 0.0; //Z value not always supplied\n  var Longitude;\n  var Latitude;\n  var Height;\n\n  P = Math.sqrt(X * X + Y * Y);\n  RR = Math.sqrt(X * X + Y * Y + Z * Z);\n\n  /*      special cases for latitude and longitude */\n  if (P / a < genau) {\n\n    /*  special case, if P=0. (X=0., Y=0.) */\n    Longitude = 0.0;\n\n    /*  if (X,Y,Z)=(0.,0.,0.) then Height becomes semi-minor axis\n     *  of ellipsoid (=center of mass), Latitude becomes PI/2 */\n    if (RR / a < genau) {\n      Latitude = HALF_PI;\n      Height = -b;\n      return {\n        x: p.x,\n        y: p.y,\n        z: p.z\n      };\n    }\n  } else {\n    /*  ellipsoidal (geodetic) longitude\n     *  interval: -PI < Longitude <= +PI */\n    Longitude = Math.atan2(Y, X);\n  }\n\n  /* --------------------------------------------------------------\n   * Following iterative algorithm was developped by\n   * \"Institut for Erdmessung\", University of Hannover, July 1988.\n   * Internet: www.ife.uni-hannover.de\n   * Iterative computation of CPHI,SPHI and Height.\n   * Iteration of CPHI and SPHI to 10**-12 radian resp.\n   * 2*10**-7 arcsec.\n   * --------------------------------------------------------------\n   */\n  CT = Z / RR;\n  ST = P / RR;\n  RX = 1.0 / Math.sqrt(1.0 - es * (2.0 - es) * ST * ST);\n  CPHI0 = ST * (1.0 - es) * RX;\n  SPHI0 = CT * RX;\n  iter = 0;\n\n  /* loop to find sin(Latitude) resp. Latitude\n   * until |sin(Latitude(iter)-Latitude(iter-1))| < genau */\n  do {\n    iter++;\n    RN = a / Math.sqrt(1.0 - es * SPHI0 * SPHI0);\n\n    /*  ellipsoidal (geodetic) height */\n    Height = P * CPHI0 + Z * SPHI0 - RN * (1.0 - es * SPHI0 * SPHI0);\n\n    RK = es * RN / (RN + Height);\n    RX = 1.0 / Math.sqrt(1.0 - RK * (2.0 - RK) * ST * ST);\n    CPHI = ST * (1.0 - RK) * RX;\n    SPHI = CT * RX;\n    SDPHI = SPHI * CPHI0 - CPHI * SPHI0;\n    CPHI0 = CPHI;\n    SPHI0 = SPHI;\n  }\n  while (SDPHI * SDPHI > genau2 && iter < maxiter);\n\n  /*      ellipsoidal (geodetic) latitude */\n  Latitude = Math.atan(SPHI / Math.abs(CPHI));\n  return {\n    x: Longitude,\n    y: Latitude,\n    z: Height\n  };\n} // cs_geocentric_to_geodetic()\n\n/****************************************************************/\n// pj_geocentic_to_wgs84( p )\n//  p = point to transform in geocentric coordinates (x,y,z)\n\n\n/** point object, nothing fancy, just allows values to be\n    passed back and forth by reference rather than by value.\n    Other point classes may be used as long as they have\n    x and y properties, which will get modified in the transform method.\n*/\nexport function geocentricToWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x + datum_params[0],\n      y: p.y + datum_params[1],\n      z: p.z + datum_params[2],\n    };\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    // if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: M_BF * (p.x - Rz_BF * p.y + Ry_BF * p.z) + Dx_BF,\n      y: M_BF * (Rz_BF * p.x + p.y - Rx_BF * p.z) + Dy_BF,\n      z: M_BF * (-Ry_BF * p.x + Rx_BF * p.y + p.z) + Dz_BF\n    };\n  }\n} // cs_geocentric_to_wgs84\n\n/****************************************************************/\n// pj_geocentic_from_wgs84()\n//  coordinate system definition,\n//  point to transform in geocentric coordinates (x,y,z)\nexport function geocentricFromWgs84(p, datum_type, datum_params) {\n\n  if (datum_type === PJD_3PARAM) {\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n    return {\n      x: p.x - datum_params[0],\n      y: p.y - datum_params[1],\n      z: p.z - datum_params[2],\n    };\n\n  } else if (datum_type === PJD_7PARAM) {\n    var Dx_BF = datum_params[0];\n    var Dy_BF = datum_params[1];\n    var Dz_BF = datum_params[2];\n    var Rx_BF = datum_params[3];\n    var Ry_BF = datum_params[4];\n    var Rz_BF = datum_params[5];\n    var M_BF = datum_params[6];\n    var x_tmp = (p.x - Dx_BF) / M_BF;\n    var y_tmp = (p.y - Dy_BF) / M_BF;\n    var z_tmp = (p.z - Dz_BF) / M_BF;\n    //if( x[io] === HUGE_VAL )\n    //    continue;\n\n    return {\n      x: x_tmp + Rz_BF * y_tmp - Ry_BF * z_tmp,\n      y: -Rz_BF * x_tmp + y_tmp + Rx_BF * z_tmp,\n      z: Ry_BF * x_tmp - Rx_BF * y_tmp + z_tmp\n    };\n  } //cs_geocentric_from_wgs84()\n}\n","import {PJD_3PARAM, PJD_7PARAM, PJD_NODATUM} from './constants/values';\n\nimport {geodeticToGeocentric, geocentricToGeodetic, geocentricToWgs84, geocentricFromWgs84, compareDatums} from './datumUtils';\nfunction checkParams(type) {\n  return (type === PJD_3PARAM || type === PJD_7PARAM);\n}\n\nexport default function(source, dest, point) {\n  // Short cut if the datums are identical.\n  if (compareDatums(source, dest)) {\n    return point; // in this case, zero is sucess,\n    // whereas cs_compare_datums returns 1 to indicate TRUE\n    // confusing, should fix this\n  }\n\n  // Explicitly skip datum transform by setting 'datum=none' as parameter for either source or dest\n  if (source.datum_type === PJD_NODATUM || dest.datum_type === PJD_NODATUM) {\n    return point;\n  }\n\n  // If this datum requires grid shifts, then apply it to geodetic coordinates.\n\n  // Do we need to go through geocentric coordinates?\n  if (source.es === dest.es && source.a === dest.a && !checkParams(source.datum_type) &&  !checkParams(dest.datum_type)) {\n    return point;\n  }\n\n  // Convert to geocentric coordinates.\n  point = geodeticToGeocentric(point, source.es, source.a);\n  // Convert between datums\n  if (checkParams(source.datum_type)) {\n    point = geocentricToWgs84(point, source.datum_type, source.datum_params);\n  }\n  if (checkParams(dest.datum_type)) {\n    point = geocentricFromWgs84(point, dest.datum_type, dest.datum_params);\n  }\n  return geocentricToGeodetic(point, dest.es, dest.a, dest.b);\n\n}\n","export default function(crs, denorm, point) {\n  var xin = point.x,\n    yin = point.y,\n    zin = point.z || 0.0;\n  var v, t, i;\n  var out = {};\n  for (i = 0; i < 3; i++) {\n    if (denorm && i === 2 && point.z === undefined) {\n      continue;\n    }\n    if (i === 0) {\n      v = xin;\n      t = 'x';\n    }\n    else if (i === 1) {\n      v = yin;\n      t = 'y';\n    }\n    else {\n      v = zin;\n      t = 'z';\n    }\n    switch (crs.axis[i]) {\n    case 'e':\n      out[t] = v;\n      break;\n    case 'w':\n      out[t] = -v;\n      break;\n    case 'n':\n      out[t] = v;\n      break;\n    case 's':\n      out[t] = -v;\n      break;\n    case 'u':\n      if (point[t] !== undefined) {\n        out.z = v;\n      }\n      break;\n    case 'd':\n      if (point[t] !== undefined) {\n        out.z = -v;\n      }\n      break;\n    default:\n      //console.log(\"ERROR: unknow axis (\"+crs.axis[i]+\") - check definition of \"+crs.projName);\n      return null;\n    }\n  }\n  return out;\n}\n","export default function (array){\n  var out = {\n    x: array[0],\n    y: array[1]\n  };\n  if (array.length>2) {\n    out.z = array[2];\n  }\n  if (array.length>3) {\n    out.m = array[3];\n  }\n  return out;\n}","export default function (point) {\n  checkCoord(point.x);\n  checkCoord(point.y);\n}\nfunction checkCoord(num) {\n  if (typeof Number.isFinite === 'function') {\n    if (Number.isFinite(num)) {\n      return;\n    }\n    throw new TypeError('coordinates must be finite numbers');\n  }\n  if (typeof num !== 'number' || num !== num || !isFinite(num)) {\n    throw new TypeError('coordinates must be finite numbers');\n  }\n}\n","import {D2R, R2D, PJD_3PARAM, PJD_7PARAM} from './constants/values';\nimport datum_transform from './datum_transform';\nimport adjust_axis from './adjust_axis';\nimport proj from './Proj';\nimport toPoint from './common/toPoint';\nimport checkSanity from './checkSanity';\n\nfunction checkNotWGS(source, dest) {\n  return ((source.datum.datum_type === PJD_3PARAM || source.datum.datum_type === PJD_7PARAM) && dest.datumCode !== 'WGS84') || ((dest.datum.datum_type === PJD_3PARAM || dest.datum.datum_type === PJD_7PARAM) && source.datumCode !== 'WGS84');\n}\n\nexport default function transform(source, dest, point) {\n  var wgs84;\n  if (Array.isArray(point)) {\n    point = toPoint(point);\n  }\n  checkSanity(point);\n  // Workaround for datum shifts towgs84, if either source or destination projection is not wgs84\n  if (source.datum && dest.datum && checkNotWGS(source, dest)) {\n    wgs84 = new proj('WGS84');\n    point = transform(source, wgs84, point);\n    source = wgs84;\n  }\n  // DGR, 2010/11/12\n  if (source.axis !== 'enu') {\n    point = adjust_axis(source, false, point);\n  }\n  // Transform source points to long/lat, if they aren't already.\n  if (source.projName === 'longlat') {\n    point = {\n      x: point.x * D2R,\n      y: point.y * D2R,\n      z: point.z || 0\n    };\n  } else {\n    if (source.to_meter) {\n      point = {\n        x: point.x * source.to_meter,\n        y: point.y * source.to_meter,\n        z: point.z || 0\n      };\n    }\n    point = source.inverse(point); // Convert Cartesian to longlat\n  }\n  // Adjust for the prime meridian if necessary\n  if (source.from_greenwich) {\n    point.x += source.from_greenwich;\n  }\n\n  // Convert datums if needed, and if possible.\n  point = datum_transform(source.datum, dest.datum, point);\n\n  // Adjust for the prime meridian if necessary\n  if (dest.from_greenwich) {\n    point = {\n      x: point.x - dest.from_greenwich,\n      y: point.y,\n      z: point.z || 0\n    };\n  }\n\n  if (dest.projName === 'longlat') {\n    // convert radians to decimal degrees\n    point = {\n      x: point.x * R2D,\n      y: point.y * R2D,\n      z: point.z || 0\n    };\n  } else { // else project\n    point = dest.forward(point);\n    if (dest.to_meter) {\n      point = {\n        x: point.x / dest.to_meter,\n        y: point.y / dest.to_meter,\n        z: point.z || 0\n      };\n    }\n  }\n\n  // DGR, 2010/11/12\n  if (dest.axis !== 'enu') {\n    return adjust_axis(dest, true, point);\n  }\n\n  return point;\n}\n","import proj from './Proj';\nimport transform from './transform';\nvar wgs84 = proj('WGS84');\n\nfunction transformer(from, to, coords) {\n  var transformedArray, out, keys;\n  if (Array.isArray(coords)) {\n    transformedArray = transform(from, to, coords) || {x: NaN, y: NaN};\n    if (coords.length > 2) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (typeof transformedArray.z === 'number') {\n          return [transformedArray.x, transformedArray.y, transformedArray.z].concat(coords.splice(3));\n        } else {\n          return [transformedArray.x, transformedArray.y, coords[2]].concat(coords.splice(3));\n        }\n      } else {\n        return [transformedArray.x, transformedArray.y].concat(coords.splice(2));\n      }\n    } else {\n      return [transformedArray.x, transformedArray.y];\n    }\n  } else {\n    out = transform(from, to, coords);\n    keys = Object.keys(coords);\n    if (keys.length === 2) {\n      return out;\n    }\n    keys.forEach(function (key) {\n      if ((typeof from.name !== 'undefined' && from.name === 'geocent') || (typeof to.name !== 'undefined' && to.name === 'geocent')) {\n        if (key === 'x' || key === 'y' || key === 'z') {\n          return;\n        }\n      } else {\n        if (key === 'x' || key === 'y') {\n          return;\n        }\n      }\n      out[key] = coords[key];\n    });\n    return out;\n  }\n}\n\nfunction checkProj(item) {\n  if (item instanceof proj) {\n    return item;\n  }\n  if (item.oProj) {\n    return item.oProj;\n  }\n  return proj(item);\n}\n\nfunction proj4(fromProj, toProj, coord) {\n  fromProj = checkProj(fromProj);\n  var single = false;\n  var obj;\n  if (typeof toProj === 'undefined') {\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  } else if (typeof toProj.x !== 'undefined' || Array.isArray(toProj)) {\n    coord = toProj;\n    toProj = fromProj;\n    fromProj = wgs84;\n    single = true;\n  }\n  toProj = checkProj(toProj);\n  if (coord) {\n    return transformer(fromProj, toProj, coord);\n  } else {\n    obj = {\n      forward: function (coords) {\n        return transformer(fromProj, toProj, coords);\n      },\n      inverse: function (coords) {\n        return transformer(toProj, fromProj, coords);\n      }\n    };\n    if (single) {\n      obj.oProj = toProj;\n    }\n    return obj;\n  }\n}\nexport default proj4;","\n\n\n/**\n * UTM zones are grouped, and assigned to one of a group of 6\n * sets.\n *\n * {int} @private\n */\nvar NUM_100K_SETS = 6;\n\n/**\n * The column letters (for easting) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_COLUMN_LETTERS = 'AJSAJS';\n\n/**\n * The row letters (for northing) of the lower left value, per\n * set.\n *\n * {string} @private\n */\nvar SET_ORIGIN_ROW_LETTERS = 'AFAFAF';\n\nvar A = 65; // A\nvar I = 73; // I\nvar O = 79; // O\nvar V = 86; // V\nvar Z = 90; // Z\nexport default {\n  forward: forward,\n  inverse: inverse,\n  toPoint: toPoint\n};\n/**\n * Conversion of lat/lon to MGRS.\n *\n * @param {object} ll Object literal with lat and lon properties on a\n *     WGS84 ellipsoid.\n * @param {int} accuracy Accuracy in digits (5 for 1 m, 4 for 10 m, 3 for\n *      100 m, 2 for 1000 m or 1 for 10000 m). Optional, default is 5.\n * @return {string} the MGRS string for the given location and accuracy.\n */\nexport function forward(ll, accuracy) {\n  accuracy = accuracy || 5; // default accuracy 1m\n  return encode(LLtoUTM({\n    lat: ll[1],\n    lon: ll[0]\n  }), accuracy);\n};\n\n/**\n * Conversion of MGRS to lat/lon.\n *\n * @param {string} mgrs MGRS string.\n * @return {array} An array with left (longitude), bottom (latitude), right\n *     (longitude) and top (latitude) values in WGS84, representing the\n *     bounding box for the provided MGRS reference.\n */\nexport function inverse(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat, bbox.lon, bbox.lat];\n  }\n  return [bbox.left, bbox.bottom, bbox.right, bbox.top];\n};\n\nexport function toPoint(mgrs) {\n  var bbox = UTMtoLL(decode(mgrs.toUpperCase()));\n  if (bbox.lat && bbox.lon) {\n    return [bbox.lon, bbox.lat];\n  }\n  return [(bbox.left + bbox.right) / 2, (bbox.top + bbox.bottom) / 2];\n};\n/**\n * Conversion from degrees to radians.\n *\n * @private\n * @param {number} deg the angle in degrees.\n * @return {number} the angle in radians.\n */\nfunction degToRad(deg) {\n  return (deg * (Math.PI / 180.0));\n}\n\n/**\n * Conversion from radians to degrees.\n *\n * @private\n * @param {number} rad the angle in radians.\n * @return {number} the angle in degrees.\n */\nfunction radToDeg(rad) {\n  return (180.0 * (rad / Math.PI));\n}\n\n/**\n * Converts a set of Longitude and Latitude co-ordinates to UTM\n * using the WGS84 ellipsoid.\n *\n * @private\n * @param {object} ll Object literal with lat and lon properties\n *     representing the WGS84 coordinate to be converted.\n * @return {object} Object literal containing the UTM value with easting,\n *     northing, zoneNumber and zoneLetter properties, and an optional\n *     accuracy property in digits. Returns null if the conversion failed.\n */\nfunction LLtoUTM(ll) {\n  var Lat = ll.lat;\n  var Long = ll.lon;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var k0 = 0.9996;\n  var LongOrigin;\n  var eccPrimeSquared;\n  var N, T, C, A, M;\n  var LatRad = degToRad(Lat);\n  var LongRad = degToRad(Long);\n  var LongOriginRad;\n  var ZoneNumber;\n  // (int)\n  ZoneNumber = Math.floor((Long + 180) / 6) + 1;\n\n  //Make sure the longitude 180.00 is in Zone 60\n  if (Long === 180) {\n    ZoneNumber = 60;\n  }\n\n  // Special zone for Norway\n  if (Lat >= 56.0 && Lat < 64.0 && Long >= 3.0 && Long < 12.0) {\n    ZoneNumber = 32;\n  }\n\n  // Special zones for Svalbard\n  if (Lat >= 72.0 && Lat < 84.0) {\n    if (Long >= 0.0 && Long < 9.0) {\n      ZoneNumber = 31;\n    }\n    else if (Long >= 9.0 && Long < 21.0) {\n      ZoneNumber = 33;\n    }\n    else if (Long >= 21.0 && Long < 33.0) {\n      ZoneNumber = 35;\n    }\n    else if (Long >= 33.0 && Long < 42.0) {\n      ZoneNumber = 37;\n    }\n  }\n\n  LongOrigin = (ZoneNumber - 1) * 6 - 180 + 3; //+3 puts origin\n  // in middle of\n  // zone\n  LongOriginRad = degToRad(LongOrigin);\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  N = a / Math.sqrt(1 - eccSquared * Math.sin(LatRad) * Math.sin(LatRad));\n  T = Math.tan(LatRad) * Math.tan(LatRad);\n  C = eccPrimeSquared * Math.cos(LatRad) * Math.cos(LatRad);\n  A = Math.cos(LatRad) * (LongRad - LongOriginRad);\n\n  M = a * ((1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256) * LatRad - (3 * eccSquared / 8 + 3 * eccSquared * eccSquared / 32 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(2 * LatRad) + (15 * eccSquared * eccSquared / 256 + 45 * eccSquared * eccSquared * eccSquared / 1024) * Math.sin(4 * LatRad) - (35 * eccSquared * eccSquared * eccSquared / 3072) * Math.sin(6 * LatRad));\n\n  var UTMEasting = (k0 * N * (A + (1 - T + C) * A * A * A / 6.0 + (5 - 18 * T + T * T + 72 * C - 58 * eccPrimeSquared) * A * A * A * A * A / 120.0) + 500000.0);\n\n  var UTMNorthing = (k0 * (M + N * Math.tan(LatRad) * (A * A / 2 + (5 - T + 9 * C + 4 * C * C) * A * A * A * A / 24.0 + (61 - 58 * T + T * T + 600 * C - 330 * eccPrimeSquared) * A * A * A * A * A * A / 720.0)));\n  if (Lat < 0.0) {\n    UTMNorthing += 10000000.0; //10000000 meter offset for\n    // southern hemisphere\n  }\n\n  return {\n    northing: Math.round(UTMNorthing),\n    easting: Math.round(UTMEasting),\n    zoneNumber: ZoneNumber,\n    zoneLetter: getLetterDesignator(Lat)\n  };\n}\n\n/**\n * Converts UTM coords to lat/long, using the WGS84 ellipsoid. This is a convenience\n * class where the Zone can be specified as a single string eg.\"60N\" which\n * is then broken down into the ZoneNumber and ZoneLetter.\n *\n * @private\n * @param {object} utm An object literal with northing, easting, zoneNumber\n *     and zoneLetter properties. If an optional accuracy property is\n *     provided (in meters), a bounding box will be returned instead of\n *     latitude and longitude.\n * @return {object} An object literal containing either lat and lon values\n *     (if no accuracy was provided), or top, right, bottom and left values\n *     for the bounding box calculated according to the provided accuracy.\n *     Returns null if the conversion failed.\n */\nfunction UTMtoLL(utm) {\n\n  var UTMNorthing = utm.northing;\n  var UTMEasting = utm.easting;\n  var zoneLetter = utm.zoneLetter;\n  var zoneNumber = utm.zoneNumber;\n  // check the ZoneNummber is valid\n  if (zoneNumber < 0 || zoneNumber > 60) {\n    return null;\n  }\n\n  var k0 = 0.9996;\n  var a = 6378137.0; //ellip.radius;\n  var eccSquared = 0.00669438; //ellip.eccsq;\n  var eccPrimeSquared;\n  var e1 = (1 - Math.sqrt(1 - eccSquared)) / (1 + Math.sqrt(1 - eccSquared));\n  var N1, T1, C1, R1, D, M;\n  var LongOrigin;\n  var mu, phi1Rad;\n\n  // remove 500,000 meter offset for longitude\n  var x = UTMEasting - 500000.0;\n  var y = UTMNorthing;\n\n  // We must know somehow if we are in the Northern or Southern\n  // hemisphere, this is the only time we use the letter So even\n  // if the Zone letter isn't exactly correct it should indicate\n  // the hemisphere correctly\n  if (zoneLetter < 'N') {\n    y -= 10000000.0; // remove 10,000,000 meter offset used\n    // for southern hemisphere\n  }\n\n  // There are 60 zones with zone 1 being at West -180 to -174\n  LongOrigin = (zoneNumber - 1) * 6 - 180 + 3; // +3 puts origin\n  // in middle of\n  // zone\n\n  eccPrimeSquared = (eccSquared) / (1 - eccSquared);\n\n  M = y / k0;\n  mu = M / (a * (1 - eccSquared / 4 - 3 * eccSquared * eccSquared / 64 - 5 * eccSquared * eccSquared * eccSquared / 256));\n\n  phi1Rad = mu + (3 * e1 / 2 - 27 * e1 * e1 * e1 / 32) * Math.sin(2 * mu) + (21 * e1 * e1 / 16 - 55 * e1 * e1 * e1 * e1 / 32) * Math.sin(4 * mu) + (151 * e1 * e1 * e1 / 96) * Math.sin(6 * mu);\n  // double phi1 = ProjMath.radToDeg(phi1Rad);\n\n  N1 = a / Math.sqrt(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad));\n  T1 = Math.tan(phi1Rad) * Math.tan(phi1Rad);\n  C1 = eccPrimeSquared * Math.cos(phi1Rad) * Math.cos(phi1Rad);\n  R1 = a * (1 - eccSquared) / Math.pow(1 - eccSquared * Math.sin(phi1Rad) * Math.sin(phi1Rad), 1.5);\n  D = x / (N1 * k0);\n\n  var lat = phi1Rad - (N1 * Math.tan(phi1Rad) / R1) * (D * D / 2 - (5 + 3 * T1 + 10 * C1 - 4 * C1 * C1 - 9 * eccPrimeSquared) * D * D * D * D / 24 + (61 + 90 * T1 + 298 * C1 + 45 * T1 * T1 - 252 * eccPrimeSquared - 3 * C1 * C1) * D * D * D * D * D * D / 720);\n  lat = radToDeg(lat);\n\n  var lon = (D - (1 + 2 * T1 + C1) * D * D * D / 6 + (5 - 2 * C1 + 28 * T1 - 3 * C1 * C1 + 8 * eccPrimeSquared + 24 * T1 * T1) * D * D * D * D * D / 120) / Math.cos(phi1Rad);\n  lon = LongOrigin + radToDeg(lon);\n\n  var result;\n  if (utm.accuracy) {\n    var topRight = UTMtoLL({\n      northing: utm.northing + utm.accuracy,\n      easting: utm.easting + utm.accuracy,\n      zoneLetter: utm.zoneLetter,\n      zoneNumber: utm.zoneNumber\n    });\n    result = {\n      top: topRight.lat,\n      right: topRight.lon,\n      bottom: lat,\n      left: lon\n    };\n  }\n  else {\n    result = {\n      lat: lat,\n      lon: lon\n    };\n  }\n  return result;\n}\n\n/**\n * Calculates the MGRS letter designator for the given latitude.\n *\n * @private\n * @param {number} lat The latitude in WGS84 to get the letter designator\n *     for.\n * @return {char} The letter designator.\n */\nfunction getLetterDesignator(lat) {\n  //This is here as an error flag to show that the Latitude is\n  //outside MGRS limits\n  var LetterDesignator = 'Z';\n\n  if ((84 >= lat) && (lat >= 72)) {\n    LetterDesignator = 'X';\n  }\n  else if ((72 > lat) && (lat >= 64)) {\n    LetterDesignator = 'W';\n  }\n  else if ((64 > lat) && (lat >= 56)) {\n    LetterDesignator = 'V';\n  }\n  else if ((56 > lat) && (lat >= 48)) {\n    LetterDesignator = 'U';\n  }\n  else if ((48 > lat) && (lat >= 40)) {\n    LetterDesignator = 'T';\n  }\n  else if ((40 > lat) && (lat >= 32)) {\n    LetterDesignator = 'S';\n  }\n  else if ((32 > lat) && (lat >= 24)) {\n    LetterDesignator = 'R';\n  }\n  else if ((24 > lat) && (lat >= 16)) {\n    LetterDesignator = 'Q';\n  }\n  else if ((16 > lat) && (lat >= 8)) {\n    LetterDesignator = 'P';\n  }\n  else if ((8 > lat) && (lat >= 0)) {\n    LetterDesignator = 'N';\n  }\n  else if ((0 > lat) && (lat >= -8)) {\n    LetterDesignator = 'M';\n  }\n  else if ((-8 > lat) && (lat >= -16)) {\n    LetterDesignator = 'L';\n  }\n  else if ((-16 > lat) && (lat >= -24)) {\n    LetterDesignator = 'K';\n  }\n  else if ((-24 > lat) && (lat >= -32)) {\n    LetterDesignator = 'J';\n  }\n  else if ((-32 > lat) && (lat >= -40)) {\n    LetterDesignator = 'H';\n  }\n  else if ((-40 > lat) && (lat >= -48)) {\n    LetterDesignator = 'G';\n  }\n  else if ((-48 > lat) && (lat >= -56)) {\n    LetterDesignator = 'F';\n  }\n  else if ((-56 > lat) && (lat >= -64)) {\n    LetterDesignator = 'E';\n  }\n  else if ((-64 > lat) && (lat >= -72)) {\n    LetterDesignator = 'D';\n  }\n  else if ((-72 > lat) && (lat >= -80)) {\n    LetterDesignator = 'C';\n  }\n  return LetterDesignator;\n}\n\n/**\n * Encodes a UTM location as MGRS string.\n *\n * @private\n * @param {object} utm An object literal with easting, northing,\n *     zoneLetter, zoneNumber\n * @param {number} accuracy Accuracy in digits (1-5).\n * @return {string} MGRS string for the given UTM location.\n */\nfunction encode(utm, accuracy) {\n  // prepend with leading zeroes\n  var seasting = \"00000\" + utm.easting,\n    snorthing = \"00000\" + utm.northing;\n\n  return utm.zoneNumber + utm.zoneLetter + get100kID(utm.easting, utm.northing, utm.zoneNumber) + seasting.substr(seasting.length - 5, accuracy) + snorthing.substr(snorthing.length - 5, accuracy);\n}\n\n/**\n * Get the two letter 100k designator for a given UTM easting,\n * northing and zone number value.\n *\n * @private\n * @param {number} easting\n * @param {number} northing\n * @param {number} zoneNumber\n * @return the two letter 100k designator for the given UTM location.\n */\nfunction get100kID(easting, northing, zoneNumber) {\n  var setParm = get100kSetForZone(zoneNumber);\n  var setColumn = Math.floor(easting / 100000);\n  var setRow = Math.floor(northing / 100000) % 20;\n  return getLetter100kID(setColumn, setRow, setParm);\n}\n\n/**\n * Given a UTM zone number, figure out the MGRS 100K set it is in.\n *\n * @private\n * @param {number} i An UTM zone number.\n * @return {number} the 100k set the UTM zone is in.\n */\nfunction get100kSetForZone(i) {\n  var setParm = i % NUM_100K_SETS;\n  if (setParm === 0) {\n    setParm = NUM_100K_SETS;\n  }\n\n  return setParm;\n}\n\n/**\n * Get the two-letter MGRS 100k designator given information\n * translated from the UTM northing, easting and zone number.\n *\n * @private\n * @param {number} column the column index as it relates to the MGRS\n *        100k set spreadsheet, created from the UTM easting.\n *        Values are 1-8.\n * @param {number} row the row index as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM northing value. Values\n *        are from 0-19.\n * @param {number} parm the set block, as it relates to the MGRS 100k set\n *        spreadsheet, created from the UTM zone. Values are from\n *        1-60.\n * @return two letter MGRS 100k code.\n */\nfunction getLetter100kID(column, row, parm) {\n  // colOrigin and rowOrigin are the letters at the origin of the set\n  var index = parm - 1;\n  var colOrigin = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(index);\n  var rowOrigin = SET_ORIGIN_ROW_LETTERS.charCodeAt(index);\n\n  // colInt and rowInt are the letters to build to return\n  var colInt = colOrigin + column - 1;\n  var rowInt = rowOrigin + row;\n  var rollover = false;\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n    rollover = true;\n  }\n\n  if (colInt === I || (colOrigin < I && colInt > I) || ((colInt > I || colOrigin < I) && rollover)) {\n    colInt++;\n  }\n\n  if (colInt === O || (colOrigin < O && colInt > O) || ((colInt > O || colOrigin < O) && rollover)) {\n    colInt++;\n\n    if (colInt === I) {\n      colInt++;\n    }\n  }\n\n  if (colInt > Z) {\n    colInt = colInt - Z + A - 1;\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n    rollover = true;\n  }\n  else {\n    rollover = false;\n  }\n\n  if (((rowInt === I) || ((rowOrigin < I) && (rowInt > I))) || (((rowInt > I) || (rowOrigin < I)) && rollover)) {\n    rowInt++;\n  }\n\n  if (((rowInt === O) || ((rowOrigin < O) && (rowInt > O))) || (((rowInt > O) || (rowOrigin < O)) && rollover)) {\n    rowInt++;\n\n    if (rowInt === I) {\n      rowInt++;\n    }\n  }\n\n  if (rowInt > V) {\n    rowInt = rowInt - V + A - 1;\n  }\n\n  var twoLetter = String.fromCharCode(colInt) + String.fromCharCode(rowInt);\n  return twoLetter;\n}\n\n/**\n * Decode the UTM parameters from a MGRS string.\n *\n * @private\n * @param {string} mgrsString an UPPERCASE coordinate string is expected.\n * @return {object} An object literal with easting, northing, zoneLetter,\n *     zoneNumber and accuracy (in meters) properties.\n */\nfunction decode(mgrsString) {\n\n  if (mgrsString && mgrsString.length === 0) {\n    throw (\"MGRSPoint coverting from nothing\");\n  }\n\n  var length = mgrsString.length;\n\n  var hunK = null;\n  var sb = \"\";\n  var testChar;\n  var i = 0;\n\n  // get Zone number\n  while (!(/[A-Z]/).test(testChar = mgrsString.charAt(i))) {\n    if (i >= 2) {\n      throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n    }\n    sb += testChar;\n    i++;\n  }\n\n  var zoneNumber = parseInt(sb, 10);\n\n  if (i === 0 || i + 3 > length) {\n    // A good MGRS string has to be 4-5 digits long,\n    // ##AAA/#AAA at least.\n    throw (\"MGRSPoint bad conversion from: \" + mgrsString);\n  }\n\n  var zoneLetter = mgrsString.charAt(i++);\n\n  // Should we check the zone letter here? Why not.\n  if (zoneLetter <= 'A' || zoneLetter === 'B' || zoneLetter === 'Y' || zoneLetter >= 'Z' || zoneLetter === 'I' || zoneLetter === 'O') {\n    throw (\"MGRSPoint zone letter \" + zoneLetter + \" not handled: \" + mgrsString);\n  }\n\n  hunK = mgrsString.substring(i, i += 2);\n\n  var set = get100kSetForZone(zoneNumber);\n\n  var east100k = getEastingFromChar(hunK.charAt(0), set);\n  var north100k = getNorthingFromChar(hunK.charAt(1), set);\n\n  // We have a bug where the northing may be 2000000 too low.\n  // How\n  // do we know when to roll over?\n\n  while (north100k < getMinNorthing(zoneLetter)) {\n    north100k += 2000000;\n  }\n\n  // calculate the char index for easting/northing separator\n  var remainder = length - i;\n\n  if (remainder % 2 !== 0) {\n    throw (\"MGRSPoint has to have an even number \\nof digits after the zone letter and two 100km letters - front \\nhalf for easting meters, second half for \\nnorthing meters\" + mgrsString);\n  }\n\n  var sep = remainder / 2;\n\n  var sepEasting = 0.0;\n  var sepNorthing = 0.0;\n  var accuracyBonus, sepEastingString, sepNorthingString, easting, northing;\n  if (sep > 0) {\n    accuracyBonus = 100000.0 / Math.pow(10, sep);\n    sepEastingString = mgrsString.substring(i, i + sep);\n    sepEasting = parseFloat(sepEastingString) * accuracyBonus;\n    sepNorthingString = mgrsString.substring(i + sep);\n    sepNorthing = parseFloat(sepNorthingString) * accuracyBonus;\n  }\n\n  easting = sepEasting + east100k;\n  northing = sepNorthing + north100k;\n\n  return {\n    easting: easting,\n    northing: northing,\n    zoneLetter: zoneLetter,\n    zoneNumber: zoneNumber,\n    accuracy: accuracyBonus\n  };\n}\n\n/**\n * Given the first letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the easting value that\n * should be added to the other, secondary easting value.\n *\n * @private\n * @param {char} e The first letter from a two-letter MGRS 100k zone.\n * @param {number} set The MGRS table set for the zone number.\n * @return {number} The easting value for the given letter and set.\n */\nfunction getEastingFromChar(e, set) {\n  // colOrigin is the letter at the origin of the set for the\n  // column\n  var curCol = SET_ORIGIN_COLUMN_LETTERS.charCodeAt(set - 1);\n  var eastingValue = 100000.0;\n  var rewindMarker = false;\n\n  while (curCol !== e.charCodeAt(0)) {\n    curCol++;\n    if (curCol === I) {\n      curCol++;\n    }\n    if (curCol === O) {\n      curCol++;\n    }\n    if (curCol > Z) {\n      if (rewindMarker) {\n        throw (\"Bad character: \" + e);\n      }\n      curCol = A;\n      rewindMarker = true;\n    }\n    eastingValue += 100000.0;\n  }\n\n  return eastingValue;\n}\n\n/**\n * Given the second letter from a two-letter MGRS 100k zone, and given the\n * MGRS table set for the zone number, figure out the northing value that\n * should be added to the other, secondary northing value. You have to\n * remember that Northings are determined from the equator, and the vertical\n * cycle of letters mean a 2000000 additional northing meters. This happens\n * approx. every 18 degrees of latitude. This method does *NOT* count any\n * additional northings. You have to figure out how many 2000000 meters need\n * to be added for the zone letter of the MGRS coordinate.\n *\n * @private\n * @param {char} n Second letter of the MGRS 100k zone\n * @param {number} set The MGRS table set number, which is dependent on the\n *     UTM zone number.\n * @return {number} The northing value for the given letter and set.\n */\nfunction getNorthingFromChar(n, set) {\n\n  if (n > 'V') {\n    throw (\"MGRSPoint given invalid Northing \" + n);\n  }\n\n  // rowOrigin is the letter at the origin of the set for the\n  // column\n  var curRow = SET_ORIGIN_ROW_LETTERS.charCodeAt(set - 1);\n  var northingValue = 0.0;\n  var rewindMarker = false;\n\n  while (curRow !== n.charCodeAt(0)) {\n    curRow++;\n    if (curRow === I) {\n      curRow++;\n    }\n    if (curRow === O) {\n      curRow++;\n    }\n    // fixing a bug making whole application hang in this loop\n    // when 'n' is a wrong character\n    if (curRow > V) {\n      if (rewindMarker) { // making sure that this loop ends\n        throw (\"Bad character: \" + n);\n      }\n      curRow = A;\n      rewindMarker = true;\n    }\n    northingValue += 100000.0;\n  }\n\n  return northingValue;\n}\n\n/**\n * The function getMinNorthing returns the minimum northing value of a MGRS\n * zone.\n *\n * Ported from Geotrans' c Lattitude_Band_Value structure table.\n *\n * @private\n * @param {char} zoneLetter The MGRS zone to get the min northing for.\n * @return {number}\n */\nfunction getMinNorthing(zoneLetter) {\n  var northing;\n  switch (zoneLetter) {\n  case 'C':\n    northing = 1100000.0;\n    break;\n  case 'D':\n    northing = 2000000.0;\n    break;\n  case 'E':\n    northing = 2800000.0;\n    break;\n  case 'F':\n    northing = 3700000.0;\n    break;\n  case 'G':\n    northing = 4600000.0;\n    break;\n  case 'H':\n    northing = 5500000.0;\n    break;\n  case 'J':\n    northing = 6400000.0;\n    break;\n  case 'K':\n    northing = 7300000.0;\n    break;\n  case 'L':\n    northing = 8200000.0;\n    break;\n  case 'M':\n    northing = 9100000.0;\n    break;\n  case 'N':\n    northing = 0.0;\n    break;\n  case 'P':\n    northing = 800000.0;\n    break;\n  case 'Q':\n    northing = 1700000.0;\n    break;\n  case 'R':\n    northing = 2600000.0;\n    break;\n  case 'S':\n    northing = 3500000.0;\n    break;\n  case 'T':\n    northing = 4400000.0;\n    break;\n  case 'U':\n    northing = 5300000.0;\n    break;\n  case 'V':\n    northing = 6200000.0;\n    break;\n  case 'W':\n    northing = 7000000.0;\n    break;\n  case 'X':\n    northing = 7900000.0;\n    break;\n  default:\n    northing = -1.0;\n  }\n  if (northing >= 0.0) {\n    return northing;\n  }\n  else {\n    throw (\"Invalid zone letter: \" + zoneLetter);\n  }\n\n}\n","import {toPoint, forward} from 'mgrs';\n\nfunction Point(x, y, z) {\n  if (!(this instanceof Point)) {\n    return new Point(x, y, z);\n  }\n  if (Array.isArray(x)) {\n    this.x = x[0];\n    this.y = x[1];\n    this.z = x[2] || 0.0;\n  } else if(typeof x === 'object') {\n    this.x = x.x;\n    this.y = x.y;\n    this.z = x.z || 0.0;\n  } else if (typeof x === 'string' && typeof y === 'undefined') {\n    var coords = x.split(',');\n    this.x = parseFloat(coords[0], 10);\n    this.y = parseFloat(coords[1], 10);\n    this.z = parseFloat(coords[2], 10) || 0.0;\n  } else {\n    this.x = x;\n    this.y = y;\n    this.z = z || 0.0;\n  }\n  console.warn('proj4.Point will be removed in version 3, use proj4.toPoint');\n}\n\nPoint.fromMGRS = function(mgrsStr) {\n  return new Point(toPoint(mgrsStr));\n};\nPoint.prototype.toMGRS = function(accuracy) {\n  return forward([this.x, this.y], accuracy);\n};\nexport default Point;\n","var C00 = 1;\nvar C02 = 0.25;\nvar C04 = 0.046875;\nvar C06 = 0.01953125;\nvar C08 = 0.01068115234375;\nvar C22 = 0.75;\nvar C44 = 0.46875;\nvar C46 = 0.01302083333333333333;\nvar C48 = 0.00712076822916666666;\nvar C66 = 0.36458333333333333333;\nvar C68 = 0.00569661458333333333;\nvar C88 = 0.3076171875;\n\nexport default function(es) {\n  var en = [];\n  en[0] = C00 - es * (C02 + es * (C04 + es * (C06 + es * C08)));\n  en[1] = es * (C22 - es * (C04 + es * (C06 + es * C08)));\n  var t = es * es;\n  en[2] = t * (C44 - es * (C46 + es * C48));\n  t *= es;\n  en[3] = t * (C66 - es * C68);\n  en[4] = t * es * C88;\n  return en;\n}","export default function(phi, sphi, cphi, en) {\n  cphi *= sphi;\n  sphi *= sphi;\n  return (en[0] * phi - cphi * (en[1] + sphi * (en[2] + sphi * (en[3] + sphi * en[4]))));\n}","import pj_mlfn from \"./pj_mlfn\";\nimport {EPSLN} from '../constants/values';\n\nvar MAX_ITER = 20;\n\nexport default function(arg, es, en) {\n  var k = 1 / (1 - es);\n  var phi = arg;\n  for (var i = MAX_ITER; i; --i) { /* rarely goes over 2 iterations */\n    var s = Math.sin(phi);\n    var t = 1 - es * s * s;\n    //t = this.pj_mlfn(phi, s, Math.cos(phi), en) - arg;\n    //phi -= t * (t * Math.sqrt(t)) * k;\n    t = (pj_mlfn(phi, s, Math.cos(phi), en) - arg) * (t * Math.sqrt(t)) * k;\n    phi -= t;\n    if (Math.abs(t) < EPSLN) {\n      return phi;\n    }\n  }\n  //..reportError(\"cass:pj_inv_mlfn: Convergence error\");\n  return phi;\n}\n","// Heavily based on this tmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/tmerc.js\n\nimport pj_enfn from '../common/pj_enfn';\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport adjust_lon from '../common/adjust_lon';\n\nimport {EPSLN, HALF_PI} from '../constants/values';\nimport sign from '../common/sign';\n\nexport function init() {\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  if (this.es) {\n    this.en = pj_enfn(this.es);\n    this.ml0 = pj_mlfn(this.lat0, Math.sin(this.lat0), Math.cos(this.lat0), this.en);\n  }\n}\n\n/**\n    Transverse Mercator Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var con;\n  var x, y;\n  var sin_phi = Math.sin(lat);\n  var cos_phi = Math.cos(lat);\n\n  if (!this.es) {\n    var b = cos_phi * Math.sin(delta_lon);\n\n    if ((Math.abs(Math.abs(b) - 1)) < EPSLN) {\n      return (93);\n    }\n    else {\n      x = 0.5 * this.a * this.k0 * Math.log((1 + b) / (1 - b)) + this.x0;\n      y = cos_phi * Math.cos(delta_lon) / Math.sqrt(1 - Math.pow(b, 2));\n      b = Math.abs(y);\n\n      if (b >= 1) {\n        if ((b - 1) > EPSLN) {\n          return (93);\n        }\n        else {\n          y = 0;\n        }\n      }\n      else {\n        y = Math.acos(y);\n      }\n\n      if (lat < 0) {\n        y = -y;\n      }\n\n      y = this.a * this.k0 * (y - this.lat0) + this.y0;\n    }\n  }\n  else {\n    var al = cos_phi * delta_lon;\n    var als = Math.pow(al, 2);\n    var c = this.ep2 * Math.pow(cos_phi, 2);\n    var cs = Math.pow(c, 2);\n    var tq = Math.abs(cos_phi) > EPSLN ? Math.tan(lat) : 0;\n    var t = Math.pow(tq, 2);\n    var ts = Math.pow(t, 2);\n    con = 1 - this.es * Math.pow(sin_phi, 2);\n    al = al / Math.sqrt(con);\n    var ml = pj_mlfn(lat, sin_phi, cos_phi, this.en);\n\n    x = this.a * (this.k0 * al * (1 +\n      als / 6 * (1 - t + c +\n      als / 20 * (5 - 18 * t + ts + 14 * c - 58 * t * c +\n      als / 42 * (61 + 179 * ts - ts * t - 479 * t))))) +\n      this.x0;\n\n    y = this.a * (this.k0 * (ml - this.ml0 +\n      sin_phi * delta_lon * al / 2 * (1 +\n      als / 12 * (5 - t + 9 * c + 4 * cs +\n      als / 30 * (61 + ts - 58 * t + 270 * c - 330 * t * c +\n      als / 56 * (1385 + 543 * ts - ts * t - 3111 * t)))))) +\n      this.y0;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\n/**\n    Transverse Mercator Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var con, phi;\n  var lat, lon;\n  var x = (p.x - this.x0) * (1 / this.a);\n  var y = (p.y - this.y0) * (1 / this.a);\n\n  if (!this.es) {\n    var f = Math.exp(x / this.k0);\n    var g = 0.5 * (f - 1 / f);\n    var temp = this.lat0 + y / this.k0;\n    var h = Math.cos(temp);\n    con = Math.sqrt((1 - Math.pow(h, 2)) / (1 + Math.pow(g, 2)));\n    lat = Math.asin(con);\n\n    if (y < 0) {\n      lat = -lat;\n    }\n\n    if ((g === 0) && (h === 0)) {\n      lon = 0;\n    }\n    else {\n      lon = adjust_lon(Math.atan2(g, h) + this.long0);\n    }\n  }\n  else { // ellipsoidal form\n    con = this.ml0 + y / this.k0;\n    phi = pj_inv_mlfn(con, this.es, this.en);\n\n    if (Math.abs(phi) < HALF_PI) {\n      var sin_phi = Math.sin(phi);\n      var cos_phi = Math.cos(phi);\n      var tan_phi = Math.abs(cos_phi) > EPSLN ? Math.tan(phi) : 0;\n      var c = this.ep2 * Math.pow(cos_phi, 2);\n      var cs = Math.pow(c, 2);\n      var t = Math.pow(tan_phi, 2);\n      var ts = Math.pow(t, 2);\n      con = 1 - this.es * Math.pow(sin_phi, 2);\n      var d = x * Math.sqrt(con) / this.k0;\n      var ds = Math.pow(d, 2);\n      con = con * tan_phi;\n\n      lat = phi - (con * ds / (1 - this.es)) * 0.5 * (1 -\n        ds / 12 * (5 + 3 * t - 9 * c * t + c - 4 * cs -\n        ds / 30 * (61 + 90 * t - 252 * c * t + 45 * ts + 46 * c -\n        ds / 56 * (1385 + 3633 * t + 4095 * ts + 1574 * ts * t))));\n\n      lon = adjust_lon(this.long0 + (d * (1 -\n        ds / 6 * (1 + 2 * t + c -\n        ds / 20 * (5 + 28 * t + 24 * ts + 8 * c * t + 6 * c -\n        ds / 42 * (61 + 662 * t + 1320 * ts + 720 * ts * t)))) / cos_phi));\n    }\n    else {\n      lat = HALF_PI * sign(y);\n      lon = 0;\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Transverse_Mercator\", \"Transverse Mercator\", \"tmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r - 1 / r) / 2;\n  return r;\n}","export default function(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n  var a = Math.max(x, y);\n  var b = Math.min(x, y) / (a ? a : 1);\n\n  return a * Math.sqrt(1 + Math.pow(b, 2));\n}\n","import hypot from './hypot';\nimport log1py from './log1py';\n\nexport default function(x) {\n  var y = Math.abs(x);\n  y = log1py(y * (1 + y / (hypot(1, y) + 1)));\n\n  return x < 0 ? -y : y;\n}\n","export default function(x) {\n  var y = 1 + x;\n  var z = y - 1;\n\n  return z === 0 ? x : x * Math.log(y) / z;\n}\n","export default function(pp, B) {\n  var cos_2B = 2 * Math.cos(2 * B);\n  var i = pp.length - 1;\n  var h1 = pp[i];\n  var h2 = 0;\n  var h;\n\n  while (--i >= 0) {\n    h = -h2 + cos_2B * h1 + pp[i];\n    h2 = h1;\n    h1 = h;\n  }\n\n  return (B + h * Math.sin(2 * B));\n}\n","import sinh from './sinh';\nimport cosh from './cosh';\n\nexport default function(pp, arg_r, arg_i) {\n  var sin_arg_r = Math.sin(arg_r);\n  var cos_arg_r = Math.cos(arg_r);\n  var sinh_arg_i = sinh(arg_i);\n  var cosh_arg_i = cosh(arg_i);\n  var r = 2 * cos_arg_r * cosh_arg_i;\n  var i = -2 * sin_arg_r * sinh_arg_i;\n  var j = pp.length - 1;\n  var hr = pp[j];\n  var hi1 = 0;\n  var hr1 = 0;\n  var hi = 0;\n  var hr2;\n  var hi2;\n\n  while (--j >= 0) {\n    hr2 = hr1;\n    hi2 = hi1;\n    hr1 = hr;\n    hi1 = hi;\n    hr = -hr2 + r * hr1 - i * hi1 + pp[j];\n    hi = -hi2 + i * hr1 + r * hi1;\n  }\n\n  r = sin_arg_r * cosh_arg_i;\n  i = cos_arg_r * sinh_arg_i;\n\n  return [r * hr - i * hi, r * hi + i * hr];\n}\n","export default function(x) {\n  var r = Math.exp(x);\n  r = (r + 1 / r) / 2;\n  return r;\n}","// Heavily based on this etmerc projection implementation\n// https://github.com/mbloch/mapshaper-proj/blob/master/src/projections/etmerc.js\n\nimport sinh from '../common/sinh';\nimport hypot from '../common/hypot';\nimport asinhy from '../common/asinhy';\nimport gatg from '../common/gatg';\nimport clens from '../common/clens';\nimport clens_cmplx from '../common/clens_cmplx';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  if (this.es === undefined || this.es <= 0) {\n    throw new Error('incorrect elliptical usage');\n  }\n\n  this.x0 = this.x0 !== undefined ? this.x0 : 0;\n  this.y0 = this.y0 !== undefined ? this.y0 : 0;\n  this.long0 = this.long0 !== undefined ? this.long0 : 0;\n  this.lat0 = this.lat0 !== undefined ? this.lat0 : 0;\n\n  this.cgb = [];\n  this.cbg = [];\n  this.utg = [];\n  this.gtu = [];\n\n  var f = this.es / (1 + Math.sqrt(1 - this.es));\n  var n = f / (2 - f);\n  var np = n;\n\n  this.cgb[0] = n * (2 + n * (-2 / 3 + n * (-2 + n * (116 / 45 + n * (26 / 45 + n * (-2854 / 675 ))))));\n  this.cbg[0] = n * (-2 + n * ( 2 / 3 + n * ( 4 / 3 + n * (-82 / 45 + n * (32 / 45 + n * (4642 / 4725))))));\n\n  np = np * n;\n  this.cgb[1] = np * (7 / 3 + n * (-8 / 5 + n * (-227 / 45 + n * (2704 / 315 + n * (2323 / 945)))));\n  this.cbg[1] = np * (5 / 3 + n * (-16 / 15 + n * ( -13 / 9 + n * (904 / 315 + n * (-1522 / 945)))));\n\n  np = np * n;\n  this.cgb[2] = np * (56 / 15 + n * (-136 / 35 + n * (-1262 / 105 + n * (73814 / 2835))));\n  this.cbg[2] = np * (-26 / 15 + n * (34 / 21 + n * (8 / 5 + n * (-12686 / 2835))));\n\n  np = np * n;\n  this.cgb[3] = np * (4279 / 630 + n * (-332 / 35 + n * (-399572 / 14175)));\n  this.cbg[3] = np * (1237 / 630 + n * (-12 / 5 + n * ( -24832 / 14175)));\n\n  np = np * n;\n  this.cgb[4] = np * (4174 / 315 + n * (-144838 / 6237));\n  this.cbg[4] = np * (-734 / 315 + n * (109598 / 31185));\n\n  np = np * n;\n  this.cgb[5] = np * (601676 / 22275);\n  this.cbg[5] = np * (444337 / 155925);\n\n  np = Math.pow(n, 2);\n  this.Qn = this.k0 / (1 + n) * (1 + np * (1 / 4 + np * (1 / 64 + np / 256)));\n\n  this.utg[0] = n * (-0.5 + n * ( 2 / 3 + n * (-37 / 96 + n * ( 1 / 360 + n * (81 / 512 + n * (-96199 / 604800))))));\n  this.gtu[0] = n * (0.5 + n * (-2 / 3 + n * (5 / 16 + n * (41 / 180 + n * (-127 / 288 + n * (7891 / 37800))))));\n\n  this.utg[1] = np * (-1 / 48 + n * (-1 / 15 + n * (437 / 1440 + n * (-46 / 105 + n * (1118711 / 3870720)))));\n  this.gtu[1] = np * (13 / 48 + n * (-3 / 5 + n * (557 / 1440 + n * (281 / 630 + n * (-1983433 / 1935360)))));\n\n  np = np * n;\n  this.utg[2] = np * (-17 / 480 + n * (37 / 840 + n * (209 / 4480 + n * (-5569 / 90720 ))));\n  this.gtu[2] = np * (61 / 240 + n * (-103 / 140 + n * (15061 / 26880 + n * (167603 / 181440))));\n\n  np = np * n;\n  this.utg[3] = np * (-4397 / 161280 + n * (11 / 504 + n * (830251 / 7257600)));\n  this.gtu[3] = np * (49561 / 161280 + n * (-179 / 168 + n * (6601661 / 7257600)));\n\n  np = np * n;\n  this.utg[4] = np * (-4583 / 161280 + n * (108847 / 3991680));\n  this.gtu[4] = np * (34729 / 80640 + n * (-3418889 / 1995840));\n\n  np = np * n;\n  this.utg[5] = np * (-20648693 / 638668800);\n  this.gtu[5] = np * (212378941 / 319334400);\n\n  var Z = gatg(this.cbg, this.lat0);\n  this.Zb = -this.Qn * (Z + clens(this.gtu, 2 * Z));\n}\n\nexport function forward(p) {\n  var Ce = adjust_lon(p.x - this.long0);\n  var Cn = p.y;\n\n  Cn = gatg(this.cbg, Cn);\n  var sin_Cn = Math.sin(Cn);\n  var cos_Cn = Math.cos(Cn);\n  var sin_Ce = Math.sin(Ce);\n  var cos_Ce = Math.cos(Ce);\n\n  Cn = Math.atan2(sin_Cn, cos_Ce * cos_Cn);\n  Ce = Math.atan2(sin_Ce * cos_Cn, hypot(sin_Cn, cos_Cn * cos_Ce));\n  Ce = asinhy(Math.tan(Ce));\n\n  var tmp = clens_cmplx(this.gtu, 2 * Cn, 2 * Ce);\n\n  Cn = Cn + tmp[0];\n  Ce = Ce + tmp[1];\n\n  var x;\n  var y;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    x = this.a * (this.Qn * Ce) + this.x0;\n    y = this.a * (this.Qn * Cn + this.Zb) + this.y0;\n  }\n  else {\n    x = Infinity;\n    y = Infinity;\n  }\n\n  p.x = x;\n  p.y = y;\n\n  return p;\n}\n\nexport function inverse(p) {\n  var Ce = (p.x - this.x0) * (1 / this.a);\n  var Cn = (p.y - this.y0) * (1 / this.a);\n\n  Cn = (Cn - this.Zb) / this.Qn;\n  Ce = Ce / this.Qn;\n\n  var lon;\n  var lat;\n\n  if (Math.abs(Ce) <= 2.623395162778) {\n    var tmp = clens_cmplx(this.utg, 2 * Cn, 2 * Ce);\n\n    Cn = Cn + tmp[0];\n    Ce = Ce + tmp[1];\n    Ce = Math.atan(sinh(Ce));\n\n    var sin_Cn = Math.sin(Cn);\n    var cos_Cn = Math.cos(Cn);\n    var sin_Ce = Math.sin(Ce);\n    var cos_Ce = Math.cos(Ce);\n\n    Cn = Math.atan2(sin_Cn * cos_Ce, hypot(sin_Ce, cos_Ce * cos_Cn));\n    Ce = Math.atan2(sin_Ce, cos_Ce * cos_Cn);\n\n    lon = adjust_lon(Ce + this.long0);\n    lat = gatg(this.cgb, Cn);\n  }\n  else {\n    lon = Infinity;\n    lat = Infinity;\n  }\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"Extended_Transverse_Mercator\", \"Extended Transverse Mercator\", \"etmerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(pp, arg_r) {\n  var r = 2 * Math.cos(arg_r);\n  var i = pp.length - 1;\n  var hr1 = pp[i];\n  var hr2 = 0;\n  var hr;\n\n  while (--i >= 0) {\n    hr = -hr2 + r * hr1 + pp[i];\n    hr2 = hr1;\n    hr1 = hr;\n  }\n\n  return Math.sin(arg_r) * hr;\n}\n","import adjust_zone from '../common/adjust_zone';\nimport etmerc from './etmerc';\nexport var dependsOn = 'etmerc';\nimport {D2R} from '../constants/values';\n\n\nexport function init() {\n  var zone = adjust_zone(this.zone, this.long0);\n  if (zone === undefined) {\n    throw new Error('unknown utm zone');\n  }\n  this.lat0 = 0;\n  this.long0 =  ((6 * Math.abs(zone)) - 183) * D2R;\n  this.x0 = 500000;\n  this.y0 = this.utmSouth ? 10000000 : 0;\n  this.k0 = 0.9996;\n\n  etmerc.init.apply(this);\n  this.forward = etmerc.forward;\n  this.inverse = etmerc.inverse;\n}\n\nexport var names = [\"Universal Transverse Mercator System\", \"utm\"];\nexport default {\n  init: init,\n  names: names,\n  dependsOn: dependsOn\n};\n","import adjust_lon from './adjust_lon';\n\nexport default function(zone, lon) {\n  if (zone === undefined) {\n    zone = Math.floor((adjust_lon(lon) + Math.PI) * 30 / Math.PI) + 1;\n\n    if (zone < 0) {\n      return 0;\n    } else if (zone > 60) {\n      return 60;\n    }\n  }\n  return zone;\n}\n","export default function(esinp, exp) {\n  return (Math.pow((1 - esinp) / (1 + esinp), exp));\n}","import srat from '../common/srat';\nvar MAX_ITER = 20;\nimport {HALF_PI, FORTPI} from '../constants/values';\n\nexport function init() {\n  var sphi = Math.sin(this.lat0);\n  var cphi = Math.cos(this.lat0);\n  cphi *= cphi;\n  this.rc = Math.sqrt(1 - this.es) / (1 - this.es * sphi * sphi);\n  this.C = Math.sqrt(1 + this.es * cphi * cphi / (1 - this.es));\n  this.phic0 = Math.asin(sphi / this.C);\n  this.ratexp = 0.5 * this.C * this.e;\n  this.K = Math.tan(0.5 * this.phic0 + FORTPI) / (Math.pow(Math.tan(0.5 * this.lat0 + FORTPI), this.C) * srat(this.e * sphi, this.ratexp));\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n\n  p.y = 2 * Math.atan(this.K * Math.pow(Math.tan(0.5 * lat + FORTPI), this.C) * srat(this.e * Math.sin(lat), this.ratexp)) - HALF_PI;\n  p.x = this.C * lon;\n  return p;\n}\n\nexport function inverse(p) {\n  var DEL_TOL = 1e-14;\n  var lon = p.x / this.C;\n  var lat = p.y;\n  var num = Math.pow(Math.tan(0.5 * lat + FORTPI) / this.K, 1 / this.C);\n  for (var i = MAX_ITER; i > 0; --i) {\n    lat = 2 * Math.atan(num * srat(this.e * Math.sin(p.y), - 0.5 * this.e)) - HALF_PI;\n    if (Math.abs(lat - p.y) < DEL_TOL) {\n      break;\n    }\n    p.y = lat;\n  }\n  /* convergence failed */\n  if (!i) {\n    return null;\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gauss\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import gauss from './gauss';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  gauss.init.apply(this);\n  if (!this.rc) {\n    return;\n  }\n  this.sinc0 = Math.sin(this.phic0);\n  this.cosc0 = Math.cos(this.phic0);\n  this.R2 = 2 * this.rc;\n  if (!this.title) {\n    this.title = \"Oblique Stereographic Alternative\";\n  }\n}\n\nexport function forward(p) {\n  var sinc, cosc, cosl, k;\n  p.x = adjust_lon(p.x - this.long0);\n  gauss.forward.apply(this, [p]);\n  sinc = Math.sin(p.y);\n  cosc = Math.cos(p.y);\n  cosl = Math.cos(p.x);\n  k = this.k0 * this.R2 / (1 + this.sinc0 * sinc + this.cosc0 * cosc * cosl);\n  p.x = k * cosc * Math.sin(p.x);\n  p.y = k * (this.cosc0 * sinc - this.sinc0 * cosc * cosl);\n  p.x = this.a * p.x + this.x0;\n  p.y = this.a * p.y + this.y0;\n  return p;\n}\n\nexport function inverse(p) {\n  var sinc, cosc, lon, lat, rho;\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n  if ((rho = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    var c = 2 * Math.atan2(rho, this.R2);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n    lat = Math.asin(cosc * this.sinc0 + p.y * sinc * this.cosc0 / rho);\n    lon = Math.atan2(p.x * sinc, rho * this.cosc0 * cosc - p.y * this.sinc0 * sinc);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  gauss.inverse.apply(this, [p]);\n  p.x = adjust_lon(p.x + this.long0);\n  return p;\n}\n\nexport var names = [\"Stereographic_North_Pole\", \"Oblique_Stereographic\", \"Polar_Stereographic\", \"sterea\",\"Oblique Stereographic Alternative\",\"Double_Stereographic\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {EPSLN, HALF_PI} from '../constants/values';\n\nimport sign from '../common/sign';\nimport msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport phi2z from '../common/phi2z';\nimport adjust_lon from '../common/adjust_lon';\n\nexport function ssfn_(phit, sinphi, eccen) {\n  sinphi *= eccen;\n  return (Math.tan(0.5 * (HALF_PI + phit)) * Math.pow((1 - sinphi) / (1 + sinphi), 0.5 * eccen));\n}\n\nexport function init() {\n  this.coslat0 = Math.cos(this.lat0);\n  this.sinlat0 = Math.sin(this.lat0);\n  if (this.sphere) {\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * (1 + sign(this.lat0) * Math.sin(this.lat_ts));\n    }\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (this.lat0 > 0) {\n        //North pole\n        //trace('stere:north pole');\n        this.con = 1;\n      }\n      else {\n        //South pole\n        //trace('stere:south pole');\n        this.con = -1;\n      }\n    }\n    this.cons = Math.sqrt(Math.pow(1 + this.e, 1 + this.e) * Math.pow(1 - this.e, 1 - this.e));\n    if (this.k0 === 1 && !isNaN(this.lat_ts) && Math.abs(this.coslat0) <= EPSLN) {\n      this.k0 = 0.5 * this.cons * msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts)) / tsfnz(this.e, this.con * this.lat_ts, this.con * Math.sin(this.lat_ts));\n    }\n    this.ms1 = msfnz(this.e, this.sinlat0, this.coslat0);\n    this.X0 = 2 * Math.atan(this.ssfn_(this.lat0, this.sinlat0, this.e)) - HALF_PI;\n    this.cosX0 = Math.cos(this.X0);\n    this.sinX0 = Math.sin(this.X0);\n  }\n}\n\n// Stereographic forward equations--mapping lat,long to x,y\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinlat = Math.sin(lat);\n  var coslat = Math.cos(lat);\n  var A, X, sinX, cosX, ts, rh;\n  var dlon = adjust_lon(lon - this.long0);\n\n  if (Math.abs(Math.abs(lon - this.long0) - Math.PI) <= EPSLN && Math.abs(lat + this.lat0) <= EPSLN) {\n    //case of the origine point\n    //trace('stere:this is the origin point');\n    p.x = NaN;\n    p.y = NaN;\n    return p;\n  }\n  if (this.sphere) {\n    //trace('stere:sphere case');\n    A = 2 * this.k0 / (1 + this.sinlat0 * sinlat + this.coslat0 * coslat * Math.cos(dlon));\n    p.x = this.a * A * coslat * Math.sin(dlon) + this.x0;\n    p.y = this.a * A * (this.coslat0 * sinlat - this.sinlat0 * coslat * Math.cos(dlon)) + this.y0;\n    return p;\n  }\n  else {\n    X = 2 * Math.atan(this.ssfn_(lat, sinlat, this.e)) - HALF_PI;\n    cosX = Math.cos(X);\n    sinX = Math.sin(X);\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      ts = tsfnz(this.e, lat * this.con, this.con * sinlat);\n      rh = 2 * this.a * this.k0 * ts / this.cons;\n      p.x = this.x0 + rh * Math.sin(lon - this.long0);\n      p.y = this.y0 - this.con * rh * Math.cos(lon - this.long0);\n      //trace(p.toString());\n      return p;\n    }\n    else if (Math.abs(this.sinlat0) < EPSLN) {\n      //Eq\n      //trace('stere:equateur');\n      A = 2 * this.a * this.k0 / (1 + cosX * Math.cos(dlon));\n      p.y = A * sinX;\n    }\n    else {\n      //other case\n      //trace('stere:normal case');\n      A = 2 * this.a * this.k0 * this.ms1 / (this.cosX0 * (1 + this.sinX0 * sinX + this.cosX0 * cosX * Math.cos(dlon)));\n      p.y = A * (this.cosX0 * sinX - this.sinX0 * cosX * Math.cos(dlon)) + this.y0;\n    }\n    p.x = A * cosX * Math.sin(dlon) + this.x0;\n  }\n  //trace(p.toString());\n  return p;\n}\n\n//* Stereographic inverse equations--mapping x,y to lat/long\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat, ts, ce, Chi;\n  var rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  if (this.sphere) {\n    var c = 2 * Math.atan(rh / (2 * this.a * this.k0));\n    lon = this.long0;\n    lat = this.lat0;\n    if (rh <= EPSLN) {\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    lat = Math.asin(Math.cos(c) * this.sinlat0 + p.y * Math.sin(c) * this.coslat0 / rh);\n    if (Math.abs(this.coslat0) < EPSLN) {\n      if (this.lat0 > 0) {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      }\n      else {\n        lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      }\n    }\n    else {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(c), rh * this.coslat0 * Math.cos(c) - p.y * this.sinlat0 * Math.sin(c)));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    if (Math.abs(this.coslat0) <= EPSLN) {\n      if (rh <= EPSLN) {\n        lat = this.lat0;\n        lon = this.long0;\n        p.x = lon;\n        p.y = lat;\n        //trace(p.toString());\n        return p;\n      }\n      p.x *= this.con;\n      p.y *= this.con;\n      ts = rh * this.cons / (2 * this.a * this.k0);\n      lat = this.con * phi2z(this.e, ts);\n      lon = this.con * adjust_lon(this.con * this.long0 + Math.atan2(p.x, - 1 * p.y));\n    }\n    else {\n      ce = 2 * Math.atan(rh * this.cosX0 / (2 * this.a * this.k0 * this.ms1));\n      lon = this.long0;\n      if (rh <= EPSLN) {\n        Chi = this.X0;\n      }\n      else {\n        Chi = Math.asin(Math.cos(ce) * this.sinX0 + p.y * Math.sin(ce) * this.cosX0 / rh);\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * Math.sin(ce), rh * this.cosX0 * Math.cos(ce) - p.y * this.sinX0 * Math.sin(ce)));\n      }\n      lat = -1 * phi2z(this.e, Math.tan(0.5 * (HALF_PI + Chi)));\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n\n  //trace(p.toString());\n  return p;\n\n}\n\nexport var names = [\"stere\", \"Stereographic_South_Pole\", \"Polar Stereographic (variant B)\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  ssfn_: ssfn_\n};\n","/*\n  references:\n    Formules et constantes pour le Calcul pour la\n    projection cylindrique conforme  axe oblique et pour la transformation entre\n    des systmes de rfrence.\n    http://www.swisstopo.admin.ch/internet/swisstopo/fr/home/topics/survey/sys/refsys/switzerland.parsysrelated1.31216.downloadList.77004.DownloadFile.tmp/swissprojectionfr.pdf\n  */\n\nexport function init() {\n  var phy0 = this.lat0;\n  this.lambda0 = this.long0;\n  var sinPhy0 = Math.sin(phy0);\n  var semiMajorAxis = this.a;\n  var invF = this.rf;\n  var flattening = 1 / invF;\n  var e2 = 2 * flattening - Math.pow(flattening, 2);\n  var e = this.e = Math.sqrt(e2);\n  this.R = this.k0 * semiMajorAxis * Math.sqrt(1 - e2) / (1 - e2 * Math.pow(sinPhy0, 2));\n  this.alpha = Math.sqrt(1 + e2 / (1 - e2) * Math.pow(Math.cos(phy0), 4));\n  this.b0 = Math.asin(sinPhy0 / this.alpha);\n  var k1 = Math.log(Math.tan(Math.PI / 4 + this.b0 / 2));\n  var k2 = Math.log(Math.tan(Math.PI / 4 + phy0 / 2));\n  var k3 = Math.log((1 + e * sinPhy0) / (1 - e * sinPhy0));\n  this.K = k1 - this.alpha * k2 + this.alpha * e / 2 * k3;\n}\n\nexport function forward(p) {\n  var Sa1 = Math.log(Math.tan(Math.PI / 4 - p.y / 2));\n  var Sa2 = this.e / 2 * Math.log((1 + this.e * Math.sin(p.y)) / (1 - this.e * Math.sin(p.y)));\n  var S = -this.alpha * (Sa1 + Sa2) + this.K;\n\n  // spheric latitude\n  var b = 2 * (Math.atan(Math.exp(S)) - Math.PI / 4);\n\n  // spheric longitude\n  var I = this.alpha * (p.x - this.lambda0);\n\n  // psoeudo equatorial rotation\n  var rotI = Math.atan(Math.sin(I) / (Math.sin(this.b0) * Math.tan(b) + Math.cos(this.b0) * Math.cos(I)));\n\n  var rotB = Math.asin(Math.cos(this.b0) * Math.sin(b) - Math.sin(this.b0) * Math.cos(b) * Math.cos(I));\n\n  p.y = this.R / 2 * Math.log((1 + Math.sin(rotB)) / (1 - Math.sin(rotB))) + this.y0;\n  p.x = this.R * rotI + this.x0;\n  return p;\n}\n\nexport function inverse(p) {\n  var Y = p.x - this.x0;\n  var X = p.y - this.y0;\n\n  var rotI = Y / this.R;\n  var rotB = 2 * (Math.atan(Math.exp(X / this.R)) - Math.PI / 4);\n\n  var b = Math.asin(Math.cos(this.b0) * Math.sin(rotB) + Math.sin(this.b0) * Math.cos(rotB) * Math.cos(rotI));\n  var I = Math.atan(Math.sin(rotI) / (Math.cos(this.b0) * Math.cos(rotI) - Math.sin(this.b0) * Math.tan(rotB)));\n\n  var lambda = this.lambda0 + I / this.alpha;\n\n  var S = 0;\n  var phy = b;\n  var prevPhy = -1000;\n  var iteration = 0;\n  while (Math.abs(phy - prevPhy) > 0.0000001) {\n    if (++iteration > 20) {\n      //...reportError(\"omercFwdInfinity\");\n      return;\n    }\n    //S = Math.log(Math.tan(Math.PI / 4 + phy / 2));\n    S = 1 / this.alpha * (Math.log(Math.tan(Math.PI / 4 + b / 2)) - this.K) + this.e * Math.log(Math.tan(Math.PI / 4 + Math.asin(this.e * Math.sin(phy)) / 2));\n    prevPhy = phy;\n    phy = 2 * Math.atan(Math.exp(S)) - Math.PI / 2;\n  }\n\n  p.x = lambda;\n  p.y = phy;\n  return p;\n}\n\nexport var names = [\"somerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import tsfnz from '../common/tsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {EPSLN, HALF_PI, FORTPI} from '../constants/values';\n\n/* Initialize the Oblique Mercator  projection\n    ------------------------------------------*/\nexport function init() {\n  this.no_off = this.no_off || false;\n  this.no_rot = this.no_rot || false;\n\n  if (isNaN(this.k0)) {\n    this.k0 = 1;\n  }\n  var sinlat = Math.sin(this.lat0);\n  var coslat = Math.cos(this.lat0);\n  var con = this.e * sinlat;\n\n  this.bl = Math.sqrt(1 + this.es / (1 - this.es) * Math.pow(coslat, 4));\n  this.al = this.a * this.bl * this.k0 * Math.sqrt(1 - this.es) / (1 - con * con);\n  var t0 = tsfnz(this.e, this.lat0, sinlat);\n  var dl = this.bl / coslat * Math.sqrt((1 - this.es) / (1 - con * con));\n  if (dl * dl < 1) {\n    dl = 1;\n  }\n  var fl;\n  var gl;\n  if (!isNaN(this.longc)) {\n    //Central point and azimuth method\n\n    if (this.lat0 >= 0) {\n      fl = dl + Math.sqrt(dl * dl - 1);\n    }\n    else {\n      fl = dl - Math.sqrt(dl * dl - 1);\n    }\n    this.el = fl * Math.pow(t0, this.bl);\n    gl = 0.5 * (fl - 1 / fl);\n    this.gamma0 = Math.asin(Math.sin(this.alpha) / dl);\n    this.long0 = this.longc - Math.asin(gl * Math.tan(this.gamma0)) / this.bl;\n\n  }\n  else {\n    //2 points method\n    var t1 = tsfnz(this.e, this.lat1, Math.sin(this.lat1));\n    var t2 = tsfnz(this.e, this.lat2, Math.sin(this.lat2));\n    if (this.lat0 >= 0) {\n      this.el = (dl + Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n    }\n    else {\n      this.el = (dl - Math.sqrt(dl * dl - 1)) * Math.pow(t0, this.bl);\n    }\n    var hl = Math.pow(t1, this.bl);\n    var ll = Math.pow(t2, this.bl);\n    fl = this.el / hl;\n    gl = 0.5 * (fl - 1 / fl);\n    var jl = (this.el * this.el - ll * hl) / (this.el * this.el + ll * hl);\n    var pl = (ll - hl) / (ll + hl);\n    var dlon12 = adjust_lon(this.long1 - this.long2);\n    this.long0 = 0.5 * (this.long1 + this.long2) - Math.atan(jl * Math.tan(0.5 * this.bl * (dlon12)) / pl) / this.bl;\n    this.long0 = adjust_lon(this.long0);\n    var dlon10 = adjust_lon(this.long1 - this.long0);\n    this.gamma0 = Math.atan(Math.sin(this.bl * (dlon10)) / gl);\n    this.alpha = Math.asin(dl * Math.sin(this.gamma0));\n  }\n\n  if (this.no_off) {\n    this.uc = 0;\n  }\n  else {\n    if (this.lat0 >= 0) {\n      this.uc = this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n    }\n    else {\n      this.uc = -1 * this.al / this.bl * Math.atan2(Math.sqrt(dl * dl - 1), Math.cos(this.alpha));\n    }\n  }\n\n}\n\n/* Oblique Mercator forward equations--mapping lat,long to x,y\n    ----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var dlon = adjust_lon(lon - this.long0);\n  var us, vs;\n  var con;\n  if (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN) {\n    if (lat > 0) {\n      con = -1;\n    }\n    else {\n      con = 1;\n    }\n    vs = this.al / this.bl * Math.log(Math.tan(FORTPI + con * this.gamma0 * 0.5));\n    us = -1 * con * HALF_PI * this.al / this.bl;\n  }\n  else {\n    var t = tsfnz(this.e, lat, Math.sin(lat));\n    var ql = this.el / Math.pow(t, this.bl);\n    var sl = 0.5 * (ql - 1 / ql);\n    var tl = 0.5 * (ql + 1 / ql);\n    var vl = Math.sin(this.bl * (dlon));\n    var ul = (sl * Math.sin(this.gamma0) - vl * Math.cos(this.gamma0)) / tl;\n    if (Math.abs(Math.abs(ul) - 1) <= EPSLN) {\n      vs = Number.POSITIVE_INFINITY;\n    }\n    else {\n      vs = 0.5 * this.al * Math.log((1 - ul) / (1 + ul)) / this.bl;\n    }\n    if (Math.abs(Math.cos(this.bl * (dlon))) <= EPSLN) {\n      us = this.al * this.bl * (dlon);\n    }\n    else {\n      us = this.al * Math.atan2(sl * Math.cos(this.gamma0) + vl * Math.sin(this.gamma0), Math.cos(this.bl * dlon)) / this.bl;\n    }\n  }\n\n  if (this.no_rot) {\n    p.x = this.x0 + us;\n    p.y = this.y0 + vs;\n  }\n  else {\n\n    us -= this.uc;\n    p.x = this.x0 + vs * Math.cos(this.alpha) + us * Math.sin(this.alpha);\n    p.y = this.y0 + us * Math.cos(this.alpha) - vs * Math.sin(this.alpha);\n  }\n  return p;\n}\n\nexport function inverse(p) {\n  var us, vs;\n  if (this.no_rot) {\n    vs = p.y - this.y0;\n    us = p.x - this.x0;\n  }\n  else {\n    vs = (p.x - this.x0) * Math.cos(this.alpha) - (p.y - this.y0) * Math.sin(this.alpha);\n    us = (p.y - this.y0) * Math.cos(this.alpha) + (p.x - this.x0) * Math.sin(this.alpha);\n    us += this.uc;\n  }\n  var qp = Math.exp(-1 * this.bl * vs / this.al);\n  var sp = 0.5 * (qp - 1 / qp);\n  var tp = 0.5 * (qp + 1 / qp);\n  var vp = Math.sin(this.bl * us / this.al);\n  var up = (vp * Math.cos(this.gamma0) + sp * Math.sin(this.gamma0)) / tp;\n  var ts = Math.pow(this.el / Math.sqrt((1 + up) / (1 - up)), 1 / this.bl);\n  if (Math.abs(up - 1) < EPSLN) {\n    p.x = this.long0;\n    p.y = HALF_PI;\n  }\n  else if (Math.abs(up + 1) < EPSLN) {\n    p.x = this.long0;\n    p.y = -1 * HALF_PI;\n  }\n  else {\n    p.y = phi2z(this.e, ts);\n    p.x = adjust_lon(this.long0 - Math.atan2(sp * Math.cos(this.gamma0) - vp * Math.sin(this.gamma0), Math.cos(this.bl * us / this.al)) / this.bl);\n  }\n  return p;\n}\n\nexport var names = [\"Hotine_Oblique_Mercator\", \"Hotine Oblique Mercator\", \"Hotine_Oblique_Mercator_Azimuth_Natural_Origin\", \"Hotine_Oblique_Mercator_Azimuth_Center\", \"omerc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import msfnz from '../common/msfnz';\nimport tsfnz from '../common/tsfnz';\nimport sign from '../common/sign';\nimport adjust_lon from '../common/adjust_lon';\nimport phi2z from '../common/phi2z';\nimport {HALF_PI, EPSLN} from '../constants/values';\nexport function init() {\n\n  // array of:  r_maj,r_min,lat1,lat2,c_lon,c_lat,false_east,false_north\n  //double c_lat;                   /* center latitude                      */\n  //double c_lon;                   /* center longitude                     */\n  //double lat1;                    /* first standard parallel              */\n  //double lat2;                    /* second standard parallel             */\n  //double r_maj;                   /* major axis                           */\n  //double r_min;                   /* minor axis                           */\n  //double false_east;              /* x offset in meters                   */\n  //double false_north;             /* y offset in meters                   */\n\n  if (!this.lat2) {\n    this.lat2 = this.lat1;\n  } //if lat2 is not defined\n  if (!this.k0) {\n    this.k0 = 1;\n  }\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n\n  var temp = this.b / this.a;\n  this.e = Math.sqrt(1 - temp * temp);\n\n  var sin1 = Math.sin(this.lat1);\n  var cos1 = Math.cos(this.lat1);\n  var ms1 = msfnz(this.e, sin1, cos1);\n  var ts1 = tsfnz(this.e, this.lat1, sin1);\n\n  var sin2 = Math.sin(this.lat2);\n  var cos2 = Math.cos(this.lat2);\n  var ms2 = msfnz(this.e, sin2, cos2);\n  var ts2 = tsfnz(this.e, this.lat2, sin2);\n\n  var ts0 = tsfnz(this.e, this.lat0, Math.sin(this.lat0));\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns = Math.log(ms1 / ms2) / Math.log(ts1 / ts2);\n  }\n  else {\n    this.ns = sin1;\n  }\n  if (isNaN(this.ns)) {\n    this.ns = sin1;\n  }\n  this.f0 = ms1 / (this.ns * Math.pow(ts1, this.ns));\n  this.rh = this.a * this.f0 * Math.pow(ts0, this.ns);\n  if (!this.title) {\n    this.title = \"Lambert Conformal Conic\";\n  }\n}\n\n// Lambert Conformal conic forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  // singular cases :\n  if (Math.abs(2 * Math.abs(lat) - Math.PI) <= EPSLN) {\n    lat = sign(lat) * (HALF_PI - 2 * EPSLN);\n  }\n\n  var con = Math.abs(Math.abs(lat) - HALF_PI);\n  var ts, rh1;\n  if (con > EPSLN) {\n    ts = tsfnz(this.e, lat, Math.sin(lat));\n    rh1 = this.a * this.f0 * Math.pow(ts, this.ns);\n  }\n  else {\n    con = lat * this.ns;\n    if (con <= 0) {\n      return null;\n    }\n    rh1 = 0;\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  p.x = this.k0 * (rh1 * Math.sin(theta)) + this.x0;\n  p.y = this.k0 * (this.rh - rh1 * Math.cos(theta)) + this.y0;\n\n  return p;\n}\n\n// Lambert Conformal Conic inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var rh1, con, ts;\n  var lat, lon;\n  var x = (p.x - this.x0) / this.k0;\n  var y = (this.rh - (p.y - this.y0) / this.k0);\n  if (this.ns > 0) {\n    rh1 = Math.sqrt(x * x + y * y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(x * x + y * y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2((con * x), (con * y));\n  }\n  if ((rh1 !== 0) || (this.ns > 0)) {\n    con = 1 / this.ns;\n    ts = Math.pow((rh1 / (this.a * this.f0)), con);\n    lat = phi2z(this.e, ts);\n    if (lat === -9999) {\n      return null;\n    }\n  }\n  else {\n    lat = -HALF_PI;\n  }\n  lon = adjust_lon(theta / this.ns + this.long0);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Lambert Tangential Conformal Conic Projection\", \"Lambert_Conformal_Conic\", \"Lambert_Conformal_Conic_2SP\", \"lcc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nexport function init() {\n  this.a = 6377397.155;\n  this.es = 0.006674372230614;\n  this.e = Math.sqrt(this.es);\n  if (!this.lat0) {\n    this.lat0 = 0.863937979737193;\n  }\n  if (!this.long0) {\n    this.long0 = 0.7417649320975901 - 0.308341501185665;\n  }\n  /* if scale not set default to 0.9999 */\n  if (!this.k0) {\n    this.k0 = 0.9999;\n  }\n  this.s45 = 0.785398163397448; /* 45 */\n  this.s90 = 2 * this.s45;\n  this.fi0 = this.lat0;\n  this.e2 = this.es;\n  this.e = Math.sqrt(this.e2);\n  this.alfa = Math.sqrt(1 + (this.e2 * Math.pow(Math.cos(this.fi0), 4)) / (1 - this.e2));\n  this.uq = 1.04216856380474;\n  this.u0 = Math.asin(Math.sin(this.fi0) / this.alfa);\n  this.g = Math.pow((1 + this.e * Math.sin(this.fi0)) / (1 - this.e * Math.sin(this.fi0)), this.alfa * this.e / 2);\n  this.k = Math.tan(this.u0 / 2 + this.s45) / Math.pow(Math.tan(this.fi0 / 2 + this.s45), this.alfa) * this.g;\n  this.k1 = this.k0;\n  this.n0 = this.a * Math.sqrt(1 - this.e2) / (1 - this.e2 * Math.pow(Math.sin(this.fi0), 2));\n  this.s0 = 1.37008346281555;\n  this.n = Math.sin(this.s0);\n  this.ro0 = this.k1 * this.n0 / Math.tan(this.s0);\n  this.ad = this.s90 - this.uq;\n}\n\n/* ellipsoid */\n/* calculate xy from lat/lon */\n/* Constants, identical to inverse transform function */\nexport function forward(p) {\n  var gfi, u, deltav, s, d, eps, ro;\n  var lon = p.x;\n  var lat = p.y;\n  var delta_lon = adjust_lon(lon - this.long0);\n  /* Transformation */\n  gfi = Math.pow(((1 + this.e * Math.sin(lat)) / (1 - this.e * Math.sin(lat))), (this.alfa * this.e / 2));\n  u = 2 * (Math.atan(this.k * Math.pow(Math.tan(lat / 2 + this.s45), this.alfa) / gfi) - this.s45);\n  deltav = -delta_lon * this.alfa;\n  s = Math.asin(Math.cos(this.ad) * Math.sin(u) + Math.sin(this.ad) * Math.cos(u) * Math.cos(deltav));\n  d = Math.asin(Math.cos(u) * Math.sin(deltav) / Math.cos(s));\n  eps = this.n * d;\n  ro = this.ro0 * Math.pow(Math.tan(this.s0 / 2 + this.s45), this.n) / Math.pow(Math.tan(s / 2 + this.s45), this.n);\n  p.y = ro * Math.cos(eps) / 1;\n  p.x = ro * Math.sin(eps) / 1;\n\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  return (p);\n}\n\n/* calculate lat/lon from xy */\nexport function inverse(p) {\n  var u, deltav, s, d, eps, ro, fi1;\n  var ok;\n\n  /* Transformation */\n  /* revert y, x*/\n  var tmp = p.x;\n  p.x = p.y;\n  p.y = tmp;\n  if (!this.czech) {\n    p.y *= -1;\n    p.x *= -1;\n  }\n  ro = Math.sqrt(p.x * p.x + p.y * p.y);\n  eps = Math.atan2(p.y, p.x);\n  d = eps / Math.sin(this.s0);\n  s = 2 * (Math.atan(Math.pow(this.ro0 / ro, 1 / this.n) * Math.tan(this.s0 / 2 + this.s45)) - this.s45);\n  u = Math.asin(Math.cos(this.ad) * Math.sin(s) - Math.sin(this.ad) * Math.cos(s) * Math.cos(d));\n  deltav = Math.asin(Math.cos(s) * Math.sin(d) / Math.cos(u));\n  p.x = this.long0 - deltav / this.alfa;\n  fi1 = u;\n  ok = 0;\n  var iter = 0;\n  do {\n    p.y = 2 * (Math.atan(Math.pow(this.k, - 1 / this.alfa) * Math.pow(Math.tan(u / 2 + this.s45), 1 / this.alfa) * Math.pow((1 + this.e * Math.sin(fi1)) / (1 - this.e * Math.sin(fi1)), this.e / 2)) - this.s45);\n    if (Math.abs(fi1 - p.y) < 0.0000000001) {\n      ok = 1;\n    }\n    fi1 = p.y;\n    iter += 1;\n  } while (ok === 0 && iter < 15);\n  if (iter >= 15) {\n    return null;\n  }\n\n  return (p);\n}\n\nexport var names = [\"Krovak\", \"krovak\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(e0, e1, e2, e3, phi) {\n  return (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi));\n}","export default function(x) {\n  return (1 - 0.25 * x * (1 + x / 16 * (3 + 1.25 * x)));\n}","export default function(x) {\n  return (0.375 * x * (1 + 0.25 * x * (1 + 0.46875 * x)));\n}","export default function(x) {\n  return (0.05859375 * x * x * (1 + 0.75 * x));\n}","export default function(x) {\n  return (x * x * x * (35 / 3072));\n}","export default function(a, e, sinphi) {\n  var temp = e * sinphi;\n  return a / Math.sqrt(1 - temp * temp);\n}","import {HALF_PI} from '../constants/values';\nimport sign from './sign';\n\nexport default function(x) {\n  return (Math.abs(x) < HALF_PI) ? x : (x - (sign(x) * Math.PI));\n}\n","export default function(ml, e0, e1, e2, e3) {\n  var phi;\n  var dphi;\n\n  phi = ml / e0;\n  for (var i = 0; i < 15; i++) {\n    dphi = (ml - (e0 * phi - e1 * Math.sin(2 * phi) + e2 * Math.sin(4 * phi) - e3 * Math.sin(6 * phi))) / (e0 - 2 * e1 * Math.cos(2 * phi) + 4 * e2 * Math.cos(4 * phi) - 6 * e3 * Math.cos(6 * phi));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //..reportError(\"IMLFN-CONV:Latitude failed to converge after 15 iterations\");\n  return NaN;\n}","import mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nexport function init() {\n  if (!this.sphere) {\n    this.e0 = e0fn(this.es);\n    this.e1 = e1fn(this.es);\n    this.e2 = e2fn(this.es);\n    this.e3 = e3fn(this.es);\n    this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  }\n}\n\n/* Cassini forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y;\n  var lam = p.x;\n  var phi = p.y;\n  lam = adjust_lon(lam - this.long0);\n\n  if (this.sphere) {\n    x = this.a * Math.asin(Math.cos(phi) * Math.sin(lam));\n    y = this.a * (Math.atan2(Math.tan(phi), Math.cos(lam)) - this.lat0);\n  }\n  else {\n    //ellipsoid\n    var sinphi = Math.sin(phi);\n    var cosphi = Math.cos(phi);\n    var nl = gN(this.a, this.e, sinphi);\n    var tl = Math.tan(phi) * Math.tan(phi);\n    var al = lam * Math.cos(phi);\n    var asq = al * al;\n    var cl = this.es * cosphi * cosphi / (1 - this.es);\n    var ml = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n\n    x = nl * al * (1 - asq * tl * (1 / 6 - (8 - tl + 8 * cl) * asq / 120));\n    y = ml - this.ml0 + nl * sinphi / cosphi * asq * (0.5 + (5 - tl + 6 * cl) * asq / 24);\n\n\n  }\n\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var phi, lam;\n\n  if (this.sphere) {\n    var dd = y + this.lat0;\n    phi = Math.asin(Math.sin(dd) * Math.cos(x));\n    lam = Math.atan2(Math.tan(x), Math.cos(dd));\n  }\n  else {\n    /* ellipsoid */\n    var ml1 = this.ml0 / this.a + y;\n    var phi1 = imlfn(ml1, this.e0, this.e1, this.e2, this.e3);\n    if (Math.abs(Math.abs(phi1) - HALF_PI) <= EPSLN) {\n      p.x = this.long0;\n      p.y = HALF_PI;\n      if (y < 0) {\n        p.y *= -1;\n      }\n      return p;\n    }\n    var nl1 = gN(this.a, this.e, Math.sin(phi1));\n\n    var rl1 = nl1 * nl1 * nl1 / this.a / this.a * (1 - this.es);\n    var tl1 = Math.pow(Math.tan(phi1), 2);\n    var dl = x * this.a / nl1;\n    var dsq = dl * dl;\n    phi = phi1 - nl1 * Math.tan(phi1) / rl1 * dl * dl * (0.5 - (1 + 3 * tl1) * dl * dl / 24);\n    lam = dl * (1 - dsq * (tl1 / 3 + (1 + 3 * tl1) * tl1 * dsq / 15)) / Math.cos(phi1);\n\n  }\n\n  p.x = adjust_lon(lam + this.long0);\n  p.y = adjust_lat(phi);\n  return p;\n\n}\n\nexport var names = [\"Cassini\", \"Cassini_Soldner\", \"cass\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","export default function(eccent, sinphi) {\n  var con;\n  if (eccent > 1.0e-7) {\n    con = eccent * sinphi;\n    return ((1 - eccent * eccent) * (sinphi / (1 - con * con) - (0.5 / eccent) * Math.log((1 - con) / (1 + con))));\n  }\n  else {\n    return (2 * sinphi);\n  }\n}","\nimport {HALF_PI, EPSLN, FORTPI} from '../constants/values';\n\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\nexport var S_POLE = 1;\n\nexport var N_POLE = 2;\nexport var EQUIT = 3;\nexport var OBLIQ = 4;\n\n/* Initialize the Lambert Azimuthal Equal Area projection\n  ------------------------------------------------------*/\nexport function init() {\n  var t = Math.abs(this.lat0);\n  if (Math.abs(t - HALF_PI) < EPSLN) {\n    this.mode = this.lat0 < 0 ? this.S_POLE : this.N_POLE;\n  }\n  else if (Math.abs(t) < EPSLN) {\n    this.mode = this.EQUIT;\n  }\n  else {\n    this.mode = this.OBLIQ;\n  }\n  if (this.es > 0) {\n    var sinphi;\n\n    this.qp = qsfnz(this.e, 1);\n    this.mmf = 0.5 / (1 - this.es);\n    this.apa = authset(this.es);\n    switch (this.mode) {\n    case this.N_POLE:\n      this.dd = 1;\n      break;\n    case this.S_POLE:\n      this.dd = 1;\n      break;\n    case this.EQUIT:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      this.dd = 1 / this.rq;\n      this.xmf = 1;\n      this.ymf = 0.5 * this.qp;\n      break;\n    case this.OBLIQ:\n      this.rq = Math.sqrt(0.5 * this.qp);\n      sinphi = Math.sin(this.lat0);\n      this.sinb1 = qsfnz(this.e, sinphi) / this.qp;\n      this.cosb1 = Math.sqrt(1 - this.sinb1 * this.sinb1);\n      this.dd = Math.cos(this.lat0) / (Math.sqrt(1 - this.es * sinphi * sinphi) * this.rq * this.cosb1);\n      this.ymf = (this.xmf = this.rq) / this.dd;\n      this.xmf *= this.dd;\n      break;\n    }\n  }\n  else {\n    if (this.mode === this.OBLIQ) {\n      this.sinph0 = Math.sin(this.lat0);\n      this.cosph0 = Math.cos(this.lat0);\n    }\n  }\n}\n\n/* Lambert Azimuthal Equal Area forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var x, y, coslam, sinlam, sinphi, q, sinb, cosb, b, cosphi;\n  var lam = p.x;\n  var phi = p.y;\n\n  lam = adjust_lon(lam - this.long0);\n  if (this.sphere) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    coslam = Math.cos(lam);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      y = (this.mode === this.EQUIT) ? 1 + cosphi * coslam : 1 + this.sinph0 * sinphi + this.cosph0 * cosphi * coslam;\n      if (y <= EPSLN) {\n        return null;\n      }\n      y = Math.sqrt(2 / y);\n      x = y * cosphi * Math.sin(lam);\n      y *= (this.mode === this.EQUIT) ? sinphi : this.cosph0 * sinphi - this.sinph0 * cosphi * coslam;\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        coslam = -coslam;\n      }\n      if (Math.abs(phi + this.phi0) < EPSLN) {\n        return null;\n      }\n      y = FORTPI - phi * 0.5;\n      y = 2 * ((this.mode === this.S_POLE) ? Math.cos(y) : Math.sin(y));\n      x = y * Math.sin(lam);\n      y *= coslam;\n    }\n  }\n  else {\n    sinb = 0;\n    cosb = 0;\n    b = 0;\n    coslam = Math.cos(lam);\n    sinlam = Math.sin(lam);\n    sinphi = Math.sin(phi);\n    q = qsfnz(this.e, sinphi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinb = q / this.qp;\n      cosb = Math.sqrt(1 - sinb * sinb);\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n      b = 1 + this.sinb1 * sinb + this.cosb1 * cosb * coslam;\n      break;\n    case this.EQUIT:\n      b = 1 + cosb * coslam;\n      break;\n    case this.N_POLE:\n      b = HALF_PI + phi;\n      q = this.qp - q;\n      break;\n    case this.S_POLE:\n      b = phi - HALF_PI;\n      q = this.qp + q;\n      break;\n    }\n    if (Math.abs(b) < EPSLN) {\n      return null;\n    }\n    switch (this.mode) {\n    case this.OBLIQ:\n    case this.EQUIT:\n      b = Math.sqrt(2 / b);\n      if (this.mode === this.OBLIQ) {\n        y = this.ymf * b * (this.cosb1 * sinb - this.sinb1 * cosb * coslam);\n      }\n      else {\n        y = (b = Math.sqrt(2 / (1 + cosb * coslam))) * sinb * this.ymf;\n      }\n      x = this.xmf * b * cosb * sinlam;\n      break;\n    case this.N_POLE:\n    case this.S_POLE:\n      if (q >= 0) {\n        x = (b = Math.sqrt(q)) * sinlam;\n        y = coslam * ((this.mode === this.S_POLE) ? b : -b);\n      }\n      else {\n        x = y = 0;\n      }\n      break;\n    }\n  }\n\n  p.x = this.a * x + this.x0;\n  p.y = this.a * y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var x = p.x / this.a;\n  var y = p.y / this.a;\n  var lam, phi, cCe, sCe, q, rho, ab;\n  if (this.sphere) {\n    var cosz = 0,\n      rh, sinz = 0;\n\n    rh = Math.sqrt(x * x + y * y);\n    phi = rh * 0.5;\n    if (phi > 1) {\n      return null;\n    }\n    phi = 2 * Math.asin(phi);\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      sinz = Math.sin(phi);\n      cosz = Math.cos(phi);\n    }\n    switch (this.mode) {\n    case this.EQUIT:\n      phi = (Math.abs(rh) <= EPSLN) ? 0 : Math.asin(y * sinz / rh);\n      x *= sinz;\n      y = cosz * rh;\n      break;\n    case this.OBLIQ:\n      phi = (Math.abs(rh) <= EPSLN) ? this.phi0 : Math.asin(cosz * this.sinph0 + y * sinz * this.cosph0 / rh);\n      x *= sinz * this.cosph0;\n      y = (cosz - Math.sin(phi) * this.sinph0) * rh;\n      break;\n    case this.N_POLE:\n      y = -y;\n      phi = HALF_PI - phi;\n      break;\n    case this.S_POLE:\n      phi -= HALF_PI;\n      break;\n    }\n    lam = (y === 0 && (this.mode === this.EQUIT || this.mode === this.OBLIQ)) ? 0 : Math.atan2(x, y);\n  }\n  else {\n    ab = 0;\n    if (this.mode === this.OBLIQ || this.mode === this.EQUIT) {\n      x /= this.dd;\n      y *= this.dd;\n      rho = Math.sqrt(x * x + y * y);\n      if (rho < EPSLN) {\n        p.x = 0;\n        p.y = this.phi0;\n        return p;\n      }\n      sCe = 2 * Math.asin(0.5 * rho / this.rq);\n      cCe = Math.cos(sCe);\n      x *= (sCe = Math.sin(sCe));\n      if (this.mode === this.OBLIQ) {\n        ab = cCe * this.sinb1 + y * sCe * this.cosb1 / rho;\n        q = this.qp * ab;\n        y = rho * this.cosb1 * cCe - y * this.sinb1 * sCe;\n      }\n      else {\n        ab = y * sCe / rho;\n        q = this.qp * ab;\n        y = rho * cCe;\n      }\n    }\n    else if (this.mode === this.N_POLE || this.mode === this.S_POLE) {\n      if (this.mode === this.N_POLE) {\n        y = -y;\n      }\n      q = (x * x + y * y);\n      if (!q) {\n        p.x = 0;\n        p.y = this.phi0;\n        return p;\n      }\n      ab = 1 - q / this.qp;\n      if (this.mode === this.S_POLE) {\n        ab = -ab;\n      }\n    }\n    lam = Math.atan2(x, y);\n    phi = authlat(Math.asin(ab), this.apa);\n  }\n\n  p.x = adjust_lon(this.long0 + lam);\n  p.y = phi;\n  return p;\n}\n\n/* determine latitude from authalic latitude */\nvar P00 = 0.33333333333333333333;\n\nvar P01 = 0.17222222222222222222;\nvar P02 = 0.10257936507936507936;\nvar P10 = 0.06388888888888888888;\nvar P11 = 0.06640211640211640211;\nvar P20 = 0.01641501294219154443;\n\nfunction authset(es) {\n  var t;\n  var APA = [];\n  APA[0] = es * P00;\n  t = es * es;\n  APA[0] += t * P01;\n  APA[1] = t * P10;\n  t *= es;\n  APA[0] += t * P02;\n  APA[1] += t * P11;\n  APA[2] = t * P20;\n  return APA;\n}\n\nfunction authlat(beta, APA) {\n  var t = beta + beta;\n  return (beta + APA[0] * Math.sin(t) + APA[1] * Math.sin(t + t) + APA[2] * Math.sin(t + t + t));\n}\n\nexport var names = [\"Lambert Azimuthal Equal Area\", \"Lambert_Azimuthal_Equal_Area\", \"laea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  S_POLE: S_POLE,\n  N_POLE: N_POLE,\n  EQUIT: EQUIT,\n  OBLIQ: OBLIQ\n};\n","export default function(x) {\n  if (Math.abs(x) > 1) {\n    x = (x > 1) ? 1 : -1;\n  }\n  return Math.asin(x);\n}","import msfnz from '../common/msfnz';\nimport qsfnz from '../common/qsfnz';\nimport adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e3 = Math.sqrt(this.es);\n\n  this.sin_po = Math.sin(this.lat1);\n  this.cos_po = Math.cos(this.lat1);\n  this.t1 = this.sin_po;\n  this.con = this.sin_po;\n  this.ms1 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs1 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat2);\n  this.cos_po = Math.cos(this.lat2);\n  this.t2 = this.sin_po;\n  this.ms2 = msfnz(this.e3, this.sin_po, this.cos_po);\n  this.qs2 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  this.sin_po = Math.sin(this.lat0);\n  this.cos_po = Math.cos(this.lat0);\n  this.t3 = this.sin_po;\n  this.qs0 = qsfnz(this.e3, this.sin_po, this.cos_po);\n\n  if (Math.abs(this.lat1 - this.lat2) > EPSLN) {\n    this.ns0 = (this.ms1 * this.ms1 - this.ms2 * this.ms2) / (this.qs2 - this.qs1);\n  }\n  else {\n    this.ns0 = this.con;\n  }\n  this.c = this.ms1 * this.ms1 + this.ns0 * this.qs1;\n  this.rh = this.a * Math.sqrt(this.c - this.ns0 * this.qs0) / this.ns0;\n}\n\n/* Albers Conical Equal Area forward equations--mapping lat,long to x,y\n  -------------------------------------------------------------------*/\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  this.sin_phi = Math.sin(lat);\n  this.cos_phi = Math.cos(lat);\n\n  var qs = qsfnz(this.e3, this.sin_phi, this.cos_phi);\n  var rh1 = this.a * Math.sqrt(this.c - this.ns0 * qs) / this.ns0;\n  var theta = this.ns0 * adjust_lon(lon - this.long0);\n  var x = rh1 * Math.sin(theta) + this.x0;\n  var y = this.rh - rh1 * Math.cos(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh1, qs, con, theta, lon, lat;\n\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  if (this.ns0 >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n  con = rh1 * this.ns0 / this.a;\n  if (this.sphere) {\n    lat = Math.asin((this.c - con * con) / (2 * this.ns0));\n  }\n  else {\n    qs = (this.c - con * con) / this.ns0;\n    lat = this.phi1z(this.e3, qs);\n  }\n\n  lon = adjust_lon(theta / this.ns0 + this.long0);\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\n/* Function to compute phi1, the latitude for the inverse of the\n   Albers Conical Equal-Area projection.\n-------------------------------------------*/\nexport function phi1z(eccent, qs) {\n  var sinphi, cosphi, con, com, dphi;\n  var phi = asinz(0.5 * qs);\n  if (eccent < EPSLN) {\n    return phi;\n  }\n\n  var eccnts = eccent * eccent;\n  for (var i = 1; i <= 25; i++) {\n    sinphi = Math.sin(phi);\n    cosphi = Math.cos(phi);\n    con = eccent * sinphi;\n    com = 1 - con * con;\n    dphi = 0.5 * com * com / cosphi * (qs / (1 - eccnts) - sinphi / com + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi = phi + dphi;\n    if (Math.abs(dphi) <= 1e-7) {\n      return phi;\n    }\n  }\n  return null;\n}\n\nexport var names = [\"Albers_Conic_Equal_Area\", \"Albers\", \"aea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names,\n  phi1z: phi1z\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN} from '../constants/values';\n\n/*\n  reference:\n    Wolfram Mathworld \"Gnomonic Projection\"\n    http://mathworld.wolfram.com/GnomonicProjection.html\n    Accessed: 12th November 2009\n  */\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n  // Approximation for projecting points to the horizon (infinity)\n  this.infinity_dist = 1000 * this.a;\n  this.rc = 1;\n}\n\n/* Gnomonic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g;\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.x0 + this.a * ksp * cosphi * Math.sin(dlon) / g;\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon) / g;\n  }\n  else {\n\n    // Point is in the opposing hemisphere and is unprojectable\n    // We still need to return a reasonable point, so we project\n    // to infinity, on a bearing\n    // equivalent to the northern hemisphere equivalent\n    // This is a reasonable approximation for short shapes and lines that\n    // straddle the horizon.\n\n    x = this.x0 + this.infinity_dist * cosphi * Math.sin(dlon);\n    y = this.y0 + this.infinity_dist * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* Rho */\n  var sinc, cosc;\n  var c;\n  var lon, lat;\n\n  /* Inverse equations\n      -----------------*/\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  p.x /= this.k0;\n  p.y /= this.k0;\n\n  if ((rh = Math.sqrt(p.x * p.x + p.y * p.y))) {\n    c = Math.atan2(rh, this.rc);\n    sinc = Math.sin(c);\n    cosc = Math.cos(c);\n\n    lat = asinz(cosc * this.sin_p14 + (p.y * sinc * this.cos_p14) / rh);\n    lon = Math.atan2(p.x * sinc, rh * this.cos_p14 * cosc - p.y * this.sin_p14 * sinc);\n    lon = adjust_lon(this.long0 + lon);\n  }\n  else {\n    lat = this.phic0;\n    lon = 0;\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"gnom\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport qsfnz from '../common/qsfnz';\nimport msfnz from '../common/msfnz';\nimport iqsfnz from '../common/iqsfnz';\n\n/*\n  reference:\n    \"Cartographic Projection Procedures for the UNIX Environment-\n    A User's Manual\" by Gerald I. Evenden,\n    USGS Open File Report 90-284and Release 4 Interim Reports (2003)\n*/\nexport function init() {\n  //no-op\n  if (!this.sphere) {\n    this.k0 = msfnz(this.e, Math.sin(this.lat_ts), Math.cos(this.lat_ts));\n  }\n}\n\n/* Cylindrical Equal Area forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  if (this.sphere) {\n    x = this.x0 + this.a * dlon * Math.cos(this.lat_ts);\n    y = this.y0 + this.a * Math.sin(lat) / Math.cos(this.lat_ts);\n  }\n  else {\n    var qs = qsfnz(this.e, Math.sin(lat));\n    x = this.x0 + this.a * this.k0 * dlon;\n    y = this.y0 + this.a * qs * 0.5 / this.k0;\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Cylindrical Equal Area inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var lon, lat;\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + (p.x / this.a) / Math.cos(this.lat_ts));\n    lat = Math.asin((p.y / this.a) * Math.cos(this.lat_ts));\n  }\n  else {\n    lat = iqsfnz(this.e, 2 * p.y * this.k0 / this.a);\n    lon = adjust_lon(this.long0 + p.x / (this.a * this.k0));\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"cea\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {HALF_PI} from '../constants/values';\n\nexport default function(eccent, q) {\n  var temp = 1 - (1 - eccent * eccent) / (2 * eccent) * Math.log((1 - eccent) / (1 + eccent));\n  if (Math.abs(Math.abs(q) - temp) < 1.0E-6) {\n    if (q < 0) {\n      return (-1 * HALF_PI);\n    }\n    else {\n      return HALF_PI;\n    }\n  }\n  //var phi = 0.5* q/(1-eccent*eccent);\n  var phi = Math.asin(0.5 * q);\n  var dphi;\n  var sin_phi;\n  var cos_phi;\n  var con;\n  for (var i = 0; i < 30; i++) {\n    sin_phi = Math.sin(phi);\n    cos_phi = Math.cos(phi);\n    con = eccent * sin_phi;\n    dphi = Math.pow(1 - con * con, 2) / (2 * cos_phi) * (q / (1 - eccent * eccent) - sin_phi / (1 - con * con) + 0.5 / eccent * Math.log((1 - con) / (1 + con)));\n    phi += dphi;\n    if (Math.abs(dphi) <= 0.0000000001) {\n      return phi;\n    }\n  }\n\n  //console.log(\"IQSFN-CONV:Latitude failed to converge after 30 iterations\");\n  return NaN;\n}\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Equidistant Cylindrical (Plate Carre)\";\n\n  this.rc = Math.cos(this.lat_ts);\n}\n\n// forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  var dlon = adjust_lon(lon - this.long0);\n  var dlat = adjust_lat(lat - this.lat0);\n  p.x = this.x0 + (this.a * dlon * this.rc);\n  p.y = this.y0 + (this.a * dlat);\n  return p;\n}\n\n// inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n\n  var x = p.x;\n  var y = p.y;\n\n  p.x = adjust_lon(this.long0 + ((x - this.x0) / (this.a * this.rc)));\n  p.y = adjust_lat(this.lat0 + ((y - this.y0) / (this.a)));\n  return p;\n}\n\nexport var names = [\"Equirectangular\", \"Equidistant_Cylindrical\", \"eqc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport mlfn from '../common/mlfn';\nimport {EPSLN} from '../constants/values';\n\nimport gN from '../common/gN';\nvar MAX_ITER = 20;\n\nexport function init() {\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2); // devait etre dans tmerc.js mais n y est pas donc je commente sinon retour de valeurs nulles\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n  this.ml0 = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0); //si que des zeros le calcul ne se fait pas\n}\n\n/* Polyconic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var x, y, el;\n  var dlon = adjust_lon(lon - this.long0);\n  el = dlon * Math.sin(lat);\n  if (this.sphere) {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.a * this.lat0;\n    }\n    else {\n      x = this.a * Math.sin(el) / Math.tan(lat);\n      y = this.a * (adjust_lat(lat - this.lat0) + (1 - Math.cos(el)) / Math.tan(lat));\n    }\n  }\n  else {\n    if (Math.abs(lat) <= EPSLN) {\n      x = this.a * dlon;\n      y = -1 * this.ml0;\n    }\n    else {\n      var nl = gN(this.a, this.e, Math.sin(lat)) / Math.tan(lat);\n      x = nl * Math.sin(el);\n      y = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, lat) - this.ml0 + nl * (1 - Math.cos(el));\n    }\n\n  }\n  p.x = x + this.x0;\n  p.y = y + this.y0;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  var lon, lat, x, y, i;\n  var al, bl;\n  var phi, dphi;\n  x = p.x - this.x0;\n  y = p.y - this.y0;\n\n  if (this.sphere) {\n    if (Math.abs(y + this.a * this.lat0) <= EPSLN) {\n      lon = adjust_lon(x / this.a + this.long0);\n      lat = 0;\n    }\n    else {\n      al = this.lat0 + y / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var tanphi;\n      for (i = MAX_ITER; i; --i) {\n        tanphi = Math.tan(phi);\n        dphi = -1 * (al * (phi * tanphi + 1) - phi - 0.5 * (phi * phi + bl) * tanphi) / ((phi - al) / tanphi - 1);\n        phi += dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n      lon = adjust_lon(this.long0 + (Math.asin(x * Math.tan(phi) / this.a)) / Math.sin(lat));\n    }\n  }\n  else {\n    if (Math.abs(y + this.ml0) <= EPSLN) {\n      lat = 0;\n      lon = adjust_lon(this.long0 + x / this.a);\n    }\n    else {\n\n      al = (this.ml0 + y) / this.a;\n      bl = x * x / this.a / this.a + al * al;\n      phi = al;\n      var cl, mln, mlnp, ma;\n      var con;\n      for (i = MAX_ITER; i; --i) {\n        con = this.e * Math.sin(phi);\n        cl = Math.sqrt(1 - con * con) * Math.tan(phi);\n        mln = this.a * mlfn(this.e0, this.e1, this.e2, this.e3, phi);\n        mlnp = this.e0 - 2 * this.e1 * Math.cos(2 * phi) + 4 * this.e2 * Math.cos(4 * phi) - 6 * this.e3 * Math.cos(6 * phi);\n        ma = mln / this.a;\n        dphi = (al * (cl * ma + 1) - ma - 0.5 * cl * (ma * ma + bl)) / (this.es * Math.sin(2 * phi) * (ma * ma + bl - 2 * al * ma) / (4 * cl) + (al - ma) * (cl * mlnp - 2 / Math.sin(2 * phi)) - mlnp);\n        phi -= dphi;\n        if (Math.abs(dphi) <= EPSLN) {\n          lat = phi;\n          break;\n        }\n      }\n\n      //lat=phi4z(this.e,this.e0,this.e1,this.e2,this.e3,al,bl,0,0);\n      cl = Math.sqrt(1 - this.es * Math.pow(Math.sin(lat), 2)) * Math.tan(lat);\n      lon = adjust_lon(this.long0 + Math.asin(x * cl / this.a) / Math.sin(lat));\n    }\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Polyconic\", \"poly\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {SEC_TO_RAD} from '../constants/values';\n\n/*\n  reference\n    Department of Land and Survey Technical Circular 1973/32\n      http://www.linz.govt.nz/docs/miscellaneous/nz-map-definition.pdf\n    OSG Technical Report 4.1\n      http://www.linz.govt.nz/docs/miscellaneous/nzmg.pdf\n  */\n\n/**\n * iterations: Number of iterations to refine inverse transform.\n *     0 -> km accuracy\n *     1 -> m accuracy -- suitable for most mapping applications\n *     2 -> mm accuracy\n */\nexport var iterations = 1;\n\nexport function init() {\n  this.A = [];\n  this.A[1] = 0.6399175073;\n  this.A[2] = -0.1358797613;\n  this.A[3] = 0.063294409;\n  this.A[4] = -0.02526853;\n  this.A[5] = 0.0117879;\n  this.A[6] = -0.0055161;\n  this.A[7] = 0.0026906;\n  this.A[8] = -0.001333;\n  this.A[9] = 0.00067;\n  this.A[10] = -0.00034;\n\n  this.B_re = [];\n  this.B_im = [];\n  this.B_re[1] = 0.7557853228;\n  this.B_im[1] = 0;\n  this.B_re[2] = 0.249204646;\n  this.B_im[2] = 0.003371507;\n  this.B_re[3] = -0.001541739;\n  this.B_im[3] = 0.041058560;\n  this.B_re[4] = -0.10162907;\n  this.B_im[4] = 0.01727609;\n  this.B_re[5] = -0.26623489;\n  this.B_im[5] = -0.36249218;\n  this.B_re[6] = -0.6870983;\n  this.B_im[6] = -1.1651967;\n\n  this.C_re = [];\n  this.C_im = [];\n  this.C_re[1] = 1.3231270439;\n  this.C_im[1] = 0;\n  this.C_re[2] = -0.577245789;\n  this.C_im[2] = -0.007809598;\n  this.C_re[3] = 0.508307513;\n  this.C_im[3] = -0.112208952;\n  this.C_re[4] = -0.15094762;\n  this.C_im[4] = 0.18200602;\n  this.C_re[5] = 1.01418179;\n  this.C_im[5] = 1.64497696;\n  this.C_re[6] = 1.9660549;\n  this.C_im[6] = 2.5127645;\n\n  this.D = [];\n  this.D[1] = 1.5627014243;\n  this.D[2] = 0.5185406398;\n  this.D[3] = -0.03333098;\n  this.D[4] = -0.1052906;\n  this.D[5] = -0.0368594;\n  this.D[6] = 0.007317;\n  this.D[7] = 0.01220;\n  this.D[8] = 0.00394;\n  this.D[9] = -0.0013;\n}\n\n/**\n    New Zealand Map Grid Forward  - long/lat to x/y\n    long/lat in radians\n  */\nexport function forward(p) {\n  var n;\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lat = lat - this.lat0;\n  var delta_lon = lon - this.long0;\n\n  // 1. Calculate d_phi and d_psi    ...                          // and d_lambda\n  // For this algorithm, delta_latitude is in seconds of arc x 10-5, so we need to scale to those units. Longitude is radians.\n  var d_phi = delta_lat / SEC_TO_RAD * 1E-5;\n  var d_lambda = delta_lon;\n  var d_phi_n = 1; // d_phi^0\n\n  var d_psi = 0;\n  for (n = 1; n <= 10; n++) {\n    d_phi_n = d_phi_n * d_phi;\n    d_psi = d_psi + this.A[n] * d_phi_n;\n  }\n\n  // 2. Calculate theta\n  var th_re = d_psi;\n  var th_im = d_lambda;\n\n  // 3. Calculate z\n  var th_n_re = 1;\n  var th_n_im = 0; // theta^0\n  var th_n_re1;\n  var th_n_im1;\n\n  var z_re = 0;\n  var z_im = 0;\n  for (n = 1; n <= 6; n++) {\n    th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n    th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n    th_n_re = th_n_re1;\n    th_n_im = th_n_im1;\n    z_re = z_re + this.B_re[n] * th_n_re - this.B_im[n] * th_n_im;\n    z_im = z_im + this.B_im[n] * th_n_re + this.B_re[n] * th_n_im;\n  }\n\n  // 4. Calculate easting and northing\n  p.x = (z_im * this.a) + this.x0;\n  p.y = (z_re * this.a) + this.y0;\n\n  return p;\n}\n\n/**\n    New Zealand Map Grid Inverse  -  x/y to long/lat\n  */\nexport function inverse(p) {\n  var n;\n  var x = p.x;\n  var y = p.y;\n\n  var delta_x = x - this.x0;\n  var delta_y = y - this.y0;\n\n  // 1. Calculate z\n  var z_re = delta_y / this.a;\n  var z_im = delta_x / this.a;\n\n  // 2a. Calculate theta - first approximation gives km accuracy\n  var z_n_re = 1;\n  var z_n_im = 0; // z^0\n  var z_n_re1;\n  var z_n_im1;\n\n  var th_re = 0;\n  var th_im = 0;\n  for (n = 1; n <= 6; n++) {\n    z_n_re1 = z_n_re * z_re - z_n_im * z_im;\n    z_n_im1 = z_n_im * z_re + z_n_re * z_im;\n    z_n_re = z_n_re1;\n    z_n_im = z_n_im1;\n    th_re = th_re + this.C_re[n] * z_n_re - this.C_im[n] * z_n_im;\n    th_im = th_im + this.C_im[n] * z_n_re + this.C_re[n] * z_n_im;\n  }\n\n  // 2b. Iterate to refine the accuracy of the calculation\n  //        0 iterations gives km accuracy\n  //        1 iteration gives m accuracy -- good enough for most mapping applications\n  //        2 iterations bives mm accuracy\n  for (var i = 0; i < this.iterations; i++) {\n    var th_n_re = th_re;\n    var th_n_im = th_im;\n    var th_n_re1;\n    var th_n_im1;\n\n    var num_re = z_re;\n    var num_im = z_im;\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      num_re = num_re + (n - 1) * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      num_im = num_im + (n - 1) * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    th_n_re = 1;\n    th_n_im = 0;\n    var den_re = this.B_re[1];\n    var den_im = this.B_im[1];\n    for (n = 2; n <= 6; n++) {\n      th_n_re1 = th_n_re * th_re - th_n_im * th_im;\n      th_n_im1 = th_n_im * th_re + th_n_re * th_im;\n      th_n_re = th_n_re1;\n      th_n_im = th_n_im1;\n      den_re = den_re + n * (this.B_re[n] * th_n_re - this.B_im[n] * th_n_im);\n      den_im = den_im + n * (this.B_im[n] * th_n_re + this.B_re[n] * th_n_im);\n    }\n\n    // Complex division\n    var den2 = den_re * den_re + den_im * den_im;\n    th_re = (num_re * den_re + num_im * den_im) / den2;\n    th_im = (num_im * den_re - num_re * den_im) / den2;\n  }\n\n  // 3. Calculate d_phi              ...                                    // and d_lambda\n  var d_psi = th_re;\n  var d_lambda = th_im;\n  var d_psi_n = 1; // d_psi^0\n\n  var d_phi = 0;\n  for (n = 1; n <= 9; n++) {\n    d_psi_n = d_psi_n * d_psi;\n    d_phi = d_phi + this.D[n] * d_psi_n;\n  }\n\n  // 4. Calculate latitude and longitude\n  // d_phi is calcuated in second of arc * 10^-5, so we need to scale back to radians. d_lambda is in radians.\n  var lat = this.lat0 + (d_phi * SEC_TO_RAD * 1E5);\n  var lon = this.long0 + d_lambda;\n\n  p.x = lon;\n  p.y = lat;\n\n  return p;\n}\n\nexport var names = [\"New_Zealand_Map_Grid\", \"nzmg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\n/*\n  reference\n    \"New Equal-Area Map Projections for Noncircular Regions\", John P. Snyder,\n    The American Cartographer, Vol 15, No. 4, October 1988, pp. 341-355.\n  */\n\n\n/* Initialize the Miller Cylindrical projection\n  -------------------------------------------*/\nexport function init() {\n  //no-op\n}\n\n/* Miller Cylindrical forward equations--mapping lat,long to x,y\n    ------------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x = this.x0 + this.a * dlon;\n  var y = this.y0 + this.a * Math.log(Math.tan((Math.PI / 4) + (lat / 2.5))) * 1.25;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Miller Cylindrical inverse equations--mapping x,y to lat/long\n    ------------------------------------------------------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n\n  var lon = adjust_lon(this.long0 + p.x / this.a);\n  var lat = 2.5 * (Math.atan(Math.exp(0.8 * p.y / this.a)) - Math.PI / 4);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Miller_Cylindrical\", \"mill\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport pj_enfn from '../common/pj_enfn';\nvar MAX_ITER = 20;\nimport pj_mlfn from '../common/pj_mlfn';\nimport pj_inv_mlfn from '../common/pj_inv_mlfn';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n\nexport function init() {\n  /* Place parameters in static storage for common use\n    -------------------------------------------------*/\n\n\n  if (!this.sphere) {\n    this.en = pj_enfn(this.es);\n  }\n  else {\n    this.n = 1;\n    this.m = 0;\n    this.es = 0;\n    this.C_y = Math.sqrt((this.m + 1) / this.n);\n    this.C_x = this.C_y / (this.m + 1);\n  }\n\n}\n\n/* Sinusoidal forward equations--mapping lat,long to x,y\n  -----------------------------------------------------*/\nexport function forward(p) {\n  var x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n    -----------------*/\n  lon = adjust_lon(lon - this.long0);\n\n  if (this.sphere) {\n    if (!this.m) {\n      lat = this.n !== 1 ? Math.asin(this.n * Math.sin(lat)) : lat;\n    }\n    else {\n      var k = this.n * Math.sin(lat);\n      for (var i = MAX_ITER; i; --i) {\n        var V = (this.m * lat + Math.sin(lat) - k) / (this.m + Math.cos(lat));\n        lat -= V;\n        if (Math.abs(V) < EPSLN) {\n          break;\n        }\n      }\n    }\n    x = this.a * this.C_x * lon * (this.m + Math.cos(lat));\n    y = this.a * this.C_y * lat;\n\n  }\n  else {\n\n    var s = Math.sin(lat);\n    var c = Math.cos(lat);\n    y = this.a * pj_mlfn(lat, s, c, this.en);\n    x = this.a * lon * c / Math.sqrt(1 - this.es * s * s);\n  }\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var lat, temp, lon, s;\n\n  p.x -= this.x0;\n  lon = p.x / this.a;\n  p.y -= this.y0;\n  lat = p.y / this.a;\n\n  if (this.sphere) {\n    lat /= this.C_y;\n    lon = lon / (this.C_x * (this.m + Math.cos(lat)));\n    if (this.m) {\n      lat = asinz((this.m * lat + Math.sin(lat)) / this.n);\n    }\n    else if (this.n !== 1) {\n      lat = asinz(Math.sin(lat) / this.n);\n    }\n    lon = adjust_lon(lon + this.long0);\n    lat = adjust_lat(lat);\n  }\n  else {\n    lat = pj_inv_mlfn(p.y / this.a, this.es, this.en);\n    s = Math.abs(lat);\n    if (s < HALF_PI) {\n      s = Math.sin(lat);\n      temp = this.long0 + p.x * Math.sqrt(1 - this.es * s * s) / (this.a * Math.cos(lat));\n      //temp = this.long0 + p.x / (this.a * Math.cos(lat));\n      lon = adjust_lon(temp);\n    }\n    else if ((s - EPSLN) < HALF_PI) {\n      lon = this.long0;\n    }\n  }\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Sinusoidal\", \"sinu\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nexport function init() {}\nimport {EPSLN} from '../constants/values';\n/* Mollweide forward equations--mapping lat,long to x,y\n    ----------------------------------------------------*/\nexport function forward(p) {\n\n  /* Forward equations\n      -----------------*/\n  var lon = p.x;\n  var lat = p.y;\n\n  var delta_lon = adjust_lon(lon - this.long0);\n  var theta = lat;\n  var con = Math.PI * Math.sin(lat);\n\n  /* Iterate using the Newton-Raphson method to find theta\n      -----------------------------------------------------*/\n  while (true) {\n    var delta_theta = -(theta + Math.sin(theta) - con) / (1 + Math.cos(theta));\n    theta += delta_theta;\n    if (Math.abs(delta_theta) < EPSLN) {\n      break;\n    }\n  }\n  theta /= 2;\n\n  /* If the latitude is 90 deg, force the x coordinate to be \"0 + false easting\"\n       this is done here because of precision problems with \"cos(theta)\"\n       --------------------------------------------------------------------------*/\n  if (Math.PI / 2 - Math.abs(lat) < EPSLN) {\n    delta_lon = 0;\n  }\n  var x = 0.900316316158 * this.a * delta_lon * Math.cos(theta) + this.x0;\n  var y = 1.4142135623731 * this.a * Math.sin(theta) + this.y0;\n\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var theta;\n  var arg;\n\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  arg = p.y / (1.4142135623731 * this.a);\n\n  /* Because of division by zero problems, 'arg' can not be 1.  Therefore\n       a number very close to one is used instead.\n       -------------------------------------------------------------------*/\n  if (Math.abs(arg) > 0.999999999999) {\n    arg = 0.999999999999;\n  }\n  theta = Math.asin(arg);\n  var lon = adjust_lon(this.long0 + (p.x / (0.900316316158 * this.a * Math.cos(theta))));\n  if (lon < (-Math.PI)) {\n    lon = -Math.PI;\n  }\n  if (lon > Math.PI) {\n    lon = Math.PI;\n  }\n  arg = (2 * theta + Math.sin(2 * theta)) / Math.PI;\n  if (Math.abs(arg) > 1) {\n    arg = 1;\n  }\n  var lat = Math.asin(arg);\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Mollweide\", \"moll\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport msfnz from '../common/msfnz';\nimport mlfn from '../common/mlfn';\nimport adjust_lon from '../common/adjust_lon';\nimport adjust_lat from '../common/adjust_lat';\nimport imlfn from '../common/imlfn';\nimport {EPSLN} from '../constants/values';\n\nexport function init() {\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  // Standard Parallels cannot be equal and on opposite sides of the equator\n  if (Math.abs(this.lat1 + this.lat2) < EPSLN) {\n    return;\n  }\n  this.lat2 = this.lat2 || this.lat1;\n  this.temp = this.b / this.a;\n  this.es = 1 - Math.pow(this.temp, 2);\n  this.e = Math.sqrt(this.es);\n  this.e0 = e0fn(this.es);\n  this.e1 = e1fn(this.es);\n  this.e2 = e2fn(this.es);\n  this.e3 = e3fn(this.es);\n\n  this.sinphi = Math.sin(this.lat1);\n  this.cosphi = Math.cos(this.lat1);\n\n  this.ms1 = msfnz(this.e, this.sinphi, this.cosphi);\n  this.ml1 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat1);\n\n  if (Math.abs(this.lat1 - this.lat2) < EPSLN) {\n    this.ns = this.sinphi;\n  }\n  else {\n    this.sinphi = Math.sin(this.lat2);\n    this.cosphi = Math.cos(this.lat2);\n    this.ms2 = msfnz(this.e, this.sinphi, this.cosphi);\n    this.ml2 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat2);\n    this.ns = (this.ms1 - this.ms2) / (this.ml2 - this.ml1);\n  }\n  this.g = this.ml1 + this.ms1 / this.ns;\n  this.ml0 = mlfn(this.e0, this.e1, this.e2, this.e3, this.lat0);\n  this.rh = this.a * (this.g - this.ml0);\n}\n\n/* Equidistant Conic forward equations--mapping lat,long to x,y\n  -----------------------------------------------------------*/\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var rh1;\n\n  /* Forward equations\n      -----------------*/\n  if (this.sphere) {\n    rh1 = this.a * (this.g - lat);\n  }\n  else {\n    var ml = mlfn(this.e0, this.e1, this.e2, this.e3, lat);\n    rh1 = this.a * (this.g - ml);\n  }\n  var theta = this.ns * adjust_lon(lon - this.long0);\n  var x = this.x0 + rh1 * Math.sin(theta);\n  var y = this.y0 + this.rh - rh1 * Math.cos(theta);\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Inverse equations\n  -----------------*/\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y = this.rh - p.y + this.y0;\n  var con, rh1, lat, lon;\n  if (this.ns >= 0) {\n    rh1 = Math.sqrt(p.x * p.x + p.y * p.y);\n    con = 1;\n  }\n  else {\n    rh1 = -Math.sqrt(p.x * p.x + p.y * p.y);\n    con = -1;\n  }\n  var theta = 0;\n  if (rh1 !== 0) {\n    theta = Math.atan2(con * p.x, con * p.y);\n  }\n\n  if (this.sphere) {\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    lat = adjust_lat(this.g - rh1 / this.a);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    var ml = this.g - rh1 / this.a;\n    lat = imlfn(ml, this.e0, this.e1, this.e2, this.e3);\n    lon = adjust_lon(this.long0 + theta / this.ns);\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n\n}\n\nexport var names = [\"Equidistant_Conic\", \"eqdc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\n\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport asinz from '../common/asinz';\n\n/* Initialize the Van Der Grinten projection\n  ----------------------------------------*/\nexport function init() {\n  //this.R = 6370997; //Radius of earth\n  this.R = this.a;\n}\n\nexport function forward(p) {\n\n  var lon = p.x;\n  var lat = p.y;\n\n  /* Forward equations\n    -----------------*/\n  var dlon = adjust_lon(lon - this.long0);\n  var x, y;\n\n  if (Math.abs(lat) <= EPSLN) {\n    x = this.x0 + this.R * dlon;\n    y = this.y0;\n  }\n  var theta = asinz(2 * Math.abs(lat / Math.PI));\n  if ((Math.abs(dlon) <= EPSLN) || (Math.abs(Math.abs(lat) - HALF_PI) <= EPSLN)) {\n    x = this.x0;\n    if (lat >= 0) {\n      y = this.y0 + Math.PI * this.R * Math.tan(0.5 * theta);\n    }\n    else {\n      y = this.y0 + Math.PI * this.R * -Math.tan(0.5 * theta);\n    }\n    //  return(OK);\n  }\n  var al = 0.5 * Math.abs((Math.PI / dlon) - (dlon / Math.PI));\n  var asq = al * al;\n  var sinth = Math.sin(theta);\n  var costh = Math.cos(theta);\n\n  var g = costh / (sinth + costh - 1);\n  var gsq = g * g;\n  var m = g * (2 / sinth - 1);\n  var msq = m * m;\n  var con = Math.PI * this.R * (al * (g - msq) + Math.sqrt(asq * (g - msq) * (g - msq) - (msq + asq) * (gsq - msq))) / (msq + asq);\n  if (dlon < 0) {\n    con = -con;\n  }\n  x = this.x0 + con;\n  //con = Math.abs(con / (Math.PI * this.R));\n  var q = asq + g;\n  con = Math.PI * this.R * (m * q - al * Math.sqrt((msq + asq) * (asq + 1) - q * q)) / (msq + asq);\n  if (lat >= 0) {\n    //y = this.y0 + Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 + con;\n  }\n  else {\n    //y = this.y0 - Math.PI * this.R * Math.sqrt(1 - con * con - 2 * al * con);\n    y = this.y0 - con;\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\n/* Van Der Grinten inverse equations--mapping x,y to lat/long\n  ---------------------------------------------------------*/\nexport function inverse(p) {\n  var lon, lat;\n  var xx, yy, xys, c1, c2, c3;\n  var a1;\n  var m1;\n  var con;\n  var th1;\n  var d;\n\n  /* inverse equations\n    -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  con = Math.PI * this.R;\n  xx = p.x / con;\n  yy = p.y / con;\n  xys = xx * xx + yy * yy;\n  c1 = -Math.abs(yy) * (1 + xys);\n  c2 = c1 - 2 * yy * yy + xx * xx;\n  c3 = -2 * c1 + 1 + 2 * yy * yy + xys * xys;\n  d = yy * yy / c3 + (2 * c2 * c2 * c2 / c3 / c3 / c3 - 9 * c1 * c2 / c3 / c3) / 27;\n  a1 = (c1 - c2 * c2 / 3 / c3) / c3;\n  m1 = 2 * Math.sqrt(-a1 / 3);\n  con = ((3 * d) / a1) / m1;\n  if (Math.abs(con) > 1) {\n    if (con >= 0) {\n      con = 1;\n    }\n    else {\n      con = -1;\n    }\n  }\n  th1 = Math.acos(con) / 3;\n  if (p.y >= 0) {\n    lat = (-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n  else {\n    lat = -(-m1 * Math.cos(th1 + Math.PI / 3) - c2 / 3 / c3) * Math.PI;\n  }\n\n  if (Math.abs(xx) < EPSLN) {\n    lon = this.long0;\n  }\n  else {\n    lon = adjust_lon(this.long0 + Math.PI * (xys - 1 + Math.sqrt(1 + 2 * (xx * xx - yy * yy) + xys * xys)) / 2 / xx);\n  }\n\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"Van_der_Grinten_I\", \"VanDerGrinten\", \"vandg\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport {HALF_PI, EPSLN} from '../constants/values';\n\nimport mlfn from '../common/mlfn';\nimport e0fn from '../common/e0fn';\nimport e1fn from '../common/e1fn';\nimport e2fn from '../common/e2fn';\nimport e3fn from '../common/e3fn';\nimport gN from '../common/gN';\nimport asinz from '../common/asinz';\nimport imlfn from '../common/imlfn';\n\n\n\nexport function init() {\n  this.sin_p12 = Math.sin(this.lat0);\n  this.cos_p12 = Math.cos(this.lat0);\n}\n\nexport function forward(p) {\n  var lon = p.x;\n  var lat = p.y;\n  var sinphi = Math.sin(p.y);\n  var cosphi = Math.cos(p.y);\n  var dlon = adjust_lon(lon - this.long0);\n  var e0, e1, e2, e3, Mlp, Ml, tanphi, Nl1, Nl, psi, Az, G, H, GH, Hs, c, kp, cos_c, s, s2, s3, s4, s5;\n  if (this.sphere) {\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      p.x = this.x0 + this.a * (HALF_PI - lat) * Math.sin(dlon);\n      p.y = this.y0 - this.a * (HALF_PI - lat) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      p.x = this.x0 + this.a * (HALF_PI + lat) * Math.sin(dlon);\n      p.y = this.y0 + this.a * (HALF_PI + lat) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //default case\n      cos_c = this.sin_p12 * sinphi + this.cos_p12 * cosphi * Math.cos(dlon);\n      c = Math.acos(cos_c);\n      kp = c / Math.sin(c);\n      p.x = this.x0 + this.a * kp * cosphi * Math.sin(dlon);\n      p.y = this.y0 + this.a * kp * (this.cos_p12 * sinphi - this.sin_p12 * cosphi * Math.cos(dlon));\n      return p;\n    }\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp - Ml) * Math.sin(dlon);\n      p.y = this.y0 - (Mlp - Ml) * Math.cos(dlon);\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South Pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      Ml = this.a * mlfn(e0, e1, e2, e3, lat);\n      p.x = this.x0 + (Mlp + Ml) * Math.sin(dlon);\n      p.y = this.y0 + (Mlp + Ml) * Math.cos(dlon);\n      return p;\n    }\n    else {\n      //Default case\n      tanphi = sinphi / cosphi;\n      Nl1 = gN(this.a, this.e, this.sin_p12);\n      Nl = gN(this.a, this.e, sinphi);\n      psi = Math.atan((1 - this.es) * tanphi + this.es * Nl1 * this.sin_p12 / (Nl * cosphi));\n      Az = Math.atan2(Math.sin(dlon), this.cos_p12 * Math.tan(psi) - this.sin_p12 * Math.cos(dlon));\n      if (Az === 0) {\n        s = Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else if (Math.abs(Math.abs(Az) - Math.PI) <= EPSLN) {\n        s = -Math.asin(this.cos_p12 * Math.sin(psi) - this.sin_p12 * Math.cos(psi));\n      }\n      else {\n        s = Math.asin(Math.sin(dlon) * Math.cos(psi) / Math.sin(Az));\n      }\n      G = this.e * this.sin_p12 / Math.sqrt(1 - this.es);\n      H = this.e * this.cos_p12 * Math.cos(Az) / Math.sqrt(1 - this.es);\n      GH = G * H;\n      Hs = H * H;\n      s2 = s * s;\n      s3 = s2 * s;\n      s4 = s3 * s;\n      s5 = s4 * s;\n      c = Nl1 * s * (1 - s2 * Hs * (1 - Hs) / 6 + s3 / 8 * GH * (1 - 2 * Hs) + s4 / 120 * (Hs * (4 - 7 * Hs) - 3 * G * G * (1 - 7 * Hs)) - s5 / 48 * GH);\n      p.x = this.x0 + c * Math.sin(Az);\n      p.y = this.y0 + c * Math.cos(Az);\n      return p;\n    }\n  }\n\n\n}\n\nexport function inverse(p) {\n  p.x -= this.x0;\n  p.y -= this.y0;\n  var rh, z, sinz, cosz, lon, lat, con, e0, e1, e2, e3, Mlp, M, N1, psi, Az, cosAz, tmp, A, B, D, Ee, F;\n  if (this.sphere) {\n    rh = Math.sqrt(p.x * p.x + p.y * p.y);\n    if (rh > (2 * HALF_PI * this.a)) {\n      return;\n    }\n    z = rh / this.a;\n\n    sinz = Math.sin(z);\n    cosz = Math.cos(z);\n\n    lon = this.long0;\n    if (Math.abs(rh) <= EPSLN) {\n      lat = this.lat0;\n    }\n    else {\n      lat = asinz(cosz * this.sin_p12 + (p.y * sinz * this.cos_p12) / rh);\n      con = Math.abs(this.lat0) - HALF_PI;\n      if (Math.abs(con) <= EPSLN) {\n        if (this.lat0 >= 0) {\n          lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n        }\n        else {\n          lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n        }\n      }\n      else {\n        /*con = cosz - this.sin_p12 * Math.sin(lat);\n        if ((Math.abs(con) < EPSLN) && (Math.abs(p.x) < EPSLN)) {\n          //no-op, just keep the lon value as is\n        } else {\n          var temp = Math.atan2((p.x * sinz * this.cos_p12), (con * rh));\n          lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz * this.cos_p12), (con * rh)));\n        }*/\n        lon = adjust_lon(this.long0 + Math.atan2(p.x * sinz, rh * this.cos_p12 * cosz - p.y * this.sin_p12 * sinz));\n      }\n    }\n\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  else {\n    e0 = e0fn(this.es);\n    e1 = e1fn(this.es);\n    e2 = e2fn(this.es);\n    e3 = e3fn(this.es);\n    if (Math.abs(this.sin_p12 - 1) <= EPSLN) {\n      //North pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = Mlp - rh;\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - 1 * p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else if (Math.abs(this.sin_p12 + 1) <= EPSLN) {\n      //South pole case\n      Mlp = this.a * mlfn(e0, e1, e2, e3, HALF_PI);\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      M = rh - Mlp;\n\n      lat = imlfn(M / this.a, e0, e1, e2, e3);\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, p.y));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n    else {\n      //default case\n      rh = Math.sqrt(p.x * p.x + p.y * p.y);\n      Az = Math.atan2(p.x, p.y);\n      N1 = gN(this.a, this.e, this.sin_p12);\n      cosAz = Math.cos(Az);\n      tmp = this.e * this.cos_p12 * cosAz;\n      A = -tmp * tmp / (1 - this.es);\n      B = 3 * this.es * (1 - A) * this.sin_p12 * this.cos_p12 * cosAz / (1 - this.es);\n      D = rh / N1;\n      Ee = D - A * (1 + A) * Math.pow(D, 3) / 6 - B * (1 + 3 * A) * Math.pow(D, 4) / 24;\n      F = 1 - A * Ee * Ee / 2 - D * Ee * Ee * Ee / 6;\n      psi = Math.asin(this.sin_p12 * Math.cos(Ee) + this.cos_p12 * Math.sin(Ee) * cosAz);\n      lon = adjust_lon(this.long0 + Math.asin(Math.sin(Az) * Math.sin(Ee) / Math.cos(psi)));\n      lat = Math.atan((1 - this.es * F * this.sin_p12 / Math.sin(psi)) * Math.tan(psi) / (1 - this.es));\n      p.x = lon;\n      p.y = lat;\n      return p;\n    }\n  }\n\n}\n\nexport var names = [\"Azimuthal_Equidistant\", \"aeqd\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import adjust_lon from '../common/adjust_lon';\nimport asinz from '../common/asinz';\nimport {EPSLN, HALF_PI} from '../constants/values';\n\nexport function init() {\n  //double temp;      /* temporary variable    */\n\n  /* Place parameters in static storage for common use\n      -------------------------------------------------*/\n  this.sin_p14 = Math.sin(this.lat0);\n  this.cos_p14 = Math.cos(this.lat0);\n}\n\n/* Orthographic forward equations--mapping lat,long to x,y\n    ---------------------------------------------------*/\nexport function forward(p) {\n  var sinphi, cosphi; /* sin and cos value        */\n  var dlon; /* delta longitude value      */\n  var coslon; /* cos of longitude        */\n  var ksp; /* scale factor          */\n  var g, x, y;\n  var lon = p.x;\n  var lat = p.y;\n  /* Forward equations\n      -----------------*/\n  dlon = adjust_lon(lon - this.long0);\n\n  sinphi = Math.sin(lat);\n  cosphi = Math.cos(lat);\n\n  coslon = Math.cos(dlon);\n  g = this.sin_p14 * sinphi + this.cos_p14 * cosphi * coslon;\n  ksp = 1;\n  if ((g > 0) || (Math.abs(g) <= EPSLN)) {\n    x = this.a * ksp * cosphi * Math.sin(dlon);\n    y = this.y0 + this.a * ksp * (this.cos_p14 * sinphi - this.sin_p14 * cosphi * coslon);\n  }\n  p.x = x;\n  p.y = y;\n  return p;\n}\n\nexport function inverse(p) {\n  var rh; /* height above ellipsoid      */\n  var z; /* angle          */\n  var sinz, cosz; /* sin of z and cos of z      */\n  var con;\n  var lon, lat;\n  /* Inverse equations\n      -----------------*/\n  p.x -= this.x0;\n  p.y -= this.y0;\n  rh = Math.sqrt(p.x * p.x + p.y * p.y);\n  z = asinz(rh / this.a);\n\n  sinz = Math.sin(z);\n  cosz = Math.cos(z);\n\n  lon = this.long0;\n  if (Math.abs(rh) <= EPSLN) {\n    lat = this.lat0;\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lat = asinz(cosz * this.sin_p14 + (p.y * sinz * this.cos_p14) / rh);\n  con = Math.abs(this.lat0) - HALF_PI;\n  if (Math.abs(con) <= EPSLN) {\n    if (this.lat0 >= 0) {\n      lon = adjust_lon(this.long0 + Math.atan2(p.x, - p.y));\n    }\n    else {\n      lon = adjust_lon(this.long0 - Math.atan2(-p.x, p.y));\n    }\n    p.x = lon;\n    p.y = lat;\n    return p;\n  }\n  lon = adjust_lon(this.long0 + Math.atan2((p.x * sinz), rh * this.cos_p14 * cosz - p.y * this.sin_p14 * sinz));\n  p.x = lon;\n  p.y = lat;\n  return p;\n}\n\nexport var names = [\"ortho\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","// QSC projection rewritten from the original PROJ4\n// https://github.com/OSGeo/proj.4/blob/master/src/PJ_qsc.c\n\nimport {EPSLN, TWO_PI, SPI, HALF_PI, FORTPI} from '../constants/values';\n\n/* constants */\nvar FACE_ENUM = {\n    FRONT: 1,\n    RIGHT: 2,\n    BACK: 3,\n    LEFT: 4,\n    TOP: 5,\n    BOTTOM: 6\n};\n\nvar AREA_ENUM = {\n    AREA_0: 1,\n    AREA_1: 2,\n    AREA_2: 3,\n    AREA_3: 4\n};\n\nexport function init() {\n\n  this.x0 = this.x0 || 0;\n  this.y0 = this.y0 || 0;\n  this.lat0 = this.lat0 || 0;\n  this.long0 = this.long0 || 0;\n  this.lat_ts = this.lat_ts || 0;\n  this.title = this.title || \"Quadrilateralized Spherical Cube\";\n\n  /* Determine the cube face from the center of projection. */\n  if (this.lat0 >= HALF_PI - FORTPI / 2.0) {\n    this.face = FACE_ENUM.TOP;\n  } else if (this.lat0 <= -(HALF_PI - FORTPI / 2.0)) {\n    this.face = FACE_ENUM.BOTTOM;\n  } else if (Math.abs(this.long0) <= FORTPI) {\n    this.face = FACE_ENUM.FRONT;\n  } else if (Math.abs(this.long0) <= HALF_PI + FORTPI) {\n    this.face = this.long0 > 0.0 ? FACE_ENUM.RIGHT : FACE_ENUM.LEFT;\n  } else {\n    this.face = FACE_ENUM.BACK;\n  }\n\n  /* Fill in useful values for the ellipsoid <-> sphere shift\n   * described in [LK12]. */\n  if (this.es !== 0) {\n    this.one_minus_f = 1 - (this.a - this.b) / this.a;\n    this.one_minus_f_squared = this.one_minus_f * this.one_minus_f;\n  }\n}\n\n// QSC forward equations--mapping lat,long to x,y\n// -----------------------------------------------------------------\nexport function forward(p) {\n  var xy = {x: 0, y: 0};\n  var lat, lon;\n  var theta, phi;\n  var t, mu;\n  /* nu; */\n  var area = {value: 0};\n\n  // move lon according to projection's lon\n  p.x -= this.long0;\n\n  /* Convert the geodetic latitude to a geocentric latitude.\n   * This corresponds to the shift from the ellipsoid to the sphere\n   * described in [LK12]. */\n  if (this.es !== 0) {//if (P->es != 0) {\n    lat = Math.atan(this.one_minus_f_squared * Math.tan(p.y));\n  } else {\n    lat = p.y;\n  }\n\n  /* Convert the input lat, lon into theta, phi as used by QSC.\n   * This depends on the cube face and the area on it.\n   * For the top and bottom face, we can compute theta and phi\n   * directly from phi, lam. For the other faces, we must use\n   * unit sphere cartesian coordinates as an intermediate step. */\n  lon = p.x; //lon = lp.lam;\n  if (this.face === FACE_ENUM.TOP) {\n    phi = HALF_PI - lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = lon - HALF_PI;\n    } else if (lon > HALF_PI + FORTPI || lon <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = (lon > 0.0 ? lon - SPI : lon + SPI);\n    } else if (lon > -(HALF_PI + FORTPI) && lon <= -FORTPI) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = lon + HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = lon;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = HALF_PI + lat;\n    if (lon >= FORTPI && lon <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n      theta = -lon + HALF_PI;\n    } else if (lon < FORTPI && lon >= -FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta = -lon;\n    } else if (lon < -FORTPI && lon >= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = -lon - HALF_PI;\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta = (lon > 0.0 ? -lon + SPI : -lon - SPI);\n    }\n  } else {\n    var q, r, s;\n    var sinlat, coslat;\n    var sinlon, coslon;\n\n    if (this.face === FACE_ENUM.RIGHT) {\n      lon = qsc_shift_lon_origin(lon, +HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lon = qsc_shift_lon_origin(lon, +SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lon = qsc_shift_lon_origin(lon, -HALF_PI);\n    }\n    sinlat = Math.sin(lat);\n    coslat = Math.cos(lat);\n    sinlon = Math.sin(lon);\n    coslon = Math.cos(lon);\n    q = coslat * coslon;\n    r = coslat * sinlon;\n    s = sinlat;\n\n    if (this.face === FACE_ENUM.FRONT) {\n      phi = Math.acos(q);\n      theta = qsc_fwd_equat_face_theta(phi, s, r, area);\n    } else if (this.face === FACE_ENUM.RIGHT) {\n      phi = Math.acos(r);\n      theta = qsc_fwd_equat_face_theta(phi, s, -q, area);\n    } else if (this.face === FACE_ENUM.BACK) {\n      phi = Math.acos(-q);\n      theta = qsc_fwd_equat_face_theta(phi, s, -r, area);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      phi = Math.acos(-r);\n      theta = qsc_fwd_equat_face_theta(phi, s, q, area);\n    } else {\n      /* Impossible */\n      phi = theta = 0;\n      area.value = AREA_ENUM.AREA_0;\n    }\n  }\n\n  /* Compute mu and nu for the area of definition.\n   * For mu, see Eq. (3-21) in [OL76], but note the typos:\n   * compare with Eq. (3-14). For nu, see Eq. (3-38). */\n  mu = Math.atan((12 / SPI) * (theta + Math.acos(Math.sin(theta) * Math.cos(FORTPI)) - HALF_PI));\n  t = Math.sqrt((1 - Math.cos(phi)) / (Math.cos(mu) * Math.cos(mu)) / (1 - Math.cos(Math.atan(1 / Math.cos(theta)))));\n\n  /* Apply the result to the real area. */\n  if (area.value === AREA_ENUM.AREA_1) {\n    mu += HALF_PI;\n  } else if (area.value === AREA_ENUM.AREA_2) {\n    mu += SPI;\n  } else if (area.value === AREA_ENUM.AREA_3) {\n    mu += 1.5 * SPI;\n  }\n\n  /* Now compute x, y from mu and nu */\n  xy.x = t * Math.cos(mu);\n  xy.y = t * Math.sin(mu);\n  xy.x = xy.x * this.a + this.x0;\n  xy.y = xy.y * this.a + this.y0;\n\n  p.x = xy.x;\n  p.y = xy.y;\n  return p;\n}\n\n// QSC inverse equations--mapping x,y to lat/long\n// -----------------------------------------------------------------\nexport function inverse(p) {\n  var lp = {lam: 0, phi: 0};\n  var mu, nu, cosmu, tannu;\n  var tantheta, theta, cosphi, phi;\n  var t;\n  var area = {value: 0};\n\n  /* de-offset */\n  p.x = (p.x - this.x0) / this.a;\n  p.y = (p.y - this.y0) / this.a;\n\n  /* Convert the input x, y to the mu and nu angles as used by QSC.\n   * This depends on the area of the cube face. */\n  nu = Math.atan(Math.sqrt(p.x * p.x + p.y * p.y));\n  mu = Math.atan2(p.y, p.x);\n  if (p.x >= 0.0 && p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_0;\n  } else if (p.y >= 0.0 && p.y >= Math.abs(p.x)) {\n    area.value = AREA_ENUM.AREA_1;\n    mu -= HALF_PI;\n  } else if (p.x < 0.0 && -p.x >= Math.abs(p.y)) {\n    area.value = AREA_ENUM.AREA_2;\n    mu = (mu < 0.0 ? mu + SPI : mu - SPI);\n  } else {\n    area.value = AREA_ENUM.AREA_3;\n    mu += HALF_PI;\n  }\n\n  /* Compute phi and theta for the area of definition.\n   * The inverse projection is not described in the original paper, but some\n   * good hints can be found here (as of 2011-12-14):\n   * http://fits.gsfc.nasa.gov/fitsbits/saf.93/saf.9302\n   * (search for \"Message-Id: <9302181759.AA25477 at fits.cv.nrao.edu>\") */\n  t = (SPI / 12) * Math.tan(mu);\n  tantheta = Math.sin(t) / (Math.cos(t) - (1 / Math.sqrt(2)));\n  theta = Math.atan(tantheta);\n  cosmu = Math.cos(mu);\n  tannu = Math.tan(nu);\n  cosphi = 1 - cosmu * cosmu * tannu * tannu * (1 - Math.cos(Math.atan(1 / Math.cos(theta))));\n  if (cosphi < -1) {\n    cosphi = -1;\n  } else if (cosphi > +1) {\n    cosphi = +1;\n  }\n\n  /* Apply the result to the real area on the cube face.\n   * For the top and bottom face, we can compute phi and lam directly.\n   * For the other faces, we must use unit sphere cartesian coordinates\n   * as an intermediate step. */\n  if (this.face === FACE_ENUM.TOP) {\n    phi = Math.acos(cosphi);\n    lp.phi = HALF_PI - phi;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = (theta < 0.0 ? theta + SPI : theta - SPI);\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = theta;\n    }\n  } else if (this.face === FACE_ENUM.BOTTOM) {\n    phi = Math.acos(cosphi);\n    lp.phi = phi - HALF_PI;\n    if (area.value === AREA_ENUM.AREA_0) {\n      lp.lam = -theta + HALF_PI;\n    } else if (area.value === AREA_ENUM.AREA_1) {\n      lp.lam = -theta;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      lp.lam = -theta - HALF_PI;\n    } else /* area.value == AREA_ENUM.AREA_3 */ {\n      lp.lam = (theta < 0.0 ? -theta - SPI : -theta + SPI);\n    }\n  } else {\n    /* Compute phi and lam via cartesian unit sphere coordinates. */\n    var q, r, s;\n    q = cosphi;\n    t = q * q;\n    if (t >= 1) {\n      s = 0;\n    } else {\n      s = Math.sqrt(1 - t) * Math.sin(theta);\n    }\n    t += s * s;\n    if (t >= 1) {\n      r = 0;\n    } else {\n      r = Math.sqrt(1 - t);\n    }\n    /* Rotate q,r,s into the correct area. */\n    if (area.value === AREA_ENUM.AREA_1) {\n      t = r;\n      r = -s;\n      s = t;\n    } else if (area.value === AREA_ENUM.AREA_2) {\n      r = -r;\n      s = -s;\n    } else if (area.value === AREA_ENUM.AREA_3) {\n      t = r;\n      r = s;\n      s = -t;\n    }\n    /* Rotate q,r,s into the correct cube face. */\n    if (this.face === FACE_ENUM.RIGHT) {\n      t = q;\n      q = -r;\n      r = t;\n    } else if (this.face === FACE_ENUM.BACK) {\n      q = -q;\n      r = -r;\n    } else if (this.face === FACE_ENUM.LEFT) {\n      t = q;\n      q = r;\n      r = -t;\n    }\n    /* Now compute phi and lam from the unit sphere coordinates. */\n    lp.phi = Math.acos(-s) - HALF_PI;\n    lp.lam = Math.atan2(r, q);\n    if (this.face === FACE_ENUM.RIGHT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -HALF_PI);\n    } else if (this.face === FACE_ENUM.BACK) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, -SPI);\n    } else if (this.face === FACE_ENUM.LEFT) {\n      lp.lam = qsc_shift_lon_origin(lp.lam, +HALF_PI);\n    }\n  }\n\n  /* Apply the shift from the sphere to the ellipsoid as described\n   * in [LK12]. */\n  if (this.es !== 0) {\n    var invert_sign;\n    var tanphi, xa;\n    invert_sign = (lp.phi < 0 ? 1 : 0);\n    tanphi = Math.tan(lp.phi);\n    xa = this.b / Math.sqrt(tanphi * tanphi + this.one_minus_f_squared);\n    lp.phi = Math.atan(Math.sqrt(this.a * this.a - xa * xa) / (this.one_minus_f * xa));\n    if (invert_sign) {\n      lp.phi = -lp.phi;\n    }\n  }\n\n  lp.lam += this.long0;\n  p.x = lp.lam;\n  p.y = lp.phi;\n  return p;\n}\n\n/* Helper function for forward projection: compute the theta angle\n * and determine the area number. */\nfunction qsc_fwd_equat_face_theta(phi, y, x, area) {\n  var theta;\n  if (phi < EPSLN) {\n    area.value = AREA_ENUM.AREA_0;\n    theta = 0.0;\n  } else {\n    theta = Math.atan2(y, x);\n    if (Math.abs(theta) <= FORTPI) {\n      area.value = AREA_ENUM.AREA_0;\n    } else if (theta > FORTPI && theta <= HALF_PI + FORTPI) {\n      area.value = AREA_ENUM.AREA_1;\n      theta -= HALF_PI;\n    } else if (theta > HALF_PI + FORTPI || theta <= -(HALF_PI + FORTPI)) {\n      area.value = AREA_ENUM.AREA_2;\n      theta = (theta >= 0.0 ? theta - SPI : theta + SPI);\n    } else {\n      area.value = AREA_ENUM.AREA_3;\n      theta += HALF_PI;\n    }\n  }\n  return theta;\n}\n\n/* Helper function: shift the longitude. */\nfunction qsc_shift_lon_origin(lon, offset) {\n  var slon = lon + offset;\n  if (slon < -SPI) {\n    slon += TWO_PI;\n  } else if (slon > +SPI) {\n    slon -= TWO_PI;\n  }\n  return slon;\n}\n\nexport var names = [\"Quadrilateralized Spherical Cube\", \"Quadrilateralized_Spherical_Cube\", \"qsc\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n\n","// Robinson projection\n// Based on https://github.com/OSGeo/proj.4/blob/master/src/PJ_robin.c\n// Polynomial coeficients from http://article.gmane.org/gmane.comp.gis.proj-4.devel/6039\n\nimport {HALF_PI, D2R, R2D, EPSLN} from '../constants/values';\nimport adjust_lon from '../common/adjust_lon';\n\nvar COEFS_X = [\n    [1.0000, 2.2199e-17, -7.15515e-05, 3.1103e-06],\n    [0.9986, -0.000482243, -2.4897e-05, -1.3309e-06],\n    [0.9954, -0.00083103, -4.48605e-05, -9.86701e-07],\n    [0.9900, -0.00135364, -5.9661e-05, 3.6777e-06],\n    [0.9822, -0.00167442, -4.49547e-06, -5.72411e-06],\n    [0.9730, -0.00214868, -9.03571e-05, 1.8736e-08],\n    [0.9600, -0.00305085, -9.00761e-05, 1.64917e-06],\n    [0.9427, -0.00382792, -6.53386e-05, -2.6154e-06],\n    [0.9216, -0.00467746, -0.00010457, 4.81243e-06],\n    [0.8962, -0.00536223, -3.23831e-05, -5.43432e-06],\n    [0.8679, -0.00609363, -0.000113898, 3.32484e-06],\n    [0.8350, -0.00698325, -6.40253e-05, 9.34959e-07],\n    [0.7986, -0.00755338, -5.00009e-05, 9.35324e-07],\n    [0.7597, -0.00798324, -3.5971e-05, -2.27626e-06],\n    [0.7186, -0.00851367, -7.01149e-05, -8.6303e-06],\n    [0.6732, -0.00986209, -0.000199569, 1.91974e-05],\n    [0.6213, -0.010418, 8.83923e-05, 6.24051e-06],\n    [0.5722, -0.00906601, 0.000182, 6.24051e-06],\n    [0.5322, -0.00677797, 0.000275608, 6.24051e-06]\n];\n\nvar COEFS_Y = [\n    [-5.20417e-18, 0.0124, 1.21431e-18, -8.45284e-11],\n    [0.0620, 0.0124, -1.26793e-09, 4.22642e-10],\n    [0.1240, 0.0124, 5.07171e-09, -1.60604e-09],\n    [0.1860, 0.0123999, -1.90189e-08, 6.00152e-09],\n    [0.2480, 0.0124002, 7.10039e-08, -2.24e-08],\n    [0.3100, 0.0123992, -2.64997e-07, 8.35986e-08],\n    [0.3720, 0.0124029, 9.88983e-07, -3.11994e-07],\n    [0.4340, 0.0123893, -3.69093e-06, -4.35621e-07],\n    [0.4958, 0.0123198, -1.02252e-05, -3.45523e-07],\n    [0.5571, 0.0121916, -1.54081e-05, -5.82288e-07],\n    [0.6176, 0.0119938, -2.41424e-05, -5.25327e-07],\n    [0.6769, 0.011713, -3.20223e-05, -5.16405e-07],\n    [0.7346, 0.0113541, -3.97684e-05, -6.09052e-07],\n    [0.7903, 0.0109107, -4.89042e-05, -1.04739e-06],\n    [0.8435, 0.0103431, -6.4615e-05, -1.40374e-09],\n    [0.8936, 0.00969686, -6.4636e-05, -8.547e-06],\n    [0.9394, 0.00840947, -0.000192841, -4.2106e-06],\n    [0.9761, 0.00616527, -0.000256, -4.2106e-06],\n    [1.0000, 0.00328947, -0.000319159, -4.2106e-06]\n];\n\nvar FXC = 0.8487;\nvar FYC = 1.3523;\nvar C1 = R2D/5; // rad to 5-degree interval\nvar RC1 = 1/C1;\nvar NODES = 18;\n\nvar poly3_val = function(coefs, x) {\n    return coefs[0] + x * (coefs[1] + x * (coefs[2] + x * coefs[3]));\n};\n\nvar poly3_der = function(coefs, x) {\n    return coefs[1] + x * (2 * coefs[2] + x * 3 * coefs[3]);\n};\n\nfunction newton_rapshon(f_df, start, max_err, iters) {\n    var x = start;\n    for (; iters; --iters) {\n        var upd = f_df(x);\n        x -= upd;\n        if (Math.abs(upd) < max_err) {\n            break;\n        }\n    }\n    return x;\n}\n\nexport function init() {\n    this.x0 = this.x0 || 0;\n    this.y0 = this.y0 || 0;\n    this.long0 = this.long0 || 0;\n    this.es = 0;\n    this.title = this.title || \"Robinson\";\n}\n\nexport function forward(ll) {\n    var lon = adjust_lon(ll.x - this.long0);\n\n    var dphi = Math.abs(ll.y);\n    var i = Math.floor(dphi * C1);\n    if (i < 0) {\n        i = 0;\n    } else if (i >= NODES) {\n        i = NODES - 1;\n    }\n    dphi = R2D * (dphi - RC1 * i);\n    var xy = {\n        x: poly3_val(COEFS_X[i], dphi) * lon,\n        y: poly3_val(COEFS_Y[i], dphi)\n    };\n    if (ll.y < 0) {\n        xy.y = -xy.y;\n    }\n\n    xy.x = xy.x * this.a * FXC + this.x0;\n    xy.y = xy.y * this.a * FYC + this.y0;\n    return xy;\n}\n\nexport function inverse(xy) {\n    var ll = {\n        x: (xy.x - this.x0) / (this.a * FXC),\n        y: Math.abs(xy.y - this.y0) / (this.a * FYC)\n    };\n\n    if (ll.y >= 1) { // pathologic case\n        ll.x /= COEFS_X[NODES][0];\n        ll.y = xy.y < 0 ? -HALF_PI : HALF_PI;\n    } else {\n        // find table interval\n        var i = Math.floor(ll.y * NODES);\n        if (i < 0) {\n            i = 0;\n        } else if (i >= NODES) {\n            i = NODES - 1;\n        }\n        for (;;) {\n            if (COEFS_Y[i][0] > ll.y) {\n                --i;\n            } else if (COEFS_Y[i+1][0] <= ll.y) {\n                ++i;\n            } else {\n                break;\n            }\n        }\n        // linear interpolation in 5 degree interval\n        var coefs = COEFS_Y[i];\n        var t = 5 * (ll.y - coefs[0]) / (COEFS_Y[i+1][0] - coefs[0]);\n        // find t so that poly3_val(coefs, t) = ll.y\n        t = newton_rapshon(function(x) {\n            return (poly3_val(coefs, x) - ll.y) / poly3_der(coefs, x);\n        }, t, EPSLN, 100);\n\n        ll.x /= poly3_val(COEFS_X[i], t);\n        ll.y = (5 * i + t) * D2R;\n        if (xy.y < 0) {\n            ll.y = -ll.y;\n        }\n    }\n\n    ll.x = adjust_lon(ll.x + this.long0);\n    return ll;\n}\n\nexport var names = [\"Robinson\", \"robin\"];\nexport default {\n  init: init,\n  forward: forward,\n  inverse: inverse,\n  names: names\n};\n","import {\n    geodeticToGeocentric,\n    geocentricToGeodetic\n} from '../datumUtils';\n\nexport function init() {\n    this.name = 'geocent';\n\n}\n\nexport function forward(p) {\n    var point = geodeticToGeocentric(p, this.es, this.a);\n    return point;\n}\n\nexport function inverse(p) {\n    var point = geocentricToGeodetic(p, this.es, this.a, this.b);\n    return point;\n}\n\nexport var names = [\"Geocentric\", 'geocentric', \"geocent\", \"Geocent\"];\nexport default {\n    init: init,\n    forward: forward,\n    inverse: inverse,\n    names: names\n};","import tmerc from './lib/projections/tmerc';\nimport etmerc from './lib/projections/etmerc';\nimport utm from './lib/projections/utm';\nimport sterea from './lib/projections/sterea';\nimport stere from './lib/projections/stere';\nimport somerc from './lib/projections/somerc';\nimport omerc from './lib/projections/omerc';\nimport lcc from './lib/projections/lcc';\nimport krovak from './lib/projections/krovak';\nimport cass from './lib/projections/cass';\nimport laea from './lib/projections/laea';\nimport aea from './lib/projections/aea';\nimport gnom from './lib/projections/gnom';\nimport cea from './lib/projections/cea';\nimport eqc from './lib/projections/eqc';\nimport poly from './lib/projections/poly';\nimport nzmg from './lib/projections/nzmg';\nimport mill from './lib/projections/mill';\nimport sinu from './lib/projections/sinu';\nimport moll from './lib/projections/moll';\nimport eqdc from './lib/projections/eqdc';\nimport vandg from './lib/projections/vandg';\nimport aeqd from './lib/projections/aeqd';\nimport ortho from './lib/projections/ortho';\nimport qsc from './lib/projections/qsc';\nimport robin from './lib/projections/robin';\nimport geocent from './lib/projections/geocent';\nexport default function(proj4){\n  proj4.Proj.projections.add(tmerc);\n  proj4.Proj.projections.add(etmerc);\n  proj4.Proj.projections.add(utm);\n  proj4.Proj.projections.add(sterea);\n  proj4.Proj.projections.add(stere);\n  proj4.Proj.projections.add(somerc);\n  proj4.Proj.projections.add(omerc);\n  proj4.Proj.projections.add(lcc);\n  proj4.Proj.projections.add(krovak);\n  proj4.Proj.projections.add(cass);\n  proj4.Proj.projections.add(laea);\n  proj4.Proj.projections.add(aea);\n  proj4.Proj.projections.add(gnom);\n  proj4.Proj.projections.add(cea);\n  proj4.Proj.projections.add(eqc);\n  proj4.Proj.projections.add(poly);\n  proj4.Proj.projections.add(nzmg);\n  proj4.Proj.projections.add(mill);\n  proj4.Proj.projections.add(sinu);\n  proj4.Proj.projections.add(moll);\n  proj4.Proj.projections.add(eqdc);\n  proj4.Proj.projections.add(vandg);\n  proj4.Proj.projections.add(aeqd);\n  proj4.Proj.projections.add(ortho);\n  proj4.Proj.projections.add(qsc);\n  proj4.Proj.projections.add(robin);\n  proj4.Proj.projections.add(geocent);\n}","import proj4 from './core';\nimport Proj from \"./Proj\";\nimport Point from \"./Point\";\nimport common from \"./common/toPoint\";\nimport defs from \"./defs\";\nimport transform from \"./transform\";\nimport mgrs from \"mgrs\";\nimport includedProjections from \"../projs\";\n\nproj4.defaultDatum = 'WGS84'; //default datum\nproj4.Proj = Proj;\nproj4.WGS84 = new proj4.Proj('WGS84');\nproj4.Point = Point;\nproj4.toPoint = common;\nproj4.defs = defs;\nproj4.transform = transform;\nproj4.mgrs = mgrs;\nproj4.version = '__VERSION__';\nincludedProjections(proj4);\nexport default proj4;\n"],"sourceRoot":""}