(this["webpackJsonpgatesolve-ui"]=this["webpackJsonpgatesolve-ui"]||[]).push([[0],{364:function(e){e.exports=JSON.parse('{"version":8,"name":"HSL v2.0","metadata":{"maputnik:renderer":"mbgljs","mapbox-groups":{}},"sources":{"vector":{"type":"vector","url":"https://api.digitransit.fi/map/v2/hsl-vector-map/index.json"}},"sprite":"https://raw.githubusercontent.com/HSLdevcom/hsl-map-style/sprite-v1.0.0/sprite","glyphs":"https://hslstoragestatic.azureedge.net/mapfonts/{fontstack}/{range}.pbf","layers":[{"id":"background","type":"background","paint":{"background-color":["interpolate",["linear"],["zoom"],7,"#d3e3bb",9,"#f0f1f2"]}},{"id":"landuse_hospital","type":"fill","source":"vector","source-layer":"landuse","filter":["==","class","hospital"],"paint":{"fill-color":"#fbe6e0"}},{"id":"landuse_school","type":"fill","source":"vector","source-layer":"landuse","filter":["in","class","university","school","kindergarten"],"paint":{"fill-color":"#f9f4d2"}},{"id":"landuse_aeroway","type":"fill","source":"vector","source-layer":"aeroway","filter":["!=","class","aerodrome"],"paint":{"fill-color":"#e3e3e3","fill-outline-color":"#ccc"}},{"id":"landuse_park","type":"fill","source":"vector","source-layer":"landcover","filter":["all",["==","class","grass"],["==","subclass","park"]],"paint":{"fill-color":"#dceacc"}},{"id":"landuse_grass","type":"fill","source":"vector","source-layer":"landcover","filter":["all",["==","class","grass"],["!in","subclass","park","scrub"]],"paint":{"fill-color":"#ddeacd"}},{"id":"landuse_wood","type":"fill","source":"vector","source-layer":"landcover","filter":["==","class","wood"],"paint":{"fill-color":"#d0e3b8"}},{"id":"landuse_scrub","type":"fill","source":"vector","source-layer":"landcover","filter":["all",["==","class","grass"],["==","subclass","scrub"]],"paint":{"fill-color":"#cbdeb4"}},{"id":"landuse_playground","type":"fill","source":"vector","source-layer":"landuse","filter":["==","class","playground"],"paint":{"fill-color":"#f9f4d2"}},{"id":"landuse_agriculture","type":"fill","source":"vector","source-layer":"landcover","minzoom":10,"filter":["==","class","farmland"],"paint":{"fill-color":"#e3ecc5"}},{"id":"landuse_sand","type":"fill","source":"vector","source-layer":"landcover","filter":["==","class","sand"],"paint":{"fill-color":"#e0dfcc"}},{"id":"landuse_cemetery","type":"fill","source":"vector","source-layer":"landuse","filter":["==","class","cemetery"],"paint":{"fill-color":"#cbdeb4","fill-outline-color":"#b8d19b"}},{"id":"landuse_industrial","type":"fill","source":"vector","source-layer":"landuse","filter":["==","class","industrial"],"paint":{"fill-color":"#ede6e3"}},{"id":"landuse_athletics","type":"fill","source":"vector","source-layer":"landuse","minzoom":13,"filter":["==","class","pitch"],"paint":{"fill-color":"#cde0b6","fill-outline-color":"#acc78b"}},{"id":"landuse_athletics_track","type":"fill","source":"vector","source-layer":"landuse","minzoom":13,"filter":["==","class","track"],"paint":{"fill-color":"#f0c2c2","fill-outline-color":"#cca5a5"}},{"id":"waterway_case","type":"line","source":"vector","source-layer":"waterway","filter":["all",["==","$type","LineString"],["in","class","canal","river","stream"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#a6d8f4","line-width":["interpolate",["exponential",1.4],["zoom"],8,1,20,17]}},{"id":"water_case","type":"line","source":"vector","source-layer":"water","paint":{"line-color":"#a6d8f4"}},{"id":"waterway","type":"line","source":"vector","source-layer":"waterway","filter":["all",["==","$type","LineString"],["in","class","canal","river","stream"]],"paint":{"line-color":"#bee4f8","line-width":["interpolate",["exponential",1.4],["zoom"],8,0.5,20,15]}},{"id":"water","type":"fill","source":"vector","source-layer":"water","paint":{"fill-color":"#bee4f8"}},{"id":"landuse_wetland","type":"fill","source":"vector","source-layer":"landcover","filter":["==","class","wetland"],"paint":{"fill-pattern":"icon-wetland"}},{"id":"landuse_rock","type":"fill","source":"vector","source-layer":"landcover","filter":["==","class","rock"],"paint":{"fill-color":"#e3e3e3","fill-outline-color":"#d6d6d6"}},{"id":"aeroway","type":"line","source":"vector","source-layer":"aeroway","filter":["==","class","runway"],"layout":{"line-cap":"square","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],10,2.5,20,240]}},{"id":"aeroway_taxiway","type":"line","source":"vector","source-layer":"aeroway","minzoom":11,"filter":["==","class","taxiway"],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.4],["zoom"],10,1,22,8],"line-dasharray":[1,2]}},{"id":"road_service_area","type":"fill","source":"vector","source-layer":"transportation","filter":["all",["==","$type","Polygon"],["any",["in","class","service","pier"],["in","subclass","pedestrian","platform"]]],"paint":{"fill-color":"#f7f7f7"},"minzoom":14},{"id":"road_bridge_area","type":"fill","source":"vector","source-layer":"transportation","filter":["all",["==","$type","Polygon"],["==","class","bridge"]],"paint":{"fill-color":"#f7f7f7"}},{"id":"building_shadow","type":"fill","source":"vector","source-layer":"building","layout":{"visibility":"visible"},"paint":{"fill-color":"#c2c3cc","fill-outline-color":{"stops":[[13,"#dde1e9"],[17,"#c2c3cc"]]},"fill-translate":{"stops":[[13,[0,0]],[22,[0,8]]]}},"minzoom":17},{"id":"building","type":"fill","source":"vector","source-layer":"building","layout":{"visibility":"visible"},"paint":{"fill-color":"#e2e4e9","fill-outline-color":{"stops":[[13,"#dde1e9"],[17,"#c2c3cc"]]}},"minzoom":16},{"id":"tunnel_walk","type":"line","source":"vector","source-layer":"transportation","minzoom":17,"filter":["all",["==","$type","LineString"],["==","class","path"],["!in","subclass","cycleway","pedestrian","platform"],["==","brunnel","tunnel"],["any",["!has","layer"],[">=","layer",0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#bfc2c9","line-width":["interpolate",["exponential",1.55],["zoom"],0,1.25,22,20],"line-dasharray":[0,1.5]}},{"id":"tunnel_cycleway","type":"line","source":"vector","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","class","path"],["in","subclass","cycleway","pedestrian"],["==","brunnel","tunnel"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],4,0.25,20,2],"line-gap-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,22,34],"line-dasharray":[6,5]}},{"id":"tunnel_service","type":"line","source":"vector","source-layer":"transportation","minzoom":17,"filter":["all",["==","$type","LineString"],["in","class","service","track"],["!in","service","parking_aisle"],["==","brunnel","tunnel"],["any",["!has","layer"],[">=","layer",0]]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],4,0.25,20,2],"line-gap-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,22,34],"line-dasharray":[6,5]}},{"id":"tunnel_street","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["in","class","minor"],["==","brunnel","tunnel"]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],4,0.25,20,2],"line-gap-width":["interpolate",["exponential",1.4],["zoom"],6,0.25,20,40],"line-dasharray":[10,3]}},{"id":"tunnel_primary","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary"],["==","brunnel","tunnel"]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.25,20,2],"line-gap-width":["interpolate",["exponential",1.4],["zoom"],6,0.25,20,40],"line-dasharray":[10,3]}},{"id":"tunnel_motorway","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","motorway","trunk"],["==","brunnel","tunnel"]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.4],["zoom"],6,0.25,20,2],"line-gap-width":["interpolate",["exponential",1.4],["zoom"],6,0.25,20,40],"line-dasharray":[10,3]}},{"id":"tunnel_rail","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","rail","transit"],["==","brunnel","tunnel"]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.4],["zoom"],6,0.25,20,4],"line-gap-width":{"stops":[[12,0],[22,6]]},"line-dasharray":[10,3]}},{"id":"road_ferry","type":"line","source":"vector","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["==","class","ferry"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#72d3f0","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.25,20,6],"line-dasharray":{"stops":[[11,[2,2]],[22,[4,4]]]}}},{"id":"road_path","type":"line","source":"vector","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","class","path"],["!in","subclass","cycleway","steps","platform"],["!in","brunnel","bridge","tunnel"],["any",["!has","layer"],[">=","layer",0]]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,1.5,22,26],"line-dasharray":[0,1.5]}},{"id":"road_cycleway_track","type":"line","source":"vector","source-layer":"transportation","minzoom":15,"filter":["all",["==","$type","LineString"],["any",["all",["==","class","path"],["in","subclass","cycleway"]],["in","class","track"]],["!in","brunnel","bridge","tunnel"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,22,26]}},{"id":"road_service","type":"line","source":"vector","source-layer":"transportation","minzoom":14,"filter":["all",["==","$type","LineString"],["in","class","service"],["!in","service","parking_aisle"],["!in","brunnel","bridge","tunnel"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,22,26]}},{"id":"road_link_case","type":"line","source":"vector","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary"],["==","ramp",1],["!in","brunnel","bridge","tunnel"]],"layout":{"line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,20,44]}},{"id":"road_motorway_link_case","type":"line","source":"vector","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["in","class","motorway","trunk"],["==","ramp",1],["!in","brunnel","bridge","tunnel"]],"layout":{"line-join":"round"},"paint":{"line-color":"#f4d880","line-width":["interpolate",["exponential",1.55],["zoom"],6,2,20,44]}},{"id":"road_street_case","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["==","class","minor"],["!in","brunnel","bridge","tunnel"]],"layout":{"line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,20,54]}},{"id":"road_primary_case","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary"],["!=","ramp",1],["!in","brunnel","bridge","tunnel"]],"layout":{"line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,20,84]}},{"id":"road_motorway_case","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","motorway","trunk"],["!=","ramp",1],["!in","brunnel","bridge","tunnel"]],"layout":{"line-join":"round"},"paint":{"line-color":"#f4d880","line-width":["interpolate",["exponential",1.55],["zoom"],6,2,20,84]}},{"id":"road_path_steps_case","type":"line","source":"vector","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","class","path"],["==","subclass","steps"],["!in","brunnel","bridge","tunnel"],["any",["!has","layer"],[">=","layer",0]]],"layout":{"line-cap":"butt","line-join":"miter"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],14,0.5,20,4],"line-gap-width":["interpolate",["exponential",1.55],["zoom"],14,2,20,32]}},{"id":"road_path_steps","type":"line","source":"vector","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","class","path"],["==","subclass","steps"],["!in","brunnel","bridge","tunnel"],["any",["!has","layer"],[">=","layer",0]]],"layout":{"line-cap":"butt","line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],14,1.5,20,40],"line-dasharray":{"stops":[[14,[0.125,0.125]],[20,[0.125,0.25]]]}}},{"id":"road_construction","type":"line","source":"vector","source-layer":"transportation","minzoom":14,"filter":["all",["==","$type","LineString"],["in","class","motorway_construction","trunk_construction","primary_construction","secondary_construction","tertiary_construction","minor_construction"]],"layout":{"line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.25,20,4],"line-gap-width":["interpolate",["exponential",1.55],["zoom"],10,2,20,40],"line-dasharray":[1,1]}},{"id":"road_link","type":"line","source":"vector","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary"],["==","ramp",1],["!in","brunnel","bridge","tunnel"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,40]}},{"id":"road_motorway_link","type":"line","source":"vector","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["in","class","motorway","trunk"],["==","ramp",1],["!in","brunnel","bridge","tunnel"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fef2c6","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,40]}},{"id":"road_street","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["==","class","minor"],["!in","brunnel","bridge","tunnel"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,50]}},{"id":"road_primary","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary"],["!=","ramp",1],["!in","brunnel","bridge","tunnel"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,80]}},{"id":"road_motorway","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","motorway","trunk"],["!=","ramp",1],["!in","brunnel","bridge","tunnel"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":{"stops":[[7,"#fff"],[9,"#fef2c6"]]},"line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,80]}},{"id":"road_minor_rail","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["==","class","transit"],["any",["has","service"],["==","subclass","tram"]],["!in","brunnel","tunnel","bridge"]],"paint":{"line-color":"#bbb","line-width":{"stops":[[15,0.5],[22,4]]},"line-gap-width":["interpolate",["exponential",1.55],["zoom"],4,0.25,20,12]}},{"id":"road_subway","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["==","class","transit"],["all",["!has","service"],["!=","subclass","tram"]],["!in","brunnel","tunnel","bridge"]],"paint":{"line-color":"#bbb","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,22,40]}},{"id":"road_rail","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["==","class","rail"],["!in","brunnel","bridge","tunnel"]],"paint":{"line-color":"#bbb","line-width":{"stops":[[14,1],[22,8]]}}},{"id":"bridge_path_case","type":"line","source":"vector","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","class","path"],["!=","subclass","cycleway"],["==","brunnel","bridge"]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,2.5,22,60]}},{"id":"bridge_path_bg","type":"line","source":"vector","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","class","path"],["!=","subclass","cycleway"],["==","brunnel","bridge"]],"layout":{"line-join":"round"},"paint":{"line-color":"#f0f1f2","line-width":["interpolate",["exponential",1.55],["zoom"],6,2,22,40]}},{"id":"bridge_path","type":"line","source":"vector","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","class","path"],["!=","subclass","cycleway"],["==","brunnel","bridge"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,1.5,22,26],"line-dasharray":[0,1.5]}},{"id":"bridge_cycleway_track_case","type":"line","source":"vector","source-layer":"transportation","minzoom":15,"filter":["all",["==","$type","LineString"],["any",["all",["==","class","path"],["in","subclass","cycleway"]],["in","class","track"]],["==","brunnel","bridge"]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,2.5,22,60]}},{"id":"bridge_cycleway_track_bg","type":"line","source":"vector","source-layer":"transportation","minzoom":15,"filter":["all",["==","$type","LineString"],["any",["all",["==","class","path"],["in","subclass","cycleway"]],["in","class","track"]],["==","brunnel","bridge"]],"layout":{"line-join":"round"},"paint":{"line-color":"#f0f1f2","line-width":["interpolate",["exponential",1.55],["zoom"],6,2,22,40]}},{"id":"bridge_cycleway_track","type":"line","source":"vector","source-layer":"transportation","minzoom":15,"filter":["all",["==","$type","LineString"],["any",["all",["==","class","path"],["in","subclass","cycleway"]],["in","class","track"]],["==","brunnel","bridge"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,1.5,22,26]}},{"id":"bridge_service_case","type":"line","source":"vector","source-layer":"transportation","minzoom":14,"filter":["all",["==","$type","LineString"],["in","class","service"],["!in","service","parking_aisle"],["==","brunnel","bridge"]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,2.5,22,60]}},{"id":"bridge_service_bg","type":"line","source":"vector","source-layer":"transportation","minzoom":14,"filter":["all",["==","$type","LineString"],["in","class","service"],["!in","service","parking_aisle"],["==","brunnel","bridge"]],"layout":{"line-join":"round"},"paint":{"line-color":"#f0f1f2","line-width":["interpolate",["exponential",1.55],["zoom"],6,2,22,40]}},{"id":"bridge_service","type":"line","source":"vector","source-layer":"transportation","minzoom":14,"filter":["all",["==","$type","LineString"],["in","class","service"],["!in","service","parking_aisle"],["==","brunnel","bridge"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,1.5,22,26]}},{"id":"bridge_road_motorway_link_case","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["in","class","motorway","trunk","primary","secondary","tertiary"],["==","ramp",1],["==","brunnel","bridge"]],"layout":{"line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,20,55]}},{"id":"bridge_street_case","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["==","class","minor"],["==","brunnel","bridge"]],"layout":{"line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,20,65]}},{"id":"bridge_primary_case","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary"],["!=","ramp",1],["==","brunnel","bridge"]],"layout":{"line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,20,100]}},{"id":"bridge_motorway_case","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["in","class","motorway","trunk"],["!=","ramp",1],["==","brunnel","bridge"]],"layout":{"line-join":"round"},"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,1,20,100]}},{"id":"bridge_link","type":"line","source":"vector","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary"],["==","ramp",1],["==","brunnel","bridge"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,40]}},{"id":"bridge_motorway_link","type":"line","source":"vector","source-layer":"transportation","minzoom":11,"filter":["all",["==","$type","LineString"],["in","class","motorway","trunk"],["==","ramp",1],["==","brunnel","bridge"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fef2c6","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,40]}},{"id":"bridge_street","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["==","class","minor"],["==","brunnel","bridge"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,50]}},{"id":"bridge_primary","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","primary","secondary","tertiary"],["!=","ramp",1],["==","brunnel","bridge"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#fff","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,80]}},{"id":"bridge_motorway","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["in","class","motorway","trunk"],["!=","ramp",1],["==","brunnel","bridge"]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":{"stops":[[7,"#fff"],[9,"#fef2c6"]]},"line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,20,80]}},{"id":"bridge_rail_case","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["in","class","transit","rail"],["==","brunnel","bridge"]],"paint":{"line-color":"#ccc","line-width":["interpolate",["exponential",1.55],["zoom"],6,2.5,22,65]}},{"id":"bridge_rail_bg","type":"line","source":"vector","source-layer":"transportation","minzoom":13,"filter":["all",["==","$type","LineString"],["in","class","transit","rail"],["==","brunnel","bridge"]],"paint":{"line-color":"#f0f1f2","line-width":["interpolate",["exponential",1.55],["zoom"],6,2,22,50]}},{"id":"bridge_minor_rail","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["==","class","transit"],["any",["has","service"],["==","subclass","tram"]],["==","brunnel","bridge"]],"paint":{"line-color":"#bbb","line-width":{"stops":[[15,0.5],[22,4]]},"line-gap-width":["interpolate",["exponential",1.55],["zoom"],4,0.25,20,12]}},{"id":"bridge_subway","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["==","class","transit"],["all",["!has","service"],["!=","subclass","tram"]],["==","brunnel","bridge"]],"paint":{"line-color":"#bbb","line-width":["interpolate",["exponential",1.55],["zoom"],6,0.5,22,40]}},{"id":"bridge_rail","type":"line","source":"vector","source-layer":"transportation","filter":["all",["==","$type","LineString"],["==","class","rail"],["==","brunnel","bridge"]],"paint":{"line-color":"#bbb","line-width":{"stops":[[14,1],[22,8]]}}},{"id":"road_minor_one-way","type":"symbol","source":"vector","source-layer":"transportation","minzoom":16,"filter":["all",["==","$type","LineString"],["==","oneway",1],["any",["==","ramp",1],["==","class","minor"]]],"layout":{"icon-image":"icon-one-way","symbol-placement":"line","symbol-spacing":100,"icon-rotation-alignment":"map","icon-size":{"stops":[[16,0.5],[22,1.5]]}}},{"id":"building_3d","type":"fill-extrusion","source":"vector","source-layer":"building","layout":{"visibility":"none"},"paint":{"fill-extrusion-color":"#dcd9d6","fill-extrusion-height":{"property":"render_height","type":"identity"},"fill-extrusion-base":{"property":"render_min_height","type":"identity"},"fill-extrusion-opacity":0.8}},{"id":"admin_country","type":"line","source":"vector","source-layer":"boundary","filter":["all",["==","$type","LineString"],["<=","admin_level",2],["==","maritime",0]],"layout":{"line-cap":"round","line-join":"round"},"paint":{"line-color":"#8b8a8a","line-width":["interpolate",["exponential",1.3],["zoom"],3,0.5,22,15]}},{"id":"label_housenum","type":"symbol","source":"vector","source-layer":"housenumber","filter":["==","$type","Point"],"layout":{"text-field":"{housenumber}","text-size":{"stops":[[15,8],[22,17]]},"text-font":["Gotham Rounded Book"]},"paint":{"text-color":"#999","text-opacity":0.7},"minzoom":17},{"id":"label_poi_general","type":"symbol","source":"vector","source-layer":"poi","minzoom":15,"filter":["all",["==","$type","Point"],["any",["in","class","school","college","place_of_worship"],["in","subclass","hotel","cinema","cemetery","library","theatre","playground","arts_centre","museum","stadium","sports_centre","attraction","monument","theme_park","mall"]]],"layout":{"text-size":10,"text-font":["Gotham Rounded Medium"],"text-anchor":"top","text-field":"{name}","text-max-width":8},"paint":{"text-color":"#666","text-halo-color":"#fff","text-halo-width":1}},{"id":"label_poi_park","type":"symbol","source":"vector","source-layer":"poi","minzoom":14,"filter":["all",["==","$type","Point"],["in","class","park"]],"layout":{"text-size":11,"text-max-width":8,"text-font":["Gotham Rounded Medium Italic"],"text-anchor":"top","text-field":"{name}"},"paint":{"text-color":"#8ea66d","text-halo-color":"#fff","text-halo-width":1}},{"id":"label_poi_harbour","type":"symbol","source":"vector","source-layer":"poi","minzoom":14,"filter":["all",["==","$type","Point"],["in","class","harbor","ferry_terminal"]],"layout":{"text-size":11,"text-max-width":8,"text-font":["Gotham Rounded Book"],"text-anchor":"top","text-field":"{name}"},"paint":{"text-color":"#888","text-halo-color":"#fff","text-halo-width":1}},{"id":"label_water","type":"symbol","source":"vector","source-layer":"water_name","minzoom":5,"layout":{"text-size":{"stops":[[0,8],[15,11]]},"text-max-width":8,"text-font":["Gotham Rounded Medium Italic"],"text-anchor":"top","text-field":"{name}","visibility":"visible"},"paint":{"text-color":"#39c6ea","text-halo-color":"rgba(255,255,255,0.5)","text-halo-width":1}},{"id":"label_place_island","type":"symbol","source":"vector","source-layer":"place","minzoom":11,"filter":["all",["==","$type","Point"],["in","class","island","islet"]],"layout":{"text-size":{"stops":[[0,8],[15,11]]},"text-max-width":8,"text-font":["Gotham Rounded Book"],"text-offset":[0,0.5],"text-anchor":"top","text-field":"{name}"},"paint":{"text-color":"#777","text-halo-color":"#fff","text-halo-width":1}},{"id":"label_road_path_cycleway_track_service","type":"symbol","source":"vector","source-layer":"transportation_name","minzoom":16,"filter":["all",["==","$type","LineString"],["!in","name","Harakan talvipolku","Suomenlinnan Huoltotunneli"],["in","class","path","track","service"]],"layout":{"symbol-placement":"line","text-field":"{name}","text-font":["Gotham Rounded Medium"],"text-letter-spacing":0.1,"text-size":["interpolate",["exponential",1.4],["zoom"],10,8,20,14],"text-rotation-alignment":"map"},"paint":{"text-color":["interpolate",["exponential",1.4],["zoom"],13,"#999",15,"#333"],"text-halo-color":"rgba(255,255,255,0.85)","text-halo-width":2}},{"id":"label_road_street","type":"symbol","source":"vector","source-layer":"transportation_name","filter":["all",["==","$type","LineString"],["in","class","minor","tertiary"]],"layout":{"symbol-placement":"line","text-field":"{name}","text-font":["Gotham Rounded Medium"],"text-letter-spacing":0.1,"text-size":["interpolate",["exponential",1.4],["zoom"],10,8,20,14],"text-rotation-alignment":"map"},"paint":{"text-color":["interpolate",["exponential",1.4],["zoom"],13,"#999",15,"#333"],"text-halo-color":"rgba(255,255,255,0.85)","text-halo-width":2},"minzoom":13},{"id":"label_road_primary","type":"symbol","source":"vector","source-layer":"transportation_name","filter":["all",["==","$type","LineString"],["in","class","secondary","primary","trunk","motorway"]],"layout":{"symbol-placement":"line","text-field":"{name}","text-font":["Gotham Rounded Medium"],"text-letter-spacing":0.1,"text-size":["interpolate",["exponential",1.4],["zoom"],10,8,20,14],"text-rotation-alignment":"map"},"paint":{"text-color":["interpolate",["exponential",1.4],["zoom"],13,"#999",15,"#333"],"text-halo-color":"rgba(255,255,255,0.85)","text-halo-width":2}},{"id":"label_place_other","type":"symbol","source":"vector","source-layer":"place","minzoom":10,"filter":["all",["==","$type","Point"],["in","class","hamlet","neighbourhood","suburb","village"]],"layout":{"text-field":"{name}","text-font":["Gotham Rounded Medium"],"text-max-width":6,"text-size":["interpolate",["exponential",1.2],["zoom"],10,10,16,18]},"paint":{"text-color":"#666","text-halo-color":"#fff","text-halo-width":1}},{"id":"label_place_town","type":"symbol","source":"vector","source-layer":"place","minzoom":8,"filter":["all",["==","$type","Point"],["==","class","town"]],"layout":{"text-field":"{name}","text-font":["Gotham Rounded Medium"],"text-max-width":6,"text-size":["interpolate",["exponential",1.2],["zoom"],10,12,16,20]},"paint":{"text-color":"#666","text-halo-color":"#fff","text-halo-width":1}},{"id":"label_place_city","type":"symbol","source":"vector","source-layer":"place","maxzoom":13,"filter":["all",["==","$type","Point"],["==","class","city"]],"layout":{"text-field":"{name}","text-font":["Gotham Rounded Medium"],"text-size":["interpolate",["exponential",1.4],["zoom"],6,10,10,16],"text-transform":"uppercase","text-letter-spacing":0.125},"paint":{"text-color":"#333","text-halo-color":"#fff","text-halo-width":0.5}},{"id":"label_country","type":"symbol","source":"vector","source-layer":"place","maxzoom":8,"filter":["all",["==","$type","Point"],["==","class","country"],["has","iso_a2"]],"layout":{"text-field":"{name}","text-font":["Gotham Rounded Medium"],"text-size":{"stops":[[3,10],[8,30]]},"text-transform":"uppercase"},"paint":{"text-color":"#666","text-halo-color":"#fff","text-halo-width":1.5}}]}')},365:function(e,t,n){},366:function(e,t,n){},573:function(e,t,n){"use strict";n.r(t);var o,r,a,i,l=n(104),c=n.n(l),s=n(196),u=n(194),p=n(217),d=n(131),f=n(0),b=n(3),h=n(566),g=n(563),m=n(199),y=n.n(m),v=n(265),j=n.n(v),x=n(43),O=n(346),w=n(539),k=n(336),_=n(348),z=n(540),S=(n(353),n(354)),C=n(541),L=function(){return Object(C.a)("welcomeSeenFlag",{defaultValue:{welcomeSeen:!1}})},E=n(355),P=function(e){return["literal",e]},M=function(e){return["has",e]},T=function(e){return["get",e]},D=function(e){return["var",e]},N=function(e){return["to-boolean",e]},$=function(e){return["!",e]},R=function(e){return["length",e]},F=function(e,t){return[">",e,t]},I=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["any"].concat(t)},W=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["all"].concat(t)},A=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["coalesce"].concat(t)},G=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["format"].concat(Object(p.a)(t.flatMap((function(e){return Object(E.a)(e).slice(0)}))))},B=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["case"].concat(Object(p.a)(t.flatMap((function(e){return Object(E.a)(e).slice(0)}))))},H=[{id:"venue-symbol",type:"symbol",paint:{"text-halo-color":"#fff","text-color":"#af8dbc","text-halo-width":2},layout:{"text-field":["get","@venue-label"],"text-anchor":"center","text-font":["Klokantech Noto Sans Regular"],"text-size":20,"text-offset":[0,-1.55],"text-allow-overlap":!0,"text-ignore-placement":!0,"icon-image":"icon-svg-pin-48-#af8dbc-#fff","icon-anchor":"bottom","icon-allow-overlap":!0,"icon-ignore-placement":!0}}],q=[{id:"route-line",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-opacity":["coalesce",["get","@opacity"],.8],"line-width":2,"line-color":["get","@color"]},filter:["!",["coalesce",["get","@imaginary"],["get","@tunnel"],!1]]},{id:"route-line-interactive",type:"line",paint:{"line-width":16,"line-opacity":0},filter:["coalesce",["get","@interactive"]]},{id:"route-tunnel-line",beforeId:"tunnel-line",type:"line",layout:{"line-cap":"butt","line-join":"round"},paint:{"line-opacity":["coalesce",["get","@opacity"],.8],"line-width":1,"line-gap-width":6,"line-dasharray":[10,3],"line-color":["get","@color"]},filter:["coalesce",["get","@tunnel"]]},{id:"route-imaginary-line",type:"line",layout:{"line-cap":"round","line-join":"round"},paint:{"line-opacity":["coalesce",["get","@opacity"],.5],"line-width":5,"line-color":["get","@color"],"line-dasharray":[0,2]},filter:["coalesce",["get","@imaginary"],!1]},{id:"route-point",type:"circle",paint:{"circle-opacity":["coalesce",["get","@opacity"],1],"circle-radius":5,"circle-color":["get","@color"]},filter:["==","Point",["geometry-type"]]},{id:"route-point-symbol",type:"symbol",paint:{"text-color":"#000","text-halo-color":"#fff","text-halo-width":3},layout:{"text-field":["get","@label"],"text-anchor":"center","text-font":["Klokantech Noto Sans Regular"],"text-size":24,"text-offset":[0,-.05]},filter:["==","Point",["geometry-type"]]},{id:"route-point-interactive",type:"circle",paint:{"circle-opacity":0,"circle-radius":15},filter:["==","Point",["geometry-type"]]}],U={id:"building-highlight",type:"fill",paint:{"fill-opacity":.3,"fill-color":"#99ff99"}},K=[{id:"parking-area",type:"fill",minzoom:12,paint:{"fill-opacity":.5,"fill-color":"#00afff"}},{id:"parking-point",type:"circle",minzoom:12,paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,1,14,2,15,5],"circle-opacity":.8,"circle-color":"#00afff"},filter:["==","Point",["geometry-type"]]}],V=[{id:"tunnel-point",type:"circle",minzoom:12,paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,1,14,2,15,5],"circle-opacity":.8,"circle-color":"#000000"},filter:["==","Point",["geometry-type"]]},{id:"tunnel-line",type:"line",minzoom:12,layout:{"line-cap":"round","line-join":"round"},paint:{"line-opacity":.8,"line-width":3,"line-color":["step",["to-number",["get","layer"]],"#000000",-4,"#770000",-3,"#ff0000",-2,"#ff7700",-1,"#ffff00"]}},{id:"tunnel-point-symbol",type:"symbol",minzoom:12,paint:{"text-color":"#000","text-halo-color":"#fff","text-halo-width":1},layout:{"text-field":A(T("name"),T("ref"),T("description"),""),"text-anchor":"right","text-font":["Klokantech Noto Sans Regular"],"text-size":12,"text-offset":[-.5,0]},filter:["==","Point",["geometry-type"]]}],Z=[{id:"tunnel-mask",type:"fill",paint:{"fill-opacity":.4,"fill-color":"#ffffff"}}],J=["let","maybe_space",B([W(M("@house-label"),M("@entrance-label")),"\u2009"],[""]),"house_label_maybe_space",function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return["concat"].concat(t)}(T("@house-label"),B([W(M("@house-label"),M("@entrance-label")),"\u2009"],[""])),["step",["zoom"],(r=D("maybe_space"),G([B([$(N(T("@house-label"))),""],[I(A(T("@secondary"),!1),F(R(T("@house-label")),3)),"\xb7"],[T("@house-label")]),{}],[r,{}],[B([$(N(T("@entrance-label"))),""],[W(A(T("@secondary"),!1)),"\xb7"],[T("@entrance-label")]),{"text-font":["literal",["Klokantech Noto Sans Bold"]]}])),17,function(e){return G([B([(t="@house-label",$(N(T(t)))),""],[I(A(T("@secondary"),!1),F(R(T("@house-label")),3)),"\xb7"],[T("@house-label")]),{}],[e,{}],[B([$(N(T("@entrance-label"))),""],[W(A(T("@secondary"),!1),F(R(T("@entrance-label")),1)),"\xb7"],[T("@entrance-label")]),{"text-font":["literal",["Klokantech Noto Sans Bold"]]}]);var t}(D("maybe_space")),18,(o=D("house_label_maybe_space"),G([o,{}],[T("@entrance-label"),{"text-font":["literal",["Klokantech Noto Sans Bold"]]}]))]],X=function(e){var t=e.missing,n=e.visible,o=e.hidden;return["step",["zoom"],B([$(I(N(T("@house-label")),N(T("@entrance-label")))),t],[W($(W(N(T("@house-label")),$(N(T("@secondary"))),$(F(R(T("@house-label")),3)))),$(W(N(T("@entrance-label")),$(N(T("@secondary")))))),o],[n]),17,B([$(I(N(T("@house-label")),N(T("@entrance-label")))),t],[W($(W(N(T("@house-label")),$(N(T("@secondary"))),$(F(R(T("@house-label")),3)))),$(W(N(T("@entrance-label")),I($(N(T("@secondary"))),$(F(R(T("@entrance-label")),1)))))),o],[n]),18,B([$(I(N(T("@house-label")),N(T("@entrance-label")))),t],[n])]},Y=function(e,t){return X({missing:t,visible:e,hidden:t})},Q=[{id:"entrance-point",type:"circle",minzoom:12,maxzoom:16,paint:{"circle-radius":["interpolate",["linear"],["zoom"],12,1,14,2,15,3],"circle-color":"#64be14"}},{id:"entrance-symbol",type:"symbol",minzoom:16,paint:{"text-halo-color":"#fff","text-color":"#64be14","text-halo-width":1,"icon-opacity":Y(P(1),P(.5)),"text-opacity":Y(P(1),P(0))},layout:{"text-field":J,"text-font":["Klokantech Noto Sans Regular"],"text-size":16,"text-offset":["get","@offset"],"text-anchor":["step",["%",["get","@rotate"],360]].concat(function(){var e=["top","top-right","right","bottom-right","bottom","bottom-left","left","top-left"];return[e[0]].concat([22.5,67.5,112.5,157.5,202.5,247.7,292.5,337.5].flatMap((function(t,n){return[t,e[(0+n+1)%e.length]]})))}()),"text-rotation-alignment":"map","text-allow-overlap":!0,"text-ignore-placement":!0,"icon-image":(a=P("icon-svg-triangleDot-28-#64be14-#fff"),i=P("icon-svg-triangle-28-#64be14-#fff"),X({missing:i,visible:i,hidden:a})),"icon-anchor":"center","icon-rotate":["get","@rotate"],"icon-rotation-alignment":"map","icon-allow-overlap":!0,"icon-ignore-placement":!0}}],ee=n(8),te="-1 -1 17 17",ne="M7.5 0C5.068 0 2.23 1.486 2.23 5.27c0 2.568 4.054 8.244 5.27 9.73c1.081-1.486 5.27-7.027 5.27-9.73C12.77 1.487 9.932 0 7.5 0z",oe=function(e,t){return'\n<svg xmlns="http://www.w3.org/2000/svg"\n  width="'.concat(e,'px"\n  height="').concat(e,'px"\n  style="').concat(t,'"\n  viewBox="').concat(te,'"\n>\n  <path d="').concat(ne,'" />\n</svg>')},re=function(e){var t=e.height,n=void 0===t?"50":t,o=e.style,r=void 0===o?{fill:"#444",stroke:"none"}:o,a=e.dataTestId;return Object(ee.jsxs)("svg",{"data-testid":a,height:n,style:r,viewBox:te,pointerEvents:"none",children:[Object(ee.jsx)("path",{fill:"url(#gradient-".concat(r.fill,")"),d:ne,pointerEvents:"visiblepainted",cursor:"pointer"}),Object(ee.jsx)("defs",{children:Object(ee.jsxs)("linearGradient",{id:"gradient-".concat(r.fill),gradientTransform:"rotate(90)",children:[Object(ee.jsx)("stop",{offset:"00%",stopColor:"#FFFFFF",stopOpacity:"0"}),Object(ee.jsx)("stop",{offset:"100%",stopColor:r.fill,stopOpacity:"1"})]})})]})},ae="-5 -1 25 50",ie="M 8 16 L 0 8 L 16 8 Z",le=function(e){return"\nM ".concat(8-e," ").concat(32+e,"\na ").concat(e," ").concat(e,", 0, 0, 0, ").concat(2*e," 0\na ").concat(e," ").concat(e,", 0, 0, 0, ").concat(-2*e," 0\n")},ce=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"stroke-width: 1";return'\n<svg xmlns="http://www.w3.org/2000/svg"\n  width="'.concat(e,'px"\n  height="').concat(e,'px"\n  style="').concat(t,'"\n  viewBox="').concat(ae,'"\n>\n  <path d="').concat(ie,'" />\n  <path style="').concat(o,'" d="').concat(n&&le(n)||"",'" />\n</svg>')},se=function(e,t){return ce(e,t,0)},ue=n(557),pe=n(561),de=n(262),fe=function(e){return"https://app.olmap.org/#/note/".concat(e)},be=function(e){return{lat:Number(e.lat),lon:Number(e.lon),id:e.id,type:"olmap"}},he={main:2,yes:1,null:0,"":0,no:-1},ge=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch(t);case 3:return n=e.sent,e.prev=4,e.next=7,n.json();case 7:if(o=e.sent,n.ok){e.next=10;break}return e.abrupt("return",{state:"failed",code:n.status,detail:o.detail});case 10:return e.abrupt("return",{state:"success",response:o});case 13:return e.prev=13,e.t0=e.catch(4),e.abrupt("return",{state:"failed",code:n.status,detail:e.t0});case 16:e.next=21;break;case 18:return e.prev=18,e.t1=e.catch(0),e.abrupt("return",{state:"failed",code:0,detail:e.t1});case 21:case"end":return e.stop()}}),e,null,[[0,18],[4,13]])})));return function(t){return e.apply(this,arguments)}}(),me=function(){var e=Object(s.a)(c.a.mark((function e(t,n,o){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(-1!==n){e.next=2;break}return e.abrupt("return",void 0);case 2:return e.next=4,ge("workplace"===t?"https://api.olmap.org/rest/workplaces_with_note/".concat(n,"/?language=").concat(o):"https://api.olmap.org/rest/osm_features/".concat(n,"/?language=").concat(o));case 4:return"success"===(r=e.sent).state&&("workplace"===t&&(a=r.response,r.response={id:a.id,workplace:a,image_notes:[a.image_note]}),r.response=((i=r.response).workplace&&i.workplace.workplace_entrances.sort((function(e,t){return he[t.deliveries||"null"]-he[e.deliveries||"null"]})),i)),e.abrupt("return",r);case 7:case"end":return e.stop()}var i}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),ye=function(e,t){if("success"!==(null===e||void 0===e?void 0:e.state)||!e.response.workplace)return{type:"FeatureCollection",features:[]};var n=[];return t.forEach((function(e,t){var o="olmap"===e.type?"olmap/".concat(e.id):"http://www.openstreetmap.org/".concat(e.type,"/").concat(e.id);n.push({type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:Object(u.a)(Object(u.a)({"@id":o},e.tags),{},{"@venue-label":Object(de.romanize)(t+1)})})})),{type:"FeatureCollection",features:n}},ve=function(e){if("success"!==(null===e||void 0===e?void 0:e.state)||!e.response.workplace)return[[],{}];var t=e.response.workplace.workplace_entrances,n={};return[t.flatMap((function(e){return e.unloading_places.flatMap((function(t){var o=n[t.id],r=e.entrance_data.osm_feature||e.image_note.id;return o?(r&&o.push(r),[]):(n[t.id]=r?[r]:[],[t])}))})),n]},je=function(e){return ve(e)[0]},xe=function(e){var t=e.noteId,n=e.onClose;return Object(ee.jsx)(ue.a,{open:!!t,fullWidth:!0,PaperProps:{style:{height:"100%",overflow:"hidden"}},children:t&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)(pe.a,{children:["Note on OLMap",Object(ee.jsx)(g.a,{style:{position:"absolute",top:"8px",right:"8px"},onClick:n,children:Object(ee.jsx)(y.a,{})})]}),Object(ee.jsx)("div",{style:{height:"100%",borderTop:"1px solid rgba(0, 0, 0, 0.12)"},children:Object(ee.jsx)("iframe",{title:"OLMap note editor",src:fe(t),style:{border:"none",padding:0,margin:0,width:"100%",height:"100%"}})})]})})},Oe=function(e){var t,n,o=e.onImageClick,r=e.olmapData,a="success"===(null===r||void 0===r?void 0:r.state)&&(null===r||void 0===r||null===(t=r.response)||void 0===t||null===(n=t.image_notes)||void 0===n?void 0:n.filter((function(e){return e.image})).slice(0,1).map((function(e){return Object(ee.jsx)("a",{href:fe(e.id),onClick:o,target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex"},children:Object(ee.jsx)("img",{style:{maxWidth:"100%",maxHeight:"150px"},src:e.image,alt:"A photo of the entrance"})},e.id)})));return Object(ee.jsx)("div",{style:{textAlign:"center"},children:a})},we=function(e){var t=e.dataTestId,n=e.width,o=void 0===n?"40":n,r=e.height,a=void 0===r?"40":r,i=e.stroke,l=void 0===i?"#00afff":i,c=e.strokeWidth,s=void 0===c?"16":c;return Object(ee.jsxs)("svg",{"data-testid":t,width:o,height:a,stroke:l,strokeWidth:s,viewBox:"-100 -100 200 200",fill:"transparent",style:{position:"absolute"},children:[Object(ee.jsx)("circle",{cx:"0",cy:"0",r:"24"}),Object(ee.jsx)("circle",{cx:"0",cy:"0",r:"46"}),Object(ee.jsx)("circle",{cx:"0",cy:"0",r:"68"})]})},ke=function(e){var t=e.dataTestId,n=e.onGeolocate,o=e.onGeolocateError,r=e.positionOptions,a=void 0===r?{enableHighAccuracy:!0,timeout:6e3}:r,i=e.onEnable,l=e.onDisable,c=e.enableOnMount,s=void 0===c||c,u=Object(f.useState)(null!=window.navigator.geolocation),p=Object(d.a)(u,1)[0],b=Object(f.useState)(null!=window.navigator.permissions),h=Object(d.a)(b,1)[0],g=Object(f.useState)(null),m=Object(d.a)(g,2),y=m[0],v=m[1],j=Object(f.useState)(null),x=Object(d.a)(j,2),O=x[0],w=x[1],k=Object(f.useState)(!1),_=Object(d.a)(k,2),z=_[0],S=_[1],C=function(e){p&&null==O&&(w(window.navigator.geolocation.watchPosition(n,o,a)),S(!0),null!=i&&i(e))},L=function(){p&&null!=O&&(window.navigator.geolocation.clearWatch(O),w(null),null!=l&&l())},E=function(){console.log("Geolocation is denied. Inform the user.")};Object(f.useEffect)((function(){p||console.log("Geolocation is not supported. Inform the user.")}),[p]),Object(f.useEffect)((function(){p&&h&&null==y&&h&&window.navigator.permissions.query({name:"geolocation"}).then((function(e){v(e.state),e.onchange=function(){v(this.state)}})).catch((function(e){console.error("Permissions API exists but querying it fails:",e)}))}),[]),Object(f.useEffect)((function(){"denied"===y&&(E(),L())}),[y]);var P=!h||null!=y,M=null!=O;Object(f.useEffect)((function(){!s||z||!p||M||h&&(null==y||"denied"===y)||C(!1)}),[s,z,p,M,h,y]);var T=null;if(p){var D=M?"Stop using my location":"Find my location",N=M?"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate mapboxgl-ctrl-geolocate-active":"mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate";T=Object(ee.jsx)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group mapboxgl-ctrl-bottom-left",children:Object(ee.jsx)("button",{type:"button",className:N,"data-testid":t,"aria-label":D,"aria-pressed":M,onContextMenu:function(e){return e.preventDefault()},onClick:P?function(e){console.assert(p),console.assert(P),e.preventDefault(),M?L():h&&"denied"===y?E():C(!0)}:void 0,children:Object(ee.jsx)("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true"})})})}return T};function _e(){return(_e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function ze(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Se=f.createElement("path",{id:"path862",d:"m -14.2,148 v -19.3 c 0,-7.8 6.4,-14.2 14.2,-14.2 7.8,0 14.2,6.4 14.2,14.2 V 148 Z M 1,83.8 c 20.6,0 37.4,16.7 37.4,37.4 v 48.2 H 49 v -48.2 c 0,-26.5 -21.5,-48 -48,-48 -26.5,0 -48,21.5 -48,48 v 48.2 h 10.6 v -48.2 c 0,-20.7 16.8,-37.4 37.4,-37.4"});function Ce(e,t){var n=e.title,o=e.titleId,r=ze(e,["title","titleId"]);return f.createElement("svg",_e({xmlns:"http://www.w3.org/2000/svg",viewBox:"-63 65 128 128",y:"0px",x:"0px",id:"Layer_1",ref:t,"aria-labelledby":o},r),n?f.createElement("title",{id:o},n):null,Se)}var Le=f.forwardRef(Ce),Ee=(n.p,function(e){var t=e.dataTestId,n=e.enabled,o=e.setEnabled,r=n?"Hide tunnels":"Show tunnels",a=n?"#33b5e5":"#333";return Object(ee.jsx)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group mapboxgl-ctrl-bottom-left",style:{marginBottom:53},children:Object(ee.jsx)("button",{type:"button",className:"mapboxgl-ctrl-icon","data-testid":t,"aria-label":r,"aria-pressed":n,onContextMenu:function(e){return e.preventDefault()},onClick:function(e){e.preventDefault(),o(!n)},children:Object(ee.jsx)("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",children:Object(ee.jsx)(Le,{fill:a})})})})}),Pe=n(565),Me=n(564),Te=n(576),De=n(574),Ne="English|en,Finnish|fi,Swedish|sv,Afrikaans|af,Albanian|sq,Amharic|am,Arabic|ar,Armenian|hy,Azerbaijani|az,Basque|eu,Belarusian|be,Bengali|bn,Bosnian|bs,Bulgarian|bg,Catalan|ca,Cebuano|ceb,Chinese (Simplified)|zh-CN,Chinese (Traditional)|zh-TW,Corsican|co,Croatian|hr,Czech|cs,Danish|da,Dutch|nl,Esperanto|eo,Estonian|et,French|fr,Frisian|fy,Galician|gl,Georgian|ka,German|de,Greek|el,Gujarati|gu,Haitian Creole|ht,Hausa|ha,Hawaiian|haw,Hebrew|he,Hindi|hi,Hmong|hmn,Hungarian|hu,Icelandic|is,Igbo|ig,Indonesian|id,Irish|ga,Italian|it,Japanese|ja,Javanese|jv,Kannada|kn,Kazakh|kk,Khmer|km,Kinyarwanda|rw,Korean|ko,Kurdish|ku,Kyrgyz|ky,Lao|lo,Latvian|lv,Lithuanian|lt,Luxembourgish|lb,Macedonian|mk,Malagasy|mg,Malay|ms,Malayalam|ml,Maltese|mt,Maori|mi,Marathi|mr,Mongolian|mn,Myanmar (Burmese)|my,Nepali|ne,Norwegian|no,Nyanja (Chichewa)|ny,Odia (Oriya)|or,Pashto|ps,Persian|fa,Polish|pl,Portuguese (Portugal&Brazil)|pt,Punjabi|pa,Romanian|ro,Russian|ru,Samoan|sm,Scots Gaelic|gd,Serbian|sr,Sesotho|st,Shona|sn,Sindhi|sd,Sinhala (Sinhalese)|si,Slovak|sk,Slovenian|sl,Somali|so,Spanish|es,Sundanese|su,Swahili|sw,Tagalog (Filipino)|tl,Tajik|tg,Tamil|ta,Tatar|tt,Telugu|te,Thai|th,Turkish|tr,Turkmen|tk,Ukrainian|uk,Urdu|ur,Uyghur|ug,Uzbek|uz,Vietnamese|vi,Welsh|cy,Xhosa|xh,Yiddish|yi,Yoruba|yo,Zulu|zu".split(",").map((function(e){return e.split("|")})),$e=function(e){var t=e.locale,n=e.onLocaleSelected;return Object(ee.jsxs)(De.a,{inputProps:{id:"locale",name:"locale"},onChange:function(e){var o=e.target.value;o!==t&&n(o)},style:{paddingTop:0,maxWidth:90},value:t,children:[Object(ee.jsx)("option",{value:"",children:""===t?"Translate":"Original"},""),Ne.map((function(e){var t=Object(d.a)(e,2),n=t[0],o=t[1];return Object(ee.jsx)("option",{value:o,children:n},o)}))]})},Re=function(e){var t=e.dataTestId,n=e.initiallyOpen,o=e.locale,r=e.onLocaleSelected,a=Object(f.useState)(n),i=Object(d.a)(a,2),l=i[0],c=i[1],s=L(),u=Object(d.a)(s,2)[1],p=function(){c(!1),u({welcomeSeen:!0})},b="fi"===o?"Tietoja palvelusta":"About the service";return Object(ee.jsxs)("div",{className:"mapboxgl-ctrl mapboxgl-ctrl-group mapboxgl-ctrl-bottom-left",style:{marginBottom:94},children:[Object(ee.jsx)("button",{type:"button",className:"mapboxgl-ctrl-icon","data-testid":t,"aria-label":b,onContextMenu:function(e){return e.preventDefault()},onClick:function(e){e.preventDefault(),c(!0)},children:Object(ee.jsx)("span",{className:"mapboxgl-ctrl-icon","aria-hidden":"true",style:{lineHeight:"29px",fontSize:"24px",color:"#000000"},children:"?"})}),Object(ee.jsx)(ue.a,{open:l,fullWidth:!0,scroll:"body",onClose:p,children:l&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsxs)(pe.a,{children:["fi"===o?"Tietoja palvelusta":"About this service",Object(ee.jsx)(g.a,{style:{position:"absolute",top:"8px",right:"8px"},onClick:p,children:Object(ee.jsx)(y.a,{})})]}),Object(ee.jsxs)(Me.a,{style:{borderTop:"1px solid rgba(0, 0, 0, 0.12)",paddingTop:0},children:[Object(ee.jsx)("div",{style:{float:"right"},children:Object(ee.jsx)($e,{locale:o,onLocaleSelected:r})}),o&&"fi"!==o&&"en"!==o&&Object(ee.jsx)(Te.a,{severity:"warning",style:{clear:"both"},children:"This text is not available in your language, so it is shown in English (or you can choose Finnish)."}),"fi"===o&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("h3",{children:"Tervetuloa k\xe4ytt\xe4m\xe4\xe4n Gatesolvea!"}),Object(ee.jsx)("p",{children:"Gatesolve on opas tavaratoimitusten viimeisille metreille, eli oikean oven l\xf6ytymist\xe4 varten."}),Object(ee.jsxs)("p",{children:["Kartalla n\xe4kyy"," ",Object(ee.jsx)("span",{style:{color:"#64be14"},children:"vihre\xe4ll\xe4"})," ","m\xe4\xe4r\xe4np\xe4\xe4t, eli tiedossa olevat ovet ja niiden talonumero- ja rappukirjaintiedot."]}),Object(ee.jsxs)("p",{children:["Kartalla n\xe4kyy"," ",Object(ee.jsx)("span",{style:{color:"#00afff"},children:"sinisell\xe4"})," ","purkupaikat, esimerkiksi lastausalueita ja pys\xe4k\xf6intikieltoalueita."]}),Object(ee.jsxs)("p",{children:["Oranssit painikkeet viev\xe4t"," ",Object(ee.jsx)("a",{href:"https://app.olmap.org/",style:{color:"#ff5000"},target:"_blank",rel:"noopener noreferrer",children:"OLMap-palvelun"})," ","toimintoihin, joilla voit lis\xe4t\xe4, korjata ja kommentoida tietoja."]}),Object(ee.jsx)("p",{children:"Palvelun n\xe4ytt\xe4m\xe4t tiedot ovat vain ehdotuksia, eik\xe4 niiden luotettavuudesta ja turvallisuudesta voida ottaa vastuuta. Noudata liikennes\xe4\xe4nt\xf6j\xe4 ja varovaisuutta."}),Object(ee.jsx)("h3",{children:"Palaute"}),Object(ee.jsxs)("p",{children:["Voit l\xe4hett\xe4\xe4 palautetta palvelusta s\xe4hk\xf6postitse osoitteeseen"," ",Object(ee.jsx)("a",{href:"mailto:gatesolve@sproutverse.com",children:"gatesolve@sproutverse.com"}),"."]}),Object(ee.jsx)("h3",{children:"Lisenssit"}),Object(ee.jsxs)("p",{children:["Toimipistetietojen ja kuvien l\xe4hde on"," ",Object(ee.jsx)("a",{href:"https://olmap.org/fi/",target:"_blank",rel:"noopener noreferrer",children:"OLMap"}),", jonka tiedot on lisensoitu avoimesti"," ",Object(ee.jsx)("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/deed.fi",target:"_blank",rel:"noopener noreferrer",children:"Creative Commons CC0"})," ","-lausumalla."]}),Object(ee.jsxs)("p",{children:["Taustakartan ja osoitehaun l\xe4hde on"," ",Object(ee.jsx)("a",{href:"https://digitransit.fi/",target:"_blank",rel:"noopener noreferrer",children:"Digitransit"}),". Aineistojen avoin lisenssi on"," ",Object(ee.jsx)("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",rel:"noopener noreferrer",children:"ODbL \xa9 OpenStreetMapin tekij\xe4t"}),"."]}),Object(ee.jsxs)("p",{children:["Palvelu ja sen toteutuksessa k\xe4ytetyt ohjelmistokirjastot ovat avointa l\xe4hdekoodia:"," ",Object(ee.jsx)("a",{href:"https://github.com/gatesolve/gatesolve-ui",target:"_blank",rel:"noopener noreferrer",children:"palvelun l\xe4hdekoodi Githubissa"})," ","\xa9 Sproutverse Oy ja Mistmap Oy."]})]}),"fi"!==o&&Object(ee.jsxs)(ee.Fragment,{children:[Object(ee.jsx)("h3",{children:"Welcome to use Gatesolve!"}),Object(ee.jsx)("p",{children:"Gatesolve is your guide to the last meters of goods deliveries, for finding the right door."}),Object(ee.jsxs)("p",{children:["The map shows in"," ",Object(ee.jsx)("span",{style:{color:"#64be14"},children:"green"})," the destinations such as any doors and their housenumber and unit information."]}),Object(ee.jsxs)("p",{children:["The map shows in"," ",Object(ee.jsx)("span",{style:{color:"#00afff"},children:"blue"})," the places for unloading including loading zones and no-parking zones."]}),Object(ee.jsxs)("p",{children:["Orange buttons take you to"," ",Object(ee.jsx)("a",{href:"https://app.olmap.org/",style:{color:"#ff5000"},target:"_blank",rel:"noopener noreferrer",children:"the OLMap service"})," ","including functionalities to add, update and comment on the information."]}),Object(ee.jsx)("p",{children:"All information in the service is provided as suggestions without guarantees of reliability and safety and its use is at your own risk. Observe traffic regulations and caution."}),Object(ee.jsx)("h3",{children:"Feedback"}),Object(ee.jsxs)("p",{children:["Please send any feedback regarding this service via email to"," ",Object(ee.jsx)("a",{href:"mailto:gatesolve@sproutverse.com",children:"gatesolve@sproutverse.com"}),"."]}),Object(ee.jsx)("h3",{children:"Licenses"}),Object(ee.jsxs)("p",{children:["The source of venue information and photos is"," ",Object(ee.jsx)("a",{href:"https://olmap.org/",target:"_blank",rel:"noopener noreferrer",children:"OLMap"}),", which licenses its data openly with the"," ",Object(ee.jsx)("a",{href:"https://creativecommons.org/publicdomain/zero/1.0/deed",target:"_blank",rel:"noopener noreferrer",children:"Creative Commons CC0"})," ","dedication."]}),Object(ee.jsxs)("p",{children:["The source of the background map and the address search is"," ",Object(ee.jsx)("a",{href:"https://digitransit.fi/en/",target:"_blank",rel:"noopener noreferrer",children:"Digitransit"}),". The license of this open data is"," ",Object(ee.jsx)("a",{href:"https://www.openstreetmap.org/copyright",target:"_blank",rel:"noopener noreferrer",children:"ODbL \xa9 OpenStreetMap contributors"}),"."]}),Object(ee.jsxs)("p",{children:["The service and software libraries used in its implementation are open source:"," ",Object(ee.jsx)("a",{href:"https://github.com/gatesolve/gatesolve-ui",target:"_blank",rel:"noopener noreferrer",children:"the source code of the service in Github"})," ","\xa9 Sproutverse Ltd and Mistmap Ltd."]})]})]}),Object(ee.jsx)(Pe.a,{children:Object(ee.jsx)(h.a,{onClick:p,style:{color:"#00afff"},children:"Close"})})]})})]})},Fe=/^(https:\/\/w3id.org\/openstreetmap\/terms#|osm:)/,Ie=function(e,t,n){var o={"@id":e};return Object.entries(t||{}).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],r=t[1];if((n.startsWith("https://w3id.org/openstreetmap/terms#")||n.startsWith("osm:"))&&"https://w3id.org/openstreetmap/terms#hasTag"!==n&&"osm:hasTag"!==n){var a=n.replace(Fe,""),i=r.replace(Fe,"");o[a]="NoAccess"===i?"no":"FreeAccess"===i?"yes":"OfficialAccess"===i?"official":"highway"===a&&"UnderConstruction"===i?"construction":"construction"===a&&"UnderConstruction"===i?"yes":i.replace(/([a-z])([A-Z])/g,"$1_$2").toLowerCase()}})),null===n||void 0===n||n.forEach((function(e){var t=e.indexOf("="),n=e.substring(0,t),r=e.substring(t+1);o[n]=r})),o};function We(e){var t=[],n=[],o={},r=new Map,a=[];return e.legs[0].getSteps().forEach((function(i,l){var c,s,u;if(i.startLocation.id||i.stopLocation.id||1===l){var p=i.stopLocation,d=i.through;if(!o[d]){var f=e.context[d],b=Ie(d,f.definedTags,f.freeformTags);(b.height||b.maxheight||b["maxheight:physical"])&&n.push({type:d,id:d,lon:i.startLocation.longitude,lat:i.startLocation.latitude,tags:b})}if(o[d]=!0,"https://w3id.org/openstreetmap/terms#Steps"===(null===(c=e.context[d])||void 0===c?void 0:c.definedTags["https://w3id.org/openstreetmap/terms#highway"])||(null===(s=e.context[d])||void 0===s?void 0:s.freeformTags.find((function(e){return e.startsWith("tunnel=")})))){var h;if(!r.has(d)){var g=e.context[d],m=Ie(d,g.definedTags,g.freeformTags);r.set(d,[m,[]])}null===(h=r.get(d))||void 0===h||h[1].push([i.startLocation.longitude,i.startLocation.latitude],[i.stopLocation.longitude,i.stopLocation.latitude])}if(null===(u=p.definedTags)||void 0===u?void 0:u["https://w3id.org/openstreetmap/terms#barrier"]){var y=Ie(p.id,p.definedTags,p.freeformTags);n.push({type:p.id,id:p.id,lon:p.longitude,lat:p.latitude,tags:y})}t.push([i.startLocation.longitude,i.startLocation.latitude]),t.push([i.stopLocation.longitude,i.stopLocation.latitude])}else a.push([[i.startLocation.longitude,i.startLocation.latitude],[i.stopLocation.longitude,i.stopLocation.latitude]])})),{coordinates:t,obstacles:n,obstacleWays:Array.from(r.values()),imaginaryWays:a}}function Ae(e,t,n,o,r,a){var i=[];return e&&i.push({type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:Object(u.a)(Object(u.a)({},e.tags),{},{"@id":"".concat(e.type,"/").concat(e.id),"@color":r})}),t&&t.forEach((function(e){i.push({type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:Object(u.a)(Object(u.a)({},e.tags),{},{"@id":"".concat(e.type,"/").concat(e.id),"@color":a})})})),n&&n.forEach((function(e){var t,n;i.push({type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:{"@color":"#00ffff","@label":(null===(t=e.tags)||void 0===t?void 0:t.ref)||(null===(n=e.tags)||void 0===n?void 0:n["addr:unit"]),"@opacity":0}})})),(null===o||void 0===o?void 0:o.coordinates)&&i.push({type:"Feature",geometry:{type:"LineString",coordinates:o.coordinates},properties:{"@color":"#000"}}),null===o||void 0===o||o.obstacleWays.forEach((function(e){var t=Object(d.a)(e,2),n=t[0],o=t[1],r=n.tunnel?Object(u.a)(Object(u.a)({},n),{},{"@color":"#000000","@opacity":1,"@tunnel":!0}):Object(u.a)(Object(u.a)({},n),{},{"@color":"#dc0451","@opacity":1,"@obstacle":!0,"@interactive":!0});i.push({type:"Feature",geometry:{type:"LineString",coordinates:o},properties:r})})),(null===o||void 0===o?void 0:o.imaginaryWays)&&i.push({type:"Feature",geometry:{type:"MultiLineString",coordinates:o.imaginaryWays},properties:{"@color":"#000","@imaginary":!0}}),null===o||void 0===o||o.obstacles.forEach((function(e){i.push({type:"Feature",geometry:{type:"Point",coordinates:[e.lon,e.lat]},properties:Object(u.a)(Object(u.a)({},e.tags),{},{"@color":"#dc0451","@label":"!","@obstacle":!0})})})),{type:"FeatureCollection",features:i}}function Ge(e,t){return Be.apply(this,arguments)}function Be(){return(Be=Object(s.a)(c.a.mark((function e(t,o){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([n.e(4),n.e(2)]).then(n.bind(null,572));case 2:r=e.sent,a=r.Planner,t.forEach((function(e){var t=Object(d.a)(e,3),n=t[0],r=t[1],i=t[2],l=void 0===i?"delivery-walking":i,u=new a;u.setProfileID("".concat("https","://").concat("","/").concat(l,".json")).query({from:{latitude:n.lat,longitude:n.lon},to:{latitude:r.lat,longitude:r.lon}}).take(1).on("data",function(){var e=Object(s.a)(c.a.mark((function e(t){var a,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.completePath(t);case 2:a=e.sent,console.log("Plan",a,"from",n,"to",r),i=We(a),s=Ae(n,[r],void 0,i,"delivery-car"===l?"#000000":"#00afff","delivery-car"===l?"#00afff":"#64be14"),o(s);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var He,qe=n(357),Ue=n.n(qe),Ke=(null===(He=Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}).REACT_APP_OVERPASS_INTERPRETER)||void 0===He?void 0:He.replace(/\?$/,""))||"https://overpass.fvh.io/api/interpreter",Ve=function(e){var t,n,o=new URL(Ke);return o.searchParams.append("data",(t=e.lat,n=e.lon,"\n  [out:json][timeout:25];\n  (\n    relation(around:10, ".concat(t,", ").concat(n,")[building];\n    way(r);\n    way(around:10, ").concat(t,", ").concat(n,')[building];\n  )->.b;\n  (\n    relation(around.b:10)["building:part"];\n    way(r);\n    way(around.b:10)["building:part"];\n  )->.p;\n  // gather results\n  (\n    node(w.b)[entrance];\n    node(w.p)[entrance];\n  );\n  // print results\n  out body;\n  >;\n  out skel qt;\n'))),fetch(o.toString()).then((function(e){return e.json().then((function(e){return e.elements.filter((function(e){return"node"===e.type&&"lat"in e&&null!=e.lat&&"lon"in e&&null!=e.lon&&e.tags&&e.tags.entrance}))}))}))},Ze=function(e,t,n){var o=n.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n");return"\n  [out:json][timeout:25];\n  (\n    way(around:100, ".concat(e,", ").concat(t,')["highway"][name="').concat(o,'"];\n  );\n  // print results as id and geometry for each way in qt (non-sorted) order\n  out ids geom qt;')},Je=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var o,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(o=new URL(Ke)).searchParams.append("data",Ze(t.lat,t.lon,n)),e.next=4,fetch(o.toString());case 4:return r=e.sent,e.next=7,r.json();case 7:return a=e.sent,i=a.elements.map((function(e){return e.geometry.map((function(e){var t=e.lat;return[e.lon,t]}))})),e.abrupt("return",{type:"MultiLineString",coordinates:i});case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Xe=function(e){return"\n  [out:json][timeout:25];\n  node(id:".concat(e.join(","),");\n  out;\n")},Ye=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,o,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new URL(Ke),(o=t.filter((function(e){return e>0}))).length){e.next=4;break}return e.abrupt("return",[]);case 4:return n.searchParams.append("data",Xe(o)),e.next=7,fetch(n.toString());case 7:return r=e.sent,e.next=10,r.json();case 10:return a=e.sent,e.abrupt("return",a.elements);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qe=function(e,t){return"\n  [out:json][timeout:25];\n  ".concat(e,"(id:").concat(t.join(","),");\n  out center;\n")},et=function(){var e=Object(s.a)(c.a.mark((function e(t,n){var o,r,a,i;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=new URL(Ke),(r=n.filter((function(e){return e>0}))).length){e.next=4;break}return e.abrupt("return",[]);case 4:return o.searchParams.append("data",Qe(t,r)),e.next=7,fetch(o.toString());case 7:return a=e.sent,e.next=10,a.json();case 10:return i=e.sent,e.abrupt("return",i.elements);case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tt=function(){var e=Object(s.a)(c.a.mark((function e(t){var n,o,r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new URL(Ke)).searchParams.append("data",'\n[out:json][timeout:25][bbox];\n(\n  way[layer~"^-[123456789]"][highway!~"^(footway|steps|corridor|cycleway)"][highway][tunnel];\n  node[layer~"^-[123456789]"][barrier=gate];\n  node[layer~"^-[123456789]"][entrance];\n  node[layer~"^-[123456789]"]["parking:condition"=loading];\n);\nout body;\n>;\nout skel qt;\n'),n.searchParams.append("bbox",t),e.next=5,fetch(n.toString());case 5:return o=e.sent,e.next=8,o.json();case 8:return r=e.sent,a=Ue()(r),e.abrupt("return",Object(u.a)(Object(u.a)({},a),{},{features:a.features.map((function(e){var t=Object(u.a)({},e.properties);return t["@id"]=t.id,delete t.id,Object(u.a)(Object(u.a)({},e),{},{properties:t})}))}));case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nt=function(e){var t,n;return{width:null===e||void 0===e||null===(t=e.getContainer())||void 0===t?void 0:t.clientWidth,height:null===e||void 0===e||null===(n=e.getContainer())||void 0===n?void 0:n.clientHeight}},ot=n(337),rt=n(120),at=n(542),it=function(e){e.some((function(e){return["staircase","main"].includes(e.properties.entrance)}))&&e.forEach((function(e){["staircase","main"].includes(e.properties.entrance)||(e.properties["@secondary"]=!0)}))},lt=function(e,t,n,o,r){if(!e["osm:hasNodes"])return[];if("string"===typeof e["osm:hasNodes"])return[];var a=e["osm:hasNodes"];if(a.length<4)return console.log("not an area",e["@id"]),[];a[0]!==a[a.length-1]&&console.log("unclosed",e["@id"]);var i=null,l=[];return a.forEach((function(a,c,s){var p=n[a];if(p){null===i&&(i=Object(at.a)(Object(rt.lineString)(s.map((function(e){return t[e]})))));var d=t[a],f=0===c?t[s[s.length-2]]:t[s[c-1]],b=c===s.length-1?t[s[1]]:t[s[c+1]],h=Object(ot.a)(d,f),g=Object(ot.a)(d,b),m=Math.abs(h-g)/2+Math.min(h,g),y=h>g?m+270:m+90,v=i!==!!o?y:y+180,j=p.properties["@entrance-label"],x=p.properties["@house-label"];if(!p.properties["addr:housenumber"]&&!p.properties.ref&&!p.properties["addr:unit"]){var O=ct(r||e);j=j||O.entrance}p.properties=Object(u.a)(Object(u.a)({},p.properties),{},{"@offset":[.2*Math.cos(v/180*Math.PI),.2*Math.sin(v/180*Math.PI)],"@rotate":((v-90)%360+360)%360,"@entrance-label":j,"@house-label":x}),l.push(p)}})),l},ct=function(e){var t,n,o,r,a,i,l=(null===(t=e["osm:hasTag"])||void 0===t||null===(n=t.find((function(e){return e.startsWith("addr:housenumber=")})))||void 0===n?void 0:n.substring(17))||"",c=null===(o=e["osm:hasTag"])||void 0===o||null===(r=o.find((function(e){return e.startsWith("ref=")})))||void 0===r?void 0:r.substring(4),s=null===(a=e["osm:hasTag"])||void 0===a||null===(i=a.find((function(e){return e.startsWith("addr:unit=")})))||void 0===i?void 0:i.substring(10),u=c||s||"";return{house:l.replace(/ /g,"\u2009"),entrance:u.replace(/ /g,"\u2009")}},st=function(e){for(var t={},n={},o={},r={},a=0;a<e["@graph"].length;a++){var i=e["@graph"][a];if("osm:Relation"===i["@type"])r[i["@id"]]=i;else if("osm:Way"===i["@type"])o[i["@id"]]=i;else if(i["geo:lat"]&&i["geo:long"]){var l,c=[i["geo:long"],i["geo:lat"]];if(n[i["@id"]]=c,null===(l=i["osm:hasTag"])||void 0===l?void 0:l.find((function(e){return e.startsWith("entrance=")}))){var s=i["@id"],p=Ie(s,i,i["osm:hasTag"]),d=ct(i),f={type:"Feature",geometry:{type:"Point",coordinates:c},properties:Object(u.a)(Object(u.a)({},p),{},{"@entrance-label":d.entrance,"@house-label":d.house})};t[s]=f}}}return function(e,t,n,o){Object.values(e).filter((function(e){var t;return null===(t=e["osm:hasTag"])||void 0===t?void 0:t.find((function(e){return e.startsWith("building=")||e.startsWith("building:part=")}))})).forEach((function(e){var r=e["osm:hasMembers"].flatMap((function(r){var a=t[r["@id"]];return a?lt(a,n,o,"inner"===r.role,e):[]}));it(r)}))}(r,o,n,t),function(e,t,n){Object.values(e).filter((function(e){var t;return null===(t=e["osm:hasTag"])||void 0===t?void 0:t.find((function(e){return e.startsWith("building=")||e.startsWith("building:part=")}))})).forEach((function(e){it(lt(e,t,n))}))}(o,n,t),{type:"FeatureCollection",features:Object.values(t)}},ut=256,pt=12756274*Math.PI;function dt(e,t,n,o){for(var r=function(e){var t=pt*e[0]/360,n=Math.sin(e[1]*Math.PI/180),o=pt*Math.log((1+n)/(1-n))/(4*Math.PI);return[pt/2+t,pt-(pt/2+o)]}(n),a=[r[0]*ut*Math.pow(2,o)/pt,r[1]*ut*Math.pow(2,o)/pt],i=[Math.floor((a[0]-e/2)/ut),Math.floor((a[1]-t/2)/ut),Math.ceil((a[0]+e/2)/ut),Math.ceil((a[1]+t/2)/ut)],l=[],c=i[0];c<i[2];++c)for(var s=i[1];s<i[3];++s){var u=c*ut-a[0]+e/2,p=s*ut-a[1]+t/2;l.push({x:c,y:s,zoom:o,px:u,py:p})}return l}var ft=n(334),bt=Object(ft.default)("+proj=tmerc +lat_0=0 +lon_0=25 +k=1 +x_0=25500000 +y_0=0 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),ht=function(e){return bt.forward(e)},gt=function(e){return bt.inverse(e)},mt=[16,17,20,22,23,24,25,27,29,39,40,41,42,45,46,47,49,50,51,52,53,54,55,61,67,98,103,104,105,126,142,144,145,146,147,148,166,189,190,191,192,193,194,195,196,207,208,280,327,328,335,342,346,349,351,352,353,354,355,356,357,359,361,362,1298,2295,2842,4437,7167,7168,7216,7354,7419,7459,7460,7461,7462,7463,7464,7465,7467,7468,7497,7505,7542,7543,7544,7545,7614,7640,7667,7690,7691,7692,7693,7694,7795,7834],yt=function(e){return e.filter((function(e){return!mt.find((function(t){var n;return t===(null===(n=e.properties)||void 0===n?void 0:n["hel:id"])}))}))},vt=n(364),jt=(n(365),n(366),n(562)),xt=n(571),Ot=(n(264),n(367)),wt=n.n(Ot),kt=n(368),_t=n.n(kt),zt=n(578),St=n(567),Ct=n(570),Lt=n(569),Et=n(568),Pt={fi:{"Delivery entrance":"Toimitussis\xe4\xe4nk\xe4ynti","Not for deliveries":"Ei toimituksille",underground:"maan alla","loading dock":"lastauslaituri","main entrance":"p\xe4\xe4sis\xe4\xe4nk\xe4ynti"}},Mt=function(e,t){var n;return(null===(n=Pt[t])||void 0===n?void 0:n[e])||e},Tt=function(e,t){return"main"===e||"yes"===e?Mt("Delivery entrance",t):"no"===e?Mt("Not for deliveries",t):e},Dt=function(e,t){var n=e.entrance_data.as_osm_tags,o=[];return Number(n.layer)<0&&o.push(Mt("underground",t)),"loadingdock"===n.door&&o.push(Mt("loading dock",t)),"main"!==n.entrance||e.description||o.push(Mt("main entrance",t)),n["addr:street"]&&n["addr:housenumber"]&&n["addr:unit"]&&o.push("".concat(n["addr:street"]," ").concat(n["addr:housenumber"]," ").concat(n["addr:unit"])),o.join(", ")},Nt=function(e){var t,n=e.workplaceEntrance,o=e.workplace,r=e.label,a=e.locale,i=e.onEntranceSelected,l=e.onUnloadingPlaceSelected,c=e.onViewDetails,s=Object(f.useState)(!0),u=Object(d.a)(s,2),p=u[0],b=u[1];return Object(ee.jsxs)(St.a,{variant:"outlined",square:!0,style:{padding:"8px",borderLeft:"none",borderRight:"none",borderBottom:"none"},children:[Object(ee.jsx)(Et.a,{style:{padding:0},avatar:Object(ee.jsx)(zt.a,{style:{marginRight:0,background:"#af8dbc",color:"#af8dbc",textShadow:"\n0      -1px 0.5px white,\n1px    -1px 0.5px white,\n1px    0    0.5px white,\n1px    1px  0.5px white,\n0      1px  0.5px white,\n-1px   1px  0.5px white,\n-1px   0    0.5px white,\n-1px   -1px 0.5px white,\n2px    -0.5px 0.5px white,\n2px    0.5px  0.5px white,\n-2px   -0.5px 0.5px white,\n-2px   0.5px  0.5px white,\n-0.5px 2px 0.5px white,\n0.5px  2px 0.5px white,\n-0.5px -2px 0.5px white,\n0.5px  -2px 0.5px white,\n-1.5px    1.5px  0.5px white,\n1.5px    -1.5px  0.5px white,\n-1.5px -1.5px 0.5px white,\n1.5px    1.5px  0.5px white,\n2px    0px 0.5px white,\n0px    2px  0.5px white,\n-2px   0px 0.5px white,\n0px    -2px  0.5px white",font:'30px "Noto Sans"'},children:Object(ee.jsx)("span",{children:r})}),title:[!(null===(t=n.delivery_types)||void 0===t?void 0:t.length)&&Tt(n.deliveries,a),n.description_translated||n.description,n.delivery_types.join(", ")].filter((function(e){return e})).join(" - "),subheader:[n.delivery_hours||o.delivery_hours,Dt(n,a)].filter((function(e){return e})).join(" - "),titleTypographyProps:{style:{background:"rgba(255,255,255,0.5)",fontWeight:"main"===n.deliveries?"bold":void 0}},subheaderTypographyProps:{style:{background:"rgba(255,255,255,0.5)"}}}),Object(ee.jsx)(Lt.a,{style:{padding:0,minHeight:"4px"},children:Object(ee.jsx)(jt.a,{variant:"body2",color:"textSecondary",component:"p",children:n.delivery_instructions_translated||n.delivery_instructions})}),Object(ee.jsxs)(Ct.a,{style:{padding:0},children:[Object(ee.jsx)(h.a,{variant:"contained",size:"small",style:{backgroundColor:"#64be14",color:"#fff"},type:"button","aria-label":"Set destination",onClick:function(){var e=n.entrance_data.osm_feature||n.image_note.id;e&&i(e)},children:"Destination"}),Object(ee.jsx)(h.a,{variant:"contained",size:"small",style:{backgroundColor:"#ff5000",color:"#fff"},type:"button","aria-label":"View details",onClick:function(){return c(n.image_note)},children:"View details"}),Object(ee.jsx)(h.a,{variant:"text",size:"small",style:{color:"#00afff"},type:"button","aria-label":p?"Show unloading places":"Hide unloading places",onClick:function(){return b(!p)},children:p?"Show parking":"Hide parking"})]}),!p&&n.unloading_places.map((function(e){return Object(ee.jsxs)(St.a,{variant:"outlined",style:{margin:"8px",padding:"4px"},children:[Object(ee.jsx)(Lt.a,{style:{padding:0},children:Object(ee.jsx)(jt.a,{variant:"body2",color:"textSecondary",component:"p",children:e.description_translated||e.description})}),Object(ee.jsxs)(Ct.a,{style:{padding:0},children:[Object(ee.jsx)(h.a,{variant:"contained",size:"small",style:{backgroundColor:"#00afff",color:"#fff"},type:"button","aria-label":"Set origin",onClick:function(){return l(e)},children:"Origin"}),Object(ee.jsx)(h.a,{variant:"contained",size:"small",style:{backgroundColor:"#ff5000",color:"#fff"},type:"button","aria-label":"View details",onClick:function(){return c(e.image_note)},children:"View details"})]})]},e.id)}))]})};function $t(){return($t=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Rt(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var Ft=f.createElement("defs",{id:"defs2"});function It(e,t){var n=e.title,o=e.titleId,r=Rt(e,["title","titleId"]);return f.createElement("svg",$t({xmlns:"http://www.w3.org/2000/svg",width:"642mm",height:"642mm",viewBox:"0 0 642 642",id:"svg8",ref:t,"aria-labelledby":o},r),n?f.createElement("title",{id:o},n):null,Ft,f.createElement("g",{id:"layer1",transform:"translate(0,345)"},f.createElement("circle",{style:{opacity:1,fill:"#ffcd00",fillOpacity:1,fillRule:"nonzero",stroke:"none",strokeWidth:25.76569176,strokeLinecap:"square",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeDashoffset:0,strokeOpacity:1},id:"path10",cx:321,cy:-24,r:320}),f.createElement("path",{style:{opacity:1,fill:"#000000",fillOpacity:1,fillRule:"nonzero",stroke:"none",strokeWidth:50,strokeLinecap:"square",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeDashoffset:0,strokeOpacity:1},d:"m 440.99997,-294.00003 -120,120 -120.00001,-120 z",id:"rect888"}),f.createElement("path",{id:"path902",d:"m 200.99996,245.99997 120.00001,-120 120,120 z",style:{opacity:1,fill:"#000000",fillOpacity:1,fillRule:"nonzero",stroke:"none",strokeWidth:50,strokeLinecap:"square",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeDashoffset:0,strokeOpacity:1}}),f.createElement("path",{id:"path913",d:"M 321.00008,-273.9998 A 250,250 0 0 0 70.999862,-24.000087 250,250 0 0 0 321.00008,226.00016 250,250 0 0 0 570.99981,-24.000087 250,250 0 0 0 321.00008,-273.9998 Z m 0,9.9999 A 240,240 0 0 1 560.99991,-24.000087 240,240 0 0 1 321.00008,215.99976 240,240 0 0 1 80.999772,-24.000087 240,240 0 0 1 321.00008,-263.9999 Z",style:{opacity:1,fill:"#ffcd00",fillOpacity:1,fillRule:"nonzero",stroke:"none",strokeWidth:20.12944603,strokeLinecap:"square",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeDashoffset:0,strokeOpacity:1}}),f.createElement("path",{style:{opacity:1,fill:"#e4002b",fillOpacity:1,fillRule:"nonzero",stroke:"none",strokeWidth:24.96051407,strokeLinecap:"square",strokeLinejoin:"round",strokeMiterlimit:4,strokeDasharray:"none",strokeDashoffset:0,strokeOpacity:1},d:"M 321.00008,-334.00028 A 309.99998,309.99998 0 0 0 10.999875,-24.000087 309.99998,309.99998 0 0 0 321.00008,286.00012 309.99998,309.99998 0 0 0 630.99977,-24.000087 309.99998,309.99998 0 0 0 321.00008,-334.00028 Z m 0,65.00018 A 245,245 0 0 1 566.00011,-24.000087 245,245 0 0 1 321.00008,220.99996 245,245 0 0 1 76.000072,-24.000087 245,245 0 0 1 321.00008,-269.0001 Z",id:"path915"})))}var Wt=f.forwardRef(It),At=(n.p,function(e){return e&&(e.maxheight||e["maxheight:physical"]||e.height)}),Gt=function(e,t,n){return Object(ee.jsxs)(ee.Fragment,{children:[e["".concat(t,"_translated")]||e[t],e["".concat(t,"_translated")]&&e["".concat(t,"_translated")]!==e[t]&&Object(ee.jsxs)("span",{children:[" ",Object(ee.jsx)("a",{href:"#",style:{display:"inline",color:"#aaa",background:"none",border:"none",textDecoration:"none"},onClick:function(e){e.preventDefault(),n("")},children:"Translated by Google. View original."})]})]})},Bt=function(e){var t,n=e.open,o=e.collapsed,r=e.venue,a=e.venueOlmapData,i=e.restrictions,l=e.locale,c=e.onClose,s=e.onEntranceSelected,u=e.onUnloadingPlaceSelected,p=e.onCollapsingToggled,d=e.onViewDetails,f=e.onRestrictionSelected,b=e.onLocaleSelected;if(!r||!n)return null;var h="success"===(null===a||void 0===a?void 0:a.state)&&a.response.workplace||void 0,m=null===h||void 0===h?void 0:h.workplace_entrances,v=new Map;null===i||void 0===i||i.features.filter((function(e){return At(e.properties)})).forEach((function(e){var t;v.set(null===(t=e.properties)||void 0===t?void 0:t["@id"],e)}));var x=Array.from(v.values());return Object(ee.jsxs)(xt.a,{open:n,anchor:"bottom",variant:"persistent",elevation:8,PaperProps:{style:{maxHeight:"45%",width:"100%",maxWidth:"600px",left:"50%",transform:"translateX(-50%)"},elevation:8},children:[Object(ee.jsxs)(pe.a,{children:[h&&Object(ee.jsx)(g.a,{style:{position:"absolute",top:"8px",left:"8px"},onClick:function(){return p()},children:o?Object(ee.jsx)(wt.a,{}):Object(ee.jsx)(_t.a,{})}),r&&Object(ee.jsx)(g.a,{"aria-label":"Comment",href:"workplace"===r.type?"https://app.olmap.org/#/ww/id/".concat(r.id):"https://app.olmap.org/#/ww/osm/".concat(r.type,"/").concat(r.id),target:"_blank",rel:"noopener noreferrer",style:{position:"absolute",top:"8px",left:"48px"},children:Object(ee.jsx)(j.a,{style:{color:"#ff5000"}})}),(null===h||void 0===h?void 0:h.max_vehicle_height)&&Object(ee.jsxs)("div",{style:{display:"inline-block",position:"relative",width:"2em",height:"2em",verticalAlign:"middle",marginRight:"0.5em"},children:[Object(ee.jsx)(Wt,{style:{width:"100%",height:"100%"}}),Object(ee.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",fontSize:"0.7em",display:"flex",alignItems:"center",justifyContent:"center"},children:h.max_vehicle_height})]}),(null===h||void 0===h?void 0:h.as_osm_tags.name)||(null===(t=r.tags)||void 0===t?void 0:t.name)||"",Object(ee.jsx)(g.a,{style:{position:"absolute",top:"8px",right:"8px"},onClick:c,children:Object(ee.jsx)(y.a,{})})]}),h&&Object(ee.jsxs)(Me.a,{style:{display:o?"none":"block",overflow:"auto",textAlign:"left",paddingTop:0},children:[Object(ee.jsx)("div",{style:{float:"right"},children:Object(ee.jsx)($e,{locale:l,onLocaleSelected:b})}),x.map((function(e){var t;return Object(ee.jsxs)("button",{type:"button",style:{float:"left",position:"relative",width:"2em",height:"2em",border:"none",background:"none",padding:0},onClick:function(){return"Point"===e.geometry.type&&f(e)},children:[Object(ee.jsx)(Wt,{style:{width:"100%",height:"100%"}}),Object(ee.jsx)("div",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",fontSize:"0.7em",display:"flex",alignItems:"center",justifyContent:"center"},children:At(e.properties)})]},null===(t=e.properties)||void 0===t?void 0:t["@id"])})),Object(ee.jsx)(jt.a,{variant:"body2",color:"textSecondary",component:"p",style:{paddingBottom:"4px"},children:Gt(h,"delivery_instructions",b)}),Object(ee.jsx)("div",{style:{clear:"both"}}),null===m||void 0===m?void 0:m.map((function(e,t){return Object(ee.jsx)(Nt,{workplaceEntrance:e,workplace:h,onEntranceSelected:s,onUnloadingPlaceSelected:u,onViewDetails:d,label:Object(de.romanize)(t+1),locale:l},e.id)}))]})]})},Ht=500,qt="digitransit-subscription-key=".concat("2d2e360cef084abebf263a4af731369d"),Ut=function(e){return{id:-1,type:"node",lat:e[0],lon:e[1]}},Kt=function(e){return[e.lat,e.lon]},Vt=function(e){var t,n=null===(t=e.properties)||void 0===t?void 0:t["@id"].split("/").reverse(),o=Object(d.a)(n,2),r=o[0],a=o[1];return{id:parseInt(r,10),type:a,lat:e.geometry.coordinates[1],lon:e.geometry.coordinates[0],tags:e.properties||void 0}},Zt={type:"FeatureCollection",features:[]},Jt={entrances:[],route:Ae(),highlights:Zt,viewport:{latitude:60.17,longitude:24.941,zoom:15,bearing:0,pitch:0},isOriginExplicit:!1,isGeolocating:!1,geolocationPosition:null,popupCoordinates:null,routableTiles:new Map,venueDialogOpen:!1,venueDialogCollapsed:!1,venueFeatures:Zt,showTunnels:!1,locale:""},Xt=[60.17066815612902,24.941510260105133],Yt=function(e){var t=e.replace("https://hslstoragestatic.azureedge.net/mapfonts/Klokantech Noto Sans","https://fonts.openmaptiles.org/Klokantech Noto Sans");if(t.startsWith("https://api.digitransit.fi/")||t.startsWith("https://cdn.digitransit.fi/")){var n=t.includes("?")?"&":"?";return{url:"".concat(t).concat(n).concat(qt)}}return{url:t}},Qt=function(e,t){return Object(k.a)([e[1],e[0]],[t[1],t[0]],{units:"meters"})},en=function(e){if(e){var t=e.split(",");if(2===t.length&&t[0].length&&t[1].length){var n=t.map(Number),o=Object(d.a)(n,2),r=o[0],a=o[1];if(!Number.isNaN(r)&&a>-90&&a<90)return[r,a]}}},tn=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=new w.a(e),r=t.filter((function(e){return e}));if(!r.length)return e;var a=Math.min.apply(Math,Object(p.a)(r.map((function(e){return e[1]})))),i=Math.max.apply(Math,Object(p.a)(r.map((function(e){return e[1]})))),l=Math.min.apply(Math,Object(p.a)(r.map((function(e){return e[0]})))),c=Math.max.apply(Math,Object(p.a)(r.map((function(e){return e[0]})))),s=20,u=50,d=40,f=n*e.height,b=5,h=o.fitBounds([[a,l],[i,c]],{padding:{top:s+d+u,bottom:s+f+b,left:s+u/2,right:s+u/2},maxZoom:n?void 0:17});return h};t.default=function(){var e,t,n,o,r,a,i,l,m,v,w,k,C=Object(f.useRef)(null),E=Object(f.useRef)(null);Object(f.useEffect)((function(){if(C.current){var e=C.current.getMap();null===e||void 0===e||e.on("styleimagemissing",(function(t){var n=t.id;if(null===n||void 0===n?void 0:n.startsWith("icon-svg-")){var o,r=n.split("-"),a=Object(d.a)(r,6),i=a[2],l=a[3],c=a[4],s=a[5];if("pin"===i)o=oe;else if("triangle"===i)o=se;else{if("triangleDot"!==i)return;o=ce}var u=o(l,"fill: ".concat(c,"; stroke: ").concat(s));!function(e,t,n,o){var r=window.devicePixelRatio,a=document.createElement("canvas");a.width=r*o,a.height=r*o;var i=a.getContext("2d"),l=new Image(o,o),c="data:image/svg+xml,".concat(encodeURIComponent(n));l.onload=function(){if(!i)throw Error("canvas.getContext failed");i.drawImage(l,0,0,r*o,r*o),e.addImage(t,i.getImageData(0,0,r*o,r*o),{pixelRatio:r})},l.src=c}(e,n,u,l)}}))}}),[C]);var P=Object(b.e)({path:"/route/:from?/:to?"}),M=Object(b.e)({path:"/search/:query?"}),T=Object(b.e)({path:"/osm/:type?/:id?"}),D=Object(b.e)({path:"/olmap/workplace/:id?"}),N=Object(f.useState)(Jt),$=Object(d.a)(N,2),R=$[0],F=$[1],I=L(),W=Object(d.a)(I,1)[0],A=function(e,t,n){var o;return tn(Object(u.a)(Object(u.a)({},e),nt(null===(o=C.current)||void 0===o?void 0:o.getMap())),t,n)};Object(f.useEffect)((function(){if(C.current&&R.viewport.zoom&&!(R.viewport.zoom<12)){var e=nt(C.current.getMap()),t=e.width,n=e.height,o=Math.pow(2,13-R.viewport.zoom),r=dt(o*t,o*n,[R.viewport.longitude,R.viewport.latitude],14),a=new Map;r.forEach((function(e){var t=e.zoom,n=e.x,o=e.y,r="".concat(t,"/").concat(n,"/").concat(o);a.set(r,R.routableTiles.get(r)||null)})),F((function(e){return Object(u.a)(Object(u.a)({},e),{},{routableTiles:a})})),r.map(function(){var e=Object(s.a)(c.a.mark((function e(t){var n,o,r,i,l,s,p;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.zoom,o=t.x,r=t.y,i="".concat(n,"/").concat(o,"/").concat(r),null===a.get(i)){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,fetch("https://tile.olmap.org/building-tiles/".concat(n,"/").concat(o,"/").concat(r));case 6:return l=e.sent,e.next=9,l.json();case 9:s=e.sent,p=st(s),F((function(e){if(null!==e.routableTiles.get(i))return e;var t=new Map(e.routableTiles);return t.set(i,p),Object(u.a)(Object(u.a)({},e),{},{routableTiles:t})}));case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}),[C.current,R.viewport]),Object(f.useEffect)((function(){Object(s.a)(c.a.mark((function e(){var t,n,o,r,a,i,l,d,f,b,h,g,m;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.current&&R.viewport.zoom){e.next=2;break}return e.abrupt("return");case 2:if(!(R.viewport.zoom<12)){e.next=4;break}return e.abrupt("return");case 4:return n=function(){var e=Object(s.a)(c.a.mark((function e(t,n,o){var r,a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://api.olmap.org/kartta.hel.fi/maps/featureloader.ashx",{method:"POST",body:new URLSearchParams({request:"select",id:t,resolution:"1",params:"{}",where:"BBOX 'ENVELOPE(".concat(o,")'"),sort:"",gproj:"",aproj:"",maxfeatures:"50000",skipfeatures:"",ibbox:o,capfeatures:"1",outputType:"geojson",srs:"EPSG:3879"})});case 2:return r=e.sent,e.next=5,r.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t,n,o){return e.apply(this,arguments)}}(),o=C.current.getMap().getBounds(),r="".concat(o.getWest(),",").concat(o.getSouth(),",").concat(o.getEast(),",").concat(o.getNorth()),a=ht([o.getWest(),o.getSouth()]),i=ht([o.getEast(),o.getNorth()]),l="".concat(Math.floor(a[0]),",").concat(Math.floor(a[1]),",").concat(Math.floor(i[0]),",").concat(Math.floor(i[1])),d=["pysakointipaikat_kuormauspaikat","pysakointipaikat_pysakointikielto","pysakointipaikat_sallitut_kiellon_ulkopuolella"],e.next=13,Promise.all(d.map((function(e){return n(e,r,l)})));case 13:f=e.sent,b=(t=Zt.features).concat.apply(t,Object(p.a)(f.map((function(e){return e.features})))),h=yt(b),g=h.map((function(e){return"Point"===e.geometry.type?Object(u.a)(Object(u.a)({},e),{},{geometry:Object(u.a)(Object(u.a)({},e.geometry),{},{coordinates:gt(e.geometry.coordinates)})}):"Polygon"===e.geometry.type?Object(u.a)(Object(u.a)({},e),{},{geometry:Object(u.a)(Object(u.a)({},e.geometry),{},{coordinates:e.geometry.coordinates.map((function(e){return e.map((function(e){return gt(e)}))}))})}):e})),m={type:"FeatureCollection",features:g},F((function(e){return Object(u.a)(Object(u.a)({},e),{},{parkingData:m})}));case 19:case"end":return e.stop()}}),e)})))().catch((function(e){console.error("Error while fetching parking data:",e)}))}),[C.current,R.viewport]),Object(f.useEffect)((function(){Object(s.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(C.current&&R.viewport.zoom){e.next=2;break}return e.abrupt("return");case 2:if(!(R.viewport.zoom<12)){e.next=4;break}return e.abrupt("return");case 4:if(R.showTunnels){e.next=6;break}return e.abrupt("return");case 6:return t=C.current.getMap().getBounds(),n="".concat(t.getWest(),",").concat(t.getSouth(),",").concat(t.getEast(),",").concat(t.getNorth()),e.next=10,tt(n);case 10:o=e.sent,F((function(e){return Object(u.a)(Object(u.a)({},e),{},{tunnelData:o})}));case 12:case"end":return e.stop()}}),e)})))().catch((function(e){console.error("Error while fetching tunnel data:",e)}))}),[C.current,R.viewport,R.showTunnels]),Object(f.useEffect)((function(){var e,t=null===(e=C.current)||void 0===e?void 0:e.getMap().getBounds();F((function(e){return Object(u.a)(Object(u.a)({},e),{},{viewportMaskFeature:Object(_.a)([t.getWest(),t.getSouth(),t.getEast(),t.getNorth()])})}))}),[R.viewport]),Object(f.useEffect)((function(){if(C.current){var e=nt(C.current.getMap()),t=e.width,n=e.height;if(P&&null!=t&&t>0&&null!=n&&n>0){var o=en(P.params.from),r=en(P.params.to),a=Object(u.a)(Object(u.a)({},R.viewport),{},{width:t,height:n}),i=tn(a,[o,r]);F((function(e){return Object(u.a)(Object(u.a)({},e),{},{origin:o,isOriginExplicit:null!=o,destination:r&&Ut(r),viewport:Object(u.a)(Object(u.a)({},e.viewport),i)})}))}}}),[C]);var G=Object(b.d)(),B=Object(x.b)(),J=null===B||void 0===B?void 0:B.enqueueSnackbar,X=null===B||void 0===B?void 0:B.closeSnackbar;Object(f.useEffect)((function(){"/"!==G.location.pathname||W.welcomeSeen||F((function(e){return Object(u.a)(Object(u.a)({},e),{},{openHelp:!0})}))}),[]),Object(f.useEffect)((function(){var e=R.destination&&[R.destination.lat,R.destination.lon],t="/route/".concat(R.origin,"/").concat(e,"/");if(G.location.pathname!==t){var n=t;if(/utm_source=/.exec(G.location.search)){var o=new URLSearchParams(G.location.search).get("utm_source");if(null!==o){var r=new URLSearchParams({utm_source:o});n="".concat(t,"?").concat(r)}}G.replace(n)}}),[G,R.origin,R.destination]),Object(f.useEffect)((function(){Object(s.a)(c.a.mark((function e(){var t,n,o,r,a,i,l,s,p,d,f,b,h,g;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.destination){e.next=2;break}return e.abrupt("return");case 2:if(n=[],o=R.venueOlmapData,r=R.venueFeatures,-1!==R.destination.id&&(null===(t=R.entrances)||void 0===t?void 0:t.find((function(e){var t;return e.id===(null===(t=R.destination)||void 0===t?void 0:t.id)})))&&(n=R.entrances.slice()),e.prev=5,R.destination.id!==(null===(a=R.venue)||void 0===a?void 0:a.id)||"success"!==(null===(i=o)||void 0===i?void 0:i.state)||(null===(l=o.response.workplace)||void 0===l?void 0:l.osm_feature)!==R.destination.id){e.next=10;break}n=r.features.map((function(e){return Vt(e)})),e.next=22;break;case 10:if(R.destination.id!==(null===(s=R.venue)||void 0===s?void 0:s.id)){e.next=22;break}return e.next=13,me(R.venue.type,R.venue.id,R.locale);case 13:if(o=e.sent,r=Zt,"success"!==(null===(p=o)||void 0===p?void 0:p.state)){e.next=22;break}return b=null===(d=o.response.workplace)||void 0===d?void 0:d.workplace_entrances,h=null===b||void 0===b?void 0:b.map((function(e){return e.entrance_data.osm_feature||0})),e.next=20,Ye(h||[]);case 20:n=e.sent,(null===(f=o.response.workplace)||void 0===f?void 0:f.workplace_entrances)&&(g=[],null===b||void 0===b||b.forEach((function(e){var t=n.find((function(t){return t.id===e.entrance_data.osm_feature}));t?g.push(t):g.push({lat:Number(e.image_note.lat),lon:Number(e.image_note.lon),id:e.image_note.id,type:"olmap",tags:e.entrance_data.as_osm_tags})})),r=ye(o,g),n=g);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(5),console.error("Error while fetching venue entrances:",e.t0);case 27:if(e.prev=27,n.length){e.next=32;break}return e.next=31,Ve(R.destination);case 31:n=e.sent;case 32:e.next=37;break;case 34:e.prev=34,e.t1=e.catch(27),console.error("Error while fetching building entrances:",e.t1);case 37:F((function(e){if(!R.destination)return e;if(e.destination!==R.destination)return e;var t=n.length?n:[R.destination];return Object(u.a)(Object(u.a)({},e),{},{entrances:t,venueOlmapData:o,venueFeatures:r})}));case 38:case"end":return e.stop()}}),e,null,[[5,24],[27,34]])})))().catch((function(e){console.error("Error while handling entrances:",e)}))}),[R.destination,R.venue]),Object(f.useEffect)((function(){Object(s.a)(c.a.mark((function e(){var t,n,o,r,a,i,l,s,p,f,b,m,v,j,x,O,w,k,_,S,C,L,E;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.snackbar&&X(R.snackbar),R.destination&&R.entrances){e.next=3;break}return e.abrupt("return");case 3:if(r=R.origin,a=[],R.entrances.forEach((function(e){R.destination&&R.destination.type===e.type&&R.destination.id===e.id&&(a=[e])})),a.length||(a=R.entrances),F((function(e){return Object(u.a)(Object(u.a)({},e),{},{route:Ae()})})),i=[],R.destination.id===(null===(t=R.venue)||void 0===t?void 0:t.id)&&(i=je(R.venueOlmapData)),!(l="success"===(null===(n=R.venueOlmapData)||void 0===n?void 0:n.state)&&(null===(o=R.venueOlmapData.response.workplace)||void 0===o?void 0:o.workplace_entrances.find((function(e){var t,n;return e.entrance_data.osm_feature===(null===(t=R.destination)||void 0===t?void 0:t.id)||e.image_note.id===(null===(n=R.destination)||void 0===n?void 0:n.id)})))||void 0)||!l.unloading_places.length){e.next=15;break}i=l.unloading_places,e.next=27;break;case 15:if(!i.length){e.next=19;break}R.unloadingPlace&&(s=i.find((function(e){var t;return e.id===(null===(t=R.unloadingPlace)||void 0===t?void 0:t.id)})))&&(i=[s]),e.next=27;break;case 19:if(R.origin&&!(Qt(R.origin,Kt(R.destination))>=Ht)){e.next=27;break}if((null===(p=R.destination.tags)||void 0===p?void 0:p["addr:street"])?(f=R.destination,b=null===(m=R.destination.tags)||void 0===m?void 0:m["addr:street"]):(j=a,x=Object(d.a)(j,1),f=x[0],b=null===(v=f.tags)||void 0===v?void 0:v["addr:street"]),!b){e.next=27;break}return e.next=24,Je(f,b);case 24:O=e.sent,w=Object(z.a)(O,[f.lon,f.lat]).geometry.coordinates,r=[w[1],w[0]];case 27:if(r||i.length){e.next=29;break}return e.abrupt("return");case 29:if(!(!i.length&&r&&r===R.origin&&Qt(r,Kt(R.destination))>=Ht)){e.next=34;break}return k=R.isOriginExplicit?"Origin is too far for showing routes.":"Routes show when distance is shorter.",_=J(k,{variant:"info",persist:!0,anchorOrigin:{vertical:"bottom",horizontal:"center"},action:Object(ee.jsxs)(ee.Fragment,{children:[R.isOriginExplicit&&Object(ee.jsx)(h.a,{color:"inherit",onClick:function(){F((function(e){return Object(u.a)(Object(u.a)({},e),{},{origin:e.geolocationPosition||void 0,isOriginExplicit:!1,viewport:A(e.viewport,[e.destination&&Kt(e.destination)])})}))},children:"Undo origin"}),Object(ee.jsx)(h.a,{color:"inherit",onClick:function(){F((function(e){return Object(u.a)(Object(u.a)({},e),{},{destination:void 0,entrances:[],viewport:A(e.viewport,[e.origin])})}))},children:"Undo destination"}),Object(ee.jsx)(h.a,{color:"inherit",target:"_blank",rel:"noreferrer",href:"https://www.google.com/maps/dir/?api=1&origin=".concat(R.origin[0],",").concat(R.origin[1],"&destination=").concat(R.destination.lat,",").concat(R.destination.lon,"&travelmode=driving"),children:"Google Maps"}),Object(ee.jsx)(g.a,{"aria-label":"close",onClick:function(){return X(_)},children:Object(ee.jsx)(y.a,{})})]})}),F((function(e){return Object(u.a)(Object(u.a)({},e),{},{snackbar:_})})),e.abrupt("return");case 34:return S=[],i.length?R.destination.id===(null===(C=R.venue)||void 0===C?void 0:C.id)?(c=R.venueOlmapData,L=ve(c)[1],i.forEach((function(e){L[e.id].forEach((function(t){var n,o,r=null===(n=R.entrances)||void 0===n?void 0:n.find((function(e){return e.id===t}));r&&"olmap"!==r.type&&S.push([be(e.image_note),r,"delivery-walking"]),null===(o=e.access_points)||void 0===o||o.forEach((function(t){S.push([Ut([Number(t.lat),Number(t.lon)]),Object(u.a)(Object(u.a)({},be(e.image_note)),{},{lat:Number(e.image_note.lat)+1e-6,lon:Number(e.image_note.lon)+1e-6}),"delivery-car"])}))}))}))):null===l||void 0===l||null===(E=l.unloading_places)||void 0===E||E.forEach((function(e){var t;R.destination&&"olmap"!==R.destination.type&&S.push([be(e.image_note),R.destination,"delivery-walking"]),null===(t=e.access_points)||void 0===t||t.forEach((function(t){S.push([Ut([Number(t.lat),Number(t.lon)]),Object(u.a)(Object(u.a)({},be(e.image_note)),{},{lat:Number(e.image_note.lat)+1e-6,lon:Number(e.image_note.lon)+1e-6}),"delivery-car"])}))})):a.forEach((function(e){r&&S.push([Ut(r),e])})),e.next=38,Ge(S,(function(e){F((function(t){if(R.origin!==t.origin||R.entrances!==t.entrances||R.destination!==t.destination)return t;var n=Object(u.a)(Object(u.a)({},e),{},{features:e.features.concat(t.route.features)}),o=e.features.find((function(e){var t,n,o=null===(t=e.properties)||void 0===t?void 0:t.tunnel,r=null===(n=e.properties)||void 0===n?void 0:n.layer;return o&&Number(r)<0}));return Object(u.a)(Object(u.a)({},t),{},{route:n,showTunnels:t.showTunnels||!!o})}))}));case 38:case"end":return e.stop()}var c}),e)})))().catch((function(e){console.error("Error while starting route planning:",e)}))}),[R.origin,R.entrances,R.unloadingPlace]),Object(f.useEffect)((function(){Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(R.popupCoordinates){e.next=2;break}return e.abrupt("return");case 2:return F((function(e){return e.popupCoordinates!==R.popupCoordinates?e:Object(u.a)(Object(u.a)({},e),{},{olmapData:{state:"loading"}})})),e.next=5,me(R.popupCoordinates.type,R.popupCoordinates.id,R.locale);case 5:t=e.sent,F((function(e){return e.popupCoordinates!==R.popupCoordinates?e:Object(u.a)(Object(u.a)({},e),{},{olmapData:t})}));case 7:case"end":return e.stop()}}),e)})))().catch((function(e){console.error("Error while fetching OLMap notes:",e)}))}),[R.popupCoordinates,R.locale]),Object(f.useEffect)((function(){var e;"success"===(null===(e=R.venueOlmapData)||void 0===e?void 0:e.state)&&R.venueOlmapData.response.workplace&&F((function(e){var t,n=R.destination&&Kt(R.destination),o=e.origin&&n&&Qt(e.origin,n)<Ht?[e.origin,n]:[n],r=(null===(t=R.entrances)||void 0===t?void 0:t.map(Kt))||[],a=R.venue&&[Kt(R.venue)]||[],i=je(R.venueOlmapData),l=i.map((function(e){return[Number(e.image_note.lat),Number(e.image_note.lon)]})),c=[];i.forEach((function(e){var t;return null===(t=e.access_points)||void 0===t?void 0:t.forEach((function(e){c.push([Number(e.lat),Number(e.lon)])}))}));var s=A(e.viewport,[].concat(o,Object(p.a)(r),Object(p.a)(a),Object(p.a)(l),c),.5);return Object(u.a)(Object(u.a)({},e),{},{viewport:s})}))}),[R.venueOlmapData]);var Y=function(e){var t,n=null===(t=C.current)||void 0===t?void 0:t.getMap().queryRenderedFeatures(e.point).find((function(e){return"viewport"!==e.source}));F((function(t){var o,r={type:"FeatureCollection",features:[]},a=Ut([e.lngLat.lat,e.lngLat.lng]);if("parking"===(null===n||void 0===n?void 0:n.source)){var i={};return"Pys\xe4k\xf6inti sallittu pys\xe4k\xf6intikieltoajan ulkopuolella"===n.properties["hel:luokka_nimi"]?i["Pys\xe4k\xf6intikielto"]=n.properties["hel:voimassaolo"]||"":i[n.properties["hel:tyyppi"]]="",n.properties["hel:paikat_ala"]&&(i["Henkil\xf6autoja"]=n.properties["hel:paikat_ala"]),i.ID=n.properties["hel:id"],Object(u.a)(Object(u.a)({},t),{},{popupCoordinates:{type:"node",id:-1,lat:e.lngLat.lat,lon:e.lngLat.lng,tags:i},highlights:r})}if(null===n||void 0===n||null===(o=n.properties["@id"])||void 0===o?void 0:o.startsWith("olmap"))return Object(u.a)(Object(u.a)({},t),{},{editingNote:n.properties["@id"].split("/").reverse()[0]});if((null===n||void 0===n?void 0:n.properties.entrance)||"loading"===(null===n||void 0===n?void 0:n.properties["parking:condition"])){var l=Vt(n);return Object(u.a)(Object(u.a)({},t),{},{popupCoordinates:l,highlights:r})}if((null===n||void 0===n?void 0:n.properties.barrier)||"steps"===(null===n||void 0===n?void 0:n.properties.highway)||(null===n||void 0===n?void 0:n.properties["@obstacle"])){var c=n.properties["@id"].split("/").reverse()[0],s="Point"===n.geometry.type?n.geometry.coordinates:Object(z.a)(n,e.lngLat.toArray()).geometry.coordinates,p=Object(d.a)(s,2),f=p[0],b=p[1];return Object(u.a)(Object(u.a)({},t),{},{popupCoordinates:{id:c,type:n.properties["@type"],lat:b,lon:f,tags:n.properties},highlights:r})}return null!=t.popupCoordinates?Object(u.a)(Object(u.a)({},t),{},{popupCoordinates:null,highlights:r}):"building"===(null===n||void 0===n?void 0:n.sourceLayer)?Object(u.a)(Object(u.a)({},t),{},{popupCoordinates:a,highlights:n.toJSON()}):Object(u.a)(Object(u.a)({},t),{},{popupCoordinates:a,highlights:r})}))},te=function(e){var t,n;return"success"===(null===e||void 0===e?void 0:e.state)&&(null===(t=e.response.image_notes)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.id)},ne=function(e){var t=te(R.olmapData);t&&(F((function(e){return Object(u.a)(Object(u.a)({},e),{},{editingNote:t})})),e.preventDefault())},ae=Object(f.useCallback)(function(){var e=Object(s.a)(c.a.mark((function e(t){var n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(null===(n=R.venue)||void 0===n?void 0:n.id)){e.next=6;break}return e.next=3,me(R.venue.type,R.venue.id,t);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=void 0;case 7:o=e.t0,F((function(e){return Object(u.a)(Object(u.a)({},e),{},{locale:t,venueOlmapData:o})}));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[R.venue]),ie=Object(f.useCallback)((function(e){setTimeout((function(){E.current.blur()}));var t=[e.geometry.coordinates[1],e.geometry.coordinates[0]],n=e.properties.source_id.split(":"),o=Object(d.a)(n,2),r=o[0],a=o[1];F((function(n){var o=n.origin&&Qt(n.origin,t)<Ht?[n.origin,t]:[t],i=A(n.viewport,o),l={lat:t[0],lon:t[1],type:r,id:Number(a),tags:{name:e.properties.name,"addr:street":e.properties.street}};return Object(u.a)(Object(u.a)({},n),{},{origin:n.origin,destination:l,entrances:[],venue:l,venueDialogOpen:"venue"===e.properties.layer,venueDialogCollapsed:!1,venueOlmapData:void 0,viewport:Object(u.a)(Object(u.a)({},n.viewport),i),venueFeatures:Zt,unloadingPlace:void 0})}))}),[]);return Object(f.useEffect)((function(){Object(s.a)(c.a.mark((function e(){var t,n,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null===M||void 0===M?void 0:M.params.query){e.next=3;break}return e.abrupt("return");case 3:return E.current.update(n),e.next=6,E.current.autocomplete(n);case 6:if(e.t1=t=e.sent,e.t0=null===e.t1,e.t0){e.next=10;break}e.t0=void 0===t;case 10:if(!e.t0){e.next=14;break}e.t2=void 0,e.next=15;break;case 14:e.t2=t.features;case 15:(null===(o=e.t2)||void 0===o?void 0:o.length)?1===(null===o||void 0===o?void 0:o.length)?(E.current.update(o[0].properties.label),ie(o[0])):E.current.focus():alert("Search did not produce any results");case 17:case"end":return e.stop()}}),e)})))().catch((function(e){console.error("Error while geocoding the query from a link:",e)}))}),[M,ie]),Object(f.useEffect)((function(){Object(s.a)(c.a.mark((function e(){var t,n,o,r,a,i,l;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(T){e.next=2;break}return e.abrupt("return");case 2:if(t=T.params.type,n=Number(T.params.id),-1!==["node","way","relation"].indexOf(t)&&n>0){e.next=7;break}return alert("Broken link"),e.abrupt("return");case 7:if("node"!==t){e.next=13;break}return e.next=10,Ye([n]);case 10:e.t0=e.sent,e.next=16;break;case 13:return e.next=15,et(t,[n]);case 15:e.t0=e.sent;case 16:(o=e.t0).length?(r=o[0],a=r.tags||{},i="".concat(a["addr:street"]||""," ").concat(a["addr:housenumber"]||""," ").concat(a.ref||a["addr:unit"]||""),E.current.update(a.name&&i.replace(/ /g,"")?"".concat(a.name,", ").concat(i):a.name||i),l="center"in r?[r.center.lon,r.center.lat]:[r.lon,r.lat],ie({geometry:{coordinates:l},properties:{source_id:"".concat(r.type,":").concat(r.id),street:a["addr:street"],name:a.name,layer:a.name?"venue":void 0}})):alert("Linked map feature not found");case 18:case"end":return e.stop()}}),e)})))().catch((function(e){console.error("Error while resolving the OSM id from a link:",e)}))}),[T,ie]),Object(f.useEffect)((function(){Object(s.a)(c.a.mark((function e(){var t,n,o,r;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D){e.next=2;break}return e.abrupt("return");case 2:if((t=Number(D.params.id))>0){e.next=6;break}return alert("Broken link"),e.abrupt("return");case 6:return e.next=8,me("workplace",t,"");case 8:"success"===(null===(n=e.sent)||void 0===n?void 0:n.state)&&n.response.workplace?(o=n.response.workplace,E.current.update(o.as_osm_tags.name),r=[o.image_note.lon,o.image_note.lat],ie({geometry:{coordinates:r},properties:{source_id:"workplace:".concat(o.id),street:o.as_osm_tags["addr:street"],name:o.as_osm_tags.name,layer:"venue"}})):alert("Linked OLMap workplace not found");case 10:case"end":return e.stop()}}),e)})))().catch((function(e){console.error("Error while resolving the OLMap id from a link:",e)}))}),[D,ie]),Object(ee.jsxs)("div",{"data-testid":"app",className:"App",children:[Object(ee.jsx)("header",{className:"App-header",children:Object(ee.jsx)("h2",{children:"Gatesolve"})}),Object(ee.jsx)("div",{className:"App-shadow"}),Object(ee.jsx)(S.ReactAutosuggestGeocoder,{ref:E,url:"https://api.digitransit.fi/geocoding/v1",fetch:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return fetch("".concat(e,"&").concat(qt))})),sources:"oa,osm,nlsfi",highlightFirstSuggestion:!0,inputProps:{placeholder:"Destination name or address"},center:{latitude:(null===(e=R.geolocationPosition)||void 0===e?void 0:e[0])||(null===(t=R.origin)||void 0===t?void 0:t[0])||(null===(n=R.destination)||void 0===n?void 0:n.lat)||Xt[0],longitude:(null===(o=R.geolocationPosition)||void 0===o?void 0:o[1])||(null===(r=R.origin)||void 0===r?void 0:r[1])||(null===(a=R.destination)||void 0===a?void 0:a.lon)||Xt[1]},onSuggestionSelected:function(e,t){var n=t.suggestion;ie(n)}}),Object(ee.jsxs)(O.e,Object(u.a)(Object(u.a)({ref:C},R.viewport),{},{style:{width:"100%",height:"90%"},mapStyle:vt,dragRotate:!1,transformRequest:Yt,onViewportChange:function(e){F((function(t){return Object(u.a)(Object(u.a)({},t),{},{viewport:e})}))},onHover:function(e){var t,n=null===(t=e.features)||void 0===t?void 0:t[0],o=(null===n||void 0===n?void 0:n.properties.entrance)?"pointer":"grab",r=document.querySelector(".overlays");r&&(r.style.cursor=o)},onClick:Y,onContextmenu:Y,children:[Object(ee.jsx)(ke,{dataTestId:"geolocate-control",enableOnMount:!0,onEnable:function(e){F((function(t){return Object(u.a)(Object(u.a)({},t),{},{isOriginExplicit:!e&&t.isOriginExplicit,isGeolocating:!0})}))},onDisable:function(){F((function(e){return Object(u.a)(Object(u.a)({},e),{},{isGeolocating:!1,geolocationPosition:null})}))},onGeolocate:function(e){return F((function(t){if(t.isGeolocating){var n=null==t.geolocationPosition,o=[e.coords.latitude,e.coords.longitude],r=!n||t.isOriginExplicit||t.venue&&t.destination&&Qt(o,Kt(t.destination))>Ht?t.viewport:A(t.viewport,[o,t.destination&&Kt(t.destination)]),a=Object(u.a)(Object(u.a)({},t),{},{geolocationPosition:o,viewport:r});return!t.isOriginExplicit&&(null==t.origin||Qt(t.origin,o)>20)?Object(u.a)(Object(u.a)({},a),{},{origin:o}):a}return t}))}}),Object(ee.jsx)(Ee,{dataTestId:"tunnels-control",enabled:R.showTunnels,setEnabled:function(e){F((function(t){return Object(u.a)(Object(u.a)({},t),{},{showTunnels:e})}))}}),Object(ee.jsx)(Re,{dataTestId:"help-control",initiallyOpen:!!R.openHelp,locale:R.locale,onLocaleSelected:ae}),null!=R.geolocationPosition&&Object(ee.jsx)(O.b,{offset:[-20,-20],longitude:R.geolocationPosition[1],latitude:R.geolocationPosition[0],children:Object(ee.jsx)(we,{dataTestId:"user-marker"})}),Array.from(R.routableTiles.entries(),(function(e){var t=Object(d.a)(e,2),n=t[0],o=t[1];return o&&Object(ee.jsx)(O.d,{id:"source-".concat(n),type:"geojson",data:o,children:Q.map((function(e){return Object(f.createElement)(O.a,Object(u.a)(Object(u.a)({},e),{},{key:"".concat(e.id,"-").concat(n),id:"".concat(e.id,"-").concat(n),source:"source-".concat(n),before:"label_housenum"}))}))},n)})),Object(ee.jsx)(O.d,{id:"parking",type:"geojson",data:R.parkingData||Zt,children:K.map((function(e){return Object(f.createElement)(O.a,Object(u.a)(Object(u.a)({},e),{},{key:e.id,source:"parking",before:"label_housenum"}))}))}),Object(ee.jsx)(O.d,{id:"viewport",type:"geojson",data:R.viewportMaskFeature||Zt,children:R.showTunnels&&Z.map((function(e){return Object(f.createElement)(O.a,Object(u.a)(Object(u.a)({},e),{},{key:e.id,source:"viewport",before:"label_road_street"}))}))}),Object(ee.jsx)(O.d,{id:"tunnels",type:"geojson",data:R.tunnelData||Zt,children:R.showTunnels&&V.map((function(e){return Object(f.createElement)(O.a,Object(u.a)(Object(u.a)({},e),{},{key:e.id,source:"tunnels",before:"label_road_street"}))}))}),Object(ee.jsx)(O.d,{id:"highlights",type:"geojson",data:R.highlights,children:Object(ee.jsx)(O.a,Object(u.a)(Object(u.a)({},U),{},{source:"highlights",before:"label_housenum"}))}),Object(ee.jsx)(O.d,{id:"venue",type:"geojson",data:R.venueFeatures,children:H.map((function(e){return Object(f.createElement)(O.a,Object(u.a)(Object(u.a)({},e),{},{key:e.id,source:"venue"}))}))}),Object(ee.jsx)(O.d,{id:"route",type:"geojson",data:R.route,children:q.map((function(e){return Object(f.createElement)(O.a,Object(u.a)(Object(u.a)({},e),{},{key:e.id,source:"route",before:e.beforeId||"venue-symbol"}))}))}),R.origin&&Object(ee.jsx)(O.b,{className:"PinMarker",draggable:!0,offset:[0,-22.5],onDragEnd:function(e){F((function(t){return Object(u.a)(Object(u.a)({},t),{},{origin:[e.lat,e.lng],isOriginExplicit:!0})}))},longitude:R.origin[1],latitude:R.origin[0],children:Object(ee.jsx)(re,{dataTestId:"origin",style:{fill:"#00afff",stroke:"#fff"}})}),R.destination&&Object(ee.jsx)(O.b,{className:"PinMarker",draggable:!0,offset:[0,-22.5],onDragEnd:function(e){E.current.clear(),F((function(t){return Object(u.a)(Object(u.a)({},t),{},{destination:Ut([e.lat,e.lng])})}))},longitude:R.destination.lon,latitude:R.destination.lat,children:Object(ee.jsx)(re,{dataTestId:"destination",style:{fill:"#64be14",stroke:"#fff"}})}),R.popupCoordinates&&Object(ee.jsxs)(O.c,{open:null!=R.popupCoordinates,latitude:(null===(i=R.popupCoordinates)||void 0===i?void 0:i.lat)||null,longitude:(null===(l=R.popupCoordinates)||void 0===l?void 0:l.lon)||null,maxWidth:"260px",closeButton:!1,closeOnClick:!1,children:[Object(ee.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"30px 1fr 30px"},children:[Object(ee.jsx)("div",{}),Object(ee.jsxs)("div",{style:{fontSize:"14px",fontWeight:"bold"},children:[null===(m=R.popupCoordinates.tags)||void 0===m?void 0:m["addr:street"]," ",null===(v=R.popupCoordinates.tags)||void 0===v?void 0:v["addr:housenumber"]," ",(null===(w=R.popupCoordinates.tags)||void 0===w?void 0:w.ref)||(null===(k=R.popupCoordinates.tags)||void 0===k?void 0:k["addr:unit"])]}),Object(ee.jsx)("div",{style:{textAlign:"right"},children:Object(ee.jsx)("a",{"aria-label":"Comment",href:function(e,t){if("loading"===(null===t||void 0===t?void 0:t.state))return null;var n,o=te(t);return o?fe(o):-1===(n=e).id?"https://app.olmap.org/#/Notes/new/photo/@".concat(n.lat,",").concat(n.lon):"https://app.olmap.org/#/Notes/new/".concat(n.id,"/photo/@").concat(n.lat,",").concat(n.lon)}(R.popupCoordinates,R.olmapData)||"#",target:"_blank",rel:"noopener noreferrer",style:{display:"inline-flex"},onClick:ne,children:Object(ee.jsx)(j.a,{style:{color:"#ff5000",backgroundColor:"#fff"}})})})]}),Object(ee.jsx)(Oe,{onImageClick:ne,olmapData:R.olmapData}),R.popupCoordinates.tags&&Object(ee.jsx)("table",{style:{marginTop:"10px",marginBottom:"10px",textAlign:"left"},children:Object(ee.jsx)("tbody",{children:Object.entries(R.popupCoordinates.tags).filter((function(e){var t=Object(d.a)(e,1)[0];return!t.startsWith("@")&&!["addr:street","addr:housenumber","addr:unit","ref"].includes(t)})).map((function(e){var t=Object(d.a)(e,2),n=t[0],o=t[1];return Object(ee.jsxs)("tr",{children:[Object(ee.jsx)("td",{style:{padding:"0 5px 0 0",textAlign:"right"},children:n}),Object(ee.jsx)("td",{children:o})]},"".concat(n,"-").concat(o))}))})}),Object(ee.jsxs)("div",{style:{display:"flex",justifyContent:"center"},children:[Object(ee.jsx)(h.a,{"data-testid":"origin-button",variant:"contained",size:"small",style:{backgroundColor:"#00afff",color:"#fff"},type:"button","aria-label":"Set origin",onClick:function(){return F((function(e){return null!=e.popupCoordinates?Object(u.a)(Object(u.a)({},e),{},{origin:Kt(e.popupCoordinates),isOriginExplicit:!0,popupCoordinates:null}):Object(u.a)(Object(u.a)({},e),{},{isOriginExplicit:!0,popupCoordinates:null})}))},children:"Origin"}),Object(ee.jsx)("span",{style:{padding:"5px"}}),Object(ee.jsx)(h.a,{"data-testid":"destination-button",variant:"contained",size:"small",style:{backgroundColor:"#64be14",color:"#fff"},type:"button","aria-label":"Set destination",onClick:function(){return F((function(e){return null!=e.popupCoordinates?Object(u.a)(Object(u.a)({},e),{},{destination:e.popupCoordinates,popupCoordinates:null}):Object(u.a)(Object(u.a)({},e),{},{popupCoordinates:null})}))},children:"Destination"}),Object(ee.jsx)("span",{style:{padding:"5px"}}),Object(ee.jsx)(h.a,{"data-testid":"google-maps-button",variant:"contained",size:"small",style:{backgroundColor:"#db4437",color:"#fff"},type:"button","aria-label":"Open Google Maps",target:"_blank",rel:"noreferrer",href:"https://www.google.com/maps/dir/?api=1&destination=".concat(null===R||void 0===R?void 0:R.popupCoordinates.lat,",").concat(null===R||void 0===R?void 0:R.popupCoordinates.lon,"&travelmode=driving"),onClick:function(){return F((function(e){return Object(u.a)(Object(u.a)({},e),{},{popupCoordinates:null})}))},children:"Google"})]})]})]})),Object(ee.jsx)(xe,{noteId:R.editingNote,onClose:function(){return F((function(e){return Object(u.a)(Object(u.a)({},e),{},{editingNote:void 0})}))}}),Object(ee.jsx)(Bt,{open:R.venueDialogOpen,collapsed:R.venueDialogCollapsed,venue:R.venue,venueOlmapData:R.venueOlmapData,restrictions:R.route,locale:R.locale,onViewDetails:function(e){F((function(t){return Object(u.a)(Object(u.a)({},t),{},{editingNote:e.id})}))},onEntranceSelected:function(e){F((function(t){var n=t.venueFeatures.features.filter((function(e){var t;return"Point"===e.geometry.type&&(null===(t=e.properties)||void 0===t?void 0:t.entrance)})),o=t.venueFeatures.features.find((function(t){var n;return null===(n=t.properties)||void 0===n?void 0:n["@id"].endsWith("/".concat(e))}));return Object(u.a)(Object(u.a)({},t),{},{unloadingPlace:void 0,destination:o&&"Point"===o.geometry.type&&Vt(o)||void 0,entrances:n.map((function(e){return Vt(e)}))})}))},onUnloadingPlaceSelected:function(e){F((function(t){var n=t.venueFeatures.features.filter((function(e){var t;return"Point"===e.geometry.type&&(null===(t=e.properties)||void 0===t?void 0:t.entrance)}));return Object(u.a)(Object(u.a)({},t),{},{unloadingPlace:e,destination:t.venue,entrances:n.map((function(e){return Vt(e)}))})}))},onClose:function(){E.current.clear(),F((function(e){return Object(u.a)(Object(u.a)({},e),{},{venueDialogOpen:!1,venueDialogCollapsed:!1,venueOlmapData:void 0,venueFeatures:Zt,venue:void 0,origin:e.geolocationPosition||void 0,originIsExplicit:!1,destination:void 0,entrances:[],unloadingPlace:void 0,route:Ae()})}))},onCollapsingToggled:function(){return F((function(e){return Object(u.a)(Object(u.a)({},e),{},{venueDialogCollapsed:!R.venueDialogCollapsed})}))},onRestrictionSelected:function(e){F((function(t){return Object(u.a)(Object(u.a)({},t),{},{popupCoordinates:Vt(e)})}))},onLocaleSelected:ae})]})}}},0,[4,2]]);
//# sourceMappingURL=App.aa2293c4.chunk.js.map